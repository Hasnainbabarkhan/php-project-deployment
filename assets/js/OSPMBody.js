define("tao/ospm/main/WorkflowStepState",["tao/ospm/common/Logger"],function(e){function t(e,o,r){var s,a,l;this.workflowStep=o,this.title=null,this.stateChangeCallback=null,this.TaoOSPM=null,this.layout=null,this.loadStage=null,this.visible=!1,this.mapiDom=null,this.getId=function(){return s},this.getFrameId=function(){return e},this.getState=function(){return a},this.isRunning=function(){return a===t.RUNNING},this.setState=function(e){var t,i=l;return l=Date.now(),i&&n.debug("WorkflowStepState %o wechselte von %o nach %o in %o ms.",s,a,e,l-i),a=e,"function"==typeof this.stateChangeCallback&&(t=this.stateChangeCallback,this.stateChangeCallback=null,t(this,a)),l-i},this.toString=function(){return"WorkflowStepState"+JSON.stringify({workflowStepId:this.workflowStep,title:this.title,frameId:this.frameId,commId:s,state:a})},s=++i,this.setState(r||t.NEW)}var n,i;return n=new e("OSPM","WorkflowStepState"),i=0,t.NEW=0,t.LOADING=1,t.LOADED=2,t.RUNNING=3,t.EXITED=4,t.UNLOADING=5,t.UNLOADED=6,t}),define("tao/ospm/main/MessagesSupport",["tao/ospm/common/Config"],function(e){function t(t){var n,i,o=e.MESSAGE_DEFAULT_TITLES;t=!0===isNaN(parseInt(t,10))?0:t;for(n in o)o.hasOwnProperty(n)&&t>=n&&(void 0===i||t>=i)&&(i=n);return void 0===i&&(i=0),parseInt(i,10)}var n="messagesChanged",i="newMessage";return{MESSAGES_CHANGED:n,NEW_MESSAGE:i,getMatchingCode:t,defaultTitle:function(n){return e.MESSAGE_DEFAULT_TITLES[t(n)]}}}),define("tao/ospm/zoom/dummies/Messages",["tao/lib/stapes","tao/ospm/main/MessagesSupport"],function(e,t){var n,i,o=[];return n=e.subclass({MESSAGES_CHANGED:t.MESSAGES_CHANGED,NEW_MESSAGE:t.NEW_MESSAGE,constructor:function(){},clear:function(){},setWorkflowDepth:function(){},getCurrentWorkflowDepth:function(){return 0},all:function(){return o},count:function(){return o.length},add:function(){return""},reduceStepsToDelete:function(){},get:function(){},remove:function(){return""},getMatchingCode:t.getMatchingCode,defaultTitle:t.defaultTitle,getClassName:function(){return"Messages"}}),i=new n}),define("tao/ospm/bc/internal/BusinessComponentToolkit",["tao/ospm/common/Toolkit"],function(e){var t;return t={loadJSON:function(t,n,i){var o=e.mapURLToEnvironmentURL(t);e.loadJSON(o,n,i)},createFunctionName:function(e,t){return e+t.substr(0,1).toUpperCase()+t.substr(1)},getLocalComponentTypePath:function(e){var n,i,o=e.lastIndexOf("/");return o>=0?(n=t.getComponentTypeId(e),i=t.getLocalComponentTypeId(n),e.substr(0,o)+"/"+i):""},getComponentTypeId:function(e){var t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e},getAppId:function(e){return t.getComponentTypeId(e).split(".")[0].toLowerCase()},getLocalComponentTypeId:function(e){return t.getComponentTypeId(e).split(".")[1]},iterateOwnProperties:function(e,t){e&&Object.keys(e).forEach(function(n){Object.prototype.hasOwnProperty.call(e,n)&&t(n)})},setProperties:function(e,n){t.iterateOwnProperties(n,function(t){e[t]=n[t]})},deleteOwnProperties:function(t,n){n=n||Object.getOwnPropertyNames(t),n.forEach(function(n){Object.prototype.hasOwnProperty.call(t,n)&&e.deleteProperty(t,n)})},copyIfArray:function(e){return Array.isArray(e)?e.slice():e},deepCopy:function(e){var n,i=e;return e&&"object"==typeof e?(i=Array.isArray(e)?[]:{},Object.keys(e).forEach(function(o){n=e[o],i[o]="object"==typeof n?t.deepCopy(n):n}),i):e},valuesAreEqual:function(e,n,i){var o,r;if(i=i!==!1,e&&n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;if(i){for(o=0;o<e.length;o++)if(!t.valuesAreEqual(e[o],n[o]))return!1}else for(o=0;o<e.length;o++)if(e[o]!==n[o])return!1;return!0}if(i&&"object"==typeof e&&"object"==typeof n){if(Object.getOwnPropertyNames(e).length!==Object.getOwnPropertyNames(n).length)return!1;for(r in e)if(e.hasOwnProperty(r)&&!t.valuesAreEqual(e[r],n[r],i))return!1;return!0}return e===n}return e===n},checkObjectHasNoOtherProperties:function(e,n,i,o){o=o||"",t.iterateOwnProperties(e,function(e){n.indexOf(e)<0&&i.push("Das Property "+o+e+" ist nicht erlaubt!")}.bind(this))},checkObjectHasProperties:function(e,t,n,i){i=i||"",t.forEach(function(t){"undefined"==typeof e[t]&&n.push("Für das Property "+i+t+" muss ein Wert angegeben werden!")}.bind(this))},findWhere:function(e,t){var n,i,o;if(e&&t&&"object"==typeof t&&!Array.isArray(t))for(i in e)if(e.hasOwnProperty(i)){n=!0;for(o in t)if(t.hasOwnProperty(o)&&e[i][o]!==t[o]){n=!1;break}if(n)return e[i]}}}}),define("tao/ospm/bc/internal/BusinessComponentType",["tao/lib/stapes"],function(e){return e.subclass({descriptor:null,delegateClass:null,constructor:function(e,t){this.descriptor=e,this.delegateClass=t},getDescriptor:function(){return this.descriptor},getDelegateClass:function(){return this.delegateClass}})}),define("tao/ospm/bc/BusinessComponentTechnicalError",["tao/lib/stapes","tao/ospm/bc/internal/BusinessComponentToolkit"],function(e,t){var n=e.subclass({appId:"",componentTypeId:"",component:null,message:null,mainMessage:null,subMessages:null,id:null,cause:null,constructor:function(e){e=e||{},this.appId=e.appId,this.componentTypeId=e.componentTypeId,this.component=e.component,this.id=e.id,this.cause=e.cause,this.component&&(this.componentTypeId=this.component.getDescriptor().id),this.appId||(this.appId=t.getAppId(this.componentTypeId)),this.mainMessage=this.buildMainMessage(e.message),this.subMessages=e.subMessages||[],this.message=this.buildCompleteMessage(this.mainMessage)},getId:function(){return this.id},getComponentTypeId:function(){return this.componentTypeId},getComponent:function(){return this.component},getMessage:function(){return this.message},getMainMessage:function(){return this.mainMessage},getSubMessages:function(){return this.subMessages},getCause:function(){return this.cause},buildMainMessage:function(e){var n;return n=this.componentTypeId?this.appId===t.getAppId(this.componentTypeId)?"Technischer Fehler in Business-Komponente vom Typ "+this.componentTypeId:"Technischer Fehler in der Anwendung "+this.appId+" beim Zugriff auf die Business-Komponente vom Typ "+this.componentTypeId:"Technischer Fehler in der Anwendung "+this.appId,n=n+" ("+this.id+"): "+e},buildCompleteMessage:function(e){var t,n=e;if(this.subMessages)for(t=0;t<this.subMessages.length;t++)n=n+"\n  ("+(t+1)+") "+this.subMessages[t];return this.cause&&(n=n+"\n Auslösender Fehler: "+this.cause),n}});return n.ID={TYPE_DEPENDENCIES_DESCRIPTOR_NOT_LOADABLE:"TYPE_DEPENDENCIES_DESCRIPTOR_NOT_LOADABLE",TYPE_DESCRIPTOR_NOT_LOADABLE:"TYPE_DESCRIPTOR_NOT_LOADABLE",TYPE_DESCRIPTOR_VALIDATION_FAILED:"TYPE_DESCRIPTOR_VALIDATION_FAILED",TYPE_DELEGATE_CLASS_NOT_LOADABLE:"TYPE_DELEGATE_CLASS_NOT_LOADABLE",TYPE_DEPENDENCY_NOT_DECLARED:"TYPE_DEPENDENCY_NOT_DECLARED",TYPE_NOT_ACCESSIBLE:"TYPE_NOT_ACCESSIBLE",TYPE_VERSION_INCOMPATIBLE:"TYPE_VERSION_INCOMPATIBLE",TYPE_NOT_REQUESTED:"TYPE_NOT_REQUESTED",TYPE_NOT_AVAILABLE:"TYPE_NOT_AVAILABLE",CLIENT_NOT_COMPLIANT_WITH_INTERFACE:"CLIENT_NOT_COMPLIANT_WITH_INTERFACE",CLIENT_NOT_COMPLIANT_WITH_CONFIGURATION:"CLIENT_NOT_COMPLIANT_WITH_CONFIGURATION",CONFIGURATION_SYNTAX_INVALID:"CONFIGURATION_SYNTAX_INVALID",DELEGATE_NOT_COMPLIANT_WITH_INTERFACE:"DELEGATE_NOT_COMPLIANT_WITH_INTERFACE",DELEGATE_NOT_COMPLIANT_WITH_CONFIGURATION:"DELEGATE_NOT_COMPLIANT_WITH_CONFIGURATION",DELEGATE_METHOD_NOT_IMPLEMENTED:"DELEGATE_METHOD_NOT_IMPLEMENTED",DELEGATE_GENERAL_ERROR:"DELEGATE_GENERAL_ERROR",FRAMEWORK_FAILED:"FRAMEWORK_FAILED"},n}),define("tao/ospm/bc/internal/BusinessComponentDescriptorValidator",["tao/lib/stapes","tao/ospm/bc/internal/BusinessComponentToolkit","tao/ospm/bc/BusinessComponentTechnicalError"],function(e,t,n){return e.subclass({constructor:function(){},validate:function(e,i,o,r){var s=[];return this.checkObjectHasProperties(i,["id","version","compVersion","description"],"",s),this.checkObjectHasNoOtherProperties(i,["id","version","compVersion","description","details","inputParameters","outputParameters","uiElements","operations","events","errors","if"],"",s),t.iterateOwnProperties(i.inputParameters,function(e){this.validateInputParameter(e,i,s)}.bind(this)),t.iterateOwnProperties(i.outputParameters,function(e){this.validateOutputParameter(e,i,s)}.bind(this)),t.iterateOwnProperties(i.uiElements,function(e){this.validateUIElement(e,i,s)}.bind(this)),t.iterateOwnProperties(i.operations,function(e){this.validateOperation(e,i,s)}.bind(this)),t.iterateOwnProperties(i.events,function(e){this.validateEvent(e,i,s)}.bind(this)),t.iterateOwnProperties(i.errors,function(e){this.validateError(e,i,s)}.bind(this)),o&&i.id!==o&&s.push("Die Id "+i.id+" entspricht nicht der erwarteten Id "+o),s.length>0?(r(new n({id:n.ID.TYPE_DESCRIPTOR_VALIDATION_FAILED,componentTypeId:i.id,message:"BusinessComponent-Fehler in der Datei "+e,subMessages:s})),!1):!0},normalize:function(e){this.expandOutputParameterDescriptors(e),t.iterateOwnProperties(e.inputParameters,function(t){var n=e.inputParameters[t];["array","variable","optional"].forEach(function(e){this.isDefined(n[e])||(n[e]=!1)}.bind(this))}.bind(this)),t.iterateOwnProperties(e.uiElements,function(t){var n=e.uiElements[t];["array","variable","optional"].forEach(function(e){this.isDefined(n[e])||(n[e]=!1)}.bind(this))}.bind(this)),t.iterateOwnProperties(e.outputParameters,function(t){var n=e.outputParameters[t];["array","optional"].forEach(function(e){this.isDefined(n[e])||(n[e]=!1)}.bind(this))}.bind(this))},validateInputParameter:function(e,t,n){var i=t.inputParameters[e],o="inputParameters."+e+".";this.checkObjectHasProperties(i,["type","description"],o,n),this.checkObjectHasNoOtherProperties(i,["type","description","details","array","optional","default","variable","gpsRelevantRequest"],o,n)},validateOutputParameter:function(e,t,n){var i=t.outputParameters[e],o="outputParameters."+e+".";this.isDefined(t.inputParameters[e])?this.checkObjectHasNoOtherProperties(i,["description","details"],o,n):(this.checkObjectHasProperties(i,["type","description"],o,n),this.checkObjectHasNoOtherProperties(i,["type","description","details","array","optional","gpsRelevantResponse"],o,n))},validateUIElement:function(e,t,n){var i=t.uiElements[e],o="uiElements."+e+".";this.checkObjectHasProperties(i,["type","description"],o,n),this.checkObjectHasNoOtherProperties(i,["type","description","details","array","variable","optional"],o,n)},validateOperation:function(e,t,n){var i=t.operations[e],o="operations."+e+".";this.checkObjectHasProperties(i,["description"],o,n),this.checkObjectHasNoOtherProperties(i,["description","details"],o,n),this.checkOperationHasProperName(e,n)},validateEvent:function(e,t,n){var i=t.events[e],o="events."+e+".";this.checkObjectHasProperties(i,["description"],o,n),this.checkObjectHasNoOtherProperties(i,["description","details"],o,n),this.checkEventHasProperName(e,n)},validateError:function(e,t,n){var i=t.errors[e],o="errors."+e+".";this.checkObjectHasProperties(i,["description"],o,n),this.checkObjectHasNoOtherProperties(i,["description","details"],o,n)},isProperName:function(e){return!!e.match(/^[0-9a-zA-Z]+$/)},checkObjectHasProperties:function(e,t,n,i){n=n||"",t.forEach(function(t){this.isDefined(e[t])||i.push("Für das Property "+n+t+" muss ein Wert angegeben werden!")}.bind(this))},checkObjectHasNoOtherProperties:function(e,n,i,o){i=i||"",t.iterateOwnProperties(e,function(e){n.indexOf(e)<0&&o.push("Das Property "+i+e+" ist nicht erlaubt!")}.bind(this))},checkOperationHasProperName:function(e,t){var n=["init","inputParametersChanged","fetch","save","finish"];n.forEach(function(i){i.toLowerCase()===e.toLowerCase()&&t.push("Der Name "+e+" ist für eine Custom Operation nicht erlaubt. Reservierte Namen sind: "+n)}.bind(this)),this.isProperName(e)||t.push("Der Name "+e+" ist für eine Custom Operation nicht erlaubt, da er nicht erlaubte Zeichen enthält.")},checkEventHasProperName:function(e,t){this.isProperName(e)||t.push("Der Name "+e+" ist für einen Event nicht erlaubt, da er nicht erlaubte Zeichen enthält.")},isDefined:function(e){return"undefined"!=typeof e},expandOutputParameterDescriptors:function(e){var n,i;t.iterateOwnProperties(e.outputParameters,function(t){e.inputParameters[t]&&(i=e.inputParameters[t],n=e.outputParameters[t],n.type=i.type,n.array=i.array,n.description=i.description,n.details=i.details)})}})}),define("tao/ospm/bc/internal/BusinessComponentTypesManager",["tao/lib/stapes","tao/ospm/common/OSPMError","tao/ospm/common/Config","tao/ospm/bc/internal/BusinessComponentToolkit","tao/ospm/bc/internal/BusinessComponentType","tao/ospm/bc/internal/BusinessComponentDescriptorValidator","tao/ospm/bc/BusinessComponentTechnicalError","tao/ospm/common/Toolkit"],function(e,t,n,i,o,r,s,a){var l,c,u;return l="businessComponents.json",c="interface.json",u=new r,e.subclass({clientAppId:null,requestedComponentTypeIds:null,componentTypes:null,technicalErrors:null,requirejs:null,constructor:function(e,t){this.clientAppId=e,this.componentTypes={},this.technicalErrors=[],this.requestedComponentTypeIds=[],this.requirejs=t},loadComponentTypes:function(e,t,n){var r=[];return a.isArrayProvided(e)?(r=e,e=null):i.iterateOwnProperties(e,function(e){r.push(e)}),0===r.length?void n():(this.addRequestedComponentTypeIds(r),void this.loadDependenciesDescriptors(t,r,function(t){return r=this.getEntriesPassingDependencyCheck(r,t),0===r.length?void n():void this.loadComponentTypeDescriptors(e,r,function(e){return r=this.getComponentTypeIdsPassingVersionCheck(r,e,t[this.clientAppId]),0===r.length?void n():void this.loadDelegateClasses(r,function(t){i.iterateOwnProperties(e,function(n){var i,r=e[n],s=t[r.id];s&&(i=new o(r,s),this.componentTypes[r.id]=i)}.bind(this)),n()}.bind(this))}.bind(this))}.bind(this)))},getComponentType:function(e){return this.componentTypes[e]},isRequestedComponentTypeId:function(e){return this.requestedComponentTypeIds.indexOf(e)>=0},getTechnicalErrors:function(){return this.technicalErrors},loadDependenciesDescriptors:function(e,t,n){var o,r,a={};return e?void n(e):(o=this.getAllAppIds(t),r=o.length,void o.forEach(function(e){var t=document.OSPMEnvironment.appURL(e,!0)+l;i.loadJSON(t,function(t){a[e]=t,0===--r&&n(a)}.bind(this),function(t){(e!==this.clientAppId||o.length>1)&&this.addTechnicalError({appId:e,cause:t,id:s.ID.TYPE_DEPENDENCIES_DESCRIPTOR_NOT_LOADABLE,message:"Datei businessComponents.json kann nicht geladen werden."}),0===--r&&n(a)}.bind(this))}.bind(this)))},getEntriesPassingDependencyCheck:function(e,t){var n=[];return e.forEach(function(e){var o=i.getAppId(e),r=i.getComponentTypeId(e);o===this.clientAppId?n.push(e):this.externalComponentDependencyIsDeclared(r,t)&&this.externalComponentTypeIsAccessible(r,t)&&n.push(e)}.bind(this)),n},getComponentTypeIdsPassingVersionCheck:function(e,t,n){var o=[];return e.forEach(function(e){var r=i.getAppId(e),s=i.getComponentTypeId(e),a=t[s];r===this.clientAppId?o.push(e):this.externalComponentTypeVersionIsCompatible(a,n)&&o.push(e)}.bind(this)),o},loadComponentTypeDescriptors:function(e,t,o){var r,a;return null!==e?(i.iterateOwnProperties(e,function(t){u.normalize(e[t])}),void o(e)):(a={},r=t.length,void t.forEach(function(e){var t,l,d,h,m;t=i.getLocalComponentTypeId(e),l=i.getAppId(e),d=i.getLocalComponentTypePath(e)||"components/"+t,h=document.OSPMEnvironment.appURL(l,!0)+(n.USE_MINIMIZED_JS?"js-min/":"js/")+d+"/"+c,m=i.getComponentTypeId(e),i.loadJSON(h,function(e){u.validate(h,e,m,function(e){this.technicalErrors.push(e)}.bind(this))&&(a[m]=e,u.normalize(e)),0===--r&&o(a)}.bind(this),function(e){this.addTechnicalError({componentTypeId:m,cause:e,id:s.ID.TYPE_DESCRIPTOR_NOT_LOADABLE,message:"Datei interface.json kann nicht geladen werden."}),0===--r&&o(a)}.bind(this))}.bind(this)))},loadDelegateClasses:function(e,t,n){var o,r=e.shift();n=n||{},this.loadDelegateClass(r,function(s){s&&(o=i.getComponentTypeId(r),n[o]=s),e.length>0?this.loadDelegateClasses(e,t,n):t(n)}.bind(this))},loadDelegateClass:function(e,t){var n,o,r,a=i.getLocalComponentTypeId(e),l=i.getAppId(e);o=l+"/",o+=i.getLocalComponentTypePath(e)||"components/"+a,n=o+"/"+a,r=document.OSPMEnvironment.OSPMCommunication.system.PackageManager.getRequireConfig(l),this.requirejs.config(r),this.requirejs([n],function(e){t(e)}.bind(this),function(n){var o=i.getComponentTypeId(e);this.addTechnicalError({componentTypeId:o,cause:n,id:s.ID.TYPE_DELEGATE_CLASS_NOT_LOADABLE,message:"JavaScript-Datei (Delegate) kann nicht geladen werden."}),t()}.bind(this))},externalComponentDependencyIsDeclared:function(e,t){var n=t[this.clientAppId];if(n){if(i.findWhere(n.required,{id:e}))return!0;this.addTechnicalError({appId:this.clientAppId,componentTypeId:e,id:s.ID.TYPE_DEPENDENCY_NOT_DECLARED,message:"Abhängigkeit zum externen Komponententyp wurde in businessComponents.json nicht deklariert"})}return!1},externalComponentTypeIsAccessible:function(e,t){var n,o,r=i.getAppId(e),a=t[r];if(a){if(n=i.findWhere(a.provided,{id:e})){if(!n.clients)return!0;for(o=0;o<n.clients.length;o++)if(n.clients[o].toLowerCase()===this.clientAppId.toLowerCase())return!0}this.addTechnicalError({appId:this.clientAppId,componentTypeId:e,id:s.ID.TYPE_NOT_ACCESSIBLE,message:"Externer Komponententyp ist für die Anwendung "+this.clientAppId+"nicht zugänglich"})}return!1},externalComponentTypeVersionIsCompatible:function(e,t){var n=i.findWhere(t.required,{id:e.id});return this.compareVersions(n.version,e.compVersion)>=0&&this.compareVersions(n.version,e.version)<=0?!0:(this.addTechnicalError({appId:this.clientAppId,componentTypeId:e.id,id:s.ID.TYPE_VERSION_INCOMPATIBLE,message:"Der externe Komponententyp liegt nicht in einer kompatiblen Version vor"}),!1)},compareVersions:function(e,t){var n,i,o,r=String(e).split("."),s=String(t).split("."),a=r.length>s.length?r.length:s.length;for(n=0;a>n;n++){if(i=n<r.length?Number(r[n]):0,o=n<s.length?Number(s[n]):0,o>i)return-1;if(i>o)return 1}return 0},getAllAppIds:function(e){var t=[];return t.push(this.clientAppId),e.forEach(function(e){var n=i.getAppId(e);t.indexOf(n)<0&&t.push(n)}),t},addRequestedComponentTypeIds:function(e){e.forEach(function(e){var t=i.getComponentTypeId(e);this.requestedComponentTypeIds.push(t)}.bind(this))},addTechnicalError:function(e){this.technicalErrors.push(new s(e))}})}),define("tao/ospm/bc/BusinessComponentInterface",["tao/lib/stapes"],function(e){return e.subclass({component:null,constructor:function(e){this.component=e},getDescriptor:function(){return this.component.getDescriptor()},getInputParameter:function(e){return this.component.getInputParameter(e,this.isClientInterface())},getOutputParameter:function(e){return this.component.getOutputParameter(e,this.isClientInterface())},getUIElement:function(e){return this.component.getUIElement(e,this.isClientInterface())},getBusinessErrors:function(){return this.component.getBusinessErrors()},isValid:function(){return this.component.isValid()},isProcessing:function(){return this.component.isProcessing()},clientCanFetch:function(){return this.component.clientCanFetch()},clientCanSave:function(){return this.component.clientCanSave()},fetch:function(e){this.getComponent().fetch(function(){e&&e()},this)},save:function(e){this.getComponent().save(function(){e&&e()},this)},getComponent:function(){return this.component},isClientInterface:function(){return!1}})}),define("tao/ospm/bc/BusinessComponentClientInterface",["tao/ospm/bc/BusinessComponentInterface"],function(e){var t=e.subclass({constructor:function(e){t.parent.constructor.call(this,e)},setInputParameter:function(e,t){var n={};n[e]=t,this.setInputParameters(n)},setInputParameters:function(e){this.getComponent().setInputParameters(e)},removeInputParameters:function(e){this.getComponent().removeInputParameters(e)},releaseUIElements:function(e){this.component.releaseUIElements(e)},update:function(){this.getComponent().update()},runOperation:function(e){this.getComponent().runOperation(e)},finish:function(){this.getComponent().finish()},setChangeListener:function(e){this.getComponent().setChangeListener(e)},addChangeListener:function(e){this.getComponent().addChangeListener(e)},clearChangeListeners:function(){this.getComponent().clearChangeListeners()},setEventListener:function(e){this.getComponent().setEventListener(e)},addEventListener:function(e){this.getComponent().addEventListener(e)},clearEventListeners:function(){this.getComponent().clearEventListeners()},isClientInterface:function(){return!0}});return t}),define("tao/ospm/bc/BusinessComponentProviderInterface",["tao/ospm/bc/BusinessComponentInterface"],function(e){var t=e.subclass({constructor:function(e){t.parent.constructor.call(this,e)},setOutputParameter:function(e,t){var n={};n[e]=t,this.setOutputParameters(n)},setOutputParameters:function(e){this.getComponent().setOutputParameters(e)},removeOutputParameters:function(e){this.getComponent().removeOutputParameters(e)},isOutputParameterRequired:function(e){return this.getComponent().isOutputParameterRequired(e)},setUIElement:function(e,t){var n={};n[e]=t,this.setUIElements(n)},setUIElements:function(e){this.getComponent().setUIElements(e)},removeUIElements:function(e){this.getComponent().removeUIElements(e)},isUIElementRequired:function(e){return this.getComponent().isUIElementRequired(e)},getUIElementNamesInUse:function(){return this.getComponent().getUIElementNamesInUse()},addBusinessError:function(e){this.getComponent().addBusinessError(e)},removeBusinessErrors:function(e){this.getComponent().removeBusinessErrors(e)},setValid:function(e){this.getComponent().setValid(e)},setClientCanFetch:function(e){this.getComponent().setClientCanFetch(e)},setClientCanSave:function(e){this.getComponent().setClientCanSave(e)},finishChanges:function(){this.getComponent().finishChanges()},emitEvent:function(e){this.getComponent().emitEvent(e)}});return t}),define("tao/ospm/api/BusinessComponentDelegate",["tao/lib/stapes"],function(e){var t="DELEGATE_METHOD_NOT_IMPLEMENTED";return e.subclass({constructor:function(){},onInit:function(e){e.getComponent().addTechnicalError({id:t,message:"Fehlende Implementierung: onInit ("+e+")"})},onUpdate:function(e,n){e.getComponent().addTechnicalError({id:t,message:"Fehlende Implementierung: onUpdate ("+e+", "+n+")"})},onFetch:function(e,n){e.getComponent().addTechnicalError({id:t,message:"Fehlende Implementierung: onFetch ("+e+", "+n+")"})},onSave:function(e,n){e.getComponent().addTechnicalError({id:t,message:"Fehlende Implementierung: onSave ("+e+", "+n+")"})},onFinish:function(){}})}),define("tao/ospm/bc/internal/BusinessComponentValidator",["tao/lib/stapes","tao/ospm/bc/BusinessComponentTechnicalError","tao/ospm/bc/internal/BusinessComponentToolkit","tao/ospm/common/Toolkit"],function(e,t,n,i){return e.subclass({component:null,constructor:function(e){this.component=e},validateAndCompleteConfiguration:function(e){var n,i=[];return n=this.validateConfigurationSyntax(e),this.addDefaultValues(e),this.checkInputParameters(e.inputParameters,!1,i),this.checkRequiredElements(e,i),i.length>0&&(this.component.addTechnicalError({id:t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler bei der Konfiguration der Business-Komponente",subMessages:i},!0),n=!1),n},validateInputParameters:function(e){var n=[];return this.checkInputParameters(e,!0,n),n.length>0?(this.component.addTechnicalError({id:t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler beim Setzen von Input-Parametern",subMessages:n},!0),!1):!0},validateInputParameterAccess:function(e,n){return this.isInputParameterDefined(e)?!0:(this.component.addTechnicalError({id:n?t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Unbekannter Inputparameter: "+e},n),!1)},validateInputParametersRemoval:function(e){var n=[];return e.forEach(function(e){this.isInputParameterDefined(e)?this.isInputParameterVariable(e)||n.push("Inputparameter ist nicht variabel: "+e):n.push("Unbekannter Inputparameter: "+e)}.bind(this)),n.length>0?(this.component.addTechnicalError({id:t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler beim Löschen von Input-Parametern",subMessages:n},!0),!1):!0},validateOutputParameters:function(e){var o,r,s=[];return n.iterateOwnProperties(e,function(t){var n=this.component.getDescriptor().outputParameters[t];if(o=e[t],this.isDefined(n))if(n.array)if(i.isArray(o)){for(r=0;r<o.length;r++)if(!this.isParameterValueOfType(o[r],n.type)){s.push("Die Werte des Outputparameters "+t+" müssen alle vom Typ "+n.type+" sein!");break}}else s.push("Der Wert des Outputparameters "+t+" muss ein Array sein!");else this.isParameterValueOfType(o,n.type)||s.push("Der Wert des Outputparameters "+t+" muss vom Typ "+n.type+" sein!");else s.push("Unbekannter Outputparameter: "+t)}.bind(this)),s.length>0?(this.component.addTechnicalError({id:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler beim Setzen von Output-Parametern",subMessages:s}),!1):!0},validateOutputParameterAccess:function(e,n){var i=!0;return this.isOutputParameterDefined(e)?this.component.isOutputParameterRequired(e)||(this.component.addTechnicalError({id:n?t.ID.CLIENT_NOT_COMPLIANT_WITH_CONFIGURATION:t.ID.DELEGATE_NOT_COMPLIANT_WITH_CONFIGURATION,message:"Der Outputparameter "+e+" wird gemäß Konfiguration nicht benötigt. Daher kann darauf nicht zugegriffen werden."},n),i=!1):(this.component.addTechnicalError({id:n?t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Unbekannter Outputparameter: "+e},n),i=!1),i},validateOutputParametersRemoval:function(e){var n=[];return e.forEach(function(e){this.isOutputParameterDefined(e)||n.push("Unbekannter Outputparameter: "+e)}.bind(this)),n.length>0?(this.component.addTechnicalError({id:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler beim Löschen von Output-Parametern",subMessages:n}),!1):!0},validateUIElements:function(e,o){var r=[];return n.iterateOwnProperties(e,function(t){var n,s=this.component.getDescriptor().uiElements[t],a=e[t];if(this.isDefined(s))if(o&&!this.isUIElementVariable(t))r.push("UI-Element ist nicht variabel: "+t);else if(s.array)if(i.isArray(a)){for(n=0;n<a.length;n++)if(!this.isUIElementOfType(a[n],s.type)){r.push("Die Werte des UI-Elements "+t+" müssen alle vom Typ "+s.type+" sein!");break}}else r.push("Der Wert des UI-Elements "+t+" muss ein Array sein!");else this.isUIElementOfType(a,s.type)||r.push("UI-Element "+t+" ist nicht vom erforderlichen Typ "+s.type);else r.push("Unbekanntes UI-Element: "+t)}.bind(this)),r.length>0?(this.component.addTechnicalError({id:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler beim Setzen von UI-Elementen",subMessages:r}),!1):!0},validateUIElementAccess:function(e,n){var i=!0;return this.isUIElementDefined(e)?this.component.isUIElementRequired(e)||(this.component.addTechnicalError({id:n?t.ID.CLIENT_NOT_COMPLIANT_WITH_CONFIGURATION:t.ID.DELEGATE_NOT_COMPLIANT_WITH_CONFIGURATION,message:"Das UI-Element "+e+" wird gemäß Konfiguration nicht benötigt. Daher  kann darauf nicht zugegriffen werden."},n),i=!1):(this.component.addTechnicalError({id:n?t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Unbekanntes UI-Element: "+e},n),i=!1),i},validateUIElementsRelease:function(e){var n=[];return e.forEach(function(e){this.isUIElementDefined(e)||n.push("Unbekanntes UI-Element: "+e)}.bind(this)),n.length>0?(this.component.addTechnicalError({id:t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler beim Freigeben von UI-Elementen",subMessages:n},!0),!1):!0},validateUIElementsRemoval:function(e){var n=[];return e.forEach(function(e){this.isUIElementDefined(e)?this.isUIElementVariable(e)||n.push("UI-Element ist nicht variabel: "+e):n.push("Unbekanntes UI-Element: "+e)}.bind(this)),n.length>0?(this.component.addTechnicalError({id:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Interface-Konformität-Fehler beim Löschen von UI-Elementen",subMessages:n}),!1):!0},validateCustomOperationAccess:function(e,n){var i=!0;return this.isOperationDefined(e)?this.isOperationImplemented(e,n)||(this.component.addTechnicalError({id:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Die Operation "+e+" ist nicht implementiert!"}),i=!1):(this.component.addTechnicalError({id:t.ID.CLIENT_NOT_COMPLIANT_WITH_INTERFACE,message:"Unbekannte Operation: "+e},!0),i=!1),i},validateEventName:function(e){var n=this.isDefined(this.component.getDescriptor().events[e]);return n||(this.component.addTechnicalError({id:t.ID.DELEGATE_NOT_COMPLIANT_WITH_INTERFACE,message:"Unbekanntes Event: "+e},!0),n=!1),n},validateConfigurationSyntax:function(e){var o=[],r=this.component.getDescriptor();return n.checkObjectHasNoOtherProperties(e,["inputParameters","changeListener","eventListener","requiredUIElements","requiredOutputParameters"],o),e.changeListener&&"function"!=typeof e.changeListener&&o.push("Der Wert des Properties changeListener muss eine Funktion sein."),e.requiredUIElements&&(i.isArray(e.requiredUIElements)?e.requiredUIElements.forEach(function(e){r.uiElements&&r.uiElements[e]||o.push("Das unter requiredUIElements angegebene Element "+e+" ist nicht bekannt (in der interface.json-Datei nicht deklariert)")}.bind(this)):o.push("Der Wert des Properties requiredUIElements muss ein Array sein.")),e.requiredOutputParameters&&(i.isArray(e.requiredOutputParameters)?e.requiredOutputParameters.forEach(function(e){r.outputParameters&&r.outputParameters[e]||o.push("Das unter requiredOutputParameters angegebene Parameter "+e+" ist nicht bekannt (in der interface.json-Datei nicht deklariert)")}.bind(this)):o.push("Der Wert des Properties requiredOutputParameters muss ein Array sein.")),o.length>0?(this.component.addTechnicalError({id:t.ID.CONFIGURATION_SYNTAX_INVALID,message:"Syntax-Fehler bei der Konfiguration der Business-Komponente",subMessages:o},!0),!1):!0},addDefaultValues:function(e){var t,i=this.component.getDescriptor();e.inputParameters=e.inputParameters||{},n.iterateOwnProperties(i.inputParameters,function(n){t=i.inputParameters[n],this.isDefined(t.default)&&!this.isDefined(e.inputParameters[n])&&(e.inputParameters[n]=t.default)}.bind(this)),e.requiredUIElements||(e.requiredUIElements=[],n.iterateOwnProperties(this.component.getDescriptor().uiElements,function(t){e.requiredUIElements.push(t)})),e.requiredOutputParameters||(e.requiredOutputParameters=[],n.iterateOwnProperties(this.component.getDescriptor().outputParameters,function(t){e.requiredOutputParameters.push(t)}))},checkInputParameters:function(e,t,o){var r,s,a=this.component.getDescriptor();n.iterateOwnProperties(e,function(n){var l=a.inputParameters[n];if(!this.isInputParameterDefined(n))return void o.push("Unbekannter Inputparameter: "+n);if(t&&!this.isInputParameterVariable(n))return void o.push("Der Inputparameter "+n+" ist nicht variabel!");if(r=e[n],l.array)if(i.isArray(r)){for(s=0;s<r.length;s++)if(!this.isParameterValueOfType(r[s],l.type)){o.push("Die Werte des Inputparameters "+n+" müssen alle vom Typ "+l.type+" sein!");break}}else o.push("Der Wert des Inputparameters "+n+" muss ein Array sein!");else null===r&&l.optional||this.isParameterValueOfType(r,l.type)||o.push("Der Wert des Inputparameters "+n+" muss vom Typ "+l.type+" sein!")}.bind(this)),t||n.iterateOwnProperties(a.inputParameters,function(t){var n=a.inputParameters[t];n.optional||this.isDefined(e[t])||o.push("Pflichtparameter "+t+" nicht gesetzt!")}.bind(this))},checkRequiredElements:function(e,t){var n,i=this.component.getDescriptor();e.requiredUIElements&&(e.requiredUIElements.forEach(function(e){i.uiElements&&i.uiElements[e]||t.push("Das unter requiredUIElements angegebene Element "+e+" ist nicht bekannt (in der interface.json-Datei nicht deklariert)")}.bind(this)),n=this.getMandatoryButNotRequiredElementNames(i.uiElements,e.requiredUIElements),n.length>0&&t.push("Folgende Elemente müssen unter requiredUIElements angegebenen werden, da sie nicht optional sind: "+n)),e.requiredOutputParameters&&(e.requiredOutputParameters.forEach(function(e){i.outputParameters&&i.outputParameters[e]||t.push("Das unter requiredOutputParameters angegebene Parameter "+e+" ist nicht bekannt (in der interface.json-Datei nicht deklariert)")
}.bind(this)),n=this.getMandatoryButNotRequiredElementNames(i.outputParameters,e.requiredOutputParameters),n.length>0&&t.push("Folgende Elemente müssen unter requiredOutputParameters angegebenen werden, da sie nicht optional sind: "+n))},getMandatoryButNotRequiredElementNames:function(e,t){var i=[];return n.iterateOwnProperties(e,function(t){var n=e[t];n.optional||i.push(t)}),t.forEach(function(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)}),i},isInputParameterDefined:function(e){return this.isDefined(this.component.getDescriptor().inputParameters[e])},isInputParameterVariable:function(e){var t=this.component.getDescriptor().inputParameters[e];return t&&t.variable},isOutputParameterDefined:function(e){return this.isDefined(this.component.getDescriptor().outputParameters[e])},isUIElementDefined:function(e){return this.isDefined("undefined"!==this.component.getDescriptor().uiElements[e])},isUIElementVariable:function(e){var t=this.component.getDescriptor().uiElements[e];return t&&t.variable},isOperationDefined:function(e){return this.isDefined(this.component.getDescriptor().operations[e])},isOperationImplemented:function(e,t){var i=n.createFunctionName("on",e);return"function"==typeof t[i]},isParameterValueOfType:function(e,t){return null===e?!1:"bzo"===t.toLowerCase()&&"object"==typeof e&&e.DS&&e.W?!0:typeof e===t.toLowerCase()},isUIElementOfType:function(e,t){return null===e?!1:e.getClassName()===t},isDefined:function(e){return"undefined"!=typeof e}})}),define("tao/ospm/bc/BusinessComponentElementChange",["tao/lib/stapes"],function(e){return e.subclass({name:null,oldValue:null,newValue:null,constructor:function(e){this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue},getName:function(){return this.name},getOldValue:function(){return this.oldValue},getNewValue:function(){return this.newValue}})}),define("tao/ospm/bc/internal/BusinessComponentElements",["tao/lib/stapes","tao/ospm/bc/BusinessComponentElementChange","tao/ospm/bc/internal/BusinessComponentToolkit"],function(e,t,n){var i=e.subclass({elementsByTypeName:null,originalElementsByTypeName:null,constructor:function(){this.elementsByTypeName={},this.iterateTypes(function(e){this.elementsByTypeName[e]={}}.bind(this))},getInputParameters:function(){return this.elementsByTypeName[i.TYPES.INPUT_PARAMETER]},setInputParameter:function(e,t){this.getInputParameters()[e]=t},setInputParameters:function(e){n.setProperties(this.getInputParameters(),e)},removeInputParameters:function(e){n.deleteOwnProperties(this.getInputParameters(),e)},getOutputParameters:function(){return this.elementsByTypeName[i.TYPES.OUTPUT_PARAMETER]},setOutputParameter:function(e,t){this.getOutputParameters()[e]=t},setOutputParameters:function(e){n.setProperties(this.getOutputParameters(),e)},removeOutputParameters:function(e){n.deleteOwnProperties(this.getOutputParameters(),e)},getUIElements:function(){return this.elementsByTypeName[i.TYPES.UI_ELEMENT]},setUIElement:function(e,t){this.getUIElements()[e]=t},setUIElements:function(e){n.setProperties(this.getUIElements(),e)},removeUIElements:function(e){n.deleteOwnProperties(this.getUIElements(),e)},getBusinessErrors:function(){return this.elementsByTypeName[i.TYPES.BUSINESS_ERROR]},setBusinessError:function(e,t){this.getBusinessErrors()[e]=t},setBusinessErrors:function(e){n.setProperties(this.getBusinessErrors(),e)},removeBusinessErrors:function(e){n.deleteOwnProperties(this.getBusinessErrors(),e)},getFlags:function(){return this.elementsByTypeName[i.TYPES.FLAG]},setFlag:function(e,t){t=t!==!1,this.elementsByTypeName[i.TYPES.FLAG][e]=t},startTrackingChanges:function(){this.originalElementsByTypeName={},this.iterateTypes(function(e){this.originalElementsByTypeName[e]=this.copyElements(this.elementsByTypeName[e])}.bind(this))},finishChanges:function(){var e={},t=!1;return this.originalElementsByTypeName?(this.iterateTypes(function(n){var o,r;o=i.DEEP_COMPARE_TYPES.indexOf(n)>=0,r=this.createChangesObject(this.originalElementsByTypeName[n],this.elementsByTypeName[n],o),Object.getOwnPropertyNames(r).length>0&&(t=!0,e[n]=r,this.originalElementsByTypeName[n]=this.copyElements(this.elementsByTypeName[n]))}.bind(this)),t?e:null):null},createChangesObject:function(e,i,o){var r={};return n.iterateOwnProperties(i,function(s){var a=e[s],l=i[s];"undefined"==typeof a?r[s]=new t({name:s,newValue:l}):n.valuesAreEqual(a,l,o)||(r[s]=new t({name:s,oldValue:a,newValue:l}))}),n.iterateOwnProperties(e,function(n){var o=e[n],s=i[n];"undefined"==typeof s&&(r[n]=new t({name:n,oldValue:o}))}),r},iterateTypes:function(e){n.iterateOwnProperties(i.TYPES,function(t){e(i.TYPES[t])})},copyElements:function(e){var t={};return n.iterateOwnProperties(e,function(i){t[i]=n.copyIfArray(e[i])}),t}});return i.FLAGS={VALID:"valid",CLIENT_CAN_FETCH:"clientCanFetch",CLIENT_CAN_SAVE:"clientCanSave"},i.TYPES={INPUT_PARAMETER:"inputParameter",OUTPUT_PARAMETER:"outputParameter",UI_ELEMENT:"uiElement",BUSINESS_ERROR:"businessError",FLAG:"flag"},i.DEEP_COMPARE_TYPES=[i.TYPES.INPUT_PARAMETER,i.TYPES.OUTPUT_PARAMETER,i.TYPES.FLAG],i}),define("tao/ospm/bc/BusinessComponentChangeEvent",["tao/lib/stapes","tao/ospm/bc/internal/BusinessComponentElements","tao/ospm/bc/internal/BusinessComponentToolkit"],function(e,t,n){return e.subclass({changes:null,constructor:function(e){this.changes=e},getChangedOutputParameterNames:function(){return this.getChangedElementNames(t.TYPES.OUTPUT_PARAMETER)},getOutputParameterChange:function(e){return this.getElementChange(t.TYPES.OUTPUT_PARAMETER,e)},getChangedUIElementNames:function(){return this.getChangedElementNames(t.TYPES.UI_ELEMENT)},getUIElementChange:function(e){return this.getElementChange(t.TYPES.UI_ELEMENT,e)},getValidFlagChange:function(){return this.getElementChange(t.TYPES.FLAG,t.FLAGS.VALID)},getClientCanFetchFlagChange:function(){return this.getElementChange(t.TYPES.FLAG,t.FLAGS.CLIENT_CAN_FETCH)},getClientCanSaveFlagChange:function(){return this.getElementChange(t.TYPES.FLAG,t.FLAGS.CLIENT_CAN_SAVE)},getChangedBusinessErrorNames:function(){return this.getChangedElementNames(t.TYPES.BUSINESS_ERROR)},getBusinessErrorChange:function(e){return this.getElementChange(t.TYPES.BUSINESS_ERROR,e)},getChangedElementNames:function(e){var t=[],i=this.changes[e];return n.iterateOwnProperties(i,function(e){t.push(e)}),t.length>0?t:null},getElementChange:function(e,t){return this.changes[e]?this.changes[e][t]:null}})}),define("tao/ospm/bc/BusinessComponentBusinessError",["tao/lib/stapes"],function(e){return e.subclass({component:null,name:null,message:null,data:null,constructor:function(e){e=e||{},this.component=e.component,this.name=e.name,this.message=e.message,this.data=e.data},getComponent:function(){return this.component},getName:function(){return this.name},getMessage:function(){return this.message},getData:function(){return this.data}})}),define("tao/ospm/bc/internal/BusinessComponent",["tao/lib/stapes","tao/ospm/common/OSPMError","tao/ospm/bc/internal/BusinessComponentToolkit","tao/ospm/bc/BusinessComponentClientInterface","tao/ospm/bc/BusinessComponentProviderInterface","tao/ospm/api/BusinessComponentDelegate","tao/ospm/bc/internal/BusinessComponentValidator","tao/ospm/bc/internal/BusinessComponentElements","tao/ospm/bc/BusinessComponentChangeEvent","tao/ospm/bc/BusinessComponentBusinessError","tao/ospm/bc/BusinessComponentTechnicalError"],function(e,t,n,i,o,r,s,a,l,c,u){var d={CREATED:"CREATED",READY:"READY",PROCESSING:"PROCESSING",FINISHED:"FINISHED"},h={PROVIDER_CALLED_SAVE:"PROVIDER_CALLED_SAVE",PROVIDER_CALLED_FETCH:"PROVIDER_CALLED_FETCH"};return e.subclass({type:null,clientAppId:"",componentClientInterface:null,componentProviderInterface:null,delegate:null,partialSerializer:null,validator:null,state:"",requiredUIElements:null,requiredOutputParameters:null,uiElementNamesInUse:null,onTechnicalError:null,changeListeners:null,eventListeners:null,elements:null,internalFlags:null,constructor:function(e,t,n,r){this.type=e,this.clientAppId=t,this.partialSerializer=n,this.onTechnicalError=r,this.componentClientInterface=new i(this),this.componentProviderInterface=new o(this,n),this.delegate=new(e.getDelegateClass()),this.validator=new s(this),this.state=d.CREATED,this.internalFlags={}},init:function(e){if(e=n.deepCopy(e)||{},!this.validator.validateAndCompleteConfiguration(e))return null;this.elements=new a,this.elements.setInputParameters(e.inputParameters),this.setOutputParametersFromInputParameters(),this.requiredUIElements=e.requiredUIElements,this.requiredOutputParameters=e.requiredOutputParameters,this.uiElementNamesInUse={},e.changeListener?this.setChangeListener(e.changeListener):this.changeListeners=[],e.eventListener?this.setEventListener(e.eventListener):this.eventListeners=[];try{this.delegate.onInit(this.componentProviderInterface)}catch(t){return this.addTechnicalError({id:u.ID.DELEGATE_GENERAL_ERROR,message:"Fehler beim Initialisieren der Komponente",cause:t}),null}return this.elements.startTrackingChanges(),this.state=d.READY,this.componentClientInterface},getDescriptor:function(){return this.type.getDescriptor()},getInputParameter:function(e,t){return this.validator.validateInputParameterAccess(e,t),n.deepCopy(this.elements.getInputParameters()[e])},setInputParameters:function(e){this.validator.validateInputParameters(e)&&(e=n.deepCopy(e),this.elements.setInputParameters(e))},removeInputParameters:function(e){this.validator.validateInputParametersRemoval(e)&&this.elements.removeInputParameters(e)},getUIElement:function(e,t){var i;return this.validator.validateUIElementAccess(e,t)&&(i=this.elements.getUIElements()[e])?(this.uiElementNamesInUse[e]=!0,n.copyIfArray(i)):i},releaseUIElements:function(e){this.validator.validateUIElementsRelease(e)&&e.forEach(function(e){this.uiElementNamesInUse[e]=!1}.bind(this))},setUIElements:function(e){var t={},i=this.state!==d.CREATED;this.validator.validateUIElements(e,i)&&(n.iterateOwnProperties(e,function(i){t[i]=n.copyIfArray(e[i])}),this.elements.setUIElements(t))},removeUIElements:function(e){this.validator.validateUIElementsRemoval(e)&&(this.releaseUIElements(e),this.elements.removeUIElements(e))},isUIElementRequired:function(e){return this.requiredUIElements.indexOf(e)>=0},getUIElementNamesInUse:function(){return Object.getOwnPropertyNames(this.uiElementNamesInUse)},getOutputParameter:function(e,t){return this.validator.validateOutputParameterAccess(e,t),n.deepCopy(this.elements.getOutputParameters()[e])},setOutputParameters:function(e){this.validator.validateOutputParameters(e)&&(e=n.deepCopy(e),this.elements.setOutputParameters(e))},removeOutputParameters:function(e){this.validator.validateOutputParametersRemoval(e)&&this.elements.removeOutputParameters(e)},isOutputParameterRequired:function(e){return this.requiredOutputParameters.indexOf(e)>=0},runOperation:function(e){var t;if(this.validator.validateCustomOperationAccess(e,this.delegate)){t=n.createFunctionName("on",e);try{this.delegate[t](this.componentProviderInterface)}catch(i){this.addTechnicalError({id:u.DELEGATE_GENERAL_ERROR,message:"Fehler beim Ausführen der Operation "+e,cause:i})}}},emitEvent:function(e){this.validator.validateEventName(e)&&this.eventListeners.forEach(function(t){t(this.componentClientInterface,e)}.bind(this))},setChangeListener:function(e){this.changeListeners=[e]},addChangeListener:function(e){this.changeListeners.push(e)},clearChangeListeners:function(){this.changeListeners=[]},setEventListener:function(e){this.eventListeners=[e]},addEventListener:function(e){this.eventListeners.push(e)},clearEventListeners:function(){this.eventListeners=[]},addTechnicalError:function(e,t){e.component=this.componentClientInterface,e.componentTypeId=this.type.getDescriptor().id,e.appId=t?this.clientAppId:n.getAppId(e.componentTypeId),this.onTechnicalError(new u(e))},getBusinessErrors:function(){var e=this.elements.getBusinessErrors();return Object.getOwnPropertyNames(e).length>0?e:null},addBusinessError:function(e){e.component=this.componentClientInterface,this.elements.setBusinessError(e.name,new c(e))},removeBusinessErrors:function(e){this.elements.removeBusinessErrors(e)},finish:function(){try{this.delegate.onFinish(this.componentProviderInterface),this.state=d.FINISHED}catch(e){this.addTechnicalError({id:u.ID.DELEGATE_GENERAL_ERROR,message:"Fehler beim Beenden der Komponente in onFinish",cause:e})}},isValid:function(){return this.elements.getFlags()[a.FLAGS.VALID]},setValid:function(e){this.elements.setFlag(a.FLAGS.VALID,e)},isProcessing:function(){return this.state===d.PROCESSING},clientCanFetch:function(){return this.elements.getFlags()[a.FLAGS.CLIENT_CAN_FETCH]},setClientCanFetch:function(e){this.elements.setFlag(a.FLAGS.CLIENT_CAN_FETCH,e)},clientCanSave:function(){return this.elements.getFlags()[a.FLAGS.CLIENT_CAN_SAVE]},setClientCanSave:function(e){this.elements.setFlag(a.FLAGS.CLIENT_CAN_SAVE,e)},update:function(){var e=this.elements.finishChanges(),t=e?e[a.TYPES.INPUT_PARAMETER]:null;if(t){this.setOutputParametersFromInputParameters(Object.getOwnPropertyNames(t));try{this.delegate.onUpdate(this.componentProviderInterface,t)}catch(n){this.addTechnicalError({id:u.ID.DELEGATE_GENERAL_ERROR,message:"Fehler beim Update der Business-Komponente in onUpdate",cause:n})}}this.finishChanges()},finishChanges:function(){var e=this.elements.finishChanges();e&&this.notifyChangeListeners(new l(e))},canFetch:function(){return this.clientCanFetch()||this.internalFlags[h.PROVIDER_CALLED_FETCH]},canSave:function(){return this.clientCanSave()||this.internalFlags[h.PROVIDER_CALLED_SAVE]},fetch:function(e,t){if(t)t.isClientInterface()||(this.internalFlags[h.PROVIDER_CALLED_FETCH]=!0),this.partialSerializer.fetch([this],e);else if(this.isProcessing())this.addTechnicalError({id:u.ID.FRAMEWORK_FAILED,message:"Fehler in fetch: Die Komponente befindet sich schon im Status PROCESSING"});else if(this.canFetch()){this.state=d.PROCESSING;try{this.delegate.onFetch(this.componentProviderInterface,function(){this.state=d.READY,e()}.bind(this))}catch(n){this.addTechnicalError({id:u.ID.DELEGATE_GENERAL_ERROR,message:"Fehler beim Fetchen der Komponente in onFetch",cause:n})}this.didCallOnFetch()}else e()},save:function(e,t){if(t)t.isClientInterface()||(this.internalFlags[h.PROVIDER_CALLED_SAVE]=!0),this.partialSerializer.save([this],e);else if(this.isProcessing())this.addTechnicalError({id:u.ID.FRAMEWORK_FAILED,message:"Fehler in save: Die Komponente befindet sich schon im Status PROCESSING"});else if(this.canSave()){this.state=d.PROCESSING;try{this.delegate.onSave(this.componentProviderInterface,function(){this.state=d.READY,e()}.bind(this))}catch(n){this.addTechnicalError({id:u.ID.DELEGATE_GENERAL_ERROR,message:"Fehler beim Speichern der Komponente in onSave",cause:n})}this.didCallOnSave(!1)}else e()},setOutputParametersFromInputParameters:function(e){e=e||Object.getOwnPropertyNames(this.type.getDescriptor().inputParameters),this.type.getDescriptor().outputParameters&&e.forEach(function(e){this.type.getDescriptor().outputParameters[e]&&this.elements.setOutputParameter(e,n.deepCopy(this.elements.getInputParameters()[e]))}.bind(this))},didCallOnFetch:function(){this.setClientCanFetch(!1),this.internalFlags[h.PROVIDER_CALLED_FETCH]=!1},didCallOnSave:function(){this.setClientCanSave(!1),this.internalFlags[h.PROVIDER_CALLED_SAVE]=!1},notifyChangeListeners:function(e){this.changeListeners.forEach(function(t){t(this.componentClientInterface,e)}.bind(this))}})}),define("tao/ospm/bc/internal/BusinessComponentsPartialSerializer",["tao/lib/stapes","tao/ospm/bc/internal/BusinessComponentToolkit"],function(e,t){var n,i,o,r;return o=e.subclass({component:null,operations:[],finishCallback:null,isRunning:!1,constructor:function(e,t){this.component=e,this.operations=[],this.finishCallback=t,this.isRunning=!1},addOperation:function(e){this.operations.indexOf(e)<0&&this.operations.push(e)},run:function(){var e;this.isRunning||(this.operations.length>0?(e=this.operations.shift(),this.isRunning=!0,this.component[e](function(){this.isRunning=!1,this.run()}.bind(this))):this.finishCallback(this))}}),i=e.subclass({appId:null,tasks:null,taskFinishCallback:null,taskGroupFinishCallback:null,constructor:function(e,t,n){this.appId=e,this.tasks=[],this.taskFinishCallback=t,this.taskGroupFinishCallback=n},addOrEnlargeTask:function(e,t){var n=this.getTask(e);return n||(n=new o(e,this.onTaskFinished.bind(this)),this.tasks.push(n)),n.addOperation(t),n},run:function(){this.tasks.slice().forEach(function(e){e.run()})},onTaskFinished:function(e){this.removeTask(e),this.taskFinishCallback(e),0===this.tasks.length&&this.taskGroupFinishCallback(this)},getTask:function(e){var t,n;for(n=0;n<this.tasks.length;n++)if(t=this.tasks[n],t.component===e)return t;return null},removeTask:function(e){var t=this.tasks.indexOf(e);t>=0&&this.tasks.splice(t,1)}}),n=e.subclass({components:null,callback:null,constructor:function(e,t){this.components=e,this.callback=t},isCallable:function(e){var t,n=!0;for(t=0;t<this.components.length;t++)if(e.indexOf(this.components[t])>=0){n=!1;break}return n},callCallback:function(){this.callback()}}),r=e.subclass({entries:null,constructor:function(){this.entries=[]},add:function(e,t){this.entries.push(new n(e,t))},callAllCallables:function(e){var t=this.entries.filter(function(t){return t.isCallable(e)});t.forEach(function(e){e.callCallback(),this.remove(e)}.bind(this))},remove:function(e){var t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}}),e.subclass({taskGroups:[],currentTaskGroup:null,callbackEntriesManager:null,constructor:function(){this.taskGroups=[],this.callbackEntriesManager=new r},fetch:function(e,t){e=e.filter(function(e){return e.canFetch()}),e.length>0?this.enqueue("fetch",e,t):t&&t()},save:function(e,t){e=e.filter(function(e){return e.canSave()}),e.length>0?this.enqueue("save",e,t):t&&t()},enqueue:function(e,n,o){o&&this.callbackEntriesManager.add(n,o),n.forEach(function(n){var o,r=t.getAppId(n.getDescriptor().id);o=this.getTaskGroup(r),o||(o=new i(r,this.onTaskFinished.bind(this),this.onTaskGroupFinished.bind(this)),this.taskGroups.push(o),this.currentTaskGroup||(this.currentTaskGroup=o)),o.addOrEnlargeTask(n,e)}.bind(this)),this.currentTaskGroup&&this.currentTaskGroup.run()},getTaskGroup:function(e){var t,n;for(n=0;n<this.taskGroups.length;n++)if(t=this.taskGroups[n],t.appId===e)return t;return null},onTaskFinished:function(){this.callbackEntriesManager.callAllCallables(this.getBusyComponents())},onTaskGroupFinished:function(e){this.removeTaskGroup(e),this.currentTaskGroup=null,this.taskGroups.length>0&&(this.currentTaskGroup=this.taskGroups.shift(),this.currentTaskGroup.run())},removeTaskGroup:function(e){var t=this.taskGroups.indexOf(e);t>=0&&this.taskGroups.splice(t,1)},getBusyComponents:function(){var e=[];return this.taskGroups.forEach(function(t){t.tasks.forEach(function(t){var n=t.component;e.indexOf(n)<0&&e.push(n)})}),e}})}),define("tao/ospm/bc/BusinessComponentsAPI",["tao/lib/stapes","tao/ospm/bc/internal/BusinessComponentTypesManager","tao/ospm/bc/internal/BusinessComponent","tao/ospm/bc/internal/BusinessComponentsPartialSerializer","tao/ospm/bc/BusinessComponentTechnicalError","tao/ospm/bc/internal/BusinessComponentToolkit","tao/ospm/common/Logger","tao/ospm/common/Constants","tao/ospm/common/OSPMError","tao/ospm/core/ServerStage","tao/ospm/common/Toolkit"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e){var t=[];return e.forEach(function(e){t.push(e.getComponent())}),t}var h=e.subclass({clientAppId:"",componentTypesManager:null,partialSerializer:null,technicalErrorHandler:null,logger:null,constructor:function(e,n){var o=e.split("_"),r=o[1].toLowerCase();this.clientAppId=r,this.componentTypesManager=new t(r,n),this.partialSerializer=new i,this.logger=new s(r,"BusinessComponentsAPI")},loadComponentTypes:function(e,t,n){this.componentTypesManager.loadComponentTypes(e,t,function(){this.componentTypesManager.getTechnicalErrors().forEach(function(e){this.onTechnicalError(e)}.bind(this)),n()}.bind(this))},setTechnicalErrorHandler:function(e){this.technicalErrorHandler=e},isComponentTypeAvailable:function(e){return this.isRequestedComponentTypeId(e)?!!this.componentTypesManager.getComponentType(e):!1},createComponent:function(e){var t,i;return this.isRequestedComponentTypeId(e.typeId)?(t=this.componentTypesManager.getComponentType(e.typeId),t?(i=new n(t,this.clientAppId,this.partialSerializer,this.onTechnicalError.bind(this)),e=r.deepCopy(e),u.deleteProperty(e,"typeId"),i.init(e)):(this.addTechnicalError({appId:this.clientAppId,componentTypeId:e.typeId,id:o.ID.TYPE_NOT_AVAILABLE,message:"Der Business-Komponenten-Typ konnte nicht geladen werden!"}),null)):null},fetch:function(e,t){this.partialSerializer.fetch(d(e),t)},save:function(e,t){this.partialSerializer.save(d(e),t)},isRequestedComponentTypeId:function(e){return this.componentTypesManager.isRequestedComponentTypeId(e)?!0:(this.addTechnicalError({appId:this.clientAppId,componentTypeId:e,id:o.ID.TYPE_NOT_REQUESTED,message:"Der Business-Komponenten-Typ wurde nicht in der package.json-Datei angefordert!"}),!1)},onTechnicalError:function(e){if(c.isStageDevelopment())throw new l(e.getMessage());this.logger.error(e.getMessage()),"function"==typeof this.technicalErrorHandler&&this.technicalErrorHandler(e)},addTechnicalError:function(e){this.onTechnicalError(new o(e))}});return h}),define("tao/lib/BigDecimal",[],function(){var e=function(){function e(){this.digits=0,this.form=0,this.lostDigits=!1,this.roundingMode=0;var t=this.DEFAULT_FORM,n=this.DEFAULT_LOSTDIGITS,i=this.DEFAULT_ROUNDINGMODE;if(4==e.arguments.length)t=e.arguments[1],n=e.arguments[2],i=e.arguments[3];else if(3==e.arguments.length)t=e.arguments[1],n=e.arguments[2];else if(2==e.arguments.length)t=e.arguments[1];else if(1!=e.arguments.length)throw"MathContext(): "+e.arguments.length+" arguments given; expected 1 to 4";var o=e.arguments[0];if(o!=this.DEFAULT_DIGITS){if(o<this.MIN_DIGITS)throw"MathContext(): Digits too small: "+o;if(o>this.MAX_DIGITS)throw"MathContext(): Digits too large: "+o}if(t==this.SCIENTIFIC);else if(t==this.ENGINEERING);else if(t!=this.PLAIN)throw"MathContext() Bad form value: "+t;if(!this.isValidRound(i))throw"MathContext(): Bad roundingMode value: "+i;this.digits=o,this.form=t,this.lostDigits=n,this.roundingMode=i}function t(){return this.digits}function n(){return this.form}function i(){return this.lostDigits}function o(){return this.roundingMode}function r(){var e=null,t=0,n=null;e=this.form==this.SCIENTIFIC?"SCIENTIFIC":this.form==this.ENGINEERING?"ENGINEERING":"PLAIN";var i=this.ROUNDS.length;t=0;e:for(;i>0;i--,t++)if(this.roundingMode==this.ROUNDS[t]){n=this.ROUNDWORDS[t];break e}return"digits="+this.digits+" form="+e+" lostDigits="+(this.lostDigits?"1":"0")+" roundingMode="+n}function s(e){var t=0,n=this.ROUNDS.length;for(t=0;n>0;n--,t++)if(e==this.ROUNDS[t])return!0;return!1}return e.prototype.getDigits=t,e.prototype.getForm=n,e.prototype.getLostDigits=i,e.prototype.getRoundingMode=o,e.prototype.toString=r,e.prototype.isValidRound=s,e.PLAIN=e.prototype.PLAIN=0,e.SCIENTIFIC=e.prototype.SCIENTIFIC=1,e.ENGINEERING=e.prototype.ENGINEERING=2,e.ROUND_CEILING=e.prototype.ROUND_CEILING=2,e.ROUND_DOWN=e.prototype.ROUND_DOWN=1,e.ROUND_FLOOR=e.prototype.ROUND_FLOOR=3,e.ROUND_HALF_DOWN=e.prototype.ROUND_HALF_DOWN=5,e.ROUND_HALF_EVEN=e.prototype.ROUND_HALF_EVEN=6,e.ROUND_HALF_UP=e.prototype.ROUND_HALF_UP=4,e.ROUND_UNNECESSARY=e.prototype.ROUND_UNNECESSARY=7,e.ROUND_UP=e.prototype.ROUND_UP=0,e.prototype.DEFAULT_FORM=e.prototype.SCIENTIFIC,e.prototype.DEFAULT_DIGITS=9,e.prototype.DEFAULT_LOSTDIGITS=!1,e.prototype.DEFAULT_ROUNDINGMODE=e.prototype.ROUND_HALF_UP,e.prototype.MIN_DIGITS=0,e.prototype.MAX_DIGITS=999999999,e.prototype.ROUNDS=new Array(e.prototype.ROUND_HALF_UP,e.prototype.ROUND_UNNECESSARY,e.prototype.ROUND_CEILING,e.prototype.ROUND_DOWN,e.prototype.ROUND_FLOOR,e.prototype.ROUND_HALF_DOWN,e.prototype.ROUND_HALF_EVEN,e.prototype.ROUND_UP),e.prototype.ROUNDWORDS=new Array("ROUND_HALF_UP","ROUND_UNNECESSARY","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_UP"),e.prototype.DEFAULT=new e(e.prototype.DEFAULT_DIGITS,e.prototype.DEFAULT_FORM,e.prototype.DEFAULT_LOSTDIGITS,e.prototype.DEFAULT_ROUNDINGMODE),e}(),t=function(e){function t(e,t){return(e-e%t)/t}function n(e,t,n,i,o){var r;if(i>t)for(r=o-1;r>=0;--r)n[r+i]=e[r+t];else for(r=0;o>r;++r)n[r+i]=e[r+t]}function i(e){var t,n=new Array(e);for(t=0;e>t;++t)n[t]=0;return n}function o(){if(this.ind=0,this.form=e.prototype.PLAIN,this.mant=null,this.exp=0,0!=o.arguments.length){var t,n,i;1==o.arguments.length?(t=o.arguments[0],n=0,i=t.length):(t=o.arguments[0],n=o.arguments[1],i=o.arguments[2]),"string"==typeof t&&(t=t.split(""));var r,s,a,l,c,u=0,d=0,h=!1,m=0,p=0,f=0,g=0,_=0,v=0;0>=i&&this.bad("BigDecimal(): ",t),this.ind=this.ispos,"-"==t[0]?(i--,0==i&&this.bad("BigDecimal(): ",t),this.ind=this.isneg,n++):"+"==t[0]&&(i--,0==i&&this.bad("BigDecimal(): ",t),n++),r=!1,s=!1,a=0,l=-1,c=-1;var b=i;u=n;e:for(;b>0;b--,u++)if(d=t[u],d>="0"&&"9">=d)c=u,a++;else if("."!=d){if("e"==d||"E"==d){u-n>i-2&&this.bad("BigDecimal(): ",t),h=!1,"-"==t[u+1]?(h=!0,m=u+2):m="+"==t[u+1]?u+2:u+1,p=i-(m-n),(0==p||p>9)&&this.bad("BigDecimal(): ",t);var y=p;for(f=m;y>0;y--,f++)g=t[f],"0">g&&this.bad("BigDecimal(): ",t),g>"9"?this.bad("BigDecimal(): ",t):_=g-"0",this.exp=10*this.exp+_;h&&(this.exp=-this.exp),s=!0;break e}("0">d||d>"9")&&this.bad("BigDecimal(): ",t),r=!0,c=u,a++}else l>=0&&this.bad("BigDecimal(): ",t),l=u-n;0==a&&this.bad("BigDecimal(): ",t),l>=0&&(this.exp=this.exp+l-a);var C=c-1;u=n;e:for(;C>=u;u++)if(d=t[u],"0"==d)n++,l--,a--;else{if("."!=d){if("9">=d)break e;break e}n++,l--}if(this.mant=new Array(a),f=n,r){do{var w=a;for(u=0;w>0;w--,u++)u==l&&f++,g=t[f],"9">=g?this.mant[u]=g-"0":this.bad("BigDecimal(): ",t),f++}while(!1)}else do{var E=a;for(u=0;E>0;E--,u++)u==l&&f++,this.mant[u]=t[f]-"0",f++}while(!1);0==this.mant[0]?(this.ind=this.iszero,this.exp>0&&(this.exp=0),s&&(this.mant=this.ZERO.mant,this.exp=0)):s&&(this.form=e.prototype.SCIENTIFIC,v=this.exp+this.mant.length-1,(v<this.MinExp||v>this.MaxExp)&&this.bad("BigDecimal(): ",t))}}function r(){var e;if(1==r.arguments.length)e=r.arguments[0];else{if(0!=r.arguments.length)throw"abs(): "+r.arguments.length+" arguments given; expected 0 or 1";e=this.plainMC}return this.ind==this.isneg?this.negate(e):this.plus(e)}function s(){var t;if(2==s.arguments.length)t=s.arguments[1];else{if(1!=s.arguments.length)throw"add(): "+s.arguments.length+" arguments given; expected 1 or 2";t=this.plainMC}var n,i,r,a,l,c,u,d=s.arguments[0],h=0,m=0,p=0,f=null,g=0,_=0,v=0,b=0,y=0,C=0;if(t.lostDigits&&this.checkdigits(d,t.digits),n=this,0==n.ind&&t.form!=e.prototype.PLAIN)return d.plus(t);if(0==d.ind&&t.form!=e.prototype.PLAIN)return n.plus(t);i=t.digits,i>0&&(n.mant.length>i&&(n=this.clone(n).round(t)),d.mant.length>i&&(d=this.clone(d).round(t))),r=new o,a=n.mant,l=n.mant.length,c=d.mant,u=d.mant.length;do if(n.exp==d.exp)r.exp=n.exp;else if(n.exp>d.exp){if(h=l+n.exp-d.exp,h>=u+i+1&&i>0)return r.mant=a,r.exp=n.exp,r.ind=n.ind,i>l&&(r.mant=this.extend(n.mant,i),r.exp=r.exp-(i-l)),r.finish(t,!1);r.exp=d.exp,h>i+1&&i>0&&(m=h-i-1,u-=m,r.exp=r.exp+m,h=i+1),h>l&&(l=h)}else{if(h=u+d.exp-n.exp,h>=l+i+1&&i>0)return r.mant=c,r.exp=d.exp,r.ind=d.ind,i>u&&(r.mant=this.extend(d.mant,i),r.exp=r.exp-(i-u)),r.finish(t,!1);r.exp=n.exp,h>i+1&&i>0&&(m=h-i-1,l-=m,r.exp=r.exp+m,h=i+1),h>u&&(u=h)}while(!1);if(r.ind=n.ind==this.iszero?this.ispos:n.ind,(n.ind==this.isneg?1:0)==(d.ind==this.isneg?1:0))p=1;else do{p=-1;do if(d.ind==this.iszero);else if(u>l||n.ind==this.iszero)f=a,a=c,c=f,m=l,l=u,u=m,r.ind=-r.ind;else if(l>u);else{g=0,_=0,v=a.length-1,b=c.length-1;e:for(;;){if(v>=g)y=a[g];else{if(_>b){if(t.form!=e.prototype.PLAIN)return this.ZERO;break e}y=0}if(C=b>=_?c[_]:0,y!=C){C>y&&(f=a,a=c,c=f,m=l,l=u,u=m,r.ind=-r.ind);break e}g++,_++}}while(!1)}while(!1);return r.mant=this.byteaddsub(a,l,c,u,p,!1),r.finish(t,!1)}function a(){var e;if(2==a.arguments.length)e=a.arguments[1];else{if(1!=a.arguments.length)throw"compareTo(): "+a.arguments.length+" arguments given; expected 1 or 2";e=this.plainMC}var t,n=a.arguments[0],i=0,o=0;if(e.lostDigits&&this.checkdigits(n,e.digits),this.ind==n.ind&&this.exp==n.exp){if(i=this.mant.length,i<n.mant.length)return-this.ind;if(i>n.mant.length)return this.ind;if(i<=e.digits||0==e.digits){var r=i;for(o=0;r>0;r--,o++){if(this.mant[o]<n.mant[o])return-this.ind;if(this.mant[o]>n.mant[o])return this.ind}return 0}}else{if(this.ind<n.ind)return-1;if(this.ind>n.ind)return 1}return t=this.clone(n),t.ind=-t.ind,this.add(t,e).ind}function l(){var t,n=-1;if(2==l.arguments.length)t="number"==typeof l.arguments[1]?new e(0,e.prototype.PLAIN,!1,l.arguments[1]):l.arguments[1];else if(3==l.arguments.length){if(n=l.arguments[1],0>n)throw"divide(): Negative scale: "+n;t=new e(0,e.prototype.PLAIN,!1,l.arguments[2])}else{if(1!=l.arguments.length)throw"divide(): "+l.arguments.length+" arguments given; expected between 1 and 3";t=this.plainMC}var i=l.arguments[0];return this.dodivide("D",i,t,n)}function c(){var e;if(2==c.arguments.length)e=c.arguments[1];else{if(1!=c.arguments.length)throw"divideInteger(): "+c.arguments.length+" arguments given; expected 1 or 2";e=this.plainMC}var t=c.arguments[0];return this.dodivide("I",t,e,0)}function u(){var e;if(2==u.arguments.length)e=u.arguments[1];else{if(1!=u.arguments.length)throw"max(): "+u.arguments.length+" arguments given; expected 1 or 2";e=this.plainMC}var t=u.arguments[0];return this.compareTo(t,e)>=0?this.plus(e):t.plus(e)}function d(){var e;if(2==d.arguments.length)e=d.arguments[1];else{if(1!=d.arguments.length)throw"min(): "+d.arguments.length+" arguments given; expected 1 or 2";e=this.plainMC}var t=d.arguments[0];return this.compareTo(t,e)<=0?this.plus(e):t.plus(e)}function h(){var e;if(2==h.arguments.length)e=h.arguments[1];else{if(1!=h.arguments.length)throw"multiply(): "+h.arguments.length+" arguments given; expected 1 or 2";e=this.plainMC}var t,n,i,r,s,a,l=h.arguments[0],c=null,u=null,d=0,m=0,p=0;e.lostDigits&&this.checkdigits(l,e.digits),t=this,n=0,i=e.digits,i>0?(t.mant.length>i&&(t=this.clone(t).round(e)),l.mant.length>i&&(l=this.clone(l).round(e))):(t.exp>0&&(n+=t.exp),l.exp>0&&(n+=l.exp)),t.mant.length<l.mant.length?(c=t.mant,u=l.mant):(c=l.mant,u=t.mant),r=c.length+u.length-1,d=c[0]*u[0]>9?r+1:r,s=new o,a=this.createArrayWithZeros(d);var f=c.length;for(m=0;f>0;f--,m++)p=c[m],0!=p&&(a=this.byteaddsub(a,a.length,u,r,p,!0)),r--;return s.ind=t.ind*l.ind,s.exp=t.exp+l.exp-n,s.mant=0==n?a:this.extend(a,a.length+n),s.finish(e,!1)}function m(){var e;if(1==m.arguments.length)e=m.arguments[0];else{if(0!=m.arguments.length)throw"negate(): "+m.arguments.length+" arguments given; expected 0 or 1";e=this.plainMC}var t;return e.lostDigits&&this.checkdigits(null,e.digits),t=this.clone(this),t.ind=-t.ind,t.finish(e,!1)}function p(){var t;if(1==p.arguments.length)t=p.arguments[0];else{if(0!=p.arguments.length)throw"plus(): "+p.arguments.length+" arguments given; expected 0 or 1";t=this.plainMC}if(t.lostDigits&&this.checkdigits(null,t.digits),t.form==e.prototype.PLAIN&&this.form==e.prototype.PLAIN){if(this.mant.length<=t.digits)return this;if(0==t.digits)return this}return this.clone(this).finish(t,!1)}function f(){var t;if(2==f.arguments.length)t=f.arguments[1];else{if(1!=f.arguments.length)throw"pow(): "+f.arguments.length+" arguments given; expected 1 or 2";t=this.plainMC}var n,i,o,r,s,a,l=f.arguments[0],c=0,u=0,d=0;if(t.lostDigits&&this.checkdigits(l,t.digits),n=l.intcheck(this.MinArg,this.MaxArg),i=this,o=t.digits,0==o){if(l.ind==this.isneg)throw"pow(): Negative power: "+l.toString();c=0}else{if(l.mant.length+l.exp>o)throw"pow(): Too many digits: "+l.toString();i.mant.length>o&&(i=this.clone(i).round(t)),u=l.mant.length+l.exp,c=o+u+1}if(r=new e(c,t.form,!1,t.roundingMode),s=this.ONE,0==n)return s;0>n&&(n=-n),a=!1,d=1;e:for(;n<<=1,0>n&&(a=!0,s=s.multiply(i,r)),31!=d;d++)a&&(s=s.multiply(s,r));return l.ind<0&&(s=this.ONE.divide(s,r)),s.finish(t,!0)}function g(){var e;
if(2==g.arguments.length)e=g.arguments[1];else{if(1!=g.arguments.length)throw"remainder(): "+g.arguments.length+" arguments given; expected 1 or 2";e=this.plainMC}var t=g.arguments[0];return this.dodivide("R",t,e,-1)}function _(){var e;if(2==_.arguments.length)e=_.arguments[1];else{if(1!=_.arguments.length)throw"subtract(): "+_.arguments.length+" arguments given; expected 1 or 2";e=this.plainMC}var t,n=_.arguments[0];return e.lostDigits&&this.checkdigits(n,e.digits),t=this.clone(n),t.ind=-t.ind,this.add(t,e)}function v(e){var t,n=0,i=null,r=null;if(null==e)return!1;if(!(e instanceof o))return!1;if(t=e,this.ind!=t.ind)return!1;if(this.mant.length==t.mant.length&&this.exp==t.exp&&this.form==t.form){var s=this.mant.length;for(n=0;s>0;s--,n++)if(this.mant[n]!=t.mant[n])return!1}else{if(i=this.layout(),r=t.layout(),i.length!=r.length)return!1;var a=i.length;for(n=0;a>0;a--,n++)if(i[n]!=r[n])return!1}return!0}function b(){var t,n,i,o;if(6==b.arguments.length)t=b.arguments[2],n=b.arguments[3],i=b.arguments[4],o=b.arguments[5];else{if(2!=b.arguments.length)throw"format(): "+b.arguments.length+" arguments given; expected 2 or 6";t=-1,n=-1,i=e.prototype.SCIENTIFIC,o=this.ROUND_HALF_UP}var r,s,a=b.arguments[0],l=b.arguments[1],c=0,u=0,d=0,h=null,m=0,p=0,f=0,g=0,_=null,v=0,y=0;if((-1>a||0==a)&&this.badarg("format",1,a),-1>l&&this.badarg("format",2,l),(-1>t||0==t)&&this.badarg("format",3,t),-1>n&&this.badarg("format",4,n),i==e.prototype.SCIENTIFIC||i==e.prototype.ENGINEERING||(-1==i?i=e.prototype.SCIENTIFIC:this.badarg("format",5,i)),o!=this.ROUND_HALF_UP)try{-1==o?o=this.ROUND_HALF_UP:new e(9,e.prototype.SCIENTIFIC,!1,o)}catch(C){this.badarg("format",6,o)}r=this.clone(this);do-1==n?r.form=e.prototype.PLAIN:r.ind==this.iszero?r.form=e.prototype.PLAIN:(c=r.exp+r.mant.length,r.form=c>n?i:-5>c?i:e.prototype.PLAIN);while(!1);if(l>=0)e:for(;r.form==e.prototype.PLAIN?u=-r.exp:r.form==e.prototype.SCIENTIFIC?u=r.mant.length-1:(d=(r.exp+r.mant.length-1)%3,0>d&&(d=3+d),d++,u=d>=r.mant.length?0:r.mant.length-d),u!=l;){if(l>u){if(h=this.extend(r.mant,r.mant.length+l-u),r.mant=h,r.exp=r.exp-(l-u),r.exp<this.MinExp)throw"format(): Exponent Overflow: "+r.exp;break e}if(m=u-l,m>r.mant.length)r.mant=this.ZERO.mant,r.ind=this.iszero,r.exp=0;else if(p=r.mant.length-m,f=r.exp,r.round(p,o),r.exp-f==m)break e}if(s=r.layout(),a>0){var w=s.length;g=0;e:for(;w>0&&"."!=s[g]&&"E"!=s[g];w--,g++);if(g>a&&this.badarg("format",1,a),a>g){_=new Array(s.length+a-g);var E=a-g;for(v=0;E>0;E--,v++)_[v]=" ";this.arraycopy(s,0,_,v,s.length),s=_}}if(t>0){var L=s.length-1;g=s.length-1;e:for(;L>0&&"E"!=s[g];L--,g--);if(0==g){_=new Array(s.length+t+2),this.arraycopy(s,0,_,0,s.length);var S=t+2;for(v=s.length;S>0;S--,v++)_[v]=" ";s=_}else if(y=s.length-g-2,y>t&&this.badarg("format",3,t),t>y){_=new Array(s.length+t-y),this.arraycopy(s,0,_,0,g+2);var D=t-y;for(v=g+2;D>0;D--,v++)_[v]="0";this.arraycopy(s,g+2,_,v,y),s=_}}return s.join("")}function y(){var e,n,i=0,o=0,r=0;if(this.ind==this.iszero)return 0;if(e=this.mant.length-1,this.exp<0){if(e+=this.exp,!this.allzero(this.mant,e+1))throw"intValueExact(): Decimal part non-zero: "+this.toString();if(0>e)return 0;i=0}else{if(this.exp+e>9)throw"intValueExact(): Conversion overflow: "+this.toString();i=this.exp}n=0;var s=e+i;for(o=0;s>=o;o++)n=10*n,e>=o&&(n+=this.mant[o]);if(e+i==9&&(r=t(n,1e9),r!=this.mant[0])){if(-2147483648==n&&this.ind==this.isneg&&2==this.mant[0])return n;throw"intValueExact(): Conversion overflow: "+this.toString()}return this.ind==this.ispos?n:-n}function C(e){var t;return t=this.clone(this),t.exp=t.exp-e,t.finish(this.plainMC,!1)}function w(e){var t;return t=this.clone(this),t.exp=t.exp+e,t.finish(this.plainMC,!1)}function E(){return this.exp>=0?0:-this.exp}function L(){var t;if(2==L.arguments.length)t=L.arguments[1];else{if(1!=L.arguments.length)throw"setScale(): "+L.arguments.length+" given; expected 1 or 2";t=this.ROUND_UNNECESSARY}var n,i,o=L.arguments[0],r=0,s=0;if(n=this.scale(),n==o&&this.form==e.prototype.PLAIN)return this;if(i=this.clone(this),o>=n)r=0==n?i.exp+o:o-n,i.mant=this.extend(i.mant,i.mant.length+r),i.exp=-o;else{if(0>o)throw"setScale(): Negative scale: "+o;s=i.mant.length-(n-o),i=i.round(s,t),i.exp!=-o&&(i.mant=this.extend(i.mant,i.mant.length+1),i.exp=i.exp-1)}return i.form=e.prototype.PLAIN,i}function S(){return this.ind}function D(){return this.layout().join("")}function T(){var t,n,i,o=0,r=null,s=0,a=0,l=0,c=null,u=0;t=new Array(this.mant.length);var d=this.mant.length;for(o=0;d>0;d--,o++)t[o]=this.mant[o]+"";if(this.form!=e.prototype.PLAIN){if(r="",this.ind==this.isneg&&(r+="-"),s=this.exp+t.length-1,this.form==e.prototype.SCIENTIFIC)r+=t[0],t.length>1&&(r+="."),r+=t.slice(1).join("");else do if(a=s%3,0>a&&(a=3+a),s-=a,a++,a>=t.length){r+=t.join("");for(var h=a-t.length;h>0;h--)r+="0"}else r+=t.slice(0,a).join(""),r+=".",r+=t.slice(a).join("");while(!1);return 0!=s&&(0>s?(l="-",s=-s):l="+",r+="E",r+=l,r+=s),r.split("")}if(0==this.exp)return this.ind>=0?t:(c=new Array(t.length+1),c[0]="-",this.arraycopy(t,0,c,1,t.length),c);if(n=this.ind==this.isneg?1:0,i=this.exp+t.length,1>i){u=n+2-this.exp,c=new Array(u),0!=n&&(c[0]="-"),c[n]="0",c[n+1]=".";var m=-i;for(o=n+2;m>0;m--,o++)c[o]="0";return this.arraycopy(t,0,c,n+2-i,t.length),c}if(i>t.length){u=n+i,c=new Array(u),0!=n&&(c[0]="-"),this.arraycopy(t,0,c,n,t.length);var p=i-t.length;for(o=n+t.length;p>0;p--,o++)c[o]="0";return c}return u=n+1+t.length,c=new Array(u),0!=n&&(c[0]="-"),this.arraycopy(t,0,c,n,i),c[n+i]=".",this.arraycopy(t,i,c,n+i+1,t.length-i),c}function I(e,t){var n;if(n=this.intValueExact(),e>n||n>t)throw"intcheck(): Conversion overflow: "+n;return n}function k(n,i,r,s){var a,l,c,u,d,h,m,p,f,g,_,v=0,b=0,y=0,C=0,w=0,E=0,L=0,S=0,D=null,T=0,I=0,k=null;if(r.lostDigits&&this.checkdigits(i,r.digits),a=this,0==i.ind)throw"dodivide(): Divide by 0";if(0==a.ind)return r.form!=e.prototype.PLAIN?this.ZERO:-1==s?a:a.setScale(s);if(l=r.digits,l>0?(a.mant.length>l&&(a=this.clone(a).round(r)),i.mant.length>l&&(i=this.clone(i).round(r))):(-1==s&&(s=a.scale()),l=a.mant.length,s!=-a.exp&&(l=l+s+a.exp),l=l-(i.mant.length-1)-i.exp,l<a.mant.length&&(l=a.mant.length),l<i.mant.length&&(l=i.mant.length)),c=a.exp-i.exp+a.mant.length-i.mant.length,0>c&&"D"!=n)return"I"==n?this.ZERO:this.clone(a).finish(r,!1);u=new o,u.ind=a.ind*i.ind,u.exp=c,u.mant=this.createArrayWithZeros(l+1),d=l+l+1,h=this.extend(a.mant,d),m=d,p=i.mant,f=d,g=10*p[0]+1,p.length>1&&(g+=p[1]),_=0;e:for(;;){v=0;t:for(;!(f>m);){if(m==f){n:do{var x=m;for(b=0;x>0;x--,b++){if(y=b<p.length?p[b]:0,h[b]<y)break t;if(h[b]>y)break n}v++,u.mant[_]=v,_++,h[0]=0;break e}while(!1);C=h[0]}else C=10*h[0],m>1&&(C+=h[1]);if(w=t(10*C,g),0==w&&(w=1),v+=w,h=this.byteaddsub(h,m,p,f,-w,!0),0==h[0]){var A=m-2;E=0;n:for(;A>=E&&0==h[E];E++)m--;0!=E&&this.arraycopy(h,E,h,0,m)}}if(0!=_||0!=v){if(u.mant[_]=v,_++,_==l+1)break e;if(0==h[0])break e}if(s>=0&&-u.exp>s)break e;if("D"!=n&&u.exp<=0)break e;u.exp=u.exp-1,f--}if(0==_&&(_=1),"I"==n||"R"==n){if(_+u.exp>l)throw"dodivide(): Integer overflow";if("R"==n)do{if(0==u.mant[0])return this.clone(a).finish(r,!1);if(0==h[0])return this.ZERO;u.ind=a.ind,L=l+l+1-a.mant.length,u.exp=u.exp-L+a.exp,S=m,b=S-1;e:for(;b>=1&&(u.exp<a.exp&&u.exp<i.exp)&&0==h[b];b--)S--,u.exp=u.exp+1;return S<h.length&&(D=new Array(S),this.arraycopy(h,0,D,0,S),h=D),u.mant=h,u.finish(r,!1)}while(!1)}else 0!=h[0]&&(T=u.mant[_-1],T%5==0&&(u.mant[_-1]=T+1));if(s>=0)do return _!=u.mant.length&&(u.exp=u.exp-(u.mant.length-_)),I=u.mant.length-(-u.exp-s),u.round(I,r.roundingMode),u.exp!=-s&&(u.mant=this.extend(u.mant,u.mant.length+1),u.exp=u.exp-1),u.finish(r,!0);while(!1);if(_==u.mant.length)u.round(r),_=l;else{if(0==u.mant[0])return this.ZERO;k=new Array(_),this.arraycopy(u.mant,0,k,0,_),u.mant=k}return u.finish(r,!0)}function x(e,t){throw e+"Not a number: "+t}function A(e,t,n){throw"Bad argument "+t+" to "+e+": "+n}function O(e,t){var n;return e.length==t?e:(n=i(t),this.arraycopy(e,0,n,0,e.length),n)}function N(e,t,n,i,o,r){var s,a,l,c,u,d,h,m,p,f=0,g=0,_=0;s=e.length,a=n.length,l=t-1,c=i-1,u=c,l>u&&(u=l),d=null,r&&u+1==s&&(d=e),null==d&&(d=this.createArrayWithZeros(u+1)),h=!1,1==o?h=!0:-1==o&&(h=!0),m=0,f=u;e:for(;f>=0;f--){if(l>=0&&(s>l&&(m+=e[l]),l--),c>=0&&(a>c&&(h?o>0?m+=n[c]:m-=n[c]:m+=n[c]*o),c--),10>m&&m>=0)do{d[f]=m,m=0;continue e}while(!1);g=m+90,d[f]=this.bytedig[g],m=this.bytecar[g]}if(0==m)return d;p=null,r&&u+2==e.length&&(p=e),null==p&&(p=new Array(u+2)),p[0]=m;var v=u+1;for(_=0;v>0;v--,_++)p[_+1]=d[_];return p}function M(){var e,n=0,i=0;for(e=new Array(190),n=0;189>=n;n++)i=n-90,i>=0?(e[n]=i%10,o.prototype.bytecar[n]=t(i,10)):(i+=100,e[n]=i%10,o.prototype.bytecar[n]=t(i,10)-10);return e}function P(e){var t;return t=new o,t.ind=e.ind,t.exp=e.exp,t.form=e.form,t.mant=e.mant,t}function R(e,t){if(0!=t){if(this.mant.length>t&&!this.allzero(this.mant,t))throw"Too many digits: "+this.toString();if(null!=e&&e.mant.length>t&&!this.allzero(e.mant,t))throw"Too many digits: "+e.toString()}}function F(){var e,t;if(2==F.arguments.length)e=F.arguments[0],t=F.arguments[1];else{if(1!=F.arguments.length)throw"round(): "+F.arguments.length+" arguments given; expected 1 or 2";var n=F.arguments[0];e=n.digits,t=n.roundingMode}var i,o,r,s,a=!1,l=0,c=null;if(i=this.mant.length-e,0>=i)return this;this.exp=this.exp+i,o=this.ind,r=this.mant,e>0?(this.mant=new Array(e),this.arraycopy(r,0,this.mant,0,e),a=!0,l=r[e]):(this.mant=this.ZERO.mant,this.ind=this.iszero,a=!1,l=0==e?r[0]:0),s=0;do if(t==this.ROUND_HALF_UP)l>=5&&(s=o);else if(t==this.ROUND_UNNECESSARY){if(!this.allzero(r,e))throw"round(): Rounding necessary"}else if(t==this.ROUND_HALF_DOWN)l>5?s=o:5==l&&(this.allzero(r,e+1)||(s=o));else if(t==this.ROUND_HALF_EVEN)l>5?s=o:5==l&&(this.allzero(r,e+1)?this.mant[this.mant.length-1]%2==1&&(s=o):s=o);else if(t==this.ROUND_DOWN);else if(t==this.ROUND_UP)this.allzero(r,e)||(s=o);else if(t==this.ROUND_CEILING)o>0&&(this.allzero(r,e)||(s=o));else{if(t!=this.ROUND_FLOOR)throw"round(): Bad round value: "+t;0>o&&(this.allzero(r,e)||(s=o))}while(!1);if(0!=s)do this.ind==this.iszero?(this.mant=this.ONE.mant,this.ind=s):(this.ind==this.isneg&&(s=-s),c=this.byteaddsub(this.mant,this.mant.length,this.ONE.mant,1,s,a),c.length>this.mant.length?(this.exp++,this.arraycopy(c,0,this.mant,0,this.mant.length)):this.mant=c);while(!1);if(this.exp>this.MaxExp)throw"round(): Exponent Overflow: "+this.exp;return this}function B(e,t){var n=0;0>t&&(t=0);var i=e.length-1;for(n=t;i>=n;n++)if(0!=e[n])return!1;return!0}function z(t,n){var i=0,o=0,r=null,s=0,a=0;if(0!=t.digits&&this.mant.length>t.digits&&this.round(t),n&&t.form!=e.prototype.PLAIN){i=this.mant.length,o=i-1;e:for(;o>=1&&0==this.mant[o];o--)i--,this.exp++;i<this.mant.length&&(r=new Array(i),this.arraycopy(this.mant,0,r,0,i),this.mant=r)}this.form=e.prototype.PLAIN;var l=this.mant.length;for(o=0;l>0;l--,o++)if(0!=this.mant[o]){if(o>0)do r=new Array(this.mant.length-o),this.arraycopy(this.mant,o,r,0,this.mant.length-o),this.mant=r;while(!1);if(s=this.exp+this.mant.length,s>0){if(s>t.digits&&0!=t.digits&&(this.form=t.form),s-1<=this.MaxExp)return this}else-5>s&&(this.form=t.form);if(s--,s<this.MinExp||s>this.MaxExp)e:do{if(this.form==e.prototype.ENGINEERING&&(a=s%3,0>a&&(a=3+a),s-=a,s>=this.MinExp&&s<=this.MaxExp))break e;throw"finish(): Exponent Overflow: "+s}while(!1);return this}if(this.ind=this.iszero,t.form!=e.prototype.PLAIN)this.exp=0;else if(this.exp>0)this.exp=0;else if(this.exp<this.MinExp)throw"finish(): Exponent Overflow: "+this.exp;return this.mant=this.ZERO.mant,this}function V(e){return this.compareTo(e)>0}function H(e){return this.compareTo(e)<0}function U(e){return this.compareTo(e)>=0}function W(e){return this.compareTo(e)<=0}function j(){return this.compareTo(o.prototype.ZERO)>0}function G(){return this.compareTo(o.prototype.ZERO)<0}function q(){return 0===this.compareTo(o.prototype.ZERO)}return o.prototype.div=t,o.prototype.arraycopy=n,o.prototype.createArrayWithZeros=i,o.prototype.abs=r,o.prototype.add=s,o.prototype.compareTo=a,o.prototype.divide=l,o.prototype.divideInteger=c,o.prototype.max=u,o.prototype.min=d,o.prototype.multiply=h,o.prototype.negate=m,o.prototype.plus=p,o.prototype.pow=f,o.prototype.remainder=g,o.prototype.subtract=_,o.prototype.equals=v,o.prototype.format=b,o.prototype.intValueExact=y,o.prototype.movePointLeft=C,o.prototype.movePointRight=w,o.prototype.scale=E,o.prototype.setScale=L,o.prototype.signum=S,o.prototype.toString=D,o.prototype.layout=T,o.prototype.intcheck=I,o.prototype.dodivide=k,o.prototype.bad=x,o.prototype.badarg=A,o.prototype.extend=O,o.prototype.byteaddsub=N,o.prototype.diginit=M,o.prototype.clone=P,o.prototype.checkdigits=R,o.prototype.round=F,o.prototype.allzero=B,o.prototype.finish=z,o.prototype.isGreaterThan=V,o.prototype.isLessThan=H,o.prototype.isGreaterThanOrEqualTo=U,o.prototype.isLessThanOrEqualTo=W,o.prototype.isPositive=j,o.prototype.isNegative=G,o.prototype.isZero=q,o.ROUND_CEILING=o.prototype.ROUND_CEILING=e.prototype.ROUND_CEILING,o.ROUND_DOWN=o.prototype.ROUND_DOWN=e.prototype.ROUND_DOWN,o.ROUND_FLOOR=o.prototype.ROUND_FLOOR=e.prototype.ROUND_FLOOR,o.ROUND_HALF_DOWN=o.prototype.ROUND_HALF_DOWN=e.prototype.ROUND_HALF_DOWN,o.ROUND_HALF_EVEN=o.prototype.ROUND_HALF_EVEN=e.prototype.ROUND_HALF_EVEN,o.ROUND_HALF_UP=o.prototype.ROUND_HALF_UP=e.prototype.ROUND_HALF_UP,o.ROUND_UNNECESSARY=o.prototype.ROUND_UNNECESSARY=e.prototype.ROUND_UNNECESSARY,o.ROUND_UP=o.prototype.ROUND_UP=e.prototype.ROUND_UP,o.prototype.ispos=1,o.prototype.iszero=0,o.prototype.isneg=-1,o.prototype.MinExp=-999999999,o.prototype.MaxExp=999999999,o.prototype.MinArg=-999999999,o.prototype.MaxArg=999999999,o.prototype.plainMC=new e(0,e.prototype.PLAIN),o.prototype.bytecar=new Array(190),o.prototype.bytedig=M(),o.ZERO=o.prototype.ZERO=new o("0"),o.ONE=o.prototype.ONE=new o("1"),o.TEN=o.prototype.TEN=new o("10"),o}(e);return t.prototype.getClassName=function(){return"BigDecimal"},document.OSPMEnvironment&&!document.OSPMEnvironment.BigDecimal&&(document.OSPMEnvironment.BigDecimal=t),t}),function(e){function t(){var e=arguments[0],n=t.cache;return n[e]&&n.hasOwnProperty(e)||(n[e]=t.parse(e)),t.format.call(null,n[e],arguments)}function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e,t){return Array(t+1).join(e)}var o={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};t.format=function(e,r){var s,a,l,c,u,d,h,m=1,p=e.length,f="",g=[],_=!0,v="";for(a=0;p>a;a++)if(f=n(e[a]),"string"===f)g[g.length]=e[a];else if("array"===f){if(c=e[a],c[2])for(s=r[m],l=0;l<c[2].length;l++){if(!s.hasOwnProperty(c[2][l]))throw new Error(t("[sprintf] property '%s' does not exist",c[2][l]));s=s[c[2][l]]}else s=c[1]?r[c[1]]:r[m++];if("function"==n(s)&&(s=s()),o.not_string.test(c[8])&&"number"!=n(s)&&isNaN(s))throw new TypeError(t("[sprintf] expecting number but found %s",n(s)));switch(o.number.test(c[8])&&(_=s>=0),c[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":case"i":s=parseInt(s,10);break;case"e":s=c[7]?s.toExponential(c[7]):s.toExponential();break;case"f":s=c[7]?parseFloat(s).toFixed(c[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&c[7]?s.substring(0,c[7]):s;break;case"u":s>>>=0;break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}!_||o.number.test(c[8])&&c[3]?(v=_?"+":"-",s=s.toString().replace(o.sign,"")):v="",d=c[4]?"0"===c[4]?"0":c[4].charAt(1):" ",h=c[6]-(v+s).length,u=c[6]?i(d,h):"",g[g.length]=c[5]?v+s+u:"0"===d?v+u+s:u+v+s}return g.join("")},t.cache={},t.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=o.text.exec(t)))i[i.length]=n[0];else if(null!==(n=o.modulo.exec(t)))i[i.length]="%";else{if(null===(n=o.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){r|=1;var s=[],a=n[2],l=[];if(null===(l=o.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s[s.length]=l[1];""!==(a=a.substring(l[0].length));)if(null!==(l=o.key_access.exec(a)))s[s.length]=l[1];else{if(null===(l=o.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s[s.length]=l[1]}n[2]=s}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=n}t=t.substring(n[0].length)}return i};var r=function(e,n,i){return i=(n||[]).slice(0),i.splice(0,0,e),t.apply(null,i)};"undefined"!=typeof exports?(exports.sprintf=t,exports.vsprintf=r):(e.sprintf=t,e.vsprintf=r,"function"==typeof define&&define.amd&&define("tao/lib/sprintf",[],function(){return{sprintf:t,vsprintf:r}}))}("undefined"==typeof window?this:window),define("tao/lib/Zip",[],function(){var e=null;return!function(t){e=t()}(function(){return function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t){var n=e("./lib/utils/common").assign,i=e("./lib/deflate"),o=e("./lib/inflate"),r=e("./lib/zlib/constants"),s={};n(s,i,o,r),t.exports=s},{"./lib/deflate":2,"./lib/inflate":3,"./lib/utils/common":4,"./lib/zlib/constants":7}],2:[function(e,t,n){function i(e,t){var n=new v(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function r(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=e("./zlib/deflate.js"),a=e("./utils/common"),l=e("./utils/strings"),c=e("./zlib/messages"),u=e("./zlib/zstream"),d=0,h=4,m=0,p=1,f=-1,g=0,_=8,v=function(e){this.options=a.assign({level:f,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==m)throw new Error(c[n]);t.header&&s.deflateSetHeader(this.strm,t.header)};v.prototype.push=function(e,t){var n,i,o=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:t===!0?h:d,o.input="string"==typeof e?l.string2buf(e):e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(r),o.next_out=0,o.avail_out=r),n=s.deflate(o,i),n!==p&&n!==m)return this.onEnd(n),this.ended=!0,!1;(0===o.avail_out||0===o.avail_in&&i===h)&&this.onData("string"===this.options.to?l.buf2binstring(a.shrinkBuf(o.output,o.next_out)):a.shrinkBuf(o.output,o.next_out))}while((o.avail_in>0||0===o.avail_out)&&n!==p);return i===h?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===m):!0},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===m&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=v,n.deflate=i,n.deflateRaw=o,n.gzip=r},{"./utils/common":4,"./utils/strings":5,"./zlib/deflate.js":9,"./zlib/messages":14,"./zlib/zstream":16}],3:[function(e,t,n){function i(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var r=e("./zlib/inflate.js"),s=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/constants"),c=e("./zlib/messages"),u=e("./zlib/zstream"),d=e("./zlib/gzheader"),h=function(e){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(c[n]);this.header=new d,r.inflateGetHeader(this.strm,this.header)};h.prototype.push=function(e,t){var n,i,o,c,u,d=this.strm,h=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,d.input="string"==typeof e?a.binstring2buf(e):e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(h),d.next_out=0,d.avail_out=h),n=r.inflate(d,l.Z_NO_FLUSH),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0===d.avail_out||n===l.Z_STREAM_END||0===d.avail_in&&i===l.Z_FINISH)&&("string"===this.options.to?(o=a.utf8border(d.output,d.next_out),c=d.next_out-o,u=a.buf2string(d.output,o),d.next_out=c,d.avail_out=h-c,c&&s.arraySet(d.output,d.output,o,c,0),this.onData(u)):this.onData(s.shrinkBuf(d.output,d.next_out)))}while(d.avail_in>0&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):!0},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=i,n.inflateRaw=o,n.ungzip=i},{"./utils/common":4,"./utils/strings":5,"./zlib/constants":7,"./zlib/gzheader":10,"./zlib/inflate.js":12,"./zlib/messages":14,"./zlib/zstream":16}],4:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,i,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+i),o);for(var r=0;i>r;r++)e[o+r]=t[n+r]},flattenChunks:function(e){var t,n,i,o,r,s;for(i=0,t=0,n=e.length;n>t;t++)i+=e[t].length;for(s=new Uint8Array(i),o=0,t=0,n=e.length;n>t;t++)r=e[t],s.set(r,o),o+=r.length;return s}},r={arraySet:function(e,t,n,i,o){for(var r=0;i>r;r++)e[o+r]=t[n+r]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(i)},{}],5:[function(e,t,n){function i(e,t){if(65537>t&&(e.subarray&&s||!e.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",i=0;t>i;i++)n+=String.fromCharCode(e[i]);return n}var o=e("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var l=new o.Buf8(256),c=0;256>c;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1,n.string2buf=function(e){var t,n,i,r,s,a=e.length,l=0;for(r=0;a>r;r++)n=e.charCodeAt(r),55296===(64512&n)&&a>r+1&&(i=e.charCodeAt(r+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),l+=128>n?1:2048>n?2:65536>n?3:4;for(t=new o.Buf8(l),s=0,r=0;l>s;r++)n=e.charCodeAt(r),55296===(64512&n)&&a>r+1&&(i=e.charCodeAt(r+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),128>n?t[s++]=n:2048>n?(t[s++]=192|n>>>6,t[s++]=128|63&n):65536>n?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},n.buf2binstring=function(e){return i(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,i=t.length;i>n;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,r,s,a=t||e.length,c=new Array(2*a);for(o=0,n=0;a>n;)if(r=e[n++],128>r)c[o++]=r;else if(s=l[r],s>4)c[o++]=65533,n+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&a>n;)r=r<<6|63&e[n++],s--;s>1?c[o++]=65533:65536>r?c[o++]=r:(r-=65536,c[o++]=55296|r>>10&1023,c[o++]=56320|1023&r)}return i(c,o)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+l[e[n]]>t?n:t}},{"./common":4}],6:[function(e,t){function n(e,t,n,i){for(var o=65535&e|0,r=e>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do o=o+t[i++]|0,r=r+o|0;while(--s);o%=65521,r%=65521}return o|r<<16|0}t.exports=n},{}],7:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],8:[function(e,t){function n(){for(var e,t=[],n=0;256>n;n++){e=n;for(var i=0;8>i;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function i(e,t,n,i){var r=o,s=i+n;e=-1^e;for(var a=i;s>a;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}var o=n();t.exports=i},{}],9:[function(e,t,n){function i(e,t){return e.msg=O[t],t}function o(e){return(e<<1)-(e>4?9:0)}function r(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(I.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){k._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function u(e,t,n,i){var o=e.avail_in;return o>i&&(o=i),0===o?0:(e.avail_in-=o,I.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=x(e.adler,t,o,n):2===e.state.wrap&&(e.adler=A(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function d(e,t){var n,i,o=e.max_chain_length,r=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-ct?e.strstart-(e.w_size-ct):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+lt,m=c[r+s-1],p=c[r+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do if(n=t,c[n+s]===p&&c[n+s-1]===m&&c[n]===c[r]&&c[++n]===c[r+1]){r+=2,n++;do;while(c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&h>r);if(i=lt-(h-r),r=h-lt,i>s){if(e.match_start=t,s=i,i>=a)break;m=c[r+s-1],p=c[r+s]}}while((t=d[t&u])>l&&0!==--o);return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,i,o,r,s=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ct)){I.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,n=e.hash_size,t=n;do i=e.head[--t],e.head[t]=i>=s?i-s:0;while(--n);n=s,t=n;do i=e.prev[--t],e.prev[t]=i>=s?i-s:0;while(--n);o+=s}if(0===e.strm.avail_in)break;if(n=u(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=at)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+at-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<at)););}while(e.lookahead<ct&&0!==e.strm.avail_in)}function m(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===N)return vt;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,a(e,!1),0===e.strm.avail_out))return vt;if(e.strstart-e.block_start>=e.w_size-ct&&(a(e,!1),0===e.strm.avail_out))return vt}return e.insert=0,t===R?(a(e,!0),0===e.strm.avail_out?yt:Ct):e.strstart>e.block_start&&(a(e,!1),0===e.strm.avail_out)?vt:vt}function p(e,t){for(var n,i;;){if(e.lookahead<ct){if(h(e),e.lookahead<ct&&t===N)return vt;if(0===e.lookahead)break}if(n=0,e.lookahead>=at&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ct&&(e.match_length=d(e,n)),e.match_length>=at)if(i=k._tr_tally(e,e.strstart-e.match_start,e.match_length-at),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=at){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(a(e,!1),0===e.strm.avail_out))return vt}return e.insert=e.strstart<at-1?e.strstart:at-1,t===R?(a(e,!0),0===e.strm.avail_out?yt:Ct):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?vt:bt}function f(e,t){for(var n,i,o;;){if(e.lookahead<ct){if(h(e),e.lookahead<ct&&t===N)return vt;if(0===e.lookahead)break}if(n=0,e.lookahead>=at&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=at-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ct&&(e.match_length=d(e,n),e.match_length<=5&&(e.strategy===j||e.match_length===at&&e.strstart-e.match_start>4096)&&(e.match_length=at-1)),e.prev_length>=at&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-at,i=k._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-at),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=at-1,e.strstart++,i&&(a(e,!1),0===e.strm.avail_out))return vt}else if(e.match_available){if(i=k._tr_tally(e,0,e.window[e.strstart-1]),i&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return vt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=k._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<at-1?e.strstart:at-1,t===R?(a(e,!0),0===e.strm.avail_out?yt:Ct):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?vt:bt}function g(e,t){for(var n,i,o,r,s=e.window;;){if(e.lookahead<=lt){if(h(e),e.lookahead<=lt&&t===N)return vt;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=at&&e.strstart>0&&(o=e.strstart-1,i=s[o],i===s[++o]&&i===s[++o]&&i===s[++o])){r=e.strstart+lt;do;while(i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&i===s[++o]&&r>o);e.match_length=lt-(r-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=at?(n=k._tr_tally(e,1,e.match_length-at),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return vt}return e.insert=0,t===R?(a(e,!0),0===e.strm.avail_out?yt:Ct):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?vt:bt}function _(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===N)return vt;break}if(e.match_length=0,n=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return vt}return e.insert=0,t===R?(a(e,!0),0===e.strm.avail_out?yt:Ct):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?vt:bt}function v(e){e.window_size=2*e.w_size,r(e.head),e.max_lazy_match=T[e.level].max_lazy,e.good_match=T[e.level].good_length,e.nice_match=T[e.level].nice_length,e.max_chain_length=T[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=at-1,e.match_available=0,e.ins_h=0
}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*rt),this.dyn_dtree=new I.Buf16(2*(2*it+1)),this.bl_tree=new I.Buf16(2*(2*ot+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(st+1),this.heap=new I.Buf16(2*nt+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*nt+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=X,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?dt:gt,e.adler=2===t.wrap?0:1,t.last_flush=N,k._tr_init(t),B):i(e,V)}function C(e){var t=y(e);return t===B&&v(e.state),t}function w(e,t){return e&&e.state?2!==e.state.wrap?V:(e.state.gzhead=t,B):V}function E(e,t,n,o,r,s){if(!e)return V;var a=1;if(t===W&&(t=6),0>o?(a=0,o=-o):o>15&&(a=2,o-=16),1>r||r>J||n!==Z||8>o||o>15||0>t||t>9||0>s||s>Y)return i(e,V);8===o&&(o=9);var l=new b;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+at-1)/at),l.window=new I.Buf8(2*l.w_size),l.head=new I.Buf16(l.hash_size),l.prev=new I.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new I.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,C(e)}function L(e,t){return E(e,t,Z,$,Q,K)}function S(e,t){var n,a,u,d;if(!e||!e.state||t>F||0>t)return e?i(e,V):V;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===_t&&t!==R)return i(e,0===e.avail_out?U:V);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===dt)if(2===a.wrap)e.adler=0,l(a,31),l(a,139),l(a,8),a.gzhead?(l(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),l(a,255&a.gzhead.time),l(a,a.gzhead.time>>8&255),l(a,a.gzhead.time>>16&255),l(a,a.gzhead.time>>24&255),l(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),l(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(l(a,255&a.gzhead.extra.length),l(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=A(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=ht):(l(a,0),l(a,0),l(a,0),l(a,0),l(a,0),l(a,9===a.level?2:a.strategy>=G||a.level<2?4:0),l(a,wt),a.status=gt);else{var h=Z+(a.w_bits-8<<4)<<8,m=-1;m=a.strategy>=G||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=m<<6,0!==a.strstart&&(h|=ut),h+=31-h%31,a.status=gt,c(a,h),0!==a.strstart&&(c(a,e.adler>>>16),c(a,65535&e.adler)),e.adler=1}if(a.status===ht)if(a.gzhead.extra){for(u=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>u&&(e.adler=A(e.adler,a.pending_buf,a.pending-u,u)),s(e),u=a.pending,a.pending!==a.pending_buf_size));)l(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>u&&(e.adler=A(e.adler,a.pending_buf,a.pending-u,u)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=mt)}else a.status=mt;if(a.status===mt)if(a.gzhead.name){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(e.adler=A(e.adler,a.pending_buf,a.pending-u,u)),s(e),u=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>u&&(e.adler=A(e.adler,a.pending_buf,a.pending-u,u)),0===d&&(a.gzindex=0,a.status=pt)}else a.status=pt;if(a.status===pt)if(a.gzhead.comment){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(e.adler=A(e.adler,a.pending_buf,a.pending-u,u)),s(e),u=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>u&&(e.adler=A(e.adler,a.pending_buf,a.pending-u,u)),0===d&&(a.status=ft)}else a.status=ft;if(a.status===ft&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(l(a,255&e.adler),l(a,e.adler>>8&255),e.adler=0,a.status=gt)):a.status=gt),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,B}else if(0===e.avail_in&&o(t)<=o(n)&&t!==R)return i(e,U);if(a.status===_t&&0!==e.avail_in)return i(e,U);if(0!==e.avail_in||0!==a.lookahead||t!==N&&a.status!==_t){var p=a.strategy===G?_(a,t):a.strategy===q?g(a,t):T[a.level].func(a,t);if((p===yt||p===Ct)&&(a.status=_t),p===vt||p===yt)return 0===e.avail_out&&(a.last_flush=-1),B;if(p===bt&&(t===M?k._tr_align(a):t!==F&&(k._tr_stored_block(a,0,0,!1),t===P&&(r(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,B}return t!==R?B:a.wrap<=0?z:(2===a.wrap?(l(a,255&e.adler),l(a,e.adler>>8&255),l(a,e.adler>>16&255),l(a,e.adler>>24&255),l(a,255&e.total_in),l(a,e.total_in>>8&255),l(a,e.total_in>>16&255),l(a,e.total_in>>24&255)):(c(a,e.adler>>>16),c(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?B:z)}function D(e){var t;return e&&e.state?(t=e.state.status,t!==dt&&t!==ht&&t!==mt&&t!==pt&&t!==ft&&t!==gt&&t!==_t?i(e,V):(e.state=null,t===gt?i(e,H):B)):V}var T,I=e("../utils/common"),k=e("./trees"),x=e("./adler32"),A=e("./crc32"),O=e("./messages"),N=0,M=1,P=3,R=4,F=5,B=0,z=1,V=-2,H=-3,U=-5,W=-1,j=1,G=2,q=3,Y=4,K=0,X=2,Z=8,J=9,$=15,Q=8,et=29,tt=256,nt=tt+1+et,it=30,ot=19,rt=2*nt+1,st=15,at=3,lt=258,ct=lt+at+1,ut=32,dt=42,ht=69,mt=73,pt=91,ft=103,gt=113,_t=666,vt=1,bt=2,yt=3,Ct=4,wt=3,Et=function(e,t,n,i,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=o};T=[new Et(0,0,0,0,m),new Et(4,4,8,4,p),new Et(4,5,16,8,p),new Et(4,6,32,32,p),new Et(4,4,16,16,f),new Et(8,16,32,32,f),new Et(8,16,128,128,f),new Et(8,32,128,256,f),new Et(32,128,258,1024,f),new Et(32,258,258,4096,f)],n.deflateInit=L,n.deflateInit2=E,n.deflateReset=C,n.deflateResetKeep=y,n.deflateSetHeader=w,n.deflate=S,n.deflateEnd=D,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./messages":14,"./trees":15}],10:[function(e,t){function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},{}],11:[function(e,t){var n=30,i=12;t.exports=function(e,t){var o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I;o=e.state,r=e.next_in,T=e.input,s=r+(e.avail_in-5),a=e.next_out,I=e.output,l=a-(t-e.avail_out),c=a+(e.avail_out-257),u=o.dmax,d=o.wsize,h=o.whave,m=o.wnext,p=o.window,f=o.hold,g=o.bits,_=o.lencode,v=o.distcode,b=(1<<o.lenbits)-1,y=(1<<o.distbits)-1;e:do{15>g&&(f+=T[r++]<<g,g+=8,f+=T[r++]<<g,g+=8),C=_[f&b];t:for(;;){if(w=C>>>24,f>>>=w,g-=w,w=C>>>16&255,0===w)I[a++]=65535&C;else{if(!(16&w)){if(0===(64&w)){C=_[(65535&C)+(f&(1<<w)-1)];continue t}if(32&w){o.mode=i;break e}e.msg="invalid literal/length code",o.mode=n;break e}E=65535&C,w&=15,w&&(w>g&&(f+=T[r++]<<g,g+=8),E+=f&(1<<w)-1,f>>>=w,g-=w),15>g&&(f+=T[r++]<<g,g+=8,f+=T[r++]<<g,g+=8),C=v[f&y];n:for(;;){if(w=C>>>24,f>>>=w,g-=w,w=C>>>16&255,!(16&w)){if(0===(64&w)){C=v[(65535&C)+(f&(1<<w)-1)];continue n}e.msg="invalid distance code",o.mode=n;break e}if(L=65535&C,w&=15,w>g&&(f+=T[r++]<<g,g+=8,w>g&&(f+=T[r++]<<g,g+=8)),L+=f&(1<<w)-1,L>u){e.msg="invalid distance too far back",o.mode=n;break e}if(f>>>=w,g-=w,w=a-l,L>w){if(w=L-w,w>h&&o.sane){e.msg="invalid distance too far back",o.mode=n;break e}if(S=0,D=p,0===m){if(S+=d-w,E>w){E-=w;do I[a++]=p[S++];while(--w);S=a-L,D=I}}else if(w>m){if(S+=d+m-w,w-=m,E>w){E-=w;do I[a++]=p[S++];while(--w);if(S=0,E>m){w=m,E-=w;do I[a++]=p[S++];while(--w);S=a-L,D=I}}}else if(S+=m-w,E>w){E-=w;do I[a++]=p[S++];while(--w);S=a-L,D=I}for(;E>2;)I[a++]=D[S++],I[a++]=D[S++],I[a++]=D[S++],E-=3;E&&(I[a++]=D[S++],E>1&&(I[a++]=D[S++]))}else{S=a-L;do I[a++]=I[S++],I[a++]=I[S++],I[a++]=I[S++],E-=3;while(E>2);E&&(I[a++]=I[S++],E>1&&(I[a++]=I[S++]))}break}}break}}while(s>r&&c>a);E=g>>3,r-=E,g-=E<<3,f&=(1<<g)-1,e.next_in=r,e.next_out=a,e.avail_in=s>r?5+(s-r):5-(r-s),e.avail_out=c>a?257+(c-a):257-(a-c),o.hold=f,o.bits=g}},{}],12:[function(e,t,n){function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=R,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new _.Buf32(pt),t.distcode=t.distdyn=new _.Buf32(ft),t.sane=1,t.back=-1,I):A}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,r(e)):A}function a(e,t){var n,i;return e&&e.state?(i=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?A:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,s(e))):A}function l(e,t){var n,i;return e?(i=new o,e.state=i,i.window=null,n=a(e,t),n!==I&&(e.state=null),n):A}function c(e){return l(e,_t)}function u(e){if(vt){var t;for(f=new _.Buf32(512),g=new _.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(C(E,e.lens,0,288,f,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;C(L,e.lens,0,32,g,0,e.work,{bits:5}),vt=!1}e.lencode=f,e.lenbits=9,e.distcode=g,e.distbits=5}function d(e,t,n,i){var o,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new _.Buf8(r.wsize)),i>=r.wsize?(_.arraySet(r.window,t,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>i&&(o=i),_.arraySet(r.window,t,n-i,o,r.wnext),i-=o,i?(_.arraySet(r.window,t,n-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}function h(e,t){var n,o,r,s,a,l,c,h,m,p,f,g,pt,ft,gt,_t,vt,bt,yt,Ct,wt,Et,Lt,St,Dt=0,Tt=new _.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return A;n=e.state,n.mode===Y&&(n.mode=K),a=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,h=n.hold,m=n.bits,p=l,f=c,Et=I;e:for(;;)switch(n.mode){case R:if(0===n.wrap){n.mode=K;break}for(;16>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(2&n.wrap&&35615===h){n.check=0,Tt[0]=255&h,Tt[1]=h>>>8&255,n.check=b(n.check,Tt,2,0),h=0,m=0,n.mode=F;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=dt;break}if((15&h)!==P){e.msg="unknown compression method",n.mode=dt;break}if(h>>>=4,m-=4,wt=(15&h)+8,0===n.wbits)n.wbits=wt;else if(wt>n.wbits){e.msg="invalid window size",n.mode=dt;break}n.dmax=1<<wt,e.adler=n.check=1,n.mode=512&h?G:Y,h=0,m=0;break;case F:for(;16>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(n.flags=h,(255&n.flags)!==P){e.msg="unknown compression method",n.mode=dt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=dt;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,n.check=b(n.check,Tt,2,0)),h=0,m=0,n.mode=B;case B:for(;32>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}n.head&&(n.head.time=h),512&n.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,Tt[2]=h>>>16&255,Tt[3]=h>>>24&255,n.check=b(n.check,Tt,4,0)),h=0,m=0,n.mode=z;case z:for(;16>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,n.check=b(n.check,Tt,2,0)),h=0,m=0,n.mode=V;case V:if(1024&n.flags){for(;16>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(Tt[0]=255&h,Tt[1]=h>>>8&255,n.check=b(n.check,Tt,2,0)),h=0,m=0}else n.head&&(n.head.extra=null);n.mode=H;case H:if(1024&n.flags&&(g=n.length,g>l&&(g=l),g&&(n.head&&(wt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),_.arraySet(n.head.extra,o,s,g,wt)),512&n.flags&&(n.check=b(n.check,o,g,s)),l-=g,s+=g,n.length-=g),n.length))break e;n.length=0,n.mode=U;case U:if(2048&n.flags){if(0===l)break e;g=0;do wt=o[s+g++],n.head&&wt&&n.length<65536&&(n.head.name+=String.fromCharCode(wt));while(wt&&l>g);if(512&n.flags&&(n.check=b(n.check,o,g,s)),l-=g,s+=g,wt)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=W;case W:if(4096&n.flags){if(0===l)break e;g=0;do wt=o[s+g++],n.head&&wt&&n.length<65536&&(n.head.comment+=String.fromCharCode(wt));while(wt&&l>g);if(512&n.flags&&(n.check=b(n.check,o,g,s)),l-=g,s+=g,wt)break e}else n.head&&(n.head.comment=null);n.mode=j;case j:if(512&n.flags){for(;16>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=dt;break}h=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Y;break;case G:for(;32>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}e.adler=n.check=i(h),h=0,m=0,n.mode=q;case q:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=m,x;e.adler=n.check=1,n.mode=Y;case Y:if(t===D||t===T)break e;case K:if(n.last){h>>>=7&m,m-=7&m,n.mode=lt;break}for(;3>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}switch(n.last=1&h,h>>>=1,m-=1,3&h){case 0:n.mode=X;break;case 1:if(u(n),n.mode=tt,t===T){h>>>=2,m-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=dt}h>>>=2,m-=2;break;case X:for(h>>>=7&m,m-=7&m;32>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=dt;break}if(n.length=65535&h,h=0,m=0,n.mode=Z,t===T)break e;case Z:n.mode=J;case J:if(g=n.length){if(g>l&&(g=l),g>c&&(g=c),0===g)break e;_.arraySet(r,o,s,g,a),l-=g,s+=g,c-=g,a+=g,n.length-=g;break}n.mode=Y;break;case $:for(;14>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(n.nlen=(31&h)+257,h>>>=5,m-=5,n.ndist=(31&h)+1,h>>>=5,m-=5,n.ncode=(15&h)+4,h>>>=4,m-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=dt;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.ncode;){for(;3>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}n.lens[It[n.have++]]=7&h,h>>>=3,m-=3}for(;n.have<19;)n.lens[It[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Lt={bits:n.lenbits},Et=C(w,n.lens,0,19,n.lencode,0,n.work,Lt),n.lenbits=Lt.bits,Et){e.msg="invalid code lengths set",n.mode=dt;break}n.have=0,n.mode=et;case et:for(;n.have<n.nlen+n.ndist;){for(;Dt=n.lencode[h&(1<<n.lenbits)-1],gt=Dt>>>24,_t=Dt>>>16&255,vt=65535&Dt,!(m>=gt);){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(16>vt)h>>>=gt,m-=gt,n.lens[n.have++]=vt;else{if(16===vt){for(St=gt+2;St>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(h>>>=gt,m-=gt,0===n.have){e.msg="invalid bit length repeat",n.mode=dt;break}wt=n.lens[n.have-1],g=3+(3&h),h>>>=2,m-=2}else if(17===vt){for(St=gt+3;St>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}h>>>=gt,m-=gt,wt=0,g=3+(7&h),h>>>=3,m-=3}else{for(St=gt+7;St>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}h>>>=gt,m-=gt,wt=0,g=11+(127&h),h>>>=7,m-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=dt;break}for(;g--;)n.lens[n.have++]=wt}}if(n.mode===dt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=dt;break}if(n.lenbits=9,Lt={bits:n.lenbits},Et=C(E,n.lens,0,n.nlen,n.lencode,0,n.work,Lt),n.lenbits=Lt.bits,Et){e.msg="invalid literal/lengths set",n.mode=dt;break}if(n.distbits=6,n.distcode=n.distdyn,Lt={bits:n.distbits},Et=C(L,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Lt),n.distbits=Lt.bits,Et){e.msg="invalid distances set",n.mode=dt;break}if(n.mode=tt,t===T)break e;case tt:n.mode=nt;case nt:if(l>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=m,y(e,f),a=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,h=n.hold,m=n.bits,n.mode===Y&&(n.back=-1);break}for(n.back=0;Dt=n.lencode[h&(1<<n.lenbits)-1],gt=Dt>>>24,_t=Dt>>>16&255,vt=65535&Dt,!(m>=gt);){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(_t&&0===(240&_t)){for(bt=gt,yt=_t,Ct=vt;Dt=n.lencode[Ct+((h&(1<<bt+yt)-1)>>bt)],gt=Dt>>>24,_t=Dt>>>16&255,vt=65535&Dt,!(m>=bt+gt);){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}h>>>=bt,m-=bt,n.back+=bt}if(h>>>=gt,m-=gt,n.back+=gt,n.length=vt,0===_t){n.mode=at;break}if(32&_t){n.back=-1,n.mode=Y;break}if(64&_t){e.msg="invalid literal/length code",n.mode=dt;break}n.extra=15&_t,n.mode=it;case it:if(n.extra){for(St=n.extra;St>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ot;case ot:for(;Dt=n.distcode[h&(1<<n.distbits)-1],gt=Dt>>>24,_t=Dt>>>16&255,vt=65535&Dt,!(m>=gt);){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(0===(240&_t)){for(bt=gt,yt=_t,Ct=vt;Dt=n.distcode[Ct+((h&(1<<bt+yt)-1)>>bt)],gt=Dt>>>24,_t=Dt>>>16&255,vt=65535&Dt,!(m>=bt+gt);){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}h>>>=bt,m-=bt,n.back+=bt}if(h>>>=gt,m-=gt,n.back+=gt,64&_t){e.msg="invalid distance code",n.mode=dt;break}n.offset=vt,n.extra=15&_t,n.mode=rt;case rt:if(n.extra){for(St=n.extra;St>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=dt;break}n.mode=st;case st:if(0===c)break e;if(g=f-c,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=dt;break}g>n.wnext?(g-=n.wnext,pt=n.wsize-g):pt=n.wnext-g,g>n.length&&(g=n.length),ft=n.window}else ft=r,pt=a-n.offset,g=n.length;g>c&&(g=c),c-=g,n.length-=g;do r[a++]=ft[pt++];while(--g);0===n.length&&(n.mode=nt);break;case at:if(0===c)break e;r[a++]=n.length,c--,n.mode=nt;break;case lt:if(n.wrap){for(;32>m;){if(0===l)break e;l--,h|=o[s++]<<m,m+=8}if(f-=c,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?b(n.check,r,f,a-f):v(n.check,r,f,a-f)),f=c,(n.flags?h:i(h))!==n.check){e.msg="incorrect data check",n.mode=dt;break}h=0,m=0}n.mode=ct;case ct:if(n.wrap&&n.flags){for(;32>m;){if(0===l)break e;l--,h+=o[s++]<<m,m+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=dt;break}h=0,m=0}n.mode=ut;case ut:Et=k;break e;case dt:Et=O;break e;case ht:return N;case mt:default:return A}return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=m,(n.wsize||f!==e.avail_out&&n.mode<dt&&(n.mode<lt||t!==S))&&d(e,e.output,e.next_out,f-e.avail_out)?(n.mode=ht,N):(p-=e.avail_in,f-=e.avail_out,e.total_in+=p,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?b(n.check,r,f,e.next_out-f):v(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Y?128:0)+(n.mode===tt||n.mode===Z?256:0),(0===p&&0===f||t===S)&&Et===I&&(Et=M),Et)}function m(e){if(!e||!e.state)return A;var t=e.state;return t.window&&(t.window=null),e.state=null,I}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?A:(n.head=t,t.done=!1,I)):A}var f,g,_=e("../utils/common"),v=e("./adler32"),b=e("./crc32"),y=e("./inffast"),C=e("./inftrees"),w=0,E=1,L=2,S=4,D=5,T=6,I=0,k=1,x=2,A=-2,O=-3,N=-4,M=-5,P=8,R=1,F=2,B=3,z=4,V=5,H=6,U=7,W=8,j=9,G=10,q=11,Y=12,K=13,X=14,Z=15,J=16,$=17,Q=18,et=19,tt=20,nt=21,it=22,ot=23,rt=24,st=25,at=26,lt=27,ct=28,ut=29,dt=30,ht=31,mt=32,pt=852,ft=592,gt=15,_t=gt,vt=!0;n.inflateReset=s,n.inflateReset2=a,n.inflateResetKeep=r,n.inflateInit=c,n.inflateInit2=l,n.inflate=h,n.inflateEnd=m,n.inflateGetHeader=p,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./inffast":11,"./inftrees":13}],13:[function(e,t){var n=e("../utils/common"),i=15,o=852,r=592,s=0,a=1,l=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,m,p,f,g,_,v){var b,y,C,w,E,L,S,D,T,I=v.bits,k=0,x=0,A=0,O=0,N=0,M=0,P=0,R=0,F=0,B=0,z=null,V=0,H=new n.Buf16(i+1),U=new n.Buf16(i+1),W=null,j=0;for(k=0;i>=k;k++)H[k]=0;for(x=0;p>x;x++)H[t[m+x]]++;for(N=I,O=i;O>=1&&0===H[O];O--);if(N>O&&(N=O),0===O)return f[g++]=20971520,f[g++]=20971520,v.bits=1,0;for(A=1;O>A&&0===H[A];A++);for(A>N&&(N=A),R=1,k=1;i>=k;k++)if(R<<=1,R-=H[k],0>R)return-1;if(R>0&&(e===s||1!==O))return-1;for(U[1]=0,k=1;i>k;k++)U[k+1]=U[k]+H[k];for(x=0;p>x;x++)0!==t[m+x]&&(_[U[t[m+x]]++]=x);if(e===s?(z=W=_,L=19):e===a?(z=c,V-=257,W=u,j-=257,L=256):(z=d,W=h,L=-1),B=0,x=0,k=A,E=g,M=N,P=0,C=-1,F=1<<N,w=F-1,e===a&&F>o||e===l&&F>r)return 1;for(var G=0;;){G++,S=k-P,_[x]<L?(D=0,T=_[x]):_[x]>L?(D=W[j+_[x]],T=z[V+_[x]]):(D=96,T=0),b=1<<k-P,y=1<<M,A=y;do y-=b,f[E+(B>>P)+y]=S<<24|D<<16|T|0;while(0!==y);for(b=1<<k-1;B&b;)b>>=1;if(0!==b?(B&=b-1,B+=b):B=0,x++,0===--H[k]){if(k===O)break;k=t[m+_[x]]}if(k>N&&(B&w)!==C){for(0===P&&(P=N),E+=A,M=k-P,R=1<<M;O>M+P&&(R-=H[M+P],!(0>=R));)M++,R<<=1;if(F+=1<<M,e===a&&F>o||e===l&&F>r)return 1;C=B&w,f[C]=N<<24|M<<16|E-g|0}}return 0!==B&&(f[E+B]=k-P<<24|64<<16|0),v.bits=N,0}},{"../utils/common":4}],14:[function(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],15:[function(e,t,n){function i(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){return 256>e?st[e]:st[256+(e>>>7)]}function r(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,n){e.bi_valid>Y-n?(e.bi_buf|=t<<e.bi_valid&65535,r(e,e.bi_buf),e.bi_buf=t>>Y-e.bi_valid,e.bi_valid+=n-Y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function a(e,t,n){s(e,n[2*t],n[2*t+1])}function l(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function c(e){16===e.bi_valid?(r(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function u(e,t){var n,i,o,r,s,a,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,p=t.stat_desc.max_length,f=0;for(r=0;q>=r;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;G>n;n++)i=e.heap[n],r=l[2*l[2*i+1]+1]+1,r>p&&(r=p,f++),l[2*i+1]=r,i>c||(e.bl_count[r]++,s=0,i>=m&&(s=h[i-m]),a=l[2*i],e.opt_len+=a*(r+s),d&&(e.static_len+=a*(u[2*i+1]+s)));if(0!==f){do{for(r=p-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[p]--,f-=2}while(f>0);for(r=p;0!==r;r--)for(i=e.bl_count[r];0!==i;)o=e.heap[--n],o>c||(l[2*o+1]!==r&&(e.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),i--)}}function d(e,t,n){var i,o,r=new Array(q+1),s=0;for(i=1;q>=i;i++)r[i]=s=s+n[i-1]<<1;for(o=0;t>=o;o++){var a=e[2*o+1];0!==a&&(e[2*o]=l(r[a]++,a))}}function h(){var e,t,n,i,o,r=new Array(q+1);for(n=0,i=0;V-1>i;i++)for(lt[i]=n,e=0;e<1<<Q[i];e++)at[n++]=i;for(at[n-1]=i,o=0,i=0;16>i;i++)for(ct[i]=o,e=0;e<1<<et[i];e++)st[o++]=i;for(o>>=7;W>i;i++)for(ct[i]=o<<7,e=0;e<1<<et[i]-7;e++)st[256+o++]=i;for(t=0;q>=t;t++)r[t]=0;for(e=0;143>=e;)ot[2*e+1]=8,e++,r[8]++;for(;255>=e;)ot[2*e+1]=9,e++,r[9]++;for(;279>=e;)ot[2*e+1]=7,e++,r[7]++;for(;287>=e;)ot[2*e+1]=8,e++,r[8]++;for(d(ot,U+1,r),e=0;W>e;e++)rt[2*e+1]=5,rt[2*e]=l(e,5);ut=new mt(ot,Q,H+1,U,q),dt=new mt(rt,et,0,W,q),ht=new mt(new Array(0),tt,0,j,K)}function m(e){var t;for(t=0;U>t;t++)e.dyn_ltree[2*t]=0;for(t=0;W>t;t++)e.dyn_dtree[2*t]=0;for(t=0;j>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*X]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?r(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function f(e,t,n,i){p(e),i&&(r(e,n),r(e,~n)),x.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function g(e,t,n,i){var o=2*t,r=2*n;return e[o]<e[r]||e[o]===e[r]&&i[t]<=i[n]}function _(e,t,n){for(var i=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&g(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!g(t,i,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=i}function v(e,t,n){var i,r,l,c,u=0;if(0!==e.last_lit)do i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],r=e.pending_buf[e.l_buf+u],u++,0===i?a(e,r,t):(l=at[r],a(e,l+H+1,t),c=Q[l],0!==c&&(r-=lt[l],s(e,r,c)),i--,l=o(i),a(e,l,n),c=et[l],0!==c&&(i-=ct[l],s(e,i,c)));while(u<e.last_lit);a(e,X,t)}function b(e,t){var n,i,o,r=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=G,n=0;l>n;n++)0!==r[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):r[2*n+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=2>c?++c:0,r[2*o]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)_(e,r,n);o=l;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,r[2*o]=r[2*n]+r[2*i],e.depth[o]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,r[2*n+1]=r[2*i+1]=o,e.heap[1]=o++,_(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],u(e,t),d(r,c,e.bl_count)}function y(e,t,n){var i,o,r=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;n>=i;i++)o=s,s=t[2*(i+1)+1],++a<l&&o===s||(c>a?e.bl_tree[2*o]+=a:0!==o?(o!==r&&e.bl_tree[2*o]++,e.bl_tree[2*Z]++):10>=a?e.bl_tree[2*J]++:e.bl_tree[2*$]++,a=0,r=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))}function C(e,t,n){var i,o,r=-1,l=t[1],c=0,u=7,d=4;for(0===l&&(u=138,d=3),i=0;n>=i;i++)if(o=l,l=t[2*(i+1)+1],!(++c<u&&o===l)){if(d>c){do a(e,o,e.bl_tree);while(0!==--c)}else 0!==o?(o!==r&&(a(e,o,e.bl_tree),c--),a(e,Z,e.bl_tree),s(e,c-3,2)):10>=c?(a(e,J,e.bl_tree),s(e,c-3,3)):(a(e,$,e.bl_tree),s(e,c-11,7));c=0,r=o,0===l?(u=138,d=3):o===l?(u=6,d=3):(u=7,d=4)}}function w(e){var t;for(y(e,e.dyn_ltree,e.l_desc.max_code),y(e,e.dyn_dtree,e.d_desc.max_code),b(e,e.bl_desc),t=j-1;t>=3&&0===e.bl_tree[2*nt[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function E(e,t,n,i){var o;for(s(e,t-257,5),s(e,n-1,5),s(e,i-4,4),o=0;i>o;o++)s(e,e.bl_tree[2*nt[o]+1],3);C(e,e.dyn_ltree,t-1),C(e,e.dyn_dtree,n-1)}function L(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return O;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return N;for(t=32;H>t;t++)if(0!==e.dyn_ltree[2*t])return N;return O}function S(e){ft||(h(),ft=!0),e.l_desc=new pt(e.dyn_ltree,ut),e.d_desc=new pt(e.dyn_dtree,dt),e.bl_desc=new pt(e.bl_tree,ht),e.bi_buf=0,e.bi_valid=0,m(e)}function D(e,t,n,i){s(e,(P<<1)+(i?1:0),3),f(e,t,n,!0)}function T(e){s(e,R<<1,3),a(e,X,ot),c(e)}function I(e,t,n,i){var o,r,a=0;e.level>0?(e.strm.data_type===M&&(e.strm.data_type=L(e)),b(e,e.l_desc),b(e,e.d_desc),a=w(e),o=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,o>=r&&(o=r)):o=r=n+5,o>=n+4&&-1!==t?D(e,t,n,i):e.strategy===A||r===o?(s(e,(R<<1)+(i?1:0),3),v(e,ot,rt)):(s(e,(F<<1)+(i?1:0),3),E(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),v(e,e.dyn_ltree,e.dyn_dtree)),m(e),i&&p(e)}function k(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(at[n]+H+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var x=e("../utils/common"),A=4,O=0,N=1,M=2,P=0,R=1,F=2,B=3,z=258,V=29,H=256,U=H+1+V,W=30,j=19,G=2*U+1,q=15,Y=16,K=7,X=256,Z=16,J=17,$=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],et=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=512,ot=new Array(2*(U+2));i(ot);var rt=new Array(2*W);i(rt);var st=new Array(it);i(st);var at=new Array(z-B+1);i(at);var lt=new Array(V);i(lt);var ct=new Array(W);i(ct);var ut,dt,ht,mt=function(e,t,n,i,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=e&&e.length},pt=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},ft=!1;n._tr_init=S,n._tr_stored_block=D,n._tr_flush_block=I,n._tr_tally=k,n._tr_align=T},{"../utils/common":4}],16:[function(e,t){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},{}]},{},[1])(1)}),document.OSPMEnvironment&&!document.OSPMEnvironment.Zip&&(document.OSPMEnvironment.Zip=e),e}),define("tao/ospm/api/WorkflowStep",["tao/lib/stapes","tao/ospm/common/OSPMError"],function(e,t){function n(e,n){throw new t(e+"() nicht implementiert",n)}return e.subclass({constructor:function(){},onPackageLoad:function(){n("onPackageLoad")},onPackageUnload:function(){n("onPackageUnload")},onEntry:function(e,t){n("onEntry",{inputVariante:e,workflowData:t})},onReturn:function(e,t){n("onReturn",{inputVariante:e,workflowData:t})},onNext:function(){n("onNext")},onPrevious:function(){n("onPrevious")},onClose:function(){n("onClose")},onReset:function(){n("onReset")},onDelete:function(){n("onDelete")},onSuspend:function(){document.TaoOSPM.workflow.confirmSuspend()},onResume:function(){},onAbort:function(){document.TaoOSPM.workflow.confirmAbort()},onVorgangAblegen:function(){document.TaoOSPM.workflow.onVorgangFinished()},onVorgangBeenden:function(){document.TaoOSPM.workflow.onVorgangFinished()},onVorgangLoeschen:function(){document.TaoOSPM.workflow.onVorgangFinished()},isPrintIdSyncEnabled:function(){return!0},getClassName:function(){return"WorkflowStep"}})}),define("tao/ospm/common/DateFormatter",["tao/ospm/common/Toolkit"],function(e){function t(t,n){var r,s;return s=i(t),e.isDate(s)?(r=n?o(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate()):o(s.getFullYear(),s.getMonth()+1,s.getDate()),null===r.dayF||null===r.monthF||null===r.yearF?"":"tt.mm.jjjj".replace("tt",r.dayF).replace("mm",r.monthF).replace("jjjj",r.yearF)):""}function n(t,n,o,s){var a,l,c;return l=i(t),e.isDate(l)?(a=s?r(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()):r(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()),c=n?o?"hh:mm:ss.sss".replace("hh",a.hoursF).replace("mm",a.minutesF).replace("sss",a.millisecondsF).replace("ss",a.secondsF):"hh:mm:ss".replace("hh",a.hoursF).replace("mm",a.minutesF).replace("ss",a.secondsF):"hh:mm".replace("hh",a.hoursF).replace("mm",a.minutesF)):""}function i(t){if(!e.isDate(t)&&"string"!=typeof t)return null;if("string"==typeof t){if(""===t)return null;t=u.convertToDate(t)}return t}function o(e,t,n){var i;return e=""+e,t=""+t,n=""+n,2===e.length?e="20"+e:(3===e.length||e.length>4)&&(e=null),t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),i={yearF:e,year:parseInt(e,10),monthF:t,month:parseInt(t,10),dayF:n,day:parseInt(n,10)}}function r(e,t,n,i){var o;return"undefined"==typeof i&&(i="000"),e=""+e,t=""+t,n=""+n,i=""+i,e.length<2&&(e="0"+e),t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),i.length<2?i="00"+i:i.length<3&&(i="0"+i),o={hoursF:e,hours:parseInt(e,10),minutesF:t,minutes:parseInt(t,10),secondsF:n,seconds:parseInt(n,10),millisecondsF:i,milliseconds:parseInt(i,10)}}function s(e){var t;return e&&"string"==typeof e?(t=e.split(" "),2!==t.length?null:t):null}function a(e){var t;if("string"!=typeof e)return null;
if(document.documentMode&&(e=e.replace(/[^0-9.]/g,"")),e.length<6||e.indexOf(" ")>-1)return null;if(t=e.split(h),3!==t.length)return null;if(4!==t[2].length)if(2===t[2].length)t[2]="20"+t[2];else if(3===t[2].length&&"0"===t[2].charAt(0))return null;return c(t)}function l(e){var t;if(!e||"string"!=typeof e||e.length<3)return null;if(t=e.split(d),3!==t.length){if(2!==t.length)return null;t[2]="0"}return c(t)}function c(e){var t;for(t=0;t<e.length;t++)if(e[t]=parseInt(e[t],10),isNaN(e[t]))return null;return e}var u,d,h;return d=":",h=".",u={formatDate:function(e){return t(e,!0)},formatLocalDate:function(e){return t(e,!1)},formatTime:function(e,t,i){return n(e,t,i,!0)},formatLocalTime:function(e,t,i){return n(e,t,i,!1)},formatDateTime:function(e,t,n){return u.formatDate(e)+" "+u.formatTime(e,t,n)},formatLocalDateTime:function(e,t,n){return u.formatLocalDate(e)+" "+u.formatLocalTime(e,t,n)},convertToDate:function(e){var t,n,i,s;if(!e)return new Date;if(t=e.split("-"),n=t.pop(),n=n.split(h),n.pop(),3!==t.length||3!==n.length||n[2].length>2)return new Date;i=o(t[0],t[1],t[2]),s=r(n[0],n[1],n[2]);try{return new Date(Date.UTC(i.year,i.month-1,i.day,s.hours,s.minutes,s.seconds))}catch(a){return new Date}},convertToServerTimeString:function(t){var n,i;return e.isDate(t)?(n=o(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()),i=r(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()),"JJJJ-MM-TT-hh.mm.ss.000000".replace("JJJJ",n.yearF).replace("MM",n.monthF).replace("TT",n.dayF).replace("hh",i.hoursF).replace("mm",i.minutesF).replace("ss",i.secondsF)):""},dateStringToDateObject:function(e,t){var n,i,r;if(n=a(e),!n)return null;if(t&&(isNaN(n[0])||isNaN(n[1])||isNaN(n[2])))throw new Error("Ungültiges Datumsformat "+e);return r=o(n[2],n[1],n[0]),i=new Date(Date.UTC(r.year,r.month-1,r.day)),i.getUTCDate()===r.day&&i.getUTCMonth()+1===r.month&&i.getUTCFullYear()===r.year?i:null},timeStringToDateObject:function(e){var t,n,i,o;return(t=l(e))?(o=r(t[0],t[1],t[2]),i=new Date,n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),o.hours,o.minutes,o.seconds)),n.getUTCHours()===o.hours&&n.getUTCMinutes()===o.minutes&&n.getUTCSeconds()===o.seconds?n:null):null},dateTimeStringToDateObject:function(e){var t,n,i;return(t=s(e))?(n=u.dateStringToDateObject(t[0]),i=l(t[1]),n&&i?(n.setHours(i[0]),n.setMinutes(i[1]),n.setSeconds(i[2]),n.getHours()===i[0]&&n.getMinutes()===i[1]&&n.getSeconds()===i[2]?n:null):null):null},convertLocalDateTimeStrToDate:function(e){var t,n,i,o,r;if(!e||"string"!=typeof e)return null;if(r=e.indexOf(" "),r>5){if(t=s(e),!t)return null;if(n=a(t[0]),i=l(t[1]),!n||!i)return null}else-1===r&&e.indexOf(h)>0?n=a(e):-1===r&&e.indexOf(d)>0&&(i=l(e));return n||i?n&&i?(o=new Date(n[2],n[1]-1,n[0],i[0],i[1],i[2]),o.getFullYear()===n[2]&&o.getMonth()===n[1]-1&&o.getDate()===n[0]&&o.getHours()===i[0]&&o.getMinutes()===i[1]&&o.getSeconds()===i[2]?o:null):n&&!i?(o=new Date(n[2],n[1]-1,n[0]),o.getFullYear()===n[2]&&o.getMonth()===n[1]-1&&o.getDate()===n[0]?o:null):!n&&i?(o=new Date,o.setHours(i[0]),o.setMinutes(i[1]),o.setSeconds(i[2]),o.getHours()===i[0]&&o.getMinutes()===i[1]&&o.getSeconds()===i[2]?o:null):o&&!isNaN(o.getTime())?o:null:null},formatTimeString:function(t){var n,i;if(!t||"string"!=typeof t||t.length>5)return t;for(i=0;i<t.length;i++)if(-1===":0123456789".indexOf(t[i]))return t;return 4===t.length&&-1===t.indexOf(":")?t.substr(0,2)+":"+t.substr(2):(n=t.split(":"),2===n.length&&n[0].length&&n[1].length?e.pad(n[0],2)+":"+e.pad(n[1],2):t)},formatDateString:function(t){var n,i,o="";return t&&(n=t.match(/^(\d{1,2})\.?(\d{1,2})\.?(\d{2,4})$/))?(o+=e.pad(n[1],2)+".",o+=e.pad(n[2],2)+".",2===n[3].length?(i=parseInt(n[3],10),o+=(i>=30&&99>=i?"19":"20")+n[3]):o+=n[3],o):t}}}),define("tao/ospm/common/NumberFormatter",["tao/lib/stapes","tao/lib/BigDecimal","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/NeoError"],function(e,t,n,i,o){function r(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}var s;return s=e.subclass({constructor:function(e){e=e||{},void 0===e.decimalPlaces?this.decimalPlaces=2:this.setDecimalPlaces(e.decimalPlaces),void 0===e.decimalSeparator?this.decimalSeparator=",":this.setDecimalSeparator(e.decimalSeparator),void 0===e.thousandSeparator?this.thousandSeparator=".":this.setThousandSeparator(e.thousandSeparator),void 0===e.roundingMode?this.roundingMode=t.ROUND_HALF_UP:this.setRoundingMode(e.roundingMode)},setDecimalPlaces:function(e){if(!("number"==typeof e&&e>=-1))throw new i("falscher Wert für decimalPlaces: "+e);return this.decimalPlaces=e,this},setDecimalSeparator:function(e){if("string"!=typeof e||1!==e.length)throw new i("falscher Wert für decimalSeparator: "+e);return this.decimalSeparator=e,this},setThousandSeparator:function(e){if(!("string"==typeof e&&e.length<=1))throw new i("falscher Wert für thousandSeparator: "+e);return this.thousandSeparator=e,this},setRoundingMode:function(e){if(e!==t.ROUND_CEILING&&e!==t.ROUND_DOWN&&e!==t.ROUND_FLOOR&&e!==t.ROUND_HALF_DOWN&&e!==t.ROUND_HALF_EVEN&&e!==t.ROUND_HALF_UP&&e!==t.ROUND_UNNECESSARY&&e!==t.ROUND_UP)throw new i("falscher Wert für roundingMode: "+e);return this.roundingMode=e,this},parse:function(e){var n,s;if("string"!=typeof e)throw new i("Wert muss ein String sein");n=e.replace(new RegExp(r(this.thousandSeparator),"g"),""),n=n.replace(new RegExp(r(this.decimalSeparator),"g"),".");try{return s=new t(n)}catch(a){throw new o('Wert "'+e+'" ist keine zum NumberFormatter passende Zahlendarstellung')}},format:function(e){var t,o,r,s,a,l,c,u;if(!n.isBigDecimal(e))throw new i("Parameter muss ein BigDecimal sein.");if(t=e.abs().format(-1,this.decimalPlaces,-1,-1,1,this.roundingMode).split("."),o=t[0],a=[],e.signum()<0&&a.push("-"),r=o.length,3>=r||""===this.thousandSeparator)a.push(o);else for(l=r,c=0;l>0;)u=l%3,0===u&&(u=3),a.push(o.slice(c,c+u)),l-=u,c+=u,l>0&&a.push(this.thousandSeparator);return 2===t.length&&(a.push(this.decimalSeparator),a.push(t[1])),s=a.join("")},getClassName:function(){return"NumberFormatter"}}),document.OSPMEnvironment&&!document.OSPMEnvironment.defaultNumberFormatter&&(document.OSPMEnvironment.defaultNumberFormatter=new s),s}),define("tao/ospm/common/Repository",["tao/lib/stapes"],function(e){var t=e.subclass({items:null,constructor:function(){null===this.items&&(this.items=[])},add:function(e){this.itemExists(e)&&this.remove(e),this.items.push(e)},remove:function(e){return this.itemExists(e)?this.items.splice(this.indexOf(e),1)!==[]:!1},getItems:function(){return this.items},removeFirstItem:function(){return this.items.shift(),this.items},getCount:function(){return this.items.length},itemExists:function(e){return this.indexOf(e)>=0},indexOf:function(e){var t;for(t=0;t<this.items.length;t++)if("function"==typeof this.items[t].isEqual){if(this.items[t].isEqual(e))return t}else if(this.items[t]===e)return t;return-1},getClassName:function(){return"Repository"}});return t}),define("tao/ospm/common/TableCellFormatter",["tao/lib/stapes","tao/ospm/common/NumberFormatter","tao/ospm/common/Toolkit","tao/ospm/common/Constants"],function(e,t,n,i){var o=e.subclass({numberFormatter:new t({decimalPlaces:2}),format:function(e,t,i,o){var r=null;return r=0===e&&o.hasColumnHeaders()?i:0===t&&o.hasRowHeaders()?i:n.isBigDecimal(i)?this.numberFormatter.format(i):i},getHorizontalAlignment:function(e,t,n,i){return 0===t&&i.hasRowHeaders()?o.ALIGNMENT.LEFT:o.ALIGNMENT.RIGHT},getTextStyle:function(e,t,n,i){return o.getDefaultTextStyle(i,e,t,n)},getInfoText:function(e,t,n){return n},getIcon:function(e,t,n){return n},getHintText:function(e,t){return t},getHintIcon:function(e,t){return t},getClassName:function(){return"TableCellFormatter"}});return o.COLOR={NORMAL:"NORMAL",BLACK:"BLACK",NEGATIVE:"NEGATIVE"},o.ALIGNMENT={LEFT:"LEFT",CENTER:"CENTER",RIGHT:"RIGHT"},o.getDefaultTextStyle=function(e,t,o,r){var s=i.TEXT_STYLE.LABEL6;return 0===t&&e.hasColumnHeaders()?s=i.TEXT_STYLE.LABEL5:0===o&&e.hasRowHeaders()?s=i.TEXT_STYLE.LABEL4:n.isNumeric(r)&&0>r&&(s=i.TEXT_STYLE.LABEL2),s},o}),define("tao/ospm/common/TaskCollector",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError"],function(e,t,n){function i(e,i){if(t.hasProperty(e.tasks,i))return e.tasks[i];throw new n("Die angegebene Task existiert nicht im TaskCollector",d(e,i))}function o(e,n){var i=[];return t.forKeys(e.tasks,function(t){var o=e.tasks[t];n(o)&&i.push(t)}),i}function r(e,t,i){var o=e.tasks[t];if(p(o)){if(e.ignoreRepeats)return;throw new n("Wiederholter Aufruf der Erfolgs-Funktion einer TaskCollector-Aktion",d(e,t,i))}if(o.result=i,o.taskSuccessCallback)try{o.taskSuccessCallback.apply(e,i)}catch(r){throw n.fromError("Erfolgs-Funktion einer TaskCollector-Aktion erzeugte einen Fehler",r,d(e,t,i))}u(e)}function s(e,t,i){var o=e.tasks[t];if(p(o)){if(e.ignoreRepeats||e.hadTimeout)return;throw new n("Wiederholter Aufruf der Fehler-Funktion einer TaskCollector-Aktion",d(e,t,i))}if(o.error=i,o.taskErrorCallback)try{o.taskErrorCallback.apply(e,i)}catch(r){throw n.fromError("Fehler-Funktion einer TaskCollector-Aktion erzeugte einen Fehler",r,d(e,t,i))}l(e)&&(a(e,i),u(e))}function a(e,t,i){if(e.onError&&!e.onErrorCalled){e.onErrorCalled=!0;try{e.onError(e,t,i)}catch(o){throw _(e),n.fromError("Funktion zur Fehlerbehandlung erzeugte einen Fehler",o,d(e,t,i))}}}function l(e){return!e.waitOnStart||e.started}function c(e){var t,n,o;e.waitOnStart&&(e.started=!0,n=e.getFailedTasks(),t=n.length>0,t&&(o=e.getFailedTasks()[0],a(e,i(e,o).error)),u(e))}function u(e){var t;if(!(!l(e)||e.finished||e.getPendingTasks().length>0)){if(_(e),e.finished=!0,t=e.getFailedTasks().length>0,!t&&e.onSuccess)try{e.onSuccess(e)}catch(i){throw n.fromError("Abschluss-Funktion onSuccess erzeugte einen Fehler",i,d(e))}if(t&&e.onFailure)try{e.onFailure(e)}catch(i){throw n.fromError("Abschluss-Funktion onFailure erzeugte einen Fehler",i,d(e))}if(e.onEnd)try{e.onEnd(e)}catch(i){throw n.fromError("Abschluss-Funktion onEnd erzeugte einen Fehler",i,d(e))}else if(t&&!e.onErrorCalled&&!e.onFailure)throw new n("Nicht alle Tasks des TaskCollectors wurden erfolgreich abgeschlossen",d(e))}}function d(e,n,i){var o,r,s={tasks:[],waitOnStart:e.waitOnStart,ignoreRepeats:e.ignoreRepeats,started:e.started,finished:e.finished,hadTimeout:e.hadTimeout};return t.forKeys(e.tasks,function(t){o=e.tasks[t],r={task:t},o.result?r.resultArgs=o.result:o.error&&(r.errorArgs=o.error),s.tasks.push(r)}),n&&(s.task=n),i&&(s.args=i),s}function h(e,i){if(!t.hasProperty(e.tasks,i)){if(e.finished)throw new n("Es können keine neuen Tasks nach Beendigung des TaskCollectors angelegt werden");e.tasks[i]={successFunction:function(){r(e,i,Array.prototype.slice.call(arguments))},errorFunction:function(){s(e,i,Array.prototype.slice.call(arguments))}},e.taskCount++}}function m(e,t){if(null===t||void 0===t||"function"==typeof t)return t;throw new n("Es wurde kein gültiger Parameter für die "+e+"-Funktion angegeben")}function p(e){return g(e)||f(e)}function f(e){return t.hasProperty(e,"error")}function g(e){return t.hasProperty(e,"result")}function _(e){e.timeout&&(t.resetExecuteLater(e.timeout),e.timeout=null)}function v(e,i){_(e),i>=0&&!e.hadTimeout&&(e.timeout=t.executeLater(function(){if(e.hadTimeout=!0,_(e),0===e.tasks.length)throw new n("Timeout für TaskCollector ohne Tasks erreicht",d(e));t.forKeys(e.tasks,function(t){p(t)||s(e,t,"TaskCollector timeout")})},i))}var b;return b=e.subclass({timeout:null,hadTimeout:!1,onError:null,onFailure:null,onSuccess:null,onEnd:null,tasks:null,taskCount:0,ignoreRepeats:!1,waitOnStart:!1,started:!1,finished:!1,onErrorCalled:!1,constructor:function(e){e=e||{},this.setOnError(e.onError),this.setOnSuccess(e.onSuccess),this.setOnEnd(e.onEnd),this.setOnFailure(e.onFailure),this.setTimeout(e.timeout),this.setIgnoreRepeats(e.ignoreRepeats),this.setWaitOnStart(e.waitOnStart),this.tasks={}},setOnError:function(e){this.onError=m("onError",e)},setOnFailure:function(e){this.onFailure=m("onFailure",e)},setOnSuccess:function(e){this.onSuccess=m("onSuccess",e)},setOnEnd:function(e){this.onEnd=m("onEnd",e)},setIgnoreRepeats:function(e){this.ignoreRepeats=e},setWaitOnStart:function(e){if(this.started&&e)throw new n("setWaitOnStart(true) kann nicht aufgerufen werden, nachdem der TaskCollector bereits gestartet wurde",d(this));this.waitOnStart=e},getSuccessHandler:function(e,t){return h(this,e),t&&(m("taskSuccessCallback",t),this.tasks[e].taskSuccessCallback=t),this.tasks[e].successFunction},getErrorHandler:function(e,t){return h(this,e),t&&(m("taskErrorCallback",t),this.tasks[e].taskErrorCallback=t),this.tasks[e].errorFunction},add:function(e){var i=""+(this.taskCount+1);if(t.hasProperty(this.tasks,i))throw new n('Automatisches Hinzufügen nicht möglich: es wurde bereits ein Task mit dem expliziten Namen "'+i+'" hinzugefügt');return this.getSuccessHandler(i,e)},addServiceRequest:function(e,i,o,r,s){var a=this.getSuccessHandler(e,r),l=this.getErrorHandler(e,s);if("number"!=typeof o&&(o=8),!document.TaoOSPM)throw new n("addServiceRequest kann nur bei vorhandenem TaoOSPM aufgerufen werden");document.TaoOSPM.server.executeRequest(e,i,function(e,n){var i=t.search(n,function(e){return e.code>=o});i?l(e,n):a(e,n)})},setTimeout:function(e){v(this,e)},getTaskCount:function(){return this.taskCount},getPendingTasks:function(){return o(this,function(e){return!p(e)})},getCompletedTasks:function(){return o(this,g)},getFailedTasks:function(){return o(this,f)},getAllTasks:function(){return o(this,function(){return!0})},isTaskCompleted:function(e){return g(i(this,e))},isTaskFailed:function(e){return f(i(this,e))},isTaskPending:function(e){return!p(i(this,e))},getResultArgs:function(e){var t=i(this,e);if(g(t))return t.result;throw new n("Die angefragte Task hat keine Ergebnisse gemeldet",d(this,e))},getErrorArgs:function(e){var t=i(this,e);if(f(t))return t.error;throw new n("Die angefragte Task hat keinen Fehler gemeldet",d(this,e))},isCollectorFinished:function(){return this.finished},start:function(){c(this)},toString:function(){return JSON.stringify(d(this))},getClassName:function(){return"TaskCollector"}})}),define("tao/ospm/common/WidgetValidator",["tao/lib/stapes","tao/ospm/common/OSPMError"],function(e,t){var n,i;return n=e.subclass({isWidgetValidator:!0,constructor:function(){},onEntry:function(){},onExit:function(){return!0},beforeInput:function(){return!0},afterValueFormatted:function(){},afterInput:function(){},afterDataTypeValidated:function(){},onValidate:function(){return!0},getClassName:function(){return"WidgetValidator"}}),i=n.subclass({validator:null,constructor:function(e){if(!e||"function"!=typeof e)throw new t("Es muss eine Validierungsfunktion übergeben werden!");this.validator=e},onExit:function(e){return this.validator(e)},onValidate:function(e){return!this.validator(e)},beforeInput:function(e,t){return!this.validator(e,t?t.event:void 0)},getClassName:function(){return"DefaultValidator"}}),n.NONE_VALIDATOR=new n,n.createValidatorClassForFunction=function(e){return new i(e)},n}),define("tao/ospm/common/WorkflowData",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError"],function(e,t,n){function i(e){try{return JSON.stringify(e)}catch(i){throw new n("WorkflowData enthält nicht-serialisierbare Daten",{workflowData:t.stringify(e),details:i})}}function o(e){if(!(e instanceof s||t.isOfClass(e,"WorkflowData")))throw new n("Workflow-Daten sind nicht vom Typ WorkflowData",{workflowData:e});i(e)}function r(e){return new s(JSON.parse(i(e)))}var s;return s=e.subclass({constructor:function(e){if(arguments.length>0){if("object"!=typeof e)throw new n("Initiale Workflow-Daten sind kein JavaScript-Objekt",{data:e});t.merge(this,e),o(this)}},verify:function(){o(this)},createCopy:function(){return r(this)},toString:function(){return i(this)},getClassName:function(){return"WorkflowData"}}),s.copy=function(e){return r(e)},s.verify=function(e){o(e)},s}),define("tao/ospm/common/datatype/TaoDate",["tao/lib/stapes","tao/ospm/common/NeoError","tao/ospm/common/Constants"],function(e,t,n){var i,o=[0,31,30,31,30,31,30,31,31,30,31,30,31],r=/^(\d\d)(\d\d)((\d\d)(\d\d)?)$/,s=/^(\d+)[\.\,](\d+)[\.\,]((\d\d)(\d\d)?)$/;return i=e.subclass({tag:null,monat:null,jahr:null,constructor:function(e,t,n){this.tag=e,this.monat=t,this.jahr=n},toDate:function(){return new Date(this.jahr,this.monat-1,this.tag)},isValid:function(){return this.jahr<=9999&&this.monat>=1&&this.monat<=12&&this.tag>=1&&this.tag<=o[this.monat]},isGregorian:function(){return this.isValid()?2!==this.monat||this.tag<29?!0:30===this.tag||this.jahr%4!==0?!1:this.jahr>1900&&this.jahr<2100:!1},addYears:function(e){return new i(this.tag,this.monat,this.jahr+e)},compareTo:function(e){var t=this.jahr-e.jahr||this.monat-e.monat||this.tag-e.tag;return 0>t?-1:t>0?1:0},toString:function(){var e="";return this.tag<10&&(e+="0"),e+=this.tag,e+=".",this.monat<10&&(e+="0"),e+=this.monat,e+=".",this.jahr<1e3&&(e+="0"),this.jahr<100&&(e+="0"),this.jahr<10&&(e+="0"),e+=this.jahr},getClassName:function(){return"TaoDate"}}),i.parse=function(e){var o,a,l,c,u,d;if(u=e.match(r),u||(u=e.match(s)),!u)throw new t(n.DATE_INVALID_MESSAGE);if(o=Number(u[1]),a=Number(u[2]),u[3]?(d=u[3],l=Number(d),d.length<=2&&(49>=l?l=2e3+l:99>=l&&(l=1900+l))):l=(new i).getFullYear(),c=new i(o,a,l),!c.isValid())throw new t(n.DATE_INVALID_MESSAGE);return c},i.isTwoDigitYear=function(e){var t=e.match(r);return t||(t=e.match(s)),!!t},i}),define("tao/ospm/common/datatype/ValidationResult",["tao/lib/stapes"],function(e){var t;return t=e.subclass({messages:null,valid:null,value:null,text:null,isPreformatted:null,constructor:function(){this.messages=[],this.valid=!0,this.isPreformatted=!1},join:function(e){var t;if(e){if(e.valid)this.valid&&e.value&&(this.value=e.value,this.text=e.text);else for(this.valid=!1,this.text=null,this.value=null,t=0;t<e.messages.length;t++)this.messages.push(e.messages[t]);e.isPreformatted&&this.valid&&(this.text=e.text,this.isPreformatted=!0)}},isValid:function(){return this.valid},addError:function(e){this.valid=!1,this.messages.push(e),this.text=null,this.value=null},addAllErrors:function(e){var t;if(e)for(this.valid=!1,this.text=null,this.value=null,t=0;t<e.length;t++)this.messages.push(e[t])},setValue:function(e){this.valid&&(this.value=e)},getValue:function(){return this.valid?this.value:null},setValueAndText:function(e,t){this.valid&&(this.value=e,this.text=t,this.isPreformatted=!0)},getText:function(){return this.valid?this.text:null},formatValue:function(e){!this.isPreformatted&&this.valid&&(this.text=e.format(this.value))},getClassName:function(){return"ValidationResult"}})}),define("tao/ospm/common/datatype/DataType",["tao/lib/stapes","tao/ospm/common/NeoError","tao/ospm/common/OSPMError","tao/ospm/common/datatype/TaoDate","tao/ospm/common/datatype/ValidationResult"],function(e,t,n,i,o){var r;return r=e.subclass({constructor:function(){},parseAndValidate:function(){throw new n("Nicht implementiert!")},validate:function(){throw new n("Nicht implementiert!")},normalize:function(e){return e},createValueFromString:function(){throw new n("Nicht implementiert!")},format:function(){throw new n("Nicht implementiert!")},getClassName:function(){return"DataType"}}),r.constructors={},r.constructors.STRING=r.subclass({parseAndValidate:function(e){var t=new o;return t.setValue(e),t},validate:function(e){var t=new o;return"string"!=typeof e?t.addError("Falscher Datentyp: String erwartet. Erhalten ",e):t.setValue(e),t},createValueFromString:function(e){return e},format:function(e){return e},getClassName:function(){return"StringDataType"}}),r.create=function(e){if(!e||!e.type||!r.constructors.hasOwnProperty(e.type.toUpperCase()))throw new n("Unbekannter Datentyp "+e.type+" für übergebene Parameter "+e);return new(r.constructors[e.type.toUpperCase()])(e)},r}),define("tao/ospm/common/datatype/TaoDecimal",["tao/lib/stapes","tao/ospm/common/NeoError"],function(e,t){function n(e,t){var n,i,o=e[t];for(n="",i=o.length-1;i>=0&&"9"===o.charAt(i);)n="0"+n,--i;return i>=0&&(n=o.substring(0,i)+String.fromCharCode(o.charCodeAt(i)+1)+n),e[t]=n,0>i}var i,o=/^([+\-])?(\d*)(,(\d*))?([+\-])?$/,r=/^([+\-])?\d{0,3}(\.\d{3})*(,\d*)?$/,s=/^0*$/;return i=e.subclass({vorzeichen:null,vorkomma:null,nachkomma:null,constructor:function(e,t,n){this.vorzeichen=e,this.vorkomma=t,this.nachkomma=n},toString:function(){return this.nachkomma?this.vorzeichen+this.vorkomma+","+this.nachkomma:this.vorzeichen+this.vorkomma},getSignum:function(){return s.test(this.vorkomma)&&s.test(this.nachkomma)?0:"-"===this.vorzeichen?-1:1},compareTo:function(e){var t,n,i,o,r,s=this.getSignum()-e.getSignum();if(0>s)return-1;if(s>0)return 1;for(t=Math.max(this.vorkomma.length,e.vorkomma.length),n=this.vorkomma;n.length<t;)n="0"+n;for(i=e.vorkomma;i.length<t;)i="0"+i;for(t=Math.max(this.nachkomma.length,e.nachkomma.length),n+=this.nachkomma,o=this.nachkomma.length;t>o;)n+="0",o++;for(i+=e.nachkomma,o=e.nachkomma.length;t>o;)i+="0",o++;return r=n>i?1:i>n?-1:0,this.getSignum()*r},runden:function(e){var t,o,r=new i(this.vorzeichen,this.vorkomma,this.nachkomma),s=this.nachkomma.length;if(s>e)t=r.nachkomma.charAt(e),r.nachkomma=r.nachkomma.substring(0,e),t>="5"&&n(r,"nachkomma")&&n(r,"vorkomma")&&(r.vorkomma="1"+r.vorkomma);else if(e>s)for(o=s;e>o;o++)r.nachkomma+="0";return r},getGroesse:function(){var e,t=this.vorkomma.length;for(e=0;t>e;++e)if("0"!==this.vorkomma.charAt(e))return t-e;return 0},getClassName:function(){return"TaoDecimal"}}),i.parse=function(e){var n,s;if("number"==typeof e&&(e=""+e),e.match(/\./)&&(s=e.match(r),null===s))throw new t("Ungültige Eingabe, hinter jedem Tausenderpunkt sind 3 Ziffern einzugeben.");if(e=(e||"").replace(/[\s\.]/g,""),n=e.match(o),!n)throw new t;if(n[1]&&n[5])throw new t;return new i(n[1]||n[5]||"",n[2]||"",n[4]||"")},i}),define("tao/ospm/common/datatype/BigDecimalMask",["tao/lib/stapes","tao/ospm/common/NeoError","tao/ospm/common/datatype/TaoDecimal","tao/lib/BigDecimal","tao/ospm/common/NumberFormatter"],function(e,t,n,i,o){function r(e,t,n){var i,o=0;for(i=t;n>i;++i)e.charCodeAt(i)===d&&++o;return o}function s(e){var t,n=!1;for(0===e.indexOf("-")&&(n=e.substring(0,1),e=e.substring(1)),t=e.length;t>3;)t-=3,e=e.substring(0,t)+"."+e.substring(t);return n?n+e:e}function a(e,t){var n,i="";for(n=t-e.length;n>0;n--)i+="0";return i+e}var l,c=0,u=-1,d="#".charCodeAt(0),h=",";return l=e.subclass({mask:null,vorkomma:null,nachkomma:null,plus:null,nullen:null,punkte:null,roundingDisabled:null,formatter:null,constructor:function(e){var t;this.mask=e||"",t=this.mask.indexOf(h),-1===t?(this.vorkomma=r(this.mask,0,this.mask.length),this.nachkomma=0):(this.vorkomma=r(this.mask,0,t),this.nachkomma=r(this.mask,t+1,this.mask.length),this.nachkomma||(this.nachkomma=u)),this.nullen=-1===this.mask.indexOf("*"),this.plus=-1!==this.mask.indexOf("+"),this.punkte=-1!==this.mask.indexOf("."),this.roundingDisabled=-1!==this.mask.indexOf("!"),this.formatter=new o({decimalPlaces:this.nachkomma,roundingMode:this.roundingDisabled?i.ROUND_UNNECESSARY:i.ROUND_HALF_UP,thousandSeparator:this.punkte?".":""})},parse:function(e){var n,o,r,s,a=null;try{a=this.formatter.parse(e),a=a.setScale(this.nachkomma,this.roundingDisabled?i.ROUND_UNNECESSARY:i.ROUND_HALF_UP)}catch(l){throw""===l.message?new t("Numerisches Eingabefeld. "):l}if(n=a.toString(),o=n.split("."),r=o[0],s=o[1],this.vorkomma!==c&&r.length>this.vorkomma)throw new t(this.getValidationMessage());if(s&&this.nachkomma!==u&&s.length!==this.nachkomma&&this.roundingDisabled&&s.length>this.nachkomma)throw new t(this.getValidationMessage());return a},format:function(e){var t,n,i,o,r;return this.formatter.setThousandSeparator(""),t=this.formatter.format(e),this.formatter.setThousandSeparator(this.punkte?".":""),n=t.split(h),i=n[0],o=n[1],r=i,this.nullen&&(r=a(r,this.vorkomma)),this.punkte&&(r=s(r,this.vorkomma)),this.plus&&1===e.signum()&&(r="+"+r),this.nachkomma&&o&&(r+=h+o),r},getValidationMessage:function(e){var t="";return e?e:(this.vorkomma!==c?t+=this.nachkomma!==u?"Bitte geben Sie maximal "+this.vorkomma+" Vor- und "+this.nachkomma+" Nachkommastellen ein. ":"Bitte geben Sie maximal "+this.vorkomma+" Vorkommastellen ein. ":this.nachkomma!==u&&(t+="Bitte geben Sie maximal "+this.nachkomma+" Nachkommastellen ein. "),t)},getClassName:function(){return"BigDecimalMask"}})}),define("tao/ospm/common/datatype/BigDecimalDataType",["tao/ospm/common/datatype/DataType","tao/ospm/common/datatype/ValidationResult","tao/ospm/common/datatype/BigDecimalMask","tao/ospm/common/NumberFormatter","tao/ospm/common/Toolkit"],function(e,t,n,i,o){var r;return r=e.subclass({constructor:function(e){this.formatter=e.mask?new n(e.mask):e.formatter||new i({decimalPlaces:-1})},parseAndValidate:function(e){var n,i=new t;if(e)try{n=this.formatter.parse(e),i.setValue(n)}catch(o){i.addError("Die Eingabe ist keine gültige Zahl")}return i},validate:function(e){var n=new t;return o.isBigDecimal(e)?n.setValue(e):n.addError("Falscher Datentyp: "+this.typeName+" erwartet. Erhalten ",e),n},createValueFromString:function(e){return this.formatter.parse(e)},format:function(e){return this.formatter.format(e)},getClassName:function(){return"BigDecimalDataType"}}),e.constructors.BIGDECIMAL=r,r}),define("tao/ospm/common/datatype/DataTypeConstraints",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/common/NeoError"],function(e,t,n){var i,o={},r={};return i=e.subclass({constructor:function(e,t){this.message=e,this.valueUnit=t,this.constraint=""},getValidationMessage:function(){var e=/\{constraint}/g;return this.message?this.message.replace(e,this.getConstraintValue()):this.getDefaultValidationMessage().replace(e,this.getConstraintValue())},getConstraintValue:function(){return this.valueUnit?this.constraint+" "+this.valueUnit:this.constraint},getDefaultValidationMessage:function(){return""},getClassName:function(){return"AbstractConstraint"}}),r.LEAPYEAR=i.subclass({order:4,constructor:function(e,t){r.LEAPYEAR.parent.constructor.call(this,e,t)},isValid:function(e){return null===e||e.isGregorian()},getDefaultValidationMessage:function(){return"Bitte geben Sie ein gültiges Datum ein. "},getClassName:function(){return"LeapYearConstraint"}}),r.MAXIMUM=i.subclass({order:3,maximum:null,dataType:null,constructor:function(e,t,i,o){if(r.MAXIMUM.parent.constructor.call(this,e,t),!o)throw new n("Falscher Datentyp für Maximum Constraint!");this.dataType=o,this.constraint=o.createValueFromString(i),this.constraint instanceof Date&&this.constraint.setHours(23,59,59,999)},isValid:function(e){if(null===e)return!0;if(e.compareTo)return e.compareTo(this.constraint)<=0;if(this.dataType.compareTo)return this.dataType.compareTo(e,this.constraint)<=0;try{return this.maximum>=e}catch(t){return!1}},getDefaultValidationMessage:function(){var e=this.dataType.getClassName(),t=this.dataType.format(this.constraint);return"DateDataType"===e||"TaoDateDataType"===e?"Bitte erfassen Sie ein gültiges Datum, welches zeitlich vor dem Wert "+t+" liegt oder diesem entspricht. ":"Bitte geben Sie maximal {constraint} ein. "},getClassName:function(){return"MaximumConstraint"}}),r.MAXLENGTH=i.subclass({order:0,maxLength:null,constructor:function(e,t,n,i){r.MAXLENGTH.parent.constructor.call(this,e,t),this.constraint=n,this.dataType=i},isValid:function(e){var t;return e&&e.length?e.length<=this.constraint.valueOf():null!==e?(t=this.dataType.format(e),t.length<=this.constraint.valueOf()):!0},getConstraintValue:function(){return this.constraint},getDefaultValidationMessage:function(){return"Bitte geben Sie maximal {constraint} Zeichen ein. "},getClassName:function(){return"MaxLengthConstraint"}}),r.MINLENGTH=i.subclass({order:5,minLength:null,constructor:function(e,t,n,i){r.MINLENGTH.parent.constructor.call(this,e,t),this.constraint=n,this.dataType=i},isValid:function(e){var t;return e&&e.length?e.length>=this.constraint.valueOf():e?(t=this.dataType.format(e),t.length>=this.constraint.valueOf()):!0},getConstraintValue:function(){return this.constraint},getDefaultValidationMessage:function(){return"Bitte geben Sie mindestens {constraint} Zeichen ein. "},getClassName:function(){return"MinLengthConstraint"}}),r.MINIMUM=i.subclass({order:2,minimum:null,dataType:null,compareToFunc:null,constructor:function(e,t,i,o){if(r.MINIMUM.parent.constructor.call(this,e,t),!o)throw new n("Falscher Datentyp für Minimum Constraint!");this.dataType=o,this.constraint=o.createValueFromString(i)},isValid:function(e){if(null===e)return!0;if(e.compareTo)return e.compareTo(this.constraint)>=0;if(this.dataType.compareTo)return this.dataType.compareTo(e,this.constraint)>=0;try{return this.constraint<=e}catch(t){return!1}},getDefaultValidationMessage:function(){var e,t=this.dataType.getClassName();return this.constraint.getSignum&&!this.constraint.getSignum()?"Keine negativen Werte. ":(e=this.dataType.format(this.constraint),"DateDataType"===t||"TaoDateDataType"===t?"Bitte erfassen Sie ein gültiges Datum, welches zeitlich nach dem Wert "+e+" liegt oder diesem entspricht. ":"Bitte geben Sie mindestens {constraint} ein. ")},getClassName:function(){return"MinimumConstraint"}}),r.DATETIMEFILTER=i.subclass({order:6,dateTimeFilter:null,constructor:function(e,t,n){r.DATETIMEFILTER.parent.constructor.call(this,e,t),this.dateTimeFilter=n},isValid:function(e){return this.dateTimeFilter(e)},getDefaultValidationMessage:function(){return"Bitte geben Sie ein Datum innerhalb des gültigen Bereichs ein."},getClassName:function(){return"DateTimeFilterConstraint"}}),o.createConstraints=function(e,t){var n,i=[];return Object.keys(e).forEach(function(o){e.hasOwnProperty(o)&&"type"!==o&&"mask"!==o&&r.hasOwnProperty(o.toUpperCase())&&(n="object"==typeof e[o]?new(r[o.toUpperCase()])(e[o].customValidationMessage,e[o].valueUnit,e[o].value,t):new(r[o.toUpperCase()])(null,null,e[o],t),i[n.order]=n)}),i},o}),define("tao/ospm/common/datatype/InputType",["tao/lib/stapes","tao/ospm/common/NeoError","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/common/DateFormatter"],function(e,t,n,i,o,r){function s(e,t){var n,i,o;this.groupPos=0,this.input=e,this.delemiter=t,n=[],i=e.value.split(t),o=0,i.forEach(function(e,t){n.push({value:e,start:o,end:o+e.length}),o+=e.length+(t<i.length-1?1:0)}),this.groups=n,this.groupPos=this.findGroupPos()}function a(e){switch(e){case i.INPUT_DATA_TYPE.NUMBER:return{checkInsertOfChar:c};case i.INPUT_DATA_TYPE.INTEGER:return{checkInsertOfChar:l};case i.INPUT_DATA_TYPE.TIME:return{checkInsertOfChar:u,reformatOnExit:f,defaultPlaceholder:i.DEFAULT_PLACEHOLDERS.TIME};case i.INPUT_DATA_TYPE.DATE:return{name:i.INPUT_DATA_TYPE.DATE,checkInsertOfChar:d,reformatOnExit:g,onFocus:h,onTabPress:m,onShiftTabPress:p,defaultPlaceholder:i.DEFAULT_PLACEHOLDERS.DATE,mandatoryPlaceholder:i.MANDATORY_PLACEHOLDERS.DATE};default:return{}}}function l(e){return"+-0123456789".indexOf(e)>-1}function c(e){return"+-0123456789,".indexOf(e)>-1}function u(e,t,n,i){var o=t.substring(0,n)+e+t.substring(i);return/^\d{1,2}:?(\d{1,2})?$/.test(o)?!0:!1}function d(e,t,n,i){var o=t.substring(0,n)+e+t.substring(i);return/^\d{0,2}\.?\d{0,2}\.?\d{0,4}$/.test(o)?!0:!1}function h(){}function m(){}function p(){}function f(e){return r.formatTimeString(e)}function g(e){return r.formatDateString(e)}var _;return _=e.subclass({name:null,constructor:function(e){this.name=e||i.INPUT_DATA_TYPE.TEXT,this.defaultPlaceholder=i.DEFAULT_PLACEHOLDERS.TEXT,this.mandatoryPlaceholder=i.MANDATORY_PLACEHOLDERS.TEXT,o.merge(this,a(e),!0)},checkInsertOfChar:function(){return!0},onFocus:function(){return!0},onTabPress:function(){return!0},onShiftTabPress:function(){return!0},reformatAfterUpdate:function(e){return e},reformatOnExit:function(e){return e},getClassName:function(){return"InputType"}}),s.prototype.findGroupPos=function(){var e,t;return e=this.input.selectionEnd||0,t=0,this.groups.forEach(function(n,i){e>=n.start&&e<n.end+1&&(t=i)}.bind(this)),t},s.prototype.markAtCursor=function(){var e=this.input.selectionEnd||0;this.groups.forEach(function(t,n){e>=t.start&&e<t.end+1&&this.markGroup(n)}.bind(this))},s.prototype.markGroup=function(e){var t,n;
"undefined"!=typeof this.groups[e]&&(this.groupPos=e,t=this.groups[e].start,n=this.groups[e].end,this.input.setSelectionRange(t,n))},s.prototype.markNextGroup=function(){var e=this.groupPos;++e>=this.groups.length&&(e=0),this.markGroup(e)},s.prototype.markPreviousGroup=function(){var e=this.groupPos;--e<0&&(e=this.groups.length-1),this.markGroup(e)},_.create=function(e){return new _(e.inputType)},_}),define("tao/ospm/common/datatype/TaoDateMask",["tao/lib/stapes","tao/ospm/common/NeoError","tao/ospm/common/datatype/TaoDate"],function(e,t,n){var i,o="<";return i=e.subclass({mask:null,constructor:function(e){this.mask="string"==typeof e?e:null},getValidationMessage:function(e){return e},parse:function(e){var t=n.parse(e);return this.mask&&this.mask.indexOf(o)>-1&&n.isTwoDigitYear(e)&&t.toDate()>new Date&&(t=t.addYears(-100)),t},format:function(e){return e.toString()},getClassName:function(){return"TaoDateMask"}})}),define("tao/ospm/common/datatype/TaoDecimalMask",["tao/lib/stapes","tao/ospm/common/NeoError","tao/ospm/common/datatype/TaoDecimal"],function(e,t,n){var i,o=0,r=-1,s="#".charCodeAt(0);return i=e.subclass({mask:null,vorkomma:null,nachkomma:null,plus:null,nullen:null,punkte:null,roundingDisabled:null,constructor:function(e){var t;this.mask=e||"",t=this.mask.indexOf(","),-1===t?(this.vorkomma=this.countZiffer(0,this.mask.length),this.nachkomma=0):(this.vorkomma=this.countZiffer(0,t),this.nachkomma=this.countZiffer(t+1,this.mask.length),this.nachkomma||(this.nachkomma=r)),this.nullen=-1===this.mask.indexOf("*"),this.plus=-1!==this.mask.indexOf("+"),this.punkte=-1!==this.mask.indexOf("."),this.roundingDisabled=-1===this.mask.indexOf("!")},countZiffer:function(e,t){var n,i=this.mask,o=0;for(n=e;t>n;++n)i.charCodeAt(n)===s&&++o;return o},parse:function(e){var i,s,a=null;try{a=n.parse(e)}catch(l){throw""===l.message?new t("Numerisches Eingabefeld. "):l}if(this.vorkomma!==o&&a.vorkomma.length>this.vorkomma){if(i=a.vorkomma.length-this.vorkomma,s=a.vorkomma.substring(0,i),s>0)throw new t(this.getValidationMessage());a.vorkomma=a.vorkomma.substring(i)}if(this.nachkomma!==r&&a.nachkomma.length!==this.nachkomma){if(this.roundingDisabled&&a.nachkomma.length>this.nachkomma)throw new t(this.getValidationMessage());if(a=a.runden(this.nachkomma),this.vorkomma!==o&&a.vorkomma.length>this.vorkomma)throw new t(this.getValidationMessage())}return a},format:function(e){var t,n;if(this.nachkomma>=0&&!this.roundingDisabled&&(e=e.runden(this.nachkomma)),t=""+e.vorkomma,this.nullen||(t=t.replace(/^0*/,"")),t||(t="0"),this.punkte)for(n=t.length;n>3;)n-=3,t=t.substring(0,n)+"."+t.substring(n);return e.vorzeichen&&("+"===e.vorzeichen?this.plus&&(t="+"+t):-1===e.getSignum()&&(t="-"+t)),this.nachkomma&&e.nachkomma&&(t+=","+e.nachkomma),t},getValidationMessage:function(e){var t="";return e?e:(this.vorkomma!==o?t+=this.nachkomma!==r?"Bitte geben Sie maximal "+this.vorkomma+" Vor- und "+this.nachkomma+" Nachkommastellen ein. ":"Bitte geben Sie maximal "+this.vorkomma+" Vorkommastellen ein. ":this.nachkomma!==r&&(t+="Bitte geben Sie maximal "+this.nachkomma+" Nachkommastellen ein. "),t)},getClassName:function(){return"TaoDecimalMask"}})}),define("tao/ospm/common/datatype/TaoTime",["tao/lib/stapes","tao/ospm/common/NeoError"],function(e,t){var n,i=/^(\d\d)(\d\d)((\d\d))?$/,o=/^(\d\d?)[\.\:](\d\d?)([\.\:](\d\d?))?$/;return n=e.subclass({stunde:null,minute:null,sekunde:null,constructor:function(e,t,n){this.stunde=e,this.minute=t,this.sekunde=n},toString:function(e){var t=(this.stunde<10?"0"+this.stunde:this.stunde)+":"+(this.minute<10?"0"+this.minute:this.minute);return e===!1?t:t+":"+(this.sekunde<10?"0"+this.sekunde:this.sekunde)},toDate:function(){return new Date(1,1,1,this.stunde,this.minute,this.sekunde)},compareTo:function(e){var t=this.stunde-e.stunde||this.minute-e.minute||this.sekunde-e.sekunde;return 0>t?-1:t>0?1:0},getClassName:function(){return"TaoTime"}}),n.parse=function(e){var r,s,a,l=e.match(i);if(l||(l=e.match(o)),!l)throw new t("Keine gültige Zeit");if(r=parseInt(l[1],10),s=parseInt(l[2],10),a=l[3]?parseInt(l[4],10):0,0>r||r>23)throw new t("Keine gültige Zeit");if(0>s||s>59)throw new t("Keine gültige Zeit");if(0>a||a>59)throw new t("Keine gültige Zeit");return new n(r,s,a)},n}),define("tao/ospm/common/datatype/TaoTimeMask",["tao/lib/stapes","tao/ospm/common/NeoError","tao/ospm/common/datatype/TaoTime"],function(e,t,n){var i;return i=e.subclass({mask:null,sekunde:null,constructor:function(e){this.mask="string"==typeof e?e:null,this.sekunde="HH:MM:SS"===this.mask},getValidationMessage:function(){return this.sekunde?"Bitte geben Sie die Zeit in diesem HH:MM:SS Format ein. ":"Bitte geben Sie die Zeit in diesem HH:MM Format ein. "},parse:function(e){var i;try{return i=n.parse(e),i||(i.sekunde=0),i}catch(o){throw new t(this.getValidationMessage())}},format:function(e){return e.toString(this.sekunde)},getClassName:function(){return"TaoTimeMask"}})}),define("tao/ospm/common/datatype/TaoIban",["tao/lib/stapes"],function(e){var t;return t=e.subclass({mask:null,constructor:function(e){this.mask=e||""},parse:function(e){var t,n,i,o,r=!1,s="";for(e=e.replace(/[\W]/g,""),"DE"===e.substr(0,2)&&(r=!0),r?(t=22,n=27):(t=34,n=42),i=e.length,o=0;t-i>o;o++)e+="_";for(o=0;n/4>o;o++)s+=e.substr(4*o,4)+" ";return s.substr(0,n).toUpperCase()},getClassName:function(){return"TaoIban"}})}),define("tao/ospm/common/datatype/TaoIbanMask",["tao/lib/stapes"],function(e){var t;return t=e.subclass({mask:null,customMessage:null,constructor:function(e){this.mask=e||"",this.customMessage=""},parse:function(e){var t,n,i,o=this.mask.split(":"),r=!1;if("DE"===o[0]&&(r=!0),t=o[1],r&&"DE"!==e.substr(0,2))throw this.customMessage="Deutsche IBAN erwartet. ",new Error(this.getValidationMessage());if(t&&(n=e.replace(/ /g,"").substr(4,t.length),n!==t))throw this.customMessage="Es wurde eine IBAN mit der Bankleitzahl "+t+" erwartet. ",new Error(this.getValidationMessage());if(i=e.replace(/ /g,"").substr(2),i=i.replace(/_/g,""),"DE"===e.substr(0,2)&&i.match(/\D/g))throw this.customMessage="Bei deutschen IBANs sind nur Ziffern ab der 3. Stelle erlaubt. ",new Error(this.getValidationMessage());return e},format:function(e){return e},getValidationMessage:function(){return this.customMessage},getClassName:function(){return"TaoIbanMask"}})}),define("tao/ospm/common/datatype/MaskableDataType",["tao/lib/stapes","tao/ospm/common/datatype/DataType","tao/ospm/common/NeoError","tao/ospm/common/datatype/ValidationResult","tao/ospm/common/datatype/TaoDate","tao/ospm/common/datatype/TaoDateMask","tao/ospm/common/datatype/TaoDecimal","tao/ospm/common/datatype/TaoDecimalMask","tao/ospm/common/datatype/TaoTime","tao/ospm/common/datatype/TaoTimeMask","tao/ospm/common/datatype/TaoIban","tao/ospm/common/datatype/TaoIbanMask","tao/ospm/common/Toolkit"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){var m,p;return m=t.subclass({mask:null,typeName:null,constructor:function(e){this.mask=e.mask||""},parseAndValidate:function(e){var t,n=new i;if(e)try{t=this.mask.parse(e),n.setValue(t)}catch(o){n.addError(o.message)}return n},validate:function(e){var t=new i;return h.isOfClass(e,this.typeName)?t.setValue(e):t.addError("Falscher Datentyp: "+this.typeName+" erwartet. Erhalten ",e),t},format:function(e){return null===e||void 0===e?"":this.mask.format(e)},getClassName:function(){return"MaskableDataType"}}),t.constructors.TAODATE=m.subclass({constructor:function(e){this.mask=new r(e.mask),this.typeName="TaoDate"},createValueFromString:function(e){return o.parse(e)},getClassName:function(){return"TaoDateDataType"}}),t.constructors.TAODECIMAL=m.subclass({constructor:function(e){this.mask=new a(e.mask),this.formatter=new p({mask:this.mask}),this.typeName="TaoDecimal"},createValueFromString:function(e){return s.parse(e)},normalize:function(e){return e.replace(/\./g,"")},getClassName:function(){return"TaoDecimalDataType"}}),p=e.subclass({constructor:function(e){this.mask=e.mask},parse:function(e){return s.parse(e)},format:function(e){var t=e.toString?this.parse(e.toString()):e;return this.mask.format(t)}}),t.constructors.TAOTIME=m.subclass({constructor:function(e){this.mask=new c(e.mask),this.typeName="TaoTime"},createValueFromString:function(e){return l.parse(e)},getClassName:function(){return"TaoTimeDataType"}}),t.constructors.IBAN=m.subclass({constructor:function(e){this.mask=new d(e.mask),this.typeName="TaoIban"},createValueFromString:function(e){return u.parse(e)},getClassName:function(){return"TaoIbanDataType"}}),m}),define("tao/ospm/common/datatype/DateDataType",["tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/datatype/DataType","tao/ospm/common/datatype/ValidationResult","tao/ospm/common/DateFormatter"],function(e,t,n,i,o){function r(e){var t;return e?e instanceof Date?e:(t=new Date,e=o.formatDateString(e),(e=o.dateStringToDateObject(e))?(e.setUTCHours(e.getTimezoneOffset()<0?8:16),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e):null):null}function s(e){var t,n;return e?(t=a(e),(n=t.match(/^(\d{1,2}):(\d{1,2})$/))?(n=[parseInt(n[1],10),parseInt(n[2],10)],isNaN(n[0])||n[0]<0||n[0]>23?null:isNaN(n[1])||n[1]<0||n[1]>59?null:t):null):null}function a(e){return o.formatTimeString(e)}function l(e){var t,n,i;return t=s(e),t&&(t=t.split(":"),n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),t[0],t[1])),i||null}var c;return c=n.subclass({parse:null,message:"",convertToDate:null,formatter:null,constructor:function(n){switch(n.type){case t.INPUT_DATA_TYPE.DATE:case t.INPUT_DATA_TYPE.DATE_TIME:this.parse=r,this.message=t.DATE_INVALID_MESSAGE,this.convertToDate=r,this.formatter=o.formatDate;break;case t.INPUT_DATA_TYPE.TIME:this.parse=s,this.message="Bitte geben Sie eine gültige Zeit im Format HH:MM ein.",this.convertToDate=l,this.formatter=a;break;default:throw new e("Ungültiger Date-Datentyp: "+n.type)}},parseAndValidate:function(e){var t,n=new i;if(e)try{return t=this.parse(e,!0),this.validate(t,e)}catch(o){n.addError(this.message)}return n},validate:function(e,t){var n=new i;try{t=this.formatter(e),null===e?n.addError(this.message):n.setValueAndText(e,t)}catch(o){n.addError(this.message)}return n},createValueFromString:function(e){return this.parse(e)},format:function(e){return this.formatter(e)},compareTo:function(e,t){var n=this.convertToDate(e),i=this.convertToDate(t);return!n||n.getTime()<i.getTime()?-1:n.getTime()>i.getTime()?1:0},getClassName:function(){return"DateDataType"}}),n.constructors.DATE=c,n.constructors.TIME=c,n.constructors.DATE_TIME=c,c}),define("tao/ospm/common/datatype/ConstrainedDataType",["tao/lib/stapes","tao/ospm/common/Logger","tao/ospm/common/NeoError","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/datatype/DataType","tao/ospm/common/datatype/DataTypeConstraints","tao/ospm/common/Toolkit","tao/ospm/common/datatype/ValidationResult","tao/ospm/common/datatype/InputType","tao/ospm/common/datatype/MaskableDataType","tao/ospm/common/datatype/BigDecimalDataType","tao/ospm/common/datatype/DateDataType"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(e,t){return a.isSet(e[t])?e[t]:e.dataType.mask&&a.isSet(e.dataType.mask.mask)?e.dataType.mask.mask:e.inputType[t]}function p(e){switch(e){case o.INPUT_DATA_TYPE.NUMBER:case o.INPUT_DATA_TYPE.INTEGER:return new f({type:"bigdecimal",inputType:e});case o.INPUT_DATA_TYPE.TIME:return new f({type:"time",inputType:e});case o.INPUT_DATA_TYPE.DATE:case o.INPUT_DATA_TYPE.DATE_TIME:return new f({type:"date",inputType:o.INPUT_DATA_TYPE.DATE});case o.INPUT_DATA_TYPE.TEXT:return new f({type:"string",inputType:e});case o.INPUT_DATA_TYPE.EMAIL:return new f({type:"string",inputType:e});case o.INPUT_DATA_TYPE.TEL:return new f({type:"string",inputType:e});case o.INPUT_DATA_TYPE_MODE.NONE.type:return new f({type:"string",inputType:e});case o.INPUT_DATA_TYPE_MODE.URL.type:return new f({type:"string",inputType:e});case o.INPUT_DATA_TYPE_MODE.SEARCH.type:return new f({type:"string",inputType:e});default:throw new i("Unbekannter Datentyp: "+e)}}var f,g,_=new t("OSPM","ConstrainedDataType");return u&&d&&h||_.error("Datentypen wurden nicht korrekt geladen"),f=e.subclass({constraints:null,dataType:null,inputType:null,constructor:function(e){this.dataType=r.create(e),this.constraints=s.createConstraints(e,this.dataType),this.inputType=c.create(e),this.defaultPlaceholder=e.defaultPlaceholder,this.mandatoryPlaceholder=e.mandatoryPlaceholder},getDefaultPlaceholder:function(){return m(this,"defaultPlaceholder")},getMandatoryPlaceholder:function(){return m(this,"mandatoryPlaceholder")},parseAndValidate:function(e){var t,n,i=new l;if(!e)return i;if(t=this.dataType.normalize(e),i.join(this.dataType.parseAndValidate(t)),t=i.value,!a.isSet(t))return i;if(this.constraints)for(n=0;n<this.constraints.length;n++)this.constraints[n]&&(this.constraints[n].isValid(t)||i.addError(this.constraints[n].getValidationMessage()));return i.formatValue(this.dataType),i},validate:function(e){var t,n;if(n=this.dataType.validate(e),this.constraints)for(t=0;t<this.constraints.length;t++)this.constraints[t]&&(this.constraints[t].isValid(e)||n.addError(this.constraints[t].getValidationMessage()));return n.formatValue(this.dataType),n},checkInsertOfChar:function(e,t,n,i){return this.inputType.checkInsertOfChar(e,t,n,i)},onFocus:function(e){return this.inputType.onFocus(e)},onTabPress:function(e){return this.inputType.onTabPress(e)},onShiftTabPress:function(e){return this.inputType.onShiftTabPress(e)},reformatAfterUpdate:function(e,t){return this.inputType.reformatAfterUpdate(e,t)},reformatOnExit:function(e){return this.inputType.reformatOnExit(e)},getClassName:function(){return"ConstrainedDataType"}}),g=f.subclass({constructor:function(e,t){var n,i;for(this.constraints=e.constraints,this.dataType=e.dataType,this.inputType=e.inputType,n=s.createConstraints(t,this.dataType),i=0;i<n.length;i++)n[i]&&(this.constraints[i]=n[i])}}),f.create=function(e){var t;return e=e||o.INPUT_DATA_TYPE.TEXT,"string"==typeof e?p(e):a.isOfClass(e,"ConstrainedDataType")?e:"object"==typeof e?new f(e):t},f.refine=function(e,t){return new g(e,t)},f}),define("tao/ospm/common/datatype/DateTimeFilter",["tao/lib/stapes","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit"],function(e,t,n){function i(e){return e&&"function"==typeof e.toDate?e.toDate():e}function o(e,i){if(!n.isArray(e))throw new t("Der Parameter "+(i||"")+" muss ein Array sein.");return e}function r(e,n){if("number"!=typeof e)throw new t("Der Parameter "+(n||"")+" muss vom Typ Number sein.");return e}function s(e,i){if(!n.isDate(e))throw new t("Der Parameter "+(i||"")+" muss vom Typ Date sein.");return e}var a=e.subclass({});return a.extend({days:function(e){return e=e||[],e=o(e,"days"),e.forEach(r),function(t){var n=i(t);return n?e.some(function(e){return e===n.getDate()}):!0}},weekdays:function(e){return e=e||[],e=o(e,"weekdays"),e.forEach(r),function(t){var n=i(t);return n?e.some(function(e){return e===n.getDay()}):!0}},months:function(e){return e=e||[],e=o(e,"months"),e.forEach(r),function(t){var n=i(t);return n?e.some(function(e){return e===n.getMonth()}):!0}},years:function(e){return e=e||[],e=o(e),e.forEach(r),function(t){var n=i(t);return n?e.some(function(e){return e===n.getFullYear()}):!0}},timeSpan:function(e,t){return e=s(e,"startDate"),t=s(t,"endDate"),function(n){var o=i(n);return o?(o=new Date(o.getFullYear(),o.getMonth(),o.getDate()),e.getTime()%864e5===0?o.getTime()>=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()).getTime()&&o.getTime()<=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()).getTime():o.getTime()>=e.getTime()&&o.getTime()<=t.getTime()):!0}},any:function(e){return e=o(e,"dateTimeFilters"),function(t){return e.some(function(e){return e(t)})}},all:function(e){return e=o(e,"dateTimeFilters"),function(t){return e.every(function(e){return e(t)})}},past:function(e){var t,n,o;return e?o=e:(t=new Date,n=new Date(t.getTime()+864e5),o=new Date(n.getFullYear(),n.getMonth(),n.getDate())),function(e){var t=i(e);return t?t.getTime()<=o.getTime():!0}},future:function(e){var t,n;return e?t=e:(n=new Date,t=new Date(n.getFullYear(),n.getMonth(),n.getDate())),function(e){var n=i(e);return n?n.getTime()>=t.getTime():!0}},ALL:function(){return!0},ULTIMO:function(e){var t,n=i(e);return t=new Date(n.getTime()),t.setDate(t.getDate()+1),n.getMonth()!==t.getMonth()},WEEKDAY_VALUES:{MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6,SUN:0},MONTH_VALUES:{JANUARY:0,FEBRUARY:1,MARCH:2,APRIL:3,MAY:4,JUNE:5,JULY:6,AUGUST:7,SEPTEMBER:8,OCTOBER:9,NOVEMBER:10,DECEMBER:11}}),a.WEEKDAYS_ONLY=a.weekdays([1,2,3,4,5]),a.WEEKENDS_ONLY=a.weekdays([6,0]),a.Days=a.days,a.Weekdays=a.weekdays,a.Months=a.months,a.Years=a.years,a.TimeSpan=a.timeSpan,a.All=a.all,a.Any=a.any,a}),define("tao/ospm/common/OspNeoMarkupLanguage",["tao/ospm/core/DomFactory"],function(e){var t;return t={checkOsplusNeoMarkup:function(t){return e.checkMarkup(t)}}}),define("tao/ospm/control/ModuleReferences",["tao/lib/BigDecimal","tao/lib/sprintf","tao/lib/stapes","tao/lib/Zip","tao/ospm/api/BusinessComponentDelegate","tao/ospm/api/WorkflowStep","tao/ospm/common/AsyncTaskHandler","tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/common/DateFormatter","tao/ospm/common/DelayedOSPMError","tao/ospm/common/Logger","tao/ospm/common/MessageScope","tao/ospm/common/NeoError","tao/ospm/common/NumberFormatter","tao/ospm/common/OSPMError","tao/ospm/common/Repository","tao/ospm/common/TableCellFormatter","tao/ospm/common/TaskCollector","tao/ospm/common/Toolkit","tao/ospm/common/WidgetValidator","tao/ospm/common/WorkflowData","tao/ospm/common/datatype/BigDecimalDataType","tao/ospm/common/datatype/BigDecimalMask","tao/ospm/common/datatype/ConstrainedDataType","tao/ospm/common/datatype/DataType","tao/ospm/common/datatype/DataTypeConstraints","tao/ospm/common/datatype/DateDataType","tao/ospm/common/datatype/DateTimeFilter","tao/ospm/common/datatype/InputType","tao/ospm/common/datatype/MaskableDataType","tao/ospm/common/datatype/TaoDate","tao/ospm/common/datatype/TaoDateMask","tao/ospm/common/datatype/TaoDecimal","tao/ospm/common/datatype/TaoDecimalMask","tao/ospm/common/datatype/TaoIban","tao/ospm/common/datatype/TaoIbanMask","tao/ospm/common/datatype/TaoTime","tao/ospm/common/datatype/TaoTimeMask","tao/ospm/common/datatype/ValidationResult","tao/ospm/common/Feedback","tao/ospm/common/OspNeoMarkupLanguage"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I,k,x,A,O,N,M,P,R,F,B,z,V,H){var U={onLoad:function(e){e(d,l,a,f)},registerModules:function(U){function W(e,t){U(e,[],function(){return t})}function j(e,t){W("tao/lib/"+e,t)}function G(e,t){W("tao/ospm/common/"+e,t)}function q(e,t){G("datatype/"+e,t)}j("BigDecimal",e),j("sprintf",t),j("stapes",n),j("Zip",i),W("tao/ospm/api/BusinessComponentDelegate",o),W("tao/ospm/api/WorkflowStep",r),G("AsyncTaskHandler",s),G("Config",a),G("Constants",l),G("DateFormatter",c),G("DelayedOSPMError",u),G("Logger",d),G("MessageScope",h),G("NeoError",m),G("NumberFormatter",p),G("OSPMError",f),G("Repository",g),G("TableCellFormatter",_),G("TaskCollector",v),G("Toolkit",b),G("WidgetValidator",y),G("Feedback",V),G("WorkflowData",C),G("OspNeoMarkupLanguage",H),q("BigDecimalDataType",w),q("BigDecimalMask",E),q("ConstrainedDataType",L),q("DataType",S),q("DataTypeConstraints",D),q("DateDataType",T),q("DateTimeFilter",I),q("InputType",k),q("MaskableDataType",x),q("TaoDate",A),q("TaoDateMask",O),q("TaoDecimal",N),q("TaoDecimalMask",M),q("TaoIban",P),q("TaoIbanMask",R),q("TaoTime",F),q("TaoTimeMask",B),q("ValidationResult",z)}};return document.OSPMEnvironment&&(document.OSPMEnvironment.ModuleReferences=U),U}),define("tao/ospm/if/WorkflowStepCodeLoader",["tao/ospm/common/Logger","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/OSPMError","tao/ospm/core/OSPMPage","tao/ospm/core/PackageManager","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/bc/BusinessComponentsAPI","tao/ospm/common/Toolkit","tao/ospm/control/ModuleReferences"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e){v=e,_=[],requirejs.onResourceLoad=m}function h(){_.forEach(function(e){require.undef(e.name)}),_=null,requirejs.onResourceLoad=p,c.deleteProperty(document,"TaoOSPM")}function m(e,t){_.push(t)}function p(e,t,n){throw new i("Code wird von require.js zu einem Zeitpunkt geladen, zu dem keine Anwendung aktiv ist",{context:e,map:t,depArray:n})}var f,g=new e("OSPM","WorkflowStepCodeLoader"),_=null,v=null;return u||g.error("JavaScript-Bibliotheken wurden nicht korrekt geladen"),f={prefetchCode:function(e){var t,i,o;n.STEP_CODE_PREFETCH_ENABLED&&(t=r.getPrefetchUrlForWorkflowStepId(e),t&&(i=document.head,i&&(o=document.createElement("link"),o.href=t,o.rel="prefetch",i.appendChild(o))))},cleanPrefetchElements:function(){var e,t,i,o,r=[];if(n.STEP_CODE_PREFETCH_ENABLED&&(o=document.getElementsByTagName("head")[0])){for(i=o.getElementsByTagName("link"),t=i.length,e=0;t>e;e++)"prefetch"===i[e].rel&&r.push(i[e]);r.forEach(function(e){o.removeChild(e)})}},supportsMultipleCodes:function(){return!1},afterLeavingStep:function(){},saveCodeData:function(){var e={currentFrame:v};return h(),e},restoreCodeData:function(e){h(),d(e.currentFrame)},getRootContentElement:function(e){return e},loadCode:function(e,n,o){var s,c,u;if(null!==_)throw new i("Anwendungscode kann erst nach Entladen des vorherigen Anwendungscodes geladen werden");d(e),s=a.createContainer("ospm_page_wrapper"),c=a.createContainer(t.DIV_CLASS_MAIN_UI_AREA),s.appendChild(c),e.appendChild(s),u=new l(o,requirejs),r.loadWorkflowStepPackage(document,requirejs,n,o,c,u)},unloadCode:function(e){e===v&&(_?h():g.warning("Mehrfaches Entladen des Codes ausgelöst, Aufruf wird ignoriert"))},resizeLoadedSteps:function(){var e=document;e.TaoOSPM&&e.TaoOSPM.ui&&e.TaoOSPM.ui.getLayout&&s.callOnResizeOnAllElements(e.TaoOSPM.ui.getLayout())},switchToVP:function(e,t){o.getLocation().assign(t,!0)}}}),define("tao/ospm/if/VPIntegration",[],function(){return{begin:function(){},end:function(){},isActive:function(){return!1}}}),define("tao/ospm/ui/UIBackground",[],function(){function e(e){"default"===e&&(e=null),n.forEach(function(t){var n=document.getElementById(t);n&&(n.style.backgroundColor=e)})}var t,n=["ospm_app_header_wrapper","ospm_page_header_view","ospm_app_main"];return t={updateBackgroundColor:function(t){e(t&&t.getBackgroundColor())},resetBackgroundColor:function(){e(null)}}}),define("tao/ospm/main/WorkflowStepManager",["tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/common/Config","tao/ospm/common/OSPMError","tao/ospm/core/CoreConstants","tao/ospm/main/WorkflowStepState","tao/ospm/common/MessageScope","tao/ospm/main/Messages","tao/ospm/core/OnlineHelpService","tao/ospm/main/WorkflowStepCodeLoader","tao/ospm/core/EventLog","tao/ospm/main/VPIntegration","tao/ospm/ui/UIBackground"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(e){var t,n,i=R.length;for(t=0;i>t;t++)if(n=R[t],n.getId()===e)return n;return void 0}function p(){var e,t;for(e=0;e<R.length;e++)t=R[e],t.getState()===r.UNLOADED&&(e>F||F>2?(F>=e&&F--,z.removeFrame(t.getFrameId()),R.splice(e,1),e--):(z.clearFrame(t.getFrameId()),R[e]=new r(t.getFrameId())));for(;2>F;)R.unshift(new r(z.unshiftWorkflowFrame())),F++}function f(e){var o;if(e.getState()===r.RUNNING)throw new i("Aktiver WorkflowStep darf nicht entfernt werden",{step:e});return e.TaoOSPM&&(o=e.communication,o&&e.getState()>r.NEW&&e.getState()<=r.UNLOADING)?void(e.getState()<r.UNLOADING&&(e.setState(r.UNLOADING),t.executeLater(function(){_(o,e),t.executeLater(function(){v(e)},document.OSPMEnvironment.useAnimations()?Math.max(n.UNLOAD_DELAY,n.ANIMATION_TIME):n.UNLOAD_DELAY)},1))):void v(e)}function g(e){var t;if(e.getState()===r.RUNNING)throw new i("Aktiver WorkflowStep darf nicht entfernt werden",{step:e});e.TaoOSPM&&(t=e.communication,t&&e.getState()>r.NEW&&e.getState()<r.UNLOADING&&(e.setState(r.UNLOADING),_(t,e))),v(e)}function _(e,t){try{t.getState()===r.UNLOADING&&(P(t.getId(),"onPackageUnload",!0),u.logSystemEvent("onPackageUnload",t.workflowStep,{state:t.toString()}),e.onPackageUnload())}catch(n){H.error("Fehler beim Aufruf von onPackageUnload: %o",n)}}function v(e){e.getState()!==r.UNLOADED&&(P(e.getId(),"Code entfernen",!0),c.unloadCode(z.getFrame(e.getFrameId())),e.setState(r.UNLOADED))}function b(e){for(;0>e;)R.unshift(new r(z.unshiftWorkflowFrame())),F++,e++;for(;e>=R.length;)R.push(new r(z.pushWorkflowFrame()));return e}function y(e,t){var n,o,s;if(!c.supportsMultipleCodes()){if(C())return void c.prefetchCode(t);c.cleanPrefetchElements()}if(o=b(F+e),n=R[o],n.workflowStep===t&&(n.getState()===r.LOADING||n.getState()===r.LOADED))return void H.info("WorkflowStep %o bereits geladen für Position %o.",t,o);if(n.getState()===r.LOADED&&f(n),n.getState()===r.RUNNING)throw new i("Laden an Position des aktiven WorkflowStep nicht möglich",{step:n});return n.getState()===r.UNLOADING?(s=n.stateChangeCallback,void(n.stateChangeCallback=function(){s&&s(),y(e,t)})):void w(t,n.getFrameId(),o)}function C(){var e,t,n;for(e=0;e<R.length;e++)if(t=R[e],n=t.getState(),n===r.EXITED)g(t);else if(n>r.NEW&&n<r.UNLOADING)return!0;return!1}function w(e,t,n){var i,o=new r(t,e,r.LOADING);"object"==typeof dtrum&&dtrum.enterAction&&(i=dtrum.enterAction("Lade workflow step "+e,"load"),dtrum.addActionProperties(i,null,null,{workflowstep:e},null)),H.info("Lade %o an Position %o",o.toString(),n),R[n]=o,z.clearFrame(t),o.loadStage="Lade Framework-Code",P(o.getId(),"Code laden"),c.loadCode(z.getFrame(t),o.getId(),e),"object"==typeof dtrum&&dtrum.leaveAction&&dtrum.leaveAction(i)}function E(){var e;for(e=0;e<R.length;e++)(F-1>e||e>F+1)&&f(R[e])}function L(e,t,n){x(t),f(e),E(),n()}function S(e){var t,n;n=R[F],F++,t=R[F],H.info("Wechsel zu nächstem WorkflowStep %o, aktueller Step in State %o",t,n.getState()),L(n,t,e)}function D(e){var t,n;n=R[F],F--,t=R[F],H.info("Wechsel zu vorhergehendem WorkflowStep %o, aktueller Step in State %o",t,n.getState()),L(n,t,e)}function T(e,o,s,a){var l,c,u;if(a=a||0,c=R[F+e],c instanceof r)switch(c.getState()){case r.LOADED:o(s);break;case r.LOADING:case r.UNLOADING:u=c.stateChangeCallback,c.stateChangeCallback=function(){clearTimeout(l),u&&u(),T(e,o,s)},l=t.executeLater(function(){var t=m(c.getId());document.OSPMEnvironment.error||t!==c||(c.stateChangeCallback=null,a>=n.LOAD_RETRIES?s(new i("Timeout beim Laden von "+c.workflowStep+" ("+c.loadStage+")")):(H.error("Timeout beim Laden von "+c.workflowStep+"("+c.loadStage+"), wiederhole (Versuch "+(a+1)+" von "+n.LOAD_RETRIES+")"),v(c),w(c.workflowStep,c.getFrameId(),I(c)),T(e,o,s,a+1)))},n.LOAD_TIMEOUT);break;default:s("Fehler beim Laden von "+c.workflowStep)}else H.error("Fehlerhafter Wechsel: currentIndex: "+F+", offset: "+e+", workflowSteps.length: "+R.length)}function I(e){var t,n,i=R.length;for(t=0;i>t;t++)if(n=R[t],n===e)return t;return void 0}function k(e,t){var n=b(F+e);x(R[n],t)}function x(e,t){(void 0!==t||document.OSPMEnvironment.useAnimations())&&z.scrollToFrame(e.getFrameId(),t)}function A(e,t,n){var i;P(e,t,!0),document.OSPMEnvironment&&!document.OSPMEnvironment.error&&(i=m(e),void 0===i?H.error("%o aufgerufen für nicht (mehr) existierende commId %o",t,e):i.getState()!==r.LOADING?H.error("%o aufgerufen für %o",t,i.toString()):n?(H.debug("%o aufgerufen für %o",t,i.toString()),i.setState(r.LOADED)):v(i))}function O(){var e=R[F];N()&&(z.setStepTitle(e.title),z.updatePageHeaderPosition(),e.nextStepButtonEnabled?z.showNextStepButton():z.hideNextStepButton(e.nextStepButtonDisableOnly),e.previousStepButtonEnabled?z.showPreviousStepButton():z.hidePreviousStepButton(e.previousStepButtonDisableOnly),e.resetButtonEnabled?z.showResetButton():e.closeButtonEnabled||e.firstVisible&&e.previousStepButtonEnabled?z.showCloseButton():z.hideRightHeaderButton(),e.deleteButtonEnabled?z.showDeleteButton():z.hideDeleteButton())}function N(){var e;return V.isShowingDialogs()||d.isActive()||document.OSPMEnvironment.isMapiWorkflowActive()?!0:(e=R[F],e.TaoOSPM&&e.TaoOSPM.ui&&e.TaoOSPM.ui.getLayout())}function M(e,t){return{commId:e,id:t,events:[]}}function P(e,t,i){var o,r;e||(o=R[F],o&&(e=o.getId())),U.some(function(t,n){return e===t.commId?(r=t,U.splice(n,1),!0):!1}),r||i||(e?(o=m(e),o&&(r=M(e,o.workflowStep))):r=M(null,"Framework")),r&&(o&&o.workflow&&(r.workflow=o.workflow),U.length>=n.WORKFLOW_LOG_COUNT&&U.splice(0,U.length+1-n.WORKFLOW_LOG_COUNT),r.events.length>=n.WORKFLOWSTEP_LOG_COUNT&&r.events.splice(0,r.events.length+1-n.WORKFLOWSTEP_LOG_COUNT),i&&U.length>0?U.splice(-1,0,r):U.push(r),r.events.push([Date.now(),t]))}var R,F,B,z,V,H=new e("OSPM","WorkflowStepManager"),U=[];return B={getWorkflowLog:function(){return U},logEvent:P,getStepState:function(e){return m(e)},initialize:function(e,t){var n=document.OSPMEnvironment.OSPMCommunication;z=e,V=t,n.setTaoOSPM=function(e,t){var n=m(e);void 0!==n&&(n.TaoOSPM=t)},n.packageLoaded=function(e){A(e,"packageLoaded",!0)},n.packageLoadProgress=function(e,t){var n=m(e);void 0!==n&&(n.loadStage=t)},n.packageLoadError=function(e,t,n){var o=m(e);void 0!==o&&o.getState()<r.UNLOADING?("object"==typeof n&&n.requireModules&&(n.errorMessage=0===n.requireModules[0].lastIndexOf("tao/",0)?'Zugriff auf nicht freigegebene oder nicht vorhandene Framework-Komponente: "'+n.requireModules[0]+'"':'Referenzierte Datei wurde nicht gefunden: "'+n.requireModules[0]+'" (fehlender Anwendungsprefix oder referenzierte Anwendung nicht importiert?)',n.message=""),H.error("Fehler beim Laden des WorkflowSteps %o mit commId %o: %o",o.workflowStep,e,i.fromError("Ladefehler für "+o.workflowStep+": "+t,n)),A(e,"packageLoadError",!1)):H.info("Fehler für bereits entfernten WorkflowStep mit commId %o: %o (%o)",e,t,n)},n.setCommunicationModule=function(e,t){var n=m(e);void 0!==n?n.communication=t:H.error("setCommunicationModule() aufgerufen für nicht (mehr) existierende commId %o",e)},n.getCommunicationModule=function(e){var t=m(e);return void 0!==t&&t.getState()===r.LOADING?t.communication:(H.info("getCommunicationModule() aufgerufen für nicht (mehr) zu ladende commId %o",e),null)},z.on(o.EVENT_FINISHED_SCROLLING,p)},saveWorkflowStepData:function(){var e={workflowSteps:R,currentIndex:F};return R=[],F=0,e},restoreWorkflowStepData:function(e){R=e.workflowSteps,F=e.currentIndex},currentStep:function(){return R[F]},loadNext:function(e){y(1,e)},loadPrevious:function(e){y(-1,e)},switchToNext:function(e){T(1,S,e)},switchToPrevious:function(e){T(-1,D,e)},hideCurrent:function(){z.hideFrame(R[F].getFrameId())},showCurrent:function(){var e,t;a.reduceStepsToDelete(),e=R[F],t=e.getFrameId(),z.showFrame(t),document.OSPMEnvironment.useAnimations()||(z.scrollToFrame(t,0),p()),O(),B.updateBackgroundColor(),l.updatePageHelp(e.workflowStep)},setStepTitle:function(e,t){var n=m(e);void 0!==n?(n.title=t,n===R[F]&&O()):H.error('setPageTitle("%o") aufgerufen für nicht (mehr) existierende commId %o',t,e)},getStepTitle:function(e){var t=m(e);return void 0!==t&&"string"==typeof t.title?t.title:null},getCurrentStepTitle:function(){var e=this.currentStep();return e?e.title:null},setNextEnabled:function(e,t){var n=this.currentStep();void 0!==n&&(n.nextStepButtonEnabled=e,n.nextStepButtonDisableOnly=t,O())},setPreviousEnabled:function(e,t){var n=this.currentStep();void 0!==n&&(n.previousStepButtonEnabled=e,n.previousStepButtonDisableOnly=t,O())},setCloseEnabled:function(e){var t=this.currentStep();void 0!==t&&t.closeButtonEnabled!==e&&(t.closeButtonEnabled=e,e&&(t.resetButtonEnabled=!1),O())},setResetEnabled:function(e){var t=this.currentStep();void 0!==t&&t.resetButtonEnabled!==e&&(t.resetButtonEnabled=e,e&&(t.closeButtonEnabled=!1),O())},setDeleteEnabled:function(e){var t=this.currentStep();void 0!==t&&t.deleteButtonEnabled!==e&&(t.deleteButtonEnabled=e,O())},markCurrentAsFirstVisibleStep:function(){var e=this.currentStep();void 0!==e&&(e.firstVisible=!0,O())},scrollToStep:k,enterCurrent:function(){var e=R[F];if(e.getState()!==r.LOADED)throw new i("Workflow Schritt kann nicht betreten werden - ist noch nicht geladen",{step:e});e.setState(r.RUNNING)},exitCurrent:function(){var e=R[F],t=e.getState();t!==r.RUNNING&&t!==r.NEW&&H.warning("Integritätsfehler: Nicht-aktiver WorkflowStep kann nicht verlassen werden",{step:e}),e.setState(r.EXITED),z.resetView(s.WORKFLOW_STEP)
},clearCurrent:function(){var e=R[F];e&&(e.stateChangeCallback=null,e.getState()===r.RUNNING&&e.setState(r.EXITED),g(e),t.deleteProperty(e,"communication"),e.setState(r.NEW))},reset:function(e){var i,o,s;if(R.length>0){for(o=R[F],s=o.getState(),(s===r.RUNNING||s===r.NEW)&&(o.stateChangeCallback=null,o.setState(r.EXITED)),i=R.length-1;i>=0;i--)o=R[i],o.stateChangeCallback=null,f(o);t.executeLater(p,2*n.UNLOAD_DELAY)}z.resetView(e)},setStepLayout:function(e,t){var n=m(e);void 0!==n&&(n.layout=t)},updateBackgroundColor:function(){var e=B.currentStep();e&&e.visible&&e.layout&&!document.OSPMEnvironment.isDialogWorkflowActive()&&h.updateBackgroundColor(e.layout)}},R=[],F=0,document.OSPMEnvironment&&(document.OSPMEnvironment.WorkflowStepManager=B),B}),define("tao/ospm/main/StartupConfig",["tao/ospm/common/Config","tao/ospm/common/Toolkit"],function(e,t){var n,i;return n={BACKLINK:"backlink"},i={hasBacklink:function(){return t.isObject(e.STARTUP_CONFIG[n.BACKLINK])&&t.isString(e.STARTUP_CONFIG[n.BACKLINK].url)},getBacklinkUrl:function(){return i.hasBacklink()?e.STARTUP_CONFIG[n.BACKLINK].url:""},getBacklinkName:function(){return i.hasBacklink()&&t.isString(e.STARTUP_CONFIG[n.BACKLINK].name)?e.STARTUP_CONFIG[n.BACKLINK].name:""},isBacklinkAutoMode:function(){return i.hasBacklink()?!!e.STARTUP_CONFIG[n.BACKLINK].auto:!1},getBacklinkAutoKeys:function(){var o,r,s={},a=[];if(i.hasBacklink()&&(r=e.STARTUP_CONFIG[n.BACKLINK].autokeys,t.isArray(r)))for(o=0;o<r.length;o++)t.isString(r[o])&&(s[r[o]]||(a.push(r[o]),s[r[o]]=!0));return a}}}),define("tao/ospm/if/BacklinkHandler",[],function(){return{dispatchBack:function(){return!1}}}),define("tao/ospm/main/Workflow",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/common/DelayedOSPMError","tao/ospm/common/OSPMError","tao/ospm/common/WorkflowData","tao/ospm/main/Messages"],function(e,t,n,i,o,r,s,a){function l(e){return i.split(e,"/",2)}function c(e){return l(e)[0]}function u(e,t){var n=t[0];if(1===t.length)return n;if(i.hasProperty(e.states,n))return e.states[n].id;throw new r("Referenzierter State im Workflow nicht enthalten",{workflow:e.id,state:n})}function d(e){return l(e)[1]}function h(e){for(;e.current instanceof D;)e=e.current;return e}function m(e){return h(e).currentTitle}function p(e){return e=h(e),e.states[c(e.current)]}function f(e,t){for(var n,o,s,a,d,h=[];e.current instanceof D;)h.push(e),e=e.current;if(!e.isShowingDialog()){for(a=e.current,n=_(e,c(a)),o=g(n,t);1===o.length;){if(0===h.length)return;if(t=v(e,c(a),t).to,a=e.parentState,e=h.pop(),e.isShowingDialog())return;n=_(e,a),o=g(n,t)}for(s=u(e,o);"W"===s.charAt(0);){if(D.isSpecialWorkflow(s))return;if(e=new D(s,e.workflows),d=o[1],!i.hasProperty(e.entries,d))throw new r("Workflow entry nicht definiert",{entry:d});a=e.entries[d].to,o=l(a),s=u(e,o)}return s}}function g(e,t){if(e.transitions&&i.hasProperty(e.transitions,t))return l(e.transitions[t].to);throw new r("WorkflowStep exit nicht im Workflow definiert",{exit:t})}function _(e,t){if(!i.hasProperty(e.states,t))throw new r("Unbekannter State in Workflow",{workflow:e,state:t});return e.states[t]}function v(e,t,n){var o=_(e,t);if(o.transitions&&i.hasProperty(o.transitions,n))return o.transitions[n];throw new r("WorkflowStep Exit nicht im Workflow definiert",{workflow:e.id,state:t,exit:n})}function b(e,t,n){var o,s,a,l,c;if(o=n.indexOf("/"),0>o)throw new r("Der Aufruf eines Workflow(Step) im Dialog darf nicht zum Verlassen des Workflows führen");if(s=n.substring(0,o),!i.hasProperty(e.states,s))throw new r("Unbekannter Ziel-State in Workflow",{workflow:e,state:s});a=e.states[s].transitions,c=t+"/",a&&i.forKeys(a,function(e){if(l=a[e].to,!l.startsWith(c))throw new r("Nicht alle Folge-Transitionen des Workflow(Step) im Dialog führen zum Aufrufer zurück",{transition:e,transitionTo:l})})}function y(e,t,n){e.history.push({state:e.current,title:t,visible:n})}function C(e,t,n,i,o,r,s){var l,u,d;if(e.current instanceof D){if(!C(e.current,t,n,i,o,r+1,s))return!1;if(i=e.current.current,s||D.isSpecialWorkflow(i))return y(e,t,n),e.current=i,e.currentTitle=null,!0;a.setWorkflowDepth(r),l=e.current.parentState,u=e.current.data}else l=c(e.current),u=e.data;return o?e.history=[]:!s&&e.isShowingDialog()?e.history.pop():y(e,t,n),d=v(e,l,i),s&&(b(e,l,d.to),e.dialogCounter++),E(e,d,u),e.currentTitle=null,"string"==typeof e.current&&-1===e.current.indexOf("/")}function w(e,t,n,o,s){i.search(n.domains,function(a,l){if(i.hasProperty(e,a.from))t[l]=e[a.from];else if(!i.isNullOrUndefined(s)&&i.hasProperty(s,a.from))t[l]=s[a.from];else if(!a.optional&&(i.isNullOrUndefined(n.parameter)||i.isNullOrUndefined(n.parameter[l])||i.isNullOrUndefined(n.parameter[l].value)))throw new r("Benötigte Domain-Daten sind nicht vorhanden",{workflow:o,data:e,key:a.from,transition:n})}),i.search(n.parameter,function(e,n){t[n]=e.value})}function E(e,t,n){var i,o,a,c;if(i=l(t.to),o=u(e,i),D.validateId(o),D.isSpecialWorkflow(o))e.current=o;else if(D.isWorkflowId(o)){if(a=new D(o,e.workflows),a.parentId=e.id,a.parentState=i[0],c=new s,e.globalDomainTransfer?(w(n,e.data,t,e.id,e.data),w(n,c,t,e.id,e.data)):w(n,c,t,e.id),a.enter(i[1],c),!a.public&&D.getAppOfId(e.id)!==D.getAppOfId(a.id))throw new r('Die Transition endet in einem Workflow einer anderen Applikation, der nicht als "public" markiert wurde',{workflow:e.id,targetState:i[0],subWorkflow:a.id});e.current=a}else e.current=t.to,w(n,e.data,t,e.id)}function L(e,t){var n=e.split("_");return n.length>=3&&n[0]===t}function S(e,t){t.ifcontext&&(e.ifEnabled=!!t.ifcontext,e.ifAnonymous=t.ifcontext&&!!t.ifcontext.anonym)}var D;return D=e.subclass({id:null,entry:null,produktId:null,entries:null,states:null,data:null,current:null,currentTitle:null,parentState:null,history:[],workflows:{},"public":null,globalDomainTransfer:null,dialogCounter:0,ifEnabled:null,ifAnonymous:null,constructor:function(e,t){this.id=e,this.workflows=t,this.public=t[e].public,this.globalDomainTransfer=t[e].globalDomainTransfer,this.entries=t[e].entries||{},this.states=t[e].states||{},this.produktId=t[e].produktId,this.data=null,this.current=null,this.history=[],S(this,t[e])},enter:function(e,t,n){if(o.isDelayedOSPMError(this.workflows[this.id]))throw r.fromError("Workflow konnte nicht vom Anwendungsserver geladen werden",this.workflows[this.id]);if(!i.hasProperty(this.entries,e))throw new r("Workflow entry "+e+" ist in Workflow "+this.id+" nicht definiert",{entry:e,workflowId:this.id,parentWorkflow:this.parentId?this.parentId:""});this.entry=e,n===!0?(this.data=new s,w(t,this.data,this.entries[e],this.id)):this.data=s.copy(t),this.history=[],E(this,this.entries[e],this.data)},getCurrentWorkflow:function(){return h(this)},getCurrentProduktId:function(){for(var e=this,t=this.produktId;e.current instanceof D;)e=e.current,"string"==typeof e.produktId&&(t=e.produktId);return t},getCurrentExits:function(){var e=p(this).transitions;return e?i.getKeys(e):[]},getNextStep:function(e){return f(this,e)},getPreviousStep:function(e){var t,n,i;return this.current instanceof D&&(t=this.current.getPreviousStep(e))?t:(n=this.history.length,0===n?null:(i=this.history[n-1],t=i.state,t instanceof D?t.getPreviousStep(e):i.visible||!e?this.states[c(t)].id:null))},getPreviousStepTitle:function(){var e,t,n;return this.current instanceof D&&(e=this.current.getPreviousStepTitle())?e:(t=this.history.length,0===t?null:(n=this.history[t-1],e=n.state,e instanceof D?e.getPreviousStepTitle():n.title))},getCurrentStep:function(){var e=p(this);return e&&e.id},getCurrentWorkflowDepth:function(){for(var e=1,t=this.current;t instanceof D;)e++,t=t.current;return e},getCurrentStepEntry:function(){for(var e=this;e.current instanceof D;)e=e.current;return d(e.current)},getCurrentStateIndex:function(){for(var e=this;e.current instanceof D;)e=e.current;return c(e.current)},getCurrentStepName:function(){var e=p(this);return e&&e.name},next:function(e,t,n){return C(this,m(this),t,e,n,1)},enterDialog:function(e,t){if(C(this,m(this),t,e,!1,1,!0))throw new r("Die Transition zum Aufruf eines Workflow(Step) im Dialog darf nicht zum Verlassen des Workflows führen",{exit:e})},previous:function(){var e;return this.current instanceof D&&!this.current.previous()?!1:0===this.history.length?(this.current=null,this.currentTitle=null,!0):(e=this.history.pop(),this.current=e.state,this.currentTitle=e.title,this.current instanceof D&&this.current.previous(),!1)},isInSubTask:function(){var e;return this.current instanceof D?this.states[this.current.parentState].subTask||this.current.isInSubTask():(e=this.states[c(this.current)],e&&e.subTask)},getPreviousStepInDialog:function(e){var t,n;for(t=this,n=this;t instanceof D;t=t.current)t.isShowingDialog()&&(n=t.current);return n instanceof D?n.getPreviousStep(e):null},isShowingDialog:function(){return this.dialogCounter>0},getHistoryString:function(e){var t,n,i,o=this.history.length;if(0===o)return"[]";for("string"!=typeof e&&(e=""),i="",t=0;o>t;t++)n=this.history[t].state,n instanceof D?i+=n.getHistoryString(e+"   "):i=i+e+"   "+n+"\n";return i},getClassName:function(){return"Workflow"}}),D.isSpecialWorkflow=function(e){return e===t.WORKFLOW_DASHBOARD},D.validateId=function(e){var t=e.split("_");if((t.length<3||"W"!==t[0]&&"A"!==t[0]&&"O"!==t[0])&&!D.isSpecialWorkflow(e))throw new r('Ungültige ID (entspricht nicht "W/A/O_<APP>_<LOCAL_ID>")',{id:e})},D.isWorkflowId=function(e){return L(e,"W")},D.isWorkflowStepId=function(e){return L(e,"A")},D.getIdParts=function(e){return i.split(e,3)},D.getAppOfId=function(e){return e.split("_")[1].toLowerCase()},D}),define("tao/ospm/if/WorkflowMetadataValidator",[],function(){var e={enterState:function(){},resetState:function(){}};return{proxy:function(){return e}}}),define("tao/ospm/if/DashboardView",["tao/lib/stapes","tao/ospm/common/OSPMError","tao/ospm/core/DomFactory"],function(e,t,n){var i;return i=e.subclass({dom:null,constructor:function(){this.dom=n.createContainer("ospm_view_container"),this.dom.id="ospm_dashboard"},show:function(){},hide:function(){this.dom.classList.add("ospm_hidden")},isVisible:function(){return!1},onResize:function(){},getClassName:function(){return"DashboardView"}},!1)}),define("tao/ospm/ui/views/sidebar/SidebarTabView",["tao/lib/stapes","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit"],function(e,t,n){function i(e){t.toggleClassName(e.rootNode,"ospm_no_transition",document.OSPMEnvironment.useAnimations()===!1)}function o(e,t){var n=r(e,t);return n.length>0?n[n.length-1]:null}function r(e,t){var n,i,o=[];if(!e||!e.childNodes)return o;for(n=e.childNodes,i=0;i<n.length;i++)n[i].classList&&n[i].classList.contains(t)&&o.push(n[i]);return o}function s(e){document.OSPMEnvironment.useAnimations()===!1?e():n.executeLater(e,d)}function a(e){var t,n=e.querySelectorAll("input, button, [tabindex]"),i=e.querySelectorAll(".ospm_app_main_rightbar_wrapper");for(t=0;t<n.length;t++)n[t].hasAttribute("data-InactiveSidebarTabindex")||(n[t].getAttribute("tabindex")?n[t].setAttribute("data-InactiveSidebarTabindex",n[t].getAttribute("tabindex")):n[t].setAttribute("data-InactiveSidebarTabindex",""),n[t].setAttribute("tabindex","-1"));for(t=0;t<i.length;t++)i[t].setAttribute("aria-hidden","true")}function l(e){function t(e){e.getAttribute("data-InactiveSidebarTabindex")&&(""===e.getAttribute("data-InactiveSidebarTabindex")?e.removeAttribute("tabindex"):e.setAttribute("tabindex",e.getAttribute("data-InactiveSidebarTabindex")),e.removeAttribute("data-InactiveSidebarTabindex"))}var n,i,o=e.querySelectorAll(".ospm_app_main_rightbar_wrapper");for(o&&o.length>0?(n=o[o.length-1],n.removeAttribute("aria-hidden"),o=n.querySelectorAll("[data-InactiveSidebarTabindex]")):o=e.querySelectorAll("[data-InactiveSidebarTabindex]"),i=0;i<o.length;i++)t(o[i])}var c,u,d;return u="ospm_app_main_rightbar_wrapper",d=500,c=e.subclass({rootNode:null,detailsViewList:[],depth:1,constructor:function(e){this.rootNode=e,i(this),this.detailsViewList=[],c.depth=1},openDetails:function(e,n,o){var r,s,l,d;return document.OSPMEnvironment.isDialogWorkflowActive()?null:(r={key:n||"__details",name:o||null},a(this.rootNode),i(this),this.detailsViewList.push(r),s=document.createElement("div"),s.id="ospm_app_main_rightbar_details",s.className=u,l=document.createElement("div"),l.className="ospm_app_main_rightbar_details_wrapper",s.appendChild(l),t.appendChildren(l,e),this.rootNode.appendChild(s),this.rootNode.style.left=-100*(++c.depth-1)+"%",this.rootNode.style.width=100*c.depth+"%",e.querySelector?d=e.querySelector(".ospm_clickable[tabindex], .ospm_clickable [tabindex]"):e[0]&&e[0].querySelector&&(d=e[0].querySelector(".ospm_clickable[tabindex], .ospm_clickable [tabindex]")),d&&d.focus&&d.focus(),s)},updateDetails:function(e){var t;if(!document.OSPMEnvironment.isDialogWorkflowActive())if(n.isArray(e))for(t=0;t<e.length;t++)this.updateOneDetailsList(e[t]);else this.updateOneDetailsList(e)},updateOneDetailsList:function(e){var t,n;document.OSPMEnvironment.isDialogWorkflowActive()||(t=this.rootNode.querySelector('div[data-atvid="'+e.dataset.atvid+'"]'),t?(n=t.parentNode,n.replaceChild(e,t)):(n=this.rootNode.querySelector(".ospm_app_main_rightbar_details_wrapper"),n&&n.appendChild(e)))},returnFromDetails:function(e){var t;document.OSPMEnvironment.isDialogWorkflowActive()||(t=o(this.rootNode,u),i(this),this.detailsViewList.pop(),this.rootNode.style.left=-100*(--c.depth-1)+"%",s(function(){this.rootNode.removeChild(t),l(this.rootNode),this.rootNode.style.width=100*c.depth+"%","function"==typeof e&&e()}.bind(this)))},returnToMainView:function(){var e,t=this;document.OSPMEnvironment.isDialogWorkflowActive()||(e=r(this.rootNode,u),e.shift(),c.depth=1,t.detailsViewList=[],t.rootNode.style.left=-100*(c.depth-1)+"%",s(function(){e.forEach(function(e){e.parentNode===t.rootNode&&t.rootNode.removeChild(e)}),l(t.rootNode),t.rootNode.style.width=100*c.depth+"%"}))},getCurrentDetailsViewItem:function(){return this.detailsViewList.length>0?this.detailsViewList[this.detailsViewList.length-1]:null},hasDetailsViewItem:function(e,t){var n,i;for(n=0;n<this.detailsViewList.length;n++)if(i=this.detailsViewList[n],i.key===e)return t?i.name===t:!0;return!1},getClassName:function(){return"SidebarTabView"}},!1),c.depth=0,c}),define("tao/ospm/ui/UIConstants",["tao/ospm/common/Config"],function(e){function t(){return window.devicePixelRatio>=2||window.isCordova?"@2x.png":".png"}function n(e){return document.OSPMEnvironment&&document.OSPMEnvironment.context&&document.OSPMEnvironment.context.dashboard&&document.OSPMEnvironment.context.dashboard.iconMapSidebar&&document.OSPMEnvironment.context.dashboard.iconMapSidebar[e]?document.OSPMEnvironment.context.dashboard.iconMapSidebar[e]:null}var i;return i={OSPM_APP:"ospm_app",OSPM_APP_HEADER_WRAPPER:"ospm_app_header_wrapper",OSPM_APP_HEADER:"ospm_app_header",ICON_PREFIX:"ospm_icon_",ICON_DEFAULT_CLASS:"ospm_icon",ICON_DASHBOARD_CLASS:"ospm_dashboard_image",LEFT_ICON_DEFAULT_CLASS:"ospm_left_icon",RIGHT_ICON_DEFAULT_CLASS:"ospm_right_icon",SUBVALUE_ICON_DEFAULT_CLASS:"ospm_subvalue_icon",BLOB_CONSTANT:"data:image/",MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS:32,WORKFLOWSTEP_CONTAINER_WRAPPER_ID:"ospm_app_main_right_content_wrapper",WORKFLOWSTEP_CONTAINER_ID:"ospm_app_main_right_content",WORKFLOW_DIALOGVIEW:"ospm_dialogview_workflow",BASE_RESOURCE_PATH:function(){return"TEST"===e.MODE&&window.ospm_baseUrl.endsWith("/js")?"/node_modules/@finanzinformatik/neo-module-ui/src/":""}(),getWfIconBySize:function(e,t){var i=n(e);return i?i.replace("ic_48_","ic_"+t+"_").replace("res/workflow_icons/sidebar/",this.BASE_RESOURCE_PATH+"res/ospm/icons"):!1},getSidebarWfIcon:function(e){return n(e)||this.BASE_RESOURCE_PATH+"res/ospm/icons/ic_standard_request_m.svg"},getWorkflowIcon:function(e){var i=n(e);return i?i.replace("ic_48_","ic_dashboard_").replace("res/workflow_icons/sidebar/",this.BASE_RESOURCE_PATH+"res/ospm/icons/"):"PLACEHOLDER"===e?this.BASE_RESOURCE_PATH+"res/ospm/icons/ic_48_placeholder"+t():this.BASE_RESOURCE_PATH+"res/ospm/icons/ic_standard_request_m.svg"},HORIZONTAL_BAR:{DEFAULT_COLOR:"red",DEFAULT_NEGATIVE_COLOR:"red",DEFAULT_POSITIVE_COLOR:"#00A800"},TABINDEXES:{NOT_TABBABLE:-1,DEFAULT:0,PAGE_HEADER:0},ICONS:{abbrechen:{size:24,file:"icons/bt_24_abbrechen.svg"},ablegen:{size:32,file:"icons/ic_32_ablegen.svg"},ablehnen:{size:32,file:"icons/ic_32_ablehnen.svg",color:"red"},abrechnungsauskunft:{size:32,file:"icons/ic_32_abrechnungsauskunft.svg",color:"widgetFgColor"},account_disabled:{size:16,file:"icons/ic_16_minus.svg"},accordeonDown:{size:16,file:"icons/bt_16_accordeonDown.svg"},accordeonUp:{size:16,file:"icons/bt_16_accordeonUp.svg"},accordion_close_small:{size:12,file:"icons/ic_12_accordion_close_small.svg"},accordion_small:{size:12,file:"icons/ic_12_accordion_small.svg"},adressbuch:{size:32,file:"icons/ic_32_adressbuch.svg",color:"widgetFgColor"},aktivitaet_aufrufen:{size:32,file:"icons/ic_32_aktivitaet-aufrufen.svg"},aktualisieren:{size:24,file:"icons/bt_24_aktualisieren.svg"},aktualisieren_64:{size:64,file:"icons/ic_64_aktualisieren.svg"},aktualisieren_rot:{size:24,file:"icons/bt_24_aktualisieren.svg",color:"widgetFgColor"},aktualisierung:{size:64,file:"icons/ic_64_aktualisierung.svg",color:"red"},aktualisierung_grey:{size:64,file:"icons/ic_64_aktualisierung_grey.svg"},alb_arrowyellowup:{size:16,file:"icons/ic_16_alb_arrowyellowup.svg"},allzweck_darlehn:{size:32,file:"icons/ic_32_allzweck_darlehn.svg"},altersvorsorge:{size:32,file:"icons/ic_32_altersvorsorge.svg",color:"widgetFgColor"},anlageberatung:{size:32,file:"icons/ic_32_anlageberatung.svg",color:"widgetFgColor"},anpassen:{size:24,file:"icons/bt_24_anpassen.svg"},archive_pdf:{size:24,file:"icons/ic_24_archive_pdf.svg"},arrow:{size:24,file:"icons/ic_8_arrow.svg"},arrow_grey:{size:12,file:"icons/ic_12_arrow_grey.svg"},arrow_left:{size:16,file:"icons/ic_16_left.svg"},arrow_left_pdf:{size:24,file:"icons/ic_24_arrow_left_pdf.svg"},arrow_orange:{size:12,file:"icons/ic_12_arrow_red.svg",color:"orange"},arrow_red:{size:12,file:"icons/ic_12_arrow_red.svg",color:"red"},arrow_right:{size:16,file:"icons/ic_16_right.svg"},arrow_right_pdf:{size:24,file:"icons/ic_24_arrow_right_pdf.svg"},arrow_small:{size:24,file:"icons/ic_24_arrow_small.svg"},arrow_yellow:{size:12,file:"icons/ic_12_arrow_red.svg",color:"yellow"},arrowdown:{size:16,file:"icons/ic_32_arrowdown.svg"},arrowdown_white:{size:16,file:"icons/ic_16_arrowdown_white.svg"},arrowdown_white_focus:{size:16,file:"icons/ic_16_arrowdown_white_focus.svg"},arrowup:{size:16,file:"icons/ic_32_arrowup.svg"},arrowup_white:{size:16,file:"icons/ic_16_arrowup_white.svg"},arrowup_white_focus:{size:16,file:"icons/ic_16_arrowup_white_focus.svg"},ausrufezeichen:{size:32,file:"icons/ic_32_ausrufezeichen.svg",color:"red"},ausrufezeichen_liste:{size:32,file:"icons/ic_32_ausrufezeichen_liste.svg"},auswahl_aufheben:{size:24,file:"icons/bt_24_auswahl_aufheben.svg"},av_bestehend_scheck:{size:32,file:"icons/ic_32_av_bestehend_scheck.svg"},back:{size:32,file:"icons/ic_32_back.svg"},baufinanzierung:{size:32,file:"icons/ic_32_baufinanzierung.svg",color:"widgetFgColor"},beraterprofil:{size:128,file:"icons/ic_128_beraterprofil.svg"},beschwerde:{size:32,file:"icons/ic_32_beschwerde.svg"},bestaetigen:{size:24,file:"icons/bt_24_bestaetigen.svg"},bestaetigen_circle:{size:32,file:"icons/ic_32_bestaetigen.svg"},bestaetigen_disabled:{size:32,file:"icons/ic_32_bestaetigen_disabled.svg"},bild_gross:{size:32,file:"icons/ic_32_bild_gross.svg",color:"darkgrey"},bild_klein:{size:32,file:"icons/ic_32_bild_klein.svg"},bild_mittel:{size:32,file:"icons/ic_32_bild_mittel.svg"},bild_thumbnail:{size:32,file:"icons/ic_32_bild_thumbnail.svg"},bilderpool:{size:32,file:"icons/ic_32_bilderpool.svg",color:"widgetFgColor"},bilderpool_search:{size:32,file:"icons/ic_32_bilderpool_search.svg"},blz:{size:32,file:"icons/ic_32_blz.svg"},bullet:{size:24,file:"icons/ic_24_bullet.svg"},calculator:{size:24,file:"icons/ic_24_calculator.svg"},callout_rot:{size:16},cancel:{file:"icons/ic_cancel.svg",color:"red"},check:{size:12,file:"icons/ic_12_check.svg"},check_16:{size:16,file:"icons/ic_16_check.svg"},check_24:{size:24,file:"icons/bt_24_check.svg"},check_big:{file:"icons/ic_64_check.svg",color:"green"},check_green_small:{size:16,file:"icons/ic_16_check_green_small.svg"},check_red_small:{size:16,file:"icons/ic_16_check_red_small.svg",color:"red"},checkbox_blau:{size:32,file:"icons/iconset_checkbox.svg#ospm_svg_symbol_checkbox_blau"},checkbox_clear:{size:32,file:"icons/iconset_checkbox.svg#ospm_svg_symbol_checkbox_clear"},checkbox_gruen:{size:32,file:"icons/iconset_checkbox.svg#ospm_svg_symbol_checkbox_gruen"},checkbox_lila:{size:32,file:"icons/iconset_checkbox.svg#ospm_svg_symbol_checkbox_lila"},checkbox_violette:{size:32,file:"icons/iconset_checkbox.svg#ospm_svg_symbol_checkbox_violette"},circle_default:{size:12,file:"icons/ic_12_circle_default.svg"},circle_green:{size:12,file:"icons/ic_12_circle_green.svg"},circle_grey:{size:12,file:"icons/ic_12_circle_grey.svg"},circle_orange:{size:12,file:"icons/ic_12_circle_orange.svg"},circle_red:{size:12,file:"icons/ic_12_circle_red.svg",color:"red"},circle_yellow:{size:12,file:"icons/ic_12_circle_yellow.svg"},close:{size:24,file:"icons/bt_24_close.svg"},close2_thin:{size:24,file:"icons/bt_24_close2_thin.svg"},close2_thin_mousover:{size:24},close3_mobile:{size:24,file:"icons/bt_24_close3_mobile.svg"},close_pdf:{size:24,file:"icons/ic_24_close_pdf.svg"},contact:{size:64,file:"icons/ic_64_contact.svg"},contract:{file:"icons/ic_32_konto.svg",color:"darkgrey"},couple:{file:"icons/ic_32_pers-couple.svg",color:"darkgrey"},couple_married:{file:"icons/ic_32_pers-couple_married.svg",color:"darkgrey"},cross:{size:12,file:"icons/ic_12_cross.svg",color:"red"},cross_small:{size:24,file:"icons/ic_24_cross_small.svg"},collapse_down:{size:16,file:"icons/ic_16_collapse_down.svg"},collapse_up:{size:16,file:"icons/ic_16_collapse_up.svg"},date_from:{size:16,file:"icons/ic_16_date-from.svg"},date_to:{size:16,file:"icons/ic_16_date-to.svg"},dateedit:{size:12,file:"icons/ic_12_dateedit.svg"},dateedit_disabled:{size:12,file:"icons/ic_12_dateedit_disabled.svg"},dashboard_close:{size:12,file:"icons/ic_dashboard_close.svg"},dashboard_keine_suchergebnisse:{size:64,file:"icons/ic_dashboard_keine_suchergebnisse.svg"},dashboard_search:{size:12,file:"icons/ic_dashboard_search.svg"},datepicker_cancel:{size:24,file:"icons/bt_24_abbrechen.svg"},datepicker_last_year:{size:24,file:"icons/bt_24_zurueck3.svg"},datepicker_next_year:{size:24,file:"icons/bt_24_weiter3.svg"},datepicker_last_month:{size:24,file:"icons/bt_24_zurueck2.svg"},datepicker_next_month:{size:24,file:"icons/bt_24_weiter2.svg"},datepicker_ok:{size:24,file:"icons/bt_24_bestaetigen.svg"},dauerauftrag:{size:32,file:"icons/ic_32_dauerauftrag.svg",color:"widgetFgColor"},deka:{size:32,file:"icons/ic_32_deka.svg"},deka_anlagefinder:{size:32,file:"icons/ic_32_deka_anlagefinder.svg"},deka_anlagekonfigurator:{size:32,file:"icons/ic_32_deka_anlagekonfigurator.svg",color:"red"},deka_depot:{size:32,file:"icons/ic_32_deka_depot.svg",color:"red"},deka_order:{size:32,file:"icons/ic_32_deka_order.svg",color:"red"},"delete":{size:24,file:"icons/bt_24_delete.svg"},detail:{size:24,file:"icons/bt_24_detail.svg"},dialog:{file:"icons/ico_dialog.svg",color:"darkgrey"},dialogerr_abbrechen:{file:"icons/ic_32_abbrechen.svg"},dialogerr_ablegen:{size:32,file:"icons/ic_32_ablegen.svg",color:"widgetFgColor"},dialogerr_weiter:{size:32,file:"icons/ic_32_weiter.svg",color:"widgetFgColor"},dialogerr_zurueck:{size:32,file:"icons/ic_32_zurueck.svg",color:"widgetFgColor"},dialogerr_ausrufezeichen_liste:{file:"icons/ic_32_ausrufezeichen_liste.svg",color:"widgetFgColor"},dialogerr_kontaktieren:{file:"icons/ic_32_kontaktieren.svg",color:"widgetFgColor"},diamond_red:{size:12,file:"icons/ic_12_diamond_red.svg",color:"red"},direktversicherung:{size:32,file:"icons/ic_32_direktversicherung.svg",color:"darkgrey"},disclosure_small:{size:12,file:"icons/ic_12_disclosure_small.svg"},dispositionskredit:{size:32,file:"icons/ic_32_dispositionskredit.svg",color:"widgetFgColor"},document:{size:32,file:"icons/ic_32_document.svg"},document_pdf:{size:24,file:"icons/ic_24_document_pdf.svg"},document_small:{size:16,file:"icons/ic_16_document_small.svg"},documents:{size:32,file:"icons/ic_32_dokumente.svg",color:"widgetFgColor"},documents_schwarz:{size:32,file:"icons/ic_32_dokumente.svg",color:"darkgrey"},doppelpunkt:{size:16,file:"icons/ic_16_doppelpunkt.svg"},dot_blau:{size:12,file:"icons/ic_12_dot_blau.svg"},dot_gelb:{size:12,file:"icons/ic_12_dot_gelb.svg"},dot_grau:{size:12,file:"icons/ic_12_dot_grau.svg"},dot_grau_32:{size:32,file:"icons/ic_32_dot_grau.svg"},dot_gruen:{size:12,file:"icons/ic_12_dot_gruen.svg"},dot_lila:{size:12,file:"icons/ic_12_dot_lila.svg"},dot_orange:{size:12,file:"icons/ic_12_dot_orange.svg"},dot_pfeil_grau:{size:12,file:"icons/ic_12_dot_pfeil_grau.svg"},dot_rot:{size:12,file:"icons/ic_12_dot_rot.svg",color:"red"},dot_violette:{size:12,file:"icons/ic_12_dot_violette.svg"},drilldown:{size:16,file:"icons/ic_16_drilldown.svg"},drilldown_active:{size:16,file:"icons/ic_16_drilldown.svg",color:"widgetFgColor"},drilldown_12:{size:12,file:"icons/ic_12_drilldown.svg"},drilldown_kreis_down:{size:24,file:"icons/ic_24_drilldown_kreis_down.svg"},drilldown_kreis_up:{size:24,file:"icons/ic_24_drilldown_kreis_up.svg"},drilldown_small:{size:16,file:"icons/ic_16_drilldown_small.svg"},drilldown_white:{size:12,file:"icons/ic_16_drilldown.svg",color:"white"},dropdown_check:{size:16},dropdown_12:{size:12,file:"icons/ic_12_dropdown.svg"},drucken:{size:32,file:"icons/ic_32_drucken.svg"},drucken_24:{size:24,file:"icons/ic_24_drucken.svg"},drucken_pdf:{size:24,file:"icons/ic_24_drucken_pdf.svg"},drucken_active:{size:32,file:"icons/ic_32_drucken.svg",color:"widgetFgColor"},drucken_red:{size:32,file:"icons/ic_32_drucken.svg",color:"widgetFgColor"},dwp:{size:32,file:"icons/ic_32_dwp.svg"},edit:{size:24,file:"icons/bt_24_edit.svg"},edit_white:{size:24,file:"icons/bt_24_edit_white.svg"},einkommensschutz:{size:32,file:"icons/ic_32_einkommensschutz.svg",color:"widgetFgColor"},email:{size:32,file:"icons/ic_32_email.svg",color:"darkgrey"},email_hauptkontakt:{size:32,file:"icons/ic_32_email_hauptkontakt.svg",color:"darkgrey"},empfehlung_red:{size:24,file:"icons/ic_24_empfehlung_red.svg",color:"widgetFgColor"},empfehlungsliste:{size:32,file:"icons/ic_32_empfehlungsliste.svg",color:"widgetFgColor"},erfuellung_check:{size:24,file:"icons/ic_24_erfuellung_check.svg"},erfuellung_dreiviertel:{size:24,file:"icons/ic_24_erfuellung_dreiviertel.svg"},erfuellung_halb:{size:24,file:"icons/ic_24_erfuellung_halb.svg"},erfuellung_leer:{size:24,file:"icons/ic_24_erfuellung_leer.svg"},erfuellung_voll:{size:24,file:"icons/ic_24_erfuellung_voll.svg"},erwerb_immobilien:{size:32,file:"icons/ic_32_erwerb-immobilien.svg",color:"darkgrey"},esafe:{size:32,file:"icons/ic_32_esafe.svg",color:"widgetFgColor"},exclamation:{size:64,file:"icons/ic_64_exclamation.svg"},exit:{size:32,file:"icons/ic_32_exit.svg"},exit_red:{size:32,file:"icons/ic_32_exit.svg",color:"widgetFgColor"},familie:{file:"icons/ic_32_pers-familie.svg",color:"darkgrey"},fax:{size:32,file:"icons/ic_32_fax.svg",color:"darkgrey"},fax_hauptkontakt:{size:32,file:"icons/ic_32_fax_hauptkontakt.svg",color:"darkgrey"},fehler_schwer:{file:"icons/ic_fehler_schwer.svg",color:"red"},festnetz:{size:32,file:"icons/ic_32_festnetz.svg",color:"darkgrey"},festnetz_hauptkontakt:{size:32,file:"icons/ic_32_festnetz_hauptkontakt.svg",color:"darkgrey"},"finanz-check":{size:32,file:"icons/ic_32_finanz-check.svg"},fk_altersvorsorge_1:{size:32,file:"icons/ic_32_fk_altersvorsorge-1.svg"},fk_altersvorsorge_2:{size:32,file:"icons/ic_32_fk_altersvorsorge-2.svg"},fk_altersvorsorge_3:{size:32,file:"icons/ic_32_fk_altersvorsorge-3.svg"},fk_altersvorsorge_hinweis:{size:32,file:"icons/ic_32_fk_altersvorsorge-hinweis.svg"},fk_anlageberatung:{size:32,file:"icons/ic_32_fk_anlageberatung.svg"},fk_beratungswunsch_grey:{size:32,file:"icons/ic_32_fk_beratungswunsch_grey.svg"},fk_fremdanlagen:{size:32,file:"icons/ic_32_fk_fremdanlagen.svg",color:"darkgrey"},fk_haus:{size:32,file:"icons/ic_32_fk_haus.svg",color:"darkgrey"},fk_scheck:{size:32,file:"icons/ic_32_fk_scheck.svg"},fk_sonstiges:{size:32,file:"icons/ic_32_fk_sonstiges.svg",color:"darkgrey"},fk_sparkasse:{size:32,file:"icons/ic_32_fk_sparkasse.svg",color:"darkgrey"},flyout:{size:24},foerderkreditberatung:{size:32,file:"icons/ic_32_foerderkreditberatung.svg",color:"widgetFgColor"},formattedtexteditor_bold:{size:30,file:"formattedtexteditor/bold.svg"},formattedtexteditor_insertorderedlist:{size:30,file:"formattedtexteditor/orderedlist.svg"},formattedtexteditor_insertunorderedlist:{size:30,file:"formattedtexteditor/unorderedlist.svg"},formattedtexteditor_paragraph:{size:30,file:"formattedtexteditor/paragraph.svg"},formattedtexteditor_underline:{size:30,file:"formattedtexteditor/underlined.svg"},formattedtexteditor_code:{size:30,file:"formattedtexteditor/monospace.svg"},formattedtexteditor_strikethrough:{size:30,file:"formattedtexteditor/strikethrough.svg"},formattedtexteditor_italic:{size:30,file:"formattedtexteditor/italic.svg"},formular:{file:"icons/ic_formular.svg",color:"widgetFgColor"},frage:{size:24,file:"icons/bt_24_frage.svg"},frage_64:{size:64,file:"icons/ic_64_frage.svg",color:"widgetFgColor"},frage_white:{size:24,file:"icons/bt_24_frage_white.svg"},freistellungen:{size:32,file:"icons/ic_32_freistellungen.svg",color:"widgetFgColor"},freitext:{size:32,file:"icons/ic_32_freitext.svg"},fremde_vereinbarungen:{size:32,file:"icons/ic_32_fremde_vereinbarungen.svg",color:"darkgrey"},geloest:{size:24,file:"icons/ic_24_geloest.svg"},generell:{size:32,file:"icons/ic_32_generell.svg"},gespraechsnotiz:{size:32,file:"icons/ic_32_gespraechsnotiz.svg"},gespraechstermin:{size:32,file:"icons/ic_32_gespraechstermin.svg"},gespraechstermin_active:{size:32,file:"icons/ic_32_gespraechstermin.svg",color:"widgetFgColor"},gesundheit:{file:"icons/ic_32_gesundheit.svg",size:32},giro_32:{size:32,file:"icons/ic_32_giro.svg",color:"darkgrey"},girokonto:{size:32,file:"icons/ic_32_girokonto.svg",color:"widgetFgColor"},girokonto_geschaeftlich:{size:32,file:"icons/ic_32_girokonto_geschaeftlich.svg",color:"widgetFgColor"},girokontoproduktverkauf:{size:32,file:"icons/ic_32_girokontoproduktverkauf.svg"},goback:{size:24,file:"icons/bt_24_zurueck.svg"},gps_weiter:{size:24,file:"icons/bt_24_gps_weiter.svg"},gps_zurueck:{size:24,file:"icons/bt_24_gps_zurueck.svg"},haken:{size:32,file:"icons/ic_32_haken.svg"},haus:{size:32,file:"icons/ic_32_haus.svg"},haus_12:{size:12,file:"icons/ic_12_haus.svg"},haus_bauen:{size:32,file:"icons/ic_32_haus_bauen.svg"},haus_kaufen:{size:32,file:"icons/ic_32_haus_kaufen.svg"},haus_mieten:{size:32,file:"icons/ic_32_haus_mieten.svg",color:"darkgrey"},haus_modernisieren:{size:32,file:"icons/ic_32_haus_modernisieren.svg"},header_prev:{size:24,file:"pageheader/ic_24_header_prev_nofill.svg"},header_next:{size:24,file:"pageheader/ic_24_header_next_nofill.svg"},help_close:{size:24,file:"icons/bt_24_help_close.svg"},help_open:{size:24,file:"icons/bt_24_help_open.svg"},hinweis:{size:64,file:"icons/ic_64_hinweis.svg",color:"red"},hinweis_24:{size:24,file:"icons/ic_24_hinweis.svg"},hinweis_grey:{size:64,file:"icons/ic_64_hinweis_grey.svg"},hinweis_red:{size:64,file:"icons/ic_64_hinweis.svg",color:"red"},hinweis_small:{size:16,file:"icons/ic_16_hinweis_small.svg",color:"red"},hochladen:{size:24,file:"icons/ic_24_hochladen.svg"},impuls_geloest:{size:24,file:"icons/ic_24_impuls_geloest.svg"},inbearbeitung:{size:24,file:"icons/ic_24_inbearbeitung.svg"},index_garant:{size:32,file:"icons/ic_32_index_garant.svg",color:"widgetFgColor"},info:{size:24,file:"icons/bt_24_info.svg"},info_32:{size:32,file:"icons/ic_32_info.svg"},info_active:{size:24,file:"icons/bt_24_info.svg",color:"widgetFgColor"},info2_highlight:{size:24,file:"icons/bt_24_info2_highlight.svg"},info_ok:{size:64},info_ok_grey:{size:64,file:"icons/ic_64_info_ok_grey.svg"},info_red:{size:64,file:"icons/ic_64_info.svg",color:"red"},inhaberaendern:{size:32,file:"icons/ic_32_inhaberaendern.svg",color:"widgetFgColor"},input_calender:{size:32,file:"icons/ic_32_input_calender.svg"},ipro:{size:32,file:"icons/ic_32_ipro.svg",color:"widgetFgColor"},kalender:{size:12,file:"icons/ic_12_kalender.svg"},kommentar:{size:32,file:"icons/ic_32_kommentar.svg"},kommentieren:{size:32,file:"icons/ic_32_kommentieren.svg"},kontaktieren:{size:32,file:"icons/ic_32_kontaktieren.svg"},kontext_back:{size:32,file:"icons/ic_32_kontext_back.svg"},kontext_gps:{size:32,file:"icons/ic_32_kontext_gps.svg"},kontext_meldung:{size:32,file:"icons/ic_32_kontext_meldung.svg"},kontext_notizen:{size:32,file:"icons/ic_32_kontext_notizen.svg"},kontext_optionale_pfade:{size:32,file:"icons/ic_32_kontext_optionale_pfade.svg"},konto:{size:32,file:"icons/ic_32_konto.svg",color:"darkgrey"},konto_white:{size:32,file:"icons/ic_32_konto_white.svg"},kontoaufloesen:{size:32,file:"icons/ic_32_kontoaufloesen.svg",color:"widgetFgColor"},kontowechsel:{size:32,file:"icons/ic_32_kontowechsel.svg",color:"widgetFgColor"},kreditgespraechsvorbereitung:{size:32,file:"icons/ic_32_kreditgespraechsvorbereitung.svg",color:"widgetFgColor"},kreditkarte:{size:32,file:"icons/ic_32_kreditkarte.svg",color:"widgetFgColor"},kreis:{size:16,file:"icons/ic_16_kreis.svg"},kreis_haken:{size:32,file:"icons/ic_32_kreis_haken.svg",color:"green"},kreis_haken_small:{size:16,file:"icons/ic_16_kreis_haken_small.svg"},kreis_haken_hervorgehoben:{size:32,file:"icons/ic_32_kreis_haken.svg",color:"widgetFgColor"},kreis_hinweis:{size:32,file:"icons/ic_32_kreis_hinweis.svg"},kreis_hinweis_small:{size:16,file:"icons/ic_16_kreis_hinweis_small.svg"},kreis_info:{size:32,file:"icons/ic_32_kreis_info.svg"},kreis_kreuz:{size:32,file:"icons/ic_32_kreis_kreuz.svg",color:"red"},kreis_kreuz_small:{size:16,file:"icons/ic_16_kreis_kreuz_small.svg"},kreis_undefined_small:{size:16,file:"icons/ic_16_kreis_undefined_small.svg"},kreuz:{size:32,file:"icons/ic_32_kreuz.svg",color:"red"},kundeneinwilligung:{size:32,file:"icons/ic_32_kundeneinwilligung.svg",color:"widgetFgColor"},kundengewichtung_00:{size:24,file:"icons/ic_24_kundengewichtung_00.svg",color:"widgetFgColor"},kundengewichtung_01:{size:24,file:"icons/ic_24_kundengewichtung_01.svg",color:"widgetFgColor"},kundengewichtung_02:{size:24,file:"icons/ic_24_kundengewichtung_02.svg",color:"widgetFgColor"},kundengewichtung_03:{size:24,file:"icons/ic_24_kundengewichtung_03.svg",color:"widgetFgColor"},kundengewichtung_04:{size:24,file:"icons/ic_24_kundengewichtung_04.svg",color:"widgetFgColor"},kundenuebersicht:{size:32,file:"icons/ic_32_kundenuebersicht.svg",color:"widgetFgColor"},lbs_bausparen:{size:32,file:"icons/ic_32_lbs_bausparen.svg",color:"red"},legitimationsdaten:{size:32,file:"icons/ic_32_legitimationsdaten.svg",color:"widgetFgColor"},link_red:{size:16,file:"icons/ic_16_link_red.svg"},link_red_disabled:{size:16,file:"icons/ic_16_link_red_disabled.svg"},list:{size:32,file:"icons/bt_32_list.svg"},locked:{size:12,file:"icons/ic_32_locked.svg",color:"darkgrey"},loeschen:{size:24,file:"icons/bt_24_loeschen.svg"},logout:{size:64},man:{file:"icons/ic_32_person.svg",color:"darkgrey"},man_legal:{file:"icons/ic_32_pers-man_legal.svg",color:"darkgrey"},manuelle_rechnung:{size:32,file:"icons/ic_32_manuelle_rechnung.svg",color:"widgetFgColor"},max:{size:8,file:"icons/ic_8_max.svg"},meldung_green:{size:32,file:"icons/ic_32_meldung_green.svg"},meldung_red:{size:32,file:"icons/ic_32_meldung_red.svg"},meldung_yellow:{size:32,file:"icons/ic_32_meldung_yellow.svg"},menu_context:{size:32,file:"icons/ic_32_menu_context.svg",color:"widgetFgColor"},menu_dashboard_off:{size:32},menu_dashboard_on:{size:32},menu_dokumentmappe:{size:32,file:"icons/ic_32_menu_dokumentmappe.svg"},menu_exit:{size:64},menu_help:{size:64},menu_hinweis:{size:32,file:"icons/ic_32_menu_hinweis.svg"},menu_logout_off:{size:32},menu_logout_ofn:{size:32},menu_logout_on:{size:32},menu_meldung_green:{size:32},menu_meldung_red:{size:32},menu_meldung_yellow:{size:32},menu_notiz:{size:64},menu_optpfade:{size:32,file:"icons/ic_32_menu_optpfade.svg"},menu_pdf:{size:32,file:"icons/ic_32_menu_pdf.svg"},menu_person_outline:{size:32},menu_prefs_off:{size:32},menu_prefs_on:{size:32},menu_print:{size:64},menu_search_off:{size:32},menu_search_on:{size:32},menu_werkzeug:{size:32,file:"icons/ic_32_menu_werkzeug.svg"},mietkaution:{size:32,file:"icons/ic_32_mietkaution.svg",color:"widgetFgColor"},min:{size:8,file:"icons/ic_8_min.svg"},minus:{size:16,file:"icons/ic_16_minus.svg"},mobil:{size:32,file:"icons/ic_32_mobil.svg",color:"darkgrey"},mobil_hauptkontakt:{size:32,file:"icons/ic_32_mobil_hauptkontakt.svg",color:"darkgrey"},modernisierungskredit:{size:32,file:"icons/ic_32_modernisierungskredit.svg",color:"widgetFgColor"},more:{size:24,file:"icons/ic_24_more.svg"},muenzen:{size:12,file:"icons/ic_12_muenzen.svg"},muenzhaufen:{size:32,file:"icons/ic_32_muenzhaufen.svg",color:"darkgrey"},musterkundenabgleich_1:{size:96},musterkundenabgleich_2:{size:96},musterkundenabgleich_3:{size:96},musterkundenabgleich_4:{size:96},musterkundenabgleich_5:{size:96},next_blue:{size:24,file:"icons/ic_24_next_blue.svg"},next_green:{size:24,file:"icons/ic_24_next_green.svg"},next_red:{size:24,file:"icons/ic_24_next_red.svg"},nordlb:{size:32,file:"icons/ic_32_nordlb.svg"},note_triangle:{size:32,file:"icons/ic_32_hinweis.svg"},noti_ausrufezeichen_hellgrau:{size:32,file:"icons/ic_32_noti_ausrufezeichen_hellgrau.svg"},noti_ausrufezeichen_rot:{size:32,file:"icons/ic_32_noti_ausrufezeichen_rot.svg"},notification:{size:64,file:"icons/ic_64_notification.svg"},notification2:{size:64,file:"icons/ic_64_notification2.svg"},notification2_grey:{size:64,file:"icons/ic_64_notification2_grey.svg"},notification_grey:{size:64,file:"icons/ic_64_notification_grey.svg"},notification_kreuz:{size:64,file:"icons/ic_64_notification_kreuz.svg",color:"red"},notiz:{size:24,file:"icons/bt_24_notiz.svg"},nummerierung_01:{size:24,file:"icons/ic_24_nummerierung_01.svg"},nummerierung_02:{size:24,file:"icons/ic_24_nummerierung_02.svg"},nummerierung_03:{size:24,file:"icons/ic_24_nummerierung_03.svg"},nummerierung_04:{size:24,file:"icons/ic_24_nummerierung_04.svg"},nummerierung_05:{size:24,file:"icons/ic_24_nummerierung_05.svg"},onlinebanking:{size:32,file:"icons/ic_32_onlinebanking.svg",color:"widgetFgColor"},onlineservice:{size:32,file:"icons/ic_32_onlineservice.svg",color:"darkgrey"},optionale_pfade:{size:96,file:"icons/ic_96_optionale-pfade.svg"},passivprodukt:{size:32,file:"icons/ic_32_passivprodukt.svg",color:"widgetFgColor"},paydirekt:{size:32,file:"icons/ic_32_paydirekt.svg"},paydirekt_mbf:{size:32,file:"icons/ic_32_paydirekt_mbf.svg",color:"darkgrey"},pdf:{size:32,file:"icons/ic_32_pdf.svg"},pdf3:{size:32,file:"icons/ic_16_pdf.svg"},pen_discover:{size:24,file:"icons/ic_24_pen_discover_pdf.svg"},pen_identified:{size:24,file:"icons/ic_24_pen_identified_pdf.svg"},pers_company:{size:32,file:"icons/ic_32_pers-company.svg",color:"darkgrey"},pers_company_white:{size:32,file:"icons/ic_32_pers-company_white.svg"},pers_couple:{size:32,file:"icons/ic_32_pers-couple.svg",color:"darkgrey"},pers_couple_married:{size:32,file:"icons/ic_32_pers-couple_married.svg",color:"darkgrey"},pers_couple_married_white:{size:32,file:"icons/ic_32_pers-couple_married_white.svg"},pers_couple_white:{size:32,file:"icons/ic_32_pers-couple_white.svg"},pers_familie:{size:32,file:"icons/ic_32_pers-familie.svg",color:"darkgrey"},pers_familie_white:{size:32,file:"icons/ic_32_pers-familie_white.svg"},pers_frau:{size:16,file:"icons/ic_16_pers-frau.svg",color:"darkgrey"},pers_frau_selbstaendig_white:{size:16,file:"icons/ic_16_pers-frau_selbstaendig_white.svg"},pers_frau_selbststaendig:{size:16,file:"icons/ic_16_pers-frau_selbststaendig.svg",color:"darkgrey"},pers_frau_selbststaendig_white:{size:16},pers_frau_white:{size:16,file:"icons/ic_16_pers-frau_white.svg"},pers_gemeinschaftsperson:{size:16,file:"icons/ic_16_pers-gemeinschaftsperson.svg",color:"darkgrey"},pers_gemeinschaftsperson_white:{size:16,file:"icons/ic_16_pers-gemeinschaftsperson_white.svg"},pers_man:{size:32,file:"icons/ic_32_pers-man.svg",color:"darkgrey"},pers_man_legal:{size:32,file:"icons/ic_32_pers-man_legal.svg",color:"darkgrey"},pers_man_legal_white:{size:32,file:"icons/ic_32_pers-man_legal_white.svg"},pers_man_white:{size:32,file:"icons/ic_32_pers-man_white.svg"},pers_mann:{size:16,file:"icons/ic_16_pers-mann.svg",color:"darkgrey"},pers_mann_selbstaendig_white:{size:16,file:"icons/ic_16_pers-mann_selbstaendig_white.svg"},pers_mann_selbststaendig:{size:16,file:"icons/ic_16_pers-mann_selbststaendig.svg",color:"darkgrey"},pers_mann_selbststaendig_white:{size:16},pers_mann_white:{size:16,file:"icons/ic_16_pers-mann_white.svg"},pers_mehrere:{size:32,file:"icons/ic_32_pers-mehrere.svg",color:"darkgrey"},pers_mehrere_white:{size:32},pers_organisation:{size:16,file:"icons/ic_16_pers-organisation.svg",color:"darkgrey"},pers_organisation_white:{size:16,file:"icons/ic_16_pers-organisation_white.svg"},pers_woman:{size:32,file:"icons/ic_32_pers-woman.svg",color:"darkgrey"},pers_woman_legal:{size:32,file:"icons/ic_32_pers-woman_legal.svg",color:"darkgrey"},pers_woman_legal_white:{size:32,file:"icons/ic_32_pers-woman_legal_white.svg"},pers_woman_white:{size:32,file:"icons/ic_32_pers-woman_white.svg"},person:{size:32,file:"icons/ic_32_person.svg",color:"darkgrey"},person_white:{size:32,file:"icons/ic_32_person_white.svg"},personendatenaktualisierung:{size:32,file:"icons/ic_32_personendatenaktualisierung.svg",color:"widgetFgColor"},pfeil:{size:32,file:"icons/ic_32_pfeil.svg"},pfeil_gross:{size:32,file:"icons/ic_32_pfeil_gross.svg"},pfeil_small:{size:12,file:"icons/ic_12_pfeil_small.svg"},pfeile:{size:12,file:"icons/ic_12_pfeile.svg"},placeholder:{size:24,file:"icons/ic_24_placeholder.svg"},platzhalter:{size:24,file:"icons/ic_24_platzhalter.svg"},plus:{size:24,file:"icons/bt_24_plus.svg"},plus_blue:{size:24,file:"icons/bt_24_plus_blue.svg"},plus_green:{size:24,file:"icons/bt_24_plus_green.svg"},plus_mousover:{size:24},plus_red:{size:24,file:"icons/ic_24_plus_red.svg",color:"red"},plus_red_mousover:{size:24},plus_white:{size:24,file:"icons/bt_24_plus_white.svg"},pref_anlageberatung:{size:64,file:"icons/ic_64_pref_anlageberatung.svg"},pref_finanzkonzept:{size:64,file:"icons/ic_64_pref_finanzkonzept.svg"},pref_giro:{size:64},pref_modernisierungskredit:{size:64},pref_scp:{size:64},pref_uzb:{size:64},produktauswahl:{size:32,file:"icons/ic_32_produktauswahl.svg"},prozent:{size:12,file:"icons/ic_12_prozent.svg"},pslose:{size:32,file:"icons/ic_32_pslose.svg",color:"widgetFgColor"},red_ereignisse:{size:32,file:"icons/ic_32_red_ereignisse.svg",color:"widgetFgColor"},right:{size:12,file:"icons/ic_12_right.svg"},risiko_ausgepraegt:{size:32,file:"icons/ic_32_risiko_ausgepraegt.svg",color:"widgetFgColor"},risiko_gering:{size:32,file:"icons/ic_32_risiko_gering.svg",color:"widgetFgColor"},risiko_hoch:{size:32,file:"icons/ic_32_risiko_hoch.svg",color:"widgetFgColor"},risiko_maessig:{size:32,file:"icons/ic_32_risiko_maessig.svg",color:"widgetFgColor"},risiko_sehr_hoch:{size:32,file:"icons/ic_32_risiko_sehr_hoch.svg",color:"widgetFgColor"},"s-pensionsmanagement":{size:32,file:"icons/ic_32_s-pensionsmanagement.svg",color:"darkgrey"},s_pensionsmanagement:{size:32,file:"icons/ic_32_s_pensionsmanagement.svg",color:"darkgrey"},"s-privat_schutz":{size:32,file:"icons/ic_32_s-privat_schutz.svg",color:"widgetFgColor"},"s-privatkredit":{size:32,file:"icons/ic_32_s-privatkredit.svg",color:"widgetFgColor"},"s-versicherungsmanager":{size:32,file:"icons/ic_32_s-versicherungsmanager.svg",color:"widgetFgColor"},scp:{size:32,file:"icons/ic_32_scp.svg",color:"widgetFgColor"},sepa_lastschrift:{size:32,file:"icons/ic_32_sepa_lastschrift.svg",color:"widgetFgColor"},sepa_ueberweisung:{size:32,file:"icons/ic_32_sepa_ueberweisung.svg",color:"widgetFgColor"},serviceauftrag:{size:32,file:"icons/ic_32_serviceauftrag.svg",color:"widgetFgColor"},sicherheiten:{size:32,file:"icons/ic_32_sicherheiten.svg",color:"widgetFgColor"},sitzung_schliessen:{size:64,file:"icons/ic_64_sitzung_schliessen.svg"},skp:{size:32,file:"icons/ic_32_skp.svg"},slider_edit:{size:12},sparen_anlegen:{size:32,file:"icons/ic_32_sparen_anlegen.svg",color:"widgetFgColor"},sparkassencard_plus:{size:32,file:"icons/ic_32_sparkassencard_plus.svg",color:"widgetFgColor"},sparkassencardplus:{size:32,file:"icons/ic_32_sparkassencardplus.svg",color:"widgetFgColor"},sprechblase:{size:32,file:"icons/ic_32_sprechblase.svg"},sprechblasen:{file:"icons/ic_sprechblasen.svg",color:"widgetFgColor"},start_pfeil:{size:null},status_erledigt_gruen:{size:32,file:"icons/ic_32_status-erledigt-gruen.svg"},status_erledigt_rot:{size:32,file:"icons/ic_32_status-erledigt-rot.svg",color:"red"},status_hinweis2:{size:32,file:"icons/ic_32_status-hinweis2.svg"},status_offen:{size:32,file:"icons/ic_32_status-offen.svg"},strategische_finanzplanung:{size:32,file:"icons/ic_32_strategische_finanzplanung.svg",color:"widgetFgColor"},sublist:{size:16,file:"icons/ic_16_sublist.svg"},sublist_collapse:{size:16,file:"icons/ic_16_arrowup.svg"},suche_down:{size:16,file:"icons/ic_16_suche-down.svg"},suche_interessiert:{size:16,file:"icons/ic_16_suche-interessiert.svg"},suche_up:{size:16,file:"icons/ic_16_suche-up.svg"},summary_bullet:{size:16,file:"icons/ic_16_bullet.svg",color:"green"},summary_bullet2:{size:16,file:"icons/ic_16_bullet2.svg"},summing:{size:12,file:"icons/ic_12_summing.svg"},summing_grau:{size:12,file:"icons/ic_12_summing.svg"},summing_schwarz:{size:12,file:"icons/ic_12_summing.svg",color:"darkgrey"},terminvereinbarung:{size:32,file:"icons/ic_32_terminvereinbarung.svg",color:"widgetFgColor"},textedit2:{size:12,file:"icons/ic_12_textedit2.svg"},textinput_edit:{size:12,file:"icons/ic_12_textedit.svg"},triangle_yellow:{size:12,file:"icons/ic_12_triangle_yellow.svg"},trianle_yellow:{size:12},umsatzanzeige:{size:32,file:"icons/ic_32_umsatzanzeige.svg",color:"widgetFgColor"},update:{size:32,file:"icons/ic_32_update.svg"},update_active:{size:32,file:"icons/ic_32_update.svg",color:"widgetFgColor"},user:{size:32,file:"icons/ic_32_pers-man.svg",color:"darkgrey"},usergroup:{size:32,file:"icons/ic_32_usergroup.svg"},uzb:{size:32,file:"icons/ic_32_uzb.svg",color:"darkgrey"},uzb_ablehnen_white:{size:16,file:"icons/ic_16_uzb_ablehnen_white.svg"},uzb_ausklappen_white:{size:32,file:"icons/bt_32_uzb_ausklappen_white.svg"},uzb_automatisch_white:{size:16,file:"icons/ic_16_uzb_automatisch_white.svg"},uzb_brief_white:{size:32,file:"icons/ic_32_uzb_brief_white.svg"},uzb_detailsvorgang_white:{size:32,file:"icons/ic_32_uzb_detailsvorgang_white.svg"},uzb_druck_white:{size:16,file:"icons/ic_16_uzb_druck_white.svg"},uzb_email_send:{size:32,file:"icons/ic_32_uzb_email_send.svg"},uzb_fehlerhaft_white:{size:16,file:"icons/ic_16_uzb_fehlerhaft_white.svg"},uzb_genehmigen:{size:16,file:"icons/ic_16_uzb_genehmigen.svg"},uzb_genehmigen_white:{size:16,file:"icons/ic_16_uzb_genehmigen_white.svg"},uzb_kommentar_white:{size:32,file:"icons/ic_32_uzb_kommentar_white.svg"},uzb_konto:{size:32,file:"icons/ic_32_uzb_konto.svg",color:"darkgrey"},uzb_konto_white:{size:32,file:"icons/ic_32_uzb_konto_white.svg"},uzb_negativ_white:{size:16,file:"icons/ic_16_uzb_negativ_white.svg"},uzb_offen:{size:16,file:"icons/ic_16_uzb_offen.svg"},uzb_offen2:{size:16,file:"icons/ic_32_uzb_offen2.svg"},uzb_offen_white:{size:16,file:"icons/ic_16_uzb_offen_white.svg"},uzb_person_white:{size:32,file:"icons/ic_32_uzb_person_white.svg"},uzb_positiv_white:{size:16,file:"icons/ic_16_uzb_positiv_white.svg"},uzb_system_white:{size:16,file:"icons/ic_16_uzb_system_white.svg"},uzb_teilgenehmigen_white:{size:16,file:"icons/ic_16_uzb_teilgenehmigen_white.svg"},uzb_teilgenehmigt1_white:{size:16,file:"icons/ic_16_uzb_teilgenehmigt1_white.svg"},uzb_teilgenehmigt2_white:{size:16,file:"icons/ic_16_uzb_teilgenehmigt2_white.svg"},uzb_ueberziehungsdetails_white:{size:32,file:"icons/ic_32_uzb_ueberziehungsdetails_white.svg"},uzb_usergroup_white:{size:32,file:"icons/ic_32_uzb_usergroup_white.svg"},uzb_vordispositionsdetails_white:{size:32,file:"icons/ic_32_uzb_vordispositionsdetails_white.svg"},uzb_wiederholen_white:{size:16,file:"icons/ic_16_uzb_wiederholen_white.svg"},uzb_zuklappen_white:{size:32,file:"icons/bt_32_uzb_zuklappen_white.svg"},uzb_zurueckstellen_white:{size:16,file:"icons/ic_16_uzb_zurueckstellen_white.svg"},uzb_zwangsdruck_white:{size:16,file:"icons/ic_16_uzb_zwangsdruck_white.svg"},variantenwechsel:{size:32,file:"icons/ic_32_variantenwechsel.svg",color:"widgetFgColor"},vds:{size:32,file:"icons/ic_32_vds.svg"},verkauf_kontokarte:{size:32,file:"icons/ic_32_verkauf_kontokarte.svg",color:"widgetFgColor"},vermoegen:{size:32,file:"icons/ic_32_vermoegen.svg",color:"widgetFgColor"},vermoegen_fremd:{size:32,file:"icons/ic_32_vermoegen_fremd.svg",color:"widgetFgColor"},vermoegen_giro:{size:32,file:"icons/ic_32_vermoegen_giro.svg",color:"darkgrey"},vertrag:{size:16,file:"icons/ic_16_vertrag.svg"},vertragsaenderung:{size:32,file:"icons/ic_32_vertragsaenderung.svg",color:"widgetFgColor"},vertragswerte:{size:32,file:"icons/ic_32_vertragswerte.svg",color:"widgetFgColor"},verwahrentgelt_hoechstgrenzenverbund:{size:32,file:"icons/ic_32_verwahrentgelt_hoechstgrenzenverbund.svg",color:"widgetFgColor"},verwerfen:{size:16,file:"icons/ic_16_verwerfen.svg"},virtuellekreditkarte:{size:32,file:"icons/ic_32_virtuellekreditkarte.svg",color:"widgetFgColor"},vollmacht:{size:32,file:"icons/ic_32_vollmacht.svg",color:"widgetFgColor"},vordispositionsvorgaenge:{size:32,file:"icons/ic_32_vordispositionsvorgaenge.svg",color:"darkgrey"},vorgangssuche:{size:12,file:"icons/ic_vorgangssuche.svg"},warning:{size:16,file:"icons/ic_16_warning.svg"},warning_red_:{size:16,file:"icons/ic_16_warning_red_.svg"},warnsignale_dot_gelb:{size:32,file:"icons/ic_32_warnsignale_dot.svg",color:"yellow"},warnsignale_dot_gruen:{size:32,file:"icons/ic_32_warnsignale_dot.svg",color:"green"},warnsignale_dot_rot:{size:32,file:"icons/ic_32_warnsignale_dot.svg",color:"red"},warnung:{size:64,file:"icons/ic_64_warnung.svg"},weiter:{size:24,file:"icons/bt_24_weiter.svg"},weiter2:{size:24,file:"icons/bt_24_weiter2.svg"},weiter_inaktiv:{size:24,file:"icons/bt_24_weiter_inaktiv.svg"},weltkugel:{size:12,file:"icons/ic_12_weltkugel.svg"},wiederherstellen:{size:24,file:"icons/bt_24_wiederherstellen.svg"},ziel:{size:32,file:"icons/ic_32_ziel.svg",color:"darkgrey"},ziele:{size:96,file:"icons/ic_96_ziele.svg"},ziele_fahrzeug:{size:32,file:"icons/ic_32_ziele_Fahrzeug.svg",color:"darkgrey"},ziele_absicherungsonstiges:{size:32,file:"icons/ic_32_ziele_absicherungsonstiges.svg",color:"darkgrey"},ziele_altersvorsorge:{size:32,file:"icons/ic_32_ziele_altersvorsorge.svg",color:"darkgrey"},ziele_altersvorsorge_sonstiges:{size:32,file:"icons/ic_32_ziele_altersvorsorge_sonstiges.svg",color:"darkgrey"},ziele_fahrzeugabsicherung:{size:32,file:"icons/ic_32_ziele_fahrzeugabsicherung.svg",color:"darkgrey"},ziele_hausabsicherung:{size:32,file:"icons/ic_32_ziele_hausabsicherung.svg",color:"darkgrey"},ziele_hohe_rendite:{size:32,file:"icons/ic_32_ziele_hohe_rendite.svg",color:"darkgrey"},ziele_immobilien:{size:32,file:"icons/ic_32_ziele_immobilien.svg",color:"darkgrey"},ziele_personenabsicherung:{size:32,file:"icons/ic_32_ziele_personenabsicherung.svg",color:"darkgrey"},ziele_service_liquiditaet:{size:32,file:"icons/ic_32_ziele_service_liquiditaet.svg",color:"darkgrey"},ziele_sichere_geldanlage:{size:32,file:"icons/ic_32_ziele_sichere_geldanlage.svg",color:"darkgrey"},ziele_sonstiges:{size:32,file:"icons/ic_32_ziele_sonstiges.svg",color:"darkgrey"},ziele_steuern_sparen:{size:32,file:"icons/ic_32_ziele_steuern_sparen.svg",color:"darkgrey"},ziele_urlaub:{size:32,file:"icons/ic_32_ziele_urlaub.svg",color:"darkgrey"},ziele_vermoegen_sonstiges:{size:32,file:"icons/ic_32_ziele_vermoegen_sonstiges.svg",color:"darkgrey"},ziele_wohnungseinrichtung:{size:32,file:"icons/ic_32_ziele_wohnungseinrichtung.svg",color:"darkgrey"},zinsprolongation:{size:32,file:"icons/ic_32_zinsprolongation.svg"},zurueck:{size:24,file:"icons/bt_24_zurueck.svg"},zurueck2:{size:24,file:"icons/bt_24_zurueck2.svg"},zurueck_inaktiv:{size:24,file:"icons/bt_24_zurueck_inaktiv.svg"},zuruecksetzen_16:{size:16},zuruecksetzen:{size:24,file:"icons/bt_24_zuruecksetzen.svg"},zusatzvertraegepassiv:{size:32,file:"icons/ic_32_zusatzvertraegepassiv.svg",color:"widgetFgColor"},zweiter_antragsteller:{size:32,file:"icons/ic_32_zweiter_antragsteller.svg",color:"widgetFgColor"},hint_help:{size:24,file:"icons/iconset_hint.svg#ospm_svg_symbol_hint_help"},hint_info:{size:24,file:"icons/iconset_hint.svg#ospm_svg_symbol_hint_info"},hint_hide:{size:24,file:"icons/iconset_hint.svg#ospm_svg_symbol_hint_hide"},abruf_buergschaft:{size:32,file:"icons/ic_32_abruf_buergschaft.svg",color:"widgetFgColor"},betreuung:{size:32,file:"icons/ic_32_betreuung.svg",color:"widgetFgColor"},einzelproduktberatung:{size:32,file:"icons/ic_32_einzelproduktberatung.svg",color:"widgetFgColor"},gfk:{size:32,file:"icons/ic_32_gfk.svg",color:"widgetFgColor"},investitionskredit:{size:32,file:"icons/ic_32_investitionskredit.svg",color:"widgetFgColor"},kontokorrentkredit:{size:32,file:"icons/ic_32_kontokorrentkredit.svg",color:"widgetFgColor"},lebensgemeinschaft:{size:32,file:"icons/ic_32_lebensgemeinschaft.svg",color:"widgetFgColor"},risiken_absichern:{size:32,file:"icons/ic_32_risiken_absichern.svg",color:"widgetFgColor"},trennung_scheidung:{size:32,file:"icons/ic_32_trennung_scheidung.svg",color:"widgetFgColor"},"1822_direkt":{size:32,file:"icons/ic_32_1822_direkt.svg",color:"darkgrey"},blb_bremer_lb:{size:32,file:"icons/ic_32_blb_bremer_lb.svg",color:"darkgrey"},bw_bank:{size:32,file:"icons/ic_32_bw_bank.svg",color:"darkgrey"},comdirect:{size:32,file:"icons/ic_32_comdirect.svg",color:"darkgrey"},commerzbank:{size:32,file:"icons/ic_32_commerzbank.svg",color:"darkgrey"},consorsbank:{size:32,file:"icons/ic_32_consorsbank.svg",color:"darkgrey"},deka_institut:{size:32,file:"icons/ic_32_deka_institut.svg",color:"darkgrey"},deutsche_bank:{size:32,file:"icons/ic_32_deutsche_bank.svg",color:"darkgrey"},dkb:{size:32,file:"icons/ic_32_dkb.svg",color:"darkgrey"},feuersozietaet:{size:32,file:"icons/ic_32_feuersozietaet.svg"},gothaer:{size:32,file:"icons/ic_32_gothaer.svg",color:"darkgrey"},ing_diba:{size:32,file:"icons/ic_32_ing_diba.svg",color:"darkgrey"},institut_nicht_unterstuetzt:{size:32,file:"icons/ic_32_institut_nicht_unterstuetzt.svg",color:"darkgrey"},lbs:{size:32,file:"icons/ic_32_lbs.svg",color:"darkgrey"},lippische_landesbrandkasse:{size:32,file:"icons/ic_32_lippische_landesbrandkasse.svg",color:"darkgrey"},netbank:{size:32,file:"icons/ic_32_netbank.svg",color:"darkgrey"},neue_leben_versicherung:{size:32,file:"icons/ic_32_neue_leben_versicherung.svg",color:"darkgrey"},norisbank:{size:32,file:"icons/ic_32_norisbank.svg",color:"darkgrey"},oeffentliche_versicherungen_braunschweig:{size:32,file:"icons/ic_32_oeffentliche_versicherungen_braunschweig.svg",color:"darkgrey"},oeffentliche_versicherungen_bremen:{size:32,file:"icons/ic_32_oeffentliche_versicherungen_bremen.svg",color:"darkgrey"},oeffentliche_versicherungen_oldenburg_oevo:{size:32,file:"icons/ic_32_oeffentliche_versicherungen_oldenburg_oevo.svg",color:"darkgrey"},oesa:{size:32,file:"icons/ic_32_oesa.svg",color:"darkgrey"},ostfriesische_landschaftliche_brandkasse:{size:32,file:"icons/ic_32_ostfriesische_landschaftliche_brandkasse.svg",color:"darkgrey"},paypal:{size:32,file:"icons/ic_32_paypal.svg",color:"darkgrey"},postbank:{size:32,file:"icons/ic_32_postbank.svg",color:"darkgrey"},provinzial_nord:{size:32,file:"icons/ic_32_provinzial_nord.svg",color:"darkgrey"},provinzial_rheinland:{size:32,file:"icons/ic_32_provinzial_rheinland.svg",color:"darkgrey"},provinzial_westfaelische:{size:32,file:"icons/ic_32_provinzial_westfaelische.svg",color:"darkgrey"},psd_bank:{size:32,file:"icons/ic_32_psd_bank.svg",color:"darkgrey"},saarland_versicherung:{size:32,file:"icons/ic_32_saarland_versicherungen.svg"},saarland_versicherungen:{size:32,file:"icons/ic_32_saarland_versicherungen.svg"},saar_lb:{size:32,file:"icons/ic_32_saar_lb.svg",color:"darkgrey"},spardabank:{size:32,file:"icons/ic_32_spardabank.svg",color:"darkgrey"},sparkasse:{size:32,file:"icons/ic_32_sparkasse.svg",color:"darkgrey"},sparkassen_versicherung_sachsen:{size:32,file:"icons/ic_32_sparkassen_versicherung_sachsen.svg",color:"darkgrey"},s_direktversicherung:{size:32,file:"icons/ic_32_s_direktversicherung.svg",color:"darkgrey"},s_versicherung:{size:32,file:"icons/ic_32_s_versicherung.svg",color:"darkgrey"},uni_credit:{size:32,file:"icons/ic_32_uni_credit.svg",color:"darkgrey"},versicherungsgruppe_hannover:{size:32,file:"icons/ic_32_versicherungsgruppe_hannover.svg",color:"darkgrey"},versicherungskammer_bayern:{size:32,file:"icons/ic_32_versicherungskammer_bayern.svg"},volksbank_raiffeisenbanken:{size:32,file:"icons/ic_32_volksbank_raiffeisenbanken.svg",color:"darkgrey"},weberbank:{size:32,file:"icons/ic_32_weberbank.svg",color:"darkgrey"},ziele_bildung:{size:32,file:"icons/ic_32_ziele_bildung.svg",color:"darkgrey"},ziele_dritte_person:{size:32,file:"icons/ic_32_ziele_dritte_person.svg",color:"darkgrey"},ziele_gesundheit:{size:32,file:"icons/ic_32_ziele_gesundheit.svg",color:"darkgrey"},ziele_modernisierung:{size:32,file:"icons/ic_32_ziele_modernisierung.svg",color:"darkgrey"},ziele_nachlass_vollmacht:{size:32,file:"icons/ic_32_ziele_nachlass_vollmacht.svg",color:"darkgrey"},historische_sichten_gee:{size:32,file:"icons/ic_32_historische_sichten_gee.svg",color:"widgetFgColor"},immobilien:{size:32,file:"icons/ic_32_immobilien.svg",color:"widgetFgColor"},kundenuebersicht_fk:{size:32,file:"icons/ic_32_kundenuebersicht_fk.svg",color:"widgetFgColor"},nbm_fkp:{size:32,file:"icons/ic_32_nbm_fkp.svg",color:"widgetFgColor"},wertpapier_sparplaene:{size:32,file:"icons/ic_32_wertpapier_sparplaene.svg",color:"widgetFgColor"},wphg_stammdaten:{size:32,file:"icons/ic_32_wphg_stammdaten.svg",color:"widgetFgColor"},wp_cockpit:{size:32,file:"icons/ic_32_wp_cockpit.svg",color:"widgetFgColor"},standard:{size:32,file:"icons/ic_32_standard.svg",color:"widgetFgColor"},deka_riester_fix:{size:32,file:"icons/ic_32_deka_riester_fix.svg",color:"widgetFgColor"},deka_vl_fix:{size:32,file:"icons/ic_32_deka_vl_fix.svg",color:"widgetFgColor"},elternvollmacht:{size:32,file:"icons/ic_32_elternvollmacht.svg",color:"widgetFgColor"},epostfach:{size:32,file:"icons/ic_32_epostfach.svg",color:"widgetFgColor"},geschaeftskunden_check:{size:32,file:"icons/ic_32_geschaeftskunden_check.svg",color:"widgetFgColor"},kundenuebersicht_berater:{size:32,file:"icons/ic_32_kundenuebersicht_berater.svg",color:"widgetFgColor"},kundenuebersicht_fk_berater:{size:32,file:"icons/ic_32_kundenuebersicht_fk_berater.svg",color:"widgetFgColor"},kundenuebersicht_fk_isp:{size:32,file:"icons/ic_32_kundenuebersicht_fk_isp.svg",color:"widgetFgColor"},kundenuebersicht_isp:{size:32,file:"icons/ic_32_kundenuebersicht_isp.svg",color:"widgetFgColor"},nachlass:{size:32,file:"icons/ic_32_nachlass.svg",color:"widgetFgColor"},rahmenkredit:{size:32,file:"icons/ic_32_rahmenkredit.svg",color:"widgetFgColor"},scp_fk:{size:32,file:"icons/ic_32_scp_fk.svg",color:"widgetFgColor"},deutsche_leasing:{size:32,file:"icons/ic_32_deutsche_leasing.svg"},sv:{size:32,file:"icons/ic_32_sv.svg"},loeschen_small:{size:16,file:"icons/ic_16_loeschen.svg",color:"widgetFgColor"},loeschen_small_highlight:{size:16,file:"icons/ic_16_loeschen_highlight.svg",color:"widgetFgColor"},loeschen_highlight:{size:24,file:"icons/ic_24_loeschen_highlight.svg",color:"widgetFgColor"},bescheinigungen:{size:32,file:"icons/ic_32_bescheinigungen.svg",color:"widgetFgColor"},lastschriftmandate:{size:32,file:"icons/ic_32_lastschriftmandate.svg",color:"widgetFgColor"},legitimation_dokument:{size:32,file:"icons/ic_32_legitimation_dokument.svg",color:"darkgrey"},legitimation_dokument_hauptlegitimation:{size:32,file:"icons/ic_32_legitimation_dokument_hauptlegitimation.svg",color:"darkgrey"},"s-broker":{size:32,file:"icons/ic_32_s-broker.svg"},konto_hinzufuegen:{size:32,file:"icons/ic_32_konto_hinzufuegen.svg",color:"widgetFgColor"},notification_entsperren:{size:64,file:"icons/ic_64_notification_entsperren.svg",color:"widgetFgColor"},notification_loeschen:{size:64,file:"icons/ic_64_notification_loeschen.svg",color:"widgetFgColor"},notification_sperren:{size:64,file:"icons/ic_64_notification_sperren.svg",color:"widgetFgColor"},notification_zuruecksetzen:{size:64,file:"icons/ic_64_notification_zuruecksetzen.svg",color:"widgetFgColor"},anwendungssuche_delete_focus:{size:null,file:"icons/ic_anwendungssuche_delete_focus.svg",color:"widgetFgColor"},anwendungssuche_delete_grey:{size:null,file:"icons/ic_anwendungssuche_delete_grey.svg"},anwendungssuche_lupe_focus:{size:null,file:"icons/ic_anwendungssuche_lupe_focus.svg"},anwendungssuche_lupe:{size:null,file:"icons/ic_anwendungssuche_lupe.svg"},finanzanalyse:{size:32,file:"icons/ic_32_finanzanalyse.svg",color:"widgetFgColor"},kontowechsel_bearbeiten:{size:32,file:"icons/ic_32_kontowechsel_bearbeiten.svg",color:"widgetFgColor"},mehrwaehrungsauftrag:{size:32,file:"icons/ic_32_mehrwaehrungsauftrag.svg",color:"widgetFgColor"},orderbuch:{size:32,file:"icons/ic_32_orderbuch.svg",color:"widgetFgColor"},"privatkredit-plus":{size:32,file:"icons/ic_32_privatkredit-plus.svg",color:"widgetFgColor"},produktneutrale_foerderberatung:{size:32,file:"icons/ic_32_produktneutrale_foerderberatung.svg",color:"widgetFgColor"},researchpartnerinformationen:{size:32,file:"icons/ic_32_researchpartnerinformationen.svg",color:"widgetFgColor"},solit:{size:32,file:"icons/ic_32_solit.svg",color:"widgetFgColor"},haushaltsrechnung:{size:32,file:"icons/ic_32_haushaltsrechnung.svg",color:"widgetFgColor"},standard_administration:{size:32,file:"icons/ic_32_standard_administration.svg",color:"widgetFgColor"},standard_bewerbermanagement:{size:32,file:"icons/ic_32_standard_bewerbermanagement.svg",color:"widgetFgColor"},"standard_e-learning":{size:32,file:"icons/ic_32_standard_e-learning.svg",color:"widgetFgColor"},standard_externedienstleister:{size:32,file:"icons/ic_32_standard_externedienstleister.svg",color:"widgetFgColor"},standard_forum:{size:32,file:"icons/ic_32_standard_forum.svg",color:"widgetFgColor"},standard_handbuch:{size:32,file:"icons/ic_32_standard_handbuch.svg",color:"widgetFgColor"},standard_hilfe:{size:32,file:"icons/ic_32_standard_hilfe.svg",color:"widgetFgColor"},standard_immobilien:{size:32,file:"icons/ic_32_standard_immobilien.svg",color:"widgetFgColor"},standard_information:{size:32,file:"icons/ic_32_standard_information.svg",color:"widgetFgColor"},standard_internet:{size:32,file:"icons/ic_32_standard_internet.svg",color:"widgetFgColor"},standard_intranet:{size:32,file:"icons/ic_32_standard_intranet.svg",color:"widgetFgColor"},standard_isp:{size:32,file:"icons/ic_32_standard_isp.svg",color:"widgetFgColor"},standard_legal:{size:32,file:"icons/ic_32_standard_legal.svg",color:"widgetFgColor"},standard_link:{size:32,file:"icons/ic_32_standard_link.svg",color:"widgetFgColor"},standard_onlinebanking:{size:32,file:"icons/ic_32_standard_onlinebanking.svg",color:"widgetFgColor"},standard_pfaendung:{size:32,file:"icons/ic_32_standard_pfaendung.svg",color:"widgetFgColor"},standard_rechner:{size:32,file:"icons/ic_32_standard_rechner.svg",color:"widgetFgColor"},standard_reporting:{size:32,file:"icons/ic_32_standard_reporting.svg",color:"widgetFgColor"},standard_stoerungsmeldung:{size:32,file:"icons/ic_32_standard_stoerungsmeldung.svg",color:"widgetFgColor"},standard_telefonbuch:{size:32,file:"icons/ic_32_standard_telefonbuch.svg",color:"widgetFgColor"},standard_zeiterfassung:{size:32,file:"icons/ic_32_standard_zeiterfassung.svg",color:"widgetFgColor"},wohnsitz:{size:32,file:"icons/ic_32_wohnsitz.svg",color:"darkgrey"},wohnsitz_hauptkontakt:{size:32,file:"icons/ic_32_wohnsitz_hauptkontakt.svg",color:"darkgrey"},direkt1822:{size:32,file:"icons/ic_32_1822_direkt.svg",color:"darkgrey"},bremerlb:{size:32,file:"icons/ic_32_blb_bremer_lb.svg",color:"darkgrey"},bwbank:{size:32,file:"icons/ic_32_bw_bank.svg",color:"darkgrey"},consors:{size:32,file:"icons/ic_32_consorsbank.svg",color:"darkgrey"},vp_deka:{size:32,file:"icons/ic_32_deka_institut.svg",color:"darkgrey"},deutschebank:{size:32,file:"icons/ic_32_deutsche_bank.svg",color:"darkgrey"},vp_fsbb:{size:32,file:"icons/ic_32_feuersozietaet.svg"},fremdbank:{size:32,file:"icons/ic_32_fremde_vereinbarungen.svg",color:"darkgrey"},vp_gothaer:{size:32,file:"icons/ic_32_gothaer.svg",color:"darkgrey"},ingdiba:{size:32,file:"icons/ic_32_ing_diba.svg",color:"darkgrey"},unsupported:{size:32,file:"icons/ic_32_institut_nicht_unterstuetzt.svg",color:"darkgrey"},vp_lbs:{size:32,file:"icons/ic_32_lbs.svg",color:"darkgrey"},vp_llva:{size:32,file:"icons/ic_32_lippische_landesbrandkasse.svg",color:"darkgrey"},vp_neueleben:{size:32,file:"icons/ic_32_neue_leben_versicherung.svg",color:"darkgrey"},vp_oevbs:{size:32,file:"icons/ic_32_oeffentliche_versicherungen_braunschweig.svg",color:"darkgrey"},vp_oevb:{size:32,file:"icons/ic_32_oeffentliche_versicherungen_bremen.svg",color:"darkgrey"},vp_oevo:{size:32,file:"icons/ic_32_oeffentliche_versicherungen_oldenburg_oevo.svg",color:"darkgrey"},vp_oesa:{size:32,file:"icons/ic_32_oesa.svg",color:"darkgrey"},vp_olbk:{size:32,file:"icons/ic_32_ostfriesische_landschaftliche_brandkasse.svg",color:"darkgrey"},vp_paydirekt:{size:32,file:"icons/ic_32_paydirekt_mbf.svg",color:"darkgrey"},vp_provinzial_nw:{size:32,file:"icons/ic_32_provinzial_nord.svg",color:"darkgrey"},vp_provinzial_rl:{size:32,file:"icons/ic_32_provinzial_rheinland.svg",color:"darkgrey"},vp_provinzial_wf:{size:32,file:"icons/ic_32_provinzial_westfaelische.svg",color:"darkgrey"},psdbank:{size:32,file:"icons/ic_32_psd_bank.svg",color:"darkgrey"},vp_saarv:{size:32,file:"icons/ic_32_saarland_versicherungen.svg"},saarlb:{size:32,file:"icons/ic_32_saar_lb.svg",color:"darkgrey"},vp_svs:{size:32,file:"icons/ic_32_sparkassen_versicherung_sachsen.svg",color:"darkgrey"},vp_sdirektv:{size:32,file:"icons/ic_32_s_direktversicherung.svg",color:"darkgrey"},vp_spension:{size:32,file:"icons/ic_32_s_pensionsmanagement.svg",color:"darkgrey"},vp_sv:{size:32,file:"icons/ic_32_s_versicherung.svg",color:"darkgrey"},hvb:{size:32,file:"icons/ic_32_uni_credit.svg",color:"darkgrey"},vp_vgh:{size:32,file:"icons/ic_32_versicherungsgruppe_hannover.svg",color:"darkgrey"},vp_vkb:{size:32,file:"icons/ic_32_versicherungskammer_bayern.svg"},volksbank:{size:32,file:"icons/ic_32_volksbank_raiffeisenbanken.svg",color:"darkgrey"},alarmclock_m:{file:"icons/ic_alarmclock_m.svg"},alarmclock_update_m:{file:"icons/ic_alarmclock_update_m.svg"},armchair_m:{file:"icons/ic_armchair_m.svg"},arrow_subitem_m:{file:"icons/ic_arrow_subitem_m.svg"},arrow_subitem_s:{file:"icons/ic_arrow_subitem_s.svg"},asklepios_wand_m:{file:"icons/ic_asklepios_wand_m.svg"},bachelor_cap_m:{file:"icons/ic_bachelor_cap_m.svg"},back_arrow_circle_m:{file:"icons/ic_back_arrow_circle_m.svg"},back_circle_s:{file:"icons/ic_back_circle_s.svg"},back_s:{file:"icons/ic_back_s.svg"},two_back_s:{file:"icons/ic_two_back_s.svg"},bag_m:{file:"icons/ic_bag_m.svg"},bank_m:{file:"icons/ic_bank_m.svg"},bar_chart_endless_badge_m:{file:"icons/ic_bar_chart_endless_badge_m.svg"},calendar_s:{file:"icons/ic_calendar_s.svg"},cancel_circle_m:{file:"icons/ic_cancel_circle_m.svg"},cancel_circle_s:{file:"icons/ic_cancel_circle_s.svg"},cancel_m:{file:"icons/ic_cancel_m.svg"},cancel_s:{file:"icons/ic_cancel_s.svg"},card_color_plus_circle_m:{file:"icons/ic_card_color_plus_circle_m.svg"},card_m:{file:"icons/ic_card_m.svg"},card_plus_circle_m:{file:"icons/ic_card_plus_circle_m.svg"},car_m:{file:"icons/ic_car_m.svg"},car_tool_badge_m:{file:"icons/ic_car_tool_badge_m.svg"},chart_flow_m:{file:"icons/ic_chart_flow_m.svg"},chart_upward_m:{file:"icons/ic_chart_upward_m.svg"},checkbox_filled_m:{file:"icons/ic_checkbox_filled_m.svg"},checkbox_filled_s:{file:"icons/ic_checkbox_filled_s.svg"},checkbox_m:{file:"icons/ic_checkbox_m.svg"},checkbox_s:{file:"icons/ic_checkbox_s.svg"},check_circle_m:{file:"icons/ic_check_circle_m.svg"},check_circle_s:{file:"icons/ic_check_circle_s.svg"},check_m:{file:"icons/ic_check_m.svg"},check_s:{file:"icons/ic_check_s.svg"},child_m:{file:"icons/ic_child_m.svg"},chiptan_m:{file:"icons/ic_chiptan_m.svg"},circle_m:{file:"icons/ic_circle_m.svg"},circle_s:{file:"icons/ic_circle_s.svg"},clock_m:{file:"icons/ic_clock_m.svg"},clock_s:{file:"icons/ic_clock_s.svg"},company_m:{file:"icons/ic_company_m.svg"},company_s:{file:"icons/ic_company_s.svg"},date_from_m:{file:"icons/ic_date_from_m.svg"},date_from_s:{file:"icons/ic_date_from_s.svg"},date_to_m:{file:"icons/ic_date_to_m.svg"},date_to_s:{file:"icons/ic_date_to_s.svg"},deka_short_m:{file:"icons/ic_deka_short_m.svg"},delete_m:{file:"icons/ic_delete_m.svg"},delete_s:{file:"icons/ic_delete_s.svg"},diamond_filled_s:{file:"icons/ic_diamond_filled_s.svg"},diamond_s:{file:"icons/ic_diamond_s.svg"},document_check_m:{file:"icons/ic_document_check_m.svg"},document_edit_m:{file:"icons/ic_document_edit_m.svg"},document_m:{file:"icons/ic_document_m.svg"},document_magnifier_m:{file:"icons/ic_document_magnifier_m.svg"},document_magnifier_s:{file:"icons/ic_document_magnifier_s.svg"},document_pdf_m:{file:"icons/ic_document_pdf_m.svg"},document_pdf_s:{file:"icons/ic_document_pdf_s.svg"},document_s:{file:"icons/ic_document_s.svg"},dot_m:{file:"icons/ic_dot_m.svg"},dot_s:{file:"icons/ic_dot_s.svg"},download_m:{file:"icons/ic_download_m.svg"},download_s:{file:"icons/ic_download_s.svg"},down_arrow_circle_s:{file:"icons/ic_down_arrow_circle_s.svg"},down_circle_s:{file:"icons/ic_down_circle_s.svg"},down_s:{file:"icons/ic_down_s.svg"},edit_s:{file:"icons/ic_edit_s.svg"},email_m:{file:"icons/ic_email_m.svg"},email_star_badge_m:{file:"icons/ic_email_star_badge_m.svg"},error_severe_m:{file:"icons/ic_error_severe_m.svg"},eurocoin_m:{file:"icons/ic_eurocoin_m.svg"},eurocoin_s:{file:"icons/ic_eurocoin_s.svg"},exchange_m:{file:"icons/ic_exchange_m.svg"},exchange_s:{file:"icons/ic_exchange_s.svg"},exit_m:{file:"icons/ic_exit_m.svg"},eye_close_m:{file:"icons/ic_eye_close_m.svg"},eye_close_s:{file:"icons/ic_eye_close_s.svg"},eye_m:{file:"icons/ic_eye_m.svg"},eye_s:{file:"icons/ic_eye_s.svg"},fax_m:{file:"icons/ic_fax_m.svg"},fax_star_badge_m:{file:"icons/ic_fax_star_badge_m.svg"},filter_m:{file:"icons/ic_filter_m.svg"},filter_s:{file:"icons/ic_filter_s.svg"},flag_m:{file:"icons/ic_flag_m.svg"},form_edit_m:{file:"icons/ic_form_edit_m.svg"},form_edit_s:{file:"icons/ic_form_edit_s.svg"},health_m:{file:"icons/ic_health_m.svg"},help_circle_s:{file:"icons/ic_help_circle_s.svg"},hint_circle_s:{file:"icons/ic_hint_circle_s.svg"},hint_square_m:{file:"icons/ic_hint_square_m.svg"},house_coin_stack_m:{file:"icons/ic_house_coin_stack_m.svg"},house_star_badge_m:{file:"icons/ic_house_star_badge_m.svg"},house_tool_badge_m:{file:"icons/ic_house_tool_badge_m.svg"},id_card_star_badge_m:{file:"icons/ic_id_card_star_badge_m.svg"},image_medium_m:{file:"icons/ic_image_medium_m.svg"},image_small_m:{file:"icons/ic_image_small_m.svg"},image_thumbnail_m:{file:"icons/ic_image_thumbnail_m.svg"},info_circle_s:{file:"icons/ic_info_circle_s.svg"},info_circle_m:{file:"icons/ic_info_circle_m.svg"},in_tray_empty_m:{file:"icons/ic_in_tray_empty_m.svg"},lamp_m:{file:"icons/ic_lamp_m.svg"},lifebuoy_m:{file:"icons/ic_lifebuoy_m.svg"},lightbulb_m:{file:"icons/ic_lightbulb_m.svg"},lightbulb_s:{file:"icons/ic_lightbulb_s.svg"},list_m:{file:"icons/ic_list_m.svg"},locationpin_m:{file:"icons/ic_locationpin_m.svg"},lock_s:{file:"icons/ic_lock_s.svg"},magnifier_m:{file:"icons/ic_magnifier_m.svg"},minus_circle_s:{file:"icons/ic_minus_circle_s.svg"},minus_s:{file:"icons/ic_minus_s.svg"},mobile_m:{file:"icons/ic_mobile_m.svg"},mobile_star_badge_m:{file:"icons/ic_mobile_star_badge_m.svg"},more_m:{file:"icons/ic_more_m.svg"},next_arrow_circle_m:{file:"icons/ic_next_arrow_circle_m.svg"},next_circle_s:{file:"icons/ic_next_circle_s.svg"},next_m:{file:"icons/ic_next_m.svg"},next_s:{file:"icons/ic_next_s.svg"},two_next_s:{file:"icons/ic_two_next_s.svg"},number_pad_m:{file:"icons/ic_number_pad_m.svg"},personal_insurance_m:{file:"icons/ic_personal_insurance_m.svg"},phone_m:{file:"icons/ic_phone_m.svg"},phone_star_badge_m:{file:"icons/ic_phone_star_badge_m.svg"},placeholder_s:{file:"icons/ic_placeholder_s.svg"},plane_m:{file:"icons/ic_plane_m.svg"},plus_circle_s:{file:"icons/ic_plus_circle_s.svg"},plus_s:{file:"icons/ic_plus_s.svg"},print_m:{file:"icons/ic_print_m.svg"},print_s:{file:"icons/ic_print_s.svg"},radio_selected_s:{file:"icons/ic_radio_selected_s.svg"},recommendation_s:{file:"icons/ic_recommendation_s.svg"},reset_m:{file:"icons/ic_reset_m.svg"},reset_s:{file:"icons/ic_reset_s.svg"},safe_settings_m:{file:"icons/ic_safe_settings_m.svg"},save_m:{file:"icons/ic_save_m.svg"},savings_m:{file:"icons/ic_savings_m.svg"},scale_m:{file:"icons/ic_scale_m.svg"},settings_m:{file:"icons/ic_settings_m.svg"},settings_s:{file:"icons/ic_settings_s.svg"},shield_check_m:{file:"icons/ic_shield_check_m.svg"},shield_half_m:{file:"icons/ic_shield_half_m.svg"},shoptag_m:{file:"icons/ic_shoptag_m.svg"},sparkasse_m:{file:"icons/ic_sparkasse_m.svg"},speechbubble_dots_m:{file:"icons/ic_speechbubble_dots_m.svg"},speechbubble_dots_s:{file:"icons/ic_speechbubble_dots_s.svg"},speechbubble_m:{file:"icons/ic_speechbubble_m.svg"},speechbubble_star_s:{file:"icons/ic_speechbubble_star_s.svg"},star_m:{file:"icons/ic_star_m.svg"},star_s:{file:"icons/ic_star_s.svg"},stock_m:{file:"icons/ic_stock_m.svg"},stop_m:{file:"icons/ic_stop_m.svg"},summing_s:{file:"icons/ic_summing_s.svg"},tally_sheet_m:{file:"icons/ic_tally_sheet_m.svg"},target_m:{file:"icons/ic_target_m.svg"},transfer_s:{file:"icons/ic_transfer_s.svg"},triangle_s:{file:"icons/ic_triangle_s.svg"},two_cards_m:{file:"icons/ic_two_cards_m.svg"},two_documents_m:{file:"icons/ic_two_documents_m.svg"},two_users_m:{file:"icons/ic_two_users_m.svg"},two_users_s:{file:"icons/ic_two_users_s.svg"},umbrella_m:{file:"icons/ic_umbrella_m.svg"},unlock_m:{file:"icons/ic_unlock_m.svg"},update_m:{file:"icons/ic_update_m.svg"},update_s:{file:"icons/ic_update_s.svg"},upload_m:{file:"icons/ic_upload_m.svg"},upload_s:{file:"icons/ic_upload_s.svg"},up_s:{file:"icons/ic_up_s.svg"},user_cancel_circle_m:{file:"icons/ic_user_cancel_circle_m.svg"},user_check_circle_m:{file:"icons/ic_user_check_circle_m.svg"},user_group_m:{file:"icons/ic_user_group_m.svg"},user_legal_m:{file:"icons/ic_user_legal_m.svg"},user_m:{file:"icons/ic_user_m.svg"},user_plus_circle_m:{file:"icons/ic_user_plus_circle_m.svg"},user_s:{file:"icons/ic_user_s.svg"},user_self_employed_s:{file:"icons/ic_user_self_employed_s.svg"},video_m:{file:"icons/ic_video_m.svg"},visiting_card_s:{file:"icons/ic_visiting_card_s.svg"},warning_m:{file:"icons/ic_warning_m.svg"},wedding_rings_m:{file:"icons/ic_wedding_rings_m.svg"},woman_legal_m:{file:"icons/ic_woman_legal_m.svg"},woman_m:{file:"icons/ic_woman_m.svg"},woman_s:{file:"icons/ic_woman_s.svg"},woman_self_employed_s:{file:"icons/ic_woman_self_employed_s.svg"},world_m:{file:"icons/ic_world_m.svg"},abacus_m:{file:"icons/ic_abacus_m.svg"},assets_euro_m:{file:"icons/ic_assets_euro_m.svg"},assets_filter_m:{file:"icons/ic_assets_filter_m.svg"},assets_pyramid_m:{file:"icons/ic_assets_pyramid_m.svg"},assets_tree_m:{file:"icons/ic_assets_tree_m.svg"},assets_two_pyramids_m:{file:"icons/ic_assets_two_pyramids_m.svg"},bag_company_m:{file:"icons/ic_bag_company_m.svg"},bag_user_m:{file:"icons/ic_bag_user_m.svg"},bank_update_edit_m:{file:"icons/ic_bank_update_edit_m.svg"},bank_update_m:{file:"icons/ic_bank_update_m.svg"},bar_almost_full_m:{file:"icons/ic_bar_almost_full_m.svg"},bench_m:{file:"icons/ic_bench_m.svg"},bill_m:{file:"icons/ic_bill_m.svg"},binder_update_m:{file:"icons/ic_binder_update_m.svg"},calculator_m:{file:"icons/ic_calculator_m.svg"},calendar_m:{file:"icons/ic_calendar_m.svg"},card_cancel_m:{file:"icons/ic_card_cancel_m.svg"},card_filled_m:{file:"icons/ic_card_filled_m.svg"},card_update_m:{file:"icons/ic_card_update_m.svg"},card_user_legal_m:{file:"icons/ic_card_user_legal_m.svg"},card_user_m:{file:"icons/ic_card_user_m.svg"},card_user_update_m:{file:"icons/ic_card_user_update_m.svg"},chart_bottom_filled_m:{file:"icons/ic_chart_bottom_filled_m.svg"},chart_downward_blue_m:{file:"icons/ic_chart_downward_blue_m.svg"},chart_downward_red_m:{file:"icons/ic_chart_downward_red_m.svg"},chart_m:{file:"icons/ic_chart_m.svg"},chart_top_filled_m:{file:"icons/ic_chart_top_filled_m.svg"},check_chain_m:{file:"icons/ic_check_chain_m.svg"},chess_horse_user_m:{file:"icons/ic_chess_horse_user_m.svg"},clipboard_card_m:{file:"icons/ic_clipboard_card_m.svg"},clipboard_checked_m:{file:"icons/ic_clipboard_checked_m.svg"},clipboard_company_m:{file:"icons/ic_clipboard_company_m.svg"},coin_stack_divide_m:{file:"icons/ic_coin_stack_divide_m.svg"},coin_stack_dots_m:{file:"icons/ic_coin_stack_dots_m.svg"},coin_stack_m:{file:"icons/ic_coin_stack_m.svg"},computer_m:{file:"icons/ic_computer_m.svg"},creditcard_filled_m:{file:"icons/ic_creditcard_filled_m.svg"},crossed_tools_m:{file:"icons/ic_crossed_tools_m.svg"},deka_m:{file:"icons/ic_deka_m.svg"},deutsche_leasing_m:{file:"icons/ic_deutsche_leasing_m.svg"},document_magnifier_check_m:{file:"icons/ic_document_magnifier_check_m.svg"},dwp_m:{file:"icons/ic_dwp_m.svg"},epostfach_m:{file:"icons/ic_epostfach_m.svg"},esafe_m:{file:"icons/ic_esafe_m.svg"},esignature_m:{file:"icons/ic_esignature_m.svg"},eurocoin_update_m:{file:"icons/ic_eurocoin_update_m.svg"},feuersozietaet_m:{file:"icons/ic_feuersozietaet_m.svg"},folder_company_isp_m:{file:"icons/ic_folder_company_isp_m.svg"},folder_company_m:{file:"icons/ic_folder_company_m.svg"},folder_company_staff_m:{file:"icons/ic_folder_company_staff_m.svg"},folder_deka_m:{file:"icons/ic_folder_deka_m.svg"},folder_euro_sign_m:{file:"icons/ic_folder_euro_sign_m.svg"},folder_user_isp_m:{file:"icons/ic_folder_user_isp_m.svg"},folder_user_m:{file:"icons/ic_folder_user_m.svg"},folder_user_staff_m:{file:"icons/ic_folder_user_staff_m.svg"},grave_m:{file:"icons/ic_grave_m.svg"},handshake_m:{file:"icons/ic_handshake_m.svg"},hand_coin_stack_m:{file:"icons/ic_hand_coin_stack_m.svg"},house_lbs_m:{file:"icons/ic_house_lbs_m.svg"},house_m:{file:"icons/ic_house_m.svg"},house_percent_sign_m:{file:"icons/ic_house_percent_sign_m.svg"},house_pyramid_m:{file:"icons/ic_house_fan_m.svg"},house_fan_m:{file:"icons/ic_house_fan_m.svg"},house_settings_m:{file:"icons/ic_house_settings_m.svg"},id_card_m:{file:"icons/ic_id_card_m.svg"},id_card_staff_m:{file:"icons/ic_id_card_staff_m.svg"},image_m:{file:"icons/ic_image_m.svg"},lock_m:{file:"icons/ic_lock_m.svg"},lock_warning_m:{file:"icons/ic_lock_warning_m.svg"},magnifier_coins_m:{file:"icons/ic_magnifier_coins_m.svg"},notepad_badge_m:{file:"icons/ic_notepad_badge_m.svg"},notepad_eurocoin_m:{file:"icons/ic_notepad_eurocoin_m.svg"},paydirekt_m:{file:"icons/ic_paydirekt_m.svg"},piggy_bank_m:{file:"icons/ic_piggy_bank_m.svg"},purse_m:{file:"icons/ic_purse_m.svg"},purse_plus_m:{file:"icons/ic_purse_plus_m.svg"},saarland_versicherungen_m:{file:"icons/ic_saarland_versicherungen_m.svg"},safe_deka_m:{file:"icons/ic_safe_deka_m.svg"},savings_lock_m:{file:"icons/ic_savings_lock_m.svg"},shamrock_m:{file:"icons/ic_shamrock_m.svg"},sheet_clock_m:{file:"icons/ic_sheet_clock_m.svg"},sheet_magnifier_info_m:{file:"icons/ic_sheet_magnifier_info_m.svg"},sheet_users_badge_m:{file:"icons/ic_sheet_users_badge_m.svg"},shield_m:{file:"icons/ic_shield_m.svg"},solit_m:{file:"icons/ic_solit_m.svg"},speechbubble_hint_m:{file:"icons/ic_speechbubble_hint_m.svg"},stair_arrow_badge_m:{file:"icons/ic_stair_arrow_badge_m.svg"},standard_arithmetik_operator_m:{file:"icons/ic_standard_arithmetik_operator_m.svg"},standard_banknote_m:{file:"icons/ic_standard_banknote_m.svg"},standard_company_building_m:{file:"icons/ic_standard_company_building_m.svg"},standard_computer_bachelor_cap_m:{file:"icons/ic_standard_computer_bachelor_cap_m.svg"},standard_computer_bank_m:{file:"icons/ic_standard_computer_bank_m.svg"},standard_computer_shield_m:{file:"icons/ic_standard_computer_shield_m.svg"},standard_hand_settings_m:{file:"icons/ic_standard_hand_settings_m.svg"},standard_help_circle_m:{file:"icons/ic_standard_help_circle_m.svg"},standard_information_circle_m:{file:"icons/ic_standard_information_circle_m.svg"},standard_internet_m:{file:"icons/ic_standard_internet_m.svg"},standard_intranet_m:{file:"icons/ic_standard_intranet_m.svg"},standard_isp_m:{file:"icons/ic_standard_isp_m.svg"},standard_legal_m:{file:"icons/ic_standard_legal_m.svg"},standard_notepad_phone_m:{file:"icons/ic_standard_notepad_phone_m.svg"},standard_request_m:{file:"icons/ic_standard_request_m.svg"},standard_sheet_arrow_m:{file:"icons/ic_standard_sheet_arrow_m.svg"},standard_stopwatch_m:{file:"icons/ic_standard_stopwatch_m.svg"},standard_two_speechbubbles_m:{file:"icons/ic_standard_two_speechbubbles_m.svg"},standard_users_divide_m:{file:"icons/ic_standard_users_divide_m.svg"},standard_user_settings_m:{file:"icons/ic_standard_user_settings_m.svg"},stock_badge_m:{file:"icons/ic_stock_badge_m.svg"},stock_bench_stopwatch_m:{file:"icons/ic_stock_bench_stopwatch_m.svg"},stock_company_stopwatch_m:{file:"icons/ic_stock_company_stopwatch_m.svg"},stock_update_m:{file:"icons/ic_stock_update_m.svg"},sv_m:{file:"icons/ic_sv_m.svg"},table_m:{file:"icons/ic_table_m.svg"},test_ger_m:{file:"icons/ic_test_ger_m.svg"},test_nbt_m:{file:"icons/ic_test_nbt_m.svg"},test_taw_m:{file:"icons/ic_test_taw_m.svg"},test_zdb_m:{file:"icons/ic_test_zdb_m.svg"},transfer_voucher_dollar_m:{file:"icons/ic_transfer_voucher_dollar_m.svg"},transfer_voucher_m:{file:"icons/ic_transfer_voucher_m.svg"},transfer_voucher_update_m:{file:"icons/ic_transfer_voucher_update_m.svg"},two_hands_coin_stack_m:{file:"icons/ic_two_hands_coin_stack_m.svg"},two_hearts_divided_m:{file:"icons/ic_two_hearts_divided_m.svg"},two_hearts_m:{file:"icons/ic_two_hearts_m.svg"},user_add_second_m:{file:"icons/ic_user_add_second_m.svg"},vds_m:{file:"icons/ic_vds_m.svg"},versicherungskammer_bayern_m:{file:"icons/ic_versicherungskammer_bayern_m.svg"},vollmacht_m:{file:"icons/ic_vollmacht_m.svg"},voucher_edit_m:{file:"icons/ic_voucher_edit_m.svg"},voucher_eurocoin_edit_m:{file:"icons/ic_voucher_eurocoin_edit_m.svg"},voucher_magnifier_check_m:{file:"icons/ic_voucher_magnifier_check_m.svg"},wp_cockpit_m:{file:"icons/ic_wp_cockpit_m.svg"},standard_hint_circle_m:{file:"icons/ic_standard_hint_circle_m.svg"},standard_notepad_info_m:{file:"icons/ic_standard_notepad_info_m.svg"},one_euro_coin_m:{file:"icons/ic_one_euro_coin_m.svg"},s_broker_m:{file:"icons/ic_s_broker_m.svg"},back_m:{file:"icons/ic_back_m.svg"},sandclock_m:{file:"icons/ic_sandclock_m.svg"},folder_m:{file:"icons/ic_folder_m.svg"},globe_m:{file:"icons/ic_globe_m.svg"},back_arrow_s:{file:"icons/ic_back_arrow_s.svg"},back_circle_m:{file:"icons/ic_back_circle_m.svg"},bw_m:{file:"icons/ic_bw_m.svg"},bw_s:{file:"icons/ic_bw_s.svg"},cancel_two_boxes_m:{file:"icons/ic_cancel_two_boxes_m.svg",color:"widgetFgColor"},magnifier_s:{file:"icons/ic_magnifier_s.svg"},menu_context_m:{file:"icons/ic_menu_context_m.svg"},menu_context_not_m:{file:"icons/ic_menu_context_not_m.svg"},menu_context_not_s:{file:"icons/ic_menu_context_not_s.svg"},menu_context_s:{file:"icons/ic_menu_context_s.svg"},menu_m:{file:"icons/ic_menu_m.svg"},menu_not_m:{file:"icons/ic_menu_not_m.svg"},menu_not_s:{file:"icons/ic_menu_not_s.svg"},menu_s:{file:"icons/ic_menu_s.svg"},mike_s:{file:"icons/ic_mike_s.svg"},minus_circle_m:{file:"icons/ic_minus_circle_m.svg"},multimenu_m:{file:"icons/ic_multimenu_m.svg"},multimenu_s:{file:"icons/ic_multimenu_s.svg"},next_arrow_s:{file:"icons/ic_next_arrow_s.svg"},next_circle_m:{file:"icons/ic_next_circle_m.svg"},oe_s:{file:"icons/ic_oe_s.svg"},on_m:{file:"icons/ic_on_m.svg"},on_s:{file:"icons/ic_on_s.svg"},plus_circle_m:{file:"icons/ic_plus_circle_m.svg"},present_s:{file:"icons/ic_present_s.svg"},progress_line_s:{file:"icons/ic_progress_line_s.svg"},progress_off_s:{file:"icons/ic_progress_off_s.svg"},progress_on_s:{file:"icons/ic_progress_on_s.svg"},save_s:{file:"icons/ic_save_s.svg"},speechbubble_not_m:{file:"icons/ic_speechbubble_not_m.svg"},speechbubble_not_s:{file:"icons/ic_speechbubble_not_s.svg"},speechbubble_s:{file:"icons/ic_speechbubble_s.svg"},splitting_arrow_s:{file:"icons/ic_splitting_arrow_s.svg"},"star_filled_m.svg":{file:"icons/ic_star_filled_m.svg.svg"},triangle_down_s:{file:"icons/ic_triangle_down_s.svg"},star_filled_m:{file:"icons/ic_star_filled_m.svg"},computer_sparkasse_mobile_m:{file:"icons/ic_computer_sparkasse_mobile_m.svg"},safe_plus_m:{file:"icons/ic_safe_plus_m.svg"},puzzle_m:{file:"icons/ic_puzzle_m.svg"},armchair_company_m:{file:"icons/ic_armchair_company_m.svg"},play_circle_m:{file:"icons/ic_play_circle_m.svg"},questionmark_s:{file:"icons/ic_questionmark_s.svg"},shop_shield_m:{file:"icons/ic_shop_shield_m.svg"},up_circle_s:{file:"icons/ic_up_circle_s.svg"},giropay_m:{file:"icons/ic_giropay_m.svg"},scan_m:{file:"icons/ic_scan_m.svg"},call_m:{file:"icons/ic_call_m.svg"},dots_circle_m:{file:"icons/ic_dots_circle_m.svg"},whatsapp_m:{file:"icons/ic_whatsapp_m.svg"},clock_arrow_around_m:{file:"icons/ic_clock_arrow_around_m.svg"},up_arrow_m:{file:"icons/ic_up_arrow_m.svg"},dots_circle_s:{file:"icons/ic_dots_circle_s.svg"},circles_in_progress_circle_four_m:{file:"icons/ic_circles_in_progress_circle_four_m.svg"},compass_m:{file:"icons/ic_compass_m.svg"},user_legal_document_check_m:{file:"icons/ic_user_legal_document_check_m.svg"},hansemerkur_m:{file:"icons/ic_hansemerkur_m.svg"},user_legal_s:{file:"icons/ic_user_legal_s.svg"},woman_legal_s:{file:"icons/ic_woman_legal_s.svg"},briefcase_user_m:{file:"icons/ic_briefcase_user_m.svg"},back_arrow_circle_s:{file:"icons/ic_back_arrow_circle_s.svg"},next_arrow_circle_s:{file:"icons/ic_next_arrow_circle_s.svg"},company_plus_m:{file:"icons/ic_company_plus_m.svg"},lbs_m:{file:"icons/ic_lbs_m.svg"},mail_open_at_m:{file:"icons/ic_mail_open_at_m.svg"},tower_m:{file:"icons/ic_tower_m.svg"},two_users_bank_arrows_m:{file:"icons/ic_two_users_bank_arrows_m.svg"},user_18_badge_m:{file:"icons/ic_user_18_badge_m.svg"},voucher_edit_lbs_m:{file:"icons/ic_voucher_edit_lbs_m.svg"},progress_circle_five_m:{file:"icons/ic_progress_circle_five_m.svg"},progress_circle_five_s:{file:"icons/ic_progress_circle_five_s.svg"},progress_circle_four_m:{file:"icons/ic_progress_circle_four_m.svg"},progress_circle_four_s:{file:"icons/ic_progress_circle_four_s.svg"},progress_circle_full_m:{file:"icons/ic_progress_circle_full_m.svg"},progress_circle_full_s:{file:"icons/ic_progress_circle_full_s.svg"},progress_circle_half_m:{file:"icons/ic_progress_circle_half_m.svg"},progress_circle_half_s:{file:"icons/ic_progress_circle_half_s.svg"},progress_circle_one_m:{file:"icons/ic_progress_circle_one_m.svg"},progress_circle_one_s:{file:"icons/ic_progress_circle_one_s.svg"},progress_circle_six_m:{file:"icons/ic_progress_circle_six_m.svg"},progress_circle_six_s:{file:"icons/ic_progress_circle_six_s.svg"},progress_circle_three_m:{file:"icons/ic_progress_circle_three_m.svg"},progress_circle_three_s:{file:"icons/ic_progress_circle_three_s.svg"},progress_circle_two_m:{file:"icons/ic_progress_circle_two_m.svg"},progress_circle_two_s:{file:"icons/ic_progress_circle_two_s.svg"},lighthouse_m:{file:"icons/ic_lighthouse_m.svg"},mail_open_m:{file:"icons/ic_mail_open_m.svg"},gold_m:{file:"icons/ic_gold_m.svg"},play_circle_s:{file:"icons/ic_play_circle_s.svg"},truck_m:{file:"icons/ic_truck_m.svg"},user_grave_m:{file:"icons/ic_user_grave_m.svg"},post_folder_m:{file:"icons/ic_post_folder_m.svg"},three_users_badge_bank_m:{file:"icons/ic_three_users_badge_bank_m.svg"},eurocoins_old_m:{file:"icons/ic_eurocoins_old_m.svg"},error_s:{file:"icons/ic_error_s.svg"},information_s:{file:"icons/ic_information_s.svg"},success_s:{file:"icons/ic_success_s.svg"},warning_filled_s:{file:"icons/ic_warning_filled_s.svg"},privates_finanzkonzept_m:{file:"icons/ic_privates_finanzkonzept_m.svg"},sheet_paragraph_m:{file:"icons/ic_sheet_paragraph_m.svg"},up_sort_arrow:{file:"icons/ic_up_sort_arrow.svg"},down_sort_arrow:{file:"icons/ic_down_sort_arrow.svg"},user_circle_info_m:{file:"icons/ic_user_circle_info_m.svg"},check_list_badge_user_m:{file:"icons/ic_check_list_badge_user_m.svg"},check_list_m:{file:"icons/ic_check_list_m.svg"},plus_circle_filled_s:{file:"icons/ic_plus_circle_filled_s.svg"},bookmark_s:{file:"icons/ic_bookmark_s.svg"},stats_arrow_up_m:{file:"icons/ic_stats_arrow_up_m.svg"},hand_user_m:{file:"icons/ic_hand_user_m.svg"},two_users_shield_badge_m:{file:"icons/ic_two_users_shield_badge_m.svg"},back_cancel_m:{file:"icons/ic_back_cancel_m.svg"},document_update_badge_m:{file:"icons/ic_document_update_badge_m.svg"},house_shield_badge_m:{file:"icons/ic_house_shield_badge_m.svg"},two_speechbubbles_info_m:{file:"icons/ic_two_speechbubbles_info_m.svg"},update_badge_plus_m:{file:"icons/ic_update_badge_plus_m.svg"},speechbubble_badge_plus_m:{file:"icons/ic_speechbubble_badge_plus_m.svg"},check_filled_circle_s:{file:"icons/ic_check_filled_circle_s.svg"},computer_chart_m:{file:"icons/ic_computer_chart_m.svg"},loading_spinner_s:{file:"icons/ic_loading_spinner_s.svg"},two_people_standing:{file:"il_hourglass_wait_stand.svg"},two_people_sitting:{file:"il_hourglass_wait_sit.svg"},company_shield_badge_m:{file:"icons/ic_company_shield_badge_m.svg"},card_child_badge_m:{file:"icons/ic_card_child_badge_m.svg"},broken_vase_m:{file:"icons/ic_broken_vase_m.svg"},magnifier_coin_stack_m:{file:"icons/ic_magnifier_coin_stack_m.svg"},clock_coin_stack_m:{file:"icons/ic_clock_coin_stack_m.svg"},android_s:{file:"icons/ic_android_s.svg"},apartment_house_m:{file:"icons/ic_apartment_house_m.svg"},apple_s:{file:"icons/ic_apple_s.svg"},arrow_bent_back_circle_s:{file:"icons/ic_arrow_bent_back_circle_s.svg"},briefcase_s:{file:"icons/ic_briefcase_s.svg"},business_pin_m:{file:"icons/ic_business_pin_m.svg"},calculator_s:{file:"icons/ic_calculator_s.svg"},card_chain_m:{file:"icons/ic_card_chain_m.svg"},card_clock_m:{file:"icons/ic_card_clock_m.svg"},card_color_hint_circle_m:{file:"icons/ic_card_color_hint_circle_m.svg"},card_hint_m:{file:"icons/ic_card_hint_m.svg"},card_lock_m:{file:"icons/ic_card_lock_m.svg"},card_s:{file:"icons/ic_card_s.svg"},chain_s:{file:"icons/ic_chain_s.svg"},chart_coin_stack_arrow_up_m:{file:"icons/ic_chart_coin_stack_arrow_up_m.svg"},child_shield_badge_m:{file:"icons/ic_child_shield_badge_m.svg"},coin_stack_arrow_up_m:{file:"icons/ic_coin_stack_arrow_up_m.svg"},coin_stack_s:{file:"icons/ic_coin_stack_s.svg"},document_clock_m:{file:"icons/ic_document_clock_m.svg"},document_hint_badge_m:{file:"icons/ic_document_hint_badge_m.svg"},fingerprint_lock_badge_m:{file:"icons/ic_fingerprint_lock_badge_m.svg"},house_s:{file:"icons/ic_house_s.svg"},key_m:{file:"icons/ic_key_m.svg"},leaf_m:{file:"icons/ic_leaf_m.svg"},list_s:{file:"icons/ic_list_s.svg"},more_s:{file:"icons/ic_more_s.svg"},number1_circle_s:{file:"icons/ic_number1_circle_s.svg"},number2_circle_s:{file:"icons/ic_number2_circle_s.svg"},number3_circle_s:{file:"icons/ic_number3_circle_s.svg"},number4_circle_s:{file:"icons/ic_number4_circle_s.svg"},oerag_m:{file:"icons/ic_oerag_m.svg"},pause_circle_s:{file:"icons/ic_pause_circle_s.svg"},pin_screen_s:{file:"icons/ic_pin_screen_s.svg"},quarter_circle_m:{file:"icons/ic_quarter_circle_m.svg"},sheet_paragraph_s:{file:"icons/ic_sheet_paragraph_s.svg"},shield_empty_s:{file:"icons/ic_shield_empty_s.svg"},shield_plus_m:{file:"icons/ic_shield_plus_m.svg"},shopping_cart_m:{file:"icons/ic_shopping_cart_m.svg"},signature_s:{file:"icons/ic_signature_s.svg"},sparkasse_s:{file:"icons/ic_sparkasse_s.svg"},stop_s:{file:"icons/ic_stop_s.svg"},tan_m:{file:"icons/ic_tan_m.svg"},two_documents_s:{file:"icons/ic_two_documents_s.svg"},two_eurocoins_m:{file:"icons/ic_two_eurocoins_m.svg"},two_speechbubbles_dots_m:{file:"icons/ic_two_speechbubbles_dots_m.svg"},user_self_employed_m:{file:"icons/ic_user_self_employed_m.svg"},user_update_m:{file:"icons/ic_user_update_m.svg"},user_child_m:{file:"icons/ic_user_child_m.svg"},house_lamp_couch_m:{file:"icons/ic_house_lamp_couch_m.svg"}}},i.ICONS.bremerlb=i.ICONS.blb_bremer_lb,i.ICONS.direkt1822=i.ICONS["1822_direkt"],i.ICONS.bwbank=i.ICONS.bw_bank,i.ICONS.consors=i.ICONS.consorsbank,i.ICONS.vp_deka=i.ICONS.deka_institut,i.ICONS.deutschebank=i.ICONS.deutsche_bank,i.ICONS.vp_fsbb=i.ICONS.feuersozietaet,i.ICONS.fremdbank=i.ICONS.fremde_vereinbarungen,i.ICONS.vp_gothaer=i.ICONS.gothaer,i.ICONS.ingdiba=i.ICONS.ing_diba,i.ICONS.unsupported=i.ICONS.institut_nicht_unterstuetzt,i.ICONS.vp_lbs=i.ICONS.lbs,i.ICONS.vp_llva=i.ICONS.lippische_landesbrandkasse,i.ICONS.vp_neueleben=i.ICONS.neue_leben_versicherung,i.ICONS.vp_oevbs=i.ICONS.oeffentliche_versicherungen_braunschweig,i.ICONS.vp_oevb=i.ICONS.oeffentliche_versicherungen_bremen,i.ICONS.vp_oevo=i.ICONS.oeffentliche_versicherungen_oldenburg_oevo,i.ICONS.vp_oesa=i.ICONS.oesa,i.ICONS.vp_olbk=i.ICONS.ostfriesische_landschaftliche_brandkasse,i.ICONS.vp_paydirekt=i.ICONS.paydirekt_mbf,i.ICONS.vp_provinzial_nw=i.ICONS.provinzial_nord,i.ICONS.vp_provinzial_rl=i.ICONS.provinzial_rheinland,i.ICONS.vp_provinzial_wf=i.ICONS.provinzial_westfaelische,i.ICONS.psdbank=i.ICONS.psd_bank,i.ICONS.vp_saarv=i.ICONS.saarland_versicherung,i.ICONS.saarlb=i.ICONS.saar_lb,i.ICONS.vp_svs=i.ICONS.sparkassen_versicherung_sachsen,i.ICONS.vp_sdirektv=i.ICONS.s_direktversicherung,i.ICONS.vp_spension=i.ICONS.s_pensionsmanagement,i.ICONS.vp_sv=i.ICONS.s_versicherung,i.ICONS.hvb=i.ICONS.uni_credit,i.ICONS.vp_vgh=i.ICONS.versicherungsgruppe_hannover,i.ICONS.vp_vkb=i.ICONS.versicherungskammer_bayern,i.ICONS.volksbank=i.ICONS.volksbank_raiffeisenbanken,document.OSPMEnvironment&&(document.OSPMEnvironment.UIConstants=i),i
}),define("tao/ospm/ui/SvgFactory",[],function(){function e(e,n,o){var r=document.createElementNS(i,e);return n&&(r.textContent=n),t(r,o),r}function t(e,t){var n;t&&(n=Object.keys(t),n.forEach(function(n){var i,o,r;n.indexOf(":")>-1?(r=t[n],n=n.split(":"),i=n[0],o=n[1],"xlink"===i&&(i="http://www.w3.org/1999/xlink"),e.setAttributeNS(i,o,r)):e.setAttribute(n,t[n])}))}var n,i="http://www.w3.org/2000/svg";return n={createSvg:function(e){var t,n=document.createElementNS(i,"svg");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),e&&(t=Object.keys(e),t.forEach(function(t){n.setAttribute(t,e[t])})),n},createContainer:function(t){return e("g","",t)},createText:function(t,n,i,o){return o=o||{},o.x=n,o.y=i,e("text",t,o)},createLine:function(t,n,i,o,r){return r=r||{},r.x1=t,r.y1=n,r.x2=i,r.y2=o,e("line","",r)},createRectangle:function(t,n,i,o,r){return r=r||{},r.x=t,r.y=n,r.width=i,r.height=o,e("rect","",r)},createCircle:function(t,n,i,o){return o=o||{},o.cx=t,o.cy=n,o.r=i,e("circle","",o)},createPath:function(t,n){return n=n||{},n.d=t,e("path","",n)},createDefinitions:function(t){return e("defs","",t)},createLinearGradient:function(t,n,i,o,r,s){return s=s||{},s.id=t,s.x1=n,s.y1=i,s.x2=o,s.y2=r,e("linearGradient","",s)},createGradientStop:function(t,n){return n=n||{},n.offset=t,e("stop","",n)},createImage:function(t,n,i,o,r,s){return s=s||{},s.x=t,s.y=n,s.width=i,s.height=o,s["xLink:href"]=r,e("image","",s)},createUse:function(t,n){return n=n||{},n["xlink:href"]=t,e("use",null,n)},createSymbol:function(t){return t=t||{},e("symbol",null,t)},createDefs:function(){return e("defs",null,null)}}}),define("tao/ospm/ui/IconFactory",["tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Config","tao/ospm/common/Logger","tao/ospm/common/Constants","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/core/OSPMEnvironment","tao/ospm/core/CoreConstants","tao/ospm/ui/UIConstants","tao/ospm/ui/SvgFactory"],function(e,t,n,i,o,r,s,a,l,c,u){function d(t){var n,i,r,a,l,u=["JAN","FEB","MÄR","APR","MAI","JUN","JUL","AUG","SEP","OKT","NOV","DEZ"];return e.isDate(t.name)?(a=t.name.getDate(),l=u[t.name.getMonth()]):(a=t.name.tag,l=u[t.name.monat]),n=s.createContainer(c.ICON_DEFAULT_CLASS+" "+k.calcIconClassName("date")),i=s.createContainer("ospm_icon_date_day ospm_text_style_"+o.TEXT_STYLE.LABEL3),i.textContent=a,n.appendChild(i),r=s.createContainer("ospm_icon_date_month ospm_text_style_"+o.TEXT_STYLE.SUBLABEL5),r.textContent=l,n.appendChild(r),e.isStringProvided(t.label)&&n.setAttribute("aria-label",t.label),n}function h(t){var n;return n=s.createContainer(c.ICON_DEFAULT_CLASS+" "+k.calcIconClassName("number")),n.textContent=t.name,e.isStringProvided(t.label)&&n.setAttribute("aria-label",t.label),n}function m(){var e;return e=s.createContainer(c.ICON_DEFAULT_CLASS+"_placeholder"),e.textContent="",e.setAttribute("aria-label","placeholder"),e}function p(t,n){var i,o,r=!1;return i=document.OSPMEnvironment.appURL(t.app,!0)+"icons"+t.name+t.extension,o=s.createContainer(c.ICON_DEFAULT_CLASS),".svg"===t.extension.toLowerCase()?L(i,function(e){var i,s=t.app+t.name.replace(/\//g,"_").replace(".svg",""),a=u.createSvg(),l=u.createUse("#"+O+s);D(s,e),a.setAttribute("focusable","false"),a.appendChild(l),i=e.querySelector("svg").getAttribute("class"),i&&i.split(" ").forEach(function(e){e.indexOf("i")>=-1&&(o.classList.add(e),r=!0)}),!r&&t.color&&o.classList.add("ospm_icon_color_"+t.color),o.appendChild(a),"function"==typeof n&&n()},function(e){x.warning(e),o.style.backgroundImage="url('"+i+"')"}):o.style.backgroundImage="url('"+i+"')",e.isStringProvided(t.label)&&o.setAttribute("aria-label",t.label),o&&e.isStringProvided(t.name)&&_(t.name)&&o.classList.add("ospm_icon_noStroke"),o}function f(t,n,i){var o,r,a;return e.isStringProvided(t.name)?(t.name.startsWith(c.BLOB_CONSTANT)?(o=s.createContainer(c.ICON_DEFAULT_CLASS),a=s.createImage(null,t.name),t.size?(a.style.width=t.size+"px",a.style.height=t.size+"px"):i&&(a.style.width=i+"px",a.style.height=i+"px"),o.appendChild(a)):(o=s.createContainer(c.ICON_DEFAULT_CLASS+" "+k.calcIconClassName(t.name)),r=E(t),r&&(o.style.backgroundImage="none",t.color&&o.classList.add("ospm_icon_color_"+t.color),document.getElementById(O+t.name)?(o.appendChild(T(t.name)),"function"==typeof n&&n()):L(r,function(e){D(t.name,e),o.appendChild(T(t.name)),"function"==typeof n&&n()},function(e){o.style.backgroundImage=null,x.error(e)}))),e.isStringProvided(t.label)&&o.setAttribute("aria-label",t.label),o&&e.isStringProvided(t.name)&&_(t.name)&&o.classList.add("ospm_icon_noStroke"),o):null}function g(t,n,i,o,r){var a,l,u,d=t.name||t;return e.isStringProvided(d)?(u=b(t),l=E(u)||n,a=s.createContainer(o),l&&(u.color&&a.classList.add("ospm_icon_color_"+u.color),u.size&&a.classList.add("ospm_icon_size_"+u.size),document.getElementById(O+d)?(a.appendChild(T(d)),"function"==typeof r&&r(u)):L(l,function(e){D(d,e,i),a.appendChild(T(d)),"function"==typeof r&&r(u)},function(e){a.style.backgroundImage=null,x.error(e)})),a&&(_(d)||v(n))&&(a.classList.add("ospm_icon_noStroke"),o===c.ICON_DASHBOARD_CLASS?a.classList.add("ospm_dashboard_new_icon"):"ospm_sidebar_icon"===o&&a.classList.add("ospm_sidebar_new_icon")),a):null}function _(e){var t;return"lightbox_nav_prev"===e||"lightbox_nav_next"===e||"lightbox_zoom_in"===e||"lightbox_zoom_out"===e||"lightbox_close"===e?!1:e.endsWith("_m")||e.endsWith("_s")?!0:(Object.keys(I).forEach(function(n){n===e&&(t=!0)}),t?!0:!1)}function v(e){return e?e.indexOf("_m")>=0||e.indexOf("_s")>=0?!0:!1:void 0}function b(t){var n,i,o,r,s={};if(!e.isObject(t)||e.isDate(t)||e.isOfClass(t,"TaoDate")?(n=t,s.label=""):(n=t.name,s.label=t.label,s.action=t.action,s.color=t.color,s.size=t.size,s.sticker=t.sticker),e.isDate(n)||e.isOfClass(n,"TaoDate"))i=32;else if("number"==typeof n||"string"==typeof n&&n.length<10&&n===""+parseInt(n,10))"number"!=typeof n&&(n=parseInt(n,10)),i=24,n>=1e3?o=48:n>=100&&(o=32);else if("string"==typeof n)n.startsWith(c.BLOB_CONSTANT)||(r=n.match(/^(\w+)(\/[^.]+_(\d+|button|huge|large|medium|small))(\.\w+)?$/),r?(s.app=r[1],n=r[2],i=r[3],s.extension=y(r[4])):(r=n.match(/^(\w+)(\/[^.]+)(\.\w+)?$/),r?(s.app=r[1],n=r[2],s.extension=y(r[3])):(n=n.toLowerCase(),r=c.ICONS[n],r||(r=n.match(/^(([^.]+)_(\d+|button|huge|large|medium|small))$/),r?(n=r[2],i=r[3]):(r=n.match(/^(([^.]+))$/),r&&(n=r[2]))))),i&&(i=w(i)),r=c.ICONS[n],r&&(i=i||r.size,t.color||(s.color=r.color),s.file=r.file),s.file||(r=I[n],r&&(s.file=r.file,s.color=r.color)),t.size&&(i=t.size));else if("undefined"!=typeof n&&null!==n)return{};return i&&(s.size=i),o&&(s.sizeAsymmetric=o),s.name=n,s}function y(e){var t;return e=e||".png",t=e.toLowerCase(),(document.OSPMEnvironment.isRetinaDisplay()&&".svg"!==t?"@2x":"")+e}function C(e,t){return"number"!=typeof t&&0>=t||null===e?null:"ospm_icon_size_"+(e||t)}function w(e){var t;return t="huge"===e?64:"large"===e?32:"button"===e?24:"medium"===e?16:"small"===e?12:e}function E(e){return window.ospm_baseUrl&&e.file?window.ospm_baseUrl.replace(/\/js(-min)?$/,c.BASE_RESOURCE_PATH+"/res/ospm/")+e.file:null}function L(t,n,i){var o,r,s;s=t.indexOf("#"),s>=0&&(t=t.substr(0,s)),r={onSuccess:n,onError:i},o=N[t],o?o.push(r):(o=[r],N[t]=o,S(t,function(n){e.deleteProperty(N,t),o.forEach(function(i){try{i.onSuccess(n)}catch(o){e.callSafely(i.onError,'Fehler beim Verarbeiten der SVG-Datei von URL "'+t+'"',o)}})},function(n,i){e.deleteProperty(N,t),o.forEach(function(t){e.callSafely(t.onError,n,i)})}))}function S(t,n,i){function o(e){return{url:t,eventType:e.type,eventClass:e.toString(),details:e}}var s;s=e.createHttpRequest("GET",t,function(){var o,a=new RegExp(" on[a-z,A-Z]*=");if(e.wasHttpRequestSuccessful(s)){if(r.isIE())o=(new XMLSerializer).serializeToString(s.response).toLowerCase();else{if(o=s.responseXML,!o)return void i('Kein XML vorhanden für die SVG-Datei von URL "'+t+'"',null);o=o.documentElement.outerHTML.toLowerCase()}if(o.indexOf("<script")>=0)i('Script-Tag gefunden beim Verarbeiten der SVG-Datei von URL "'+t+'"',null);else if(o.indexOf("onload=")>=0)i('onLoad-Attribut gefunden beim Verarbeiten der SVG-Datei von URL "'+t+'"',null);else if(a.test(o))i('Listener-Attribut (on...) gefunden beim Verarbeiten der SVG-Datei von URL "'+t+'"',null);else{o=s.responseXML;try{n(o)}catch(l){i('Fehler beim Verarbeiten der SVG-Datei von URL "'+t+'"',l)}}}else i("HTTP-Fehler bei Lesen von URL",{httpstatus:s.status,url:t})},function(e){i("Browser meldete Fehler bei Zugriff auf URL",o(e))},"document",function(e){i("Browser meldete Timeout bei Zugriff auf URL",o(e))}),s.overrideMimeType("image/svg+xml; charset=utf-8"),s.send(null)}function D(e,t,n){function i(e,t){e.appendChild(document.importNode(t,!0))}var o,s,a,l,c,d=e;for(n=n||"",o=document.getElementById(A+n),o||(o=u.createSvg(),o.setAttribute("class",A),o.id=A+n,o.setAttribute("focusable","false"),document.body.appendChild(o)),a=o.querySelector("defs"),a||(a=u.createDefs(),o.appendChild(a)),l=t.querySelectorAll("svg defs > *"),c=0;c<l.length;c++)l[c].id&&!a.querySelector("#"+l[c].id)&&i(a,l[c]);for(l=t.querySelectorAll("svg > symbol"),c=0;c<l.length;c++)o.querySelector("#"+l[c].id)||i(o,l[c]);if(l=t.querySelectorAll("svg > g, svg > path, svg > rect, svg > circle, svg > use, svg > style"),l.length>0&&(s=o.getElementById(O+d),!s))for(s=u.createSymbol({id:O+d}),s.setAttribute("class",t.querySelector("svg").getAttribute("class")||""),o.appendChild(s),s.setAttribute("viewBox",t.querySelector("svg").getAttribute("viewBox")),r.isIE()&&s.setAttribute("viewBox",t.querySelector("svg").getAttribute("viewBox").replace("0 0 ","0 -0.5 ")),c=0;c<l.length;c++)i(s,l[c])}function T(e){var t,n,i=u.createSvg();return n="#"+O,n+=e,t=u.createUse(n),i.setAttribute("focusable","false"),i.style.pointerEvents="none",i.appendChild(t),i}var I,k,x=new i("OSPM","IconFactory"),A=l.SVG_ICON_CONTAINER,O="ospm_svg_symbol_",N={};return I={textinput_edit:{file:"icons/ic_edit_s.svg"},textinput_inputdialog:{file:"icons/ic_triangle_down_s.svg"},textinput_calender:{file:"icons/ic_calendar_s.svg"},textinput_calender_regular:{file:"icons/ic_calendar_s.svg"},dropdown_12:{file:"icons/ic_triangle_down_s.svg"},checkbox_unselected:{file:"icons/ic_checkbox_s.svg"},checkbox_highlighted:{file:"icons/ic_checkbox_s.svg"},checkbox_selected:{file:"icons/ic_checkbox_filled_s.svg"},radiobutton_unselected:{file:"icons/ic_circle_s.svg"},radiobutton_highlighted:{file:"icons/ic_circle_s.svg"},radiobutton_selected:{file:"icons/ic_radio_selected_s.svg"},list_collapse:{file:"icons/ic_up_s.svg"},list_collapsed:{file:"icons/ic_down_s.svg"},start_pfeil:{file:"icons/ic_next_m.svg"},progressbar_active:{file:"icons/ic_progress_on_s.svg"},progressbar_inactive:{file:"icons/ic_progress_off_s.svg"},callout:{file:"icons/ic_next_s.svg"},circular_chart_next:{file:"icons/ic_next_m.svg"},circular_chart_prev:{file:"icons/ic_back_m.svg"},lightbox_nav_prev:{file:"icons/iconset_lightbox.svg#ospm_svg_symbol_lightbox_nav_prev",color:"widgetFgColor"},lightbox_nav_next:{file:"icons/iconset_lightbox.svg#ospm_svg_symbol_lightbox_nav_next",color:"widgetFgColor"},lightbox_zoom_in:{file:"icons/iconset_lightbox.svg#ospm_svg_symbol_lightbox_zoom_in",color:"widgetFgColor"},lightbox_zoom_out:{file:"icons/iconset_lightbox.svg#ospm_svg_symbol_lightbox_zoom_out",color:"widgetFgColor"},lightbox_close:{file:"icons/iconset_lightbox.svg#ospm_svg_symbol_lightbox_close",color:"widgetFgColor"},open_advanced_search:{file:"icons/ic_down_s.svg"},open_advanced_search_focus:{file:"icons/ic_triangle_down_s.svg"},close_advanced_search:{file:"icons/ic_up_s.svg"},close_advanced_search_focus:{file:"icons/ic_triangle_s.svg"},searchinput_search:{file:"icons/ic_magnifier_m.svg"},sidebar_details_goback:{file:"icons/ic_back_s.svg"}},k={createIcon:function(t,n,i,o){var s,a;if(t=b(t),"undefined"==typeof t.name||null===t.name){if(!t.sticker)return null;s=m()}else if("number"==typeof t.name){if(i)return null;s=h(t)}else s=e.isDate(t.name)||e.isOfClass(t.name,"TaoDate")?d(t):t.app?p(t,o):f(t,o,n);return s&&(a=C(t.size,n),a&&(s.classList.add(a),t.sizeAsymmetric&&s.classList.add(a+t.sizeAsymmetric)),t.action&&"function"==typeof t.action&&(s.setAttribute("role","button"),s.setAttribute("tabindex",c.TABINDEXES.DEFAULT),e.isStringProvided(t.label)?s.setAttribute("aria-label",t.label):x.warning("Ein Action-Icon benötigt ein Label, um zugänglich zu sein."),s.classList.add("ospm_clickable"),r.addActionListener(s,function(){t.action()},!1,!0))),t.sticker&&(s.classList.add("ospm_icon_sticker"),t.sticker.size&&s.classList.add("ospm_sticker_size_"+t.sticker.size)),s},createSimpleIcon:function(e){return void 0===e||null===e||""===e?null:f(b(e))},createSimpleActionIcon:function(n,i,o){var s;if(!e.isStringProvided(n.label))throw new t("Ein Action-Icon benötigt ein Label, um zugänglich zu sein.");return s=k.createSimpleIcon(n),s.setAttribute("role","button"),s.setAttribute("tabindex",c.TABINDEXES.DEFAULT),i&&"function"==typeof i&&r.addActionListener(s,i,!1,o),s&&e.isStringProvided(n.name)&&_(n.name)&&s.classList.add("ospm_icon_noStroke"),s},createDashboardIcon:function(e,t){var n={name:e||"dashboard_"+e,color:o.ICON_COLOR.BRAND,size:o.ICON_SIZE.MEDIUM_30};return g(n,t,"_appviewonly",c.ICON_DASHBOARD_CLASS)},createSidebarIcon:function(e,t){var n={name:e,color:o.ICON_COLOR.BRAND,size:o.ICON_SIZE.MEDIUM_10};return g(n,t,"_appviewonly","ospm_sidebar_icon")},createSvgIcon:function(e,t,n,i){return g(e,t,null,n,i)},calcIconClassName:function(e){return"string"==typeof e&&-1===e.indexOf("/")?c.ICON_PREFIX+e:""},updateIcon:function(e,t,n,i,o){var s,a,l,u,d="",h=!i;return"number"==typeof t||t===""+parseInt(t,10)?h&&(e.textContent=t,l=k.calcIconClassName("number"),u=24):"string"==typeof t&&(h&&!o&&(e.textContent=""),s=t.match(/^(\w+)(\/[^.]+_(\d+|button|medium|small))(\.\w+)?$/),s?(u=w(s[3]),d="url('"+document.OSPMEnvironment.appURL(s[1],!1)+"icons"+s[2]+y(s[4])+"')"):t.length>0&&(t=t.toLowerCase(),s=c.ICONS[t],s||(a=t.match(/^(([^.]+)_(\d+|button|medium|small))$/),a&&(n&&(u=w(a[3])),t=a[2],s=c.ICONS[t])),l=k.calcIconClassName(t),n&&(u=u||s&&s.size,null===u&&(n=!1)))),o?d?e.style.backgroundImage=d:e.classList.add(l):(r.replaceClassNameStartingWith(e,c.ICON_PREFIX,l),e.style.backgroundImage=d),n&&e.classList.add("ospm_icon_size_"+(u||n)),!(!l&&!d)}}}),define("tao/ospm/if/IFIdVerify",["tao/lib/stapes"],function(e){return e.subclass({constructor:function(){},setEnabled:function(){},isEnabled:function(){return!1},setCollectMode:function(){},isCollectMode:function(){return!1},verify:function(){},check:function(){return null}})}),define("tao/ospm/ui/ColorUtils",["tao/ospm/core/ThemeManager","tao/ospm/common/OSPMError"],function(e,t){function n(){console&&console.warn&&console.warn('The usage of explicit color values has been deprecated, use "Constants.COLOR" instead. This warning will become a silent error in a future version.')}var i,o;return o={white:"#ffffff",light_grey_1:"#F0F1F2",light_grey_2:"#cccccc",light_grey_3:"#ababab",grey:"#646464",dark_grey:"#131313",orange:"#ef8905",warning_red:"#D40000",purple_1:"#d580ff",purple_2:"#868eff",red_0:"#F3B6B6",red_1:"#ED9292",red_2:"#e66d6d",red_3:"#E04949",red_4:"#DA2424",red_5:"#ff0000",red_6:"#9b1a14",blue_0:"#B6DDFF",blue_1:"#6DBBFF",blue_2:"#49AAFF",blue_3:"#0088FF",blue_4:"#005BAA",green_0:"#c4e3a1",green_1:"#9dd062",green_2:"#7fbc38",green_3:"#6b9f2f",yellow_0:"#fddf86",yellow_1:"#fcd04a",yellow_2:"#fbbe0a",orange_1:"#dc5100",ocean:"#20cdbc"},i={parseColor:function(e){return e&&"string"==typeof e?0===e.indexOf("#")?(n(),e):this.isValidToken(e)?this.tokenToHex(e):(n(),e):e},isValidToken:function(e){return"brand"===e||Object.prototype.hasOwnProperty.call(o,e)},tokenToHex:function(n){switch(n){case"brand":return e.getInstituteBgColor();default:if(this.isValidToken(n))return o[n];throw new t('Unbekannter Farbtoken "'+n+'"')}}}}),define("tao/ospm/ui/UIUtils",["tao/ospm/common/Constants","tao/ospm/ui/ColorUtils"],function(e,t){function n(e,t,n){var i,o;return i="string"==typeof e[n]?e[n].toLowerCase():"",o="string"==typeof t[n]?t[n].toLowerCase():"",o>i?-1:i>o?1:0}function i(e,t){return parseInt(e.rang,10)-parseInt(t.rang,10)}function o(t){switch(t.persArt){case"P":return"W"===t.geschlecht?{name:e.ICONS.WOMAN_S,color:e.ICON_COLOR.DARK_GREY}:{name:e.ICONS.USER_S,color:e.ICON_COLOR.DARK_GREY};case"N":return"W"===t.geschlecht?{name:e.ICONS.WOMAN_SELF_EMPLOYED_S,color:e.ICON_COLOR.DARK_GREY}:{name:e.ICONS.USER_SELF_EMPLOYED_S,color:e.ICON_COLOR.DARK_GREY};case"G":return{name:e.ICONS.TWO_USERS_S,color:e.ICON_COLOR.DARK_GREY};case"J":return{name:e.ICONS.COMPANY_S,color:e.ICON_COLOR.DARK_GREY};default:return{name:e.ICONS.COMPANY_S,color:e.ICON_COLOR.DARK_GREY}}}function r(e){var t=e.name;return e.vorname&&(t+=", "+e.vorname),(e.namenserw||e.titel)&&(t+=","),e.titel&&(t+=" "+e.titel),e.namenserw&&(t+=" "+e.namenserw),t}function s(e){var t="";return e.postAdresse&&(e.postAdresse.plz&&(t+=e.postAdresse.plz+" "),e.postAdresse.ort&&(t+=e.postAdresse.ort),e.postAdresse.strasse&&(t+=", "+e.postAdresse.strasse),e.postAdresse.hausNr&&(t+=" "+e.postAdresse.hausNr)),t}function a(e){return e.geschaeftsstelle&&e.servicecenter&&e.beraterplatz?{icon:"oe",text:e.geschaeftsstelle+" "+e.servicecenter+" "+e.beraterplatz}:{}}function l(e){return e.personenNr?{icon:"person",text:e.personenNr}:{}}function c(e){return e.gebDatum?{icon:"gift",text:e.gebDatum}:e.gruendungsDatum?{icon:"gift",text:e.gruendungsDatum}:{}}function u(e){var t=e.personenName;return e.personenVorname&&(t+=", "+e.personenVorname),e.personenNamenserw&&(t+=", "+e.personenNamenserw),t}var d={isValidColor:function(e){function t(t){return i.color=t,i.color=e,i.color!==t}var n,i;return e&&"inherit"!==e&&"transparent"!==e?(n=document.createElement("img"),i=n.style,t("rgb(0, 0, 0)")||t("rgb(255, 255, 255)")):!1},isValidColorToken:function(e){return t.isValidToken(e)},convertSVZtoDropdown:function(e,t,o,r){var s,a=[];for(t=t||"kurzbeschreibung",e.sort(o?i:function(e,i){return n(e,i,t)}),s=0;s<e.length;s++)e[s].id&&(e[s][t]||r)&&a.push(e[s][t]?{label:e[s][t],value:e[s].id}:{label:e[s].id,value:e[s].id});return a},convertPersonObjectToResultRowParameters:function(e){return{leftIcons:[o(e)],enabled:!e.geschuetzt,title:r(e),subtitle:s(e),data:e,labels:[a(e),l(e),c(e)]}},convertContractObjectToResultRowParameters:function(t){return{leftIcons:[e.ICONS.CARD_M],enabled:!0,title:(t.anzeigeKontoNr?t.anzeigeKontoNr:t.kontoNr)+" "+t.produktErgaenzung,subtitle:u(t),data:t}},convertVorgangObjectToResultRowParameters:function(e){return{leftIcons:[],enabled:!0,title:e.bezeichnung,subtitle:e.vorgangsarttext,labels:[{icon:"",text:e.vorgangsnr},{icon:"",text:e.statustext},{icon:"",text:e.vorgangsunterarttext}],data:e}},generateLabelableHtmlElementDescription:function(e,t){var n="",i=function(e,t){return e.indexOf("__sublabel")>0?-1:t.indexOf("__sublabel")>0?1:e.indexOf("__valueunit")>0?1:t.indexOf("__valueunit")>0?-1:0};e.getLabelableHTMLElement&&e.getLabelableHTMLElement()&&(n=e.getLabelableHTMLElement().getAttribute("aria-describedby")||"",t&&(t.textContent.length&&n.indexOf(t.id)<0?(n+=" "+t.id,n=n.split(" ").sort(i).join(" ")):e.getLabel()||(n=n.split(" ").filter(function(e){return e!==t.id}).join(" "))),n?e.getLabelableHTMLElement().setAttribute("aria-describedby",n.trim()):e.getLabelableHTMLElement().removeAttribute("aria-describedBy"))}};return d}),define("tao/ospm/ui/widgets/mixins/TooltipMixinV2",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/IconFactory","tao/ospm/common/Constants"],function(e,t,n,i){var o,r="ospm_tooltip_v2",s="ospm_tooltip_v2_headline",a="ospm_tooltip_v2_text_content",l="ospm_has_tooltip_v2",c="ospm_top_tooltip_v2_arrow",u="ospm_invisible",d="ospm_tooltip_v2_pseudo_style",h=2,m=4,p=8,f=24;return o={tooltipDom:null,tooltipHeadlineTextDom:null,tooltipTextContentDom:null,hintMessage:null,containerHeight:0,buildTooltip:function(e,t,n){return this.buildTooltipDom(t,n),this.registerTooltipEventsToParent(e),e},buildTooltipDom:function(t,o){var l,c,d;return l=e.createContainer(r),c=e.createContainer(s),this.tooltipHeadlineTextDom=e.createInlineContainer(),this.tooltipTextContentDom=e.createInlineContainer(a),c.appendChild(this.tooltipHeadlineTextDom),d=n.createIcon({name:i.ICONS.CLOSE,size:i.ICON_SIZE.SMALL_10}),d.classList.add("ospm_clickable"),c.appendChild(d),l.appendChild(c),l.appendChild(this.tooltipTextContentDom),this.tooltipDom=l,this.tooltipDom.classList.add(u),this.addTextToTooltip(t),o&&this.addHeadlineToTooltip(o),document.body.appendChild(this.tooltipDom),this.tooltipDom},removeTooltipDom:function(){this.tooltipDom&&(this.resizeFrame(!1),this.tooltipDom.remove(),this.tooltipDom=null)},addTextToTooltip:function(t){return e.createMarkupDomTree(this,this.tooltipTextContentDom,t),this.tooltipDom},addHeadlineToTooltip:function(t){return e.createMarkupDomTree(this,this.tooltipHeadlineTextDom,t),this.tooltipDom},resizeFrame:function(e){var t,n,i=0,o=400;t=document.getElementById("ospm_app"),n=document.getElementsByClassName("ospm_dialogview_scrollarea")[0],0===this.containerHeight&&(this.containerHeight=t.offsetHeight),n?(this.containerHeight=n.scrollHeight,e&&this.containerHeight-n.scrollTop<this.tooltipDom.offsetHeight+this.tooltipDom.offsetTop?(i=0!==n.scrollTop?100:-200,n.lastChild.style.paddingBottom=this.tooltipDom.offsetHeight+this.tooltipDom.offsetTop+i-n.offsetHeight+"px"):(n.lastChild.style.removeProperty("padding-bottom"),this.containerHeight=0)):this.tooltipDom.offsetHeight>this.containerHeight-o&&(e?t.style.height=t.offsetHeight+(this.tooltipDom.offsetHeight-this.containerHeight+o)+"px":(t.style.height=t.offsetHeight-(this.tooltipDom.offsetHeight-this.containerHeight+o)+"px",this.containerHeight=0))},registerTooltipEventsToParent:function(e,n){var i;this.hintMessage=n,i=function(){this.tooltipDom&&this.showAndPositionTooltip(e,this.hintMessage)}.bind(this),e.classList.add("ospm_hidden"),e.classList.add(l),e.addEventListener("blur",function(t){t.stopPropagation(),t.preventDefault(),this.removeTooltipDom(),e.setAttribute("aria-pressed","false"),e.removeAttribute("id"),document.removeEventListener("scroll",i,!0)}.bind(this)),t.addClickListener(e,function(){!this.tooltipDom&&this.hintMessage&&(this.buildTooltipDom(this.hintMessage),this.showAndPositionTooltip(e,this.hintMessage),e.setAttribute("aria-pressed","true"),e.setAttribute("id","active_tooltip_v2"),this.resizeFrame(!0),this.showAndPositionTooltip(e,this.hintMessage),document.addEventListener("scroll",i,!0))}.bind(this),!1,!0,!0),e.classList.remove("ospm_hidden")},positionArrowOfTooltipHorizontally:function(e,t){var n,i;n=document.getElementById(d),n||(n=document.head.appendChild(document.createElement("style")),n.setAttribute("id",d)),i=e-t-5,this.tooltipDom.classList.contains(c)&&(n.innerHTML="."+r+":before,."+r+":after {left: "+i+"px;}")},showAndPositionTooltip:function(e){var t,n,i,o=document.body.offsetWidth,r=e.getBoundingClientRect(),s=r.left+r.width/2,a=r.bottom;t=this.tooltipDom.offsetWidth,this.tooltipDom.style.left=s-t/2+"px",n=this.tooltipDom.offsetLeft,t>o&&(this.tooltipDom.style.width=o-2*f-p+"px",this.tooltipDom.style.left=h+"px",n=this.tooltipDom.offsetLeft,t=this.tooltipDom.offsetWidth),n+t>o&&(i=n+t-o,this.tooltipDom.style.left=n-i-m+"px",n=this.tooltipDom.offsetLeft),0>n&&(this.tooltipDom.style.left=h+"px",n=this.tooltipDom.offsetLeft),this.tooltipDom.style.top=a+p+"px",this.tooltipDom.classList.add(c),this.positionArrowOfTooltipHorizontally(s,n),this.tooltipDom.classList.remove(u)},isElementVisible:function(e){var n,i,o;return i=t.getScrollableParent(e),"BODY"===i.nodeName?!0:(n=e.getBoundingClientRect(),o=i.getBoundingClientRect(),i!==e&&o.top<=n.bottom&&n.bottom<=o.bottom&&o.left<=n.right&&n.left<=o.right?!0:!1)}}}),define("tao/ospm/ui/widgets/mixins/HintMixin",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/ui/UIUtils","tao/ospm/ui/IconFactory","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/ui/widgets/mixins/TooltipMixinV2"],function(e,t,n,i,o,r,s,a){function l(e){return e=e||m,"ospm_list_marker_hint_icon_"+e}function c(e){i.generateLabelableHtmlElementDescription(e,e.hintMessageDom),e.getLabelableHTMLElement&&e.getLabelableHTMLElement()&&e.hintMarkerDom.setAttribute("aria-hidden","true")}var u,d="ospm_help_marker",h="ospm_help_message",m="help",p="_circle_s",f=["help","hint"];return u={hintMarkerDom:null,hintMessageDom:null,hintIcon:null,helpMessageContainer:null,buildHintIcon:function(){var e=this.buildHintIconDom();return t.addActionListener(e,function(){!this.isEnabled()&&["Checkbox","RadioButton","Dropdown","TextInput","TextTable"].indexOf(this.getClassName())<0||this.hintMessageDom&&this.toggleHint()}.bind(this),!1,!0),this.hintMarkerDom=e,this.hasHintIconChanged(e,"",m),e},isHintShown:function(){return!this.hintMarkerDom.classList.contains("ospm_hidden")&&Boolean(this.hintMessageDom)&&!this.hintMessageDom.classList.contains("ospm_hidden")},showHint:function(){!this.hintMarkerDom.classList.contains("ospm_hidden")&&this.hintMessageDom&&this.hintMessageDom.classList.contains("ospm_hidden")&&(this.hintMarkerDom.setAttribute("aria-pressed","true"),this.hintMessageDom.classList.remove("ospm_hidden"),t.updateElement(this))},hideHint:function(){this.isHintShown()&&(this.hintMarkerDom.setAttribute("aria-pressed","false"),this.hintMessageDom.classList.add("ospm_hidden"),t.updateElement(this))},toggleHint:function(){this.isHintShown()?this.hideHint():this.showHint()},buildHelpMessageContainer:function(){return this.hintMessageDom=e.createContainer(h),this.hintMessageDom.classList.add("ospm_hidden"),this.hintMessageDom},buildHelpMessageContainerWithNonToggleableHintIcon:function(){var t,n;return t=e.createContainer("ospm_helpmessage_hinticon_container"),t.classList.add("ospm_hidden"),this.hintMessageDom=e.createContainer(h),this.hintMessageDom.classList.add("ospm_hidden"),t.appendChild(this.hintMessageDom),n=e.createContainer(d),n.setAttribute("role","button"),n.classList.add("ospm_hidden"),n.appendChild(o.createSimpleIcon(r.ICONS.HELP_CIRCLE_S)),this.hintMarkerDom=n,t.appendChild(n),this.helpMessageContainer=t,t},buildHintIconForTooltip:function(){var t,i,s;return t=e.createContainer("ospm_helpmessage_hinticon_container"),t.classList.add("ospm_hidden"),s=e.createContainer(d),s.setAttribute("role","button"),s.setAttribute("tabindex",n.TABINDEXES.DEFAULT),s.classList.add("ospm_hidden"),i=o.createSimpleIcon(r.ICONS.HELP_CIRCLE_S),s.appendChild(i),this.hintMarkerDom=s,t.appendChild(s),this.helpMessageContainer=t,t},setHintIcon:function(e){var n;t.isNBF()?(n=this.hintMarkerDom.getElementsByClassName("ospm_icon")[0],this.hintMarkerDom.append(e&&f.indexOf(e)>=0?o.createSimpleIcon(e+p):o.createSimpleIcon(m+p)),this.hintMarkerDom.removeChild(n)):this.hasHintIconChanged(this.hintMarkerDom,this.hintIcon,e)&&(this.hintIcon=e)},setHint:function(n){t.isNBF()?(n&&(this.registerTooltipEventsToParent(this.hintMarkerDom,n),this.helpMessageContainer&&this.helpMessageContainer.classList.remove("ospm_hidden")),this.hintMarkerDom.setAttribute("aria-pressed","false"),this.hintMarkerDom.classList.remove("ospm_hidden"),this.dom&&this.dom.classList.add("ospm_has_hint")):(n?(e.createMarkupDomTree(this,this.hintMessageDom,n),this.hintMessageDom.classList.add("ospm_hidden"),this.hintMarkerDom.setAttribute("aria-pressed","false"),this.hintMarkerDom.classList.remove("ospm_hidden"),this.dom&&this.dom.classList.add("ospm_has_hint")):(this.hintMessageDom.textContent="",this.hintMarkerDom.removeAttribute("aria-pressed"),this.hintMarkerDom.classList.add("ospm_hidden"),this.dom&&this.dom.classList.remove("ospm_has_hint"),this.hintMessageDom.classList.add("ospm_hidden")),this.hintMarkerDom.classList.add(l(this.hintIcon)),this.getId&&this.getId()&&this.hintMessageDom&&(this.hintMessageDom.id=this.getId()+"__helpmessage",this.hintMarkerDom.setAttribute("aria-controls",this.hintMessageDom.id)),c(this),t.scheduleUpdateMinHeight(this),t.updateElement(this))},setAlwaysShownHint:function(t){t&&(e.createMarkupDomTree(this,this.hintMessageDom,t),this.hintMarkerDom.classList.remove("ospm_hidden"),this.helpMessageContainer&&this.helpMessageContainer.classList.remove("ospm_hidden"),this.dom&&this.dom.classList.add("ospm_has_hint")),this.hintMarkerDom.classList.add(l(this.hintIcon)),this.hintMessageDom.classList.remove("ospm_hidden"),this.getId&&this.getId()&&(this.hintMessageDom.id=this.getId()+"__helpmessage")},getMaxIconHeight:function(){var e=0;return this.hintMarkerDom&&(e=this.hintMarkerDom.clientHeight),e},hasHintIconChanged:function(e,n,i){return n===i||i&&f.indexOf(i)<0?!1:(t.replaceClassNameStartingWith(e,"ospm_list_marker_hint_icon",l(i)),i===f[1]?e.setAttribute("aria-label","Hinweis anzeigen"):i===f[0]&&e.setAttribute("aria-label","Feldhilfe anzeigen"),!0)},buildHintIconDom:function(){var t;return t=e.createContainer(d),t.setAttribute("role","button"),t.setAttribute("tabindex",n.TABINDEXES.DEFAULT),t.classList.add("ospm_hidden"),t.appendChild(o.createSimpleIcon(r.ICONS.HELP_CIRCLE_S)),t.appendChild(o.createSimpleIcon(r.ICONS.INFO_CIRCLE_S)),t.appendChild(o.createSimpleIcon(r.ICONS.UP_CIRCLE_S)),t},removeIndentIfFirstVisibleElement:function(e){function t(e,n){var i=e.previousElementSibling;return i?i.textContent?n&&!1:t(i,n&&!0):n&&!0}e.style.backgroundPosition=t(e,!0)?"left":"right"}},s.merge(u,a),u}),define("tao/ospm/ui/widgets/mixins/InfoTextMixin",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit"],function(e,t){var n={infoTextDom:null,buildInfoTextDom:function(){return this.infoTextDom=e.createInlineContainer("ospm_entry_infotext"),this.infoTextDom},setInfoText:function(n){t.validateLabel("InfoText",n),n?(n=t.handlePossibleTextpoolReference(n),"string"==typeof n?n=" "+n:Array.isArray(n)&&n.length>0&&(n[0]=" "+n[0]),e.createMarkupDomTree(this,this.infoTextDom,n)):this.infoTextDom.textContent="","Footer"===this.getClassName()&&t.isNBF()&&this.dom.classList.toggle("ospm_has_info_text",Boolean(n)),t.updateElement(this)}};return n}),define("tao/ospm/ui/widgets/mixins/LeftIconMixin",["tao/ospm/common/Toolkit","tao/ospm/ui/IconFactory","tao/ospm/ui/UIConstants","tao/ospm/core/UIToolkit"],function(e,t,n,i){var o=32,r=16,s={leftIconDom:null,leftIconContainerDom:null,setLeftIconContainer:function(e){this.leftIconContainerDom=e},setLeftIcon:function(e){var s=this.leftIconContainerDom||this.dom;this.hasFormLayout!==!0&&(this.leftIconDom&&(s.removeChild(this.leftIconDom),this.leftIconDom=null,this.dom.classList.remove("ospm_has_lefticon")),this.leftIconDom=i.isNBF()?t.createIcon(e,r):t.createIcon(e,o),this.leftIconDom&&(this.leftIconDom.classList.add(n.LEFT_ICON_DEFAULT_CLASS),this.dom.classList.add("ospm_has_lefticon"),s.firstChild?s.insertBefore(this.leftIconDom,s.firstChild):s.appendChild(this.leftIconDom)),i.updateIndentation(this.parent),i.scheduleUpdateMinHeight(this))},leftIconWidth:function(){return this.leftIconDom?this.leftIconDom.offsetWidth:0},getMaxIconHeight:function(){return this.leftIconDom?this.leftIconDom.clientHeight:0}};return s}),define("tao/ospm/ui/widgets/mixins/RightIconMixin",["tao/ospm/common/Toolkit","tao/ospm/ui/IconFactory","tao/ospm/ui/UIConstants","tao/ospm/core/UIToolkit"],function(e,t,n,i){var o={rightIconDom:null,rightIconContainerDom:null,setRightIconContainer:function(e){this.rightIconContainerDom=e},setRightIcon:function(e){var o=this.rightIconContainerDom||this.dom;null!==this.rightIconDom&&this.rightIconDom.parentNode.removeChild(this.rightIconDom),this.rightIconDom=t.createIcon(e,16),null!==this.rightIconDom&&(this.rightIconDom.classList.add(n.RIGHT_ICON_DEFAULT_CLASS),o.appendChild(this.rightIconDom)),i.scheduleUpdateMinHeight(this)},getMaxIconHeight:function(){return this.rightIconDom?this.rightIconDom.clientHeight:0}};return o}),define("tao/ospm/ui/widgets/mixins/LabelMixin",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Constants"],function(e,t,n){function i(e){e.dom&&t.toggleClassName(e.dom,"ospm_has_label",e.labelDom.textContent.length)
}function o(e){e.getLabelableHTMLElement&&e.getLabelableHTMLElement()&&e.getLabel()?e.getLabelableHTMLElement().id?e.labelDom.setAttribute("for",e.getLabelableHTMLElement().id):e.getLabelableHTMLElement().setAttribute("aria-labelledby",e.labelDom.id):e.labelDom.removeAttribute("for")}function r(e,i){var o=e.defaultLabelStyle;"number"==typeof i&&(i>=n.TEXT_STYLE.LABEL1&&i<=n.TEXT_STYLE.LABEL6?o=i:i>=n.TEXT_STYLE.LABEL_BIG1&&i<=n.TEXT_STYLE.LABEL_BIG6&&(o=i)),e.currentLabelStyle=o,t.replaceClassNameStartingWith(e.labelDom,a,a+o)}var s,a="ospm_text_style_";return s={labelDom:null,labelText:null,defaultLabelStyle:0,currentLabelStyle:0,setLabel:function(n){if(t.validateLabel("Label",n),n=t.handlePossibleTextpoolReference(n),this.labelDom){if(t.isNBF()&&n&&("TextInput"===this.getClassName()||"Dropdown"===this.getClassName())){var r=Array.isArray(n)?n[0]:n;r=r.replace(/<br *\/>|<br>/gi," "),Array.isArray(n)?n[0]=r:n=r}e.createMarkupDomTree(this,this.labelDom,n,this.labelMarkupOptions)}this.getId&&this.getId()&&(this.labelDom.id=this.getId()+"__label"),this.labelText=Array.isArray(n)?n[0]:n,i(this),o(this),t.updateElement(this)},getLabel:function(){return this.labelText},setLabelStyle:function(e){r(this,e)},getLabelStyle:function(){return this.currentLabelStyle},buildLabelDom:function(t){return this.defaultLabelStyle=t||0,this.labelDom=e.createLabelElement("ospm_label"),r(this,t),this.labelDom}}}),define("tao/ospm/ui/widgets/mixins/SubLabelMixin",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Constants","tao/ospm/ui/UIUtils"],function(e,t,n,i){function o(e){e.dom&&t.toggleClassName(e.dom,"ospm_has_sublabel",!!e.subLabelDom.textContent.length)}function r(e){i.generateLabelableHtmlElementDescription(e,e.subLabelDom)}var s,a="ospm_text_style_";return s={subLabelDom:null,subLabelText:null,defaultSubLabelStyle:0,currentSubLabelStyle:-1,buildSubLabelDom:function(t){return this.defaultSubLabelStyle=t||0,this.subLabelDom=e.createSubLabel(),this.setSubLabelStyle(t),this.subLabelDom},setSubLabel:function(n){t.validateLabel("SubLabel",n),n=t.handlePossibleTextpoolReference(n),this.subLabelDom&&e.createMarkupDomTree(this,this.subLabelDom,n),this.getId&&this.getId()&&(this.subLabelDom.id=this.getId()+"__sublabel"),this.subLabelText=Array.isArray(n)?n[0]:n,o(this),r(this),t.scheduleUpdateMinHeight(this),t.updateElement(this)},getSubLabel:function(){return this.subLabelText},setSubLabelStyle:function(e){var i;i="number"==typeof e&&e>=n.TEXT_STYLE.SUBLABEL1&&e<=n.TEXT_STYLE.SUBLABEL6?e:this.defaultSubLabelStyle,this.currentSubLabelStyle=i,t.replaceClassNameStartingWith(this.subLabelDom,a,a+i)},getSubLabelStyle:function(){return this.currentSubLabelStyle}}}),define("tao/ospm/ui/widgets/mixins/TabIndexMixin",["tao/ospm/common/Toolkit","tao/ospm/common/OSPMError"],function(e,t){var n=function(n){var i=n.domName||"dom";return{getTabableElement:function(){return this[i]},getTabIndex:function(){return this[i]?this[i].tabIndex:null},setTabIndex:function(n){if(e.isSet(n)&&!e.isNumeric(n))throw new t("Parameter index muss, sofern gesetzt, numerisch sein.");this[i]&&(e.isNumeric(n)?this[i].tabIndex=parseInt(n,10):this[i].removeAttribute("tabindex"))},removeTabIndex:function(){this[i]&&(this[i].removeAttribute("tabindex"),this.removeFocus&&"function"==typeof this.removeFocus&&this.removeFocus())}}};return n.Default=new n({}),n}),define("tao/ospm/ui/widgets/mixins/ValueDisplayMixin",["tao/ospm/common/Toolkit","tao/ospm/common/Constants"],function(e,t){function n(e){e&&(e.classList.remove("ospm_display_color_positive"),e.classList.remove("ospm_display_color_neutral"),e.classList.remove("ospm_display_color_negative"),e.classList.remove("ospm_display_color_normal"),e.classList.remove("ospm_display_color_bold"),e.classList.remove("ospm_display_color_red"),e.classList.remove("ospm_display_color_yellow"),e.classList.remove("ospm_display_color_green"))}var i={setDisplay:function(e){switch(e){case t.DISPLAY.POSITIVE:this.updateDisplayClass("ospm_display_color_positive");break;case t.DISPLAY.NEUTRAL:this.updateDisplayClass("ospm_display_color_neutral");break;case t.DISPLAY.NEGATIVE:this.updateDisplayClass("ospm_display_color_negative");break;case t.DISPLAY.NORMAL:this.updateDisplayClass("ospm_display_color_normal");break;case t.DISPLAY.HIGHLIGHTED:this.updateDisplayClass("ospm_display_color_bold");break;case t.DISPLAY.DEFAULT:this.updateDisplayClass()}},updateDisplayClass:function(t){var i,o;i=this.dom.querySelector(".ospm_text_value"),o=this.dom.querySelector(".ospm_value_unit"),n(i),n(o),e.isSet(t)&&(o&&o.classList.add(t),i&&i.classList.add(t))}};return i}),define("tao/ospm/ui/widgets/mixins/ValueMixin",["tao/ospm/ui/widgets/mixins/ValueDisplayMixin","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/common/Constants"],function(e,t,n,i,o){function r(e,t){var i;i="number"==typeof t&&t>=o.TEXT_STYLE.LABEL1&&t<=o.TEXT_STYLE.LABEL6?t:e.defaultValueStyle,e.currentValueStyle=i,n.replaceClassNameStartingWith(e.valueDom,u,u+i)}function s(e){var t=e.valueDomValue.textContent.length;n.toggleClassName(e.dom,"ospm_has_value",t),n.toggleClassName(e.valueDom,"ospm_empty",!t)}function a(e){var t=e.valueDomValue.textContent.length&&e.valueDomUnit.textContent.length;n.toggleClassName(e.dom,"ospm_has_value_unit",t),n.toggleClassName(e.valueDomUnit,"ospm_empty",!t)}function l(e){return t.isSet(e)?(e=""+e,0===e.length?null:e):null}var c,u="ospm_text_style_";return c={valueDom:null,valueDomValue:null,valueDomUnit:null,defaultValueStyle:0,currentValueStyle:0,value:null,internalValueSetter:null,buildValueDom:function(e,n){var o;return this.defaultValueStyle=e||0,o=i.createValueDomTree(),this.valueDom=o.valueDomContainer,this.valueDomValue=o.valueDomValue,this.valueDomUnit=o.valueDomUnit,this.internalValueSetter=i.createClippingHandlerForMarkupDom(this,"valueDomValue",t.merge({preservedElement:this.valueDomUnit},n)).setter,r(this,e),s(this),a(this),this.valueDom},setValue:function(e){this.internalValueSetter?this.internalValueSetter(e):i.createMarkupDomTree(this,this.valueDomValue,e),this.value=l(e),s(this),a(this),n.updateElement(this),this.notifyInternalValueChange()},getValue:function(){return this.value},setValueUnit:function(e){this.valueUnit=l(e),this.valueDomUnit.textContent=n.toHTMLText(this.valueUnit),a(this),n.updateElement(this)},setValueStyle:function(e){r(this,e),n.updateElement(this)},getValueStyle:function(){return this.currentValueStyle}},t.merge(c,e,!0),c}),define("tao/ospm/ui/widgets/mixins/ValueChangedMixin",[],function(){var e={valueChanged:!1,isValueChanged:function(){return this.valueChanged},setValueChanged:function(){this.valueChanged=!0},resetValueChanged:function(){this.valueChanged=!1}};return e}),define("tao/ospm/ui/widgets/mixins/SubValueMixin",["tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Constants","tao/ospm/ui/IconFactory","tao/ospm/ui/UIConstants"],function(e,t,n,i,o,r){function s(e){var t=e.subValueContentDom.firstChild.textContent.length||e.subValueIconsDom.childNodes.length;n.toggleClassName(e.dom,"ospm_has_subvalue",t),n.toggleClassName(e.subValueDom,"ospm_empty",!t)}function a(e){var t=e.subValueDom.firstChild.textContent.length&&e.subValueDom.lastChild.textContent.length;n.toggleClassName(e.dom,"ospm_has_subvalue_unit",t),n.toggleClassName(e.subValueDom.lastChild,"ospm_empty",!t)}var l,c="ospm_text_style_";return l={subValueDom:null,subValueContentDom:null,defaultSubValueStyle:0,currentSubValueStyle:-1,subValueIconsDom:null,buildSubValueDom:function(e){return this.defaultSubValueStyle=e||0,this.subValueContentDom=t.createContainer("ospm_subvalue_content"),this.subValueDom=t.createContainer("ospm_subvalue_container"),this.subValueDom.appendChild(t.createSubValueField()),this.subValueDom.appendChild(t.createSubValueUnit()),this.subValueIconsDom=t.createContainer("ospm_text_subvalue_icons"),this.subValueContentDom.appendChild(this.subValueDom),this.subValueContentDom.appendChild(this.subValueIconsDom),this.setSubValueStyle(e),s(this),a(this),this.subValueContentDom},setSubValue:function(i){i&&e.isString(i)&&i.trim().length>0?t.createMarkupDomTree(this,this.subValueDom.firstChild,i):(n.removeAllChildren(this.subValueDom.firstChild),this.subValueDom.firstChild.textContent=""),s(this),a(this),n.updateElement(this)},setSubValueUnit:function(t){this.subValueDom.lastChild.textContent=t&&e.isString(t)&&t.trim().length>0?n.toHTMLText(t):"",s(this),a(this),n.updateElement(this)},setSubValueStyle:function(e){var t;t="number"==typeof e&&e>=i.TEXT_STYLE.LABEL1&&e<=i.TEXT_STYLE.LABEL6?e:this.defaultSubValueStyle,this.currentSubValueStyle=t,n.replaceClassNameStartingWith(this.subValueDom,c,c+t)},setSubValueIcon:function(e){this.removeAllSubValueIcons(),this.addSubValueIcon(e)},addSubValueIcon:function(e){var t,i=this.subValueIconsDom.firstChild;t=o.createIcon(e,16),t&&(t.classList.add(r.SUBVALUE_ICON_DEFAULT_CLASS),i?this.subValueIconsDom.insertBefore(t,i):this.subValueIconsDom.appendChild(t)),n.updateElement(this)},removeAllSubValueIcons:function(){n.removeAllChildren(this.subValueIconsDom),n.updateElement(this)},setSubValueIcons:function(e){this.removeAllSubValueIcons(),e.forEach(function(e){this.addSubValueIcon(e)}.bind(this))},getSubValueStyle:function(){return this.currentSubValueStyle}}}),define("tao/ospm/ui/widgets/mixins/HighlightMixin",["tao/ospm/core/DomFactory"],function(e){function t(e){return e.highlightContainerDom?e.highlightContainerDom:e.dom}var n,i="ospm_highlighted_text_widget",o="ospm_highlighted_widget_background";return n={backgroundHighlightElement:null,highlightContainerDom:null,setHighlight:function(n){var r;n&&this.isHighlighted()||!n&&!this.isHighlighted()||(r=t(this),n?(r.classList.add(i),this.backgroundHighlightElement=e.createContainer(o),r.appendChild(this.backgroundHighlightElement)):(r.classList.remove(i),this.backgroundHighlightElement=r.querySelector("."+o),this.backgroundHighlightElement&&r.removeChild(this.backgroundHighlightElement)),this.notifyWidgetWasHighlighted&&this.notifyWidgetWasHighlighted())},isHighlighted:function(){return t(this).classList.contains(i)}}}),define("tao/ospm/ui/widgets/mixins/ParentMixin",["tao/ospm/core/UIToolkit","tao/ospm/common/OSPMError"],function(e,t){function n(e,t){"function"==typeof e.getChildren&&e.getChildren().forEach(function(e){n(e,t),t(e)})}function i(e,t){"function"==typeof e.getDisplayedChildren&&e.getDisplayedChildren().forEach(function(e){i(e,t),t(e)})}function o(e,t){return"function"!=typeof e.getChildren||e.getChildren().every(function(e){return o(e,t)&&t(e)})}function r(e,t){return"function"==typeof e.getChildren&&e.getChildren().some(function(e){return r(e,t)||t(e)})}var s;return s={parent:null,disabled:!1,setEnabled:function(t){this.disabled=!t,this.disabled&&this.setError&&this.setError(),e.updateElement(this)},isEnabled:function(){return!this.disabled&&(!this.parent||this.parent.isEnabled())},setParent:function(n){if(null!==this.parent&&null!==n)throw new t("Das Widget hat bereits einen Parent");this.parent=n,n&&(e.updateElement(this),e.isRendered(this)&&e.callAfterRenderLayout(this))},getParent:function(){return this.parent},forEachChild:function(e){n(this,e)},forEachDisplayedChild:function(e){i(this,e)},everyChild:function(e){return o(this,e)},someChild:function(e){return r(this,e)},getAllChildren:function(){var e=[];return this.forEachChild(function(t){e.push(t)}),e},updateDisplay:function(){this.dom&&e.setDomEnabled(this.dom,this.isEnabled()),this.updateDisplayHandler&&this.updateDisplayHandler(),this.isCheckable&&this.isCheckable()&&this.setCheckableEnabled(this.isEnabled()?!0:!1),this.getChildren&&this.getChildren().forEach(function(e){e&&e.updateDisplay&&e.updateDisplay()})}}}),define("tao/ospm/ui/widgets/mixins/SortableContainerMixin",["tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants"],function(e,t,n){function i(e,i){var o=e.getElement(i),r=e.getElement(i+1);e.elements[i]=r,e.elements[i+1]=o,r.dom.parentNode.insertBefore(r.dom,o.dom),0===i&&(o.dom.querySelector(".ospm_icon_move_up").setAttribute("tabindex",n.TABINDEXES.DEFAULT),r.dom.querySelector(".ospm_icon_move_up").removeAttribute("tabindex")),i===e.elements.length-2&&(r.dom.querySelector(".ospm_icon_move_down").setAttribute("tabindex",n.TABINDEXES.DEFAULT),o.dom.querySelector(".ospm_icon_move_down").removeAttribute("tabindex")),t.updateElement(e)}var o={sortable:!1,moveElementListeners:null,setMoveElementListener:function(e){return this.clearMoveElementListeners(),e?this.addMoveElementListener(e):null},addMoveElementListener:function(e){return null===this.moveElementListeners&&(this.moveElementListeners={}),t.addListener(this.moveElementListeners,e)},removeMoveElementListener:function(e){return t.removeListener(this.moveElementListeners,e)},clearMoveElementListeners:function(){this.moveElementListeners=null},moveElementUp:function(e){var n=this.elements.indexOf(e);0>=n||(i(this,n-1),t.notifyListeners("MoveElement",this,this.moveElementListeners,{element:e,oldIndex:n,newIndex:n-1}))},moveElementDown:function(e){var n=this.elements.indexOf(e);n>=this.elementCount()-1||(i(this,n),t.notifyListeners("MoveElement",this,this.moveElementListeners,{element:e,oldIndex:n,newIndex:n+1}))}};return o}),define("tao/ospm/ui/widgets/mixins/SortableWidgetMixin",["tao/ospm/core/DomFactory","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/IconFactory","tao/ospm/common/OSPMError"],function(e,t,n,i,o,r){function s(t){var n,i,r,s;r=o.createIcon("arrowup_white"),s=o.createIcon("arrowdown_white"),n=e.createContainer("ospm_icon_move_up"),n.appendChild(r),t.insertBefore(n,t.firstChild),i=e.createContainer("ospm_icon_move_down"),i.appendChild(s),t.appendChild(i)}function a(e){var t,n;t=function(e){if(e.isEnabled()){if(!e.parent)return;e.parent.moveElementUp(e)}},n=function(e){if(e.isEnabled()){if(!e.parent)return;e.parent.moveElementDown(e)}},i.addActionListener(e.container.querySelector(".ospm_icon_move_up"),function(){t(e)},!1,!0),i.addActionListener(e.container.querySelector(".ospm_icon_move_down"),function(){n(e)},!1,!0)}var l={sortable:!0,container:null,setupSortButtonContainer:function(e){if(!n.isSet(e))throw new r("Container für Sortier-Schaltflächen ist kein DOM Element");this.container=e,s(e),a(this)}};return l}),define("tao/ospm/ui/widgets/mixins/ErrorMixin",["tao/ospm/core/DomFactory","tao/ospm/common/Config","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/ui/UIUtils","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s,a){function l(e,t){var n;if("number"==typeof t)return t>=0&&t<e.errorMessages.length&&t%1===0?t:-1;for(n=0;n<e.errorMessages.length;n++)if(e.errorMessages[n].id===t)return n;return-1}function c(e,t){var i;if("string"==typeof e)i={msg:e};else{if("object"!=typeof e)throw new n("Ein Fehler muss ein String oder ein Objekt sein ",{msg:e});i=e}return i.id=r.randomUUID(),t&&(i.noAutoDelete=!0),i}function u(e){d(e),e.errorUpdateTimerId||(e.errorUpdateTimerId=setTimeout(function(){h(e),e.errorMessageDom&&(e.getId&&e.getId()&&(e.errorMessageDom.id=e.getId()+"__errormessage"),m(e)),e.errorUpdateTimerId=null},t.WIDGET_ERROR_UPDATE_DELAY))}function d(e){0===e.getAllErrors().length?((e.dom.dataset.mode===i.INPUT_MODE.ERROR||void 0===e.dom.dataset.mode)&&(e.dom.dataset.mode=i.INPUT_MODE.ACTIVE),e.getLabelableHTMLElement&&e.getLabelableHTMLElement()&&e.getLabelableHTMLElement().setAttribute("aria-invalid","false")):(e.dom.dataset.mode=i.INPUT_MODE.ERROR,e.getLabelableHTMLElement&&e.getLabelableHTMLElement()&&e.getLabelableHTMLElement().setAttribute("aria-invalid","true"))}function h(t){var n=t,r=[];p(t)&&(n=t.parent),n.errorMessageDom&&(d(n),o.removeAllChildren(n.errorMessageDom),r=n.getAllErrors(),r.length>0?(t.errorHasIcon&&n.errorMessageDom.appendChild(a.createSimpleIcon(i.ICONS.WARNING_FILLED_S)),r.forEach(function(t){var i;t&&(i=e.createParagraph("ospm_widget_error_message_line"),e.createMarkupDomTree(n,i,t.msg||""),n.errorMessageDom.appendChild(i))}),n.dom.classList.add("ospm_has_error_messages"),n.errorMessageDom.classList.remove("ospm_hidden")):(n.dom.classList.remove("ospm_has_error_messages"),n.errorMessageDom.classList.add("ospm_hidden")),o.isIE()&&o.updateElement(n))}function m(e){e.errorMessageDom&&s.generateLabelableHtmlElementDescription(e,e.errorMessageDom)}function p(e){return e.parent&&"function"==typeof e.parent.displayErrorsOfChildren&&e.parent.displayErrorsOfChildren()}var f={errorMessages:[],errorUpdateTimerId:null,errorHasIcon:!1,errorMessageDom:null,getAllErrors:function(){return this.errorMessages.slice()},clearAllErrors:function(e){this.errorMessages=e?[]:this.errorMessages.filter(function(e){return e.noAutoDelete}),u(this)},setError:function(e,t){var n=null;return!r.isSet(e)||r.isString(e)&&!e.length?this.clearAllErrors(!0):(this.errorMessages=[],n=this.addError(e,t)),n},addError:function(e,t){var i;if(!r.isSet(e)||r.isString(e)&&!e.length)return null;if(!this.isEnabled())throw new n("Ein Fehler kann nur für aktivierte Widgets gesetzt werden");return i=c(e,t),this.errorMessages.push(i),u(this),i.id},getError:function(e){var t=l(this,e);return t>=0?this.errorMessages[t]:null},removeError:function(e){var t=l(this,e);return 0>t?!1:(this.errorMessages.splice(t,1),u(this),!0)},errorCount:function(){return this.errorMessages.length},hasError:function(){return this.errorCount()>0},buildErrorDom:function(){return this.errorMessageDom=e.createContainer("ospm_widget_error_message"),this.errorMessageDom.classList.add("ospm_hidden"),this.errorMessageDom.setAttribute("role","alert"),this.errorMessages=[],this.errorMessageDom},errorMessageShouldHaveIcon:function(){this.errorHasIcon=!0}};return f}),define("tao/ospm/ui/widgets/mixins/events/ImageClickMixin",["tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants"],function(e,t,n){var i;return i={imageClickListeners:null,toggleClickableClass:!0,setToggleClickableClass:function(e){void 0===e&&(e=!0),this.toggleClickableClass=e},setImageClickListener:function(e){return this.clearImageClickListeners(),e?this.addImageClickListener(e):null},addImageClickListener:function(e){var n;return null===this.imageClickListeners&&(this.imageClickListeners={}),n=t.addListener(this.imageClickListeners,e),this.dom&&this.toggleClickableClass&&this.dom.classList.add("ospm_clickable"),this.configKeyboardNavigation(),n},removeImageClickListener:function(n){var i;return i=t.removeListener(this.imageClickListeners,n),this.dom&&this.toggleClickableClass&&e.getKeys(this.imageClickListeners).length<=0&&this.dom.classList.remove("ospm_clickable"),this.configKeyboardNavigation(),i},clearImageClickListeners:function(){this.imageClickListeners=null,this.dom&&this.toggleClickableClass&&this.dom.classList.remove("ospm_clickable"),this.configKeyboardNavigation()},hasImageClickListeners:function(){return e.getKeys(this.imageClickListeners).length>0},notifyImageClickListeners:function(e){e=e||{},("function"!=typeof this.isEnabled||this.isEnabled())&&t.notifyListeners("Click",this,this.imageClickListeners,e)},configKeyboardNavigation:function(){var e=this,t=!0;e.setTabIndex&&"function"==typeof e.setTabIndex&&(e.isEnabled&&"function"==typeof e.isEnabled&&(t=e.isEnabled()),t=t&&e.hasClickListeners(),t?e.setTabIndex(n.TABINDEXES.DEFAULT):e.removeTabIndex&&e.removeTabIndex())}}}),define("tao/ospm/ui/widgets/mixins/events/ChangeMixin",["tao/ospm/core/UIToolkit"],function(e){var t={changeListeners:null,setChangeListener:function(e){return this.clearChangeListeners(),e?this.addChangeListener(e):null},addChangeListener:function(t){return null===this.changeListeners&&(this.changeListeners={}),e.addListener(this.changeListeners,t)},removeChangeListener:function(t){return e.removeListener(this.changeListeners,t)},clearChangeListeners:function(){this.changeListeners=null},notifyChangeListeners:function(t,n){var i=this;t=t||{},("function"!=typeof i.isEnabled||i.isEnabled())&&e.notifyListeners("Change",i,i.changeListeners,t),n||e.notifyInputChanged(this)}};return t}),define("tao/ospm/ui/widgets/mixins/ImageMixin",["tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/SvgFactory","tao/ospm/ui/widgets/mixins/events/ImageClickMixin","tao/ospm/ui/widgets/mixins/events/ChangeMixin","tao/ospm/ui/UIConstants","tao/ospm/common/Config","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a,l,c){function u(e,n){var i,o,r,s,a;return s=e.getImagePath(n),"function"==typeof e.getAvailableImageWidth?a=e.getAvailableImageWidth():(o=d(e),o&&(a=o.clientWidth)),t.getBilderpoolService().isBilderpoolReferenced(s)?(i=t.getBilderpoolService().normalizeImagePath(s).split("/"),3===i.length?a?r=352>=a?352:576>=a?576:960:null:i[3]):a?a:null}function d(e){function n(o){var r;return o.parent?o.parent.dom&&o.parent.dom.classList.contains("ospm_layout")?o.parent.dom&&o.parent.dom.classList.contains("ospm_flow_layout")?i:(r=t.findParent(o.dom,{cssClass:"ospm_column_layout"}),r?r:e.dom):n(o.parent):null}var i=e.dom;return n(e)}function h(t){var n=[];return e.isArray(t)?n=t.map(function(e){return m(e)}):"string"==typeof t&&t.length>0?n=[m(t)]:e.isObject(t)&&e.isSet(t.name)&&(n=[t]),n}function m(t){var n={};return"string"==typeof t?n.url=t:e.isObject(t)&&L(t.url)&&(n=t),n}function p(e,n){var i;e.openLightboxListener&&(e.openLightboxListener=null),t.removeAllChildren(e.imageWrapperDom),e.imageDom=[],n?(e.imageDom=null,e.dom.classList.add("ospm_gallery"),e.galleryNavigationContainer||(e.galleryNavigationContainer=e.dom),i=e.galleryNavigationContainer.getElementsByClassName("ospm_gallery_nav"),0===i.length&&e.buildNavigationDom(),_(e)):e.dom.classList.remove("ospm_gallery")}function f(e,n,i){t.addActionListener(n,function(){"prev"===i?e.showPreviousImage():"next"===i&&e.showNextImage()},!1,!0),g(e,n.firstChild)}function g(e,t){t.addEventListener("focus",function(){e.openLightboxListener&&e.dom.classList.add("ospm_focus_inside")}),t.addEventListener("blur",function(){e.openLightboxListener&&e.dom.classList.remove("ospm_focus_inside")})}function _(e){var t,n=null,i=null;return e.currentGalleryImage===e.numImages&&(i=e.galleryNavigationContainer.getElementsByClassName("ospm_next_image")[0]),1===e.currentGalleryImage&&(n=e.galleryNavigationContainer.getElementsByClassName("ospm_prev_image")[0]),e.infinite?(i&&v(i),void(n&&v(n))):(e.numImages>1&&(t=e.dom.querySelector(".ospm_gallery_nav.ospm_disabled"),t&&v(t)),n&&b(n),void(i&&b(i)))}function v(e){e.classList.remove("ospm_disabled"),e.firstChild.removeAttribute("arial-disabled")}function b(e){e.classList.add("ospm_disabled"),e.firstChild.setAttribute("arial-disabled","true")}function y(e,t,n){null===e.imageDom&&(e.imageDom=[]),e.imageDom[n]=t}function C(e,t){e.openLightboxListener?t.tabIndex=a.TABINDEXES.DEFAULT:t.removeAttribute("tabindex"),g(e,t)}function w(e,t){null===e.imagePath&&(e.imagePath=[]),e.imagePath.push(t)}function E(e,t){"undefined"==typeof t&&(t=e.hasImageClickListeners()),t?e.imageWrapperDom.classList.add("ospm_clickable"):e.imageWrapperDom.classList.remove("ospm_clickable")}function L(e){return"string"==typeof e||"function"==typeof e}function S(t,n){var i,o,r,s,a,l,c=[];for(i=0;i<n.length;i++)L(n[i].largeUrl)&&(r={},r.url=n[i].largeUrl,n[i].description&&(r.description=n[i].description),r.previewImageIndex=i,c.push(r));0!==c.length&&(E(t,!0),t.openLightboxListener=function(){l=!1,a=t.currentGalleryImage-1,o=D(c,a),t.lightbox=new document.OSPMEnvironment.Lightbox({imagePath:c,startAtImage:o}),t.lightbox.changeListeners=t.changeListeners,"function"==typeof c[o].url?(s=t.lightbox.getImageDom(o),c[o].url(function(e){s.addEventListener("load",function(){l||(t.lightbox.show(),l=!0),t.lightbox.afterImageChanged()}),s.src=e}),e.executeLater(function(){l||(t.lightbox.show(),l=!0)},A)):t.lightbox.show()})}function D(e,t){var n;for(n=0;n<e.length;n++)if(e[n].previewImageIndex===t)return n;return 0}function T(e,n,i,o){e.lightboxMode&&""===i||t.setImagePath(n,i,o,!0)}function I(e,t){var n,i;n=e.slideIndicatorContainer.querySelector(".ospm_slide_dot.ospm_active"),n&&n.classList.remove("ospm_active"),i=e.slideIndicatorContainer.querySelector(".ospm_slide_dot:nth-of-type("+t+")"),i&&i.classList.add("ospm_active")}function k(e,t){var n=e.slideIndicatorContainer.querySelector(".ospm_slide_numbers");n.firstChild.textContent=t+" von "+e.numImages}var x,A=2e3;return x={imagePath:null,imageDom:null,imageWrapperDom:null,galleryNavigationContainer:null,galleryMode:!1,currentGalleryImage:1,numImages:0,currentImageWidth:null,lightboxMode:!1,lightbox:null,openLightboxListener:null,useSlideIndicators:!1,infinite:!1,actualWidth:0,inPlaceEditingEnabled:!0,iconContainerDom:null,initializeImageTracker:function(e){e.addEventListener("load",function(e){e.stopPropagation(),t.updateElement(this)}.bind(this),!1)},setInPlaceEditingEnabled:function(e){this.inPlaceEditingEnabled=e,t.getBilderpoolService().manipulateFlyoutMenu(this)},isInPlaceEditingEnabled:function(){return this.inPlaceEditingEnabled},initializeInPlaceEditing:function(){var e=t.getBilderpoolService();e.isAdminMode()&&this.inPlaceEditingEnabled&&e.manipulateFlyoutMenu(this)},buildImageDom:function(e){return e?i.createIcon(e,0):n.createImage("ospm_img")},getImageDom:function(e){return this.isGalleryMode()&&"undefined"==typeof e?this.imageDom:(e=e||0,this.imageDom&&this.imageDom[e]?this.imageDom[e]:null)},createImage:function(e,t,n){var i=null,o=null;return this.isGalleryMode()?(i=this.buildGalleryItemDom(e,n),o=i.firstChild):(i=this.buildImageDom(e,n),o=i),this.createImageClickListener(o,t),i},createImageClickListener:function(e,n){var i=this;t.addActionListener(e,function(){var e={};i.openLightboxListener&&(i.openLightboxListener(),e={previewImageIndex:n}),i.imageClickListeners&&i.notifyImageClickListeners(e)})},buildGalleryItemDom:function(e,t){var i=n.createContainer("ospm_gallery_item");return i.appendChild(this.buildImageDom(e,t)),i},getNavigationIcon:function(e){return"prev"===e?i.createIcon({name:c.ICONS.BACK_S,color:c.ICON_COLOR.BRAND},32):i.createIcon({name:c.ICONS.NEXT_S,color:c.ICON_COLOR.BRAND},32)},buildNavigationDom:function(){function e(e,t){return function(){e.showImage(t+1)}}var i,o,r,s,l,c;if(i=n.createContainer("ospm_gallery_nav ospm_prev_image"),i.appendChild(this.getNavigationIcon("prev")),i.firstChild.setAttribute("role","button"),i.firstChild.setAttribute("aria-label","Vorheriges Bild anzeigen"),i.firstChild.tabIndex=a.TABINDEXES.DEFAULT,f(this,i,"prev"),this.imageWrapperDom.parentNode===this.galleryNavigationContainer?this.galleryNavigationContainer.insertBefore(i,this.imageWrapperDom):this.galleryNavigationContainer.appendChild(i),o=n.createContainer("ospm_gallery_nav ospm_next_image"),o.appendChild(this.getNavigationIcon("next")),o.firstChild.setAttribute("role","button"),o.firstChild.setAttribute("aria-label","Nächstes Bild anzeigen"),o.firstChild.tabIndex=a.TABINDEXES.DEFAULT,f(this,o,"next"),this.galleryNavigationContainer.appendChild(o),this.useSlideIndicators){for(this.slideIndicatorContainer=n.createContainer("ospm_slide_indicator_container"),l=n.createContainer("ospm_slide_indicators"),this.slideIndicatorContainer.appendChild(l),this.galleryNavigationContainer.appendChild(this.slideIndicatorContainer),this.slideIndicatorContainer.parentNode.classList.add("ospm_has_gallery_navigation"),s=0;s<this.numImages;s++)r=n.createContainer("ospm_slide_dot"),l.appendChild(r),t.addActionListener(r,e(this,s),!1,!0);c=n.createContainer("ospm_slide_numbers"),c.appendChild(n.createInlineContainer("",this.currentGalleryImage+" von "+this.numImages)),this.slideIndicatorContainer.appendChild(c),this.numImages>7?l.classList.add("ospm_hidden"):c.classList.add("ospm_hidden"),this.galleryNavigationContainer.classList.add("ospm_has_gallery_navigation")}},getImagePath:function(t){return this.isGalleryMode()?"number"==typeof t?this.imagePath[t]||null:this.imagePath:e.isArray(this.imagePath)&&e.isSet(this.imagePath[0])?this.imagePath[0]:null},isGalleryMode:function(){return this.galleryMode},showPreviousImage:function(){return this.showImage(this.currentGalleryImage-1)},showNextImage:function(){return this.showImage(this.currentGalleryImage+1)},showImage:function(e){function t(e,t){var i,o=e.getImageDom(t-1);return o?(i=e.getImageDom(e.currentGalleryImage-1),i.parentNode.classList.remove("ospm_active"),o.parentNode.classList.add("ospm_active"),e.currentGalleryImage=t,_(e),e.imageWrapperDom.dataset.scrollupdate="true","function"==typeof e.afterImageChanged&&e.afterImageChanged(t,n),e.notifyChangeListeners({previousImageIndex:n-1,currentImageIndex:t-1,isLightBox:e.lightboxMode}),e.useSlideIndicators&&(I(e,t),k(e,t)),!0):!1}var n=this.currentGalleryImage;return this.infinite&&(e===this.numImages+1?e=1:0===e&&(e=this.numImages)),!this.isGalleryMode()||"number"!=typeof e||this.numImages<e||1>e?!1:("function"==typeof this.beforeImageChanged?this.beforeImageChanged(n,e,function(){t(this,e)}.bind(this)):t(this,e),!0)},setCurrentImageWidth:function(e,t){null===this.currentImageWidth&&(this.currentImageWidth=[]),this.currentImageWidth[e]=t},setResponsiveImagePath:function(e,t){var n,i,o=h(e);if(this.imagePath=[],this.numImages=o.length,i=this.numImages>1||this.lightboxMode,0===this.numImages)return p(this,!1),"function"==typeof this.onEmptyImagePath&&this.onEmptyImagePath(),void(this.galleryMode=!1);for(this.galleryMode!==i&&p(this,i),this.galleryMode=i,S(this,o),n=0;n<o.length;n++)this.setCurrentImageWidth(n,0),this.setupImage(o[n],t,n);this.initializeInPlaceEditing()},setupImage:function(n,i,o){var r,s,a,c=null,d=!1,h=null,p=null;"string"==typeof n?(n=m(n),c=n.url):e.isObject(n)&&e.isSet(n.url)?c=n.url:e.isObject(n)&&e.isSet(n.name)&&(d=!0,p=n),o=o||0,"function"==typeof c&&this.lightboxMode?(w(this,c),c=""):(c=t.getBilderpoolService().normalizeImagePath(c),r=c.split("/"),"icon"===r[0]?(d=!0,d&&(p=r.slice(1).join("/"))):"res"===r[0]&&"ospm"===r[1]&&"icons"===r[2]&&void 0!==r[3]&&(d=!0,h=r[3].replace(".svg",""),p=r.join("/")),w(this,c)),s=this.getImageDom(o),(d||s&&s.classList.contains("ospm_icon"))&&(s&&this.imageWrapperDom.removeChild(this.isGalleryMode()?s.parentNode:s),s=null),s||(s=this.createImage(p,o,h),this.imageWrapperDom.appendChild(s),this.isGalleryMode()&&(s=s.firstChild),y(this,s,o)),d||(l.USE_JAVASCRIPT_RESPONSIVE_IMAGE_SOLUTION&&this.isBilderpoolReferenced(c)?(a=u(this,o),a&&(this.setCurrentImageWidth(o,a),r[3]=a,T(this,s,r.join("/"),i))):T(this,s,c,i),!p&&"string"==typeof n.description&&n.description.length>0&&(s.alt=n.description)),C(this,s,o),this.isGalleryMode()&&this.currentGalleryImage===o+1&&(s.parentNode.classList.add("ospm_active"),this.useSlideIndicators&&(I(this,this.currentGalleryImage),k(this,this.currentGalleryImage)))},isBilderpoolReferenced:function(n){if(!n){if(!e.isArray(this.imagePath)||"string"!=typeof this.imagePath[0])return!1;n=this.imagePath[0]}return t.getBilderpoolService().isBilderpoolReferenced(n)},resizeResponsiveImage:function(n,i){var o,r,s;n=n||0,s=this.getImagePath(n),l.USE_JAVASCRIPT_RESPONSIVE_IMAGE_SOLUTION&&this.isBilderpoolReferenced(s)&&(r=u(this,n),o=t.getBilderpoolService().normalizeImagePath(s).split("/"),e.isSet(this.currentImageWidth[n])&&this.currentImageWidth[n]<r&&(o[3]=r,t.setImagePath(this.getImageDom(n),o.join("/"),i),this.currentImageWidth[n]=r))}},e.merge(x,r),e.merge(x,s),x}),define("tao/ospm/ui/widgets/mixins/FocusableMixin",[],function(){var e={isFocusable:function(){var e=this.isEnabled();return this.hasClickListeners&&"function"==typeof this.hasClickListeners&&(e=e&&this.hasClickListeners()),e}};return e}),define("tao/ospm/ui/widgets/mixins/events/AutoCompleteSelectionMixin",["tao/ospm/core/UIToolkit"],function(e){var t={autoCompleteSelectionListeners:null,setAutoCompleteSelectionListener:function(e){return this.clearAutoCompleteSelectionListeners(),e?this.addAutoCompleteSelectionListener(e):null},addAutoCompleteSelectionListener:function(t){return null===this.autoCompleteSelectionListeners&&(this.autoCompleteSelectionListeners={}),e.addListener(this.autoCompleteSelectionListeners,t)
},removeAutoCompleteSelectionListener:function(t){return e.removeListener(this.autoCompleteSelectionListeners,t)},clearAutoCompleteSelectionListeners:function(){this.autoCompleteSelectionListeners=null},notifyAutoCompleteSelectionListeners:function(t){t=t||{},("function"!=typeof this.isEnabled||this.isEnabled())&&e.notifyListeners("AutoCompleteSelection",this,this.autoCompleteSelectionListeners,t)}};return t}),define("tao/ospm/ui/widgets/mixins/events/ClickMixin",["tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants"],function(e,t,n){var i;return i={clickListeners:null,setClickListener:function(e){return this.clearClickListeners(),e?this.addClickListener(e):null},addClickListener:function(e){var n;return null===this.clickListeners&&(this.clickListeners={}),n=t.addListener(this.clickListeners,e),this.dom&&this.dom.classList.add("ospm_clickable"),this.configKeyboardNavigation(),n},removeClickListener:function(n){var i;return i=t.removeListener(this.clickListeners,n),this.dom&&e.getKeys(this.clickListeners).length<=0&&this.dom.classList.remove("ospm_clickable"),this.configKeyboardNavigation(),i},clearClickListeners:function(){this.clickListeners=null,this.dom&&this.dom.classList.remove("ospm_clickable"),this.configKeyboardNavigation()},hasClickListeners:function(){return e.getKeys(this.clickListeners).length>0},notifyClickListeners:function(e){e=e||{},("function"!=typeof this.isEnabled||this.isEnabled())&&t.notifyListeners("Click",this,this.clickListeners,e)},configKeyboardNavigation:function(){var e=this,t=!0;e.setTabIndex&&"function"==typeof e.setTabIndex&&(e.isEnabled&&"function"==typeof e.isEnabled&&(t=e.isEnabled()),t=t&&e.hasClickListeners(),t?e.setTabIndex(n.TABINDEXES.DEFAULT):e.removeTabIndex&&e.removeTabIndex())}}}),define("tao/ospm/ui/widgets/mixins/events/OutsideClickMixin",["tao/ospm/core/UIToolkit"],function(e){var t={outsideClickListeners:null,cancelOnOutsideClick:!1,setOutsideClickListener:function(e){return this.clearOutsideClickListeners(),e?this.addOutsideClickListener(e):null},setCancelOnOutsideClick:function(e){this.cancelOnOutsideClick=!!e},addOutsideClickListener:function(t){return null===this.outsideClickListeners&&(this.outsideClickListeners={}),e.addListener(this.outsideClickListeners,t)},removeOutsideClickListener:function(t){return e.removeListener(this.outsideClickListeners,t)},clearOutsideClickListeners:function(){this.outsideClickListeners=null},notifyOutsideClickListeners:function(t){t=t||{},e.notifyListeners("OutsideClick",this,this.outsideClickListeners,t)},setCancelOnOutsideClickEventListener:function(t,n){e.addClickListener(this.dom,function(e){e&&e.target&&e.target.classList&&e.target.classList.contains(n)&&(this.notifyOutsideClickListeners(),this.cancelOnOutsideClick===!0&&t())}.bind(this))}};return t}),define("tao/ospm/ui/widgets/mixins/events/MutationEventMixin",["tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/common/Config"],function(e,t,n){function i(e,n,i){var o,r,s,a,l=!1;if("object"!=typeof i)return!1;n===c?(o=t.parseCSS(e.target.getAttribute("style")),r=t.parseCSS(e.oldValue)):(o=t.parseCSS(e.newValue),r=t.parseCSS(e.prevValue));for(s in i)if(i.hasOwnProperty(s)&&(a=i[s],!r[s]||a!==r[s]||o[s]&&a===o[s]?!o[s]||a!==o[s]||r[s]&&a===r[s]||(l=!0):l=!0,l))break;return l}function o(e,n,i){var o,r,s=!1;return i&&i.constructor===Array?(n===c?(o=t.parseClassNames(e.target.getAttribute("class")),r=t.parseClassNames(e.oldValue)):(o=t.parseClassNames(e.newValue),r=t.parseClassNames(e.prevValue)),i.forEach(function(e){s||(-1!==r.indexOf(e)&&-1===o.indexOf(e)?s=!0:-1===r.indexOf(e)&&-1!==o.indexOf(e)&&(s=!0))}),s):!1}function r(t,n){var i,o,r,s="attributeName";if(!n||n.constructor!==Array)return!1;if(t.attributeName||(s="attrName"),i=t[s],-1===n.indexOf(i))return!1;i=i.substring(5),t[s]?(r=t.target.dataset[i],o=t.oldValue):(r=t.newValue,o=t.prevValue);try{e.deleteProperty(t.target.dataset,i)}catch(a){t.target.dataset[i]=""}return r!==o}function s(e,t){return t&&t.constructor===Array?t.indexOf(e.target)>-1:!1}function a(e,n){var a,l,d=!1;if(!s(e,n.filterElements)&&t.isInPage(n.element))return a=Object.prototype.toString.call(e),l=n.eventTypeNames||{},a===c?"style"===e.attributeName&&l.attributesStyle?d=i(e,a,l.attributesStyle.watchList):"class"===e.attributeName&&l.attributesClass?d=o(e,a,l.attributesClass.watchList):e.attributeName&&0===e.attributeName.search("data-")&&l.attributesData?d=r(e,l.attributesData.watchList):(e.addedNodes.length>0||e.removedNodes.length>0)&&(l.childListAddedNodes||l.childListRemovedNodes)&&(d=!0):a===u&&("style"===e.attrName&&l.attributesStyle?d=i(e,a,l.attributesStyle.watchList):"class"===e.attrName&&l.attributesClass?d=o(e,a,l.attributesClass.watchList):e.attrName&&0===e.attrName.search("data-")&&l.attributesData?d=r(e,l.attributesData.watchList):"DOMNodeInserted"!==e.type&&"DOMNodeRemoved"!==e.type||!l.childListAddedNodes&&!l.childListRemovedNodes||(d=!0)),d}var l,c="[object MutationRecord]",u="[object MutationEvent]",d=["data-scrollupdate"],h={display:"none"},m=["ospm_hidden"];return l={mutationListenerTimer:null,addTransitionendEventListener:function(e){var t=!!e.useCapture;e.element&&(e.element.addEventListener("transitionend",e.listener,t),e.element.addEventListener("webkitTransitionEnd",e.listener,t))},addMutationEventListener:function(t){var i,o,r,s;s=function(i){!this.mutationListenerTimer&&a(i,t)&&(this.mutationListenerTimer=e.executeLater(function(){this.mutationListenerTimer=null,t.listener(i)}.bind(this),n.MUTATION_LISTENER_CALL_DELAY))}.bind(this),e.fetchProperty(t,"eventTypeNames.attributesClass")&&!e.fetchProperty(t,"eventTypeNames.attributesClass.watchList")&&(t.eventTypeNames.attributesClass.watchList=m),e.fetchProperty(t,"eventTypeNames.attributesStyle")&&!e.fetchProperty(t,"eventTypeNames.attributesStyle.watchList")&&(t.eventTypeNames.attributesStyle.watchList=h),e.fetchProperty(t,"eventTypeNames.attributesData")&&!e.fetchProperty(t,"eventTypeNames.attributesData.watchList")&&(t.eventTypeNames.attributesData.watchList=d),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i?(r="object"==typeof t.observerParams?t.observerParams:{subtree:!0,attributes:!0,childList:!0,attributeOldValue:!0},o=new i(function(e){e.forEach(function(e){s(e)})}),o.observe(t.element,r)):(t.element.addEventListener("DOMAttrModified",s),t.element.addEventListener("DOMNodeInserted",s),t.element.addEventListener("DOMNodeRemoved",s))}}}),define("tao/ospm/ui/widgets/mixins/events/ExpandMixin",["tao/ospm/core/UIToolkit"],function(e){var t={expandListeners:null,setExpandListener:function(e){return this.clearExpandListeners(),e?this.addExpandListener(e):null},addExpandListener:function(t){return null===this.expandListeners&&(this.expandListeners={}),e.addListener(this.expandListeners,t)},removeExpandListener:function(t){return e.removeListener(this.expandListeners,t)},clearExpandListeners:function(){this.expandListeners=null},notifyExpandListeners:function(t){t=t||{},("function"!=typeof this.isEnabled||this.isEnabled())&&e.notifyListeners("Expand",this,this.expandListeners,t)}};return t}),define("tao/ospm/ui/widgets/mixins/events/CollapseMixin",["tao/ospm/core/UIToolkit"],function(e){var t={collapseListeners:null,setCollapseListener:function(e){return this.clearCollapseListeners(),e?this.addCollapseListener(e):null},addCollapseListener:function(t){return null===this.collapseListeners&&(this.collapseListeners={}),e.addListener(this.collapseListeners,t)},removeCollapseListener:function(t){return e.removeListener(this.collapseListeners,t)},clearCollapseListeners:function(){this.collapseListeners=null},notifyCollapseListeners:function(t){t=t||{},("function"!=typeof this.isEnabled||this.isEnabled())&&e.notifyListeners("Collapse",this,this.collapseListeners,t)}};return t}),define("tao/ospm/ui/widgets/mixins/events/DropMixin",["tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit"],function(e,t,n){function i(e){e.dom.addEventListener("dragover",o,!1),e.dom.addEventListener("drop",function(t){r(e,t)},!1)}function o(e){e.preventDefault()}function r(t,i){var o;n.isIE()?(o=i.dataTransfer.getData("Text"),o=o.startsWith(e.DRAG_AND_DROP_CONTENT_TYPE)?o.replace(e.DRAG_AND_DROP_CONTENT_TYPE,""):null):o=i.dataTransfer.getData(e.DRAG_AND_DROP_CONTENT_TYPE),o&&(i.preventDefault(),s(t,{dragElementId:o,event:i}))}function s(e,t){var i=t||{};("function"!=typeof e.isEnabled||e.isEnabled())&&n.notifyListeners("Drop",e,e.dropListeners,i)}var a;return a={dropListeners:null,setDropListener:function(e){return this.clearDropListeners(),e?this.addDropListener(e):null},addDropListener:function(e){return null===this.dropListeners&&(this.dropListeners={},i(this)),this.dom&&this.dom.classList.add("ospm_dropzone"),n.addListener(this.dropListeners,e)},removeDropListener:function(e){var t;return t=n.removeListener(this.dropListeners,e),this.dom&&this.dom.classList.remove("ospm_dropzone"),t},clearDropListeners:function(){null!==this.dropListeners&&(this.dropListeners={}),this.dom&&this.dom.classList.remove("ospm_dropzone")}}}),define("tao/ospm/ui/widgets/mixins/events/HideMixin",["tao/ospm/core/UIToolkit"],function(e){var t={hideListeners:null,setHideListener:function(e){return this.clearHideListeners(),e?this.addHideListener(e):null},addHideListener:function(t){return null===this.hideListeners&&(this.hideListeners={}),e.addListener(this.hideListeners,t)},removeHideListener:function(t){return e.removeListener(this.hideListeners,t)},clearHideListeners:function(){this.hideListeners=null},notifyHideListeners:function(t){t=t||{},e.notifyListeners("Hide",this,this.hideListeners,t)}};return t}),define("tao/ospm/ui/widgets/mixins/events/InputToolHideMixin",["tao/ospm/core/UIToolkit"],function(e){var t={inputToolHideListeners:null,setInputToolHideListener:function(e){return this.clearInputToolHideListeners(),e?this.addInputToolHideListener(e):null},addInputToolHideListener:function(t){return null===this.inputToolHideListeners&&(this.inputToolHideListeners={}),e.addListener(this.inputToolHideListeners,t)},removeInputToolHideListener:function(t){return e.removeListener(this.inputToolHideListeners,t)},clearInputToolHideListeners:function(){this.inputToolHideListeners=null},notifyInputToolHideListeners:function(t){t=t||{},e.notifyListeners("InputToolHide",this,this.inputToolHideListeners,t)}};return t}),define("tao/ospm/ui/widgets/mixins/events/RestoreMixin",["tao/ospm/core/UIToolkit"],function(e){var t={restoreListeners:null,setRestoreListener:function(e){return this.clearRestoreListeners(),e?this.addRestoreListener(e):null},addRestoreListener:function(t){return null===this.restoreListeners&&(this.restoreListeners={}),e.addListener(this.restoreListeners,t)},removeRestoreListener:function(t){return e.removeListener(this.restoreListeners,t)},clearRestoreListeners:function(){this.restoreListeners=null},notifyRestoreListeners:function(t){t=t||{},e.notifyListeners("Restore",this,this.restoreListeners,t)}};return t}),define("tao/ospm/ui/widgets/mixins/events/OutOfBoundsMixin",["tao/ospm/core/UIToolkit"],function(e){var t={outOfBoundsListeners:null,setOutOfBoundsListener:function(e){return this.clearOutOfBoundsListeners(),e?this.addOutOfBoundsListener(e):null},addOutOfBoundsListener:function(t){return null===this.outOfBoundsListeners&&(this.outOfBoundsListeners={}),e.addListener(this.outOfBoundsListeners,t)},removeOutOfBoundsListener:function(t){return e.removeListener(this.outOfBoundsListeners,t)},clearOutOfBoundsListeners:function(){this.outOfBoundsListeners=null},notifyOutOfBoundsListeners:function(t){t=t||{},("function"!=typeof this.isEnabled||this.isEnabled())&&e.notifyListeners("OutOfBounds",this,this.outOfBoundsListeners,t)}};return t}),define("tao/ospm/ui/ValidatorUtils",["tao/ospm/common/OSPMError","tao/ospm/common/WidgetValidator"],function(e,t){function n(t,n,i){var o=n.validator;try{return o[t](n,i)}catch(r){throw e.fromError("Fehler in Funktionsaufruf WidgetValidator."+t,r)}}var i;return i={createValidator:function(n){if(!n)return t.NONE_VALIDATOR;if("function"==typeof n)return t.createValidatorClassForFunction(n);if(n.isWidgetValidator)return n;throw new e("Es sind nur Funktionen oder WidgetValidatoren als Eingabe-Validatoren erlaubt")},onValidate:function(e){return n("onValidate",e)},beforeInput:function(e,t){return n("beforeInput",e,t)},afterInput:function(e){return n("afterInput",e)},afterDataTypeValidated:function(e,t){return n("afterDataTypeValidated",e,t)},afterValueFormatted:function(e){return n("afterValueFormatted",e)},onEntry:function(e){return n("onEntry",e)},onExit:function(e){return n("onExit",e)}}}),define("tao/ospm/ui/widgets/mixins/MandatoryMixin",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/ValidatorUtils","tao/ospm/common/Constants"],function(e,t,n,i){var o;return o={mandatory:!1,mandatoryMessage:i.MANDATORY_MESSAGE,optionalDom:null,optionalDomLabel:null,isMandatory:function(){return this.mandatory},setMandatory:function(e){this.mandatory=!!e,t.toggleClassName(this.optionalDom,"ospm_hidden",this.mandatory)},getMandatoryMessage:function(){return this.mandatoryMessage},setMandatoryMessage:function(e){this.mandatoryMessage=e||i.MANDATORY_MESSAGE},getMandatoryValueEmptyError:function(){return this.isEmpty&&this.isMandatory()&&this.isEmpty()?{code:8,title:"Pflichtfeld",msg:this.getMandatoryMessage()}:void 0},checkMandatoryValueEmptyError:function(){var e=this.getMandatoryValueEmptyError();return e&&"function"==typeof this.hasError&&"function"==typeof this.setError&&this.setError(e),e},buildOptionalDom:function(){return this.optionalDom=e.createInlineContainer("ospm_optional ospm_text_style_36"),t.isNBF()||(this.optionalDom.textContent=" "),this.optionalDom.textContent+=this.optionalDomLabel?this.optionalDomLabel:i.NOT_MANDATORY_LABEL,this.optionalDom},setOptionalDomLabel:function(e){this.optionalDomLabel=e&&this.isFormElement()&&t.isMobile()?"("+e+")":i.NOT_MANDATORY_LABEL,this.optionalDom&&!t.isNBF()?this.optionalDom.textContent=" "+this.optionalDomLabel:this.optionalDom&&t.isNBF()&&(this.optionalDom.textContent=this.optionalDomLabel)},handleOptionalLabelInNbf:function(){t.isNBF()&&(this.labelDom&&this.labelDom.innerHTML.length>0||this.subLabelDom&&this.subLabelDom.innerHTML.length>0?(this.optionalDomLabel=" (optional)",this.optionalDom.textContent=this.optionalDomLabel):this.labelDom&&0===this.labelDom.innerHTML.length&&this.subLabelDom&&0===this.subLabelDom.innerHTML.length&&(this.optionalDomLabel="(optional)",this.optionalDom.textContent=this.optionalDomLabel))},getOptionalDomLabel:function(){return this.optionalDomLabel}}}),define("tao/ospm/ui/widgets/mixins/WrapMixin",["tao/ospm/common/Constants","tao/ospm/core/UIToolkit"],function(e,t){var n,i=[e.WRAP_MODE.DEFAULT,e.WRAP_MODE.WRAP,e.WRAP_MODE.NOWRAP];return n={wrapMode:e.WRAP_MODE.DEFAULT,setWrapMode:function(n){if(-1!==i.indexOf(n)&&this.dom){switch(n){case e.WRAP_MODE.DEFAULT:this.wrapMode=e.WRAP_MODE.DEFAULT,this.dom.classList.remove("ospm_widget_wrap"),this.dom.classList.remove("ospm_widget_nowrap");break;case e.WRAP_MODE.WRAP:this.wrapMode=e.WRAP_MODE.WRAP,this.dom.classList.add("ospm_widget_wrap"),this.dom.classList.remove("ospm_widget_nowrap");break;case e.WRAP_MODE.NOWRAP:this.wrapMode=e.WRAP_MODE.NOWRAP,this.dom.classList.add("ospm_widget_nowrap"),this.dom.classList.remove("ospm_widget_wrap")}t.updateElement(this)}},getWrapMode:function(){return this.wrapMode}}}),define("tao/ospm/ui/widgets/mixins/MaxCharsMixin",["tao/ospm/common/Constants","tao/ospm/core/UIToolkit"],function(e,t){var n={maximumChars:null,setMaximumChars:function(e){this.maximumChars="number"==typeof e&&e>0?e:null,this.setValue(this.getValue())},getMaximumChars:function(){return this.maximumChars},limitTheNumberOfChars:function(n,i,o){i.maximumChars&&-1===[e.KEYCODES.BACKSPACE,e.KEYCODES.TAB,e.KEYCODES.DELETE,e.KEYCODES.ENDE,e.KEYCODES.POS1,e.KEYCODES.LEFT_ARROW,e.KEYCODES.RIGHT_ARROW,e.KEYCODES.UP_ARROW,e.KEYCODES.DOWN_ARROW].indexOf(t.getEventCode(o))&&n.value.length-(n.selectionEnd-n.selectionStart)>=i.maximumChars&&o.preventDefault()},limitValue:function(e,t){var n=t.maximumChars;return e=e||"",n>0&&e.length>n&&(e=e.substr(0,n)),e},limitInputValue:function(e,t,n){var i=this.limitValue(t,n);return e.value!==i?(e.value=i,!0):!1}};return n}),define("tao/ospm/ui/SelectionGroup",["tao/lib/stapes","tao/ospm/ui/widgets/mixins/events/ChangeMixin"],function(e,t){function n(e,t){var n;for(n=0;n<e.elements.length;n++)if(e.elements[n].dom.id===t)return e.elements[n];return null}var i=e.subclass({name:null,elements:null,constructor:function(e){this.name=e,this.elements=[]},getName:function(){return this.name},addElement:function(e){var t,i=n(this,e.dom.id);i&&(t=this.elements.indexOf(i),t>=0&&this.elements.splice(t,1)),this.elements.indexOf(e)<0&&(this.elements.push(e),e.setGroup(this))},removeElement:function(e){var t=this.elements.indexOf(e);t>=0&&(this.elements.splice(t,1),e.setGroup(null))},getElements:function(){return this.elements},selectedElements:function(){var e,t,n=[];for(t=0;t<this.elements.length;t++)e=this.elements[t],i.isSelected(e)&&n.push(e);return n},getClassName:function(){return"SelectionGroup"}});return i.getSelectionGroup=function(e,t){return e[t]=e[t]||new i(t),e[t]},i.select=function(e,t){"function"==typeof e.setChecked?e.setChecked(t):e.setValue(t)},i.isSelected=function(e){return"function"==typeof e.isChecked?e.isChecked():e.getValue()},i.deselectAll=function(e){e.selectedElements().forEach(function(e){i.select(e,!1)})},i.proto(t),i}),define("tao/ospm/ui/widgets/mixins/CheckableMixin",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Constants","tao/ospm/ui/UIConstants","tao/ospm/ui/IconFactory","tao/ospm/ui/SelectionGroup","tao/ospm/common/Toolkit"],function(e,t,n,i,o,r,s){var a;return a={checkable:!1,checkboxIconContainerDom:null,checkableCheckboxContainer:null,checkableCheckboxDom:null,checkedListeners:null,isCheckable:function(){return this.checkable},setCheckboxIconContainer:function(e){this.checkboxIconContainerDom=e},initializeCheckableFields:function(e){void 0!==e.checkable&&(e.checkable&&this.setCheckable(e.checkable,e.checkableType),e.checked&&this.setChecked(e.checked),e.checkListener&&this.setCheckListener(e.checkListener))},setCheckable:function(i){var r=this.checkboxIconContainerDom||this.dom;this.checkable===i||-1===[!0,!1,"left","right"].indexOf(i)&&!s.isObject(i)||(i===!1?(this.checkable=!1,this.dom.classList.remove("ospm_checkable"),r.classList.remove("ospm_checkable_right"),r.removeChild(this.checkableCheckboxContainer),this.checkableCheckboxContainer=null,this.checkableCheckboxDom=null):(this.checkable||(this.checkable=!0,this.dom.classList.add("ospm_checkable"),null===this.checkableCheckboxContainer&&(this.checkableCheckboxContainer=e.createContainer("ospm_checkable_checkbox_container"),this.checkableCheckboxDom=e.createContainer("ospm_checkbox_box"),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("checkbox_unselected")),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("checkbox_highlighted")),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("checkbox_selected")),document.OSPMEnvironment.useAnimations()===!1&&this.checkableCheckboxDom.classList.add("ospm_no_transition"),this.setCheckableEnabled(this.isEnabled()),this.checkableCheckboxContainer.appendChild(this.checkableCheckboxDom),t.addClickListener(this.checkableCheckboxDom,function(){this.handleCheckableClick()}.bind(this),!1,!0),t.addEnterKeyListener(this.checkableCheckboxDom,function(){this.handleCheckableClick()}.bind(this),[n.KEYCODES.SPACE]),r.firstChild?r.insertBefore(this.checkableCheckboxContainer,r.firstChild):r.appendChild(this.checkableCheckboxContainer),"right"===i||"left"===i||i.position||this.setCheckablePosition("left"),i.hasOwnProperty("checked")||this.setChecked(!1))),"right"===i||"right"===i.position?this.setCheckablePosition("right"):("left"===i||"left"===i.position)&&this.setCheckablePosition("left"),i.hasOwnProperty("checked")&&this.setChecked(i.checked),i.hasOwnProperty("enabled")&&t.toggleClassName(this.checkableCheckboxDom,"ospm_disabled",i.enabled===!1)))},setCheckableEnabled:function(e){this.checkableCheckboxDom&&(e?this.checkableCheckboxDom.setAttribute("tabindex",i.TABINDEXES.DEFAULT):this.checkableCheckboxDom.removeAttribute("tabindex"))},isChecked:function(){return null!==this.checkableCheckboxDom?this.checkableCheckboxDom.hasAttribute("value"):!1},setChecked:function(e){this.isCheckable()&&(e?("radiobutton"===this.getCheckableType()&&this.group&&r.deselectAll(this.group),this.checkableCheckboxDom.setAttribute("value","true"),this.checkableCheckboxDom.classList.remove("not_checked")):(this.checkableCheckboxDom.removeAttribute("value"),this.checkableCheckboxDom.classList.add("not_checked")))},setCheckablePosition:function(e){t.isNBF()||this.isCheckable()&&(this.dom!==this.checkboxIconContainerDom&&this.checkboxIconContainerDom?t.toggleClassName(this.checkboxIconContainerDom,"ospm_checkable_right","right"===e):t.toggleClassName(this.dom,"ospm_checkable_right","right"===e))},getCheckablePosition:function(){return this.isCheckable()?this.dom!==this.checkboxIconContainerDom&&this.checkboxIconContainerDom?this.checkboxIconContainerDom.classList.contains("ospm_checkable_right")?"right":"left":this.dom.classList.contains("ospm_checkable_right")?"right":"left":null},setCheckableType:function(e){this.checkableCheckboxDom.textContent="","radiobutton"===e&&this.checkableCheckboxDom?(this.checkableCheckboxDom.classList.add("ospm_radiobutton_box"),t.isNBF()?this.checkableCheckboxDom.appendChild(o.createSimpleIcon("checkbox_filled_s")):(this.checkableCheckboxDom.appendChild(o.createSimpleIcon("radiobutton_unselected")),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("radiobutton_highlighted")),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("radiobutton_selected")))):(this.checkableCheckboxDom.classList.remove("ospm_radiobutton_box"),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("checkbox_unselected")),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("checkbox_highlighted")),this.checkableCheckboxDom.appendChild(o.createSimpleIcon("checkbox_selected")))},getCheckableType:function(){return this.isCheckable()?this.checkableCheckboxDom.classList.contains("ospm_radiobutton_box")?"radiobutton":"checkbox":null},handleCheckableClick:function(){"radiobutton"===this.getCheckableType()&&this.isChecked()||("function"!=typeof this.isEnabled||this.isEnabled())&&(this.setChecked(!this.isChecked()),this.notifyCheckListeners())},setCheckListener:function(e){return this.clearCheckListeners(),e?this.addCheckListener(e):null},addCheckListener:function(e){return null===this.checkedListeners&&(this.checkedListeners={}),t.addListener(this.checkedListeners,e)},removeCheckListener:function(e){return t.removeListener(this.checkedListeners,e)},clearCheckListeners:function(){this.checkedListeners=null},notifyCheckListeners:function(e){e=e||{},("function"!=typeof this.isEnabled||this.isEnabled())&&t.notifyListeners("Check",this,this.checkedListeners,e)}}}),define("tao/ospm/main/CommIdVerification",["tao/ospm/common/OSPMError","tao/ospm/main/WorkflowStepManager","tao/ospm/main/WorkflowStepState","tao/ospm/common/Toolkit","tao/ospm/common/Config"],function(e,t,n,i,o){function r(e){return e!==n.RUNNING}function s(n,i,o){var r,s=t.getStepState(i);if(void 0===s)throw new e(n+": Aufruf von unbekanntem WorkflowStep",{commId:i});if(r=s.getState(),o(r))throw new e(n+": Aufruf in ungültigem State des WorkflowStep",{state:r});return s}function a(n,i){var o=t.getStepState(i);if(void 0===o)throw new e(n+": Aufruf von unbekanntem WorkflowStep",{commId:i});return l(o)}function l(e){var t,n;return t=e.workflowStep,n=i.split(t,"_",3),n[1].toLowerCase()}function c(n,r,s){var a,c,u,h;if(s&&o.CHECK_PRIVILEGED_API_CALLS&&(c=t.getStepState(r),c&&(a=l(c),u=i.isArray(s)?s:[s],!u.some(function(e){return a===e||d===e}))))throw h={allowedApplications:u,workflowStepId:c.workflowStep},d&&(h.libraryApp=d),h.commId=r,new e(n+": Funktionsaufruf für Anwendung '"+a+"' nicht erlaubt",h)}var u,d;return u={checkForServerCommunication:function(e,t,n){return c(e,t,n),s(e,t,r)},checkForCurrentStep:function(e,t,n){return c(e,t,n),s(e,t,r)},retrieveApplicationName:a},document.OSPMEnvironment.executePrivileged=function(e,t){var n;t&&"function"==typeof t&&(n=d,d=e,t(),d=n)},u}),define("tao/ospm/main/LocalStepData",["tao/ospm/main/CommIdVerification","tao/ospm/common/OSPMError","tao/ospm/main/WorkflowStepState","tao/ospm/main/WorkflowStepManager","tao/ospm/ui/SelectionGroup"],function(e,t,n,i,o){var r=function s(t,r){var a={};this.getWorkflowStepId=function(){return r},this.isWorkflowStepActive=function(){var e=i.getStepState(t);return e&&e.getState()===n.RUNNING},this.getSelectionGroup=function(e){return o.getSelectionGroup(a,e)},this.checkForCurrentStep=function(n){e.checkForCurrentStep(n,t)},this.isWorkflowStepActive=function(){var e;return this===s.DEFAULT?!0:(e=i.getStepState(t),e&&e.getState()===n.RUNNING)}};return r.retrieveSelectionGroup=function(e,n){var i=null;if("string"==typeof n)i=r.getSelectionGroup(e,n);else if(n instanceof o)i=n;else if(void 0!==n&&null!==n)throw new t("Falsche Angabe von SelectionGroup: Weder undefined, null, Name noch SelectionGroup");return i},r.getSelectionGroup=function(e,t){return e=e||r.DEFAULT,e.getSelectionGroup(t)},r.DEFAULT=new r(-1,null),r}),define("tao/ospm/ui/widgets/mixins/GroupMixin",["tao/ospm/main/LocalStepData"],function(e){var t;return t={group:null,getGroup:function(){return this.group},setGroup:function(t){var n=this.getGroup(),i=e.retrieveSelectionGroup(this.stepData,t);n!==i&&(this.group=i,n&&n.removeElement(this),i&&i.addElement(this))}}}),define("tao/ospm/ui/widgets/mixins/DraggableMixin",["tao/ospm/common/Config"],function(e){var t;return t={dragStartListener:null,setDraggable:function(t){var n,i=this.isDraggable();t&&!i?(this.dom.setAttribute("draggable","true"),this.dragStartListener=function(t){n=!!document.documentMode,n?t.dataTransfer.setData("Text",e.DRAG_AND_DROP_CONTENT_TYPE+this.getId()):t.dataTransfer.setData(e.DRAG_AND_DROP_CONTENT_TYPE,this.getId())}.bind(this),this.dom.addEventListener("dragstart",this.dragStartListener,!1)):!t&&i&&(this.dom.removeAttribute("draggable"),this.dom.removeEventListener("dragstart",this.dragStartListener,!1),this.dragStartListener=null)},isDraggable:function(){return this.dom.hasAttribute("draggable")&&this.dom.getAttribute("draggable").equals("true")}}}),define("tao/ospm/ui/widgets/mixins/InputStorageMixin",["tao/ospm/common/Toolkit"],function(e){function t(e){return e.getInputData?e.getInputData():e.getValue()}function n(t,i){return t===i||e.isArray(t)&&e.isArray(i)&&t.length===i.length&&t.every(function(e,t){return n(e,i[t])})}var i={storedValues:null,storeValues:function(){this.storedValues=t(this)},restoreValues:function(e){var t=this.storedValues;null!==t&&this.isValuesModified()&&(this.setInputData?this.setInputData(t,e):(this.setValue(t),e&&this.notifyChangeListeners&&this.notifyChangeListeners()))},clearStoredValues:function(){this.storedValues=null},isValuesStored:function(){return null!==this.storedValues},isValuesModified:function(){return!n(this.storedValues,t(this))}};return i}),define("tao/ospm/ui/widgets/mixins/ContainerInputStorageMixin",["tao/ospm/core/UIToolkit"],function(e){function t(t,n){t.inputChanged!==n&&(t.inputChanged=n,e.notifyInputChanged(t,t))}function n(e){e.inputChanged&&t(e,!1)}function i(e,t,i){n(e),e.forEachChild(function(e){n(e),"function"==typeof e[t]&&e.isValuesStored&&e[t](i)})}function o(e){var t=[];return e.inputChanged&&t.push(e),e.forEachChild(function(e){(e.inputChanged===!0||"function"==typeof e.isValuesStored&&"function"==typeof e.isValuesModified&&e.isValuesStored()&&e.isValuesModified())&&t.push(e)}),t}var r={inputChangeListeners:null,inputChanged:!1,setInputChanged:function(e){t(this,!!e)},isInputChanged:function(e){return this.inputChanged||!e&&this.getChangedWidgets().length>0},setInputChangeListener:function(e){return this.clearInputChangeListeners(),e?this.addInputChangeListener(e):null},addInputChangeListener:function(t){return null===this.inputChangeListeners&&(this.inputChangeListeners={}),e.addListener(this.inputChangeListeners,t)},removeInputChangeListener:function(t){return e.removeListener(this.inputChangeListeners,t)},clearInputChangeListeners:function(){this.inputChangeListeners=null},notifyInputChangeListeners:function(t){e.notifyListeners("InputChange",this,this.inputChangeListeners,t||{})},storeValues:function(e){this.forEachChild(function(t){"function"==typeof t.storeValues&&t.isValuesStored&&(e&&t.isValuesStored()||t.storeValues())})},restoreValues:function(e){i(this,"restoreValues",e)},clearStoredValues:function(){i(this,"clearStoredValues")},onChildValueChange:function(e){this.notifyInputChangeListeners({changedWidget:e})},getChangedWidgets:function(){return o(this)}};return r}),define("tao/ospm/ui/BoxAlignment",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/ui/UIConstants","tao/ospm/common/Config"],function(e,t,n,i,o){function r(e,t){e.vOffset="number"==typeof t.vOffset||n.isArray(t.vOffset)?t.vOffset:F,e.hOffset="number"==typeof t.hOffset?t.hOffset:F}function s(e,t){return"undefined"!=typeof t&&n.isArray(e.vOffset)?e.vOffset.length>t?e.vOffset[t]:e.vOffset[0]:e.vOffset}function a(e){var t,i={};return t=n.fetchProperty(e,"alignDom"),i.alignDom=t?t:M.alignDom,t=n.fetchProperty(e,"alignAtDom"),i.alignAtDom=t?t:M.alignAtDom,i.strict=e?!!e.strict:!1,i}function l(e,t){var n,i=Array.isArray(e)?e:e.split(/,?\s+/);for(n=0;n<i.length;n++)if(-1!==t.indexOf(i[n]))return i[n];return t[0]}function c(e,t,n){var i,o=l(e,t),r=[o];if(n)return r;for(i=0;i<t.length;i++)-1===r.indexOf(t[i])&&r.push(t[i]);return r}function u(e,t){var n,i={x:0,y:0};return t.ownerDocument!==window.document&&(n=e.contentWrapper.getBoundingClientRect(),i.x=n.left,i.y=n.top),i}function d(e,t){var n=t.getBoundingClientRect(),i=u(e,t);return n.vpLeft=i.x+n.left,n.vpRight=i.x+n.right,n.vpTop=i.y+n.top,n.vpBottom=i.y+n.bottom,o.IF&&n.vpBottom>window.innerHeight&&(n.vpBottom=window.innerHeight),n}function h(e){var t,n,i,o,r;for(t=c(e.position.alignDom,P,e.position.strict),n=c(e.position.alignAtDom,P,e.position.strict),i=0;i<n.length;i++){for(o=0;o<t.length;o++){switch(t[o]){case I:r=p(e,n[i]);break;case k:r=f(e,n[i]);break;case x:r=g(e,n[i])}if(r>=0)break}if(r>=0)break}return r>=0?(e.alignDom.style.top=r+"px",e.alignDom.style.bottom=null,!0):!1}function m(e){var t,n,i,o,r,s;for(t=c(e.position.alignDom,R,e.position.strict),n=c(e.position.alignAtDom,R,e.position.strict),i=0;i<n.length;i++){for(o=0;o<t.length;o++){switch(t[o]){case A:r=b(e,n[i]);break;case O:r=_(e,n[i]);break;case N:r=v(e,n[i])}if(r>=0)break}if(r>=0)break}return r>=0?(r+e.alignDomRect.width>e.main.offsetWidth&&(s=r+e.alignDomRect.width-e.main.offsetWidth,r-=s),e.alignDom.style.left=100*r/e.main.offsetWidth+"%",!0):!1}function p(e,t){var n=C(e,I,t);return n>=0&&(e.vMarker=I),n}function f(e,t){var n=C(e,k,t);return n>=0&&(e.vMarker=k),n}function g(e,t){var n=C(e,x,t);return n>=0&&(e.vMarker=x),n}function _(e,t){var n=y(e,O,t);return n+e.alignDomRect.width>e.main.offsetWidth&&(n=-1),n>=0&&(e.hMarker=O),n}function v(e,t){var n=y(e,N,t);return n>=0&&(e.hMarker=N),n}function b(e,t){var n=y(e,A,t);return n>=0&&(e.hMarker=A),n}function y(e,t,n){var i;return i=n===N?t===N?e.alignAtDomRect.vpRight-e.alignDomRect.width+e.hOffset:t===A?e.alignAtDomRect.vpLeft-e.hOffset:e.alignAtDomRect.vpRight-e.alignDomRect.width/2:n===A?t===N?e.alignAtDomRect.vpLeft-e.alignDomRect.width+e.hOffset:t===A?e.alignAtDomRect.vpLeft-e.hOffset:e.alignAtDomRect.vpLeft-e.alignDomRect.width/2:t===N?e.alignAtDomRect.vpLeft+e.alignAtDomRect.width/2-e.alignDomRect.width+e.hOffset:t===A?e.alignAtDomRect.vpLeft+e.alignAtDomRect.width/2-e.hOffset:e.alignAtDomRect.vpLeft+e.alignAtDomRect.width/2-e.alignDomRect.width/2,e.position.strict||E(e,e.alignDomRect,i)||(i=-1),i
}function C(e,t,n){var i;return i=n===I?t===I?e.alignAtDomRect.vpTop+s(e,0):t===x?e.alignAtDomRect.vpBottom-e.alignDomRect.height-s(e,1):e.alignAtDomRect.vpTop-e.alignDomRect.height/2:n===x?t===I?e.alignAtDomRect.vpBottom+s(e,0):t===x?e.alignAtDomRect.vpBottom-e.alignDomRect.height-s(e,1):e.alignAtDomRect.vpBottom-e.alignDomRect.height/2:t===I?e.alignAtDomRect.vpTop+e.alignAtDomRect.height/2+s(e,0):t===x?e.alignAtDomRect.vpTop+e.alignAtDomRect.height/2-e.alignDomRect.height-s(e,1):e.alignAtDomRect.vpTop+e.alignAtDomRect.height/2-e.alignDomRect.height/2,e.position.strict||w(e,e.alignDomRect,i)||(i=-1),i}function w(e,t,n){return 0>n?!1:n+t.height<=e.contentWrapperRect.vpBottom}function E(e,t,n){return 0>n?!1:n+t.width<=e.contentWrapperRect.vpRight}function L(e,t,n){t||(document.OSPMEnvironment.isTouchDevice()?(e.alignDom.style.bottom="0",e.alignDom.style.top=null,e.vMarker=x):(e.alignDom.style.top="0",e.alignDom.style.bottom=null,e.vMarker=I)),n||(e.alignDom.style.left="0",e.hMarker=A)}function S(e){var t;e.contentWrapper||(document.OSPMEnvironment.isShowingDialogs()?e.contentWrapper=document.getElementById("ospm_app_main_middle"):document.OSPMEnvironment.isDialogWorkflowActive()?(t=document.querySelectorAll(".ospm_window_fullscreen_wrapper:not(.ospm_autoclose_wrapper) .ospm_dialogview_content"),e.contentWrapper=t[t.length-1]):e.contentWrapper=document.getElementById(i.WORKFLOWSTEP_CONTAINER_WRAPPER_ID))}function D(e){var t=0;return o.IF&&(t=n.fetchProperty(e.alignAtDom,"ownerDocument.defaultView.scrollY")),isNaN(t)?0:t}var T,I,k,x,A,O,N,M,P,R,F;return I=t.VERTICAL_ALIGNMENT.TOP,k=t.VERTICAL_ALIGNMENT.CENTER,x=t.VERTICAL_ALIGNMENT.BOTTOM,A=t.HORIZONTAL_ALIGNMENT.LEFT,O=t.HORIZONTAL_ALIGNMENT.CENTER,N=t.HORIZONTAL_ALIGNMENT.RIGHT,M={alignDom:[I,O],alignAtDom:[k,O]},P=[I,x,k],R=[O,N,A],F=t.DEFAULT_ALIGNMENT_OFFSET,T=e.subclass({alignDom:null,alignDomRect:null,alignAtDom:null,alignAtDomRect:null,main:null,position:{alignDom:"",alignAtDom:""},vOffset:F,hOffset:F,vMarker:I,hMarker:O,contentWrapper:null,contentWrapperRect:null,constructor:function(e){this.alignDom=e.alignDom,this.alignAtDom=e.alignAtDom,this.position=a(e.position),this.vMarker=I,this.hMarker=O,this.vOffset=F,this.hOffset=F,r(this,e),this.main=document.body},getVMarker:function(){return this.vMarker},getHMarker:function(){return this.hMarker},align:function(e){var t,n,i;S(this),this.contentWrapperRect=d(this,this.contentWrapper),this.alignAtDomRect=d(this,this.alignAtDom),this.alignDomRect=this.alignDom.getBoundingClientRect(),t=h(this),n=m(this),i=t&&n,i||L(this,t,n),"function"==typeof e&&e(i)},alignAtRightBottomOrTop:function(e){var n,i,o,a,l,c;e=e||{},r(this,e),S(this),this.contentWrapperRect=d(this,this.contentWrapper),this.alignAtDomRect=d(this,this.alignAtDom),this.alignDomRect=this.alignDom.getBoundingClientRect(),c=D(this),o=this.alignAtDomRect.right-this.alignDomRect.width+this.hOffset,16>o&&(o=16),n=this.alignAtDomRect.top+this.alignAtDomRect.height+s(this,0)+c,a=n+this.alignDomRect.height<=this.contentWrapperRect.height,i=this.alignAtDomRect.top-this.alignDomRect.height-s(this,1)+c,l=i>=0,e.vaAlignPosition===t.VERTICAL_ALIGNMENT.BOTTOM?(this.alignDom.style.top=n+"px",this.alignDom.style.left=o+"px"):e.vaAlignPosition===t.VERTICAL_ALIGNMENT.TOP?(this.alignDom.style.top=i+"px",this.alignDom.style.left=o+"px"):a||!a&&!l?(this.alignDom.style.top=n+"px",this.alignDom.style.left=o+"px"):(this.alignDom.style.top=i+"px",this.alignDom.style.left=o+"px"),this.alignDom.style.bottom=null,"function"==typeof e.callback&&e.callback(!0)},getClassName:function(){return"BoxAlignment"}})}),define("tao/ospm/ui/widgets/mixins/TooltipMixin",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/ui/BoxAlignment"],function(e,t,n,i){function o(e,n,o){var r,s;r=-1*parseInt(n.getAttribute("data-tooltip-x"),10),s=parseInt(n.getAttribute("data-tooltip-y"),10),new i({alignDom:e,alignAtDom:o,position:{alignDom:"top left",alignAtDom:"top left",strict:!0},vOffset:s,hOffset:r}).align(function(i){var r,s,a;i||(r=o.getBoundingClientRect(),s=parseInt(n.getAttribute("data-tooltip-x"),10),a=parseInt(n.getAttribute("data-tooltip-y"),10),e.style.left=r.left+s+"px",e.style.top=t.isNBF()&&e.className.startsWith("ospm_hbar_bar_tooltip")?r.top+2*parseInt(o.style.height)+"px":r.top+a+"px")})}function r(e,n,o){var r;r=n.getAttribute("data-tooltip-center-percent")?-(o.offsetWidth*(n.getAttribute("data-tooltip-center-percent")/100)-e.offsetWidth/2):-o.offsetWidth/2+e.offsetWidth/2,new i({alignDom:e,alignAtDom:o,position:{alignDom:"top left",alignAtDom:"top left",strict:!0},vOffset:-e.offsetHeight-10,hOffset:r}).align(function(n){var i;n?(i=o.getBoundingClientRect(),t.isNBF()&&e.className.startsWith("ospm_hbar_bar_tooltip")&&(e.style.top=i.top+2*parseInt(o.style.height)+"px")):(i=o.getBoundingClientRect(),e.style.top=t.isNBF()&&e.className.startsWith("ospm_hbar_bar_tooltip")?i.top+2*parseInt(o.style.height)+"px":i.top-o.height+"px")})}function s(e){return n.isSet(e.getAttribute("data-tooltip"))&&""!==e.getAttribute("data-tooltip")&&n.isSet(e.getAttribute("data-tooltip-x"))&&n.isSet(e.getAttribute("data-tooltip-y"))}function a(t,n){var i,o=document.body;switch(n){case h.HorizontalBar:i=o.querySelector(".ospm_hbar_bar_tooltip"),i||(i=e.createContainer("ospm_hbar_bar_tooltip ospm_fullscreen_wrapper_aligned_content ospm_tooltip"));break;default:i=o.querySelector(".ospm_chart_tooltip"),i||(i=e.createContainer("ospm_chart_tooltip ospm_fullscreen_wrapper_aligned_content ospm_tooltip"))}return i.textContent=t,o.appendChild(i),i}function l(e,t,n){var i,o,r,s=t,a=n,l=e,u=4,d=document.body.clientWidth<=l.offsetLeft+l.clientWidth+u;i=document.getElementById("ospm_tooltip_pseudo_style"),i||(i=document.head.appendChild(document.createElement("style")),i.setAttribute("id","ospm_tooltip_pseudo_style")),r=c(a),"0px"===l.style.left?(o=a.offsetWidth/100*s.getAttribute("data-tooltip-center-percent")+r,i.innerHTML=".ospm_hbar_bar_tooltip:after {left:"+o+"px;}"):d?(o=a.offsetWidth/100*s.getAttribute("data-tooltip-center-percent")-l.offsetLeft+r,i.innerHTML=".ospm_hbar_bar_tooltip:after {left:"+o+"px;}"):i.innerHTML=".ospm_hbar_bar_tooltip:after {left: calc(50% - "+u+"px);}"}function c(e){var t,n,i,o,r,s=e.getBoundingClientRect();return t=document.body,n=document.documentElement,i=window.pageXOffset||n.scrollLeft||t.scrollLeft,o=n.clientLeft||t.clientLeft||0,r=s.left+i-o,Math.round(r)}function u(){var e,t=document.body;e=t.querySelector(".ospm_chart_tooltip"),e||(e=t.querySelector(".ospm_hbar_bar_tooltip")),e&&t.removeChild(e)}var d,h;return h={Chart:1,HorizontalBar:2},d={registerTooltipEvents:function(e){var t;e.addEventListener("mouseover",function(n){var i=n.target;s(i)?(t=a(n.target.getAttribute("data-tooltip")),o(t,i,e)):u()}.bind(this)),e.addEventListener("mouseleave",function(){u()}.bind(this))},registerCenterTooltipEvents:function(e){var t,i,o,s;e.addEventListener("mouseover",function(c){s=c.target,o="",n.isSet(s.getAttribute("data-tooltip"))&&""!==s.getAttribute("data-tooltip")?(i=c.target.getAttribute("data-tooltip"),(c.target.getAttribute("prev-data-tooltip")||c.target.getAttribute("next-data-tooltip"))&&e.offsetWidth<6?(c.target.getAttribute("prev-data-tooltip")&&(o+=c.target.getAttribute("prev-data-tooltip"),o+=" - "),o+=i,c.target.getAttribute("next-data-tooltip")&&(o+=" - ",o+=c.target.getAttribute("next-data-tooltip"))):o=i,t=a(o,h.HorizontalBar),r(t,s,e),l(t,s,e)):u()}.bind(this)),e.addEventListener("mouseleave",function(){u()}.bind(this))}}}),define("tao/ospm/ui/widgets/mixins/CharacterCountdownMixin",["tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/core/DomFactory"],function(e,t,n){function i(e){e.dom&&e.dom.classList.remove("ospm_has_character_countdown"),e.characterCountdownDom&&(e.characterCountdownDom.classList.add("ospm_hidden"),e.characterCountdownDom.classList.remove("ospm_character_countdown_highlighted"),""!==e.characterCountdownDom.textContent&&(e.characterCountdownDom.textContent=""))}function o(e,n){var i,o;i="FormattedTextEditor"===e.getClassName()?-99:0,i>n&&(n=i),o=n>=i?""+n:"",e.dom&&e.dom.classList.add("ospm_has_character_countdown"),e.characterCountdownDom&&(e.characterCountdownDom.classList.remove("ospm_hidden"),n<=t.CHARACTER_COUNTDOWN_HIGHLIGHT_COUNTER_LIMIT?e.characterCountdownDom.classList.add("ospm_character_countdown_highlighted"):e.characterCountdownDom.classList.remove("ospm_character_countdown_highlighted"),e.characterCountdownDom.textContent!==o&&(e.characterCountdownDom.textContent=o))}var r={characterCountdownUpdateHandler:null,setCharacterCountdown:function(){},getCharacterCountdown:function(){},setCharacterCountdownUpdateHandler:function(e){this.characterCountdownUpdateHandler="function"==typeof e?e:null},getCharacterCountdownUpdateHandler:function(){return this.characterCountdownUpdateHandler},updateCharacterCountdownDom:function(e,n){var r;e="number"==typeof e?e:0,n="number"==typeof n?n:0,r=n-e,n&&this.dom&&this.characterCountdownDom&&e&&!(r>=t.CHARACTER_COUNTDOWN_DISPLAY_COUNTER_LIMIT)?o(this,r):i(this)},buildCharacterCountdownDom:function(){return this.characterCountdownDom=n.createContainer("ospm_character_countdown ospm_hidden"),this.characterCountdownDom}};return r}),define("tao/ospm/ui/widgets/mixins/PillMixin",["tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory"],function(e,t){return{buildPill:function(n,i){var o;return o=e.createContainer("ospm_pill"),i&&o.appendChild(t.createIcon(i,16)),o.appendChild(e.createSpanLabel(n)),o}}}),define("tao/ospm/ui/widgets/mixins/Mixins",["tao/ospm/ui/widgets/mixins/HintMixin","tao/ospm/ui/widgets/mixins/InfoTextMixin","tao/ospm/ui/widgets/mixins/LeftIconMixin","tao/ospm/ui/widgets/mixins/RightIconMixin","tao/ospm/ui/widgets/mixins/LabelMixin","tao/ospm/ui/widgets/mixins/SubLabelMixin","tao/ospm/ui/widgets/mixins/TabIndexMixin","tao/ospm/ui/widgets/mixins/ValueMixin","tao/ospm/ui/widgets/mixins/ValueDisplayMixin","tao/ospm/ui/widgets/mixins/ValueChangedMixin","tao/ospm/ui/widgets/mixins/SubValueMixin","tao/ospm/ui/widgets/mixins/HighlightMixin","tao/ospm/ui/widgets/mixins/ParentMixin","tao/ospm/ui/widgets/mixins/SortableContainerMixin","tao/ospm/ui/widgets/mixins/SortableWidgetMixin","tao/ospm/ui/widgets/mixins/ErrorMixin","tao/ospm/ui/widgets/mixins/ImageMixin","tao/ospm/ui/widgets/mixins/FocusableMixin","tao/ospm/ui/widgets/mixins/events/AutoCompleteSelectionMixin","tao/ospm/ui/widgets/mixins/events/ChangeMixin","tao/ospm/ui/widgets/mixins/events/ClickMixin","tao/ospm/ui/widgets/mixins/events/ImageClickMixin","tao/ospm/ui/widgets/mixins/events/OutsideClickMixin","tao/ospm/ui/widgets/mixins/events/MutationEventMixin","tao/ospm/ui/widgets/mixins/events/ExpandMixin","tao/ospm/ui/widgets/mixins/events/CollapseMixin","tao/ospm/ui/widgets/mixins/events/DropMixin","tao/ospm/ui/widgets/mixins/events/HideMixin","tao/ospm/ui/widgets/mixins/events/InputToolHideMixin","tao/ospm/ui/widgets/mixins/events/RestoreMixin","tao/ospm/ui/widgets/mixins/events/OutOfBoundsMixin","tao/ospm/ui/widgets/mixins/MandatoryMixin","tao/ospm/ui/widgets/mixins/WrapMixin","tao/ospm/ui/widgets/mixins/MaxCharsMixin","tao/ospm/ui/widgets/mixins/CheckableMixin","tao/ospm/ui/widgets/mixins/GroupMixin","tao/ospm/ui/widgets/mixins/DraggableMixin","tao/ospm/ui/widgets/mixins/InputStorageMixin","tao/ospm/ui/widgets/mixins/ContainerInputStorageMixin","tao/ospm/ui/widgets/mixins/TooltipMixin","tao/ospm/ui/widgets/mixins/CharacterCountdownMixin","tao/ospm/ui/widgets/mixins/PillMixin","tao/ospm/ui/widgets/mixins/TooltipMixinV2"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I,k,x,A,O,N,M,P,R,F,B,z,V,H,U){return{HintMixin:e,InfoTextMixin:t,LeftIconMixin:n,RightIconMixin:i,LabelMixin:o,SubLabelMixin:r,TabIndexMixin:s.Default,TabIndexMixinFactory:s,ValueMixin:a,ValueDisplayMixin:l,ValueChangedMixin:c,SubValueMixin:u,HighlightMixin:d,ParentMixin:h,SortableContainerMixin:m,SortableWidgetMixin:p,ErrorMixin:f,ImageMixin:g,FocusableMixin:_,MandatoryMixin:A,WrapMixin:O,AutoCompleteSelectionMixin:v,ChangeMixin:b,ClickMixin:y,ImageClickMixin:C,OutsideClickMixin:w,MutationEventMixin:E,ExpandMixin:L,CollapseMixin:S,DropMixin:D,HideMixin:T,InputToolHideMixin:I,RestoreMixin:k,OutOfBoundsMixin:x,MaxCharsMixin:N,CharacterCountdownMixin:V,CheckableMixin:M,GroupMixin:P,DraggableMixin:R,InputStorageMixin:F,ContainerInputStorageMixin:B,TooltipMixin:z,PillMixin:H,TooltipMixinV2:U}}),define("tao/ospm/ui/UIElement",["tao/lib/stapes","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/common/WidgetValidator","tao/ospm/core/OnlineHelpService","tao/ospm/core/UIToolkit","tao/ospm/main/IFIdVerify","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/ui/ValidatorUtils"],function(e,t,n,i,o,r,s,a,l){var c,u,d="ID_";return c=e.subclass({appData:null,dom:null,validator:null,contextMenu:null,preventChangeEvent:!1,constructor:function(){throw new t("UIElement ist eine abstrakte Klasse und wird nicht direkt verwendet")},initializeFields:function(e){this.setId(e.id),this.setValidator(e.validator)},setId:function(e){this.dom&&(this.dom.id=c.createId(e,this))},getId:function(){var e;return this.dom&&this.dom.id?(e=this.dom.id,e.length>=3?e.substr(3):e):null},setVisible:function(e){r.toggleClassName(this.dom,"ospm_invisible",!e)},isVisible:function(){return!(!this.dom||this.dom.classList.contains("ospm_invisible"))},setHidden:function(e){this.dom&&!!e!==this.isHidden()&&(r.toggleClassName(this.dom,"ospm_hidden",e),r.updateElement(this.getParent()),r.updateIndentation(this.getParent()))},isElementEmpty:function(){return this.dom&&(this.dom.classList.contains("ospm_empty")||this.dom.classList.contains("ospm_is_empty"))},isHidden:function(){return this.dom&&this.dom.classList.contains("ospm_hidden")},setValidator:function(e){this.validator=l.createValidator(e)},validate:function(){var e=!0;return"function"==typeof this.setError&&this.setError(),this.validator&&"object"==typeof this.validator&&(e=!!l.onValidate(this)),"function"==typeof this.hasError&&(e=e&&!this.hasError()),e},validateAll:function(){var e=[];return this.forEachChild(function(t){t.isHidden()||t.validate()||e.push(t)}),this.validate()||e.push(this),e},getChildren:function(){return this.contextMenu?[this.contextMenu]:[]},getDisplayedChildren:function(){return this.getChildren().filter(function(e){return e.isVisible()&&!e.isHidden()})},elementWithId:function(e){var t;return e===this.getId()?this:(t=null,this.getChildren().every(function(n){return t=n.elementWithId(e),null===t}),t)},parentOfElement:function(e){var t;return e instanceof c&&(e=e.getId()),t=this.elementWithId(e),t?t.getParent():null},notifyInternalValueChange:function(){var e=this.getParent();null!==e&&e.notifyInternalValueChange&&e.notifyInternalValueChange()},setAllowBrowserContextMenu:function(e){r.toggleClassName(this.dom,"ospm_allow_contextmenu",e)}}),c.createId=function(e,t){var i;return void 0===e||null===e?d+n.randomUUID():(u||(u=new s("ID")),u.verify(e),t&&t.stepData&&(i=t.stepData.getWorkflowStepId(),i&&o.updateFieldHelpText(i,e,t)),d+e)},c.proto(a.ParentMixin),c}),define("tao/ospm/ui/layouts/Layout",["tao/ospm/ui/UIElement","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/common/OSPMError","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/main/WorkflowStepManager","tao/ospm/ui/UIUtils","tao/ospm/core/OSPMPage"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e,t){if("number"!=typeof t)throw new o("Der angegebene Index ist keine Zahl",{index:t});if(0>t||t>e)throw new o("Index außerhalb der zulässigen Grenzen",{index:t,min:0,max:e})}function h(e,t){var n;return n=e.sublayouts.indexOf(t),n>=0?n:(d(e.sublayouts.length-1,t),t)}function m(e){return e.backgroundColor||e.parent&&m(e.parent)||"default"}function p(e){return"boolean"==typeof e.listOpaque?e.listOpaque:e.parent&&p(e.parent)}function f(e){var t,n=m(e);t=p(e),"default"===n?(e.dom.style.backgroundColor="",e.dom.classList.add("ospm_background_default"),e.dom.classList.remove("ospm_background_color"),g(e,null)):(e.dom.style.backgroundColor=n,e.dom.classList.remove("ospm_background_default"),e.dom.classList.add("ospm_background_color"),t?e.columnsContainer.classList.add("ospm_list_opaque"):e.columnsContainer.classList.contains("ospm_list_opaque")&&e.columnsContainer.classList.remove("ospm_list_opaque"),g(e,n)),l.updateBackgroundColor()}function g(e,t){var n,i;for(i=e.dom.getElementsByClassName("ospm_layout_stickyarea"),n=0;n<i.length;n++)i[n].style.backgroundColor=t}function _(e){e.scroller&&!e.scrollerUpdater&&(e.scrollerUpdater=t.executeLater(function(){delete e.scrollerUpdater,e.scroller&&e.scroller.refresh()},0,e.scrollerUpdater))}function v(e){e.getChildren().forEach(function(e){e instanceof b?v(e):"List"===e.getClassName()&&e.adjustHeight()})}var b,y,C;return y={display:"none"},C=["ospm_hidden","ospm_column_layout_half_width","ospm_min_height_large"],b=e.subclass({rendered:!1,sublayouts:null,borderBottom:!1,borderTop:!1,backgroundColor:null,preventHeaderScroll:!1,columnsContainer:null,columnsAligner:null,listOpaque:null,scrollTop:0,constructor:function(){throw new o("Layout ist eine abstrakte Klasse und wird nicht direkt verwendet")},initializeFields:function(e){b.parent.initializeFields.call(this,e),this.dom.classList.add("ospm_background_default"),this.sublayouts=[],this.dummyZindex=1},getLayoutColumns:function(){throw new o("Layout.getLayoutColumns ist eine abstrakte Methode und muss von den Unterklassen implementiert werden")},afterRenderLayout:function(){this.setEvents(),b.onHeightChange(this),this.syncStickyColumnElements(),a.IF||!n.isFF()&&!n.isPortalBrowser()||(this.dom.scrollTop=1,this.dom.scrollTop=0)},updateDisplay:function(){f(this),this.getSubLayouts().forEach(function(e){e.updateDisplay()}),this.getLayoutColumns().forEach(function(e){e.updateDisplay()})},addSubLayout:function(e,n){var i;if(!(e instanceof b))throw new o("Nur Layouts dürfen als Sub-Layout hinzugefügt werden",{subLayout:e});t.isSet(n)?d(this.sublayouts.length,n):n=this.sublayouts.length,i=this.dom,n<this.sublayouts.length?(i.insertBefore(e.dom,this.sublayouts[n].dom),this.sublayouts.splice(n,0,e)):(i.appendChild(e.dom),this.sublayouts.push(e)),i.classList.add("ospm_layout_has_sublayouts"),e.dom.classList.add("ospm_disabled_scrollbar"),e.dom.classList.add("ospm_layout_sublayout"),e.setParent(this),this.syncStickyColumnElements(),e.onResize()},removeSubLayout:function(e){var t,n,i=h(this,e);return n=this.dom,t=this.sublayouts[i],n.removeChild(t.dom),t.dom.classList.remove("ospm_disabled_scrollbar"),t.dom.classList.remove("ospm_layout_sublayout"),this.sublayouts.splice(i,1),t.setParent(null),0===this.subLayoutCount()&&n.classList.remove("ospm_layout_has_sublayouts"),this.syncStickyColumnElements(),t},getSubLayouts:function(){return this.sublayouts.slice()},getSubLayout:function(e){return d(this.sublayouts.length-1,e),this.sublayouts[e]},subLayoutCount:function(){return this.sublayouts.length},setTopBorder:function(e){this.dom&&(e===!1?(this.dom.classList.remove("ospm_layout_border_top"),this.borderTop=!1):(this.dom.classList.add("ospm_layout_border_top"),this.borderTop=!0))},setBottomBorder:function(e){this.dom&&(e===!1?(this.dom.classList.remove("ospm_layout_border_bottom"),this.borderBottom=!1):(this.dom.classList.add("ospm_layout_border_bottom"),this.borderBottom=!0))},hasTopBorder:function(){return this.borderTop},hasBottomBorder:function(){return this.borderBottom},setBackgroundColor:function(e,t){var i=null;e&&("default"===e||c.isValidColor(e))&&(i=e),this.listOpaque=t,this.backgroundColor=i,n.updateElement(this)},getBackgroundColor:function(){return this.backgroundColor},getElements:function(){throw new o("Layout.getElements ist eine abstrakte Methode und muss von den Unterklassen implementiert werden")},getChildren:function(){var e=b.parent.getChildren.call(this);return this.getLayoutColumns().forEach(function(t){e=e.concat(t.getChildren())}),e.concat(this.sublayouts)},getChildPosition:function(e){return this.layoutColumn.getChildPosition(e)},setHidden:function(e){b.parent.setHidden.call(this,e),!this.getParent()&&this.dom&&n.isInPage(this.dom)&&n.updateElement(this)},getCompleteHeight:function(){var e=this.getHeight();return this.sublayouts.forEach(function(t){e+=t.getCompleteHeight()}),e},getScrollTop:function(){var e=this.scroller?Math.abs(this.scroller.y):this.dom.scrollTop;return this.isDialogChild()?e:window.pageYOffset||e},setEvents:function(){var e=this;this.addMutationEventListener({element:e.dom,listener:function(t){e.onColumnMutation(t),v(e)},filterElements:[],eventTypeNames:{attributesStyle:{watchList:y},attributesClass:{watchList:C},attributesData:{},childListAddedNodes:{},childListRemovedNodes:{}}})},isDialogChild:function(e){var t,n;for(n=this.dom;n&&n.classList;n=n.parentNode){if(t=n.classList,t.contains("ospm_dialogview_content")||t.contains("ospm_window_fullscreen_wrapper_container"))return!0;if(e!==!1&&t.contains("ospm_dialog_wf"))return!0}return!1},getHeight:function(){throw new o("Interne Funktion getHeight() nicht implementiert in "+this.getClassName())},onResize:function(){throw new o("Funktion onResize() nicht implementiert in "+this.getClassName())},scrollTo:function(e,t){var n,i,o,r=a.IF&&!this.isDialogChild();"number"==typeof e?(o=this.dom.scrollHeight-this.dom.offsetHeight,o>0&&(this.dom.scrollTop=e/100*o)):(i=e.dom.getBoundingClientRect(),r?(o=document.body.scrollTop||document.documentElement.scrollTop,n=window.innerHeight,o+=i.top):(o=this.dom.scrollTop,n=this.dom.offsetHeight,o+=i.top-this.dom.getBoundingClientRect().top),t&&(o-=n-i.height),r?window.scroll(0,o):this.dom.scrollTop=o)},scrollToLayoutTop:function(){a.IF||n.isIFWebView()?window.scrollTo(0,0):this.dom.scrollTop=0},onScroll:function(e){this.scrollTop!==e&&(this.scrollTop=e,b.updatePageHeaderPosition())},supportsStickyElements:function(){return!(this.parent instanceof b&&"TabDeck"!==this.parent.getClassName()||0!==this.sublayouts.length)},syncStickyColumnElements:function(){this.getLayoutColumns().forEach(function(e){e.syncStickyDisplay()})},disableiScroll:function(){window.isCordova&&this.scroller&&(this.scroller.destroy(),this.scroller=null)},getClassName:function(){return"Layout"}}),b.updatePageHeaderPosition=function(){},b.getAppContainerHeightOffset=function(){return 0},b.getHeaderHeight=function(e){return a.IF?b.getLayoutOffsetTop(e):u.isWideDisplay()&&!b.isTabDeckChild(e)?112:0},b.getLayoutOffsetTop=function(e){return a.IF?e.dom.getBoundingClientRect().top+window.pageYOffset:0},b.isTabDeckChild=function(e){var t=e.parent;return t&&"function"==typeof t.getClassName&&"TabDeck"===t.getClassName()},b.getMainUiAreaHeight=function(e){var t=n.findParent(e.dom,{cssClass:s.DIV_CLASS_MAIN_UI_AREA});return t?t.offsetHeight+b.getAppContainerHeightOffset():0},b.onHeightChange=function(e){var t,o;e||(t=l.currentStep(),t&&(e=t.layout)),e&&e instanceof b&&(a.IF&&!e.isDialogChild()&&(o=b.getMainUiAreaHeight(e),o>0&&(document.getElementById(i.OSPM_APP).style.height=o+"px")),(window.isCordova&&e.isDialogChild()||n.isIFWebView())&&(e.dom.style.zIndex=e.dummyZindex.toString(),e.dummyZindex++),_(e))},b.proto(r.MutationEventMixin,r.ContainerInputStorageMixin),b}),define("tao/ospm/ui/widgets/Widget",["tao/lib/stapes","tao/ospm/ui/UIElement","tao/ospm/ui/UIConstants","tao/ospm/ui/IconFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/core/DomFactory","tao/ospm/common/Constants","tao/ospm/core/EventLog"],function(e,t,n,i,o,r,s,a,l,c){var u,d,h,m,p,f="ospm_margin_top_",g="ospm_margin_bottom_",_="ospm_has_margin_top",v="ospm_has_margin_bottom",b="ospm_padding_top_",y="ospm_padding_bottom_",C="ospm_has_padding_top",w="ospm_has_padding_bottom";return u="ospm_min_height_large",d="ospm_min_height_small",h=32,m=t.subclass({summable:!0,sortable:!1,minHeight:"default",keepMinHeightLarge:!1,grouped:!1,indentLeft:0,flyOutIconDom:null,flyOutContent:null,flyOutMenu:null,hasFormLayout:!1,updateDisplayHandlers:null,constructor:function(){throw new s("Widget ist eine abstrakte Klasse und wird nicht direkt verwendet")},initializeFields:function(e){m.parent.initializeFields.call(this,e),e.visible===!1&&this.setVisible(!1),e.enabled===!1&&this.setEnabled(!1),e.bottomBorder===!1&&this.setBottomBorder(!1),e.minHeight&&this.setMinHeight(e.minHeight),e.summable===!1&&(this.summable=!1),e.grouped===!0&&this.setGrouped(!0),e.hidden===!0&&this.setHidden(!0),e.topMargin&&this.setTopMargin(e.topMargin),e.bottomMargin&&this.setBottomMargin(e.bottomMargin)},setGrouped:function(e){this.grouped=e,o.updateIndentation(this.parent),o.updateElement(this.parent)},isGrouped:function(){return this.grouped},isSortable:function(){return this.sortable},setMinHeight:function(e){switch(e){case"default":this.dom.classList.remove(u),this.dom.classList.remove(d);break;case"small":this.dom.classList.remove(u),this.dom.classList.add(d);break;case"large":this.dom.classList.remove(d),this.dom.classList.add(u);break;default:throw new s("Ungültige Angabe von height: Nur small, large, default sind erlaubt",{value:e})}this.minHeight=e,o.scheduleUpdateMinHeight(this)},setSummable:function(e){this.summable!==e&&(this.summable=e,this.notifyInternalValueChange(!0))},isSummable:function(){return this.summable},setBottomBorder:function(e){this.dom&&(o.toggleClassName(this.dom,"ospm_widget_without_bottom_border",e!==!0),o.scheduleUpdateMinHeight(this))},setFlyoutMenu:function(e){if(this.dom){if(r.isSet(e)){if(!r.isOfClass(e,"List"))throw new s("Ungültiger Inhalt (keine List) für ein Flyout-Menü");this.dom.classList.add("ospm_has_flyoutmenu"),this.flyOutContent=e,this.flyOutIconDom||(this.flyOutIconDom=a.createContainer("ospm_flyout_icon_container ospm_icon_size_24 ospm_icon_flyout"),this.flyOutIconDom.setAttribute("tabindex",n.TABINDEXES.DEFAULT),this.flyOutIconDom.setAttribute("role","button"),this.flyOutIconDom.setAttribute("aria-label","Kontextmenü öffnen"),this.flyOutIconDom.setAttribute("aria-haspopup","true"),this.flyOutIconDom.appendChild(i.createIcon("more")),this.dom.appendChild(this.flyOutIconDom),o.addActionListener(this.flyOutIconDom,function(){c.logUserEvent("ShowFlyout",this),this.flyOutIconDom.setAttribute("aria-expanded","true"),this.flyOutMenu=new p({content:this.flyOutContent,alignAtWidget:this,outsideClickListener:this.closeFlyoutMenu.bind(this),hideListener:function(){this.flyOutIconDom.removeAttribute("aria-expanded"),this.flyOutMenu&&(this.flyOutMenu.setContent(null),this.flyOutMenu=null,this.contextMenu=null)}.bind(this)}),this.flyOutMenu.show({position:{alignDom:["top",l.HORIZONTAL_ALIGNMENT.RIGHT],alignAtDom:["top",l.HORIZONTAL_ALIGNMENT.RIGHT]},vOffset:this.flyout_context_menu_view_v_offset?this.flyout_context_menu_view_v_offset:[this.flyOutIconDom.offsetTop+this.flyOutIconDom.clientHeight,-this.flyOutIconDom.offsetTop+this.dom.offsetHeight],hOffset:this.flyout_context_menu_view_h_offset?this.flyout_context_menu_view_h_offset:h})}.bind(this),!1,!0))}else this.flyOutIconDom&&this.dom.removeChild(this.flyOutIconDom),this.flyOutIconDom=null,this.closeFlyoutMenu(),this.flyOutContent=null,this.dom.classList.remove("ospm_has_flyoutmenu");this.initializeInPlaceEditing&&this.initializeInPlaceEditing()}},getFlyoutMenu:function(){return this.flyOutContent},closeFlyoutMenu:function(){this.flyOutMenu&&this.flyOutMenu.hide()},setTopMargin:function(e){var t="";this.isMarginValid(e)&&e!==l.MARGIN.DEFAULT&&(t=f+e),o.toggleClassName(this.dom,_,t),o.replaceClassNameStartingWith(this.dom,f,t)},setBottomMargin:function(e){var t="";this.isMarginValid(e)&&e!==l.MARGIN.DEFAULT&&(t=g+e),o.toggleClassName(this.dom,v,t),o.replaceClassNameStartingWith(this.dom,g,t)},isMarginValid:function(e){var t=Object.keys(l.MARGIN).some(function(t){return l.MARGIN[t]===e});return!t||e!==l.MARGIN.MINIMAL&&e!==l.MARGIN.SMALL&&e!==l.MARGIN.MEDIUM&&e!==l.MARGIN.LARGE||(t=!1),t},focus:function(){var e,t,n,i;if(!this.dom.classList.contains("ospm_widget_focused")){for(t=this.dom.ownerDocument.querySelectorAll(".ospm_widget_focused"),e=0;e<t.length;e++)n=t[e],n.classList.remove("ospm_widget_focused");this.dom.classList.add("ospm_widget_focused")}i=this.getTabableElement?this.getTabableElement()||this.dom:this.dom,i.focus()},removeFocus:function(){this.dom.classList.contains("ospm_widget_focused")&&this.dom.classList.remove("ospm_widget_focused")},isFocusable:function(){return!1},isFormElement:function(){var e=this.getParent();if(e)return e.dom.classList.contains("ospm_list_form")},onResize:function(){o.scheduleUpdateMinHeight(this)},switchToFormLayout:function(){this.hasFormLayout=!0},notifyInternalValueChange:function(e){(e||this.isSummable())&&m.parent.notifyInternalValueChange.call(this)},summingValues:function(){return[]},updateDisplayHandler:function(){var e;if(this.updateDisplayHandlers)for(e=0;e<this.updateDisplayHandlers.length;e++)this.updateDisplayHandlers[e](this)}}),m.setContextMenuViewClass=function(e){p=e},m.setTopPadding=function(e,t){var n="";m.isPaddingValid(t)&&t!==l.MARGIN.DEFAULT&&(n=b+t),o.toggleClassName(e.dom,C,n),o.replaceClassNameStartingWith(e.dom,b,n)},m.setBottomPadding=function(e,t){var n="";m.isPaddingValid(t)&&t!==l.MARGIN.DEFAULT&&(n=y+t),o.toggleClassName(e.dom,w,n),o.replaceClassNameStartingWith(e.dom,y,n)},m.isPaddingValid=function(e){return Object.keys(l.MARGIN).some(function(t){return l.MARGIN[t]===e})},m}),define("tao/ospm/ui/widgets/Text",["tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/IconFactory","tao/ospm/ui/UIConstants","tao/ospm/ui/layouts/Layout","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/EventLog"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e,n,l){var c,u,d,h,m=t.TEXT_STYLE.LABEL5;return h=l.getUTCDate&&"function"==typeof l.getUTCDate?new Date(l):i.deepCopy(l),c=o.createContainer("ospm_text_icon"),c.classList.add(n?"ospm_text_icon_right":"ospm_text_icon_left"),l&&(i.isObject(l)&&l.labelStyle&&(m=l.labelStyle),l.showLabel&&l.label&&(u=o.createContainer("ospm_text_icon_label",l.label),u.classList.add("ospm_text_style_"+m),c.appendChild(u),l.action&&"function"==typeof l.action&&(c.setAttribute("role","button"),c.setAttribute("tabindex",a.TABINDEXES.DEFAULT),c.classList.add("ospm_clickable"),r.addActionListener(c,function(){l.action()},!1,!0),i.deleteProperty(h,"action"))),d=n?s.createIcon(h,16,!1):s.createIcon(h,32,!1),d&&(n?(d.classList.add(a.RIGHT_ICON_DEFAULT_CLASS),c.appendChild(d)):(d.classList.add(a.LEFT_ICON_DEFAULT_CLASS),c.insertBefore(d,c.firstChild)))),c}function h(e){var n,i,s,a,l,c,u,d,h;e.dom=o.createContainer("ospm_text"),e.wrapperDom=o.createContainer("ospm_widget_content_wrapper"),r.isNBF()&&e.errorMessageShouldHaveIcon(),e.textContainerDom=o.createLeftAlignedContainer("ospm_text_container"),d=o.createContainer("ospm_labelfield ospm_labelfield_relative_container"),e.innerDomContainer=o.createContainer("ospm_horizontal_flex_container ospm_flex_items_align_center"),d.appendChild(e.innerDomContainer),e.textContainerDom.appendChild(d),e.wrapperDom.appendChild(e.textContainerDom),e.labelContainerDom=o.createContainer("ospm_list_entry_left_content"),e.leftIconsDom=o.createContainer("ospm_text_left_icons"),e.innerDomContainer.appendChild(e.leftIconsDom),e.innerDomContainer.appendChild(e.labelContainerDom),i=o.createContainer("ospm_list_entry_left_content_first_line"),a=e.buildLabelDom(t.TEXT_STYLE.LABEL3),c=e.buildInfoTextDom(),u=r.isNBF()?e.buildHintIconForTooltip():e.buildHintIcon(),i.appendChild(a),i.appendChild(c),i.appendChild(u),e.labelContainerDom.appendChild(i),s=o.createContainer("ospm_list_entry_left_content_second_line"),l=e.buildSubLabelDom(t.TEXT_STYLE.SUBLABEL5),s.appendChild(l),e.labelContainerDom.appendChild(s),e.longValueContainer=o.createContainer("ospm_text_long_value_container"),e.wrapperDom.appendChild(e.longValueContainer),n=e.buildErrorDom(),e.wrapperDom.appendChild(n),r.isNBF()||(h=e.buildHelpMessageContainer(),e.wrapperDom.appendChild(h)),e.buildSubValueDom(t.TEXT_STYLE.LABEL6),e.innerDomContainer.appendChild(e.subValueContentDom),e.rightContentDom=o.createContainer("ospm_list_entry_right_content"),e.buildValueDom(t.TEXT_STYLE.LABEL6),e.rightIconsDom=o.createContainer("ospm_text_right_icons"),e.rightContentDom.appendChild(e.valueDom),e.rightContentDom.appendChild(e.rightIconsDom),e.innerDomContainer.appendChild(e.rightContentDom),e.dom.appendChild(e.wrapperDom),r.addActionListener(e.wrapperDom,function(){e.notifyClickListeners()
})}function m(e){r.toggleClassName(e.dom,"ospm_has_drilldown","drilldown"===e.rightmostIconName)}function p(e){var n,i,o,s,a,l;if(r.isRendered(e)){if(e.isFormElement()&&!r.isNBF())f(e),n=e.rightIconsDom.offsetWidth,e.hintMarkerDom&&(n+=e.hintMarkerDom.offsetWidth),e.valueUnitDom&&e.valueUnitDom.textContent.length&&(n+=e.valueUnitDom.offsetWidth),e.valueDom.style.maxWidth="calc(100% - "+n+"px)";else{if(null===e.getValue()&&0===e.subValueContentDom.offsetWidth)return f(e,!0),C(e,e.labelContainerDom),void r.updateElementHeight([e.textContainerDom,e.longValueContainer]);f(e),e.longValueContainer.childNodes.length>0&&r.moveChildren(e.longValueContainer,e.valueDom),"center"===e.alignment?(y(e,e.subValueContentDom),y(e,e.valueDom),C(e,e.labelContainerDom)):(a=e.wrapperDom.offsetWidth,l=a/2,o=e.rightContentDom.offsetWidth,i=e.labelContainerDom.offsetWidth,s=e.subValueContentDom.offsetWidth,s?(r.isNBF()||(e.rightContentDom.style.width="160px"),C(e,e.labelContainerDom)):a>o+i?o>i?C(e,e.rightContentDom):C(e,e.labelContainerDom):e.wrapMode===t.WRAP_MODE.DEFAULT?(C(e,e.labelContainerDom),o>.62*a&&(w(e.valueDom,e.longValueContainer),r.moveChildren(e.valueDom,e.longValueContainer),r.isNBF()||(e.longValueContainer.style.paddingLeft=e.labelContainerDom.offsetLeft+"px",e.longValueContainer.style.paddingLeft="left"===e.getCheckablePosition()?2*e.labelContainerDom.offsetLeft+"px":e.labelContainerDom.offsetLeft+"px"))):i>l&&o>l?(C(e,e.labelContainerDom),C(e,e.rightContentDom)):o>l?C(e,e.rightContentDom):i>l&&C(e,e.labelContainerDom))}r.updateElementHeight(e.wrapperDom.children)}}function f(e,t){g(e.valueDom),g(e.subValueContentDom),t||g(e.labelContainerDom),r.isIE()&&(e.labelContainerDom.style.maxWidth="100%"),g(e.longValueContainer),g(e.rightContentDom),e.styleSet=!1,T=T.filter(function(t){return t.text!==e})}function g(e){e.removeAttribute("style")}function _(e){e.flex&&(e.node.style.flex="1"),e.hidden&&(e.node.style.display="none")}function v(){T.forEach(_),T=[],e.IF&&l.onHeightChange()}function b(t){var n;if(0===T.length){if(n=t.text.getParent(),n&&n.getChildren().length<30)return _(t),void(e.IF&&l.onHeightChange());r.requestAnimationFrame(v)}T.push(t),v()}function y(e,t){b({text:e,node:t,hidden:!0})}function C(e,t){b({text:e,node:t,flex:!0})}function w(e,t){var n;Array.prototype.some.call(e.classList,function(e){return n=e,0===e.indexOf("ospm_text_style_")}),Array.prototype.forEach.call(t.classList,function(e){0===e.indexOf("ospm_text_style_")&&(e===n?n=null:t.classList.remove(e))}),n&&t.classList.add(n)}function E(e){e.buttonRow&&(e.wrapperDom.appendChild(e.buttonRow.dom),e.backgroundHighlightElement&&e.backgroundHighlightElement.classList.add("ospm_highlighted_without_bottom_border_radius"))}function L(e){e.buttonRow&&e.buttonRow.dom.parentNode&&(e.buttonRow.dom.parentNode.removeChild(e.buttonRow.dom),e.backgroundHighlightElement&&e.backgroundHighlightElement.classList.remove("ospm_highlighted_without_bottom_border_radius"))}var S,D,T=[],I=[t.HORIZONTAL_ALIGNMENT.LEFT,t.HORIZONTAL_ALIGNMENT.CENTER];return S=c.subclass({stepData:null,innerDomContainer:null,textContainerDom:null,labelContainerDom:null,longValueContainer:null,buttonRow:null,longText:!1,alignment:null,rightmostIconName:null,rightIconsDom:null,rightIcons:null,leftmostIconName:null,leftIconsDom:null,leftIcons:null,wrapperDom:null,rightContentDom:null,constructor:function(e,t){e=e||{},this.rightIcons=[],this.leftIcons=[],this.stepData=t,h(this),this.setCheckboxIconContainer(this.textContainerDom),this.initializeFields(e),this.setupSortButtonContainer(this.wrapperDom)},setButtonRow:function(e){this.removeButtonRow(),this.buttonRow=e||null,i.isObject(e)&&e.setParent(this),this.notifyWidgetWasHighlighted()},getButtonRow:function(){return this.buttonRow},removeButtonRow:function(){i.isObject(this.buttonRow)&&(this.buttonRow.setParent(null),L(this),this.buttonRow=null)},setLeftIcon:function(e){this.removeAllLeftIcons(),this.addLeftIcon(e)},addLeftIcon:function(e,t){var n,o=this.leftIconsDom.firstChild;e&&(this.leftIcons.push(i.isObject(e)?e:{name:e}),n=d(this,!1,e),t&&n.classList.add("ospm_text_icon_grouped"),o||(this.leftmostIconName=e),this.leftIconsDom.appendChild(n),r.updateElement(this))},removeAllLeftIcons:function(){r.removeAllChildren(this.leftIconsDom),this.leftmostIconName=null,this.leftIcons=[],r.updateElement(this)},setLeftIcons:function(e){this.removeAllLeftIcons(),1!==e.length?e.forEach(function(e){this.addLeftIcon(e,!0)}.bind(this)):this.addLeftIcon(e[0])},setRightIcon:function(e){this.removeAllRightIcons(),this.addRightIcon(e)},addRightIcon:function(e){var n,o=this.rightIconsDom.firstChild;e&&("string"==typeof e&&("callout"!==e&&"drilldown"!==e&&"drilldown_12"!==e&&"drilldown_small"!==e||o||(e=t.ICONS.NEXT_S)),i.isObject(e)?("callout"!==e&&"drilldown"!==e&&"drilldown_12"!==e&&"drilldown_small"!==e||o||(e.name=t.ICONS.NEXT_S),this.rightIcons.push(e)):this.rightIcons.push({name:e}),n=d(this,!0,e),o?this.rightIconsDom.insertBefore(n,o):(this.rightmostIconName=e,m(this),this.rightIconsDom.appendChild(n)),r.updateElement(this))},removeAllRightIcons:function(){r.removeAllChildren(this.rightIconsDom),this.rightmostIconName=null,this.rightIcons=[],m(this),r.updateElement(this)},setRightIcons:function(e){this.removeAllRightIcons(),1!==e.length?e.forEach(function(e){i.deleteProperty(e,"showLabel"),this.addRightIcon(e)}.bind(this)):this.addRightIcon(e[0])},setAlignment:function(e){if(i.isSet(e)&&-1===I.indexOf(e))throw new n("Der Parameter alignment muss bei einem Header den Wert left oder center besitzen.",{parameter:parameter});"center"!==e&&(e="left"),e!==this.alignment&&(this.alignment=e,r.toggleClassName(this.labelContainerDom,"ospm_list_entry_left_center_content","center"===e),r.updateElement(this))},initializeFields:function(e){S.parent.initializeFields.call(this,e),this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setAlignment(e.alignment),this.setSubLabel(e.subLabel),this.setSubLabelStyle(e.subLabelStyle),this.setError(e.error),this.setInfoText(e.infoText),this.setHint(e.hint),this.setHintIcon(e.hintIcon),this.setValue(e.value),this.setValueUnit(e.valueUnit),this.setValueStyle(e.valueStyle),this.setSubValue(e.subValue),this.setSubValueUnit(e.subValueUnit),this.setSubValueStyle(e.subValueStyle),i.isSet(e.display)&&this.setDisplay(e.display),e.leftIcons?this.setLeftIcons(e.leftIcons):this.setLeftIcon(e.leftIcon),e.rightIcons?this.setRightIcons(e.rightIcons):e.rightIcon&&this.setRightIcon(e.rightIcon),e.subValueIcons?this.setSubValueIcons(e.subValueIcons):this.setSubValueIcon(e.subValueIcon),this.setHighlight(e.highlighted),this.setButtonRow(e.buttonRow),e.clickListener&&this.setClickListener(e.clickListener),e.draggable&&this.setDraggable(!0),this.initializeCheckableFields(e),this.setGroup(e.group),e.wrapMode&&this.setWrapMode(e.wrapMode)},summingValues:function(){var e=[];return this.isSummable()&&null!==this.getValue()&&e.push(this.getValue()),e},updateDisplay:function(){var e,t;S.parent.updateDisplay.call(this),p(this),this.configKeyboardNavigation(),this.getParent()&&"List"===this.getParent().getClassName()&&(e=this.getParent(),this.isEnabled()?(0!==e.getChildPosition(this)&&(t=this.dom.querySelector(".ospm_icon_move_up"),t.setAttribute("tabindex",a.TABINDEXES.DEFAULT),t.classList.add("ospm_clickable")),e.getChildPosition(this)<e.elementCount()-1&&(t=this.dom.querySelector(".ospm_icon_move_down"),t.setAttribute("tabindex",a.TABINDEXES.DEFAULT),t.classList.add("ospm_clickable"))):(this.dom.querySelector(".ospm_icon_move_up").removeAttribute("tabindex"),this.dom.querySelector(".ospm_icon_move_down").removeAttribute("tabindex"))),this.wantsLargeHeight()?this.textContainerDom.classList.add("ospm_text_large_height"):this.textContainerDom.classList.remove("ospm_text_large_height")},onResize:function(){S.parent.onResize.call(this),r.updateElement(this)},afterRenderLayout:function(){r.updateElement(this)},notifyWidgetWasHighlighted:function(){this.isHighlighted()?E(this):L(this)},switchToFormLayout:function(){var e,t;this.hasFormLayout||r.isNBF()||(S.parent.switchToFormLayout.call(this),t=this.dom.querySelector(".ospm_help_marker"),this.valueDom.parentNode.removeChild(this.valueDom),this.rightIconsDom.parentNode.removeChild(this.rightIconsDom),this.leftIconsDom.parentNode.removeChild(this.leftIconsDom),e=o.createContainer("ospm_text_value_form_wrapper"),e.appendChild(this.valueDom),t.parentNode.removeChild(t),e.appendChild(t),e.appendChild(this.rightIconsDom),e.appendChild(this.leftIconsDom),e.appendChild(this.errorMessageDom),this.innerDomContainer.appendChild(e),r.updateElement(this))},getChildren:function(){var e=S.parent.getChildren.call(this);return this.buttonRow&&e.push(this.buttonRow),e},getClassName:function(){return"Text"},setBottomMargin:function(e){r.isNBF()?S.parent.setBottomMargin.call(this,e):c.setBottomPadding(this,e)}}),D={wantsLargeHeight:function(){var e,t=!1;if("large"===this.minHeight)t=!0;else if(this.dom.classList.contains("ospm_has_sublabel"))t=!0;else if(this.rightIconsDom.children.length>0){for(e=0;e<this.rightIconsDom.length;e++)if(this.rightIconsDom[e].clientHeight>=a.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS){t=!0;break}}else if(this.leftIconsDom.children.length>0)for(e=0;e<this.leftIconsDom.length;e++)if(this.leftIconsDom[e].clientHeight>=a.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS){t=!0;break}return t},addClickListener:function(e){u.ClickMixin.addClickListener.call(this,e),this.hasClickListeners()&&(this.wrapperDom.setAttribute("role","button"),this.wrapperDom.classList.add("ospm_clickable"),this.dom.removeAttribute("role"),this.dom.classList.remove("ospm_clickable"))},removeClickListener:function(e){u.ClickMixin.removeClickListener.call(this,e),this.hasClickListeners()&&this.wrapperDom.setAttribute("role","button")},clearClickListeners:function(){u.ClickMixin.clearClickListeners.call(this),this.wrapperDom.setAttribute("role","button")}},S.proto(u.LabelMixin,u.SubLabelMixin,u.InfoTextMixin,u.HintMixin,u.ValueMixin,u.ClickMixin,u.HighlightMixin,u.SubValueMixin,u.ErrorMixin,u.SortableWidgetMixin,u.DraggableMixin,u.CheckableMixin,u.GroupMixin,u.WrapMixin,new u.TabIndexMixinFactory({domName:"wrapperDom"}),D),S.prototype.wantsLargeHeight=function(){var e,t,n=!1;if("large"===this.minHeight)n=!0;else if(this.dom.classList.contains("ospm_has_sublabel"))n=!0;else if(this.rightIconsDom.children.length>0&&this.leftIconsDom.children.length>0)e=Array.prototype.slice.call(this.rightIconsDom.children).map(function(e){return e.clientHeight}).concat(Array.prototype.slice.call(this.leftIconsDom.children).map(function(e){return e.clientHeight})),Math.max.apply(null,e)>=a.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS&&(n=!0);else if(this.rightIconsDom.children.length>0){for(t=0;t<this.rightIconsDom.children.length;t++)if(this.rightIconsDom.children[t].clientHeight>=a.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS){n=!0;break}}else if(this.leftIconsDom.children.length>0)for(t=0;t<this.leftIconsDom.children.length;t++)if(this.leftIconsDom.children[t].clientHeight>=a.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS){n=!0;break}return n},S}),define("tao/ospm/ui/views/NumPad",["tao/lib/stapes","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/BoxAlignment","tao/ospm/ui/IconFactory","tao/ospm/common/Logger","tao/ospm/core/FullScreenWrapperMixin","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a){function l(e){var n,i,r,s,l,c,u,d,h,m,p;for(i=t.createContainer("ospm_numpad ospm_fullscreen_wrapper_aligned_content"),l=t.createContainer("ospm_numpad_container ospm_fullscreen_wrapper_aligned_content_container"),i.appendChild(l),r=t.createContainer("ospm_numpad_header"),s=t.createContainer("ospm_numpad_header_content"),r.appendChild(s),l.appendChild(r),c=t.createContainer("ospm_numpad_buttoncontainer"),l.appendChild(c),u=[["1","2","3"],["4","5","6"],["7","8","9"],["+-","0",","]],d=0;d<u.length;d++){for(p=t.createContainer("ospm_numpad_buttonline"),h=0;h<u[d].length;h++)"+-"===u[d][h]?(m=o.createSimpleIcon("numpad_plusminus"),m.classList.add(S),m.classList.add("ospm_numpad_button_icon"),m.id=D):m=t.createContainer(S,u[d][h]),p.appendChild(m);c.appendChild(p)}return p=t.createContainer("ospm_numpad_buttonline"),m=o.createSimpleIcon(a.ICONS.CANCEL_M),m.classList.add(S),m.classList.add("ospm_numpad_button_icon"),m.id=T,p.appendChild(m),m=o.createSimpleIcon(a.ICONS.BACK_CANCEL_M),m.classList.add(S),m.classList.add("ospm_numpad_button_icon"),m.id=I,p.appendChild(m),m=o.createSimpleIcon("numpad_ok"),m.classList.add(S),m.classList.add("ospm_numpad_button_icon"),m.id=k,p.appendChild(m),c.appendChild(p),n=e.wrapContent(i,"ospm_window_fullscreen_wrapper3 ospm_window_fullscreen_wrapper_contextmenuview"),n.addEventListener("touchmove",function(e){e.preventDefault()}),n}function c(e,t){n.replaceClassNameStartingWith(e.numPadWindow,E,L.replace("{v}",t.getVMarker()).replace("{h}",t.getHMarker()))}function u(e,t){e.headerContentWindow.textContent=t.substr(0,32),v(e)}function d(e,t){var n=g(e);t>="0"&&"9">=t?u(e,n+t):","===t?f(e,n):"+"===t&&"-"===n[0]?u(e,n.substr(1)):"-"===t&&"-"!==n[0]&&u(e,"-"+n)}function h(e){n.addKeyEventListener("keydown",e.dom,function(t){var i,o=n.getEventCode(t);switch(o){case 8:i=I;break;case 13:i=k}i&&p(e,i)}),n.addKeyEventListener("keypress",e.dom,function(t){d(e,n.getKeyFromKeyPressEvent(t))})}function m(e,t){t.classList.contains(S)&&(_(e),g(e),p(e,t.id)&&(t.classList.add("ospm_numpad_button_selected"),d(e,t.textContent)))}function p(e,t){var n=e.headerContentWindow.textContent;switch(e.initialState&&(e.initialState=!1),t){case T:y(e);break;case I:u(e,n.substr(0,n.length-1));break;case k:y(e,!0);break;case D:u(e,"-"===n[0]?n.substr(1):"-"+n);break;default:return!0}}function f(e,t){0===t.length?u(e,"0,"):"-"===t?u(e,"-0,"):-1===t.indexOf(",")&&u(e,t+",")}function g(e){var t=e.headerContentWindow.textContent;return e.initialState&&(t="",e.initialState=!1),t}function _(e){var t,n=e.dom.querySelectorAll(".ospm_numpad_button_selected");for(t=0;t<n.length;t++)n[t].classList.remove("ospm_numpad_button_selected")}function v(e){var t,n;if(0===e.headerMaxWidth&&e.headerContentWindow.parentNode.clientWidth>0&&(t=e.headerContentWindow.textContent,e.headerContentWindow.textContent="",e.headerMaxWidth=e.headerContentWindow.parentNode.clientWidth,e.headerContentWindow.textContent=t),n=e.headerContentWindow.textContent.length,n>e.contentLength)for(;e.headerContentWindow.parentNode.clientWidth>e.headerMaxWidth;)e.headerFontSize--,e.headerContentWindow.style.fontSize=e.headerFontSize+"px";else{for(;e.headerFontSize<34&&e.headerContentWindow.parentNode.clientWidth<=e.headerMaxWidth;)e.headerContentWindow.style.fontSize=e.headerFontSize+1+"px",e.headerContentWindow.parentNode.clientWidth<=e.headerMaxWidth&&e.headerFontSize++;e.headerContentWindow.style.fontSize=e.headerFontSize+"px"}e.contentLength=n}function b(e){e.dom&&e.dom.parentNode&&(e.dom.parentNode.removeChild(e.dom),e.dom=null,e.enableKeyboardNavigation(),n.enableDoubleTapZoom())}function y(e,t){var n;b(e),e.resultCallback&&(t&&(n=e.headerContentWindow.textContent||""),e.resultCallback(n))}var C,w=new r("OSPM","NumPad"),E="ospm_marker_",L="ospm_marker_{v}_{h}",S="ospm_numpad_button",D="numpadButtonPlusminus",T="numpadButtonCancel",I="numpadButtonBack",k="numpadButtonOk";return C=e.subclass({dom:null,numPadWindow:null,headerContentWindow:null,resultCallback:null,contentLength:0,headerFontSize:34,headerMaxWidth:0,initialState:!0,constructor:function(){this.dom=l(this),this.numPadWindow=this.dom.querySelector(".ospm_numpad"),this.headerContentWindow=this.dom.querySelector(".ospm_numpad_header_content"),n.addClickListener(this.dom,function(e){e.target===this.dom||e.target===this.dom.firstChild?y(this):m(this,e.target)}.bind(this),!1,!0,!0)},show:function(e,t,o){var r,s;r=e.querySelector(".ospm_textinput_value"),r||(r=e),o&&(this.resultCallback=o),this.disableKeyboardNavigation(),document.body.appendChild(this.dom),s=new i({alignDom:this.numPadWindow,alignAtDom:r,vOffset:14,hOffset:56,position:{alignAtDom:"middle right",alignDom:"top right"}}),s.align(function(e){e?c(this,s):w.warning("NumPad konnte nicht um das Element herum positioniert werden.")}.bind(this)),t&&u(this,t),v(this),this.setFocusToWrapper(),h(this),n.disableDoubleTapZoom()},hide:function(){this.resultCallback=null,b(this)},getClassName:function(){return"NumPad"}}),C.proto(s),C}),define("tao/ospm/ui/views/DatePicker",["tao/lib/stapes","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/ui/IconFactory","tao/ospm/common/DateFormatter","tao/ospm/common/Toolkit","tao/ospm/ui/BoxAlignment","tao/ospm/ui/widgets/Widget","tao/ospm/common/Logger","tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/OSPMError","tao/ospm/core/FullScreenWrapperMixin","tao/ospm/common/datatype/DateTimeFilter"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f){function g(e,t,n){var i,o=e.firstDayOfMonth.getMonth(),r=e.firstDayOfMonth.getFullYear(),s=o,a=o;t?n?(s=(o+1)%12,i=11===o?r+1:r,a=o+1):(s=o>0?o-1:11,i=0===o?r-1:r,a=o-1):i=n?r+1:r-1,e.changeMonthListener&&e.changeMonthListener(o,s,r,i)||(e.firstDayOfMonth.setMonth(a),e.firstDayOfMonth.setFullYear(i),e.updateCalender())}function _(e){n.preventBackgroundScrolling(!1),e.dom&&e.dom.parentNode&&(V=null,e.dom.parentNode.removeChild(e.dom),e.dom=null,N(!1),e.enableKeyboardNavigation(),e.returnFocusFromWrapper())}function v(e){var t,o;n.isNBF()?(e.datePickerDom.style.width=e.clientNode.getBoundingClientRect().width+"px",t=new a({alignDom:e.datePickerDom,alignAtDom:e.clientNode,vOffset:-1,hOffset:0,position:{alignAtDom:"left bottom",alignDom:"top left"}}),t.align(function(n){n||z.warning("DatePicker konnte nicht um das Element herum positioniert werden."),t.vMarker===d.VERTICAL_ALIGNMENT.BOTTOM?(t.alignAtDomRect.top-t.alignDomRect.height<window.scrollY&&e.datePickerDom.classList.add("ospm_reduce_height"),e.clientNode.classList.add("ospm_contextmenu_top"),e.datePickerDom.classList.add("ospm_contextmenu_top"),e.datePickerDom.style.top=t.alignAtDomRect.top-e.datePickerDom.clientHeight+"px"):(t.alignAtDomRect.bottom-1+t.alignDomRect.height>window.scrollY+window.innerHeight&&e.datePickerDom.classList.add("ospm_reduce_height"),e.clientNode.classList.remove("ospm_contextmenu_top"),e.datePickerDom.classList.remove("ospm_contextmenu_top"),e.datePickerDom.style.top=t.alignAtDomRect.bottom-1+"px"),e.datePickerDom.style.left=t.alignAtDomRect.left+"px",t.alignAtDomRect.width<320&&e.datePickerDom.classList.add("ospm_small_container")})):n.isMobile()?(o=document.getElementById(i.OSPM_APP),t=new a({alignDom:o,alignAtDom:o,vOffset:14,hOffset:56,position:{alignAtDom:"middle center",alignDom:"top center"}})):(t=new a({alignDom:e.datePickerDom,alignAtDom:e.clientNode,vOffset:14,hOffset:56,position:{alignAtDom:"middle right",alignDom:"top right"}}),t.align(function(e){e||z.warning("DatePicker konnte nicht um das Element herum positioniert werden.")})),e.boxAlignment=t}function b(e,t,n){e.firstDayOfMonth=new Date(t.getTime()),e.firstDayOfMonth.setDate(1),n&&(e.selectedDate=t),e.updateCalender()}function y(e,t){e.mandatory="boolean"==typeof t.mandatory?t.mandatory:!1,e.dateTimeFilter="function"==typeof t.dateTimeFilter?t.dateTimeFilter:f.ALL,e.inputType=t.inputType,e.changeMonthListener=t.changeMonthListener||null,e.initialDate=t.initialDate}function C(e,t){var n,i=new Date;n=r.convertLocalDateTimeStrToDate(t+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()),n?b(e,n,!0):e.initialDate&&e.initialDate&&s.isDate(e.initialDate)&&b(e,e.initialDate,!1)}function w(e){var r,s;return r=t.createContainer("ospm_datepicker ospm_fullscreen_wrapper_aligned_content"),r.setAttribute("role","dialog"),r.setAttribute("aria-label","Termineingabe"),e.datePickerDom=r,r.appendChild(e.calenderDom),e.removeButtonDom=t.createContainer("ospm_datepicker_remove_buttom_container ospm_hidden"),n.isNBF()?(e.removeButtonDom.appendChild(o.createSimpleIcon({name:d.ICONS.CANCEL_S})),e.removeButtonDom.appendChild(t.createSpanLabel("Auswahl aufheben")),r.appendChild(e.removeButtonDom)):(e.removeButtonDom.appendChild(t.createContainer("ospm_datepicker_remove_button_text","Auswahl aufheben")),e.removeButtonDom.setAttribute("role","button"),e.removeButtonDom.setAttribute("tabindex",i.TABINDEXES.DEFAULT),r.appendChild(e.removeButtonDom)),s=e.wrapContent(r,"ospm_window_fullscreen_wrapper3 ospm_window_fullscreen_wrapper_contextmenuview ospm_window_fullscreen_datepicker_wrapper"),n.isMobile()||s.addEventListener("touchmove",function(e){e.preventDefault()}),s}function E(e){var i,o,s,a,l,c,u,h;for(l=new Date,l.setDate(1),a=new Date,i=t.createContainer("ospm_datepicker_container ospm_fullscreen_wrapper_aligned_content_container"),c=t.createContainer("ospm_datepicker_navigation"),i.appendChild(c),L(e,c),u=t.createContainer("ospm_datepicker_month",d.DATEPICKER_MONTHS[e.firstDayOfMonth.getMonth()]+" "+e.firstDayOfMonth.getFullYear()),c.appendChild(u),S(e,c),c=t.createContainer("ospm_datepicker_days_container"),i.appendChild(c),o=0;o<d.DATEPICKER_WEEK_DAYS.length;o+=1)u=t.createContainer("ospm_datepicker_days",d.DATEPICKER_WEEK_DAYS[o].substring(0,1)),u.setAttribute("title",d.DATEPICKER_WEEK_DAYS[o]),u.setAttribute("aria-hidden","true"),c.appendChild(u);for(h=t.createContainer("ospm_datepicker_dates"),n.addActionListener(h,function(t){e.onDateClick(t)}.bind(e)),i.appendChild(h),x(e,l,e.firstDayOfMonth,e.firstDayOfWeek%7),e.formattedCalendarDates=[],o=0;6>o;o+=1)for(c=t.createContainer("ospm_datepicker_dates_container"),h.appendChild(c),s=1;8>s;s+=1)l.setDate(l.getDate()+1),e.formattedCalendarDates.push(r.formatLocalDate(l)),l.getMonth()===e.firstDayOfMonth.getMonth()&&l.getYear()===e.firstDayOfMonth.getYear()?u=T(e,l):(u=T(e,l),u.classList.add("ospm_datepicker_finished")),l.getDate()===a.getDate()&&l.getMonth()===a.getMonth()&&l.getYear()===a.getYear()&&u.classList.add("ospm_datepicker_today"),c.appendChild(u);return i}function L(e,t){var i;i=o.createSimpleActionIcon({name:n.isNBF()?d.ICONS.TWO_BACK_S:"datepicker_last_year",label:"zum vorherigen Jahr"},e.goToLastYear.bind(e)),t.appendChild(i),i=o.createSimpleActionIcon({name:n.isNBF()?d.ICONS.BACK_S:"datepicker_last_month",label:"Vorherigen Monat anzeigen"},e.goToLastMonth.bind(e)),t.appendChild(i)}function S(e,t){var i,r;i=D(e),t.appendChild(i),r=new Date(e.firstDayOfMonth.getTime()),r.setFullYear(r.getFullYear()+1),r.getFullYear()>d.DATE_TIME_MAX_VALUES.YEAR?(i=o.createSimpleActionIcon({name:n.isNBF()?d.ICONS.TWO_NEXT_S:"datepicker_next_year",label:"zum nächsten Jahr"},function(){},!0),i.classList.add("ospm_disabled"),i.setAttribute("aria-disabled","true")):i=o.createSimpleActionIcon({name:n.isNBF()?d.ICONS.TWO_NEXT_S:"datepicker_next_year",label:"zum nächsten Jahr"},e.goToNextYear.bind(e)),t.appendChild(i)}function D(e){var t,i;return i=new Date(e.firstDayOfMonth.getTime()),i.setMonth(i.getMonth()+1),i.getFullYear()>d.DATE_TIME_MAX_VALUES.YEAR?(t=o.createSimpleActionIcon({name:n.isNBF()?d.ICONS.NEXT_S:"datepicker_next_month",label:"Nächsten Monat anzeigen"},function(){},!0),t.classList.add("ospm_disabled"),t.setAttribute("aria-disabled","true")):t=o.createSimpleActionIcon({name:n.isNBF()?d.ICONS.NEXT_S:"datepicker_next_month",label:"Nächsten Monat anzeigen"},e.goToNextMonth.bind(e)),t}function T(e,o){var s,a=o.getDate();return 10>a&&!n.isNBF()&&(a="  "+a),null!==e.selectedDate&&0===I(e.selectedDate,o)?(s=t.createContainer("ospm_datepicker_date ospm_datepicker_selected",""+a),s.setAttribute("aria-current","date")):s=t.createContainer("ospm_datepicker_date",""+a),s.setAttribute("aria-label",r.formatLocalDate(o)),e.dateTimeFilter(o)?(s.setAttribute("role","button"),s.setAttribute("tabindex",i.TABINDEXES.DEFAULT)):s.classList.add("ospm_datepicker_disabled"),s.dataset.date=o.getTime(),s}function I(e,t){return 372*t.getFullYear()+31*t.getMonth()+t.getDate()-1-(372*e.getFullYear()+31*e.getMonth()+e.getDate()-1)}function k(e,t){return 12*t.getFullYear()+t.getMonth()-(12*e.getFullYear()+e.getMonth())}function x(e,t,i,o){var s;n.isNBF()?(s=i.getDate()-i.getDay()+(0===i.getDay()?-6:1),t.setTime(i.getTime()),t.setDate(s-1)):(s=(i.getDay()+(6-o))%7+2,t.setTime(i.getTime()),t.setDate(i.getDate()-s)),e.formattedStartDate=r.formatLocalDate(t)}function A(e,t){var n;_(e),e.resultCallback&&(t&&(e.selectedDate?e.dateTimeFilter(e.selectedDate)&&(n=r.formatLocalDate(e.selectedDate),""===n&&(n=null)):n=""),e.resultCallback(n),e.resultCallback=null)}function O(e){e.setCancelOnOutsideClick(!0),e.setCancelOnOutsideClickEventListener(function(){e.handleOutsideClick()},"ospm_window_fullscreen_wrapper_container"),n.addActionListener(e.removeButtonDom,function(){e.removeDate(),A(e,!0)}),n.addKeyEventListener("keydown",e.dom,function(t){switch(n.getEventCode(t)){case d.KEYCODES.UP_ARROW:if(!t.altKey)break;case d.KEYCODES.ESCAPE:t.stopPropagation(),t.preventDefault(),A(e)}})}function N(e){n.toggleClassName(document.documentElement,"ospm_datepicker_is_shown",e)}function M(e){var t,i,o,r;t=window.innerHeight,i=window.innerWidth,o=P(e.datePickerDom),r=R(e.datePickerDom),n.isNBF()?e.datePickerDom.style.width=e.clientNode.getBoundingClientRect().width+"px":o>t||r>i?(e.datePickerDom.style.maxWidth=i+"px",e.datePickerDom.style.maxHeight=t+"px",e.datePickerDom.style.overflow="scroll"):e.datePickerDom.removeAttribute("style"),e.boxAlignment&&e.boxAlignment.align()}function P(e){var t,n=0;for(t=0;t<e.childNodes.length;t++)e.childNodes[t].offsetHeight&&(n+=e.childNodes[t].offsetHeight);return n}function R(e){var t,n=0;for(t=0;t<e.childNodes.length;t++)e.childNodes[t].offsetWidth&&e.childNodes[t].offsetWidth>n&&(n=e.childNodes[t].offsetWidth);return n}function F(e,t){t?e.removeButtonDom.classList.add("ospm_hidden"):e.selectedDate&&!e.mandatory&&e.removeButtonDom.classList.remove("ospm_hidden")}var B,z,V;return z=new c("OSPM","DatePicker"),B=e.subclass({dom:null,resultCallback:null,selectedDate:null,initialDate:null,formattedStartDate:null,formattedCalendarDates:null,clientNode:null,firstDayOfMonth:null,firstDayOfWeek:1,clientsWidget:null,datePickerDom:null,removeButtonDom:null,mandatory:null,inputType:null,boxAlignment:null,dateTimeFilter:null,constructor:function(e){e=e||{},y(this,e),this.firstDayOfMonth=new Date,this.firstDayOfMonth.setDate(1),this.calenderDom=E(this),this.dom=w(this),this.resultCallback=null,O(this)},setResultCallback:function(e){this.resultCallback="function"==typeof e?e:null},handleOutsideClick:function(){A(this,!0)},handleOk:function(){A(this,!0)},setClientsWidget:function(e){if(s.isSet(e)&&!(e instanceof l))throw new m("clientsWidget muss ein Widget sein");this.clientsWidget=e},getClassName:function(){return"DatePicker"},setDateTimeFilter:function(e){this.dateTimeFilter=e,this.updateCalender()},onDateClick:function(e){e.target.classList.contains("ospm_datepicker_disabled")||(this.selectDate(e),this.handleOk())},show:function(e,t,i){n.preventBackgroundScrolling(),this.dom.parentNode||(V=this,void 0!==i&&this.setResultCallback(i),this.clientNode=e,n.isIOS()||this.savePreviousFocussedElement(),this.disableKeyboardNavigation(),document.body.appendChild(this.dom),N(!0),C(this,t),v(this),document.OSPMEnvironment.isTouchDevice()||this.setFocusToWrapper(function(){return!1}.bind(this)))},hide:function(){this.resultCallback=null,_(this)},goToNextMonth:function(){g(this,!0,!0)},goToLastMonth:function(){g(this,!0,!1)},goToNextYear:function(){g(this,!1,!0)},goToLastYear:function(){g(this,!1,!1)},selectDate:function(e){var t,n,i,o=e.target;if(o.classList.contains("ospm_datepicker_date")&&!o.classList.contains("ospm_datepicker_disabled")){for(i=new Date(parseInt(o.dataset.date,10)),this.selectedDate?(i.setHours(this.selectedDate.getHours()),i.setMinutes(this.selectedDate.getMinutes()),i.setSeconds(this.selectedDate.getSeconds()),i.setMilliseconds(this.selectedDate.getMilliseconds())):i.setHours((new Date).getHours()),this.selectedDate=i,t=o.parentNode.parentNode.querySelectorAll(".ospm_datepicker_selected"),n=0;n<t.length;n++)t[n].classList.remove("ospm_datepicker_selected");o.classList.add("ospm_datepicker_selected"),n=k(this.firstDayOfMonth,this.selectedDate),0>n?this.goToLastMonth():n>0&&this.goToNextMonth()}},removeDate:function(){var e=this.calenderDom;this.selectedDate=null,this.calenderDom=E(this),e.parentNode.replaceChild(this.calenderDom,e),F(this,!0)},getFormattedCalendarDates:function(){return this.formattedCalendarDates?this.formattedCalendarDates:null},getFormattedStartDate:function(){return this.formattedStartDate?this.formattedStartDate:null},updateCalender:function(){var e=this.calenderDom;this.calenderDom=E(this),F(this,!1),e.parentNode.replaceChild(this.calenderDom,e)}}),B.proto(h.OutsideClickMixin,p),B.onResize=function(){V&&M(V)},B}),define("tao/ospm/ui/layouts/TabDeck",["tao/ospm/ui/layouts/Layout","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/Constants","tao/ospm/common/OSPMError","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/UIConstants","tao/ospm/common/Config"],function(e,t,n,i,o,r,s,a,l){function c(e,t){if(0>t||t>=e.labels.length)throw new o("Tab-Index außerhalb der erlaubten Grenzen",{index:t,count:e.labels.length})}function u(n){var i,o;!l.IF&&t.isIE()&&(i=n.dom.offsetHeight-n.selectionArea.offsetHeight-e.getAppContainerHeightOffset(),n.pagesArea.setAttribute("style","height: "+i+"px;"),i>10&&n.currentPageIndex>=0&&t.isSBContext()&&(o=n.pages[n.currentPageIndex].dom,o.clientHeight>i?o.setAttribute("style","height: "+i+"px;"):o.removeAttribute("style"))),t.isNBF()&&L(n)}function d(){return s.createContainer("ospm_tabdeck_pages")}function h(){var e=s.createContainer("ospm_tabdeck_pages_container_wrapper"),t=s.createContainer("ospm_tabdeck_pages_container");return t.classList.add("ospm_no_transition"),e.appendChild(t),e}function m(e,n){t.toggleClassName(e.selectionArea,"ospm_hidden",!n),u(e)}function p(e){var n;for(e.pages[e.currentPageIndex].dom.classList.remove("ospm_tabdeck_hidden_page"),n=0;n<e.pages.length;n++)n!==e.currentPageIndex&&e.pages[n].dom.classList.add("ospm_tabdeck_hidden_page");t.isNBF()&&L(e)}function f(e){e.addTransitionendEventListener({element:e.pagesContainer,listener:function(){p(this)}.bind(e)})}function g(){var e,t,n,i;return e=s.createContainer("ospm_tabdeck ospm_widget"),i=s.createContainer("ospm_tabdeck_selection"),i.setAttribute("role","tablist"),e.appendChild(i),t=d(),n=h(),t.appendChild(n),e.appendChild(t),e}function _(e,i,o){var r=s.createContainer("ospm_tabdeck_selection_element",i);return r.id=n.randomUUID(),r.setAttribute("role","tab"),r.setAttribute("aria-selected","false"),r.setAttribute("tabindex",a.TABINDEXES.DEFAULT),void 0!==o?e.selectionArea.insertBefore(r,e.labels[o]):e.selectionArea.appendChild(r),t.addActionListener(r,function(t){v(e,t)}),r}function v(e,n){var i=e.labels.indexOf(n.target);y(e,i),t.isRendered(e)&&t.focusFirstElement(e.pages[i])}function b(e,t,n){e.preventDefault(),y(t,n),t.labels[t.currentPageIndex].focus()}function y(e,t){var n,i;n=-1===t?e.pages.length-1:t,e.buttonsActive&&n!==e.currentPageIndex&&(i=e.currentPageIndex,C(e,n),e.notifyChangeListeners({oldTabIndex:i,newTabIndex:n,oldTabLabel:e.labelText[i],newTabLabel:e.labelText[n]},!0))}function C(e,t){var n,i,r,s=t;if("string"==typeof t&&(s=w(e,t)),0>s||s>=e.pages.length)throw new o("Tabdeck Seite zum Anzeigen nicht gefunden");for(n=e.selectionArea.querySelectorAll(".ospm_tabdeck_selection_element[aria-selected=true]"),r=0;r<n.length;r++)n[r].setAttribute("tabindex",a.TABINDEXES.DEFAULT),n[r].setAttribute("aria-selected","false");e.currentPageIndex=s,p(e),i=e.selectionArea.childNodes[e.currentPageIndex],i.setAttribute("aria-selected","true"),i.setAttribute("tabindex",a.TABINDEXES.NOT_TABBABLE),e.pagesContainer.className="ospm_tabdeck_pages_container",(l.IF||l.USE_ISCROLL)&&e.pages[s].onResize&&e.pages[s].onResize()}function w(e,t){var n,i=-1;for(n=0;n<e.labels.length;n++){if(e.pages[n].getId()===t)return n;e.labelText[n]===t&&(i=n)}return i}function E(e,t){var n=e.selectionArea.childNodes[t];e.selectionArea.removeChild(n),e.labels.splice(t,1),e.labelText.splice(t,1)
}function L(e){var n,i;t.isMobile()&&t.isNBF()&&(n=0===e.selectionArea.scrollLeft,i=e.selectionArea.scrollLeft+e.selectionArea.clientWidth===e.selectionArea.scrollWidth,e.selectionArea.classList.toggle("ospm_scroll_left",!n),e.selectionArea.classList.toggle("ospm_scroll_right",!i))}var S=e.subclass({pages:null,labels:null,labelText:null,selectionArea:null,pagesArea:null,pagesContainer:null,currentPageIndex:0,buttonsActive:!0,constructor:function(e){e=e||{},this.dom=g(),this.pages=[],this.labels=[],this.labelText=[],this.selectionArea=this.dom.querySelector(".ospm_tabdeck_selection"),t.addKeyEventListener("keydown",this.selectionArea,function(e){switch(t.getEventCode(e)){case i.KEYCODES.UP_ARROW:case i.KEYCODES.DOWN_ARROW:case i.KEYCODES.ENDE:case i.KEYCODES.POS1:e.preventDefault()}},!1),t.addKeyEventListener("keyup",this.selectionArea,function(e){switch(t.getEventCode(e)){case i.KEYCODES.ENDE:b(e,this,-1);break;case i.KEYCODES.POS1:b(e,this,0);break;case i.KEYCODES.LEFT_ARROW:b(e,this,this.currentPageIndex-1);break;case i.KEYCODES.RIGHT_ARROW:b(e,this,(this.currentPageIndex+1)%this.pages.length)}}.bind(this),!1),this.selectionArea.addEventListener("scroll",function(){L(this)}.bind(this)),this.pagesArea=this.dom.querySelector(".ospm_tabdeck_pages"),this.pagesContainer=this.dom.querySelector(".ospm_tabdeck_pages_container"),this.currentPageIndex=0,this.initializeFields(e),f(this),t.isNBF()&&L(this)},initializeFields:function(e){S.parent.initializeFields.call(this,e),e.buttonsActive===!1&&(this.buttonsActive=!1),e.buttonsVisible===!1&&m(this,!1),void 0!==e.changeListener&&this.setChangeListener(e.changeListener)},setParent:function(t){if(t instanceof e)throw new o("Ein TabDeck darf keinem Layout als SubLayout hinzugefügt werden",{parentClass:t.getClassName()});S.parent.setParent.call(this,t)},setButtonsVisible:function(e){m(this,e)},setButtonsActive:function(e){this.buttonsActive=e},addTab:function(t,n,i){function r(){s.setAttribute("aria-controls",n.dom.id),n.dom.setAttribute("role","tabpanel"),n.dom.setAttribute("aria-labelledby",s.id)}var s;if(!(n instanceof e)||n instanceof S)throw new o("Einem TabDeck dürfen nur andere Layouts hinzugefügt werden");if(void 0===i||i===this.pages.length)s=_(this,t),this.labels.push(s),this.labelText.push(t),r(),this.pagesContainer.appendChild(n.dom),this.pages.push(n);else{if(!(i>=0&&i<this.pages.length))throw new o("Tabdeck - Index out of bounds");s=_(this,t,i),this.labels.splice(i,0,s),this.labelText.splice(i,0,t),r(),this.pagesContainer.insertBefore(n.dom,this.pages[i].dom),this.pages.splice(i,0,n)}n.setParent(this),1===this.pages.length?this.switchTo(0,!0):i<=this.currentPageIndex&&this.switchTo(this.currentPageIndex+1,!0),n.preventHeaderScroll=!0,p(this),u(this)},removeTab:function(e){var t,n,i;return t=e,"string"==typeof e&&(t=w(this,e)),0>t?null:(n=this.pages[t],E(this,t),this.pagesContainer.removeChild(n.dom),this.pages.splice(t,1),this.currentPageIndex>t?this.switchTo(this.currentPageIndex-1,!0):this.currentPageIndex===t&&(i=t,i>=this.pages.length&&(i=this.pages.length-1),i>=0&&this.switchTo(i,!1)),n.parent=null,n)},clearTabs:function(){t.removeAllChildren(this.selectionArea),t.removeAllChildren(this.pagesContainer),this.labels=[],this.labelText=[],this.pages=[],this.currentPageIndex=0},switchTo:function(e){var n=e;C(this,e),t.isRendered(this)&&t.focusFirstElement(this.pages[n])},getTab:function(e){var t=e;return"string"==typeof e&&(t=w(this,e)),0>t||t>=this.pages.length?null:this.pages[t]},setLabel:function(e,n){c(this,e),this.labels[e].textContent=t.toHTMLText(n),this.labelText[e]=n,u(this)},getLabel:function(e){return c(this,e),this.labelText[e]},getElements:function(){var e,t,n=[];for(e=0;e<this.pages.length;e++)t=this.pages[e],n=n.concat(t.getElements());return n},getChildren:function(){return e.parent.getChildren.call(this).concat(this.pages)},getDisplayedChildren:function(){return this.currentTabIndex()>=0?e.parent.getDisplayedChildren.call(this).concat([this.getTab(this.currentTabIndex())]):e.parent.getDisplayedChildren.call(this)},getChildPosition:function(e){var t=this.pages.indexOf(e);return t>=0?t:"?"},tabCount:function(){return this.pages.length},currentTabIndex:function(){return 0===this.tabCount()?-1:this.currentPageIndex},addSubLayout:function(){throw new o("TabDeck unterstützt keine SubLayouts.")},getHeight:function(e){var t,n=0;return this.pages.forEach(function(e){t=e.getCompleteHeight(),t>n&&(n=t)}),e?n:n+(this.selectionArea?this.selectionArea.offsetHeight:0)},afterRenderLayout:function(){u(this)},onResize:function(){u(this)},scrollTo:function(e,t){var i=this;this.pages.some(function(o,r){return o.someChild(function(s){return e===s?(i.currentPageIndex!==r?(i.switchTo(r),n.executeLater(function(){o.scrollTo(e,t)})):o.scrollTo(e,t),!0):!1})})},updateDisplay:function(){this.getChildren().forEach(function(e){e.updateDisplay()}),S.parent.updateDisplay.call(this),u(this)},getLayoutColumns:function(){return[]},getClassName:function(){return"TabDeck"}});return S.proto(r.ChangeMixin,r.MutationEventMixin),S}),define("tao/ospm/ui/UIErrorUtils",["tao/ospm/ui/UIElement","tao/ospm/ui/layouts/TabDeck"],function(e,t){function n(t){var o,r,s,a,l,c=null,u=!1;if(!t||!i(t))return null;for(a=t.getChildren(),s=a.length,r=0;s>r;r++)o=n(a[r]),!c&&o&&o instanceof e&&(c=o);return"function"==typeof t.validate&&t.validate(),"function"==typeof t.hasError&&t.hasError()&&(u=!0,c=c||t),"function"!=typeof t.checkMandatoryValueEmptyError||u||(l=t.checkMandatoryValueEmptyError(),l&&!c&&(c=l.widget||t)),c}function i(e){var n,i,o;return n="function"!=typeof e.isEnabled||e.isEnabled(),i="function"==typeof e.isHidden&&e.isHidden(),o=e.parent&&e.parent instanceof t?!0:"function"!=typeof e.isVisible||e.isVisible(),n&&!i&&o}function o(e,n){for(var i=n,o=null;i&&("function"==typeof i.isCollapsed&&"function"==typeof i.setCollapsed&&i.isCollapsed()?i.setCollapsed(!1):i instanceof t&&r(i,o),i!==e);)o=i,i=i.getParent()}function r(e,t){var n,i=e.currentTabIndex(),o=e.getChildren(),r=o.length;for(n=0;r>n;n++)if(o[n]===t&&i!==n)return void e.switchTo(n)}var s;return s={checkInput:function(e,t){var i=n(e);return t=t!==!1,i?(t&&(o(e,i),i.focus()),i):null},checkMandatoryAfterValidation:function(e){var t=!1;"function"==typeof e.hasError&&(t=e.hasError()),"function"!=typeof e.checkMandatoryValueEmptyError||t||e.checkMandatoryValueEmptyError()}}}),define("tao/ospm/ui/widgets/mixins/InputPart",["tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/views/NumPad","tao/ospm/core/DomFactory","tao/ospm/ui/views/DatePicker","tao/ospm/common/NumberFormatter","tao/ospm/common/DateFormatter","tao/ospm/common/datatype/DataType","tao/ospm/common/datatype/ConstrainedDataType","tao/ospm/ui/widgets/mixins/events/ChangeMixin","tao/ospm/ui/widgets/mixins/ValueChangedMixin","tao/ospm/ui/widgets/mixins/MaxCharsMixin","tao/ospm/ui/widgets/mixins/events/InputToolHideMixin","tao/ospm/ui/ValidatorUtils","tao/ospm/ui/UIErrorUtils","tao/ospm/ui/UIUtils","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/mixins/MandatoryMixin"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b){var y=function(e){function l(e,t,n){return"string"==typeof t?B(e,t):(B(e,t.text||""),n=t&&t.cursorOffset?t.cursorOffset:n),A(e,e.inputFieldDom.value),""===e.inputFieldDom.value&&(o.isIE()||e.setValuePlaceholder(e.valuePlaceholder)),n}function c(e){var t=e.inputFieldDom.selectionStart;return e.inputFieldDom.selectionEnd>t&&(t=e.inputFieldDom.selectionEnd),t}function u(e){return e&&e.target&&e.target.classList.contains("ospm_icon_container")}function y(e,t){return U(e)?u(t):!0}function C(e,t){e.previousValue!==t&&(A(e,t),t=p.limitValue(t,e),w(e,t,function(){e.typedValue=null,x(e,o.toHTMLText(t,e.constrainedDataType.dataType.formatter)),e.validateDataType()}))}function w(e,n,o){i.isSet(n)||(n=""),o(n),e.dom.dataset.mode===t.INPUT_MODE.MANDATORY&&(e.dom.dataset.mode=t.INPUT_MODE.ACTIVE),e.notifyInternalValueChange(),X(e),Z(e)}function E(e){var n=e.constrainedDataType&&e.constrainedDataType.inputType.name?e.constrainedDataType.inputType.name:null;return e.mandatory?n===t.INPUT_DATA_TYPE.DATE?e.mandatory?e.constrainedDataType.getMandatoryPlaceholder():e.constrainedDataType.getDefaultPlaceholder():t.MANDATORY_PLACEHOLDERS.TEXT:n===t.INPUT_DATA_TYPE.DATE?e.constrainedDataType.getDefaultPlaceholder():o.isMobile()&&!e.isFormElement()?t.MANDATORY_PLACEHOLDERS.TEXT:""}function L(e){var n,r=e.valuePlaceholder;if(i.isStringProvided(r)||"function"==typeof e.isMandatory&&e.isMandatory()||o.isMobile()||(r=o.isNBF()?"(optional)":t.DEFAULT_PLACEHOLDERS.TEXT),e.hasFormLayout&&o.isMobile()&&!e.getValue()&&(e.dom.querySelector(".ospm_label").textContent!==e.valuePlaceholder&&(e.valuePlaceholderText=e.valuePlaceholder),r=e.dom.classList.contains("ospm_focus_inside")?e.valuePlaceholderText?e.valuePlaceholderText:r:"function"==typeof e.isMandatory&&e.isMandatory()?e.dom.querySelector(".ospm_label").textContent:e.dom.querySelector(".ospm_label").textContent+" "+e.getOptionalDomLabel()),e.inputFieldDom){if(o.isNBF()&&"TextInput"===e.getClassName())return void(e.valuePlaceholder?(e.inputFieldDom.placeholder=o.toHTMLText(r),e.dom.classList.add("ospm_has_placeholder")):(e.inputFieldDom.placeholder="",e.dom.classList.remove("ospm_has_placeholder")));if(!o.isMobile()||e.getValue()||e.hasFormLayout||e.dom.classList.contains("ospm_focus_inside")||(r=E(e)),r=r?r:E(e),n=o.toHTMLText(r),o.isNBF()&&"SearchInput"===e.getClassName())return void(e.labelDom.innerText=n);n!==e.inputFieldDom.placeholder&&(e.inputFieldDom.placeholder=n,e.setOptionalDomLabel&&e.setOptionalDomLabel(t.DEFAULT_PLACEHOLDERS.TEXT),X(e))}}function S(e){switch(e.constrainedDataType.inputType.name){case t.INPUT_DATA_TYPE.NUMBER:case t.INPUT_DATA_TYPE.INTEGER:return e.useNumPad;default:return!1}}function D(e){function n(){var t=null;return e.constrainedDataType.constraints&&e.constrainedDataType.constraints.filter(function(e){return"DateTimeFilterConstraint"===e.getClassName()}).forEach(function(e){t=e.dateTimeFilter}),t}if(!e.isInputToolAllowed())return null;switch(e.constrainedDataType.inputType.name){case t.INPUT_DATA_TYPE.DATE:case t.INPUT_DATA_TYPE.DATE_TIME:var i=new a({mandatory:!!e.mandatory,inputType:t.INPUT_DATA_TYPE.DATE,dateTimeFilter:n(),initialDate:e.getInitialDate(),changeMonthListener:e.getChangeMonthListener()});return e.contentDom.classList.contains("ospm_table_input_field")&&i.dom.classList.add("ospm_origin_table_input"),i;case t.INPUT_DATA_TYPE.NUMBER:case t.INPUT_DATA_TYPE.INTEGER:return e.useNumPad?new r:null}return null}function T(e){e.inputTool&&e.inputToolActive&&(e.inputTool.hide(),e.inputToolActive=!1,e.notifyInputToolHideListeners(),e.inputIconContainerDom&&e.inputIconContainerDom.setAttribute("aria-expanded","false"))}function I(e,n){if(e.clearAllErrors(),e.typedValue=null,"true"!==e.dom.dataset.mandatory||e.inputFieldDom.value&&0!==e.inputFieldDom.value.length){if(n(e)&&e.validateDataType(),e.dom.dataset.mode!==t.INPUT_MODE.ERROR)return e.dom.dataset.mode=e.isEnabled()?t.INPUT_MODE.ACTIVE:t.INPUT_MODE.DISABLED,!0}else e.dom.dataset.mode=t.INPUT_MODE.MANDATORY,n(e);return T(e),!1}function k(e,t){t.valid?(x(e,t.text),e.typedValue=t.value,e.clearAllErrors()):e.isEnabled()&&(e.setError({code:8,title:"Ungültige Eingabe",msg:t.messages.join(" ")}),T(e)),g.afterDataTypeValidated(e,{validationResult:t}),o.updateElement(e)}function x(e,t){e.previousValue!==t&&(e.inputFieldDom.value=t,e.previousValue=e.inputFieldDom.value,X(e))}function A(e,t){var n;e.valueUnitDom&&(e.valueUnitDom.style.display=i.isStringProvided(t)?"":"none",n=e.valueUnitDom.textContent.length&&i.isStringProvided(t),o.toggleClassName(e.dom,"ospm_has_value_unit",n),o.toggleClassName(e.valueUnitDom,"ospm_empty",!n))}function O(e){L(e)}function N(e){return e.inputToolActive&&e.inputTool&&e.inputTool.dom&&!e.inputTool.dom.classList.contains("ospm_hidden")}function M(e){var t,n;return t=s.createContainer("ospm_textinput_value_container"),n=s.createInput("text","ospm_textinput_value"),n.setAttribute("spellcheck",e.spellcheck),t.appendChild(n),e.inputFieldDom=n,e.valueUnitDom=s.createValueUnit(),t.appendChild(e.valueUnitDom),e.valueContainerDom=t,t}function P(e,n){var r=e.getValue();e.inputTool&&!e.inputToolActive&&(n=n||{},n.inputChar&&(r=n.inputChar),N(e)||(e.inputFieldDom.classList.add("ospm_inputtool_active"),o.isNBF()&&e.dom.classList.add("ospm_inputtool_active"),e.inputToolActive=!0,"function"==typeof e.inputTool.setClientsWidget&&e.inputTool.setClientsWidget(e),e.inputTool.show(o.isNBF()?e.contentDom:e.inputFieldDom,r,function(n){e.inputToolActive=!1,i.isSet(n)&&e.oldValue!==n&&C(e,n),e.inputFieldDom.classList.remove("ospm_inputtool_active"),o.isNBF()&&e.dom.classList.remove("ospm_inputtool_active"),e.dom.dataset.mode=t.INPUT_MODE.ACTIVE,e.onLeave(),e.inputToolIgnoreAutoOpen=!0,e.onEntry(),e.inputToolIgnoreAutoOpen=!1,e.notifyInputToolHideListeners(),e.ignoreFocusEvent=!0}.bind(this)),e.inputIconContainerDom&&e.inputIconContainerDom.setAttribute("aria-expanded","true")))}function R(e,t){e.setSpellcheck(t.spellcheck),e.setDataType(t.dataType),e.setUseDateInput(t.useDateInput),e.setDatePickerDisplayMode(t.datePickerDisplayMode),e.setInputToolAutoOpen(t.inputToolAutoOpen),e.setValue(t.value),e.setValueUnit(t.valueUnit),e.setValuePlaceholder(t.valuePlaceholder),e.setMaximumChars(t.maximumChars),e.setInitialDate(t.initialDate),e.setInputToolHideListener(t.inputToolHideListener)}function F(e,t){i.executeLater(function(){e.inputToolActive||(e.inputTool=D(e),e.inputTool&&P(e,t))})}function B(e,t){p.limitInputValue(e.inputFieldDom,t,e)}function z(e,n){return W(e,n,[t.INPUT_DATA_TYPE.EMAIL])}function V(e,n){return W(e,n,[t.INPUT_DATA_TYPE.INTEGER,t.INPUT_DATA_TYPE.NUMBER])}function H(e,n){return W(e,n,[t.INPUT_DATA_TYPE.INTEGER])}function U(e,n){return W(e,n,[t.INPUT_DATA_TYPE.DATE,t.INPUT_DATA_TYPE.DATE_TIME])}function W(e,t,n){var i=j(e,t);return i?n.indexOf(i.inputType.name)>-1:!1}function j(e,t){return e.constrainedDataType?e.constrainedDataType:t?d.create(t):null}function G(e){v.generateLabelableHtmlElementDescription(e,e.valueUnitDom)}function q(e){var t;e.inputIconContainerDom&&U(e)&&(t=e.inputIconContainerDom.querySelector(".ospm_icon_textinput_calender_regular"),t&&t.parentNode.replaceChild(b.createSimpleIcon("textinput_calender"),t))}var Y,K,X,Z,J;return e=e||{},X=e.resizeInput||function(){},Z=e.updateEmptyCss||function(){},J=e.dontSelectOnFocus||!1,K=i.merge({},h,!0),i.merge(K,m,!0),i.merge(K,p,!0),i.merge(K,f,!0),K.setMaximumChars=function(e){p.setMaximumChars.call(this,e),(this.maximumChars||e)&&(this.constrainedDataType=d.refine(this.constrainedDataType,{maxLength:e}))},Y={inputFieldDom:null,valueUnitDom:null,valueContainerDom:null,oldValue:"",previousValue:"",dataType:t.INPUT_DATA_TYPE.TEXT,typedValue:null,useNumPad:!1,constrainedDataType:null,initialDate:null,valuePlaceholder:null,inputTool:null,inputToolActive:!1,inputToolAutoOpen:!1,inputToolIgnoreAutoOpen:!1,ignoreFocusEvent:!1,inputIconContainerDom:null,spellcheck:!0,setSpellcheck:function(e){this.spellcheck=void 0===e?!0:e,this.inputFieldDom.setAttribute("spellcheck",this.spellcheck)},getSpellcheck:function(){return this.spellcheck},setValue:function(e){var t=this.oldValue!==this.getValue();C(this,e),t||(this.oldValue=this.getValue())},setTypedValue:function(e){var t=this.oldValue!==this.getValue();w(this,e,function(){k(this,this.constrainedDataType.validate(e))}.bind(this)),t||(this.oldValue=this.getValue())},getValue:function(){return this.inputFieldDom.value},getTypedValue:function(){return this.typedValue},setValueUnit:function(e){this.valueUnitDom.innerHTML="",e&&e.length&&this.valueUnitDom.appendChild(s.createInlineContainer("",o.toHTMLText(e))),A(this,this.inputFieldDom.value),this.getId&&this.getId()&&(this.valueUnitDom.id=this.getId()+"__valueunit"),G(this),o.updateElement(this)},getValuePlaceholder:function(){return this.valuePlaceholder},setValuePlaceholder:function(e){this.valuePlaceholder=i.isStringProvided(e)?e:"",L(this)},setDataType:function(e){var n;this.isAllowedDataType(e)||(e=null),this.constrainedDataType=d.create(e),this.maximumChars&&(this.constrainedDataType=d.refine(this.constrainedDataType,{maxLength:this.maximumChars})),V(this)&&(this.useNumPad=window.isCordova),n=o.isMobile(),n&&H(this)?(this.inputFieldDom.setAttribute("inputmode","numeric"),this.inputFieldDom.setAttribute("pattern","[0-9]*")):n&&V(this)?this.inputFieldDom.setAttribute("pattern","[0-9,+-]*"):(this.inputFieldDom.removeAttribute("inputmode"),this.inputFieldDom.removeAttribute("pattern")),U(this)&&this.setChangeMonthListener(e.changeMonthListener),this.dom.classList.remove("ospm_textinput_date"),this.dom.classList.remove("ospm_textinput_time"),this.constrainedDataType.inputType.name===t.INPUT_DATA_TYPE.DATE?this.dom.classList.add("ospm_textinput_date"):this.constrainedDataType.inputType.name===t.INPUT_DATA_TYPE.TIME&&this.dom.classList.add("ospm_textinput_time"),o.isIE()||this.setValuePlaceholder(this.valuePlaceholder),this.inputTool instanceof a&&i.isObject(e)&&e.dateTimeFilter&&this.inputTool.setDateTimeFilter(e.dateTimeFilter),this.updateInputIconContainerDom()},setUseDateInput:function(e){this.useDateInput=e},getUseDateInput:function(){return this.useDateInput},setDatePickerDisplayMode:function(e){this.datePickerDisplayMode=e},getDatePickerDisplayMode:function(){return this.datePickerDisplayMode},setInputToolAutoOpen:function(e){this.inputToolAutoOpen=U(this)?e:!1},getInputToolAutoOpen:function(){return this.inputToolAutoOpen},setInitialDate:function(e){this.initialDate=e},getInitialDate:function(){return this.initialDate},setChangeMonthListener:function(e){this.changeMonthListener=e},getChangeMonthListener:function(){return this.changeMonthListener},validate:function(){return I(this,g.onValidate)},validateDataType:function(){var e=this.constrainedDataType.parseAndValidate(this.inputFieldDom.value);return k(this,e),e.valid},validateCharInput:function(e){return o.isKeyPressEventToIgnore(e)?!0:this.constrainedDataType.checkInsertOfChar(o.getKeyFromKeyPressEvent(e),this.inputFieldDom.value,this.inputFieldDom.selectionStart,this.inputFieldDom.selectionEnd)},isInputToolShown:function(){return!i.isNullOrUndefined(this.inputTool?this.inputTool.dom:null)},showInputTool:function(){this.focus(),i.executeLater(function(){F(this)}.bind(this),n.SHOW_INPUT_TOOL_DELAY)},hideInputTool:function(){T(this)},isAllowedDataType:function(e){return!!e},isInputToolAllowed:function(){return!(this.isAutoComplete&&this.isAutoComplete())},onInputChanged:function(){var e,t;g.afterInput(this),t=c(this),e=this.constrainedDataType.reformatAfterUpdate(this.inputFieldDom.value,t),t=l(this,e,t),g.afterValueFormatted(this),X(this),o.isIE()||O(this),t>=this.inputFieldDom.value.length&&(t=this.inputFieldDom.value.length),0!==this.inputFieldDom.value.length&&(z(this)||S(this)&&o.isIOS()&&this.oldValue!==this.inputFieldDom.value||i.executeLater(function(){this.inputFieldDom.setSelectionRange(t,t)}.bind(this))),this.previousValue=this.inputFieldDom.value},onEntry:function(e,n){this.isEnabled()&&(this.inputToolActive||(g.onEntry(this),this.dom.classList.add("ospm_active"),this.dom.dataset.mode!==t.INPUT_MODE.ERROR&&this.dom.dataset.mode!==t.INPUT_MODE.MANDATORY&&(this.dom.dataset.mode=t.INPUT_MODE.EDIT),n||(this.oldValue=this.getValue()),this.inputFieldDom.readOnly||this.inputFieldDom.disabled||i.executeLater(function(){o.activeElement()===this.inputFieldDom&&this.inputFieldDom.value&&!J&&this.inputFieldDom.select()}.bind(this)),S(this)&&o.isIOS()&&e?(e.preventDefault(),this.inputFieldDom.blur(),y(this,e)&&F(this)):this.inputToolAutoOpen&&!this.inputToolIgnoreAutoOpen&&F(this)))},onClick:function(e){this.isEnabled()&&(e.target!==this.inputFieldDom?U(this)&&u(e)?(e.preventDefault(),F(this)):this.focus():this.inputToolAutoOpen&&F(this))},onBlur:function(){var e=this.oldValue;this.inputTool&&this.inputToolActive||i.executeLater(function(){var t=o.activeElement();t===this.inputIconContainerDom&&(this.oldValue=e),t!==this.inputFieldDom&&t!==this.inputIconContainerDom&&this.onLeave()}.bind(this),1)},onLeave:function(){var e,t;this.inputToolActive||this.isProcessingOnLeave||(this.isProcessingOnLeave=!0,e=this.constrainedDataType.reformatOnExit(this.inputFieldDom.value),t=this.constrainedDataType.parseAndValidate(e),e!==this.inputFieldDom.value&&t.valid&&l(this,e),I(this,g.onExit),_.checkMandatoryAfterValidation(this),this.updateChangedValue(),this.dom.classList.remove("ospm_active"),X(this),this.isProcessingOnLeave=!1,T(this),this.ignoreFocusEvent=!1)},onKeyDown:function(e){switch(window.isCordova&&this.inputFieldDom.ownerDocument.defaultView.focus(),p.limitTheNumberOfChars(this.inputFieldDom,this,e),o.getEventCode(e)){case t.KEYCODES.TAB:g.beforeInput(this,{event:e}),this.inputToolActive&&e.preventDefault(),this.contextMenuView&&this.contextMenuView.hide();break;case t.KEYCODES.ESCAPE:g.beforeInput(this,{event:e})&&x(this,this.oldValue);break;case t.KEYCODES.UP_ARROW:g.beforeInput(this,{event:e});break;case t.KEYCODES.DOWN_ARROW:if(!e.altKey){g.beforeInput(this,{event:e});break}if(U(this)){F(this);break}break;case t.KEYCODES.SPACE:break;case t.KEYCODES.ENTER:g.beforeInput(this,{event:e}),e.preventDefault(),e.stopPropagation();break;case t.KEYCODES.BACKSPACE:case t.KEYCODES.DELETE:g.beforeInput(this,{event:e});break;case t.KEYCODES.DEAD_KEY:}},onKeyPress:function(e){p.limitTheNumberOfChars(this.inputFieldDom,this,e),g.beforeInput(this,{event:e})&&e&&!this.validateCharInput(e)&&e.preventDefault()},onKeyUp:function(e){var n=o.getEventCode(e);n===t.KEYCODES.ENTER?this.inputToolActive||(this.inputTool=D(this),this.inputTool?(i.executeLater(function(){P(this)}.bind(this),0),e.stopPropagation()):document.OSPMEnvironment.isTouchDevice()?this.inputFieldDom.blur():this.onLeave()):n===t.KEYCODES.SPACE&&(S(this)&&e.preventDefault(),(!U(this)||U(this)&&u(e))&&F(this))},addEventListeners:function(){this.inputFieldDom.addEventListener("keydown",o.createKeyEventListener(this.onKeyDown.bind(this))),this.inputFieldDom.addEventListener("keypress",o.createKeyEventListener(this.onKeyPress.bind(this))),this.inputFieldDom.addEventListener("keyup",o.createKeyEventListener(this.onKeyUp.bind(this))),this.inputFieldDom.addEventListener("blur",this.onBlur.bind(this),!1),this.inputFieldDom.addEventListener("focus",function(e){this.ignoreFocusEvent||this.onEntry(e,!0)}.bind(this),!1),this.contentDom&&o.addClickListener(this.contentDom,this.onClick.bind(this)),this.inputFieldDom.addEventListener("input",function(e){this.previousValue!==this.inputFieldDom.value&&this.onInputChanged(e)}.bind(this),!1),this.inputIconContainerDom&&(this.inputIconContainerDom.addEventListener("keydown",o.createKeyEventListener(function(e){U(this)&&this.onKeyDown(e)}.bind(this))),this.inputIconContainerDom.addEventListener("keypress",o.createKeyEventListener(function(e){U(this)&&this.onKeyPress(e)}.bind(this))),this.inputIconContainerDom.addEventListener("keyup",o.createKeyEventListener(function(e){U(this)&&this.onKeyUp(e)}.bind(this))),this.inputIconContainerDom.addEventListener("blur",function(e){U(this)&&this.onBlur(e)}.bind(this),!1),this.inputIconContainerDom.addEventListener("focus",function(e){U(this)&&(this.inputToolIgnoreAutoOpen=!0,this.onEntry(e),this.inputToolIgnoreAutoOpen=!1)}.bind(this),!1))},updateChangedValue:function(){this.oldValue!==this.getValue()&&(this.valueChanged=!0,this.oldValue=this.getValue(),this.notifyChangeListeners(),this.notifyInternalValueChange())},buildInputIconContainerDom:function(e){return this.inputIconContainerDom=s.createContainer("ospm_icon_container"),this.inputIconContainerDom.appendChild(b.createIcon({name:t.ICONS.EDIT_S,size:t.ICON_SIZE.SMALL_20},16)),this.inputIconContainerDom.appendChild(b.createIcon({name:t.ICONS.LOCK_S,color:t.ICON_COLOR.DARK_GREY,size:t.ICON_SIZE.SMALL_20},16)),this.inputIconContainerDom.appendChild(b.createSimpleIcon("textinput_inputdialog")),this.inputIconContainerDom.appendChild(b.createSimpleIcon("textinput_calender_regular")),this.updateInputIconContainerDom(e),this.inputIconContainerDom},updateInputIconContainerDom:function(e){this.inputIconContainerDom&&(U(this,e)?(this.inputIconContainerDom.setAttribute("tabindex",this.isEnabled()?"0":""),this.inputIconContainerDom.setAttribute("role","button"),this.inputIconContainerDom.setAttribute("aria-expanded","false"),this.inputIconContainerDom.setAttribute("aria-label","Kalender zur Eingabe öffnen")):(this.inputIconContainerDom.removeAttribute("tabindex"),this.inputIconContainerDom.removeAttribute("role"),this.inputIconContainerDom.removeAttribute("aria-expanded"),this.inputIconContainerDom.removeAttribute("aria-label")))}},i.merge(K,Y,!0),{API:K,updatePlaceholder:L,handleIFMobile:O,validate:I,buildContainerDom:M,initializeFields:R,isDateInputType:U,switchToFormLayout:q}};return y}),define("tao/ospm/ui/widgets/ContainerWidget",["tao/ospm/common/OSPMError","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins"],function(e,t,n,i){var o,r="ospm_min_height_large";return o=n.subclass({containerDom:null,elements:null,constructor:function(){throw new e("ContainerWidget ist eine abstrakte Klasse und wird nicht direkt verwendet")},initializeFields:function(e){o.parent.initializeFields.call(this,e),this.setInputChanged(e.inputChanged),this.setInputChangeListener(e.inputChangeListener)},clearElements:function(){var e,n;if(this.elements.length>0){for(e=0;e<this.elements.length;e++)n=this.elements[e],n.dom.parentNode.removeChild(n.dom),n.setParent(null);this.elements=[],this.notifyInternalValueChange(),t.updateIndentation(this),t.updateMinHeight(this)}},addElement:function(n,i){var o,r;if(o=this.checkForValidElement(n))throw r={},"object"==typeof n&&"function"==typeof n.getClassName?r.elementClass=n.getClassName():r.element=n,new e(o,r);if(void 0===i)i=this.elements.length;else if(0>i||i>this.elements.length)throw new e("Index außerhalb der zulässigen Grenzen",{index:i,min:0,max:this.elements.length});t.verifyNullParent(n),n.removeFocus(),i<this.elements.length?(this.containerDom.insertBefore(n.dom,this.elements[i].dom),this.elements.splice(i,0,n)):(this.containerDom.appendChild(n.dom),this.elements.push(n)),this.setParentOfElement(n),this.notifyInternalValueChange(),t.updateIndentation(this),t.updateMinHeight(this)},removeElement:function(e){var n,i;return n="number"==typeof e?e:this.indexOfElement(e),0>n||n>=this.elements.length?null:(e=this.elements[n],i=e.dom.style.display,e.dom.style.display="none",e.dom.parentNode.removeChild(e.dom),e.dom.style.display=i,this.containerDom.dataset.scrollupdate="true",this.elements.splice(n,1),e.setParent(null),this.notifyInternalValueChange(),t.updateIndentation(this),t.updateMinHeight(this),e)},indexOfElement:function(e){var t,i,o=this.elements;if(e instanceof n)return o.indexOf(e);for(i=o.length,t=0;i>t;t++)if(o[t].getId()===e)return t;return-1},getElements:function(){return this.elements.slice(0)},getChildren:function(){return o.parent.getChildren.call(this).concat(this.getElements())},getChildPosition:function(e){var t=this.elements.indexOf(e);return t>=0?t:"?"},elementCount:function(){return this.elements.length},getElement:function(e){return this.elements[e]},setParentOfElement:function(e){e.setParent(this)},checkForValidElement:function(e){return e instanceof n?null:"Nur Widgets sind als Elemente erlaubt"},summingValues:function(){var e,t=[];if(this.isSummable())for(e=0;e<this.elements.length;e++)Array.prototype.push.apply(t,this.elements[e].summingValues());return t},afterRenderLayout:function(){t.updateMinHeight(this)},checkMinHeightLargeRule:function(){var e,n,i,o=!1;if(i=this.getElements().filter(function(e){return!e.isHidden()}),!t.isMobile()){for(e=0;e<i.length;e++)n=i[e],n.dom.classList.remove("ospm_item_extra_top_padding"),n.dom.classList.remove("ospm_item_extra_bottom_padding");if(this.isForm&&this.isForm())o=!1;else if(t.isRendered(this)&&this.containerDom.offsetWidth>674)for(e=0;e<i.length;e++)i[e].wantsLargeHeight&&(o=!0);else if(1===i.length&&i[0].wantsLargeHeight)o=!0;else if(this.sortable===!0)o=!0;else for(e=0;e<i.length;e++)n=i[e],n.wantsLargeHeight&&n.wantsLargeHeight()&&(o=!0)}return o?this.containerDom.classList.add(r):this.containerDom.classList.remove(r),o},updateDisplay:function(){var e,t,n=this.getElements();for(o.parent.updateDisplay.call(this),e=0;e<n.length;e++)n[e].dom.classList.remove("ospm_entry_grouping"),n[e].isHidden()||(e>0&&t&&n[e].isGrouped()&&t.dom.classList.add("ospm_entry_grouping"),t=n[e])}}),o.proto(i.ContainerInputStorageMixin),o}),define("tao/ospm/ui/widgets/Button",["tao/ospm/ui/widgets/Widget","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/main/LocalStepData","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/ui/UIConstants","tao/ospm/core/OSPMEnvironment","tao/ospm/common/Toolkit"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e){if(e.isStartButton)throw new s("Diese Funktion kann für StartButton nicht verwendet werden.")}function m(e){var t=b();if(e=e||{},e.style||(e.style=w),t.indexOf(e.style)<0)throw new s("Invalid style: "+e.style);return e}function p(e,n){var i,r,s=n.style;return i=t.createContainer(E),e.isStartButton||(o.isNBF()&&("button"===s?s="secondary":"text"===s&&(s="tertiary")),o.isNBF()||("primary"===s?i.classList.add(D):"secondary"===s?s="button":"tertiary"===s&&(s="text")),i.classList.add(y(s))),i.setAttribute("role","button"),r=t.createContainer("ospm_button_label_wrapper ospm_horizontal_flex_container"),e.contentContainer=t.createContainer("ospm_button_label_container ospm_flex_items_align_center"),"string"!=typeof n.label||n.label&&n.label.trim()||e.contentContainer.classList.add("ospm_empty_label_text"),e.labelContainer=t.createContainer(S),e.contentContainer.appendChild(e.labelContainer),r.appendChild(e.contentContainer),i.appendChild(r),e.isStartButton&&i.classList.add(o.isNBF()?y("primary"):D),i}function f(e){e.dom.setAttribute("value","true"),e.dom.classList.add(L),e.labelContainer.style.color=""}function g(e){e.dom.removeAttribute("value"),e.dom.style.backgroundColor="",e.dom.classList.remove(L)}function _(e){var t,n;if(e.group)for(t=e.group.selectedElements(),n=0;n<t.length;n++)t[n].setValue(!1)}function v(e){var t=function(){var t=!1;e.isEnabled()&&(e.group&&(e.getValue()||(e.setValue(!0),t=!0)),e.notifyClickListeners(),t&&(e.valueChanged=!0,e.group.notifyChangeListeners()))};o.addActionListener(e.dom,t),e.dom.addEventListener("focus",function(){},!1)}function b(){var e;return e=d.getValues(a.BUTTON_STYLE),e.push(a.STYLES.BUTTON),e.push(a.STYLES.TEXT),e}function y(e){return"ospm_display_style_"+e}var C,w=a.STYLES.BUTTON,E="ospm_one_button",L="ospm_selected_button",S="ospm_button_label",D="ospm_startbutton",T="ospm_text_style_";return C=e.subclass({group:null,labelContainer:null,stepData:null,contentContainer:null,isStartButton:!1,constructor:function(e,t,n){this.isStartButton=n,this.stepData=t,e=m(e),this.dom=p(this,e),r.LeftIconMixin.setLeftIconContainer.call(this,this.contentContainer),this.setRightIconContainer(this.contentContainer),this.initializeFields(e),v(this)},setLabel:function(e){t.createMarkupDomTree(this,this.labelContainer,e)},setGroup:function(e){var t,n;h(this),t=this.getGroup(),n=i.retrieveSelectionGroup(this.stepData,e),t!==n&&(this.group=n,t&&t.removeElement(this),n&&n.addElement(this)),n||this.setValue(!1)},setLabelStyle:function(e){var t,n=!1;if(o.isNBF()||(t=a.TEXT_STYLE.BUTTON1),e>=a.TEXT_STYLE.BUTTON1&&e<=a.TEXT_STYLE.BUTTON5)t=e;else if(n=!0,this.group&&t)return this.currentLabelStyle=null,o.replaceClassNameStartingWith(this.dom,T,T+t),void this.dom.classList.add("ospm_text_style_default");this.currentLabelStyle=t,t?o.replaceClassNameStartingWith(this.dom,T,T+t):this.dom.classList.remove(T),n&&this.dom.classList.add("ospm_text_style_default")},getLabelStyle:function(){return this.currentLabelStyle
},setStyle:function(e){var t,n=b(),i=e;if(n.indexOf(i)<0)throw new s("Invalid style: "+i);for(h(this),t=0;t<n.length;t++)this.dom.classList.remove(y(n[t]));this.isStartButton||(o.isNBF()&&("button"===i?i="secondary":"text"===i&&(i="tertiary")),o.isNBF()||("primary"===i?this.dom.classList.add(D):"secondary"===i?i="button":"tertiary"===i&&(i="text"))),this.dom.classList.add(y(i))},getStyle:function(){var e,t=b();for(h(this),e=0;e<t.length;e++)if(this.dom.classList.contains(y(t[e])))return t[e];return void 0},setSize:function(e){var t=Boolean(e)&&"small"===e;o.toggleClassName(this.dom,"ospm_button_one_size_small",t),o.toggleClassName(this.dom,"ospm_button_one_size_default",!t)},setWidth:function(e){var t,n,i,r,s,a;r=E+"_constant",s=E+"_full_width",a=E+"_auto",t=!e||"constant"===e,n=Boolean(e)&&"fullWidth"===e,i=Boolean(e)&&"auto"===e,o.toggleClassName(this.dom,r,t),o.toggleClassName(this.dom,s,n),o.toggleClassName(this.dom,a,i)},setFullWidth:function(e){this.setWidth(e?"fullWidth":"constant")},getGroup:function(){return this.group},setValue:function(e){e?(_(this),f(this)):g(this)},getValue:function(){return this.dom.hasAttribute("value")},setLeftIcon:function(e){h(this),r.LeftIconMixin.setLeftIcon.call(this,e),null!==this.leftIconDom&&this.leftIconDom.classList.remove(c.LEFT_ICON_DEFAULT_CLASS)},setEnabled:function(e){C.parent.setEnabled.call(this,e),this.dom.setAttribute("aria-disabled",this.isEnabled()?"false":"true")},initializeFields:function(e){C.parent.initializeFields.call(this,e),e.group&&this.setGroup(e.group),e.value===!0&&this.setValue(!0),e.hasOwnProperty("label")?this.setLabel(e.label):this.isStartButton&&this.setLabel(l.START_BUTTON_LABEL),Object.prototype.hasOwnProperty.call(e,"rightIcon")?this.setRightIcon(e.rightIcon):this.isStartButton&&this.setRightIcon({name:a.ICONS.NEXT_S,size:a.ICON_SIZE.SMALL_30}),e.leftIcon&&this.setLeftIcon(e.leftIcon),this.setSize(e.size),e.fullWidth?(console&&console.warn&&console.warn('button parameter "fullWidth" has been deprecated, use the parameter "width" with the value "fullWidth" instead. This warning will become a silent error in a future version. '),this.setWidth("fullWidth")):this.setWidth(e.width),e.wrapMode&&this.setWrapMode(e.wrapMode),e.clickListener&&this.setClickListener(e.clickListener),this.setLabelStyle(e.labelStyle)},updateDisplay:function(){C.parent.updateDisplay.call(this),this.configKeyboardNavigation(),this.dom.classList.contains("ospm_widget_focused")&&this.dom.focus()},getClassName:function(){return"Button"}}),C.proto(r.ClickMixin,r.RightIconMixin,r.ValueChangedMixin,new r.TabIndexMixinFactory({domName:"dom"}),r.FocusableMixin,r.WrapMixin,r.InputStorageMixin),C}),define("tao/ospm/ui/widgets/Header",["tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/UIConstants","tao/ospm/common/Constants","tao/ospm/core/EventLog","tao/ospm/ui/widgets/Button"],function(e,t,n,i,o,r,s,a,l,c){function u(e){var t,i,o,r;n.isRendered(e)&&(e.longValueContainer.childNodes.length>0&&n.moveChildren(e.longValueContainer,e.valueDom),h(e.rightContentDom),h(e.centerContentDom),o=e.contentContainerDom.offsetWidth,r=o/2,i=e.rightContentDom.offsetWidth,t=e.leftContentDom.offsetWidth+e.centerContentDom.offsetWidth,e.rightContentDom.removeAttribute("style"),e.centerContentDom.removeAttribute("style"),o>i+t||n.isNBF()||(e.wrapMode===l.WRAP_MODE.DEFAULT?(d(e.centerContentDom),i>.62*o&&(m(e.valueDom,e.longValueContainer),n.moveChildren(e.valueDom,e.longValueContainer),e.longValueContainer.style.paddingLeft=e.centerContentDom.offsetLeft+"px")):t>r&&i>r?(d(e.centerContentDom),d(e.rightContentDom)):i>r&&(d(e.rightContentDom),h(e.centerContentDom))))}function d(e){e.style.flex="1"}function h(e){e.style.flex="none"}function m(e,t){var n;Array.prototype.some.call(e.classList,function(e){return n=e,0===e.indexOf("ospm_text_style_")}),Array.prototype.forEach.call(t.classList,function(e){0===e.indexOf("ospm_text_style_")&&(e===n?n=null:t.classList.remove(e))}),n&&t.classList.add(n)}function p(e){var t,i,o;"Header"===e.getClassName()&&(e.rightContentDom.removeAttribute("style"),e.centerContentDom.removeAttribute("style"),t=e.leftContentDom.offsetWidth,i=e.rightContentDom.offsetWidth,o=Math.min(t,i),e.contentContainerDom.offsetWidth>2*t+2*i&&!n.isNBF()?(e.centerContentDom.style.paddingLeft=i-o+"px",e.centerContentDom.style.paddingRight=t-o+"px"):(e.centerContentDom.style.paddingLeft="0",e.centerContentDom.style.paddingRight="0"),e.calculateHeaderCb=null)}function f(i,o,u,d,h){function m(){if(i.isEnabled()){c.logUserEvent("IconAction",i,{icon:u,label:d});try{h()}catch(t){throw e.fromError("Fehler in Icon-Action-Funktion",t,{icon:u,label:d})}}}var p,f,g,_=l.TEXT_STYLE.LABEL5;return p=r.createContainer("ospm_header_icon"),p.classList.add(o?"ospm_header_icon_right":"ospm_header_icon_left"),u&&("object"==typeof u&&(d=d||u.label,h=h||u.action,u.labelStyle&&(_=u.labelStyle),u=u.name||u.icon),t.deleteProperty(u,"action"),g=s.createIcon(u,16,!0),g&&(g.classList.add(o?a.RIGHT_ICON_DEFAULT_CLASS:a.LEFT_ICON_DEFAULT_CLASS),p.appendChild(g))),d&&(f=r.createContainer("ospm_header_icon_label",d),f.classList.add("ospm_text_style_"+_),o?p.insertBefore(f,p.firstChild):p.appendChild(f)),h&&(n.addActionListener(p,function(){m()},!1,!0),i.isEnabled()?p.setAttribute("tabindex",a.TABINDEXES.DEFAULT):p.removeAttribute("tabindex"),p.classList.add("ospm_header_button"),p.classList.add("ospm_clickable")),p}function g(t,n){var i,o,r=t[n];if(r){if("[object Array]"!==Object.prototype.toString.call(r))throw new e("Der Parameter "+n+" muss bei einem Header ein Array sein.",{parameter:t});for(i=0;i<r.length;i++){if(o=r[i],o.label&&(t.hasIconLabel=!0),o.label&&"string"!=typeof o.label)throw new e("Der Parameter label eines Header-Icons muss Typ String sein.",{parameter:t});if(o.action&&"function"!=typeof o.action)throw new e("Der Parameter action eines Header-Icons muss Typ Function sein.",{parameter:t})}}}function _(t){if(t.leftButton&&t.leftIcons)throw new e("Bitte nur Icons oder einen Button auf der linken Seite verwenden");if(t.rightButton&&t.rightIcons)throw new e("Bitte nur Icons oder einen Button auf der rechten Seite verwenden")}function v(e,t){var o,s,a,c;return g(t,"leftIcons"),g(t,"rightIcons"),_(t),s=r.createContainer("ospm_header"),o=r.createContainer("ospm_header_content_container"),s.appendChild(o),e.contentContainerDom=r.createContainer("ospm_header_content"),t.rightButton&&e.contentContainerDom.classList.add("ospm_has_right_button"),t.leftButton&&e.contentContainerDom.classList.add("ospm_has_left_button"),o.appendChild(e.contentContainerDom),e.leftContentDom=r.createContainer("ospm_header_content_left"),e.centerContentDom=r.createContainer("ospm_header_content_middle"),t.hasIconLabel&&(e.centerContentDom.classList.add("ospm_has_icon_label"),e.contentContainerDom.classList.add("ospm_has_icon_label")),e.rightContentDom=r.createContainer("ospm_header_content_right"),e.contentContainerDom.appendChild(e.leftContentDom),e.contentContainerDom.appendChild(e.centerContentDom),e.contentContainerDom.appendChild(e.rightContentDom),e.longValueContainer=r.createContainer("ospm_header_long_value_container"),o.appendChild(e.longValueContainer),e.centerContentDom.classList.add("center"!==t.alignment?"ospm_header_label_left":"ospm_header_label_center"),a=r.createContainer("ospm_list_entry_left_content"),c=r.createContainer("ospm_label_container"),c.appendChild(e.buildLabelDom(l.TEXT_STYLE.LABEL_BIG3)),a.appendChild(c),a.appendChild(e.buildSubLabelDom(l.TEXT_STYLE.SUBLABEL5)),e.centerContentDom.appendChild(a),n.isNBF()?(c.appendChild(e.buildHintIconForTooltip()),e.centerContentDom.appendChild(e.buildValueDom(l.TEXT_STYLE.LABEL6))):e.rightContentDom.appendChild(e.buildValueDom(l.TEXT_STYLE.LABEL6)),e.rightIconsContainer=r.createContainer("ospm_header_icons_right"),e.rightContentDom.appendChild(e.rightIconsContainer),t.infoText&&t.infoText instanceof i&&(e.infoText=t.infoText,e.infoText.dom.classList.add("ospm_list_entry_wrapper"),e.infoTextContainer=r.createContainer("ospm_list_cell_container"),e.infoTextContainer.appendChild(e.infoText.dom),s.appendChild(e.infoTextContainer),s.classList.add("ospm_has_infotextfield"),e.setSmallHeader(!0)),s}function b(e){n.addActionListener(e.dom,function(){e.notifyClickListeners()})}function y(e){var t,n=e.dom.querySelectorAll(".ospm_clickable"),i=e.isEnabled();if(i)for(t=0;t<n.length;t++)n[t].setAttribute("tabindex",a.TABINDEXES.DEFAULT);else for(t=0;t<n.length;t++)n[t].removeAttribute("tabindex")}var C,w;return C=i.subclass({BUTTON_POSITION_LEFT:"left",BUTTON_POSITION_RIGHT:"right",stepData:null,leftContentDom:null,rightContentDom:null,centerContentDom:null,contentContainerDom:null,hasRightmostIcon:!1,alignment:null,calculateHeaderCb:null,rightIcons:[],leftButton:null,rightButton:null,hasIconLabel:!1,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=v(this,e),b(this),this.initializeFields(e),this.setMobileLabels()},setMobileLabels:function(){n.isNBF()&&n.isMobile()&&setTimeout(function(){var e=this.leftContentDom.offsetWidth,t=this.rightContentDom.offsetWidth,n=this.contentContainerDom.offsetWidth;e&&t&&(e+t>n?this.dom.classList.add("ospm_mobile_label_center"):this.dom.classList.remove("ospm_mobile_label_center"))}.bind(this),0)},setLeftIcons:function(e){this.removeAllLeftIcons(),e&&e.forEach(function(e){this.addLeftIcon(e)}.bind(this))},setLeftIcon:function(e,t,n){this.removeAllLeftIcons(),this.addLeftIcon(e,t,n)},addLeftIcon:function(e,t,i){e&&(this.leftContentDom.appendChild(f(this,!1,e,t,i)),n.updateElement(this))},removeAllLeftIcons:function(){n.removeAllChildren(this.leftContentDom),n.updateElement(this)},setRightIcons:function(e){this.removeAllRightIcons(),e&&e.forEach(function(e){this.addRightIcon(e)}.bind(this))},setRightIcon:function(e,t,n){this.removeAllRightIcons(),this.addRightIcon(e,t,n)},addRightIcon:function(e,t,i){var o;e&&(o=f(this,!0,e,t,i),this.rightIcons.push("object"==typeof e?e:{icon:e,label:t,action:i}),this.hasRightmostIcon?this.rightIconsContainer.insertBefore(o,this.rightIconsContainer.lastChild):this.rightIconsContainer.appendChild(o),n.updateElement(this))},removeAllRightIcons:function(){var e,t;for(this.rightIcons=[],e=this.rightIconsContainer.children.length,this.hasRightmostIcon&&e--,t=0;e>t;t++)this.rightIconsContainer.removeChild(this.rightIconsContainer.firstChild);n.updateElement(this)},setRightmostIcon:function(e){this.removeRightmostIcon(),this.rightIconsContainer.appendChild(f(this,!0,e)),this.hasRightmostIcon=!0,n.updateElement(this)},removeRightmostIcon:function(){this.hasRightmostIcon&&(this.rightIconsContainer.removeChild(this.rightIconsContainer.lastChild),this.hasRightmostIcon=!1,n.updateElement(this))},initializeFields:function(e){e.bottomBorder||(e.bottomBorder=!1),C.parent.initializeFields.call(this,e),this.setLabel(e.label),this.setSubLabel(e.subLabel),e.action&&this.addClickListener(e.action.bind(this)),e.clickListener&&this.setClickListener(e.clickListener),e.rightmostIcon&&this.setRightmostIcon(e.rightmostIcon),e.alignment&&this.setAlignment(e.alignment),this.setLeftIcons(e.leftIcons),this.setRightIcons(e.rightIcons),this.setLabelStyle(e.labelStyle),this.setSubLabelStyle(e.subLabelStyle),e.wrapMode&&this.setWrapMode(e.wrapMode),this.setValue(e.value),this.setValueUnit(e.valueUnit),this.setValueStyle(e.valueStyle),n.isNBF()&&e.hint&&this.setHint(e.hint)},afterRenderLayout:function(){n.updateElement(this)},setAlignment:function(t){var i;if(t){if("left"===t)i="ospm_header_label_left";else{if("center"!==t)throw new e("Das alignment muss bei einem Header den Wert left oder center besitzen.");i="ospm_header_label_center"}this.alignment=t,this.centerContentDom.classList.remove("ospm_header_label_left"),this.centerContentDom.classList.remove("ospm_header_label_center"),this.centerContentDom.classList.add(i)}n.updateElement(this)},setHidden:function(e){C.parent.setHidden.call(this,e)},setEnabled:function(e){C.parent.setEnabled.call(this,e),this.dom.setAttribute("aria-disabled",this.isEnabled()?"false":"true")},updateDisplay:function(){C.parent.updateDisplay.call(this),this.configKeyboardNavigation(),this.hasClickListeners()||this.dom.removeAttribute("aria-disabled"),y(this),"center"===this.alignment&&p(this),this.getValue()&&u(this),n.updateElementHeight([this.contentContainerDom])},onResize:function(){C.parent.onResize.call(this),this.getValue()&&(u(this),n.updateElementHeight([this.contentContainerDom])),this.setMobileLabels()},setHeadlineHierarchyDepth:function(e){var t,n=this.labelDom.getAttribute("class"),i="h6";3>=e?i="h3":4===e?i="h4":5===e?i="h5":e>=6&&(i="h6"),this.labelDom.tagName!==i&&(t=r.createElement(i,n),t.innerHTML=this.labelDom.innerHTML,this.labelDom.parentNode.replaceChild(t,this.labelDom),this.labelDom=t)},setSmallHeader:function(e){this.infoText||e?this.contentContainerDom.classList.add("ospm_header_content_small"):this.contentContainerDom.classList.remove("ospm_header_content_small")},getClassName:function(){return"Header"}}),w={setWrapMode:function(e){o.WrapMixin.setWrapMode.call(this,e),n.updateElement(this)},buildLabelDom:function(e){return this.defaultLabelStyle=e||0,this.labelDom=r.createElement("h6","ospm_label"),o.LabelMixin.setLabelStyle.call(this,e),this.labelDom}},C.proto(o.LabelMixin,o.SubLabelMixin,o.ClickMixin,new o.TabIndexMixinFactory({domName:"dom"}),o.WrapMixin,o.ValueMixin,o.HintMixin,w,{setHint:function(e){n.isNBF()&&o.HintMixin.setHint.call(this,e)}}),C}),define("tao/ospm/ui/widgets/FlexibleImageHeader",["tao/ospm/ui/widgets/Header","tao/ospm/ui/IconFactory","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/common/OSPMError","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a){function l(e){return e.imageWrapperDom=i.createContainer("ospm_image"),e.imageWrapperDom}function c(e){e.dom.style.height=s.isMobile()?"":Math.max(s.isNBF()?u(e.contentContainerDom):d(e.contentWrapper),e.minimumHeight)+"px",e.dom.dataset.scrollupdate="true"}function u(e){var t=e.children[0],n=e.children[2],i=e.children[1];return i.scrollHeight+Math.max(t.scrollHeight,n.scrollHeight)+44}function d(e){var t,n=0,i=e.children.length;for(t=0;i>t;t++)n+=e.children[t].scrollHeight;return n}var h,m;return h=e.subclass({minimumHeight:0,contentWrapper:null,constructor:function(e,t){e=e||{},e.alignment=e.alignment||"center",h.parent.constructor.call(this,e,t),this.contentWrapper=this.dom.querySelector(".ospm_list_entry_left_content"),this.contentWrapper.insertBefore(l(this),this.contentWrapper.firstChild),e.imagePath?this.setImagePath(e.imagePath):this.dom.classList.add("ospm_flexible_image_without_image"),e.wrapMode&&this.setWrapMode(e.wrapMode),this.dom.classList.add("ospm_flexible_image_header"),this.setLabelStyle(e.labelStyle),this.setMinimumHeight(e.minimumHeight)},setMinimumHeight:function(e){this.minimumHeight!==e&&("number"==typeof e&&e>0?(this.minimumHeight=e,this.dom.classList.add("ospm_flexible_image_header_custom_minimumheight")):(this.minimumHeight=0,this.dom.classList.remove("ospm_flexible_image_header_custom_minimumheight")),c(this))},onResize:function(){s.updateElement(this)},updateDisplay:function(){h.parent.updateDisplay.call(this),this.resizeResponsiveImage(),c(this)},afterRenderLayout:function(){h.parent.afterRenderLayout.call(this),c(this)},getClassName:function(){return"FlexibleImageHeader"}}),m={setImagePath:function(e){this.setResponsiveImagePath(e,function(){c(this)}.bind(this)),e?this.dom.classList.remove("ospm_flexible_image_without_image"):this.dom.classList.add("ospm_flexible_image_without_image")},setLabelStyle:function(e){var t=a.TEXT_STYLE.HEADLINE2;s.isNBF()&&(t=a.TEXT_STYLE.HEADLINE5),"number"==typeof e&&(e>=a.TEXT_STYLE.HEADLINE1&&e<=a.TEXT_STYLE.HEADLINE6?t=e:e>=a.TEXT_STYLE.LABEL_BIG1&&e<=a.TEXT_STYLE.LABEL_BIG6&&(t=e)),this.currentLabelStyle=t,s.replaceClassNameStartingWith(this.labelDom,"ospm_text_style_","ospm_text_style_"+t)},buildImageDom:function(e){var n,o=function(){c(this)}.bind(this);return e?t.createIcon(e,0,!0,o):(n=i.createImage("ospm_img"),n.addEventListener("load",o),n)}},h.proto(r.ImageMixin,r.WrapMixin,m),h}),define("tao/ospm/ui/widgets/Footer",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/core/EventLog"],function(e,t,n,i,o,r,s,a,l,c){function u(e){var t;e.dom=n.createContainer("ospm_footer"),t=n.createContainer("ospm_flex_items_align_center"),e.leftDom=n.createContainer("ospm_layout_left"),e.centerDom=n.createContainer("ospm_layout_center"),e.rightDom=n.createContainer("ospm_layout_right"),e.leftDom.dataset.contains="",e.centerDom.dataset.contains="",e.rightDom.dataset.contains="",t.appendChild(e.leftDom),t.appendChild(e.centerDom),t.appendChild(e.rightDom),e.dom.appendChild(t),e.dom.appendChild(e.buildHelpMessageContainer())}function d(e){var t,i=n.createContainer("ospm_labels_container"),r=e.buildLabelDom(l.TEXT_STYLE.LABEL3),s=e.buildInfoTextDom();t=o.isNBF()?e.buildHintIconForTooltip():e.buildHintIcon(),i.appendChild(r),i.appendChild(s),i.appendChild(t),e.leftDom.appendChild(i),e.leftDom.dataset.contains="label"}function h(e){I(e.rightDom,e.buildValueDom(l.TEXT_STYLE.LABEL4)),e.rightDom.dataset.contains="value"}function m(e){var t,n=e.leftDom.querySelectorAll("*:not(.ospm_icon)");for(t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t])}function p(e){o.removeAllChildren(e.centerDom)}function f(e){var t,n=e.rightDom.querySelectorAll("*:not(.ospm_icon)");for(t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t])}function g(e,t,a){var c,u,d,h=a.label,m=a.action,p=n.createContainer("",h),f=n.createContainer(t);return f.setAttribute("role","button"),(s.isStringProvided(a.leftIcon)||s.isObject(a.leftIcon))&&(s.isStringProvided(a.leftIcon)?d=i.createIcon({name:a.leftIcon,label:h},32):(a.leftIcon.label=h,d=i.createIcon(a.leftIcon)),d&&(d.classList.add(r.LEFT_ICON_DEFAULT_CLASS),f.appendChild(d))),f.appendChild(p),f.classList.add("ospm_flex_items_align_center"),c=s.isSet(a.enabled)&&a.enabled===!1,b(f,!c),o.isNBF()?s.isSet(a.type)&&(u=a.type,p.classList.add("ospm_display_color_"+u)):(s.isSet(a.type)?a.type===l.TYPES.DEFAULT?(u=l.TEXT_STYLE.BUTTON1,p.classList.add("ospm_text_style_default")):a.type===l.TYPES.NEGATIVE?u=l.TEXT_STYLE.BUTTON1:a.type===l.TYPES.POSITIVE?u=l.TEXT_STYLE.BUTTON2:a.type===l.TYPES.NEUTRAL&&(u=l.TEXT_STYLE.BUTTON3):u=l.TEXT_STYLE.BUTTON4,p.classList.add("ospm_text_style_"+u)),"function"==typeof m&&(f.classList.add("ospm_clickable"),o.addActionListener(f,function(t){_(e,t,m,h)},!1,!0)),s.isSet(a.arrow)&&a.arrow===!0&&y(f,a.type),f}function _(e,t,n,i){if(e.isEnabled()&&v(t.target)){c.logUserEvent("ButtonAction",e,{label:i});try{n(i)}catch(o){throw a.fromError("Fehler in Button-Funktion von Footer",o,{label:i})}}}function v(e){for(;e&&!e.classList.contains("ospm_text_button");)e=e.parentNode;return e&&!e.classList.contains("ospm_disabled")}function b(e,t){s.isSet(e)&&(t?(e.classList.remove("ospm_disabled"),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex",r.TABINDEXES.DEFAULT)):(e.classList.add("ospm_disabled"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex")))}function y(e,t){var n;switch(t){case l.TYPES.POSITIVE:n=i.calcIconClassName("next_green");break;case l.TYPES.NEUTRAL:n=i.calcIconClassName("next_blue");break;default:n=i.calcIconClassName("next_red")}e.classList.add(n),e.classList.add("ospm_has_icon"),o.isNBF()&&e.appendChild(i.createIcon({name:l.ICONS.NEXT_S},16))}function C(e,t,n,r,s,a){var c;m(e),c=g(e,"ospm_text_button",{label:t,action:n,enabled:s,type:r}),a&&(c.classList.add(i.calcIconClassName("zurueck")),c.classList.add("ospm_has_icon"),o.isNBF()&&c.appendChild(i.createIcon({name:l.ICONS.BACK_S},16))),e.leftDomAction=n,e.leftDom.appendChild(c),e.leftDom.dataset.contains="button",o.toggleClassName(e.dom,"ospm_single_button",!e.centerDom.hasChildNodes()&&!e.rightDom.hasChildNodes()),o.isNBF()&&e.dom.classList.add("ospm_has_cancel_button")}function w(e,t,n,i,r,s){p(e),e.centerDom.appendChild(g(e,"ospm_text_button",{label:t,action:n,enabled:r,type:i,leftIcon:s})),e.centerDom.dataset.contains="button",o.toggleClassName(e.dom,"ospm_single_button",!e.leftDom.hasChildNodes()&&!e.rightDom.hasChildNodes())}function E(e,t,n,i,o,r){L(e,[{label:t,action:n,enabled:o,type:i||l.TYPES.DEFAULT,arrow:r}]),(e.leftDom.hasChildNodes()||e.centerDom.hasChildNodes())&&e.dom.classList.remove("ospm_single_button")}function L(e,t,i){var r,s=null;t=t||[],f(e),i===!0?e.rightDom.classList.add("ospm_layout_distributed"):e.rightDom.classList.remove("ospm_layout_distributed"),t.length>0&&(r=n.createContainer("ospm_right_buttons_container"),t.forEach(function(t){s=g(e,"ospm_text_button",{label:t.label,action:t.action,enabled:t.enabled,type:t.type||l.TYPES.DEFAULT,arrow:t.arrow}),o.isNBF()&&e.dom.classList.add("ospm_has_next_button"),r.appendChild(s)}),I(e.rightDom,r)),e.rightDom.dataset.contains=t.length>0?"button":"",t.length>1?e.rightDom.classList.remove("ospm_single_action_button"):e.rightDom.classList.add("ospm_single_action_button")}function S(e,t,n){"label"!==e.leftDom.dataset.contains&&(m(e),e.leftDomAction=null,d(e)),t.call(e,n)}function D(e,t,n){"button"===e.rightDom.dataset.contains&&(f(e),h(e)),"value"!==e.rightDom.dataset.contains&&h(e),t.call(e,n)}function T(e,t){var n,i=e.dom.querySelectorAll(".ospm_text_button"),r=o.toHTMLText(t);for(n=0;n<i.length;n++)if(i[n].textContent===r)return i[n];return null}function I(e,t){e.insertBefore(t,e.firstChild)}var k,x;return k=e.subclass({stepData:null,leftDomAction:null,leftDom:null,centerDom:null,rightDom:null,constructor:function(e,t){e=e||{},this.stepData=t,u(this),this.setLeftIconContainer(this.leftDom),this.setRightIconContainer(this.rightDom),this.initializeFields(e)},setStackButtonsOnMobile:function(e){e===!0?this.dom.classList.add("ospm_footer_stack_buttons"):this.dom.classList.remove("ospm_footer_stack_buttons")},initializeFields:function(e){var t=e.actionButton||e.rightButton,n=e.actionButtons||e.rightButtons,i=e.cancelButton||e.leftButton;if(k.parent.initializeFields.call(this,e),e.cancelButton&&e.label)throw new a("Footer: Es dürfen kein linker Button und Label gemeinsam definiert werden!");if(e.actionButton&&e.value)throw new a("Footer: Es dürfen kein rechter Button und Value gemeinsam definiert werden!");if(e.actionButtons&&e.value)throw new a("Footer: Es dürfen keine rechten Buttons und Value gemeinsam definiert werden!");i?this.setCancelButton(i.label,i.action,i.type,i.enabled,i.arrow):e.label&&(this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setInfoText(e.infoText),this.setHint(e.hint),this.setHintIcon(e.hintIcon)),e.centerButton&&this.setCenterButton(e.centerButton.label,e.centerButton.action,e.centerButton.type,e.centerButton.enabled,e.centerButton.leftIcon),t?this.setActionButton(t.label,t.action,t.type,t.enabled,t.arrow):n?this.setActionButtons(n,e.distributeActionButtons):e.value&&(this.setValue(e.value),this.setValueUnit(e.valueUnit),this.setValueStyle(e.valueStyle)),e.leftIcon&&this.setLeftIcon(e.leftIcon),e.rightIcon&&this.setRightIcon(e.rightIcon),e.wrapMode&&this.setWrapMode(e.wrapMode),e.stackButtonsOnMobile&&this.setStackButtonsOnMobile(e.stackButtonsOnMobile)},setCancelButton:function(e,t,n,i,o){"boolean"==typeof n&&(i=n,n=void 0),C(this,e,t,n,i,o)},setCenterButton:function(e,t,n,i,o){w(this,e,t,n,i,o)},setActionButton:function(e,t,n,i,o){E(this,e,t,n,i,o)},setActionButtons:function(e,t){e=e||[],L(this,e,t)},getLeftButtonAction:function(){return this.leftDomAction},setButtonEnabled:function(e,t){var n=T(this,e);if(!s.isSet(n))throw new a('Footer: Kein Button mit label "'+e+'" vorhanden.');b(n,t),b(n.querySelector(".ospm_icon"),t)},afterRenderLayout:function(){o.updateElement(this)},updateDisplay:function(){var e,t;if(this.isEnabled())for(e=this.dom.querySelectorAll(".ospm_text_button:not(.ospm_disabled)"),t=0;t<e.length;t++)e[t].setAttribute("tabindex",r.TABINDEXES.DEFAULT);else for(e=this.dom.querySelectorAll(".ospm_text_button"),t=0;t<e.length;t++)e[t].removeAttribute("tabindex");k.parent.updateDisplay.call(this),o.updateElementHeight([this.dom.firstChild])},getClassName:function(){return"Footer"},setTopMargin:function(t){o.isNBF()?k.parent.setTopMargin.call(this,t):e.setTopPadding(this,t)}}),x={setLabel:function(e){S(this,t.LabelMixin.setLabel,e)},setLabelStyle:function(e){"label"===this.leftDom.dataset.contains&&S(this,t.LabelMixin.setLabelStyle,e)},setInfoText:function(e){S(this,t.InfoTextMixin.setInfoText,e)},setHint:function(e){S(this,t.HintMixin.setHint,e)},showHint:function(){S(this,t.HintMixin.showHint)},hideHint:function(){S(this,t.HintMixin.hideHint)},toggleHint:function(){S(this,t.HintMixin.toggleHint)},isHintShown:function(){return"label"===this.leftDom.dataset.contains&&t.HintMixin.isHintShown.call(this)},setValue:function(e){D(this,t.ValueMixin.setValue,e)},setValueUnit:function(e){D(this,t.ValueMixin.setValueUnit,e)},setValueStyle:function(e){var t;"value"===this.rightDom.dataset.contains&&(t="number"!=typeof e?this.defaultLabelStyle:e>=l.TEXT_STYLE.LABEL1&&e<=l.TEXT_STYLE.LABEL6?e:e>=l.TEXT_STYLE.LABEL_BIG1&&e<=l.TEXT_STYLE.LABEL_BIG6?e:this.defaultLabelStyle,this.currentLabelStyle=t,this.valueDom&&o.replaceClassNameStartingWith(this.valueDom,"ospm_text_style_","ospm_text_style_"+t))}},k.proto(t.LabelMixin,t.InfoTextMixin,t.HintMixin,t.ValueMixin,t.ClickMixin,t.LeftIconMixin,t.RightIconMixin,t.WrapMixin,x),k}),define("tao/ospm/ui/widgets/SummingFooter",["tao/lib/BigDecimal","tao/ospm/common/Toolkit","tao/ospm/common/Logger","tao/ospm/common/OSPMError","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a,l,c){function u(e,n){t.isSet(e.display)&&e.display!==c.DISPLAY.DEFAULT||(n?(o.replaceClassName(e.valueDom,"ospm_display_color_positive","ospm_display_color_negative"),o.replaceClassName(e.valueUnitDom,"ospm_display_color_positive","ospm_display_color_negative")):(o.replaceClassName(e.valueDom,"ospm_display_color_negative","ospm_display_color_positive"),o.replaceClassName(e.valueUnitDom,"ospm_display_color_negative","ospm_display_color_positive")))}function d(e){var t,n,i,r,s,a,l,c;o.isRendered(e)&&(t=e.valueDom&&e.valueDom.textContent.length>0,n=!e.subValueDom.classList.contains("ospm_empty"),e.valueContainer.removeAttribute("style"),o.isNBF()||(n?(e.dom.classList.add("ospm_text_nowrap"),t?(i=e.dom.firstChild.offsetWidth,r=.62*i-16,e.valueContainer.style.width=.28*i-e.rightDom.offsetWidth+"px",h(e)&&(s=Math.max(e.valueContainer.scrollWidth,e.valueContainer.firstChild.scrollWidth+e.valueContainer.lastChild.offsetWidth),a=r-12-18-s,e.valueContainer.style.width=0>a?s+a+"px":s+"px"),e.subValueContainer.style.maxWidth=r-e.valueContainer.offsetWidth-12+"px"):t&&(e.valueContainer.style.maxWidth=.62*e.dom.offsetWidth-16+"px")):(e.dom.classList.remove("ospm_text_nowrap"),l=e.labelDom&&e.labelDom.textContent.length>0,c=e.subLabelDom&&e.subLabelDom.textContent.length>0,!t||l||c?t||!l&&!c?e.valueContainer.style.maxWidth=.62*e.dom.offsetWidth-16+"px":e.valueContainer.style.display="none":(i=e.dom.offsetWidth,e.valueContainer.style.marginLeft="0",e.labelContainerDom&&(e.labelContainerDom.style.display="none"),e.valueContainer.style.width=i+"px",e.valueContainer.style.maxWidth=i+"px"))))}function h(e){return Math.max(e.valueContainer.firstChild.scrollWidth+e.valueContainer.lastChild.offsetWidth,e.valueContainer.scrollWidth)>e.valueContainer.offsetWidth}function m(e){var t,n,i,r,s;t=l.createLeftAlignedContainer("ospm_summing_footer"),s=l.createContainer("ospm_summing_footer_wrapper"),s.appendChild(t),o.isNBF()||s.appendChild(e.buildHelpMessageContainer()),e.dom=s,n=l.createContainer("ospm_list_entry_left_content"),t.appendChild(n),i=l.createContainer("ospm_list_entry_left_content_first_line"),n.appendChild(i),i.appendChild(e.buildLabelDom(c.TEXT_STYLE.LABEL_BIG3)),i.appendChild(e.buildInfoTextDom()),i.appendChild(o.isNBF()?e.buildHintIconForTooltip():e.buildHintIcon()),e.subValueContainer=e.buildSubValueDom(),t.appendChild(e.subValueContainer),r=l.createValueDomTree(),e.valueContainer=r.valueDomContainer,e.valueDom=r.valueDomValue,e.valueUnitDom=r.valueDomUnit,t.appendChild(e.valueContainer),e.rightDom=l.createContainer(),o.isNBF()?e.valueContainer.insertBefore(e.rightDom,e.valueDom):t.appendChild(e.rightDom),o.addClickListener(e.dom,function(){e.notifyClickListeners()}),e.setLeftIconContainer(t)}function p(e){return"small"===e}var f,g,_=new n("OSPM","SummingFooter");return f=s.subclass({stepData:null,valueDom:null,valueUnitDom:null,rightDom:null,autoSumming:!1,display:null,format:null,constructor:function(e,t){e=e||{},this.stepData=t,m(this),this.setRightIconContainer(this.rightDom),this.initializeFields(e)},setValue:function(e){if(this.autoSumming)throw new i("Die Value eines SummingFooter darf bei autoSumming:true nicht gesetzt werden");this.valueDom.textContent=o.toHTMLText(e),d(this)},getValue:function(){return this.autoSumming?this.updateValue():this.valueDom.textContent},setValueUnit:function(e){this.valueUnitDom.textContent=o.toHTMLText(e)},setFormat:function(e){if(!this.autoSumming)throw new i("Der Aufruf setFormat() ist nur für autoSumming=true erlaubt");o.verifyFormatter(e),this.format=e,this.updateValue()},setSize:function(e){this.dom.classList.remove("ospm_size_small"),p(e)&&this.dom.classList.add("ospm_size_"+e),this.dom.dataset.scrollupdate="true"},initializeFields:function(e){if(e.value&&e.autoSumming)throw new i("Es darf nur value oder autoSumming=true gesetzt werden");if(e.format&&!e.autoSumming)throw new i("Der Parameter format darf nur für autoSumming=true gesetzt werden");f.parent.initializeFields.call(this,e),this.autoSumming=e.autoSumming,this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setInfoText(e.infoText),this.setHint(e.hint),this.setHintIcon(e.hintIcon),this.setSubValue(e.subValue),this.setSubValueUnit(e.subValueUnit),this.setSubValueStyle(e.subValueStyle),this.autoSumming?(this.setFormat(e.format),this.updateValue()):this.setValue(e.value),this.setValueStyle(e.valueStyle),this.setValueUnit(e.valueUnit),this.setLeftIcon(e.leftIcon),e.rightIcon&&this.setRightIcon(e.rightIcon),t.isSet(e.display)&&this.setDisplay(e.display),e.clickListener&&this.setClickListener(e.clickListener),e.wrapMode&&this.setWrapMode(e.wrapMode),this.setSize(e.size)},updateValue:function(){var t,n,i,r=e.ZERO,s=this.getParent();if(i=this.format||document.OSPMEnvironment.defaultNumberFormatter,null!==s)for(t=s.summingValues(),n=0;n<t.length;n++)try{r=r.add(i.parse(t[n]))}catch(a){_.warning("Summand(%o) für SummingFooter mit autoSumming:true ist keine gültige Zahl",t[n])}return this.valueDom.textContent=o.toHTMLText(r,i),u(this,r.isNegative()),d(this),r},updateDisplay:function(){f.parent.updateDisplay.call(this),d(this)},onResize:function(){d(this),f.parent.onResize.call(this)},afterRenderLayout:function(){d(this)},getClassName:function(){return"SummingFooter"}}),g={setDisplay:function(e){e!==c.DISPLAY.DEFAULT&&(this.display=e,a.ValueDisplayMixin.setDisplay.call(this,e))}},f.proto(a.LabelMixin,a.InfoTextMixin,a.HintMixin,a.ClickMixin,a.LeftIconMixin,a.RightIconMixin,a.SubValueMixin,a.ValueDisplayMixin,a.WrapMixin,g),f.prototype.wantsLargeHeight=function(){var e=!1;return"large"===this.minHeight?e=!0:this.dom.classList.contains("ospm_has_sublabel")?e=!0:Math.max(a.LeftIconMixin.getMaxIconHeight.call(this),a.RightIconMixin.getMaxIconHeight.call(this))>=r.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS&&(e=!0),e},f.prototype.setValueStyle=function(e){var t=c.TEXT_STYLE.LABEL_BIG4;o.isNBF()&&(t=c.TEXT_STYLE.LABEL_BIG5),"number"==typeof e&&(e>=c.TEXT_STYLE.LABEL1&&e<=c.TEXT_STYLE.LABEL6?t=e:e>=c.TEXT_STYLE.LABEL_BIG1&&e<=c.TEXT_STYLE.LABEL_BIG6&&(t=e)),this.currentLabelStyle=t,o.replaceClassNameStartingWith(this.valueContainer,"ospm_text_style_","ospm_text_style_"+t)
},f.prototype.getValueStyle=function(){return this.currentValueStyle},f}),define("tao/ospm/ui/widgets/TwoColumnRow",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/ContainerWidget","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit"],function(e,t,n,i){function o(e,t){var n=r();return e.leftColumn=n.querySelector(".ospm_left_column"),e.rightColumn=n.querySelector(".ospm_right_column"),t.merged&&!i.isNBF()&&n.classList.add("ospm_merged"),n}function r(e,t){var i,o,r,s;return i=n.createContainer("ospm_two_column_input_container"),o=n.createContainer("ospm_horizontal_flex_container "),i.appendChild(o),r=n.createContainer("ospm_left_column ospm_column"),s=n.createContainer("ospm_right_column ospm_column"),e&&r.appendChild(e),t&&s.appendChild(t),o.appendChild(r),o.appendChild(s),i}var s=t.subclass({stepData:null,leftColumn:null,rightColumn:null,leftWidget:null,rightWidget:null,merged:!1,constructor:function(e,t){this.elements=[],e=e||{},this.stepData=t,this.dom=o(this,e),this.initializeFields(e)},setLeftWidget:function(e){i.verifyNullParent(e),this.containerDom=this.leftColumn,this.leftWidget&&this.removeElement(this.leftWidget),this.leftWidget=e,this.addElement(e,0)},setRightWidget:function(e){i.verifyNullParent(e),this.containerDom=this.rightColumn,this.rightWidget&&this.removeElement(this.rightWidget),this.rightWidget=e,this.addElement(e)},checkForValidElement:function(t){return!(t instanceof e)||t instanceof s?"Ungültiger Widget-Typ als Element einer TwoColumnRow":null},initializeFields:function(e){s.parent.initializeFields.call(this,e),e.leftWidget&&this.setLeftWidget(e.leftWidget),e.rightWidget&&this.setRightWidget(e.rightWidget),this.merged=!!e.merged},checkMinHeightLargeRule:function(){return!0},getClassName:function(){return"TwoColumnRow"}});return s.createTwoColumnRowContainer=r,s}),define("tao/ospm/ui/widgets/InputPair",["tao/ospm/ui/widgets/Widget","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/ui/widgets/ContainerWidget","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/mixins/Mixins"],function(e,t,n,i,o,r,s){function a(e,t){e.isFormElement()&&void 0!==t.switchToFormLayout&&t.switchToFormLayout(),d.parent.addElement.call(e,t)}function l(e,t){var i,s,a,l,u,d,h,m;return i=o.createContainer("ospm_inputpair"),l=r.isNBF()?o.createContainer("ospm_labelfield"):o.createLeftAlignedContainer("ospm_labelfield"),a=o.createContainer("ospm_list_entry_left_content"),h=o.createContainer("ospm_list_entry_left_content_first_line"),h.appendChild(e.buildLabelDom(n.TEXT_STYLE.LABEL3)),a.appendChild(h),d=o.createContainer("ospm_list_entry_left_content_form_wrapper"),d.appendChild(a),l.appendChild(d),m=c(t.ratio),s=o.createContainer("ospm_inputpair_right_content"),l.appendChild(s),i.appendChild(l),u=o.createContainer("ospm_column_wrapper ospm_horizontal_flex_container "+m),e.leftColumn=o.createContainer("ospm_left_column ospm_column"),e.rightColumn=o.createContainer("ospm_right_column ospm_column"),u.appendChild(e.leftColumn),u.appendChild(e.rightColumn),s.appendChild(u),s.appendChild(e.buildErrorDom()),i}function c(e){var t="ospm_column_ratio_1_1";switch(e){case"1/1":return t;case"1/2":return"ospm_column_ratio_1_2";case"2/1":return"ospm_column_ratio_2_1"}return t}function u(e,t){var n;return!e.isFormElement()||r.isMobile()?!1:(n=t.getLabel(),n&&t&&void 0!==t.setValuePlaceholder&&t.setValuePlaceholder(n),!0)}var d;return d=i.subclass({stepData:null,leftColumn:null,rightColumn:null,leftWidget:null,rightWidget:null,labelAsPlaceholder:!1,constructor:function(e,t){this.elements=[],e=e||{},this.stepData=t,this.dom=l(this,e),this.initializeFields(e)},setLeftWidget:function(e){r.verifyNullParent(e),this.containerDom=this.leftColumn,this.leftWidget&&this.removeLeftWidget(),a(this,e),r.isNBF()||u(this,e),this.leftWidget=e},setRightWidget:function(e){r.verifyNullParent(e),this.containerDom=this.rightColumn,this.rightWidget&&this.removeRightWidget(),a(this,e),r.isNBF()||u(this,e),this.rightWidget=e},getLeftWidget:function(){return this.leftWidget},getRightWidget:function(){return this.rightWidget},removeLeftWidget:function(){var e=d.parent.removeElement.call(this,this.leftWidget);return this.leftWidget=null,e},removeRightWidget:function(){var e=d.parent.removeElement.call(this,this.rightWidget);return this.rightWidget=null,e},switchToFormLayout:function(){this.dom.classList.add("ospm_list_form"),this.forEachWidget(function(e){e.switchToFormLayout()})},checkForValidElement:function(t){return t&&t instanceof e&&void 0!==t.getClassName&&("TextInput"===t.getClassName()||"Dropdown"===t.getClassName())?null:"Ungültiger Widget-Typ als Element eines InputPairs"},initializeFields:function(e){d.parent.initializeFields.call(this,e),this.setLeftWidget(e.leftWidget),this.setRightWidget(e.rightWidget),this.setLabel(e.label)},checkMinHeightLargeRule:function(){return!1},forEachWidget:function(e){var t=this.getElements();t.forEach(function(t){"function"==typeof e&&e(t)})},getElements:function(){var e=[];return this.leftWidget&&e.push(this.leftWidget),this.rightWidget&&e.push(this.rightWidget),e},updateDisplay:function(){var e=this,t=!1;this.forEachWidget(function(e){r.updateElement(e)}),this.labelAsPlaceholder||r.isNBF()||(this.forEachWidget(function(n){e.labelAsPlaceholder||(t=u(e,n)||t)}),this.labelAsPlaceholder=t)},addElement:function(){throw new t("Die Verwendung von addElement ist nicht erlaubt. Stattdessen setLeftWidget/setRightWidget verwenden.")},removeElement:function(){throw new t("Die Verwendung von removeElement ist nicht erlaubt. Stattdessen removeLeftWidget/removeRightWidget verwenden.")},clearElements:function(){throw new t("Die Verwendung von clearElements ist nicht erlaubt. Stattdessen removeLeftWidget/removeRightWidget verwenden.")},displayErrorsOfChildren:function(){return r.isNBF()||!this.isFormElement()||r.isMobile()?!1:!0},getClassName:function(){return"InputPair"}}),d.proto(s.LabelMixin,s.ErrorMixin,{getAllErrors:function(){var e=[];return this.forEachWidget(function(t){e=e.concat(t.getAllErrors())}),e}}),d}),define("tao/ospm/ui/widgets/DropdownElement",["tao/ospm/ui/UIElement","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/mixins/events/ClickMixin","tao/ospm/ui/IconFactory","tao/ospm/common/Constants"],function(e,t,n,i,o,r){function s(e){var n,i;return n=t.createContainer("ospm_dde"),n.setAttribute("role","option"),n.setAttribute("aria-label",e.label),i=t.createContainer("ospm_dde_label ospm_text_style_24"),t.createMarkupDomTree(null,i,e.label||""),n.appendChild(i),i=t.createContainer("ospm_dde_highlight"),n.appendChild(i),n}var a=e.subclass({constructor:function(e){this.dom=s(e),this.label=e.label,this.setHighlighted(e.highlighted),this.setSelected(e.selected),this.setEnabled(e.enabled),this.setHasAction(e.hasAction),e.clickListener&&this.setClickListener(e.clickListener),n.addClickListener(this.dom,function(){this.notifyClickListeners()}.bind(this)),this.initializeFields(e)},setHighlighted:function(e){e===!0?this.dom.classList.add("ospm_highlighted"):this.dom.classList.remove("ospm_highlighted")},setSelected:function(e){var t,i;n.isNBF()?(t=o.createIcon({name:r.ICONS.CHECK_CIRCLE_S,color:r.ICON_COLOR.GREEN_2,size:r.ICON_SIZE.SMALL_30}),i=this.dom.querySelector(".ospm_icon_check_circle_s ")):(t=o.createIcon({name:r.ICONS.CHECK_S,color:r.ICON_COLOR.BRAND,size:r.ICON_SIZE.SMALL_20}),i=this.dom.querySelector(".ospm_icon_check_s ")),e===!0?(this.dom.classList.add("ospm_selected"),this.dom.setAttribute("aria-selected","true"),i||this.dom.insertBefore(t,this.dom.lastChild)):(this.dom.classList.remove("ospm_selected"),this.dom.removeAttribute("aria-selected"),i&&i.parentNode.removeChild(i))},setHasAction:function(e){e===!0?this.dom.classList.add("ospm_dde_action"):this.dom.classList.remove("ospm_dde_action")},setEnabled:function(e){a.parent.setEnabled.call(this,e),e===!1?this.dom.classList.add("ospm_disabled"):this.dom.classList.remove("ospm_disabled")},removeFocus:function(){},isGrouped:function(){return!1},getClassName:function(){return"DropdownElement"},getLabel:function(){return this.label},setLabel:function(e){this.label=e,t.createMarkupDomTree(null,this.dom.firstChild,e||"")}});return a.proto(i),a}),define("tao/ospm/ui/widgets/list/List",["tao/ospm/common/OSPMError","tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/ContainerWidget","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/FlexibleImageHeader","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/SummingFooter","tao/ospm/ui/widgets/TwoColumnRow","tao/ospm/ui/widgets/InputPair","tao/ospm/core/UIToolkit","tao/ospm/ui/UIElement","tao/ospm/ui/UIConstants","tao/ospm/core/DomFactory","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Constants","tao/ospm/core/EventLog","tao/ospm/ui/widgets/DropdownElement"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v){function b(t){if(t instanceof N||!(t instanceof i||t instanceof v))throw new e("Listenelemente müssen Widgets, aber keine Listen sein")}function y(e,t){var n;e.dom=p.createContainer("ospm_list ospm_widget"),t.form===!0&&e.dom.classList.add("ospm_list_form"),e.contentContainerDom=p.createContainer("ospm_list_content_container"),e.dom.appendChild(e.contentContainerDom),d.isNBF()&&"ResultsList"===e.getClassName()&&e.dom.classList.add("opsm_result_list"),e.containerDom=p.createContainer("ospm_list_cell_container"),e.contentContainerDom.appendChild(e.containerDom),t.sortable&&(e.containerDom.classList.add("ospm_list_sortable_container"),e.sortable=!0),n=p.createContainer("ospm_list_expandable"),e.expandElementContainer=n,n.setAttribute("role","button"),n.appendChild(p.createInlineContainer("ospm_list_expandable_label")),n.classList.add("ospm_hidden"),d.addActionListener(n,function(){e.expand(),e.notifyExpandListeners()}),d.addClickListener(e.containerDom,function(){e.compressed&&(_.logUserEvent("DecompressList",e),e.setCompressed(!1))}),e.contentContainerDom.appendChild(n)}function C(e){d.toggleClassName(e.containerDom,"ospm_list_sortable_container",E(e))}function w(e){e.isEnabled()?e.expandElementContainer.setAttribute("tabindex",m.TABINDEXES.DEFAULT):e.expandElementContainer.removeAttribute("tabindex")}function E(e){var t=e.elements.length>0&&e.elements[0].getClassName();return e.sortable&&e.elements.every(function(e){return e.isSortable()&&e.getClassName()===t})}function L(e){var t=!e.compressed&&e.expandable&&!e.containerDom.classList.contains("ospm_hidden")&&S(e);d.toggleClassName(e.expandElementContainer,"ospm_hidden",!t)}function S(e){return e.getElements().some(function(e){return e.isHidden()})}function D(e){e.getElements().forEach(function(e){e.setHidden(!1)})}function T(e){e.hideShadow?e.contentContainerDom.classList.contains("ospm_list_hideShadow")||e.contentContainerDom.classList.add("ospm_list_hideShadow"):e.contentContainerDom.classList.contains("ospm_list_hideShadow")&&e.contentContainerDom.classList.remove("ospm_list_hideShadow")}function I(e){e.compressed?e.containerDom.clientHeight>128&&!e.dom.classList.contains("ospm_list_compressed")&&(e.dom.classList.add("ospm_list_compressed"),e.dom.dataset.scrollupdate="true"):e.dom.classList.contains("ospm_list_compressed")&&(e.dom.classList.remove("ospm_list_compressed"),e.dom.dataset.scrollupdate="true")}function k(e){var t,n;x(e)&&(t=e.dom.clientHeight-e.header.dom.clientHeight,n=e.minimumHeight-t,n>0&&e.header.setMinimumHeight(n))}function x(e){return null!==e.header&&e.header instanceof s}function A(e){d.toggleClassName(e.dom,"ospm_list_single_entry",1===e.getElements().length)}function O(e){var t,n,i=!1,o=!0;for(t=e.elementCount()-1;t>=0;t--)n=e.getElement(t),o=o&&n.isHidden(),n.dom.classList.remove("ospm_last_visible_element"),i||n.isHidden()||(n.dom.classList.add("ospm_last_visible_element"),i=!0);d.toggleClassName(e.containerDom,"ospm_hidden",e.collapsed||o)}var N,M,P,R;return M=64,P="desktop",R="mobile",N=o.subclass({stepData:null,titleDom:null,titleText:null,header:null,footer:null,hideShadow:!1,expandElementContainer:null,collapsible:!1,collapsed:!1,expandable:!1,minimumHeight:null,contentContainerDom:null,compressed:!1,constructor:function(e,t){e=e||{},this.stepData=t,this.elements=[],this.dummyZindex=1,y(this,e),this.initializeFields(e)},initializeFields:function(e){N.parent.initializeFields.call(this,e),e.title&&this.setTitle(e.title),e.header&&this.setHeader(e.header),e.footer&&this.setFooter(e.footer),this.setCollapsible(e.collapsible),this.setCollapsed(e.collapsed),this.setExpandable(e.expandable),this.setExpandLabel(e.expandLabel),this.setMinimumHeight(e.minimumHeight?e.minimumHeight:M),e.collapseListener&&this.setCollapseListener(e.collapseListener),e.moveElementListener&&this.setMoveElementListener(e.moveElementListener),this.setCompressed(e.compressed),e.media&&this.setMedia(e.media),d.isNBF()&&void 0!==e.showListBorder&&null!==e.showListBorder&&this.showListBorder(e.showListBorder),this.setHideShadow(e.hideShadow)},setTitle:function(t){if("string"!=typeof t&&void 0!==t&&null!==t)throw new e("Nur Strings, null oder undefined sind als parameter erlaubt");this.titleText=t,t?(null===this.titleDom&&(this.titleDom=p.createElement("h2","ospm_list_title_container ospm_labelfield ospm_text_style_"+g.TEXT_STYLE.LABEL5),this.dom.insertBefore(this.titleDom,this.dom.firstChild)),p.createMarkupDomTree(this,this.titleDom,t)):null!==this.titleDom&&(this.dom.removeChild(this.titleDom),this.titleDom=null)},getTitle:function(){return this.titleText},setHeader:function(t){if(t=t||null,t!==this.header){if(null!==t&&!(t instanceof r)){if("object"!=typeof t||t instanceof h)throw new e("Nur Header-Widgets sind als Header einer List erlaubt");t=new r(t)}d.verifyNullParent(t),this.header&&(this.contentContainerDom.removeChild(this.header.dom),this.header.setParent(null)),this.header=t,t?(t.setHeadlineHierarchyDepth(3),this.contentContainerDom.insertBefore(t.dom,this.containerDom),t.setParent(this)):this.setCollapsed(!1),this.setCollapsible(t&&this.collapsible),k(this)}},adjustHeight:function(){k(this)},removeHeader:function(){this.setHeader(null)},getHeader:function(){return this.header},setFooter:function(t){if(t=t||null,t!==this.footer){if(null!==t&&!(t instanceof a||t instanceof l)){if("object"!=typeof t||t instanceof h)throw new e("Nur Footer- und SummingFooter-Widgets sind als Footer einer List erlaubt");t=new a(t)}d.verifyNullParent(t),this.footer&&(this.contentContainerDom.removeChild(this.footer.dom),this.footer.setParent(null)),this.footer=t,t&&(this.contentContainerDom.appendChild(t.dom),this.isCollapsed()&&this.footer.dom.classList.add("ospm_hidden"),t.setParent(this),this.notifyInternalValueChange())}},removeFooter:function(){this.setFooter(null),d.updateMinHeight(this)},getFooter:function(){return this.footer},addElement:function(e,t){b(e),N.parent.addElement.call(this,e,t),e.dom.classList.add("ospm_list_entry_wrapper"),A(this),this.isForm()&&!e.hasFormLayout&&e.switchToFormLayout(),C(this),d.updateElement(this),this.header&&this.header.setSmallHeader(1===this.elements.length)},removeElement:function(e){var t=N.parent.removeElement.call(this,e);return t instanceof i&&t.dom.classList.remove("ospm_list_entry_wrapper"),A(this),C(this),d.updateElement(this),t},removeAllElements:function(){this.clearElements()},clearElements:function(){N.parent.clearElements.call(this),d.updateElement(this)},setCollapsed:function(t){var n=d.activeElement();if(this.collapsed!==!!t){if(this.collapsed=!!t,t){if(!(this.header instanceof r))throw new e("Collapsed kann für eine List ohne Header nicht gesetzt werden");this.dom.dataset.mode="hide",this.containerDom.classList.add("ospm_hidden"),this.header.infoTextContainer&&this.header.infoTextContainer.classList.add("ospm_hidden"),this.footer&&this.footer.dom.classList.add("ospm_hidden")}else this.dom.dataset.mode="show",this.containerDom.classList.remove("ospm_hidden"),this.header.infoTextContainer&&this.header.infoTextContainer.classList.remove("ospm_hidden"),this.footer&&this.footer.dom.classList.remove("ospm_hidden");d.updateMinHeight(this),this.getElements().forEach(function(e){"SubList"===e.getClassName()&&d.updateMinHeight(e)}),document.body.focus(),n&&n.focus(),d.updateElement(this)}},setCollapsible:function(t){if(t){if(!(this.header instanceof r))throw new e("Collapsible kann für eine List ohne Header nicht gesetzt werden");this.header.setRightmostIcon({icon:{name:"list_collapse",label:"Inhalte anzeigen/verbergen"},action:function(){this.setCollapsed(!this.isCollapsed()),this.notifyCollapseListeners()}.bind(this)})}else this.header&&this.header.removeRightmostIcon();this.collapsible=!!t},isCollapsed:function(){return"hide"===this.dom.dataset.mode},isCollapsible:function(){return this.collapsible},setCompressed:function(e){this.compressed=!!e,d.updateElement(this)},setHideShadow:function(e){this.hideShadow=!!e,d.updateElement(this)},showListBorder:function(e){e?this.dom.classList.remove("ospm_list_without_border"):this.dom.classList.add("ospm_list_without_border")},getHideShadow:function(){return this.hideShadow},isCompressed:function(){return this.compressed},isForm:function(){return this.dom.classList.contains("ospm_list_form")},setExpandable:function(e){this.expandable=!!e,d.updateElement(this)},isExpandable:function(){return this.expandable},setExpandLabel:function(n){var i=this.expandElementContainer.querySelector(".ospm_list_expandable_label");if(null===n||void 0===n)i.textContent=t.DEFAULT_EXPAND_LABEL;else{if("string"!=typeof n)throw new e("Nur Strings, null oder undefined sind als parameter erlaubt");p.createMarkupDomTree(this,i,n)}},expand:function(){D(this),this.expandElementContainer.classList.add("ospm_hidden")},setMinimumHeight:function(e){this.minimumHeight=e,k(this)},getMedia:function(){var e=[];return this.dom.classList.contains("ospm_list_mobile_only")||e.push(P),this.dom.classList.contains("ospm_list_desktop_only")||e.push(R),e},setMedia:function(t){var i,o;if(null===t||void 0===t)i=!0,o=!0;else if("string"==typeof t)i="all"===t||"desktop"===t,o="all"===t||"mobile"===t;else{if(!n.isArray(t))throw new e("Es muss ein String oder ein Array von Strings angegeben werden",{parameter:t});i=t.indexOf("all")>=0||t.indexOf("desktop")>=0,o=t.indexOf("all")>=0||t.indexOf("mobile")>=0}d.toggleClassName(this.dom,"ospm_list_mobile_only",!i),d.toggleClassName(this.dom,"ospm_list_desktop_only",!o)},getChildren:function(){var e=o.parent.getChildren.call(this);return this.header&&e.push(this.header),Array.prototype.push.apply(e,this.elements),this.footer&&e.push(this.footer),e},getChildPosition:function(e){switch(e){case this.header:return"header";case this.footer:return"footer";default:return N.parent.getChildPosition.call(this,e)}},checkForValidElement:function(e){return!(e instanceof i||e instanceof v)||e instanceof N||e instanceof a||e instanceof r||e instanceof l||e instanceof c?"Ungültiger Widget-Typ als Element einer List":null},updateDisplay:function(){var e,t;(window.isCordova||d.isIFWebView())&&(this.containerDom.style.zIndex=this.dummyZindex.toString(),document.OSPMEnvironment.appView.setZIndexToPageWrapper(this.dummyZindex.toString()),this.dummyZindex++),t=this.getElements().some(function(e){return!e.isHidden()&&!e.isElementEmpty()}),d.toggleClassName(this.dom,"ospm_empty_list",!t&&!this.getHeader()&&!this.getFooter()),L(this),I(this),w(this),T(this),O(this),k(this),N.parent.updateDisplay.call(this),e=this.parent,e&&"function"==typeof e.updateDialog&&e.updateDialog()},checkMinHeightLargeRule:function(){var e,t,n;d.isNBF()||(n=this.getElements().filter(function(e){return!e.isHidden()}),!N.parent.checkMinHeightLargeRule.call(this)&&n.length>1&&(e=n[0],t=n[n.length-1],e&&e.wantsLargeHeight&&(null===e.headerWidget||void 0===e.headerWidget)&&e.dom.classList.add("ospm_item_extra_top_padding"),t&&t.wantsLargeHeight&&null===this.getFooter()&&t.dom.classList.add("ospm_item_extra_bottom_padding")))},afterRenderLayout:function(){k(this),O(this),N.parent.afterRenderLayout.call(this)},notifyInternalValueChange:function(){this.footer instanceof l&&this.footer.autoSumming===!0&&this.footer.updateValue(),N.parent.notifyInternalValueChange.call(this)},getClassName:function(){return"List"},setHidden:function(e){N.parent.setHidden.call(this,e),d.updateElement(this),d.isNBF()&&!e&&this.getElements().forEach(function(e){e.updateDisplay&&e.updateDisplay()})}}),N.proto(f.ChangeMixin,f.SortableContainerMixin,f.ExpandMixin,f.CollapseMixin),N}),define("tao/ospm/ui/UIFullScreenHelper",[],function(){function e(e){return e.fullScreenWrapperContainerDom.classList.contains("ospm_mode_sticky")}function t(e){e.fullScreenWrapperContainerDom.classList.add("ospm_mode_sticky"),e.fullScreenWrapperContainerDom.removeEventListener("touchmove",o),e.fullScreenWrapperContainerDom.addEventListener("touchmove",i)}function n(e){e.fullScreenWrapperContainerDom.classList.remove("ospm_mode_sticky"),e.fullScreenWrapperContainerDom.removeEventListener("touchmove",o),e.fullScreenWrapperContainerDom.addEventListener("touchmove",i)}function i(e){e.target.classList.contains("ospm_window_fullscreen_wrapper_container")&&e.preventDefault()}function o(e){e.preventDefault()}var r;return r={syncStickyMode:function(i,o){var r,s,a,l,c,u,d;o=o||{},d=o.heightOffset||0,c=window.innerHeight,u=e(i),u&&n(i),r=i.fullScreenContainerDom.offsetHeight,s=i.dom.querySelector(".ospm_dialogview_content>:not(.ospm_scrollbar)")?i.dom.querySelector(".ospm_dialogview_content>:not(.ospm_scrollbar)"):i.fullScreenContainerContentDom,a=s.offsetHeight,l=s.scrollHeight,u&&t(i,c-d),r>c?window.isCordova||t(i,c-d):c===r?l>=a?n(i):t(i,c-d):n(i)}}}),define("tao/ospm/ui/BoxAlignmentV2",["tao/lib/stapes","tao/ospm/ui/BoxAlignment","tao/ospm/common/Config"],function(e,t,n){function i(e,t){var i=t.getBoundingClientRect(),r=o(e,t);return i.vpLeft=r.x+i.left,i.vpRight=r.x+i.right,i.vpTop=r.y+i.top,i.vpBottom=r.y+i.bottom,n.IF&&i.vpBottom>window.innerHeight&&(i.vpBottom=window.innerHeight),i}function o(e,t){var n,i={x:0,y:0};return t.ownerDocument!==window.document&&(n=document.body.getBoundingClientRect(),i.x=n.left,i.y=n.top),i}var r=t.subclass({contextMenuView:null,setContextMenuView:function(e){this.contextMenuView=e},constructor:function(e){this.alignDom=e.alignDom,this.alignAtDom=e.alignAtDom},align:function(e){var t,n,o,r,s,a,l=0,c=!1;n=this.alignAtDom.getBoundingClientRect(),t=this.alignDom,t.style.removeProperty("height"),t.style.setProperty("width",n.width+"px","important"),setTimeout(function(){n=this.alignAtDom.getBoundingClientRect(),l=window.visualViewport?window.visualViewport.offsetTop:0,o=window.visualViewport?window.visualViewport.height:document.body.getBoundingClientRect().height,r=t.getBoundingClientRect(),o-n.bottom-r.height>0?(t.style.setProperty("left",n.left+"px","important"),t.style.setProperty("top",n.bottom-2+l+"px","important"),c=!1):n.top-r.height>0?(t.style.setProperty("left",n.left+"px","important"),t.style.setProperty("top",n.top-r.height+2+"px","important"),t.style.setProperty("width",n.width+"px","important"),c=!0):(n.top<o-n.bottom?(t.style.setProperty("left",n.left+"px","important"),t.style.setProperty("top",n.bottom-2+l+"px","important"),t.style.setProperty("width",n.width+"px","important"),t.style.setProperty("height",o-n.bottom-2+"px","important"),s=o-n.bottom-2,c=!1):(t.style.setProperty("left",n.left+"px","important"),t.style.setProperty("top","2px","important"),t.style.setProperty("width",n.width+"px","important"),t.style.setProperty("height",n.top+"px","important"),s=n.top,c=!0),a=t.querySelector(".ospm_dd_picker_header"),a&&(s-=a.getBoundingClientRect().height+2),this.contextMenuView&&this.contextMenuView.setMaxHeight(s)),c?(this.alignAtDom.classList.add("ospm_contextmenu_top"),t.classList.add("ospm_contextmenu_top")):(this.alignAtDom.classList.remove("ospm_contextmenu_top"),t.classList.remove("ospm_contextmenu_top")),this.contentWrapperRect=i(this,document.body),this.alignAtDomRect=i(this,this.alignAtDom),this.alignDomRect=this.alignDom.getBoundingClientRect(),"function"==typeof e&&e()}.bind(this),0)}});return r}),define("tao/ospm/ui/views/ContextMenuView",["tao/ospm/ui/widgets/Widget","tao/ospm/core/DomFactory","tao/ospm/common/Logger","tao/ospm/main/CommIdVerification","tao/ospm/core/OSPMEnvironment","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/list/List","tao/ospm/ui/UIFullScreenHelper","tao/ospm/common/Constants","tao/ospm/ui/BoxAlignment","tao/ospm/ui/BoxAlignmentV2","tao/ospm/common/OSPMError","tao/ospm/core/FullScreenWrapperMixin"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p){function f(e){var n,i,o,r;return n=t.createContainer("ospm_contextmenuview"),r=t.createContainer("ospm_contextmenuview_content_wrapper"),n.appendChild(r),i=t.createContainer("ospm_contextmenuview_content"),r.appendChild(i),o=e.wrapContent(n,"ospm_window_fullscreen_wrapper3 ospm_window_fullscreen_wrapper_contextmenuview")}function g(e){e.setCancelOnOutsideClickEventListener(function(){e.hide()},"ospm_window_fullscreen_wrapper_container"),e.addMutationEventListener({element:e.dom.querySelector(".ospm_contextmenuview_content"),listener:function(){e.ignoreMutationEvents||e.onResize()},filterElements:[],eventTypeNames:{attributesStyle:{},attributesClass:{},attributesData:{},childListAddedNodes:{},childListRemovedNodes:{}}}),a.addKeyEventListener("keydown",e.dom,function(t){var n=a.getEventCode(t);n===u.KEYCODES.ESCAPE&&(e.hide(),t.preventDefault(),t.stopPropagation())})}function _(e,t){var n,i;return a.isNBF()&&e.parent&&"Dropdown"===e.parent.getClassName()?void(e.dom.parentNode||C(e)):(n=e.dom.style.opacity,e.dom.style.opacity=0,e.dom.parentNode||C(e),e.boxAlignment||(s.isObject(t)&&t.useV2&&a.isNBF()?(e.boxAlignment=new h(w(e,t)),e.boxAlignment.setContextMenuView(e)):e.boxAlignment=new d(w(e,t))),void e.boxAlignment.align(function(o){e.dom.style.opacity=n,o||D.warning("Menü konnte nicht um das Element herum positioniert werden."),i=e.boxAlignment.alignDomRect.height,e.boxAlignment.alignDom.style.height=i>=window.innerHeight?s.isObject(t)&&t.useV2&&a.isNBF()?window.innerHeight-10+"px":window.innerHeight+"px":"",t&&"function"==typeof t.callback&&t.callback(e)}))}function v(e){b(e)}function b(e){c.syncStickyMode(e,{heightOffset:5})}function y(e){return e instanceof l}function C(e){var t,n=document.body;t=n.querySelector(".ospm_window_fullscreen_wrapper_contextmenuview"),t&&n.removeChild(t),n.appendChild(e.dom)}function w(e,t){var n,i;return t=t||{},i=e.parent.dom,n={alignDom:e.fullScreenContainerDom,alignAtDom:t.alignDom||e.parent.alignDom||i},t.horizontalAlignment?n.position={alignDom:["top",t.horizontalAlignment],alignAtDom:["top",t.horizontalAlignment]}:t.position&&(n.position=t.position),"number"==typeof t.vOffset||s.isArray(t.vOffset)||"number"==typeof t.hOffset?(("number"==typeof t.vOffset||s.isArray(t.vOffset))&&(n.vOffset=t.vOffset),"number"==typeof t.hOffset&&(n.hOffset=t.hOffset)):n.vOffset=i.offsetHeight,n}function E(e){if(s.isSet(e)&&!y(e))throw new m("Nur Parameter vom Typ List kann gesetzt werden.");a.verifyNullParent(e)}function L(e){var t;return e&&null!==e.offsetParent?(t=window.getComputedStyle(e),!("hidden"===t.visibility||"none"===t.display)):!1}var S,D=new n("OSPM","ContextMenuView");return S=e.subclass({dom:null,commId:null,content:null,maxHeight:null,rendered:!1,showParameter:null,boxAlignment:null,constructor:function(e,t){e=e||{},this.dom=f(this),this.fullScreenWrapperContainerDom=this.dom.querySelector(".ospm_window_fullscreen_wrapper_container"),this.fullScreenContainerDom=this.dom.querySelector(".ospm_contextmenuview"),this.fullScreenContainerContentDom=this.fullScreenContainerDom.querySelector(".ospm_contextmenuview_content"),void 0!==t&&(this.commId=t),this.initializeFields(e),g(this)},initializeFields:function(e){S.parent.initializeFields.call(this,e),this.setContent(e.content),this.setMaxHeight(e.maxHeight),this.setAlignAtWidget(e.alignAtWidget),this.setHideListener(e.hideListener),this.setCancelOnOutsideClick(void 0!==e.cancelOnOutsideClick?e.cancelOnOutsideClick:!0),"function"==typeof e.outsideClickListener&&this.setOutsideClickListener(e.outsideClickListener)},setAlignAtWidget:function(t){if(t&&!(t instanceof e))throw new m("Ein ContextMenu kann nur an Widgets ausgerichtet werden");this.parent&&(this.parent.contextMenu=null),this.parent=t,t&&(t.contextMenu=this)},setContent:function(e){var t=this.dom.querySelector(".ospm_contextmenuview_content");E(e),a.removeAllChildren(t),this.content&&this.content.setParent(null),this.content=e,s.isSet(e)&&(t.appendChild(e.dom),e.setParent(this))},getContent:function(){return this.content},getChildren:function(){return[this.content]},setMaxHeight:function(e){s.isSet(e)?(this.maxHeight=e,this.fullScreenContainerContentDom.style.maxHeight=this.maxHeight):(s.deleteProperty(this,"maxHeight"),this.fullScreenContainerContentDom.style.maxHeight="none")},getMaxHeight:function(){return this.maxHeight},show:function(e){var t,n;if(null!==this.commId&&i.checkForCurrentStep("ContextMenuView.show",this.commId),!this.parent)throw new m('Das ContextMenu ist keinem Widget zugeordnet (Eigenschaft "alignAtWidget" nicht gesetzt)');e&&e.disableActiveClassToggling||this.parent.dom.classList.add("ospm_active"),a.isNBF()&&this.parent&&this.parent.contentDom&&this.parent.contentDom.classList.contains("ospm_table_input_field")&&this.dom.classList.add("ospm_origin_table_input"),this.showParameter=s.deepCopy(e),e&&e.autoFocused!==!1&&(this.savePreviousFocussedElement(),this.disableKeyboardNavigation()),this.dom.parentNode||(this.rendered=!0,_(this,e),v(this),a.callAfterRenderLayout(this)),o.disableMainDocumentScrolling(),!o.isTouchDevice()&&e&&e.autoFocused!==!1&&this.setFocusToWrapper(function(){var e=this.dom.querySelector("input");return a.isNBF()&&this.parent&&"Dropdown"===this.parent.getClassName()?(this.dom.getElementsByClassName("ospm_dropdown_content")[0].focus(),!0):L(e)?(e.focus(),!0):!1}.bind(this)),window.isCordova&&window.innerHeight<748&&(n=Date.now(),t=setInterval(function(){(748===window.innerHeight||Date.now()-n>2e3)&&(clearInterval(t),t=null,this.onResize())}.bind(this),100))},hide:function(){this.rendered=!1,this.boxAlignment=null,this.dom.parentNode&&(this.dom.parentNode.removeChild(this.dom),this.enableKeyboardNavigation()),o.enableMainDocumentScrolling(),this.parent&&(this.parent.dom.classList.remove("ospm_active"),this.returnFocusFromWrapper()),this.notifyHideListeners()},syncView:function(){v(this)},onResize:function(){this.rendered&&this.dom.parentNode&&(_(this),v(this))},setIgnoreMutationEvents:function(e){this.ignoreMutationEvents=e},getClassName:function(){return"ContextMenuView"}}),S.createMenu=function(e,t){return new S(e,t)},S.proto(r.OutsideClickMixin,r.MutationEventMixin,r.ChangeMixin,r.HideMixin,p),e.setContextMenuViewClass(S),S}),define("tao/ospm/ui/AutoCompleteValidator",["tao/lib/stapes","tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/common/WidgetValidator","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/ui/ValidatorUtils","tao/ospm/ui/views/ContextMenuView","tao/ospm/ui/widgets/DropdownElement","tao/ospm/ui/widgets/list/List"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e){o.resetExecuteLater(e.autoCompleteTimer),e.autoCompleteTimer=null}function m(e){function n(t){var n;r||(r=!0,s.searchRunning=!1,h(s),s===e.validator&&(n=e.getValue(),i!==n?m(e):o.isArray(t)&&t.length?g(e,t,i):b(e)))}var i,r,s=e.validator;i=e.getValue(),i.length>=s.minChars?(s.autoCompleteTimer=o.executeLater(function(){E.error('Anwendung lieferte für "%o" keine AutoComplete-Liste innerhalb des konfigurierten Intervalls',i),n()},t.AUTOCOMPLETE_TIMEOUT),s.searchRunning=!0,s.onChange(i,n)):b(e)}function p(e,t){var n=t.appData;n&&"object"==typeof n&&(n=n.hasOwnProperty("value")?n.value:n.label),e.inputToolActive=!0,e.setInputValue(n),e.focus(),e.inputToolActive=!1,b(e),e.notifyAutoCompleteSelectionListeners({data:t.appData})}function f(e,n,i){function r(t){p(e,t)}function s(e){var t,n;
return e&&"object"==typeof e&&(e=e.label),t=e.toLowerCase().indexOf(i),t>=0&&(n=t+i.length,e=e.substr(0,t)+"<b>"+e.substring(t,n)+"</b>"+e.substr(n)),e}function a(t){var i,o,a;if(e.shownWidgets===h)for(i=h.length,o=Math.min(i+t,n.length);o>i;i++)a=new u({label:s(n[i]),enabled:!0,clickListener:r}),a.appData=n[i],h.push(a),m.addElement(a)}function l(){c.scrollTop+c.offsetHeight>=c.scrollHeight-100&&(a(1),h.length===n.length||e.shownWidgets!==h?c.removeEventListener("scroll",l,!1):o.executeLater(l,1))}var c,h=[],m=new d;return i=i.toLowerCase(),t.AUTOCOMPLETE_MAX_ENTRIES>0&&n.length>t.AUTOCOMPLETE_MAX_ENTRIES&&(n=n.slice(0,t.AUTOCOMPLETE_MAX_ENTRIES)),e.shownWidgets=h,a(100),h.length<n.length&&o.executeLater(function(){e.contextMenuView&&(c=e.contextMenuView.dom.querySelector(".ospm_contextmenuview_content_wrapper"),c.addEventListener("scroll",l,!1))}),m}function g(e,n,i){function o(){g(e,n,i)}function r(n){var i,r,a;i=window.visualViewport?visualViewport.height+visualViewport.offsetTop-n.fullScreenContainerDom.offsetTop:n.dom.offsetHeight-n.fullScreenContainerDom.offsetTop,s.isNBF()&&(i-=2),n.setMaxHeight(Math.min(i,L)+"px"),window.visualViewport&&window.visualViewport.addEventListener("resize",o),t.IF&&s.isMobile()&&(n.fullScreenWrapperContainerDom.addEventListener("touchstart",function(e){r=e.touches[0].clientY},{passive:!1}),n.fullScreenWrapperContainerDom.addEventListener("touchmove",function(t){a=e.contextMenuView.dom.querySelector(".ospm_contextmenuview_content_wrapper"),t.target===n.fullScreenWrapperContainerDom||window.visualViewport&&window.visualViewport.height===n.dom.offsetHeight?t.preventDefault():s.isIOS()&&(a.scrollHeight<=a.offsetHeight+a.scrollTop&&r>t.touches[0].clientY||0===a.scrollTop&&r<t.touches[0].clientY)&&t.preventDefault()},{passive:!1}))}var a,l,u=v();e.contextMenuView&&e.contextMenuView.hide(),e.dom.classList.add("ospm_autocomplete_open"),e.contextMenuView=new c({content:f(e,n,i),alignAtWidget:e,hideListener:function(){e.shownWidgets=[],e.contextMenuView=null,e.selectedIndex=-1,window.visualViewport&&window.visualViewport.removeEventListener("resize",o),e.dom.classList.remove("ospm_autocomplete_open")},maxHeight:L+"px"}),l=s.isIOS()&&window.visualViewport?window.visualViewport.offsetTop:0,a=e.getAutoCompleteShowOptions(l),e.contextMenuView.dom.querySelector(".ospm_contextmenuview").classList.add("ospm_dropdown_content"),s.isNBF()&&(a.useV2=!0),u&&(a.callback=r,s.isIOS()||_(e)),e.contextMenuView.show(a)}function _(e){var t,n,i;t=e.dom.getBoundingClientRect(),n=document.body.scrollTop||document.documentElement.scrollTop,n+=t.top,i=document.getElementById(a.OSPM_APP_HEADER).offsetHeight,window.scroll(0,n-i)}function v(){return s.isMobile()?!(-1===window.navigator.userAgent.indexOf("Android")&&!window.visualViewport):!1}function b(e){var t=e.contextMenuView,n=s.activeElement();t&&t.hide(),n&&n.classList.contains("ospm_textinput_value")||e.focus(),e.dom.classList.remove("ospm_autocomplete_open")}function y(e,t,n){var i=e.selectedIndex,o=e.shownWidgets;n.preventDefault(),n.stopPropagation(),e.contextMenuView&&(i>=0&&i<o.length&&o[i].dom.classList.remove("ospm_keyboard_selected"),i=Math.min(Math.max(i+t,0),o.length-1),e.selectedIndex=i,i>=0&&(o[i].dom.classList.add("ospm_keyboard_selected"),o[i].dom.scrollIntoView()))}function C(e){return"function"==typeof e?e:o.isArray(e)?w.defaultFilter(e):null}var w,E=new i("OSPM","AutoComplete"),L=308;return w=r.subclass({validator:null,onChange:null,searchRunning:!1,autoCompleteTimer:null,minChars:null,constructor:function(e){this.validator=e},afterInput:function(e){return e.indexValue=-1,!this.searchRunning&&!e.inputToolActive&&t.AUTOCOMPLETE_DELAY>=0&&(this.autoCompleteTimer=o.executeLater(function(){m(e)},t.AUTOCOMPLETE_DELAY,this.autoCompleteTimer)),this.validator.afterInput(e)},onEntry:function(e){return e.contextMenuView?!1:this.validator.onEntry(e)},afterValueFormatted:function(e){return this.validator.afterValueFormatted(e)},afterDataTypeValidated:function(e,t){return this.validator.afterDataTypeValidated(e,t)},onValidate:function(e){return this.validator.onValidate(e)},onExit:function(e){return e.contextMenuView?!1:(h(this),this.validator.onExit(e))}}),w.Mixin={contextMenuView:null,shownWidgets:[],selectedIndex:-1,setValidator:function(e){e=l.createValidator(e),this.validator instanceof w?this.validator.validator=e:this.validator=e},setAutoComplete:function(e,t){var n=C(t),i=this.validator;1>e||!n?this.isAutoComplete()&&(this.contextMenuView&&this.contextMenuView.hide(),this.validator=i.validator):(this.isAutoComplete()||(i=new w(this.validator),this.validator=i),i.onChange=n,i.minChars=e)},isAutoComplete:function(){return this.validator instanceof w},getAutoCompleteShowOptions:function(e){var t;return s.isNBF()?t={autoFocused:!1,alignDom:this.contentDom?this.contentDom:this.wrapperDom,position:{alignDom:[n.VERTICAL_ALIGNMENT.TOP,n.HORIZONTAL_ALIGNMENT.LEFT],alignAtDom:[n.VERTICAL_ALIGNMENT.BOTTOM,n.HORIZONTAL_ALIGNMENT.LEFT]},vOffset:-2,hOffset:0}:(t=s.isMobile()&&this.isFormElement()?{autoFocused:!1,alignDom:this.inputFieldDom,position:{alignDom:["top",n.HORIZONTAL_ALIGNMENT.LEFT],alignAtDom:["top",n.HORIZONTAL_ALIGNMENT.LEFT]},vOffset:o.isNumber(e)?e+30:30,hOffset:-16}:{autoFocused:!1,alignDom:this.wrapperDom,position:{alignDom:["top",n.HORIZONTAL_ALIGNMENT.RIGHT],alignAtDom:["top",n.HORIZONTAL_ALIGNMENT.RIGHT]},vOffset:o.isNumber(e)?e+36:36,hOffset:32},s.isMobile()&&(t.position.strict=!0)),t}},w.onKeyDown=function(e,t){var i;if(e.isAutoComplete()&&e.contextMenuView){if(i=s.getEventCode(t),i===n.KEYCODES.ESCAPE)return b(e),!1;if(i===n.KEYCODES.ENTER)return t.preventDefault(),t.stopPropagation(),!0;if(i===n.KEYCODES.DOWN_ARROW&&!t.altKey)return y(e,1,t),!0;if(i===n.KEYCODES.UP_ARROW&&!t.altKey)return y(e,-1,t),!0}return!1},w.onKeyUp=function(e,t){var i;return e.isAutoComplete()&&e.contextMenuView&&s.getEventCode(t)===n.KEYCODES.ENTER?(i=e.selectedIndex,i>=0&&p(e,e.shownWidgets[i]),t.preventDefault(),!0):!1},w.defaultFilter=function(e){return function(t,n){n(e.filter(function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}))}},w}),define("tao/ospm/ui/widgets/TextInput",["tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/ui/widgets/mixins/InputPart","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/ValidatorUtils","tao/ospm/ui/UIConstants","tao/ospm/ui/UIErrorUtils","tao/ospm/main/WorkflowStepManager","tao/ospm/ui/AutoCompleteValidator"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m){function p(e,n){var o,r,s,c,u,d;e.optionalDomLabel=" (optional)",e.errorMessageShouldHaveIcon(),o=a.createContainer("ospm_textinput"),e.dom=o,o.tabIndex=0,r=a.createContainer("ospm_textinput_wrapper"),o.appendChild(r),e.contentDom=r,e.wrapperDom=a.createContainer("ospm_widget_content_wrapper"),r.appendChild(e.wrapperDom),e.showPasswordDom=a.createContainer("ospm_password_show"),e.showPasswordDom.appendChild(l.createSimpleIcon(t.ICONS.EYE_S)),e.showPasswordDom.appendChild(l.createSimpleIcon(t.ICONS.EYE_CLOSE_S)),e.showPasswordDom.appendChild(a.createSpanLabel("Anzeigen")),r.appendChild(e.showPasswordDom),n.passwordEntry||e.showPasswordDom.classList.add("ospm_hidden"),i.addClickListener(e.showPasswordDom,function(){e.showPasswordDom.classList.contains("ospm_password_visible")?(e.inputFieldDom.setAttribute("type","password"),e.showPasswordDom.classList.remove("ospm_password_visible")):(e.inputFieldDom.setAttribute("type","text"),e.showPasswordDom.classList.add("ospm_password_visible"))},!1,!0),s=a.createLeftAlignedContainer("ospm_labelfield"),e.wrapperDom.appendChild(s),e.labelContainerDom=a.createContainer("ospm_label_container"),u=a.createContainer("ospm_left_label"),d=a.createContainer("ospm_right_label"),u.appendChild(e.buildLabelDom(t.TEXT_STYLE.LABEL3)),s.appendChild(e.labelContainerDom),c=I.buildContainerDom(e),s.appendChild(c),r.appendChild(e.buildInputIconContainerDom(n.dataType)),u.appendChild(e.buildSubLabelDom(t.TEXT_STYLE.SUBLABEL5)),u.appendChild(e.buildOptionalDom()),u.appendChild(e.buildHintIconForTooltip()),d.appendChild(e.buildSubValueDom(t.TEXT_STYLE.LABEL6)),e.labelContainerDom.appendChild(u),e.labelContainerDom.appendChild(d),o.appendChild(e.buildInfoTextDom()),o.appendChild(e.buildErrorDom()),e.addEventListeners(),e.setCheckboxIconContainer(r),e.dom.addEventListener("focus",function(){e.inputFieldDom.focus()}),e.dom.addEventListener("focusout",function(t){t.relatedTarget===e.dom||e.dom.contains(t.relatedTarget)||(e.dom.classList.remove("ospm_focus_inside"),I.handleIFMobile(e),_(e))},!1),e.inputFieldDom.addEventListener("focus",function(){e.dom.classList.add("ospm_focus_inside"),i.toggleClassName(e.dom,"ospm_input_empty",!1),I.handleIFMobile(e)},!1)}function f(e,n){var o,r,s,l,c;e.wrapperDom=a.createContainer("ospm_widget_content_wrapper"),e.textInputContainerDom=a.createLeftAlignedContainer("ospm_textInput_container"),o=a.createContainer("ospm_textinput"),r=a.createLeftAlignedContainer("ospm_labelfield"),e.wrapperDom.appendChild(r),o.appendChild(e.wrapperDom),e.dom=o,e.contentDom=r,e.textInputContainerDom.appendChild(e.contentDom),e.wrapperDom.appendChild(e.textInputContainerDom),l=a.createContainer("ospm_list_entry_left_content"),r.appendChild(l),c=a.createContainer("ospm_list_entry_left_content_first_line"),l.appendChild(c),c.appendChild(e.buildLabelDom(t.TEXT_STYLE.LABEL3)),c.appendChild(e.buildInfoTextDom()),c.appendChild(e.buildHintIcon()),c.appendChild(e.buildOptionalDom()),c=a.createContainer("ospm_list_entry_left_content_second_line"),l.appendChild(c),c.appendChild(e.buildSubLabelDom(t.TEXT_STYLE.SUBLABEL5)),r.appendChild(e.buildSubValueDom(t.TEXT_STYLE.LABEL6)),s=I.buildContainerDom(e),s.appendChild(e.buildInputIconContainerDom(n.dataType)),r.appendChild(s),e.wrapperDom.appendChild(e.buildErrorDom()),e.wrapperDom.appendChild(e.buildHelpMessageContainer()),e.inputFieldDom.addEventListener("blur",function(){e.dom.classList.remove("ospm_focus_inside"),I.handleIFMobile(e),_(e)},!1),e.inputFieldDom.addEventListener("focus",function(){e.dom.classList.add("ospm_focus_inside"),i.toggleClassName(e.dom,"ospm_input_empty",!1),I.handleIFMobile(e)},!1),e.addEventListeners()}function g(e){return i.isWithinForm(e)&&(i.isMobile()||i.isWithinInputPair(e))?1:.6}function _(e){e.inputFieldDom.value?i.toggleClassName(e.dom,"ospm_input_empty",!1):i.toggleClassName(e.dom,"ospm_input_empty",!0)}function v(e){E(e),e.inputFieldDom&&(e.inputFieldDom.value?C(e,e.inputFieldDom.value):e.inputFieldDom.placeholder&&C(e,e.inputFieldDom.placeholder))}function b(e,t){var n,o,r,s,a=20,l=74,c=32;e&&e.labelContainerDom&&(n=Number(e.labelContainerDom.getBoundingClientRect().height)),i.isNBF()&&e.labelContainerDom&&e.contentDom&&setTimeout(function(){i.isMobile()&&(a=16,l=66),e.dom.classList.contains("ospm_multiline_label")&&c>n&&(e.dom.classList.remove("ospm_multiline_label"),e.contentDom.style.height=null,y(e,0)),setTimeout(function(){e&&e.labelContainerDom&&(n=Number(e.labelContainerDom.getBoundingClientRect().height),n>=c&&(e.dom.classList.add("ospm_multiline_label"),setTimeout(function(){n=Number(e.labelContainerDom.getBoundingClientRect().height),o=Number(e.contentDom.getBoundingClientRect().height),n&&o&&(n=Number(e.labelContainerDom.getBoundingClientRect().height),r=n-a,s=l+r,e.contentDom.style.height=s+"px",y(e,r))},100)))},100)},t)}function y(e,t){var n=i.isMobile()?28:36;e.inputFieldDom.style.marginTop=n+t+"px",e.valueUnitDom.style.top=n+t+"px"}function C(e,t){var n,o=null,r=3;return"password"===e.inputFieldDom.getAttribute("type")?void(e.inputFieldDom.style.width=i.isWithinForm(e)?"100%":e.inputFieldDom.style.maxWidth):(n=w(e),n.textContent=t,void(i.isWithinForm(e)?(e.valueUnitDom.style.minWidth=null,e.inputFieldDom.style.width=null,e.valueUnitDom.children.length&&(e.valueUnitDom.style.minWidth=e.valueUnitDom.children[0].offsetWidth+"px",e.inputFieldDom.offsetWidth>n.offsetWidth&&(o=e.inputFieldDom.offsetWidth-n.offsetWidth,i.isMobile()&&(o-=r),o="-"+o+"px"),e.valueUnitDom.children[0].style.marginLeft=o,e.formInputWidthInitialized||(e.formInputWidthInitialized=!0,i.requestAnimationFrame(function(){i.updateElement(e)}),setTimeout(function(){i.updateElement(e)},300)))):e.inputFieldDom.style.width=n.offsetWidth+8+"px"))}function w(e){var t,n;return t=i.getMeasuringElement("textinput"),i.isInPage(e.inputFieldDom)&&(n=window.getComputedStyle(e.inputFieldDom),["fontFamily","fontWeight","fontSize","letterSpacing","textTransform","paddingLeft","paddingRight","marginLeft","marginRight"].forEach(function(e){void 0!==n[e]&&(t.style[e]=n[e])})),t}function E(e){e.labelDom&&(e.labelDom.textContent?(e.labelDom.classList.remove("ospm_hidden"),e.inputFieldDom.style.maxWidth=L(e),e.inputFieldDom.parentNode.parentNode.classList.remove("ospm_labelfield_whole_line"),e.inputFieldDom.parentNode.classList.remove("ospm_textinput_value_container_whole_line"),e.inputFieldDom.classList.add("ospm_textinput_value_whole_line")):(e.labelDom.classList.add("ospm_hidden"),e.inputFieldDom.style.maxWidth="none",e.inputFieldDom.parentNode.parentNode.classList.add("ospm_labelfield_whole_line"),e.inputFieldDom.parentNode.classList.add("ospm_textinput_value_container_whole_line"),e.inputFieldDom.classList.add("ospm_textinput_value_whole_line")))}function L(e){return parseInt(i.getParentElementWidthOfWidget(e)*g(e),10)+"px"}function S(e){e.constrainedDataType.onFocus&&"function"==typeof e.constrainedDataType.onFocus&&e.constrainedDataType.onFocus(e.inputFieldDom)}function D(e){var i;return e.dataType&&n.isObject(e.dataType)&&e.valueUnit?(Object.keys(e.dataType).forEach(function(o){i=Object.keys(t.DATA_TYPE_CONSTRAINTS).some(function(e){return t.DATA_TYPE_CONSTRAINTS[e]===o}),i&&(n.isObject(e.dataType[o])?e.dataType[o].valueUnit=e.dataType[o].valueUnit||e.valueUnit:e.dataType[o]={value:e.dataType[o],valueUnit:e.valueUnit})}),e):e}var T,I=new s({resizeInput:i.updateElement,updateEmptyCss:_}),k=o.subclass({stepData:null,contentDom:null,parameter:null,wrapperDom:null,showPasswordDom:null,labelContainerDom:null,formInputWidthInitialized:!1,constructor:function(e,t){e=n.isObject(e)?D(e):{},this.parameter=e,this.stepData=t,i.isNBF()?p(this,e):(f(this,e),this.setCheckboxIconContainer(this.textInputContainerDom)),this.setLeftIconContainer(this.contentDom),this.initializeFields(e),_(this)},setPasswordEntry:function(e){this.inputFieldDom.setAttribute("type",e===!0?"password":"text"),this.showPasswordDom&&this.showPasswordDom.classList.toggle("ospm_hiddem",!e)},initializeFields:function(e){e.mandatoryMessage=e.mandatoryMessage||t.MANDATORY_MESSAGE,k.parent.initializeFields.call(this,e),this.inputFieldDom.id=this.getId()+"__input",I.initializeFields(this,e),this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setSubLabel(e.subLabel),this.setSubLabelStyle(e.subLabelStyle),e.passwordEntry&&this.setPasswordEntry(e.passwordEntry),this.setInfoText(e.infoText),this.setHint(e.hint),this.setHintIcon(e.hintIcon),this.setSubValue(e.subValue),this.setSubValueUnit(e.subValueUnit),this.setSubValueStyle(e.subValueStyle),this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage),this.setError(e.error),this.setLeftIcon(e.leftIcon),e.changeListener&&this.setChangeListener(e.changeListener),this.setAutoCompleteSelectionListener(e.autoCompleteSelectionListener),this.setTabIndex(e.tabIndex),this.initializeCheckableFields(e),this.setGroup(e.group),e.wrapMode&&this.setWrapMode(e.wrapMode)},summingValues:function(){return this.isSummable()?[this.getValue()]:[]},focus:function(){k.parent.focus.call(this),i.focusElement(this,this.inputFieldDom),S(this)},removeFocus:function(){this.inputFieldDom.blur(),k.parent.removeFocus.call(this)},switchToFormLayout:function(){var e,n,o,r,s,l;this.hasFormLayout||i.isNBF()||(k.parent.switchToFormLayout.call(this),r=this.dom.querySelector(".ospm_help_marker"),s=this.dom.querySelector(".ospm_list_entry_left_content"),l=this.dom.querySelector(".ospm_textinput_value_container"),e=a.createContainer("ospm_list_entry_left_content_form_wrapper"),n=a.createContainer("ospm_textinput_value_container_form_wrapper"),l.dataset.placeholder=t.DEFAULT_PLACEHOLDERS.TEXT,o=a.createContainer("ospm_textinput_value_container_form_hint_wrapper"),n.appendChild(o),s.parentNode.replaceChild(e,s),l.parentNode.replaceChild(n,l),e.appendChild(s),o.appendChild(l),this.errorMessageDom.parentNode.removeChild(this.errorMessageDom),n.appendChild(this.errorMessageDom),this.infoTextDom.parentNode.removeChild(this.infoTextDom),n.appendChild(this.infoTextDom),r.parentNode.removeChild(r),o.appendChild(r),I.switchToFormLayout(this),i.updateElement(this))},getClassName:function(){return"TextInput"},onResize:function(){this.afterRenderLayout(),k.parent.onResize.call(this),i.updateElement(this)},afterRenderLayout:function(){this.inputFieldDom&&!i.isNBF()&&(this.inputFieldDom.style.maxWidth=L(this)),i.updateElement(this),this.parameter.wrapMode&&this.parameter.wrapMode===t.WRAP_MODE.NOWRAP||b(this,0)},updateDisplay:function(){var e=this.constrainedDataType&&this.constrainedDataType.inputType.name?this.constrainedDataType.inputType.name:null;k.parent.updateDisplay.call(this),this.isEnabled()?((this.dom.dataset.mode===t.INPUT_MODE.DISABLED||this.dom.dataset.mode===t.INPUT_MODE.MANDATORY)&&(this.dom.dataset.mode=t.INPUT_MODE.ACTIVE),this.inputFieldDom.disabled=!1):(this.dom.dataset.mode=t.INPUT_MODE.DISABLED,this.inputFieldDom.disabled=!0),i.isIE()||i.isNBF()||this.setValuePlaceholder(this.valuePlaceholder),i.updateElementHeight(this.dom.children),i.isNBF()||n.executeLater(function(){v(this)}.bind(this),0),I.handleIFMobile(this),i.isNBF()&&(this.valuePlaceholder?(this.setValuePlaceholder(this.valuePlaceholder),this.dom.classList.add("ospm_has_placeholder")):(this.dom.classList.remove("ospm_has_placeholder"),e===t.INPUT_DATA_TYPE.DATE&&this.mandatory&&(this.setValuePlaceholder(this.constrainedDataType.getMandatoryPlaceholder()),this.dom.classList.add("ospm_has_placeholder"))),this.inputFieldDom.style.right=this.valueUnitDom.getBoundingClientRect().width+"px",this.handleOptionalLabelInNbf())},setHidden:function(e){k.parent.setHidden.call(this,e),e||this.afterRenderLayout()},getLabelableHTMLElement:function(){return this.inputFieldDom},setInputValue:function(e){this.inputFieldDom.value=e,i.isNBF()||v(this),this.onInputChanged()},setEnabled:function(e){k.parent.setEnabled.call(this,e),this.updateInputIconContainerDom()}});return T={isMandatory:function(){return"true"===this.dom.dataset.mandatory},setMandatory:function(e){r.MandatoryMixin.setMandatory.call(this,e),this.mandatory?(this.dom.dataset.mandatory="true",this.inputFieldDom&&this.inputFieldDom.setAttribute("required","")):(this.dom.dataset.mandatory&&n.deleteProperty(this.dom.dataset,"mandatory"),this.dom.dataset.mode===t.INPUT_MODE.MANDATORY&&(this.dom.dataset.mode=t.INPUT_MODE.ACTIVE),this.inputFieldDom&&this.inputFieldDom.removeAttribute("required")),I.updatePlaceholder(this)},validate:function(){var e=I.validate(this,c.onValidate);return d.checkMandatoryAfterValidation(this),e},getMandatoryValueEmptyError:function(){var e;return this.isMandatory()&&(I.validate(this,c.onValidate),this.dom.dataset.mode===t.INPUT_MODE.MANDATORY&&(e={code:8,title:"Pflichtfeld",msg:this.getMandatoryMessage()})),e},setBottomMargin:function(e){i.isNBF()?k.parent.setBottomMargin.call(this,e):o.setBottomPadding(this,e)},wantsLargeHeight:function(){return"large"===this.minHeight||this.dom.classList.contains("ospm_has_sublabel")||r.LeftIconMixin.getMaxIconHeight.call(this)>=u.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS},onKeyDown:function(e){return m.onKeyDown(this,e)||I.API.onKeyDown.call(this,e)},onKeyUp:function(e){return m.onKeyUp(this,e)||I.API.onKeyUp.call(this,e)}},k.proto(I.API,r.LabelMixin,r.SubLabelMixin,r.InfoTextMixin,r.HintMixin,r.LeftIconMixin,r.SubValueMixin,r.ErrorMixin,new r.TabIndexMixinFactory({domName:"inputFieldDom"}),r.FocusableMixin,r.MandatoryMixin,r.CheckableMixin,r.GroupMixin,r.WrapMixin,r.InputStorageMixin,m.Mixin,r.AutoCompleteSelectionMixin,T,{setLabel:function(e){r.LabelMixin.setLabel.call(this,e),this.parameter.wrapMode&&this.parameter.wrapMode===t.WRAP_MODE.NOWRAP||b(this,500)},setWrapMode:function(e){r.WrapMixin.setWrapMode.call(this,e),this.parameter.wrapMode&&this.parameter.wrapMode===t.WRAP_MODE.NOWRAP||b(this,500)}}),k}),define("tao/ospm/ui/views/PopUpView",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/common/Config","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/core/ServerStage","tao/ospm/core/OSPMEnvironment","tao/ospm/main/Messages","tao/ospm/main/WorkflowStepManager","tao/ospm/ui/UIConstants","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(e,t,n){"Langsame Ausführung"!==e.title&&(e.msg="<b>"+e.title+"</b><br>"+e.msg,e.title="Langsame Ausführung"),e.msg=e.msg+"<br><br><b>"+t+"</b><br>"+n}function p(){var e;k||(g(),e=document.getElementById(d.OSPM_APP)||document.body,e.appendChild(k))}function f(){w=null,y.hide()}function g(){var e,n,i,o,a=[t.ICONS.STANDARD_INFORMATION_CIRCLE_M,t.ICONS.HINT_SQUARE_M,t.ICONS.WARNING_M];if(k=s.createContainer("ospm_popup_view "+S),k.setAttribute("role","alert"),k.setAttribute("aria-atomic","true"),e=s.createContainer("ospm_popup_view_header"),o=s.createContainer("ospm_popup_view_header_label"),e.appendChild(o),r.isNBF())for(var l=0;l<a.length;l++)e.appendChild(h.createIcon(a[l],32));i=s.createContainer("ospm_popup_view_header_action"),i.appendChild(h.createSimpleActionIcon({name:t.ICONS.CANCEL_S,label:"Popup schließen"},f)),e.appendChild(i),k.appendChild(e),n=s.createContainer("ospm_popup_view_content"),n.appendChild(s.createContainer("ospm_popup_view_content_text")),k.appendChild(n),r.addKeyEventListener("keyup",k,function(e){r.getEventCode(e)===t.KEYCODES.ESCAPE&&f()},!1)}function _(){y.isShowing()&&(o.IF&&b(),C&&C===k.clientWidth||(C=k.clientWidth,v()))}function v(){var e;s.createMarkupDomTree(null,k.lastChild.firstChild,N),x>=0?r.isNBF()||s.createClippingHandlerForMarkupDom({dom:k.lastChild.firstChild},"dom",{maxRows:3,staticClipping:!0,noResize:!0}).updateHandler():(e=k.querySelector(".ospm_popup_view_content_text"),e&&(e.style.maxHeight=""))}function b(){var e,t,n;y.isShowing()&&(e=document.querySelector(".ospm_page_container"),e&&(t=e.firstChild,t&&(n=t.getBoundingClientRect(),k.style.right=n.right-n.width+"px",n.top<0?(k.style.top=0,k.classList.add("ospm_page_out")):(k.classList.remove("ospm_page_out"),k.style.top=n.top+"px"))))}var y,C,w,E,L,S="ospm_invisible",D="ospm_warning",T=0,I={0:"ospm_info",2:"ospm_info",4:"ospm_warn",8:"ospm_error",16:"ospm_error"},k=null,x=-1,A=T,O="",N="",M=null;return y={show:function(e,t){if(w&&e!==w&&(E=w,w=null),"object"!=typeof e)throw new n("Es wurde kein PopUp-Objekt zur Anzeige übergeben",{popUp:e});if("string"!=typeof e.msg)throw new n("Es wurde kein Text im PopUp-Objekt zur Anzeige übergeben",{popUp:e});return!t&&e.code<x?null:(p(),M="string"==typeof e.id?e.id:i.randomUUID(),x="number"==typeof e.code?e.code:0,A=0>x?16:c.getMatchingCode(x),O=("string"==typeof e.title?e.title:c.defaultTitle(x)).trim(),N=e.msg.trim(),0>x&&(N+="<br><br>Weiterführende Informationen können Sie dem Logfile entnehmen. Für eine detaillierte Analyse führen Sie eine E2E-Auswertung des Vorgangs durch oder aktivieren das Performance-Fenster (URL-Parameter: perf_win=true)"),k.firstChild.firstChild.className="ospm_popup_view_header_label",k.firstChild.firstChild.classList.add(I[A]),r.isNBF()&&(N.length?k.firstChild.classList.remove("ospm_popup_view_no_content"):k.firstChild.classList.add("ospm_popup_view_no_content")),s.createMarkupDomTree(null,k.firstChild.firstChild,O),v(),0>x?k.classList.add(D):k.classList.remove(D),k.classList.remove(S),y.onResize(),l.isTouchDevice()||(w||(L=r.activeElement()),k.querySelector(".ospm_icon_cancel_s").focus()),M)},hide:function(e){var t,n;return w&&(E=w,w=null),void 0===e&&(e=M),e!==M?null:(p(),k.classList.add(S),x=-1,A=T,O="",N="",M=null,E&&(w=E,E=null,y.show(w)),l.isTouchDevice()||w||(t=r.activeElement(),t&&t.blur(),L&&(L.focus(),t=r.activeElement(),t&&t!==document.body||(n=u.currentStep(),n&&n.TaoOSPM&&r.focusFirstElement(n.TaoOSPM.ui.getLayout())))),e)},isShowing:function(e){return k&&(void 0===e||e===M)&&!k.classList.contains(S)},get:function(e){return y.isShowing(e)?{id:M,msg:N,title:O,code:x}:null},onResize:_,addWarning:function(e,t){var n={title:e,msg:t,code:-1};y.isShowing()?E?m(E,e,t):w?(m(w,e,t),y.show(w)):E=n:(w=n,y.show(w))}},o.IF&&window.addEventListener("scroll",b),document.OSPMEnvironment&&(document.OSPMEnvironment.PopUpView=y),y}),define("tao/ospm/ui/widgets/LayoutColumn",["tao/ospm/ui/widgets/ContainerWidget","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/OSPMError","tao/ospm/ui/widgets/mixins/events/MutationEventMixin"],function(e,t,n,i,o){function r(e){e.addMutationEventListener({element:e.dom,listener:function(){a(e),u(e)},eventTypeNames:{attributesStyle:{watchList:p},attributesClass:{watchList:f},childListAddedNodes:{},childListRemovedNodes:{}}})}function s(e){var t=e.dom.parentNode;return t&&(t=t.parentNode,t&&(t=t.parentNode))?e.getHeight()>t.offsetHeight:!1}function a(e){n.isRendered(e)&&l(e,e.lastElementSticky&&e.parent.supportsStickyElements()&&s(e))}function l(e,t){var i,o,r;e.dom.parentNode&&(o=e.elements,i=t&&o.length>0?o[o.length-1]:null,e.stickyElement!==i&&(r=n.activeElement(),e.stickyElement=i,i?("function"==typeof e.parent.setStickyColumnHeight&&e.parent.setStickyColumnHeight(),e.stickyArea.appendChild(i.dom),e.dom.classList.add("ospm_has_sticky_element"),"function"==typeof e.parent.onScroll&&e.parent.onScroll(e.parent.getScrollTop())):(o.length>0&&e.containerDom.appendChild(o[o.length-1].dom),e.dom.classList.remove("ospm_has_sticky_element"),e.containerDom.style.height="",e.containerDom.style.paddingBottom=""),r&&n.activeElement()!==r&&r.focus()),(window.isCordova||n.isIFWebView())&&(e.dom.parentNode.style.zIndex=e.dummyZindex.toString(),e.containerDom.style.zIndex=e.dummyZindex.toString(),e.dummyZindex++))}function c(e){return e.topElement?[e.topElement].concat(e.elements):e.elements}function u(e){var t,n,i=!1,o=e.parent&&e.parent.subLayoutCount()>0;for(n=c(e),t=n.length-1;t>=0;t--)n[t].dom.classList.remove("ospm_last_visible_element"),o||i||n[t].isHidden()||(n[t].dom.classList.add("ospm_last_visible_element"),i=!0)}function d(e){h(e)?e.dom.classList.contains("ospm_has_hidden_elements")||(e.dom.classList.add("ospm_has_hidden_elements"),n.updateElement(e.getParent())):e.dom.classList.contains("ospm_has_hidden_elements")&&(e.dom.classList.remove("ospm_has_hidden_elements"),n.updateElement(e.getParent()))}function h(e){return c(e).every(function(e){return e.isHidden()})}var m,p={display:"none"},f=["ospm_hidden","ospm_entry_grouping"];return m=e.subclass({stickyElement:null,lastElementSticky:!1,currentOffsetTop:0,topElement:null,constructor:function(e,i){var o;this.parent=e,o=t.createContainer("ospm_column_layout"),this.containerDom=t.createContainer("ospm_layout_scrollarea"),this.stickyArea=t.createContainer("ospm_layout_stickyarea"),o.appendChild(this.containerDom),o.appendChild(this.stickyArea),this.elements=[],this.dom=t.createContainer("ospm_layout_column_wrapper"),this.dom.classList.add(i),this.dom.appendChild(o),(window.isCordova||n.isIFWebView())&&(this.dummyZindex=10),r(this),a(this)},setParent:function(){throw new i("Das parent-Element einer LayoutColumn darf nachträglich nicht verändert werden")},setParentOfElement:function(e){e.setParent(this.parent)},parentOfElement:function(e){var t=m.parent.parentOfElement.call(this,e);return t===this?this.parent:t},clearElements:function(){m.parent.clearElements.call(this),n.updateElement(this)},removeElement:function(e){var t=m.parent.removeElement.call(this,e);return n.updateElement(this),t},addElement:function(e,t){l(this,!1),m.parent.addElement.call(this,e,t),n.updateElement(this)},setTopElement:function(e){this.topElement&&(this.containerDom.removeChild(this.topElement.dom),this.topElement.setParent(null)),this.topElement=e,e&&(this.topElement.setParent(this),this.containerDom.insertBefore(e.dom,this.containerDom.firstChild)),this.containerDom.dataset.scrollupdate="true",u(this),n.updateElement(this.parent)},getChildren:function(){var e=m.parent.getChildren.call(this);return this.topElement&&e.unshift(this.topElement),e},getChildPosition:function(e){return e===this.topElement?"top":m.parent.getChildPosition.call(this,e)},getHeight:function(){return this.dom.offsetHeight},setLastElementSticky:function(e){this.lastElementSticky!==e&&(this.lastElementSticky=!!e,a(this))},afterRenderLayout:function(){a(this)},syncStickyDisplay:function(){a(this)},isLastElementSticky:function(){return this.lastElementSticky},updateDisplay:function(){m.parent.updateDisplay.call(this),u(this),d(this)},limitHeight:function(e){var t=e-this.stickyArea.offsetHeight;this.stickyArea.offsetTop>t&&(this.stickyArea.style.top=e-this.stickyArea.offsetHeight+"px")},getClassName:function(){return"LayoutColumn"}}),m.proto(o),m.STICKY_COLUMN_PADDING_TOP=56,m}),function(e,t,n){function i(n,i){this.wrapper="string"==typeof n?t.querySelector(n):n,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!a.hasPointer,disableTouch:a.hasPointer||!a.hasTouch,disableMouse:a.hasPointer||a.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof e.onmousedown};for(var o in i)this.options[o]=i[o];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(e,n,i){var o=t.createElement("div"),r=t.createElement("div");return i===!0&&(o.style.cssText="position:absolute;z-index:9999",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),r.className="iScrollIndicator","h"==e?(i===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",r.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(i===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",r.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",n||(o.style.pointerEvents="none"),o.appendChild(r),o
}function r(n,i){this.wrapper="string"==typeof i.el?t.querySelector(i.el):i.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=n,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in i)this.options[o]=i[o];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(e,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(e,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(e,"mouseup",this))),this.options.fade){this.wrapperStyle[a.style.transform]=this.scroller.translateZ;var r=a.style.transitionDuration;if(!r)return;this.wrapperStyle[r]=a.isBadAndroid?"0.0001ms":"0ms";var l=this;a.isBadAndroid&&s(function(){"0.0001ms"===l.wrapperStyle[r]&&(l.wrapperStyle[r]="0s")}),this.wrapperStyle.opacity="0"}}var s=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},a=function(){function i(e){return s===!1?!1:""===s?e:s+e.charAt(0).toUpperCase()+e.substr(1)}var o={},r=t.createElement("div").style,s=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],n=0,i=t.length;i>n;n++)if(e=t[n]+"ransform",e in r)return t[n].substr(0,t[n].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(e,t){for(var n in t)e[n]=t[n]},o.addEvent=function(e,t,n,i){e.addEventListener(t,n,!!i)},o.removeEvent=function(e,t,n,i){e.removeEventListener(t,n,!!i)},o.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},o.momentum=function(e,t,i,o,r,s){var a,l,c=e-t,u=n.abs(c)/i;return s=void 0===s?6e-4:s,a=e+u*u/(2*s)*(0>c?-1:1),l=u/s,o>a?(a=r?o-r/2.5*(u/8):o,c=n.abs(a-e),l=c/u):a>0&&(a=r?r/2.5*(u/8):0,c=n.abs(e)+a,l=c/u),{destination:n.round(a),duration:l}};var a=i("transform");return o.extend(o,{hasTransform:a!==!1,hasPerspective:i("perspective")in r,hasTouch:"ontouchstart"in e,hasPointer:!(!e.PointerEvent&&!e.MSPointerEvent),hasTransition:i("transition")in r}),o.isBadAndroid=function(){var t=e.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var n=t.match(/Safari\/(\d+.\d)/);return n&&"object"==typeof n&&n.length>=2?parseFloat(n[1])<535.19:!0}return!1}(),o.extend(o.style={},{transform:a,transitionTimingFunction:i("transitionTimingFunction"),transitionDuration:i("transitionDuration"),transitionDelay:i("transitionDelay"),transformOrigin:i("transformOrigin")}),o.hasClass=function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");return n.test(e.className)},o.addClass=function(e,t){if(!o.hasClass(e,t)){var n=e.className.split(" ");n.push(t),e.className=n.join(" ")}},o.removeClass=function(e,t){if(o.hasClass(e,t)){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n," ")}},o.offset=function(e){for(var t=-e.offsetLeft,n=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,n-=e.offsetTop;return{left:t,top:n}},o.preventDefaultException=function(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return n.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,i=.4;return 0===e?0:1==e?1:i*n.pow(2,-10*e)*n.sin(2*(e-t/4)*n.PI/t)+1}}}),o.tap=function(e,n){var i=t.createEvent("Event");i.initEvent(n,!0,!0),i.pageX=e.pageX,i.pageY=e.pageY,e.target.dispatchEvent(i)},o.click=function(n){var i,o=n.target;/(SELECT|INPUT|TEXTAREA)/i.test(o.tagName)||(i=t.createEvent(e.MouseEvent?"MouseEvents":"Event"),i.initEvent("click",!0,!0),i.view=n.view||e,i.detail=1,i.screenX=o.screenX||0,i.screenY=o.screenY||0,i.clientX=o.clientX||0,i.clientY=o.clientY||0,i.ctrlKey=!!n.ctrlKey,i.altKey=!!n.altKey,i.shiftKey=!!n.shiftKey,i.metaKey=!!n.metaKey,i.button=0,i.relatedTarget=null,i._constructed=!0,o.dispatchEvent(i))},o}();i.prototype={version:"5.2.0",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=a.eventType[e.type]){var t;if(t=e.which?e.button:e.button<2?0:4==e.button?1:2,0!==t)return}if(this.enabled&&(!this.initiated||a.eventType[e.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var i,o=e.touches?e.touches[0]:e;this.initiated=a.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,i=this.getComputedPosition(),this._translate(n.round(i.x),n.round(i.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=o.pageX,this.pointY=o.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&a.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,i,o,r,s=e.touches?e.touches[0]:e,l=s.pageX-this.pointX,c=s.pageY-this.pointY,u=a.getTime();if(this.pointX=s.pageX,this.pointY=s.pageY,this.distX+=l,this.distY+=c,o=n.abs(this.distX),r=n.abs(this.distY),!(u-this.endTime>300&&10>o&&10>r)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=o>r+this.options.directionLockThreshold?"h":r>=o+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,c=this.hasVerticalScroll?c:0,t=this.x+l,i=this.y+c,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+l/3:t>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+c/3:i>0?0:this.maxScrollY),this.directionX=l>0?-1:0>l?1:0,this.directionY=c>0?-1:0>c?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,i),u-this.startTime>300&&(this.startTime=u,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(e){if(this.enabled&&a.eventType[e.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,i,o=(e.changedTouches?e.changedTouches[0]:e,a.getTime()-this.startTime),r=n.round(this.x),s=n.round(this.y),l=n.abs(r-this.startX),c=n.abs(s-this.startY),u=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(r,s),!this.moved)return this.options.tap&&a.tap(e,this.options.tap),this.options.click&&a.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&200>o&&100>l&&100>c)return void this._execEvent("flick");if(this.options.momentum&&300>o&&(t=this.hasHorizontalScroll?a.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:r,duration:0},i=this.hasVerticalScroll?a.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:s,duration:0},r=t.destination,s=i.destination,u=n.max(t.duration,i.duration),this.isInTransition=1),this.options.snap){var h=this._nearestSnap(r,s);this.currentPage=h,u=this.options.snapSpeed||n.max(n.max(n.min(n.abs(r-h.x),1e3),n.min(n.abs(s-h.y),1e3)),300),r=h.x,s=h.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}return r!=this.x||s!=this.y?((r>0||r<this.maxScrollX||s>0||s<this.maxScrollY)&&(d=a.ease.quadratic),void this.scrollTo(r,s,u,d)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,n=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),t==this.x&&n==this.y?!1:(this.scrollTo(t,n,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var n=this._events[e].indexOf(t);n>-1&&this._events[e].splice(n,1)}},_execEvent:function(e){if(this._events[e]){var t=0,n=this._events[e].length;if(n)for(;n>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,n,i){e=this.x+e,t=this.y+t,n=n||0,this.scrollTo(e,t,n,i)},scrollTo:function(e,t,n,i){i=i||a.ease.circular,this.isInTransition=this.options.useTransition&&n>0;var o=this.options.useTransition&&i.style;!n||o?(o&&(this._transitionTimingFunction(i.style),this._transitionTime(n)),this._translate(e,t)):this._animate(e,t,n,i.fn)},scrollToElement:function(e,t,i,o,r){if(e=e.nodeType?e:this.scroller.querySelector(e)){var s=a.offset(e);s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,i===!0&&(i=n.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=n.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=i||0,s.top-=o||0,s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top,t=void 0===t||null===t||"auto"===t?n.max(n.abs(this.x-s.left),n.abs(this.y-s.top)):t,this.scrollTo(s.left,s.top,t,r)}},_transitionTime:function(e){if(this.options.useTransition){e=e||0;var t=a.style.transitionDuration;if(t){if(this.scrollerStyle[t]=e+"ms",!e&&a.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var n=this;s(function(){"0.0001ms"===n.scrollerStyle[t]&&(n.scrollerStyle[t]="0s")})}if(this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].transitionTime(e)}}},_transitionTimingFunction:function(e){if(this.scrollerStyle[a.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=n.round(e),t=n.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(t){var n=t?a.removeEvent:a.addEvent,i=this.options.bindToWrapper?this.wrapper:e;n(e,"orientationchange",this),n(e,"resize",this),this.options.click&&n(this.wrapper,"click",this,!0),this.options.disableMouse||(n(this.wrapper,"mousedown",this),n(i,"mousemove",this),n(i,"mousecancel",this),n(i,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(n(this.wrapper,a.prefixPointerEvent("pointerdown"),this),n(i,a.prefixPointerEvent("pointermove"),this),n(i,a.prefixPointerEvent("pointercancel"),this),n(i,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(n(this.wrapper,"touchstart",this),n(i,"touchmove",this),n(i,"touchcancel",this),n(i,"touchend",this)),n(this.scroller,"transitionend",this),n(this.scroller,"webkitTransitionEnd",this),n(this.scroller,"oTransitionEnd",this),n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,n,i=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(i=i[a.style.transform].split(")")[0].split(", "),t=+(i[12]||i[4]),n=+(i[13]||i[5])):(t=+i.left.replace(/[^-\d.]/g,""),n=+i.top.replace(/[^-\d.]/g,"")),{x:t,y:n}},_initIndicators:function(){function e(e){if(a.indicators)for(var t=a.indicators.length;t--;)e.call(a.indicators[t])}var t,n=this.options.interactiveScrollbars,i="string"!=typeof this.options.scrollbars,s=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:o("v",n,this.options.scrollbars),interactive:n,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),s.push(t)),this.options.scrollX&&(t={el:o("h",n,this.options.scrollbars),interactive:n,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),s.push(t))),this.options.indicators&&(s=s.concat(this.options.indicators));for(var l=s.length;l--;)this.indicators.push(new r(this,s[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault();var t,i,o,r,s=this;if(void 0===this.wheelTimeout&&s._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){s.options.snap||s._execEvent("scrollEnd"),s.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,i=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,i=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,i=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=i=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=i=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=i,i=0),this.options.snap)return o=this.currentPage.pageX,r=this.currentPage.pageY,t>0?o--:0>t&&o++,i>0?r--:0>i&&r++,void this.goToPage(o,r);o=this.x+n.round(this.hasHorizontalScroll?t:0),r=this.y+n.round(this.hasVerticalScroll?i:0),this.directionX=t>0?-1:0>t?1:0,this.directionY=i>0?-1:0>i?1:0,o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),r>0?r=0:r<this.maxScrollY&&(r=this.maxScrollY),this.scrollTo(o,r,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,i,o,r,s,a=0,l=0,c=0,u=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(i=n.round(u/2),o=n.round(d/2);c>-this.scrollerWidth;){for(this.pages[a]=[],e=0,r=0;r>-this.scrollerHeight;)this.pages[a][e]={x:n.max(c,this.maxScrollX),y:n.max(r,this.maxScrollY),width:u,height:d,cx:c-i,cy:r-o},r-=d,e++;c-=u,a++}else for(s=this.options.snap,e=s.length,t=-1;e>a;a++)(0===a||s[a].offsetLeft<=s[a-1].offsetLeft)&&(l=0,t++),this.pages[l]||(this.pages[l]=[]),c=n.max(-s[a].offsetLeft,this.maxScrollX),r=n.max(-s[a].offsetTop,this.maxScrollY),i=c-n.round(s[a].offsetWidth/2),o=r-n.round(s[a].offsetHeight/2),this.pages[l][t]={x:c,y:r,width:s[a].offsetWidth,height:s[a].offsetHeight,cx:i,cy:o},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.x-this.startX),1e3),n.min(n.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,o=this.pages.length,r=0;if(n.abs(e-this.absStartX)<this.snapThresholdX&&n.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);o>i;i++)if(e>=this.pages[i][0].cx){e=this.pages[i][0].x;break}for(o=this.pages[i].length;o>r;r++)if(t>=this.pages[0][r].cy){t=this.pages[0][r].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),e=this.pages[i][0].x),r==this.currentPage.pageY&&(r+=this.directionY,0>r?r=0:r>=this.pages[0].length&&(r=this.pages[0].length-1),t=this.pages[0][r].y),{x:e,y:t,pageX:i,pageY:r}},goToPage:function(e,t,i,o){o=o||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:0>e&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:0>t&&(t=0);var r=this.pages[e][t].x,s=this.pages[e][t].y;i=void 0===i?this.options.snapSpeed||n.max(n.max(n.min(n.abs(r-this.x),1e3),n.min(n.abs(s-this.y),1e3)),300):i,this.currentPage={x:r,y:s,pageX:e,pageY:t},this.scrollTo(r,s,i,o)},next:function(e,t){var n=this.currentPage.pageX,i=this.currentPage.pageY;n++,n>=this.pages.length&&this.hasVerticalScroll&&(n=0,i++),this.goToPage(n,i,e,t)},prev:function(e,t){var n=this.currentPage.pageX,i=this.currentPage.pageY;n--,0>n&&this.hasVerticalScroll&&(n=0,i--),this.goToPage(n,i,e,t)},_initKeys:function(){var t,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in n)this.options.keyBindings[t]=this.options.keyBindings[t]||n[t];a.addEvent(e,"keydown",this),this.on("destroy",function(){a.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,i=this.options.snap,o=i?this.currentPage.pageX:this.x,r=i?this.currentPage.pageY:this.y,s=a.getTime(),l=this.keyTime||0,c=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(n.round(t.x),n.round(t.y)),this.isInTransition=!1),this.keyAcceleration=200>s-l?n.min(this.keyAcceleration+c,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=i?1:this.wrapperWidth:r+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=i?1:this.wrapperWidth:r-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX,r=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,r=0;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:r+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:r-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(o,r);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollY&&(r=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,r,0),this.keyTime=s}},_animate:function(e,t,n,i){function o(){var h,m,p,f=a.getTime();return f>=d?(r.isAnimating=!1,r._translate(e,t),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(f=(f-u)/n,p=i(f),h=(e-l)*p+l,m=(t-c)*p+c,r._translate(h,m),r.isAnimating&&s(o),void(3==r.options.probeType&&r._execEvent("scroll")))}var r=this,l=this.x,c=this.y,u=a.getTime(),d=u+n;this.isAnimating=!0,o()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},r.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(e,"touchmove",this),a.removeEvent(e,a.prefixPointerEvent("pointermove"),this),a.removeEvent(e,"mousemove",this),a.removeEvent(e,"touchend",this),a.removeEvent(e,a.prefixPointerEvent("pointerup"),this),a.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var n=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=n.pageX,this.lastPointY=n.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(e,"touchmove",this),this.options.disablePointer||a.addEvent(e,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,n,i,o,r=e.touches?e.touches[0]:e,s=a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=r.pageX-this.lastPointX,this.lastPointX=r.pageX,n=r.pageY-this.lastPointY,this.lastPointY=r.pageY,i=this.x+t,o=this.y+n,this._pos(i,o),1==this.scroller.options.probeType&&s-this.startTime>300?(this.startTime=s,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),a.removeEvent(e,"touchmove",this),a.removeEvent(e,a.prefixPointerEvent("pointermove"),this),a.removeEvent(e,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.scroller.x-i.x),1e3),n.min(n.abs(this.scroller.y-i.y),1e3)),300);(this.scroller.x!=i.x||this.scroller.y!=i.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=a.style.transitionDuration;if(t&&(this.indicatorStyle[t]=e+"ms",!e&&a.isBadAndroid)){this.indicatorStyle[t]="0.0001ms";var n=this;s(function(){"0.0001ms"===n.indicatorStyle[t]&&(n.indicatorStyle[t]="0s")})}},transitionTimingFunction:function(e){this.indicatorStyle[a.style.transitionTimingFunction]=e},refresh:function(){var e=this.indicatorStyle.display;this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",e!==this.indicatorStyle.display&&this.scroller._execEvent("displayChanged"),this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&n.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&n.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=n.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=n.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=n.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=n.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){0>e?e=0:e>this.maxPosX&&(e=this.maxPosX),0>t?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?n.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?n.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=e?250:500,i=e?0:300;e=e?"1":"0",this.wrapperStyle[a.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),i)}}},i.utils=a,"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define&&define.amd?define("tao/lib/iscroll-probe",[],function(){return i}):e.IScroll=i}(window,document,Math),define("tao/ospm/ui/layouts/OneColumnLayout",["tao/ospm/ui/layouts/Layout","tao/ospm/ui/widgets/LayoutColumn","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Config","tao/lib/iscroll-probe"],function(e,t,n,i,o,r){function s(e){var t=n.createContainer("ospm_layout ospm_one_column_layout");return e.columnsContainer=n.createContainer("ospm_columns_container"),e.columnsAligner=n.createContainer("ospm_columns_aligner"),e.columnsContainer.appendChild(e.columnsAligner),t.appendChild(e.columnsContainer),t}function a(e){o.USE_ISCROLL&&(e.dom.style.overflowY="hidden",e.scroller||(e.scroller=new r(e.dom,{probeType:3,bindToWrapper:!0,scrollbars:!0,fadeScrollbars:!0,preventDefault:!1,bounce:!1,tap:!0}),e.scroller.on("scroll",function(){e.onScroll(Math.abs(this.y))}),e.dom.addEventListener("touchmove",l)))}function l(e){e.target.classList.contains("ospm_slider_inputknob")||(e.preventDefault(),e.stopPropagation())}var c;return c=e.subclass({layoutColumn:null,scrollTop:0,scrollEvent:null,scroller:null,constructor:function(e,n){this.dom=s(this),this.layoutColumn=new t(this,"ospm_one_column_layout_1"),n&&this.layoutColumn.dom.firstChild.classList.add("ospm_layout_width_"+n),this.layoutColumn.dom.classList.add("ospm_scrollable_layout"),this.dom.classList.add("ospm_header_to_scroll"),this.setLastElementSticky(e),this.columnsAligner.appendChild(this.layoutColumn.dom),this.initializeFields({}),a(this)
},afterRenderLayout:function(){c.parent.afterRenderLayout.call(this),e.onHeightChange(this),this.scrollEvent=function(e){this.onScroll(e.target.scrollTop)}.bind(this),this.dom.addEventListener("scroll",this.scrollEvent)},setLastElementSticky:function(e){this.layoutColumn.setLastElementSticky(e)},isLastElementSticky:function(){return this.layoutColumn.isLastElementSticky()},onResize:function(){window.isCordova&&i.updateElementsNow(),this.onScroll(this.getScrollTop()),this.setStickyColumnHeight(),e.onHeightChange(this)},onColumnMutation:function(){e.onHeightChange(this),this.setStickyColumnHeight(),this.layoutColumn.limitHeight(e.getMainUiAreaHeight(this)),this.onScroll(this.getScrollTop())},setStickyColumnHeight:function(){var e,n;if(this.layoutColumn.isLastElementSticky()&&null!==this.layoutColumn.stickyElement){if(e=this.isDialogChild(!1),e&&this.dom.offsetHeight===this.dom.scrollHeight)return;n=this.layoutColumn.stickyElement.dom.offsetHeight+t.STICKY_COLUMN_PADDING_TOP,this.layoutColumn.containerDom.style.paddingBottom=n+"px",this.scroller&&this.onScroll(Math.abs(this.scroller.y))}},onScroll:function(e){c.parent.onScroll.call(this,e),this.layoutColumn.stickyArea.style.top=this.dom.offsetHeight+e-this.layoutColumn.stickyArea.offsetHeight+"px"},addElement:function(e,t){this.layoutColumn.addElement(e,t)},removeElement:function(e){return this.layoutColumn.removeElement(e)},clearElements:function(){this.layoutColumn.clearElements()},getElements:function(){return this.layoutColumn.getElements()},getLayoutColumns:function(){return[this.layoutColumn]},elementCount:function(){return this.layoutColumn.elementCount()},setTopBorder:function(e){c.parent.setTopBorder.call(this,e)},setBottomBorder:function(e){c.parent.setBottomBorder.call(this,e)},disableiScroll:function(){o.USE_ISCROLL&&(this.dom.style.overflowY="",this.dom.removeEventListener("touchmove",l),c.parent.disableiScroll.call(this))},getHeight:function(){return this.layoutColumn?this.layoutColumn.getHeight():0},scrollTo:function(e,t){this.scroller?this.scroller.scrollToElement(e.dom):c.parent.scrollTo.call(this,e,t)},getClassName:function(){return"OneColumnLayout"}}),c.WIDTH={DEFAULT:"default",TWO_THIRD:"2_3"},c}),define("tao/ospm/ui/widgets/Notification",["tao/ospm/common/OSPMError","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s){function a(e){e.dom=i.createContainer("ospm_notification"),e.dom.appendChild(e.buildLabelDom(s.TEXT_STYLE.LABEL_BIG3)),e.dom.appendChild(e.buildSubLabelDom(s.TEXT_STYLE.LABEL6)),e.dom.appendChild(e.buildErrorDom())}var l;return l=t.subclass({stepData:null,iconDom:null,constructor:function(e,t){e=e||{},this.stepData=t,a(this),this.initializeFields(e)},initializeFields:function(e){l.parent.initializeFields.call(this,e),this.setBox(e.box),this.setIcon(e.icon),this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setSubLabel(e.subLabel),e.upperMargin&&this.setUpperMargin(e.upperMargin),e.lowerMargin&&this.setLowerMargin(e.lowerMargin),e.style&&this.setStyle(e.style),e.wrapMode&&this.setWrapMode(e.wrapMode),e.hasIllustration&&this.dom.classList.add("ospm_has_illustration")},setStyle:function(e){var t;"small"===e?(t="ospm_notification_style_"+e,this.setLabelStyle(s.TEXT_STYLE.LABEL3),this.setSubLabelStyle(s.TEXT_STYLE.SUBLABEL5)):(t="ospm_notification_style_default",this.setLabelStyle(s.TEXT_STYLE.LABEL_BIG3),this.setSubLabelStyle(s.TEXT_STYLE.LABEL6)),r.replaceClassNameStartingWith(this.dom,"ospm_notification_style_",t)},setUpperMargin:function(e){var t=["minimal","small","medium","large"],n=[s.MARGIN.SMALL1,s.MARGIN.SMALL3,s.MARGIN.MEDIUM2,s.MARGIN.LARGE2],i=t.indexOf(e);this.setTopMargin(void 0!==e&&-1!==i?n[i]:e)},setLowerMargin:function(e){var t=["minimal","small","medium","large"],n=[s.MARGIN.MEDIUM1,s.MARGIN.MEDIUM2,s.MARGIN.LARGE1,s.MARGIN.LARGE2],i=t.indexOf(e);this.setBottomMargin(void 0!==e&&-1!==i?n[i]:e)},setBox:function(e){e?this.dom.classList.add("ospm_notification_box"):this.dom.classList.remove("ospm_notification_box"),this.dom.parentNode&&(this.dom.dataset.scrollupdate="true")},setIcon:function(e){this.iconDom&&(this.iconDom.parentNode.removeChild(this.iconDom),this.iconDom=null),e&&(this.iconDom=o.createIcon(e,0,!0),this.iconDom&&(this.iconDom.classList.add("ospm_notification_icon"),this.dom.insertBefore(this.iconDom,this.dom.firstChild))),this.iconDom?this.dom.classList.add("ospm_has_icon"):this.dom.classList.remove("ospm_has_icon"),this.dom.parentNode&&(this.dom.dataset.scrollupdate="true")},getClassName:function(){return"Notification"},setTopMargin:function(e){r.isNBF()?l.parent.setTopMargin.call(this,e):t.setTopPadding(this,e)},setBottomMargin:function(e){r.isNBF()?l.parent.setBottomMargin.call(this,e):t.setBottomPadding(this,e)}}),l.proto(n.LabelMixin,n.SubLabelMixin,n.ErrorMixin,n.WrapMixin),l}),define("tao/ospm/ui/widgets/ButtonRow",["tao/ospm/ui/widgets/ContainerWidget","tao/ospm/common/Constants","tao/ospm/ui/widgets/Button","tao/ospm/core/DomFactory","tao/ospm/ui/SelectionGroup","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/main/LocalStepData","tao/ospm/ui/widgets/mixins/Mixins"],function(e,t,n,i,o,r,s,a,l,c){function u(e,t){var n,o;if(n=i.createContainer("ospm_buttons_container"),e.containerDom=i.createContainer(h(e,s.isArray(t.elements)?t.elements.length:1)),t.elements&&s.isArray(t.elements))for(o=0;o<t.elements.length;o++)e.addElement(d(e.stepData,t.elements[o]));else(t.elements||t.label)&&e.addElement(d(e.stepData,t));return n.appendChild(e.containerDom),n.appendChild(e.buildErrorDom()),n}function d(e,t){return t instanceof n?t:new n(t,e)}function h(e,t){var n="ospm_buttons_text_big";return t>2&&(n="ospm_buttons_text_small"),1===t?e.fullWidth?"ospm_single_full_width_button_container":"ospm_single_button_container":"ospm_buttons_horizontal_flex_container ospm_multiple_buttons_container ospm_flex_items_align_center "+n}function m(e){var t;if(e.elements&&s.isArray(e.elements))for(t=0;t<e.elements.length;t++)p(e.elements[t]);else p(e)}function p(e){if(!e)throw new a("Invalid parameters.")}var f=e.subclass({fullWidth:null,stepData:null,mandatory:null,mandatoryMessage:null,constructor:function(e,t){this.elements=[],this.stepData=t,e||(e={elements:[]}),m(e),this.dom=u(this,e),this.initializeFields(e)},addElement:function(e,t){f.parent.addElement.call(this,e,t),this.containerDom.className=h(this,this.elementCount())},removeElement:function(e){f.parent.removeElement.call(this,e),this.containerDom.className=h(this,this.elementCount())},initializeFields:function(e){this.fullWidth=e.fullWidth||!1,this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage),f.parent.initializeFields.call(this,e)},checkForValidElement:function(e){return e instanceof n?null:"Nur Buttons sind als Elemente erlaubt"},isMandatory:function(){return this.mandatory},setMandatory:function(e){this.mandatory=!!e},getMandatoryMessage:function(){return this.mandatoryMessage},setMandatoryMessage:function(e){this.mandatoryMessage=e||t.MANDATORY_PLACEHOLDERS.ROW},checkMandatoryValueEmptyError:function(){var e,t,n,i,o,r,a={},c=this;if(this.mandatory){for(e=this.getElements(),t=0;t<e.length;t++)n=e[t].getGroup(),n&&(a[n.getName()]=!0);s.forKeys(a,function(e){if(a[e]){for(n=l.retrieveSelectionGroup(c.stepData,e),i=n.getElements(),o=!0,t=0;t<i.length;t++)i[t].getValue()&&(o=!1);if(o)return r={code:8,title:"Pflichtfeld",msg:c.getMandatoryMessage()},c.setError(r),r}})}return null},getClassName:function(){return"ButtonRow"}});return f.proto(c.ErrorMixin),f}),define("tao/ospm/ui/views/DialogView",["tao/lib/stapes","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/main/CommIdVerification","tao/ospm/ui/views/PopUpView","tao/ospm/core/DomFactory","tao/ospm/ui/UIFullScreenHelper","tao/ospm/common/Logger","tao/ospm/common/OSPMError","tao/ospm/core/FullScreenWrapperMixin","tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/ui/layouts/OneColumnLayout","tao/ospm/ui/layouts/TabDeck","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Notification","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/ButtonRow"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y){function C(){Z.forEach(function(e){e()})}function w(){return K.length>0||document.OSPMEnvironment.isDialogWorkflowActive()}function E(e){d.IF&&document.OSPMEnvironment.isTouchDevice()&&(e.dom.style.height=document.documentElement.clientHeight+"px")}function L(e,t){void 0!==t.cancelOnOutsideClick&&e.setCancelOnOutsideClick(t.cancelOnOutsideClick),"function"==typeof t.outsideClickListener&&e.setOutsideClickListener(t.outsideClickListener),void 0!==t.content?e.setContent(t.content):void 0!==t.list&&(Y.warning('Eigenschaft "list" in Parameter ist veraltet, stattdessen "content" verwenden'),e.setContent(t.list)),void 0!==t.header&&e.setHeader(t.header),void 0!==t.footer&&e.setFooter(t.footer),void 0!==t.maximizeHeight&&(e.maximizeHeight=t.maximizeHeight),void 0!==t.maximizeWidth&&(e.maximizeWidth=t.maximizeWidth),t.hideListener&&e.setHideListener(t.hideListener)}function S(e){var t,n,o,r;return t=s.createContainer("ospm_dialogview"),t.setAttribute("role","dialog"),t.setAttribute("tabindex","-1"),n=s.createContainer("ospm_dialogview_header"),t.appendChild(n),i.isNBF()?(r=s.createContainer("ospm_dialogview_scrollarea ospm_layout ospm_layout_scrollarea"),t.appendChild(r),n=s.createContainer("ospm_dialogview_content"),r.appendChild(n),n=s.createContainer("ospm_dialogview_footer"),r.appendChild(n)):(n=s.createContainer("ospm_dialogview_content"),t.appendChild(n),n=s.createContainer("ospm_dialogview_footer"),t.appendChild(n)),o=e.wrapContent(t),o.classList.add("ospm_window_fullscreen_dialogview_wrapper"),o}function D(e){e.setCancelOnOutsideClickEventListener(function(){var t=e.footer?e.footer.getLeftButtonAction():null;"function"==typeof t?t.call(e.footer):e.hide()},"ospm_window_fullscreen_wrapper_container"),e.addMutationEventListener({element:e.dom,bindToDom:e.dom,listener:function(){this.syncView()}.bind(e),filterElements:[],eventTypeNames:{attributesStyle:{watchList:J},attributesClass:{watchList:$},attributesData:{watchList:Q},childListAddedNodes:{},childListRemovedNodes:{}}})}function T(e,t,i,o){e[i]&&(o.removeChild(e[i].dom),e[i].setParent(null)),e[i]=t,n.isSet(t)&&(o.appendChild(t.dom),t.setParent(e))}function I(e){var t,n,o;i.isIE()&&(e.content||(e.fullScreenContainerContentDom.style.height="auto"),t=x(e),n=A(e),o=O(e),t>1&&(e.fullScreenContainerContentDom.style.height=t+"px"),e.listLayout&&(e.listLayout.dom.style.overflowY=window.innerHeight>t+o+n&&!i.isSBContext()?"hidden":"auto")),e.listLayout?e.listLayout.onResize():e.content&&e.content.onResize&&e.content.onResize(),a.syncStickyMode(e)}function k(e,t){var n=e.getPropertyValue(t);return n?parseInt(n,10):0}function x(e){var t,n,i,o,r,s;if(n=A(e),i=O(e),o=window.getComputedStyle(e.fullScreenContainerDom,null),r=k(o,"margin-top"),s=k(o,"margin-bottom"),e.listLayout)t=e.listLayout.getCompleteHeight();else{if(!e.content)return e.fullScreenContainerDom.offsetHeight-n-i-r-s;t=e.content.getCompleteHeight()}return Math.min(t,window.innerHeight-n-i-r-s)}function A(e){return e.footer?e.footer.dom.parentNode.offsetHeight:0}function O(e){return e.header?e.header.dom.parentNode.offsetHeight:0}function N(e){return e instanceof _}function M(e){return e instanceof m}function P(e){return e instanceof p}function R(e){var t=0;if(n.isSet(e.list)&&t++,n.isSet(e.layout)&&t++,n.isSet(e.content)&&t++,t>1)throw new c("Es darf nur einer der Parameter list, layout, content übergeben werden")}function F(e){var t=K.indexOf(e);-1===t&&K.push(e)}function B(e){var t=K.indexOf(e);t>=0&&K.splice(t,1)}function z(e){n.executeLater(function(){var t,n=K.indexOf(e);n>=0&&e.onResize(),n===K.length-1&&e.setFocusToWrapper(function(){return i.focusFirstElement(e.content)?e.content.getClassName&&"OneColumnLayout"===e.content.getClassName()?(t=e.content.layoutColumn.elements[e.content.layoutColumn.elements.length-1],e.content.isLastElementSticky()&&t.dom.getElementsByClassName("ospm_widget_focused").length>0&&(e.content.dom.scrollTop=0),!0):!0:V(e)})})}function V(e){var t=e.dom.querySelectorAll(".ospm_text_button"),n=t[t.length-1];return n?(n.focus(),i.activeElement()===n):!1}function H(){var e=document.OSPMEnvironment;e&&(e.isShowingDialogs=G.isShowingDialogs,e.getAllDialogs=G.getAllDialogs,e.disableMainDocumentScrolling=G.disableMainDocumentScrolling,e.enableMainDocumentScrolling=G.enableMainDocumentScrolling)}function U(){return d.DIALOGVIEW_ANIMATIONS&&(d.IF||window.isCordova)}function W(e){function t(){"undefined"!=typeof X[i]&&(n.deleteProperty(X,i),j(e))}var i;e.dom.classList.add("ospm_animate"),e.dom.classList.remove("ospm_dialogview_show"),i=n.executeLater(t,200),X[i]=t}function j(e){e.dom.parentNode&&e.dom.parentNode.removeChild(e.dom),r.hide(),e.enableKeyboardNavigation(),0===Object.keys(X).length&&(G.isShowingDialogs()?i.focusFirstElement(G.getTopmostDialog().content)||V(G.getTopmostDialog()):e.previousFocussedElement&&e.returnFocusFromWrapper())}var G,q,Y=new l("OSPM","DialogView"),K=[],X={},Z=[],J={display:"none"},$=["ospm_hidden"],Q=["data-scrollupdate"];return G=e.subclass({dom:null,content:null,header:null,footer:null,commId:null,maximizeHeight:!1,maximizeWidth:!1,rendered:!1,listLayout:null,constructor:function(e,t){e=e||{},t&&(this.commId=t),this.dom=S(this),E(this),this.fullScreenWrapperContainerDom=this.dom.querySelector(".ospm_window_fullscreen_wrapper_container"),this.fullScreenContainerDom=this.dom.querySelector(".ospm_dialogview"),this.fullScreenContainerContentDom=this.fullScreenContainerDom.querySelector(".ospm_dialogview_content"),L(this,e),D(this)},setContent:function(e){var t=this.dom.querySelector(".ospm_dialogview_content");if(n.isSet(e)&&!N(e)&&!M(e)&&!P(e))throw new c("Nur Parameter vom Typ List, OneColumnLayout oder TabDeck kann gesetzt werden.");i.verifyNullParent(e),this.content&&!this.listLayout?t.removeChild(this.content.dom):this.listLayout&&(t.removeChild(this.listLayout.dom),this.listLayout=null),this.content&&this.content.setParent(null),this.content=e,this.listLayout=null,this.fullScreenContainerDom.classList.remove("ospm_dialogview_wide"),this.fullScreenContainerDom.classList.remove("ospm_dialogview_clean_header"),this.content&&(this.content instanceof _?(this.listLayout=new m,this.fullScreenContainerDom.classList.add("ospm_dialogview_clean_header"),this.listLayout.dom.classList.add("ospm_dialogview_listlayout"),this.listLayout.addElement(this.content),t.appendChild(this.listLayout.dom),e.setParent(null)):(t.appendChild(this.content.dom),this.fullScreenContainerDom.classList.add("ospm_dialogview_wide")),e.setParent(this),this.rendered&&(i.callAfterRenderLayout(e),this.syncView(),n.executeLater(this.onResize.bind(this))))},getContent:function(){return this.content},setHeader:function(e){if(n.isSet(e)&&!(e instanceof g))throw new c("Nur Parameter vom Typ Header kann gesetzt werden.");e&&!e.alignment&&e.setAlignment("center"),T(this,e,"header",this.dom.querySelector(".ospm_dialogview_header")),this.rendered&&this.syncView()},getHeader:function(){return this.header},setFooter:function(e){if(!(!n.isSet(e)||e instanceof f||!i.isNBF()||e instanceof y))throw new c("Nur Parameter vom Typ Footer kann gesetzt werden.");T(this,e,"footer",this.dom.querySelector(".ospm_dialogview_footer")),this.rendered&&this.syncView()},getFooter:function(){return this.footer},isMaximizeHeight:function(){return this.maximizeHeight},isMaximizeWidth:function(){return this.maximizeWidth},setMaximizeHeight:function(e){this.maximizeHeight!==e&&(this.maximizeHeight=e,i.toggleClassName(this.fullScreenContainerDom,"ospm_dialogview_maximizeHeight",this.maximizeHeight),this.syncView())},setMaximizeWidth:function(e){this.maximizeWidth!==e&&(this.maximizeWidth=e,i.toggleClassName(this.fullScreenContainerDom,"ospm_dialogview_maximizeWidth",this.maximizeWidth),this.syncView())},show:function(){var e;null!==this.commId&&o.checkForCurrentStep("DialogView.show",this.commId),Object.keys(X).forEach(function(e){n.resetExecuteLater(e),X[e]()}),this.dom.parentNode||(i.fireCustomEvent("dialogshow",this.dom.ownerDocument),this.savePreviousFocussedElement(),e=this.dom.style.visibility,this.dom.style.visibility="hidden",this.disableKeyboardNavigation(),U()&&!Object.keys(X).length&&this.dom.classList.add("ospm_animate"),document.body.appendChild(this.dom),this.rendered=!0,i.callAfterRenderLayout(this),i.updateElementsNow(),this.syncView(),this.dom.style.visibility=e,F(this),q&&q(this),z(this)),G.disableMainDocumentScrolling(),U()&&n.executeLater(function(){this.dom.classList.add("ospm_dialogview_show")}.bind(this))},hide:function(){this.rendered=!1,r.hide(),B(this),G.enableMainDocumentScrolling(),i.fireCustomEvent("dialoghide",this.dom.ownerDocument),C(),this.notifyHideListeners(),U()?W(this):j(this)},isShowing:function(){return this.rendered},getChildren:function(){var e=[];return this.header&&e.push(this.header),this.content&&e.push(this.content),this.footer&&e.push(this.footer),e},getChildPosition:function(e){switch(e){case this.header:return"header";case this.footer:return"footer";case this.content:return"content";default:return"?"}},getClassName:function(){return"DialogView"},syncView:function(){i.toggleClassName(this.fullScreenContainerDom,"ospm_dialogview_nofooter",!this.footer),i.toggleClassName(this.fullScreenContainerDom,"ospm_dialogview_noheader",!this.header),this.isMaximizeHeight()&&this.fullScreenContainerDom.classList.add("ospm_dialogview_maximizeHeight"),this.isMaximizeWidth()&&this.fullScreenContainerDom.classList.add("ospm_dialogview_maximizeWidth"),I(this)},onResize:function(){E(this),this.syncView(),this.listLayout&&this.listLayout.onResize()}}),G.hideAll=function(){var e,t=document.querySelectorAll("."+s.AUTOCLOSE_WRAPPER_CLASS);for(K=[],e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])},G.scrollToActiveElement=function(e){var t,n,o;for(n=i.activeElement(e),t=n;t&&t.classList&&!t.classList.contains("ospm_layout");t=t.parentNode);t&&(o=i.getElementParentOffset(n,t).y-20,0>o&&(o=0),t.scrollTop=o)},G.isShowingDialogs=function(){return K.length>0},G.getTopmostDialog=function(){return K.length>0?K[K.length-1]:null},G.getAllDialogs=function(){return K.slice()},G.createDialog=function(e,t){var i;return R(e),M(e.layout)?e.content=e.layout:n.isSet(e.layout)?e.content=new m(e.layout):N(e.list)?e.content=e.list:n.isSet(e.list)&&(e.content=new _(e.list)),"object"!=typeof e.header||e.header instanceof g||(e.header=new g(e.header)),"object"!=typeof e.footer||e.footer instanceof f||(e.footer=new f(e.footer)),i=new G(e,t)},G.createOkDialog=function(e,t){var n,i;return i="object"==typeof e?e:{},i.footer=i.footer||{},i.footer.rightButton="object"==typeof e.okButton?e.okButton:{},i.footer.rightButton.label=i.footer.rightButton.label||"OK",i.footer.rightButton.action=i.footer.rightButton.action||function(){n.hide()},i.footer.stackButtonsOnMobile=e.stackFooterButtonsOnMobile===!0,n=G.createDialog(i,t)},G.createTextDialog=function(e,t,o){function r(){(o||!d)&&s.hide(),d&&d()}var s,a,l,u,d,m;if(e.okButton&&e.closeButton)throw new c("Gleichzeitige Nutzung von OK- und Close-Button nicht erlaubt");return d=e.okButton&&e.okButton.action||"object"==typeof e.closeButton&&e.closeButton.action,a={},e.closeButton||(i.isNBF()?m={label:e.okButton&&e.okButton.label||"OK",clickListener:r,style:h.BUTTON_STYLE.PRIMARY}:a.footer={centerButton:{type:e.okButton&&e.okButton.type||h.TYPES.DEFAULT,label:e.okButton&&e.okButton.label||"OK",action:r}}),e.icon?(u=new v(i.isNBF()?{icon:e.icon,labelColor:"normal",style:"small",label:e.title,subLabel:e.text}:{icon:e.icon,labelColor:"normal",topMargin:h.MARGIN.LARGE1,bottomMargin:h.MARGIN.MEDIUM2,style:"small",label:e.title,subLabel:e.text}),e.closeButton&&(a.header={rightIcons:[{icon:h.ICONS.CANCEL_S,size:h.ICONS.SMALL_20,action:r}]})):((n.isSet(e.title)||e.closeButton)&&(a.header={},a.header.label="string"==typeof e.title?e.title:null,e.closeButton&&(a.header.rightIcons=[{icon:h.ICONS.CANCEL_S,size:h.ICONS.SMALL_20,action:r}])),n.isSet(e.text)&&(u=new b({label:e.text}))),u&&(l=new _,l.addElement(u),a.content=l),s=G.createDialog(a,t),m&&s.setFooter(document.TaoOSPM.ui.widgets.createButtonRow(m)),e.icon&&e.closeButton?s.content.dom.classList.add("ospm_list_negative_topmargin"):s.fullScreenContainerDom.classList.add("ospm_textdialogview"),s},G.createOkCancelDialog=function(e,t){var n,i;if(i="object"==typeof e?e:{},!e.okButton||"function"!=typeof e.okButton.action)throw new c("Callbackfunktion für OK Button (parameter.okButton.action) fehlt!");return i.footer={},i.footer.rightButton="object"==typeof e.okButton?e.okButton:{},i.footer.rightButton.label=i.footer.rightButton.label||"OK",i.footer.rightButton.action=i.footer.rightButton.action||function(){},i.footer.leftButton="object"==typeof e.cancelButton?e.cancelButton:{},i.footer.leftButton.label=i.footer.leftButton.label||"Abbrechen",i.footer.leftButton.action=i.footer.leftButton.action||function(){n.hide()},i.footer.stackButtonsOnMobile=e.stackFooterButtonsOnMobile===!0,n=G.createDialog(i,t)},G.onResize=function(){K.forEach(i.callOnResizeOnAllElements)},G.saveDialogViewData=function(){var e,t,n,i=document.querySelectorAll("."+s.AUTOCLOSE_WRAPPER_CLASS);for(n={dialogs:K,views:[]},e=0;e<i.length;e++)t=i[e],t.classList.remove(s.AUTOCLOSE_WRAPPER_CLASS),n.views.push(t);return K=[],n},G.restoreDialogViewData=function(e){e.views.forEach(function(e){e.classList.add(s.AUTOCLOSE_WRAPPER_CLASS)}),K=e.dialogs,w()?G.disableMainDocumentScrolling():G.enableMainDocumentScrolling()},G.disableMainDocumentScrolling=function(){i.preventBackgroundScrolling(!0)},G.enableMainDocumentScrolling=function(){w()||i.preventBackgroundScrolling(!1)},G.addGlobalHideListener=function(e){Z.push(e)},G.setShowListener=function(e){q=e},G.proto(t.OutsideClickMixin,t.MutationEventMixin,t.ParentMixin,t.HideMixin,u),H(),G}),define("tao/ospm/ui/UISecurityDialogHelper",["tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Notification","tao/ospm/ui/widgets/list/List","tao/ospm/ui/views/DialogView"],function(e,t,n,i,o,r,s){function a(e,n,o,r,a){var l,c,u;return c={okButton:{label:e,action:function(){l.hide(),"function"==typeof n&&n()}}},"function"==typeof r?(c.cancelButton={label:o,action:function(){l.hide(),r()}},i.isNBF()&&(u=document.TaoOSPM.ui.widgets.createButtonRow({label:o,clickListener:function(){l.hide(),r()},group:"label_style_"+Math.random(),style:t.BUTTON_STYLE.SECONDARY}),u.addElement(document.TaoOSPM.ui.widgets.createButton({label:e,clickListener:function(){l.hide(),"function"==typeof n&&n()},group:u.getElements()[0].getGroup(),style:t.BUTTON_STYLE.PRIMARY}))),l=s.createOkCancelDialog(c,a)):(i.isNBF()&&(u=document.TaoOSPM.ui.widgets.createButtonRow({label:e,clickListener:function(){l.hide(),"function"==typeof n&&n()},style:t.BUTTON_STYLE.PRIMARY})),l=s.createOkDialog(c,a)),i.isNBF()&&(l.setFooter(u),setTimeout(function(){var e=l.footer.dom.querySelectorAll(".ospm_one_button"),t=e[0].parentNode;e.length>1&&e[0].offsetWidth==t.offsetWidth},0)),l}var l={showSecurityDialog:function(i,s,l,c){var u,d,h;i=i||{},n.isObject(i.okButton)||(i.okButton={}),n.isObject(i.cancelButton)||(i.cancelButton={}),u=a(i.okLabel||i.okButton.label||e.SECURITY_DIALOG_DEFAULT_OK,s||i.okButton.action,i.cancelLabel||i.cancelButton.label||e.SECURITY_DIALOG_DEFAULT_CANCEL,l||i.cancelButton.action,c),d=new r,h={icon:i.icon||{name:t.ICONS.WARNING_M,color:t.ICON_COLOR.WARNING_RED},labelColor:"normal",topMargin:t.MARGIN.LARGE1,bottomMargin:t.MARGIN.MEDIUM2,style:"small"},i.title&&(h.label=i.title),i.text&&(h.subLabel=i.text),u.fullScreenContainerDom.classList.add("ospm_dialogview_security"),d.addElement(new o(h)),u.setContent(d),u.show()}};return l}),define("tao/ospm/ui/UIWorkflowHelper",["tao/ospm/common/Config","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/TextInput","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/list/List","tao/ospm/core/DomFactory","tao/ospm/ui/views/DialogView","tao/ospm/ui/UISecurityDialogHelper"],function(e,t,n,i,o,r,s,a,l){function c(e){"function"==typeof e.clearExitAction&&e.clearExitAction()}return{showSecurityDialog:function(t,n,i){var o,r,s,a;o=function(){c(t),n()},r=function(){"function"==typeof i&&i()},s=t.okLabel||e.RESPONSE_ACTION_DIALOG_DEFAULT_OK,a=t.cancelLabel||e.RESPONSE_ACTION_DIALOG_DEFAULT_CANCEL,l.showSecurityDialog({title:t.title,text:t.text,okLabel:s,cancelLabel:a},o,r)},showSecurityOkDialog:function(t,n){var i,o;i=function(){c(t),n()},o=t.okLabel||e.RESPONSE_ACTION_DIALOG_DEFAULT_OK,l.showSecurityDialog({title:t.title,text:t.text,okLabel:o},i)}}}),define("tao/ospm/main/SidebarActions",["tao/lib/stapes","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError"],function(e,t,n,i){function o(e,t){var n={pendingActionsIgnored:!1},i=s(e);return c.isExecuting()?void c.createError("SidebarActions: Aktionen werden gerade bereits ausgeführt",null,p):c.isLocked()?void c.createError("SidebarActions gesperrt",null,p):(p=i,d=!0,m=!1,a(i),m=!1,d=!1,p=null,i.error?void c.createError("SidebarActions: Fehler beim Verarbeiten der Aktion",i.error,p):(i.pendingActionsIgnored&&(n.pendingActionsIgnored=!0),t&&t(n),void r()))}function r(){for(;f.length>0;)f.pop()()}function s(e){var t={};return t.actions=c.isActions(e)?e:[],t}function a(e){var t,i,o,r,s;for(i=e.actions.length,g.info("SidebarActions: start processing %i actions",i),t=0;i>t;t++){if(o=e.actions[t],!c.isAction(o))return void c.createError("SidebarActions: not a valid action object",null,o);if(c.isRequestBreak())return void(e.pendingActionsIgnored=!0);if(r=o.name,s=n.isObject(o.parameter)?o.parameter:null,g.info("SidebarActions: processActions item %o",o),"function"!=typeof u[r])return void c.createError("SidebarActions: SidebarInfo["+r+"] is not a function");try{l(r,s)}catch(a){e.error=a;break}}}function l(e,t){g.info("SidebarActions: processActionItem name = %s, parameter = %s",e,t);try{t?u[e](t):u[e]()}catch(n){throw i.fromError("Fehler bei der Ausführung einer Sidebar-Action",n,{name:e,parameter:t})}}var c,u,d=!1,h=!1,m=!1,p=null,f=[],g=new t("OSPM","SidebarActions");return c={execute:function(e,t){c.isExecuting()?(f.push(function(){o(e,t)}),c.requestBreak()):o(e,t)},isActions:function(e){return Array.isArray(e)&&e.length>0},isAction:function(e){return e&&n.isObject(e)&&n.isString(e.name)&&e.name.length>0},isRequestBreak:function(){return m},requestBreak:function(){m=!0},isLocked:function(){return h},setLocked:function(e){h=!!e},isExecuting:function(){return d},setSidebarInfo:function(e){var t=u;return u=e&&n.isObject(e)?e:{},t},resetState:function(){d=!1,h=!1,m=!1},createError:function(e,t,n){throw c.resetState(),i.fromError(e,t,n)}}}),define("tao/lib/scribe/api/scribe-selection",[],function(){return function(e){function t(){var e=document.createElement("em");return e.style.display="none",e.classList.add("scribe-marker"),e}function n(e,t){e.insertNode(t),t.nextSibling&&r.isEmptyTextNode(t.nextSibling)&&r.removeNode(t.nextSibling),t.previousSibling&&r.isEmptyTextNode(t.previousSibling)&&r.removeNode(t.previousSibling)}function i(){if(this.selection=o.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var e=this.selection.anchorNode,t=this.selection.anchorOffset,n=this.selection.focusNode,i=this.selection.focusOffset;if(e===n&&t>i){var s=t;t=i,i=s}else if(r.isBefore(n,e)){var a=e,l=t;e=n,t=i,n=a,i=l}this.range=document.createRange(),this.range.setStart(e,t),this.range.setEnd(n,i)}}var o=e.el.ownerDocument,r=e.node;if(o.compareDocumentPosition(e.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var s=e.el.parentNode;s&&r.isFragment(s);)s=s.parentNode;s&&s.getSelection&&(o=s)}return i.prototype.getContaining=function(t){var n=this.range;if(n){var i=this.range.commonAncestorContainer;return i&&e.el===i||!t(i)?r.getAncestor(i,e.el,t):i}},i.prototype.placeMarkers=function(){var i=this.range;if(i&&document.documentElement.contains(e.el)&&e.el.contains(i.startContainer)&&e.el.contains(i.endContainer)){if(n(i.cloneRange(),t()),!i.collapsed){var o=i.cloneRange();o.collapse(!1),n(o,t())}this.selection.removeAllRanges(),this.selection.addRange(i)}},i.prototype.getMarkers=function(){return e.el.querySelectorAll("em.scribe-marker")},i.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(e){var t=e.parentNode;r.removeNode(e),t.normalize()})},i.prototype.selectMarkers=function(e){var t=this.getMarkers();if(t.length){var n=document.createRange();n.setStartBefore(t[0]),n.setEndAfter(t.length>=2?t[1]:t[0]),e||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(n)}},i.prototype.isCaretOnNewLine=function(){var e=this.getContaining(function(e){return"P"===e.nodeName});return!!e&&r.isEmptyInlineElement(e)},i}}),define("tao/lib/scribe/plugins/core/set-root-p-element",[],function(){return function(){return function(e){""===e.getHTML().trim()&&e.setContent("<p><br></p>")}}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("tao/lib/scribe/immutable",t):e.Immutable=t()}(this,function(){function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return e.value=!1,e}function n(e){e&&(e.value=!0)}function i(){}function o(e,t){t=t||0;for(var n=Math.max(0,e.length-t),i=new Array(n),o=0;n>o;o++)i[o]=e[o+t];return i}function r(e){return void 0===e.size&&(e.size=e.__iterate(a)),e.size}function s(e,t){return t>=0?+t:r(e)+ +t}function a(){return!0}function l(e,t,n){return(0===e||void 0!==n&&-n>=e)&&(void 0===t||void 0!==n&&t>=n)}function c(e,t){return d(e,t,0)}function u(e,t){return d(e,t,t)}function d(e,t,n){return void 0===e?n:0>e?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function h(e){return g(e)?e:k(e)}function m(e){return _(e)?e:x(e)}function p(e){return v(e)?e:A(e)}function f(e){return g(e)&&!b(e)?e:O(e)}function g(e){return!(!e||!e[fi])}function _(e){return!(!e||!e[gi])}function v(e){return!(!e||!e[_i])}function b(e){return _(e)||v(e)}function y(e){return!(!e||!e[vi])}function C(e){this.next=e}function w(e,t,n,i){var o=0===e?t:1===e?n:[t,n];return i?i.value=o:i={value:o,done:!1},i}function E(){return{value:void 0,done:!0}}function L(e){return!!T(e)}function S(e){return e&&"function"==typeof e.next}function D(e){var t=T(e);return t&&t.call(e)}function T(e){var t=e&&(wi&&e[wi]||e[Ei]);return"function"==typeof t?t:void 0}function I(e){return e&&"number"==typeof e.length}function k(e){return null===e||void 0===e?B():g(e)?e.toSeq():H(e)}function x(e){return null===e||void 0===e?B().toKeyedSeq():g(e)?_(e)?e.toSeq():e.fromEntrySeq():z(e)}function A(e){return null===e||void 0===e?B():g(e)?_(e)?e.entrySeq():e.toIndexedSeq():V(e)}function O(e){return(null===e||void 0===e?B():g(e)?_(e)?e.entrySeq():e:V(e)).toSetSeq()}function N(e){this._array=e,this.size=e.length}function M(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function P(e){this._iterable=e,this.size=e.length||e.size}function R(e){this._iterator=e,this._iteratorCache=[]}function F(e){return!(!e||!e[Si])}function B(){return Di||(Di=new N([]))}function z(e){var t=Array.isArray(e)?new N(e).fromEntrySeq():S(e)?new R(e).fromEntrySeq():L(e)?new P(e).fromEntrySeq():"object"==typeof e?new M(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function V(e){var t=U(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function H(e){var t=U(e)||"object"==typeof e&&new M(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function U(e){return I(e)?new N(e):S(e)?new R(e):L(e)?new P(e):void 0
}function W(e,t,n,i){var o=e._cache;if(o){for(var r=o.length-1,s=0;r>=s;s++){var a=o[n?r-s:s];if(t(a[1],i?a[0]:s,e)===!1)return s+1}return s}return e.__iterateUncached(t,n)}function j(e,t,n,i){var o=e._cache;if(o){var r=o.length-1,s=0;return new C(function(){var e=o[n?r-s:s];return s++>r?E():w(t,i?e[0]:s-1,e[1])})}return e.__iteratorUncached(t,n)}function G(){throw TypeError("Abstract")}function q(){}function Y(){}function K(){}function X(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return"function"==typeof e.equals&&"function"==typeof t.equals&&e.equals(t)?!0:!1}function Z(e,t){return t?J(t,e,"",{"":e}):$(e)}function J(e,t,n,i){return Array.isArray(t)?e.call(i,n,A(t).map(function(n,i){return J(e,n,i,t)})):Q(t)?e.call(i,n,x(t).map(function(n,i){return J(e,n,i,t)})):t}function $(e){return Array.isArray(e)?A(e).map($).toList():Q(e)?x(e).map($).toMap():e}function Q(e){return e&&(e.constructor===Object||void 0===e.constructor)}function et(e){return e>>>1&1073741824|3221225471&e}function tt(e){if(e===!1||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(e=e.valueOf(),e===!1||null===e||void 0===e))return 0;if(e===!0)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return et(n)}return"string"===t?e.length>Mi?nt(e):it(e):"function"==typeof e.hashCode?e.hashCode():ot(e)}function nt(e){var t=Fi[e];return void 0===t&&(t=it(e),Ri===Pi&&(Ri=0,Fi={}),Ri++,Fi[e]=t),t}function it(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return et(t)}function ot(e){var t;if(Ai&&(t=Ti.get(e),void 0!==t))return t;if(t=e[Ni],void 0!==t)return t;if(!xi){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ni],void 0!==t)return t;if(t=rt(e),void 0!==t)return t}if(t=++Oi,1073741824&Oi&&(Oi=0),Ai)Ti.set(e,t);else{if(void 0!==ki&&ki(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(xi)Object.defineProperty(e,Ni,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ni]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ni]=t}}return t}function rt(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function st(e,t){if(!e)throw new Error(t)}function at(e){st(1/0!==e,"Cannot perform this action with an infinite size.")}function lt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function ct(e){this._iter=e,this.size=e.size}function ut(e){this._iter=e,this.size=e.size}function dt(e){this._iter=e,this.size=e.size}function ht(e){var t=Nt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Mt,t.__iterateUncached=function(t,n){var i=this;return e.__iterate(function(e,n){return t(n,e,i)!==!1},n)},t.__iteratorUncached=function(t,n){if(t===Ci){var i=e.__iterator(t,n);return new C(function(){var e=i.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===yi?bi:yi,n)},t}function mt(e,t,n){var i=Nt(e);return i.size=e.size,i.has=function(t){return e.has(t)},i.get=function(i,o){var r=e.get(i,hi);return r===hi?o:t.call(n,r,i,e)},i.__iterateUncached=function(i,o){var r=this;return e.__iterate(function(e,o,s){return i(t.call(n,e,o,s),o,r)!==!1},o)},i.__iteratorUncached=function(i,o){var r=e.__iterator(Ci,o);return new C(function(){var o=r.next();if(o.done)return o;var s=o.value,a=s[0];return w(i,a,t.call(n,s[1],a,e),o)})},i}function pt(e,t){var n=Nt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=ht(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,i){return e.get(t?n:-1-n,i)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Mt,n.__iterate=function(t,n){var i=this;return e.__iterate(function(e,n){return t(e,n,i)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function ft(e,t,n,i){var o=Nt(e);return i&&(o.has=function(i){var o=e.get(i,hi);return o!==hi&&!!t.call(n,o,i,e)},o.get=function(i,o){var r=e.get(i,hi);return r!==hi&&t.call(n,r,i,e)?r:o}),o.__iterateUncached=function(o,r){var s=this,a=0;return e.__iterate(function(e,r,l){return t.call(n,e,r,l)?(a++,o(e,i?r:a-1,s)):void 0},r),a},o.__iteratorUncached=function(o,r){var s=e.__iterator(Ci,r),a=0;return new C(function(){for(;;){var r=s.next();if(r.done)return r;var l=r.value,c=l[0],u=l[1];if(t.call(n,u,c,e))return w(o,i?c:a++,u,r)}})},o}function gt(e,t,n){var i=Ft().asMutable();return e.__iterate(function(o,r){i.update(t.call(n,o,r,e),0,function(e){return e+1})}),i.asImmutable()}function _t(e,t,n){var i=_(e),o=(y(e)?Ln():Ft()).asMutable();e.__iterate(function(r,s){o.update(t.call(n,r,s,e),function(e){return e=e||[],e.push(i?[s,r]:r),e})});var r=Ot(e);return o.map(function(t){return kt(e,r(t))})}function vt(e,t,n,i){var o=e.size;if(l(t,n,o))return e;var r=c(t,o),a=u(n,o);if(r!==r||a!==a)return vt(e.toSeq().cacheResult(),t,n,i);var d,h=a-r;h===h&&(d=0>h?0:h);var m=Nt(e);return m.size=d,!i&&F(e)&&d>=0&&(m.get=function(t,n){return t=s(this,t),t>=0&&d>t?e.get(t+r,n):n}),m.__iterateUncached=function(t,n){var o=this;if(0===d)return 0;if(n)return this.cacheResult().__iterate(t,n);var s=0,a=!0,l=0;return e.__iterate(function(e,n){return a&&(a=s++<r)?void 0:(l++,t(e,i?n:l-1,o)!==!1&&l!==d)}),l},m.__iteratorUncached=function(t,n){if(0!==d&&n)return this.cacheResult().__iterator(t,n);var o=0!==d&&e.__iterator(t,n),s=0,a=0;return new C(function(){for(;s++<r;)o.next();if(++a>d)return E();var e=o.next();return i||t===yi?e:t===bi?w(t,a-1,void 0,e):w(t,a-1,e.value[1],e)})},m}function bt(e,t,n){var i=Nt(e);return i.__iterateUncached=function(i,o){var r=this;if(o)return this.cacheResult().__iterate(i,o);var s=0;return e.__iterate(function(e,o,a){return t.call(n,e,o,a)&&++s&&i(e,o,r)}),s},i.__iteratorUncached=function(i,o){var r=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(Ci,o),a=!0;return new C(function(){if(!a)return E();var e=s.next();if(e.done)return e;var o=e.value,l=o[0],c=o[1];return t.call(n,c,l,r)?i===Ci?e:w(i,l,c,e):(a=!1,E())})},i}function yt(e,t,n,i){var o=Nt(e);return o.__iterateUncached=function(o,r){var s=this;if(r)return this.cacheResult().__iterate(o,r);var a=!0,l=0;return e.__iterate(function(e,r,c){return a&&(a=t.call(n,e,r,c))?void 0:(l++,o(e,i?r:l-1,s))}),l},o.__iteratorUncached=function(o,r){var s=this;if(r)return this.cacheResult().__iterator(o,r);var a=e.__iterator(Ci,r),l=!0,c=0;return new C(function(){var e,r,u;do{if(e=a.next(),e.done)return i||o===yi?e:o===bi?w(o,c++,void 0,e):w(o,c++,e.value[1],e);var d=e.value;r=d[0],u=d[1],l&&(l=t.call(n,u,r,s))}while(l);return o===Ci?e:w(o,r,u,e)})},o}function Ct(e,t){var n=_(e),i=[e].concat(t).map(function(e){return g(e)?n&&(e=m(e)):e=n?z(e):V(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var o=i[0];if(o===e||n&&_(o)||v(e)&&v(o))return o}var r=new N(i);return n?r=r.toKeyedSeq():v(e)||(r=r.toSetSeq()),r=r.flatten(!0),r.size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),r}function wt(e,t,n){var i=Nt(e);return i.__iterateUncached=function(i,o){function r(e,l){var c=this;e.__iterate(function(e,o){return(!t||t>l)&&g(e)?r(e,l+1):i(e,n?o:s++,c)===!1&&(a=!0),!a},o)}var s=0,a=!1;return r(e,0),s},i.__iteratorUncached=function(i,o){var r=e.__iterator(i,o),s=[],a=0;return new C(function(){for(;r;){var e=r.next();if(e.done===!1){var l=e.value;if(i===Ci&&(l=l[1]),t&&!(s.length<t)||!g(l))return n?e:w(i,a++,l,e);s.push(r),r=l.__iterator(i,o)}else r=s.pop()}return E()})},i}function Et(e,t,n){var i=Ot(e);return e.toSeq().map(function(o,r){return i(t.call(n,o,r,e))}).flatten(!0)}function Lt(e,t){var n=Nt(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,i){var o=this,r=0;return e.__iterate(function(e){return(!r||n(t,r++,o)!==!1)&&n(e,r++,o)!==!1},i),r},n.__iteratorUncached=function(n,i){var o,r=e.__iterator(yi,i),s=0;return new C(function(){return(!o||s%2)&&(o=r.next(),o.done)?o:s%2?w(n,s++,t):w(n,s++,o.value,o)})},n}function St(e,t,n){t||(t=Pt);var i=_(e),o=0,r=e.toSeq().map(function(t,i){return[i,t,o++,n?n(t,i,e):t]}).toArray();return r.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(i?function(e,t){r[t].length=2}:function(e,t){r[t]=e[1]}),i?x(r):v(e)?A(r):O(r)}function Dt(e,t,n){if(t||(t=Pt),n){var i=e.toSeq().map(function(t,i){return[t,n(t,i,e)]}).reduce(function(e,n){return Tt(t,e[1],n[1])?n:e});return i&&i[0]}return e.reduce(function(e,n){return Tt(t,e,n)?n:e})}function Tt(e,t,n){var i=e(n,t);return 0===i&&n!==t&&(void 0===n||null===n||n!==n)||i>0}function It(e,t,n){var i=Nt(e);return i.size=new N(n).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,i=this.__iterator(yi,t),o=0;!(n=i.next()).done&&e(n.value,o++,this)!==!1;);return o},i.__iteratorUncached=function(e,i){var o=n.map(function(e){return e=h(e),D(i?e.reverse():e)}),r=0,s=!1;return new C(function(){var n;return s||(n=o.map(function(e){return e.next()}),s=n.some(function(e){return e.done})),s?E():w(e,r++,t.apply(null,n.map(function(e){return e.value})))})},i}function kt(e,t){return F(e)?t:e.constructor(t)}function xt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function At(e){return at(e.size),r(e)}function Ot(e){return _(e)?m:v(e)?p:f}function Nt(e){return Object.create((_(e)?x:v(e)?A:O).prototype)}function Mt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):k.prototype.cacheResult.call(this)}function Pt(e,t){return e>t?1:t>e?-1:0}function Rt(e){var t=D(e);if(!t){if(!I(e))throw new TypeError("Expected iterable or array-like: "+e);t=D(h(e))}return t}function Ft(e){return null===e||void 0===e?Kt():Bt(e)?e:Kt().withMutations(function(t){var n=m(e);at(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function Bt(e){return!(!e||!e[Bi])}function zt(e,t){this.ownerID=e,this.entries=t}function Vt(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function Ht(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function Ut(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function Wt(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function jt(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&qt(e._root)}function Gt(e,t){return w(e,t[0],t[1])}function qt(e,t){return{node:e,index:0,__prev:t}}function Yt(e,t,n,i){var o=Object.create(zi);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=i,o.__altered=!1,o}function Kt(){return Vi||(Vi=Yt(0))}function Xt(e,n,i){var o,r;if(e._root){var s=t(mi),a=t(pi);if(o=Zt(e._root,e.__ownerID,0,void 0,n,i,s,a),!a.value)return e;r=e.size+(s.value?i===hi?-1:1:0)}else{if(i===hi)return e;r=1,o=new zt(e.__ownerID,[[n,i]])}return e.__ownerID?(e.size=r,e._root=o,e.__hash=void 0,e.__altered=!0,e):o?Yt(r,o):Kt()}function Zt(e,t,i,o,r,s,a,l){return e?e.update(t,i,o,r,s,a,l):s===hi?e:(n(l),n(a),new Wt(t,o,[r,s]))}function Jt(e){return e.constructor===Wt||e.constructor===Ut}function $t(e,t,n,i,o){if(e.keyHash===i)return new Ut(t,i,[e.entry,o]);var r,s=(0===n?e.keyHash:e.keyHash>>>n)&di,a=(0===n?i:i>>>n)&di,l=s===a?[$t(e,t,n+ci,i,o)]:(r=new Wt(t,i,o),a>s?[e,r]:[r,e]);return new Vt(t,1<<s|1<<a,l)}function Qt(e,t,n,o){e||(e=new i);for(var r=new Wt(e,tt(n),[n,o]),s=0;s<t.length;s++){var a=t[s];r=r.update(e,0,void 0,a[0],a[1])}return r}function en(e,t,n,i){for(var o=0,r=0,s=new Array(n),a=0,l=1,c=t.length;c>a;a++,l<<=1){var u=t[a];void 0!==u&&a!==i&&(o|=l,s[r++]=u)}return new Vt(e,o,s)}function tn(e,t,n,i,o){for(var r=0,s=new Array(ui),a=0;0!==n;a++,n>>>=1)s[a]=1&n?t[r++]:void 0;return s[i]=o,new Ht(e,r+1,s)}function nn(e,t,n){for(var i=[],o=0;o<n.length;o++){var r=n[o],s=m(r);g(r)||(s=s.map(function(e){return Z(e)})),i.push(s)}return rn(e,t,i)}function on(e){return function(t,n,i){return t&&t.mergeDeepWith&&g(n)?t.mergeDeepWith(e,n):e?e(t,n,i):n}}function rn(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var i=t?function(n,i){e.update(i,hi,function(e){return e===hi?n:t(e,n,i)})}:function(t,n){e.set(n,t)},o=0;o<n.length;o++)n[o].forEach(i)}):e.constructor(n[0])}function sn(e,t,n,i){var o=e===hi,r=t.next();if(r.done){var s=o?n:e,a=i(s);return a===s?e:a}st(o||e&&e.set,"invalid keyPath");var l=r.value,c=o?hi:e.get(l,hi),u=sn(c,t,n,i);return u===c?e:u===hi?e.remove(l):(o?Kt():e).set(l,u)}function an(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,127&e}function ln(e,t,n,i){var r=i?e:o(e);return r[t]=n,r}function cn(e,t,n,i){var o=e.length+1;if(i&&t+1===o)return e[t]=n,e;for(var r=new Array(o),s=0,a=0;o>a;a++)a===t?(r[a]=n,s=-1):r[a]=e[a+s];return r}function un(e,t,n){var i=e.length-1;if(n&&t===i)return e.pop(),e;for(var o=new Array(i),r=0,s=0;i>s;s++)s===t&&(r=1),o[s]=e[s+r];return o}function dn(e){var t=gn();if(null===e||void 0===e)return t;if(hn(e))return e;var n=p(e),i=n.size;return 0===i?t:(at(i),i>0&&ui>i?fn(0,i,ci,null,new mn(n.toArray())):t.withMutations(function(e){e.setSize(i),n.forEach(function(t,n){return e.set(n,t)})}))}function hn(e){return!(!e||!e[ji])}function mn(e,t){this.array=e,this.ownerID=t}function pn(e,t){function n(e,t,n){return 0===t?i(e,n):o(e,t,n)}function i(e,n){var i=n===a?l&&l.array:e&&e.array,o=n>r?0:r-n,c=s-n;return c>ui&&(c=ui),function(){if(o===c)return Yi;var e=t?--c:o++;return i&&i[e]}}function o(e,i,o){var a,l=e&&e.array,c=o>r?0:r-o>>i,u=(s-o>>i)+1;return u>ui&&(u=ui),function(){for(;;){if(a){var e=a();if(e!==Yi)return e;a=null}if(c===u)return Yi;var r=t?--u:c++;a=n(l&&l[r],i-ci,o+(r<<i))}}}var r=e._origin,s=e._capacity,a=En(s),l=e._tail;return n(e._root,e._level,0)}function fn(e,t,n,i,o,r,s){var a=Object.create(Gi);return a.size=t-e,a._origin=e,a._capacity=t,a._level=n,a._root=i,a._tail=o,a.__ownerID=r,a.__hash=s,a.__altered=!1,a}function gn(){return qi||(qi=fn(0,0,ci))}function _n(e,n,i){if(n=s(e,n),n>=e.size||0>n)return e.withMutations(function(e){0>n?Cn(e,n).set(0,i):Cn(e,0,n+1).set(n,i)});n+=e._origin;var o=e._tail,r=e._root,a=t(pi);return n>=En(e._capacity)?o=vn(o,e.__ownerID,0,n,i,a):r=vn(r,e.__ownerID,e._level,n,i,a),a.value?e.__ownerID?(e._root=r,e._tail=o,e.__hash=void 0,e.__altered=!0,e):fn(e._origin,e._capacity,e._level,r,o):e}function vn(e,t,i,o,r,s){var a=o>>>i&di,l=e&&a<e.array.length;if(!l&&void 0===r)return e;var c;if(i>0){var u=e&&e.array[a],d=vn(u,t,i-ci,o,r,s);return d===u?e:(c=bn(e,t),c.array[a]=d,c)}return l&&e.array[a]===r?e:(n(s),c=bn(e,t),void 0===r&&a===c.array.length-1?c.array.pop():c.array[a]=r,c)}function bn(e,t){return t&&e&&t===e.ownerID?e:new mn(e?e.array.slice():[],t)}function yn(e,t){if(t>=En(e._capacity))return e._tail;if(t<1<<e._level+ci){for(var n=e._root,i=e._level;n&&i>0;)n=n.array[t>>>i&di],i-=ci;return n}}function Cn(e,t,n){var o=e.__ownerID||new i,r=e._origin,s=e._capacity,a=r+t,l=void 0===n?s:0>n?s+n:r+n;if(a===r&&l===s)return e;if(a>=l)return e.clear();for(var c=e._level,u=e._root,d=0;0>a+d;)u=new mn(u&&u.array.length?[void 0,u]:[],o),c+=ci,d+=1<<c;d&&(a+=d,r+=d,l+=d,s+=d);for(var h=En(s),m=En(l);m>=1<<c+ci;)u=new mn(u&&u.array.length?[u]:[],o),c+=ci;var p=e._tail,f=h>m?yn(e,l-1):m>h?new mn([],o):p;if(p&&m>h&&s>a&&p.array.length){u=bn(u,o);for(var g=u,_=c;_>ci;_-=ci){var v=h>>>_&di;g=g.array[v]=bn(g.array[v],o)}g.array[h>>>ci&di]=p}if(s>l&&(f=f&&f.removeAfter(o,0,l)),a>=m)a-=m,l-=m,c=ci,u=null,f=f&&f.removeBefore(o,0,a);else if(a>r||h>m){for(d=0;u;){var b=a>>>c&di;if(b!==m>>>c&di)break;b&&(d+=(1<<c)*b),c-=ci,u=u.array[b]}u&&a>r&&(u=u.removeBefore(o,c,a-d)),u&&h>m&&(u=u.removeAfter(o,c,m-d)),d&&(a-=d,l-=d)}return e.__ownerID?(e.size=l-a,e._origin=a,e._capacity=l,e._level=c,e._root=u,e._tail=f,e.__hash=void 0,e.__altered=!0,e):fn(a,l,c,u,f)}function wn(e,t,n){for(var i=[],o=0,r=0;r<n.length;r++){var s=n[r],a=p(s);a.size>o&&(o=a.size),g(s)||(a=a.map(function(e){return Z(e)})),i.push(a)}return o>e.size&&(e=e.setSize(o)),rn(e,t,i)}function En(e){return ui>e?0:e-1>>>ci<<ci}function Ln(e){return null===e||void 0===e?Tn():Sn(e)?e:Tn().withMutations(function(t){var n=m(e);at(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function Sn(e){return Bt(e)&&y(e)}function Dn(e,t,n,i){var o=Object.create(Ln.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=i,o}function Tn(){return Ki||(Ki=Dn(Kt(),gn()))}function In(e,t,n){var i,o,r=e._map,s=e._list,a=r.get(t),l=void 0!==a;if(n===hi){if(!l)return e;s.size>=ui&&s.size>=2*r.size?(o=s.filter(function(e,t){return void 0!==e&&a!==t}),i=o.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(i.__ownerID=o.__ownerID=e.__ownerID)):(i=r.remove(t),o=a===s.size-1?s.pop():s.set(a,void 0))}else if(l){if(n===s.get(a)[1])return e;i=r,o=s.set(a,[t,n])}else i=r.set(t,s.size),o=s.set(s.size,[t,n]);return e.__ownerID?(e.size=i.size,e._map=i,e._list=o,e.__hash=void 0,e):Dn(i,o)}function kn(e){return null===e||void 0===e?On():xn(e)?e:On().unshiftAll(e)}function xn(e){return!(!e||!e[Xi])}function An(e,t,n,i){var o=Object.create(Zi);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=i,o.__altered=!1,o}function On(){return Ji||(Ji=An(0))}function Nn(e){return null===e||void 0===e?Fn():Mn(e)?e:Fn().withMutations(function(t){var n=f(e);at(n.size),n.forEach(function(e){return t.add(e)})})}function Mn(e){return!(!e||!e[$i])}function Pn(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Rn(e,t){var n=Object.create(Qi);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Fn(){return eo||(eo=Rn(Kt()))}function Bn(e){return null===e||void 0===e?Hn():zn(e)?e:Hn().withMutations(function(t){var n=f(e);at(n.size),n.forEach(function(e){return t.add(e)})})}function zn(e){return Mn(e)&&y(e)}function Vn(e,t){var n=Object.create(to);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Hn(){return no||(no=Vn(Tn()))}function Un(e,t){var n,i=function(r){if(r instanceof i)return r;if(!(this instanceof i))return new i(r);if(!n){n=!0;var s=Object.keys(e);Gn(o,s),o.size=s.length,o._name=t,o._keys=s,o._defaultValues=e}this._map=Ft(r)},o=i.prototype=Object.create(io);return o.constructor=i,i}function Wn(e,t,n){var i=Object.create(Object.getPrototypeOf(e));return i._map=t,i.__ownerID=n,i}function jn(e){return e._name||e.constructor.name||"Record"}function Gn(e,t){try{t.forEach(qn.bind(void 0,e))}catch(n){}}function qn(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){st(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Yn(e,t){if(e===t)return!0;if(!g(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||_(e)!==_(t)||v(e)!==v(t)||y(e)!==y(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!b(e);if(y(e)){var i=e.entries();return t.every(function(e,t){var o=i.next().value;return o&&X(o[1],e)&&(n||X(o[0],t))})&&i.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var r=e;e=t,t=r}var s=!0,a=t.__iterate(function(t,i){return(n?e.has(t):o?X(t,e.get(i,hi)):X(e.get(i,hi),t))?void 0:(s=!1,!1)});return s&&e.size===a}function Kn(e,t,n){if(!(this instanceof Kn))return new Kn(e,t,n);if(st(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),e>t&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(oo)return oo;oo=this}}function Xn(e,t){if(!(this instanceof Xn))return new Xn(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(ro)return ro;ro=this}}function Zn(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Jn(e,t){return t}function $n(e,t){return[t,e]}function Qn(e){return function(){return!e.apply(this,arguments)}}function ei(e){return function(){return-e.apply(this,arguments)}}function ti(e){return"string"==typeof e?JSON.stringify(e):e}function ni(){return o(arguments)}function ii(e,t){return t>e?1:e>t?-1:0}function oi(e){if(1/0===e.size)return 0;var t=y(e),n=_(e),i=t?1:0,o=e.__iterate(n?t?function(e,t){i=31*i+si(tt(e),tt(t))|0}:function(e,t){i=i+si(tt(e),tt(t))|0}:t?function(e){i=31*i+tt(e)|0}:function(e){i=i+tt(e)|0});return ri(o,i)}function ri(e,t){return t=Ii(t,3432918353),t=Ii(t<<15|t>>>-15,461845907),t=Ii(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Ii(t^t>>>16,2246822507),t=Ii(t^t>>>13,3266489909),t=et(t^t>>>16)}function si(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var ai=Array.prototype.slice,li="delete",ci=5,ui=1<<ci,di=ui-1,hi={},mi={value:!1},pi={value:!1};e(m,h),e(p,h),e(f,h),h.isIterable=g,h.isKeyed=_,h.isIndexed=v,h.isAssociative=b,h.isOrdered=y,h.Keyed=m,h.Indexed=p,h.Set=f;var fi="@@__IMMUTABLE_ITERABLE__@@",gi="@@__IMMUTABLE_KEYED__@@",_i="@@__IMMUTABLE_INDEXED__@@",vi="@@__IMMUTABLE_ORDERED__@@",bi=0,yi=1,Ci=2,wi="function"==typeof Symbol&&Symbol.iterator,Ei="@@iterator",Li=wi||Ei;C.prototype.toString=function(){return"[Iterator]"},C.KEYS=bi,C.VALUES=yi,C.ENTRIES=Ci,C.prototype.inspect=C.prototype.toSource=function(){return this.toString()},C.prototype[Li]=function(){return this},e(k,h),k.of=function(){return k(arguments)},k.prototype.toSeq=function(){return this},k.prototype.toString=function(){return this.__toString("Seq {","}")},k.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},k.prototype.__iterate=function(e,t){return W(this,e,t,!0)},k.prototype.__iterator=function(e,t){return j(this,e,t,!0)},e(x,k),x.prototype.toKeyedSeq=function(){return this},e(A,k),A.of=function(){return A(arguments)},A.prototype.toIndexedSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq [","]")},A.prototype.__iterate=function(e,t){return W(this,e,t,!1)},A.prototype.__iterator=function(e,t){return j(this,e,t,!1)},e(O,k),O.of=function(){return O(arguments)},O.prototype.toSetSeq=function(){return this},k.isSeq=F,k.Keyed=x,k.Set=O,k.Indexed=A;var Si="@@__IMMUTABLE_SEQ__@@";k.prototype[Si]=!0,e(N,A),N.prototype.get=function(e,t){return this.has(e)?this._array[s(this,e)]:t},N.prototype.__iterate=function(e,t){for(var n=this._array,i=n.length-1,o=0;i>=o;o++)if(e(n[t?i-o:o],o,this)===!1)return o+1;return o},N.prototype.__iterator=function(e,t){var n=this._array,i=n.length-1,o=0;return new C(function(){return o>i?E():w(e,o,n[t?i-o++:o++])})},e(M,x),M.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},M.prototype.has=function(e){return this._object.hasOwnProperty(e)},M.prototype.__iterate=function(e,t){for(var n=this._object,i=this._keys,o=i.length-1,r=0;o>=r;r++){var s=i[t?o-r:r];if(e(n[s],s,this)===!1)return r+1}return r},M.prototype.__iterator=function(e,t){var n=this._object,i=this._keys,o=i.length-1,r=0;return new C(function(){var s=i[t?o-r:r];return r++>o?E():w(e,s,n[s])})},M.prototype[vi]=!0,e(P,A),P.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,i=D(n),o=0;if(S(i))for(var r;!(r=i.next()).done&&e(r.value,o++,this)!==!1;);return o},P.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,i=D(n);if(!S(i))return new C(E);var o=0;return new C(function(){var t=i.next();return t.done?t:w(e,o++,t.value)})},e(R,A),R.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(e(i[o],o++,this)===!1)return o;for(var r;!(r=n.next()).done;){var s=r.value;if(i[o]=s,e(s,o++,this)===!1)break}return o},R.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,i=this._iteratorCache,o=0;return new C(function(){if(o>=i.length){var t=n.next();if(t.done)return t;i[o]=t.value}return w(e,o,i[o++])})};var Di;e(G,h),e(q,G),e(Y,G),e(K,G),G.Keyed=q,G.Indexed=Y,G.Set=K;var Ti,Ii="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){e=0|e,t=0|t;var n=65535&e,i=65535&t;return n*i+((e>>>16)*i+n*(t>>>16)<<16>>>0)|0},ki=Object.isExtensible,xi=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Ai="function"==typeof WeakMap;Ai&&(Ti=new WeakMap);var Oi=0,Ni="__immutablehash__";"function"==typeof Symbol&&(Ni=Symbol(Ni));var Mi=16,Pi=255,Ri=0,Fi={};e(lt,x),lt.prototype.get=function(e,t){return this._iter.get(e,t)},lt.prototype.has=function(e){return this._iter.has(e)},lt.prototype.valueSeq=function(){return this._iter.valueSeq()},lt.prototype.reverse=function(){var e=this,t=pt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},lt.prototype.map=function(e,t){var n=this,i=mt(this,e,t);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().map(e,t)}),i},lt.prototype.__iterate=function(e,t){var n,i=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,i)}:(n=t?At(this):0,function(o){return e(o,t?--n:n++,i)}),t)},lt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(yi,t),i=t?At(this):0;return new C(function(){var o=n.next();return o.done?o:w(e,t?--i:i++,o.value,o)})},lt.prototype[vi]=!0,e(ct,A),ct.prototype.includes=function(e){return this._iter.includes(e)},ct.prototype.__iterate=function(e,t){var n=this,i=0;return this._iter.__iterate(function(t){return e(t,i++,n)},t)},ct.prototype.__iterator=function(e,t){var n=this._iter.__iterator(yi,t),i=0;return new C(function(){var t=n.next();return t.done?t:w(e,i++,t.value,t)})},e(ut,O),ut.prototype.has=function(e){return this._iter.includes(e)},ut.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},ut.prototype.__iterator=function(e,t){var n=this._iter.__iterator(yi,t);return new C(function(){var t=n.next();return t.done?t:w(e,t.value,t.value,t)})},e(dt,x),dt.prototype.entrySeq=function(){return this._iter.toSeq()},dt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){xt(t);var i=g(t);return e(i?t.get(1):t[1],i?t.get(0):t[0],n)}},t)},dt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(yi,t);return new C(function(){for(;;){var t=n.next();if(t.done)return t;var i=t.value;if(i){xt(i);var o=g(i);return w(e,o?i.get(0):i[0],o?i.get(1):i[1],t)}}})},ct.prototype.cacheResult=lt.prototype.cacheResult=ut.prototype.cacheResult=dt.prototype.cacheResult=Mt,e(Ft,q),Ft.prototype.toString=function(){return this.__toString("Map {","}")},Ft.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Ft.prototype.set=function(e,t){return Xt(this,e,t)},Ft.prototype.setIn=function(e,t){return this.updateIn(e,hi,function(){return t})},Ft.prototype.remove=function(e){return Xt(this,e,hi)},Ft.prototype.deleteIn=function(e){return this.updateIn(e,function(){return hi})},Ft.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},Ft.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var i=sn(this,Rt(e),t,n);return i===hi?void 0:i},Ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Kt()},Ft.prototype.merge=function(){return nn(this,void 0,arguments)},Ft.prototype.mergeWith=function(e){var t=ai.call(arguments,1);return nn(this,e,t)},Ft.prototype.mergeIn=function(e){var t=ai.call(arguments,1);return this.updateIn(e,Kt(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},Ft.prototype.mergeDeep=function(){return nn(this,on(void 0),arguments)},Ft.prototype.mergeDeepWith=function(e){var t=ai.call(arguments,1);return nn(this,on(e),t)},Ft.prototype.mergeDeepIn=function(e){var t=ai.call(arguments,1);return this.updateIn(e,Kt(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},Ft.prototype.sort=function(e){return Ln(St(this,e))},Ft.prototype.sortBy=function(e,t){return Ln(St(this,t,e))},Ft.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new i)},Ft.prototype.asImmutable=function(){return this.__ensureOwner()},Ft.prototype.wasAltered=function(){return this.__altered},Ft.prototype.__iterator=function(e,t){return new jt(this,e,t)},Ft.prototype.__iterate=function(e,t){var n=this,i=0;return this._root&&this._root.iterate(function(t){return i++,e(t[1],t[0],n)},t),i},Ft.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Yt(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ft.isMap=Bt;var Bi="@@__IMMUTABLE_MAP__@@",zi=Ft.prototype;zi[Bi]=!0,zi[li]=zi.remove,zi.removeIn=zi.deleteIn,zt.prototype.get=function(e,t,n,i){for(var o=this.entries,r=0,s=o.length;s>r;r++)if(X(n,o[r][0]))return o[r][1];return i},zt.prototype.update=function(e,t,i,r,s,a,l){for(var c=s===hi,u=this.entries,d=0,h=u.length;h>d&&!X(r,u[d][0]);d++);var m=h>d;if(m?u[d][1]===s:c)return this;if(n(l),(c||!m)&&n(a),!c||1!==u.length){if(!m&&!c&&u.length>=Hi)return Qt(e,u,r,s);var p=e&&e===this.ownerID,f=p?u:o(u);return m?c?d===h-1?f.pop():f[d]=f.pop():f[d]=[r,s]:f.push([r,s]),p?(this.entries=f,this):new zt(e,f)}},Vt.prototype.get=function(e,t,n,i){void 0===t&&(t=tt(n));var o=1<<((0===e?t:t>>>e)&di),r=this.bitmap;return 0===(r&o)?i:this.nodes[an(r&o-1)].get(e+ci,t,n,i)},Vt.prototype.update=function(e,t,n,i,o,r,s){void 0===n&&(n=tt(i));var a=(0===t?n:n>>>t)&di,l=1<<a,c=this.bitmap,u=0!==(c&l);if(!u&&o===hi)return this;var d=an(c&l-1),h=this.nodes,m=u?h[d]:void 0,p=Zt(m,e,t+ci,n,i,o,r,s);if(p===m)return this;if(!u&&p&&h.length>=Ui)return tn(e,h,c,a,p);if(u&&!p&&2===h.length&&Jt(h[1^d]))return h[1^d];if(u&&p&&1===h.length&&Jt(p))return p;var f=e&&e===this.ownerID,g=u?p?c:c^l:c|l,_=u?p?ln(h,d,p,f):un(h,d,f):cn(h,d,p,f);return f?(this.bitmap=g,this.nodes=_,this):new Vt(e,g,_)},Ht.prototype.get=function(e,t,n,i){void 0===t&&(t=tt(n));var o=(0===e?t:t>>>e)&di,r=this.nodes[o];return r?r.get(e+ci,t,n,i):i},Ht.prototype.update=function(e,t,n,i,o,r,s){void 0===n&&(n=tt(i));var a=(0===t?n:n>>>t)&di,l=o===hi,c=this.nodes,u=c[a];if(l&&!u)return this;var d=Zt(u,e,t+ci,n,i,o,r,s);if(d===u)return this;var h=this.count;if(u){if(!d&&(h--,Wi>h))return en(e,c,h,a)}else h++;var m=e&&e===this.ownerID,p=ln(c,a,d,m);return m?(this.count=h,this.nodes=p,this):new Ht(e,h,p)},Ut.prototype.get=function(e,t,n,i){for(var o=this.entries,r=0,s=o.length;s>r;r++)if(X(n,o[r][0]))return o[r][1];return i},Ut.prototype.update=function(e,t,i,r,s,a,l){void 0===i&&(i=tt(r));var c=s===hi;if(i!==this.keyHash)return c?this:(n(l),n(a),$t(this,e,t,i,[r,s]));for(var u=this.entries,d=0,h=u.length;h>d&&!X(r,u[d][0]);d++);var m=h>d;if(m?u[d][1]===s:c)return this;if(n(l),(c||!m)&&n(a),c&&2===h)return new Wt(e,this.keyHash,u[1^d]);var p=e&&e===this.ownerID,f=p?u:o(u);return m?c?d===h-1?f.pop():f[d]=f.pop():f[d]=[r,s]:f.push([r,s]),p?(this.entries=f,this):new Ut(e,this.keyHash,f)},Wt.prototype.get=function(e,t,n,i){return X(n,this.entry[0])?this.entry[1]:i},Wt.prototype.update=function(e,t,i,o,r,s,a){var l=r===hi,c=X(o,this.entry[0]);return(c?r===this.entry[1]:l)?this:(n(a),l?void n(s):c?e&&e===this.ownerID?(this.entry[1]=r,this):new Wt(e,this.keyHash,[o,r]):(n(s),$t(this,e,t,tt(o),[o,r])))
},zt.prototype.iterate=Ut.prototype.iterate=function(e,t){for(var n=this.entries,i=0,o=n.length-1;o>=i;i++)if(e(n[t?o-i:i])===!1)return!1},Vt.prototype.iterate=Ht.prototype.iterate=function(e,t){for(var n=this.nodes,i=0,o=n.length-1;o>=i;i++){var r=n[t?o-i:i];if(r&&r.iterate(e,t)===!1)return!1}},Wt.prototype.iterate=function(e){return e(this.entry)},e(jt,C),jt.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,i=t.node,o=t.index++;if(i.entry){if(0===o)return Gt(e,i.entry)}else if(i.entries){if(n=i.entries.length-1,n>=o)return Gt(e,i.entries[this._reverse?n-o:o])}else if(n=i.nodes.length-1,n>=o){var r=i.nodes[this._reverse?n-o:o];if(r){if(r.entry)return Gt(e,r.entry);t=this._stack=qt(r,t)}continue}t=this._stack=this._stack.__prev}return E()};var Vi,Hi=ui/4,Ui=ui/2,Wi=ui/4;e(dn,Y),dn.of=function(){return this(arguments)},dn.prototype.toString=function(){return this.__toString("List [","]")},dn.prototype.get=function(e,t){if(e=s(this,e),0>e||e>=this.size)return t;e+=this._origin;var n=yn(this,e);return n&&n.array[e&di]},dn.prototype.set=function(e,t){return _n(this,e,t)},dn.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},dn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=ci,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):gn()},dn.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Cn(n,0,t+e.length);for(var i=0;i<e.length;i++)n.set(t+i,e[i])})},dn.prototype.pop=function(){return Cn(this,0,-1)},dn.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Cn(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},dn.prototype.shift=function(){return Cn(this,1)},dn.prototype.merge=function(){return wn(this,void 0,arguments)},dn.prototype.mergeWith=function(e){var t=ai.call(arguments,1);return wn(this,e,t)},dn.prototype.mergeDeep=function(){return wn(this,on(void 0),arguments)},dn.prototype.mergeDeepWith=function(e){var t=ai.call(arguments,1);return wn(this,on(e),t)},dn.prototype.setSize=function(e){return Cn(this,0,e)},dn.prototype.slice=function(e,t){var n=this.size;return l(e,t,n)?this:Cn(this,c(e,n),u(t,n))},dn.prototype.__iterator=function(e,t){var n=0,i=pn(this,t);return new C(function(){var t=i();return t===Yi?E():w(e,n++,t)})},dn.prototype.__iterate=function(e,t){for(var n,i=0,o=pn(this,t);(n=o())!==Yi&&e(n,i++,this)!==!1;);return i},dn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?fn(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},dn.isList=hn;var ji="@@__IMMUTABLE_LIST__@@",Gi=dn.prototype;Gi[ji]=!0,Gi[li]=Gi.remove,Gi.setIn=zi.setIn,Gi.deleteIn=Gi.removeIn=zi.removeIn,Gi.update=zi.update,Gi.updateIn=zi.updateIn,Gi.mergeIn=zi.mergeIn,Gi.mergeDeepIn=zi.mergeDeepIn,Gi.withMutations=zi.withMutations,Gi.asMutable=zi.asMutable,Gi.asImmutable=zi.asImmutable,Gi.wasAltered=zi.wasAltered,mn.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0||0===this.array.length)return this;var i=n>>>t&di;if(i>=this.array.length)return new mn([],e);var o,r=0===i;if(t>0){var s=this.array[i];if(o=s&&s.removeBefore(e,t-ci,n),o===s&&r)return this}if(r&&!o)return this;var a=bn(this,e);if(!r)for(var l=0;i>l;l++)a.array[l]=void 0;return o&&(a.array[i]=o),a},mn.prototype.removeAfter=function(e,t,n){if(n===t?1<<t:0||0===this.array.length)return this;var i=n-1>>>t&di;if(i>=this.array.length)return this;var o,r=i===this.array.length-1;if(t>0){var s=this.array[i];if(o=s&&s.removeAfter(e,t-ci,n),o===s&&r)return this}if(r&&!o)return this;var a=bn(this,e);return r||a.array.pop(),o&&(a.array[i]=o),a};var qi,Yi={};e(Ln,Ft),Ln.of=function(){return this(arguments)},Ln.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ln.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Ln.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Tn()},Ln.prototype.set=function(e,t){return In(this,e,t)},Ln.prototype.remove=function(e){return In(this,e,hi)},Ln.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ln.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Ln.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Ln.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Dn(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Ln.isOrderedMap=Sn,Ln.prototype[vi]=!0,Ln.prototype[li]=Ln.prototype.remove;var Ki;e(kn,Y),kn.of=function(){return this(arguments)},kn.prototype.toString=function(){return this.__toString("Stack [","]")},kn.prototype.get=function(e,t){var n=this._head;for(e=s(this,e);n&&e--;)n=n.next;return n?n.value:t},kn.prototype.peek=function(){return this._head&&this._head.value},kn.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):An(e,t)},kn.prototype.pushAll=function(e){if(e=p(e),0===e.size)return this;at(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):An(t,n)},kn.prototype.pop=function(){return this.slice(1)},kn.prototype.unshift=function(){return this.push.apply(this,arguments)},kn.prototype.unshiftAll=function(e){return this.pushAll(e)},kn.prototype.shift=function(){return this.pop.apply(this,arguments)},kn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):On()},kn.prototype.slice=function(e,t){if(l(e,t,this.size))return this;var n=c(e,this.size),i=u(t,this.size);if(i!==this.size)return Y.prototype.slice.call(this,e,t);for(var o=this.size-n,r=this._head;n--;)r=r.next;return this.__ownerID?(this.size=o,this._head=r,this.__hash=void 0,this.__altered=!0,this):An(o,r)},kn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?An(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},kn.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,i=this._head;i&&e(i.value,n++,this)!==!1;)i=i.next;return n},kn.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,i=this._head;return new C(function(){if(i){var t=i.value;return i=i.next,w(e,n++,t)}return E()})},kn.isStack=xn;var Xi="@@__IMMUTABLE_STACK__@@",Zi=kn.prototype;Zi[Xi]=!0,Zi.withMutations=zi.withMutations,Zi.asMutable=zi.asMutable,Zi.asImmutable=zi.asImmutable,Zi.wasAltered=zi.wasAltered;var Ji;e(Nn,K),Nn.of=function(){return this(arguments)},Nn.fromKeys=function(e){return this(m(e).keySeq())},Nn.prototype.toString=function(){return this.__toString("Set {","}")},Nn.prototype.has=function(e){return this._map.has(e)},Nn.prototype.add=function(e){return Pn(this,this._map.set(e,!0))},Nn.prototype.remove=function(e){return Pn(this,this._map.remove(e))},Nn.prototype.clear=function(){return Pn(this,this._map.clear())},Nn.prototype.union=function(){var e=ai.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)f(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Nn.prototype.intersect=function(){var e=ai.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return f(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Nn.prototype.subtract=function(){var e=ai.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return f(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Nn.prototype.merge=function(){return this.union.apply(this,arguments)},Nn.prototype.mergeWith=function(){var e=ai.call(arguments,1);return this.union.apply(this,e)},Nn.prototype.sort=function(e){return Bn(St(this,e))},Nn.prototype.sortBy=function(e,t){return Bn(St(this,t,e))},Nn.prototype.wasAltered=function(){return this._map.wasAltered()},Nn.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,i){return e(i,i,n)},t)},Nn.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Nn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Nn.isSet=Mn;var $i="@@__IMMUTABLE_SET__@@",Qi=Nn.prototype;Qi[$i]=!0,Qi[li]=Qi.remove,Qi.mergeDeep=Qi.merge,Qi.mergeDeepWith=Qi.mergeWith,Qi.withMutations=zi.withMutations,Qi.asMutable=zi.asMutable,Qi.asImmutable=zi.asImmutable,Qi.__empty=Fn,Qi.__make=Rn;var eo;e(Bn,Nn),Bn.of=function(){return this(arguments)},Bn.fromKeys=function(e){return this(m(e).keySeq())},Bn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Bn.isOrderedSet=zn;var to=Bn.prototype;to[vi]=!0,to.__empty=Hn,to.__make=Vn;var no;e(Un,q),Un.prototype.toString=function(){return this.__toString(jn(this)+" {","}")},Un.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Un.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},Un.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Wn(this,Kt()))},Un.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+jn(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:Wn(this,n)},Un.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Wn(this,t)},Un.prototype.wasAltered=function(){return this._map.wasAltered()},Un.prototype.__iterator=function(e,t){var n=this;return m(this._defaultValues).map(function(e,t){return n.get(t)}).__iterator(e,t)},Un.prototype.__iterate=function(e,t){var n=this;return m(this._defaultValues).map(function(e,t){return n.get(t)}).__iterate(e,t)},Un.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Wn(this,t,e):(this.__ownerID=e,this._map=t,this)};var io=Un.prototype;io[li]=io.remove,io.deleteIn=io.removeIn=zi.removeIn,io.merge=zi.merge,io.mergeWith=zi.mergeWith,io.mergeIn=zi.mergeIn,io.mergeDeep=zi.mergeDeep,io.mergeDeepWith=zi.mergeDeepWith,io.mergeDeepIn=zi.mergeDeepIn,io.setIn=zi.setIn,io.update=zi.update,io.updateIn=zi.updateIn,io.withMutations=zi.withMutations,io.asMutable=zi.asMutable,io.asImmutable=zi.asImmutable,e(Kn,A),Kn.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Kn.prototype.get=function(e,t){return this.has(e)?this._start+s(this,e)*this._step:t},Kn.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Kn.prototype.slice=function(e,t){return l(e,t,this.size)?this:(e=c(e,this.size),t=u(t,this.size),e>=t?new Kn(0,0):new Kn(this.get(e,this._end),this.get(t,this._end),this._step))},Kn.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Kn.prototype.lastIndexOf=function(e){return this.indexOf(e)},Kn.prototype.__iterate=function(e,t){for(var n=this.size-1,i=this._step,o=t?this._start+n*i:this._start,r=0;n>=r;r++){if(e(o,r,this)===!1)return r+1;o+=t?-i:i}return r},Kn.prototype.__iterator=function(e,t){var n=this.size-1,i=this._step,o=t?this._start+n*i:this._start,r=0;return new C(function(){var s=o;return o+=t?-i:i,r>n?E():w(e,r++,s)})},Kn.prototype.equals=function(e){return e instanceof Kn?this._start===e._start&&this._end===e._end&&this._step===e._step:Yn(this,e)};var oo;e(Xn,A),Xn.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Xn.prototype.get=function(e,t){return this.has(e)?this._value:t},Xn.prototype.includes=function(e){return X(this._value,e)},Xn.prototype.slice=function(e,t){var n=this.size;return l(e,t,n)?this:new Xn(this._value,u(t,n)-c(e,n))},Xn.prototype.reverse=function(){return this},Xn.prototype.indexOf=function(e){return X(this._value,e)?0:-1},Xn.prototype.lastIndexOf=function(e){return X(this._value,e)?this.size:-1},Xn.prototype.__iterate=function(e){for(var t=0;t<this.size;t++)if(e(this._value,t,this)===!1)return t+1;return t},Xn.prototype.__iterator=function(e){var t=this,n=0;return new C(function(){return n<t.size?w(e,n++,t._value):E()})},Xn.prototype.equals=function(e){return e instanceof Xn?X(this._value,e._value):Yn(e)};var ro;h.Iterator=C,Zn(h,{toArray:function(){at(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new ct(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new lt(this,!0)},toMap:function(){return Ft(this.toKeyedSeq())},toObject:function(){at(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Ln(this.toKeyedSeq())},toOrderedSet:function(){return Bn(_(this)?this.valueSeq():this)},toSet:function(){return Nn(_(this)?this.valueSeq():this)},toSetSeq:function(){return new ut(this)},toSeq:function(){return v(this)?this.toIndexedSeq():_(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return kn(_(this)?this.valueSeq():this)},toList:function(){return dn(_(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var e=ai.call(arguments,0);return kt(this,Ct(this,e))},contains:function(e){return this.includes(e)},includes:function(e){return this.some(function(t){return X(t,e)})},entries:function(){return this.__iterator(Ci)},every:function(e,t){at(this.size);var n=!0;return this.__iterate(function(i,o,r){return e.call(t,i,o,r)?void 0:(n=!1,!1)}),n},filter:function(e,t){return kt(this,ft(this,e,t,!0))},find:function(e,t,n){var i=this.findEntry(e,t);return i?i[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(i,o,r){return e.call(t,i,o,r)?(n=[o,i],!1):void 0}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return at(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){at(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(i){n?n=!1:t+=e,t+=null!==i&&void 0!==i?i.toString():""}),t},keys:function(){return this.__iterator(bi)},map:function(e,t){return kt(this,mt(this,e,t))},reduce:function(e,t,n){at(this.size);var i,o;return arguments.length<2?o=!0:i=t,this.__iterate(function(t,r,s){o?(o=!1,i=t):i=e.call(n,i,t,r,s)}),i},reduceRight:function(){var e=this.toKeyedSeq().reverse();return e.reduce.apply(e,arguments)},reverse:function(){return kt(this,pt(this,!0))},slice:function(e,t){return kt(this,vt(this,e,t,!0))},some:function(e,t){return!this.every(Qn(e),t)},sort:function(e){return kt(this,St(this,e))},values:function(){return this.__iterator(yi)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return r(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return gt(this,e,t)},equals:function(e){return Yn(this,e)},entrySeq:function(){var e=this;if(e._cache)return new N(e._cache);var t=e.toSeq().map($n).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Qn(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(a)},flatMap:function(e,t){return kt(this,Et(this,e,t))},flatten:function(e){return kt(this,wt(this,e,!0))},fromEntrySeq:function(){return new dt(this)},get:function(e,t){return this.find(function(t,n){return X(n,e)},void 0,t)},getIn:function(e,t){for(var n,i=this,o=Rt(e);!(n=o.next()).done;){var r=n.value;if(i=i&&i.get?i.get(r,hi):hi,i===hi)return t}return i},groupBy:function(e,t){return _t(this,e,t)},has:function(e){return this.get(e,hi)!==hi},hasIn:function(e){return this.getIn(e,hi)!==hi},isSubset:function(e){return e="function"==typeof e.includes?e:h(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e.isSubset(this)},keySeq:function(){return this.toSeq().map(Jn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return Dt(this,e)},maxBy:function(e,t){return Dt(this,t,e)},min:function(e){return Dt(this,e?ei(e):ii)},minBy:function(e,t){return Dt(this,t?ei(t):ii,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return kt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return kt(this,yt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Qn(e),t)},sortBy:function(e,t){return kt(this,St(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return kt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return kt(this,bt(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Qn(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=oi(this))}});var so=h.prototype;so[fi]=!0,so[Li]=so.values,so.__toJS=so.toArray,so.__toStringMapper=ti,so.inspect=so.toSource=function(){return this.toString()},so.chain=so.flatMap,function(){try{Object.defineProperty(so,"length",{get:function(){if(!h.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Zn(m,{flip:function(){return kt(this,ht(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return X(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return X(t,e)})},mapEntries:function(e,t){var n=this,i=0;return kt(this,this.toSeq().map(function(o,r){return e.call(t,[r,o],i++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return kt(this,this.toSeq().flip().map(function(i,o){return e.call(t,i,o,n)}).flip())}});var ao=m.prototype;ao[gi]=!0,ao[Li]=so.entries,ao.__toJS=so.toObject,ao.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+ti(e)},Zn(p,{toKeyedSeq:function(){return new lt(this,!1)},filter:function(e,t){return kt(this,ft(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){return this.toSeq().reverse().indexOf(e)},reverse:function(){return kt(this,pt(this,!1))},slice:function(e,t){return kt(this,vt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=c(e,this.size);var i=this.slice(0,e);return kt(this,1===n?i:i.concat(o(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return kt(this,wt(this,e,!1))},get:function(e,t){return e=s(this,e),0>e||1/0===this.size||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return e=s(this,e),e>=0&&(void 0!==this.size?1/0===this.size||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return kt(this,Lt(this,e))},interleave:function(){var e=[this].concat(o(arguments)),t=It(this.toSeq(),A.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),kt(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return kt(this,yt(this,e,t,!1))},zip:function(){var e=[this].concat(o(arguments));return kt(this,It(this,ni,e))},zipWith:function(e){var t=o(arguments);return t[0]=this,kt(this,It(this,e,t))}}),p.prototype[_i]=!0,p.prototype[vi]=!0,Zn(f,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),f.prototype.has=so.includes,Zn(x,m.prototype),Zn(A,p.prototype),Zn(O,f.prototype),Zn(q,m.prototype),Zn(Y,p.prototype),Zn(K,f.prototype);var lo={Iterable:h,Seq:k,Collection:G,Map:Ft,OrderedMap:Ln,List:dn,Stack:kn,Set:Nn,OrderedSet:Bn,Record:Un,Range:Kn,Repeat:Xn,is:X,fromJS:Z};return lo}),define("tao/lib/scribe/plugins/core/formatters/html/enforce-p-elements",["../../../../immutable"],function(e){return function(){return function(t){function n(t){var n=0;e.List(t.childNodes).filter(function(e){return e.nodeType===Node.TEXT_NODE||!o.isBlockElement(e)}).groupBy(function(e,t,i){return 0===t||e.previousSibling===i.get(t-1)?n:n+=1}).forEach(function(e){o.wrap(e.toArray(),document.createElement("p"))})}function i(e){for(var t,i=0;t=e.children[i++];)"BLOCKQUOTE"===t.tagName&&n(t)}var o=t.node;t.registerHTMLFormatter("normalize",function(e){var t=document.createElement("div");return t.innerHTML=e,n(t),i(t),t.innerHTML})}}}),define("tao/lib/scribe/constants/inline-element-names",["../immutable"],function(e){var t=e.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA");return t}),define("tao/lib/scribe/constants/block-element-names",["../immutable"],function(e){var t=e.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO");return t}),define("tao/lib/scribe/node",["./constants/inline-element-names","./constants/block-element-names","./immutable"],function(e,t,n){function i(e){return t.includes(e.nodeName)}function o(t){return e.includes(t.nodeName)}function r(e){return e.children.length>1?!1:1===e.children.length&&""!==e.textContent.trim()?!1:0===e.children.length?""===e.textContent.trim():r(e.children[0])}function s(e){return e.nodeType===Node.TEXT_NODE}function a(e){return s(e)&&""===e.data}function l(e){return e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function c(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING}function u(e,t){return function(n){return n.nodeType===e.ELEMENT_NODE&&n.className===t}}function d(e){return u(Node,"scribe-marker")(e)}function h(e){return u(Node,"caret-position")(e)}function m(e){var t=e.firstChild;return t&&"BR"!==t.nodeName?m(t):e}function p(e,t){return t.parentNode.insertBefore(e,t.nextSibling)}function f(e){return e.parentNode.removeChild(e)}function g(e,t,n){function i(e){return t===e}if(!i(e))for(var o=e.parentNode;o&&!i(o);){if(n(o))return o;o=o.parentNode}}function _(e){for(var t=n.List();e=e.nextSibling;)t=t.push(e);return t}function v(e,t){return e[0].parentNode.insertBefore(t,e[0]),e.forEach(function(e){t.appendChild(e)}),t}function b(e,t){for(;t.childNodes.length>0;)e.insertBefore(t.childNodes[0],t);e.removeChild(t)}function y(t){function i(e,t){return window.getComputedStyle(t).lineHeight===e.lineHeight}var o=n.List(t.querySelectorAll(e.map(function(e){return e+'[style*="line-height"]'}).join(",")));o=o.filter(i.bind(null,window.getComputedStyle(t)));var r=n.List();o.forEach(function(e){e.style.lineHeight=null,e.getAttribute("style")||e.removeAttribute("style"),"SPAN"===e.nodeName&&0===e.attributes.length&&(r=r.push(e))}),r.forEach(function(e){b(e.parentNode,e)})}return{isInlineElement:o,isBlockElement:i,isEmptyInlineElement:r,isText:s,isEmptyTextNode:a,isFragment:l,isBefore:c,isSelectionMarkerNode:d,isCaretPositionNode:h,firstDeepestChild:m,insertAfter:p,removeNode:f,getAncestor:g,nextSiblings:_,wrap:v,unwrap:b,removeChromeArtifacts:y,elementHasClass:u}}),define("tao/lib/scribe/plugins/core/formatters/html/ensure-selectable-containers",["../../../../node","../../../../immutable"],function(e,t){function n(t){return e.isCaretPositionNode(t)?!0:""===t.parentNode.textContent.trim()}function i(t){function r(t){return 0===t.children.length&&e.isBlockElement(t)||1===t.children.length&&e.isSelectionMarkerNode(t.children[0])?!0:e.isBlockElement(t)||0!==t.children.length?!1:n(t)}for(var s=t.firstElementChild;s;)e.isSelectionMarkerNode(s)||(r(s)&&""===s.textContent.trim()&&!o.includes(s.nodeName)?s.appendChild(document.createElement("br")):s.children.length>0&&i(s)),s=s.nextElementSibling}var o=t.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(e){e.registerHTMLFormatter("normalize",function(e){var t=document.createElement("div");return t.innerHTML=e,i(t),t.innerHTML})}}}),define("tao/lib/scribe/plugins/core/inline-elements-mode",[],function(){function e(e){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);t.nextNode();)if(t.currentNode&&(~["br"].indexOf(t.currentNode.nodeName.toLowerCase())||t.currentNode.length>0))return!0;return!1}return function(){return function(t){t.el.addEventListener("keydown",function(n){if(13===t.getEventCode(n)){var i=new t.api.Selection,o=i.range,r=i.getContaining(function(e){return"LI"===e.nodeName||/^(H[1-6])$/.test(e.nodeName)});r||(n.preventDefault(),t.transactionManager.run(function(){"BR"===t.el.lastChild.nodeName&&t.el.removeChild(t.el.lastChild);var n=document.createElement("br");o.insertNode(n),o.collapse(!1);var r=o.cloneRange();r.setEndAfter(t.el.lastChild,0);var s=r.cloneContents();if(!e(s)){var a=document.createElement("br");o.insertNode(a)}var l=o.cloneRange();l.setStartAfter(n,0),l.setEndAfter(n,0),i.selection.removeAllRanges(),i.selection.addRange(l)}))}}.bind(this)),""===t.getHTML().trim()&&t.setContent("")}}}),define("tao/lib/scribe/plugins/core/plugins",["./set-root-p-element","./formatters/html/enforce-p-elements","./formatters/html/ensure-selectable-containers","./inline-elements-mode"],function(e,t,n,i){return{setRootPElement:e,enforcePElements:t,ensureSelectableContainers:n,inlineElementsMode:i}}),define("tao/lib/scribe/plugins/core/commands/indent",[],function(){return function(){return function(e){var t=new e.api.Command("indent");t.queryEnabled=function(){var t=new e.api.Selection,n=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!n},e.commands.indent=t}}}),define("tao/lib/scribe/plugins/core/commands/insert-list",["../../../immutable"],function(e){return function(){return function(t){var n=t.node,i=function(e){t.api.Command.call(this,e)};i.prototype=Object.create(t.api.Command.prototype),i.prototype.constructor=i,i.prototype.execute=function(i){function o(e){if(e.size){for(var t=document.createElement(a.nodeName);e.size;)t.appendChild(e.first()),e=e.shift();a.parentNode.insertBefore(t,a.nextElementSibling)}}if(this.queryState()){var r=new t.api.Selection,s=r.range,a=r.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName}),l=r.getContaining(function(e){return"LI"===e.nodeName});t.transactionManager.run(function(){if(l){var t=n.nextSiblings(l);o(t),r.placeMarkers();var i=document.createElement("p");i.innerHTML=l.innerHTML,a.parentNode.insertBefore(i,a.nextElementSibling),l.parentNode.removeChild(l)}else{var c=e.List(a.querySelectorAll("li")).filter(function(e){return s.intersectsNode(e)}),u=c.last(),d=n.nextSiblings(u);o(d),r.placeMarkers();var h=document.createDocumentFragment();c.forEach(function(e){var t=document.createElement("p");t.innerHTML=e.innerHTML,h.appendChild(t)}),a.parentNode.insertBefore(h,a.nextElementSibling),c.forEach(function(e){e.parentNode.removeChild(e)})}0===a.childNodes.length&&a.parentNode.removeChild(a),r.selectMarkers()}.bind(this))}else t.api.Command.prototype.execute.call(this,i)},i.prototype.queryEnabled=function(){return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()},t.commands.insertOrderedList=new i("insertOrderedList"),t.commands.insertUnorderedList=new i("insertUnorderedList")}}}),define("tao/lib/scribe/plugins/core/commands/outdent",[],function(){return function(){return function(e){var t=new e.api.Command("outdent");t.queryEnabled=function(){var t=new e.api.Selection,n=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!n},e.commands.outdent=t}}}),define("tao/lib/scribe/plugins/core/commands/redo",[],function(){return function(){return function(e){var t=new e.api.Command("redo");t.execute=function(){e.undoManager.redo()},t.queryEnabled=function(){return e.undoManager.position>0},e.commands.redo=t,e.options.undo.enabled&&e.el.addEventListener("keydown",function(n){n.shiftKey&&(n.metaKey||n.ctrlKey)&&90===e.getEventCode(n)&&(n.preventDefault(),t.execute())})}}}),define("tao/lib/scribe/plugins/core/commands/subscript",[],function(){return function(){return function(e){var t=new e.api.Command("subscript");e.commands.subscript=t}}}),define("tao/lib/scribe/plugins/core/commands/superscript",[],function(){return function(){return function(e){var t=new e.api.Command("superscript");e.commands.superscript=t}}}),define("tao/lib/scribe/plugins/core/commands/undo",[],function(){return function(){return function(e){var t=new e.api.Command("undo");t.execute=function(){e.undoManager.undo()},t.queryEnabled=function(){return e.undoManager.position<e.undoManager.length},e.commands.undo=t,e.options.undo.enabled&&e.el.addEventListener("keydown",function(n){n.shiftKey||!n.metaKey&&!n.ctrlKey||90!==e.getEventCode(n)||(n.preventDefault(),t.execute())})}}}),define("tao/lib/scribe/plugins/core/commands",["./commands/indent","./commands/insert-list","./commands/outdent","./commands/redo","./commands/subscript","./commands/superscript","./commands/undo"],function(e,t,n,i,o,r,s){return{indent:e,insertList:t,outdent:n,redo:i,subscript:o,superscript:r,undo:s}}),define("tao/lib/scribe/plugins/core/formatters/html/replace-nbsp-chars",[],function(){return function(){return function(e){var t=/(\s|&nbsp;)+/g;e.registerHTMLFormatter("export",function(e){return e.replace(t," ")})}}}),define("tao/lib/scribe/lodash-amd/modern/internal/baseToString",[],function(){function e(e){return"string"==typeof e?e:null==e?"":e+""}return e}),define("tao/lib/scribe/lodash-amd/modern/internal/escapeHtmlChar",[],function(){function e(e){return t[e]}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return e}),define("tao/lib/scribe/lodash-amd/modern/string/escape",["../internal/baseToString","../internal/escapeHtmlChar"],function(e,t){function n(n){return n=e(n),n&&o.test(n)?n.replace(i,t):n}var i=/[&<>"'`]/g,o=RegExp(i.source);return n}),define("tao/lib/scribe/plugins/core/formatters/plain-text/escape-html-characters",["tao/lib/scribe/lodash-amd/modern/string/escape"],function(e){return function(){return function(t){t.registerPlainTextFormatter(e)
}}}),define("tao/lib/scribe/plugins/core/formatters",["./formatters/html/replace-nbsp-chars","./formatters/plain-text/escape-html-characters"],function(e,t){return{replaceNbspCharsFormatter:e,escapeHtmlCharactersFormatter:t}}),define("tao/lib/scribe/mutations",[],function(){function e(e){return"undefined"==typeof e?function(){return{observe:function(){}}}:e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver}return{determineMutationObserver:e}}),define("tao/lib/scribe/dom-observer",["./node","./mutations"],function(e,t){function n(t){return!e.isEmptyTextNode(t)&&!e.isSelectionMarkerNode(t)}function i(e){return e.some(function(e){return Array.prototype.some.call(e.addedNodes,n)||Array.prototype.some.call(e.removedNodes,n)})}function o(e,t){var n=!1,o=new s(function(e){if(!n&&i(e)){n=!0;try{t()}catch(o){throw o}finally{setTimeout(function(){n=!1},0)}}});return o.observe(e,{childList:!0,subtree:!0}),o}var r="object"==typeof window?window:void 0,s=t.determineMutationObserver(r);return o}),define("tao/lib/scribe/plugins/core/events",["../../dom-observer","../../immutable"],function(e,t){return function(){return function(n){var i=n.node;n.el.addEventListener("focus",function(){var e=new n.api.Selection;if(e.range){var t=n.allowsBlockElements()&&e.range.startContainer===n.el;if(t){var o=i.firstDeepestChild(n.el),r=e.range;r.setStart(o,0),r.setEnd(o,0),e.selection.removeAllRanges(),e.selection.addRange(r)}}}.bind(n));var o=function(){if(!n._skipFormatters){var e=new n.api.Selection,t=e.range,i=function(){t&&e.placeMarkers(),n.setHTML(n._htmlFormatterFactory.format(n.getHTML())),e.selectMarkers()}.bind(n);n.transactionManager.run(i)}delete n._skipFormatters}.bind(n);e(n.el,o),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(e){if(13===n.getEventCode(e)){var t=new n.api.Selection,i=t.range,o=t.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});if(o&&i.collapsed){var r=i.cloneRange();r.setEndAfter(o,0);var s=r.cloneContents();""===s.firstChild.textContent&&(e.preventDefault(),n.transactionManager.run(function(){var e=document.createElement("p"),n=document.createElement("br");e.appendChild(n),o.parentNode.insertBefore(e,o.nextElementSibling),i.setStart(e,0),i.setEnd(e,0),t.selection.removeAllRanges(),t.selection.addRange(i)}))}}}),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(e){var t=n.getEventCode(e);if(13===t||8===t){var i=new n.api.Selection,o=i.range;if(o.collapsed){var r=i.getContaining(function(e){return"LI"===e.nodeName});if(r&&""===r.textContent.trim()){e.preventDefault();var s=i.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName}),a=n.getCommand("OL"===s.nodeName?"insertOrderedList":"insertUnorderedList");a.event=e,a.execute()}}}}),n.el.addEventListener("paste",function(e){if(e.clipboardData&&e.clipboardData.types.length>0)e.preventDefault(),t.List(e.clipboardData.types).includes("text/html")?n.insertHTML(e.clipboardData.getData("text/html")):n.insertPlainText(e.clipboardData.getData("text/plain"));else{var i=new n.api.Selection;i.placeMarkers();var o=document.createElement("div");document.body.appendChild(o),o.setAttribute("contenteditable",!0),o.focus(),setTimeout(function(){var e=o.innerHTML;o.parentNode.removeChild(o),i.selectMarkers(),n.el.focus(),n.insertHTML(e)},1)}})}}}),define("tao/lib/scribe/plugins/core/patches/commands/bold",[],function(){return function(){return function(e){var t=new e.api.CommandPatch("bold");t.queryEnabled=function(){var t=new e.api.Selection,n=t.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});return e.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!n},e.commandPatches.bold=t}}}),define("tao/lib/scribe/plugins/core/patches/commands/indent",[],function(){var e="﻿";return function(){return function(t){var n=new t.api.CommandPatch("indent");n.execute=function(n){t.transactionManager.run(function(){var i=new t.api.Selection,o=i.range,r="P"===o.commonAncestorContainer.nodeName&&"<br>"===o.commonAncestorContainer.innerHTML;if(r){var s=document.createTextNode(e);o.insertNode(s),o.setStart(s,0),o.setEnd(s,0),i.selection.removeAllRanges(),i.selection.addRange(o)}t.api.CommandPatch.prototype.execute.call(this,n),i=new t.api.Selection;var a=i.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});a&&a.removeAttribute("style")}.bind(this))},t.commandPatches.indent=n}}}),define("tao/lib/scribe/plugins/core/patches/commands/insert-html",[],function(){return function(){return function(e){var t=new e.api.CommandPatch("insertHTML"),n=e.node;t.execute=function(t){e.transactionManager.run(function(){e.api.CommandPatch.prototype.execute.call(this,t),n.removeChromeArtifacts(e.el)}.bind(this))},e.commandPatches.insertHTML=t}}}),define("tao/lib/scribe/plugins/core/patches/commands/insert-list",[],function(){return function(){return function(e){var t=e.node,n=function(t){e.api.CommandPatch.call(this,t)};n.prototype=Object.create(e.api.CommandPatch.prototype),n.prototype.constructor=n,n.prototype.execute=function(n){e.transactionManager.run(function(){if(e.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var i=new e.api.Selection,o=i.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName});if(o.nextElementSibling&&0===o.nextElementSibling.childNodes.length&&t.removeNode(o.nextElementSibling),o){var r=o.parentNode;r&&/^(H[1-6]|P)$/.test(r.nodeName)&&(i.placeMarkers(),t.insertAfter(o,r),i.selectMarkers(),2===r.childNodes.length&&t.isEmptyTextNode(r.firstChild)&&t.removeNode(r),0===r.childNodes.length&&t.removeNode(r))}t.removeChromeArtifacts(o)}}.bind(this))},n.prototype.queryState=function(){try{return e.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(t){if("NS_ERROR_UNEXPECTED"==t.name)return!1;throw t}},e.commandPatches.insertOrderedList=new n("insertOrderedList"),e.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}),define("tao/lib/scribe/plugins/core/patches/commands/outdent",[],function(){return function(){return function(e){var t=e.node,n=new e.api.CommandPatch("outdent");n.execute=function(){e.transactionManager.run(function(){var n=new e.api.Selection,i=n.range,o=n.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});if("BLOCKQUOTE"===i.commonAncestorContainer.nodeName){n.placeMarkers(),n.selectMarkers(!0);var r=i.cloneContents();o.parentNode.insertBefore(r,o),i.deleteContents(),n.selectMarkers(),""===o.textContent&&o.parentNode.removeChild(o)}else{var s=n.getContaining(function(e){return"P"===e.nodeName});if(s){var a=t.nextSiblings(s);if(a.size){for(var l=document.createElement(o.nodeName);a.size;)l.appendChild(a.first()),a=a.shift();o.parentNode.insertBefore(l,o.nextElementSibling)}n.placeMarkers(),o.parentNode.insertBefore(s,o.nextElementSibling),n.selectMarkers(),""===o.innerHTML&&o.parentNode.removeChild(o)}else e.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},e.commandPatches.outdent=n}}}),define("tao/lib/scribe/plugins/core/patches/commands/create-link",[],function(){return function(){return function(e){var t=new e.api.CommandPatch("createLink");e.commandPatches.createLink=t,t.execute=function(t){var n=new e.api.Selection;if(n.range.collapsed){var i=document.createElement("a");i.setAttribute("href",t),i.textContent=t,n.range.insertNode(i);var o=document.createRange();o.setStartBefore(i),o.setEndAfter(i),n.selection.removeAllRanges(),n.selection.addRange(o)}else e.api.CommandPatch.prototype.execute.call(this,t)}}}}),define("tao/lib/scribe/plugins/core/patches/events",[],function(){return function(){return function(e){var t=e.node;e.allowsBlockElements()&&e.el.addEventListener("keyup",function(n){var i=e.getEventCode(n);if(8===i||46===i){var o=new e.api.Selection,r=o.getContaining(function(e){return"P"===e.nodeName});r&&e.transactionManager.run(function(){o.placeMarkers(),t.removeChromeArtifacts(r),o.selectMarkers()},!0)}})}}}),define("tao/lib/scribe/plugins/core/patches",["./patches/commands/bold","./patches/commands/indent","./patches/commands/insert-html","./patches/commands/insert-list","./patches/commands/outdent","./patches/commands/create-link","./patches/events"],function(e,t,n,i,o,r,s){return{commands:{bold:e,indent:t,insertHTML:n,insertList:i,outdent:o,createLink:r},events:s}}),define("tao/lib/scribe/api/command-patch",[],function(){return function(e){function t(e){this.commandName=e}return t.prototype.execute=function(t){e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},t.prototype.queryState=function(){try{return document.queryCommandState(this.commandName)}catch(e){return!1}},t.prototype.queryEnabled=function(){try{return document.queryCommandEnabled(this.commandName)}catch(e){return!1}},t}}),define("tao/lib/scribe/api/command",[],function(){return function(e){function t(t){this.commandName=t,this.patch=e.commandPatches[this.commandName]}return t.prototype.execute=function(t){this.patch?this.patch.execute(t):e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},t.prototype.queryState=function(){if(this.patch)return this.patch.queryState();try{return document.queryCommandState(this.commandName)}catch(e){return!1}},t.prototype.queryEnabled=function(){if(this.patch)return this.patch.queryEnabled();try{return document.queryCommandEnabled(this.commandName)}catch(e){return!1}},t}}),define("tao/lib/scribe/api/simple-command",[],function(){return function(e,t){function n(e,n){t.api.Command.call(this,e),this._nodeName=n}return n.prototype=Object.create(e.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var e=new t.api.Selection;return t.api.Command.prototype.queryState.call(this)&&!!e.getContaining(function(e){return e.nodeName===this._nodeName}.bind(this))},n}}),define("tao/lib/scribe/api",["./api/command-patch","./api/command","./api/scribe-selection","./api/simple-command"],function(e,t,n,i){return function(o){this.CommandPatch=e(o),this.Command=t(o),this.Selection=n(o),this.SimpleCommand=i(this,o)}}),define("tao/lib/scribe/lodash-amd/modern/internal/baseCopy",[],function(){function e(e,t,n){n||(n=t,t={});for(var i=-1,o=n.length;++i<o;){var r=n[i];t[r]=e[r]}return t}return e}),define("tao/lib/scribe/lodash-amd/modern/internal/isLength",[],function(){function e(e){return"number"==typeof e&&e>-1&&e%1==0&&t>=e}var t=Math.pow(2,53)-1;return e}),define("tao/lib/scribe/lodash-amd/modern/string/escapeRegExp",["../internal/baseToString"],function(e){function t(t){return t=e(t),t&&i.test(t)?t.replace(n,"\\$&"):t}var n=/[.*+?^${}()|[\]\/\\]/g,i=RegExp(n.source);return t}),define("tao/lib/scribe/lodash-amd/modern/internal/isObjectLike",[],function(){function e(e){return e&&"object"==typeof e||!1}return e}),define("tao/lib/scribe/lodash-amd/modern/lang/isNative",["../string/escapeRegExp","../internal/isObjectLike"],function(e,t){function n(e){return null==e?!1:a.call(e)==i?l.test(s.call(e)):t(e)&&o.test(e)||!1}var i="[object Function]",o=/^\[object .+?Constructor\]$/,r=Object.prototype,s=Function.prototype.toString,a=r.toString,l=RegExp("^"+e(a).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return n}),define("tao/lib/scribe/lodash-amd/modern/lang/isObject",[],function(){function e(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}return e}),define("tao/lib/scribe/lodash-amd/modern/lang/isArguments",["../internal/isLength","../internal/isObjectLike"],function(e,t){function n(n){var r=t(n)?n.length:i;return e(r)&&s.call(n)==o||!1}var i,o="[object Arguments]",r=Object.prototype,s=r.toString;return n}),define("tao/lib/scribe/lodash-amd/modern/lang/isArray",["../internal/isLength","./isNative","../internal/isObjectLike"],function(e,t,n){var i="[object Array]",o=Object.prototype,r=o.toString,s=t(s=Array.isArray)&&s,a=s||function(t){return n(t)&&e(t.length)&&r.call(t)==i||!1};return a}),define("tao/lib/scribe/lodash-amd/modern/internal/isIndex",[],function(){function e(e,n){return e=+e,n=null==n?t:n,e>-1&&e%1==0&&n>e}var t=Math.pow(2,53)-1;return e}),define("tao/lib/scribe/lodash-amd/modern/internal/root",[],function(){var e={"function":!0,object:!0},t=e[typeof exports]&&exports&&!exports.nodeType&&exports,n=e[typeof module]&&module&&!module.nodeType&&module,i=t&&n&&"object"==typeof global&&global,o=e[typeof window]&&window,r=i||o!==(this&&this.window)&&o||this;return r}),define("tao/lib/scribe/lodash-amd/modern/support",["./lang/isNative","./internal/root"],function(e,t){var n=/\bthis\b/,i=Object.prototype,o=(o=t.window)&&o.document,r=i.propertyIsEnumerable,s={};return function(){s.funcDecomp=!e(t.WinRTError)&&n.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===o.createDocumentFragment().nodeType}catch(i){s.dom=!1}try{s.nonEnumArgs=!r.call(arguments,1)}catch(i){s.nonEnumArgs=!0}}(0,0),s}),define("tao/lib/scribe/lodash-amd/modern/object/keysIn",["../lang/isArguments","../lang/isArray","../internal/isIndex","../internal/isLength","../lang/isObject","../support"],function(e,t,n,i,o,r){function s(s){if(null==s)return[];o(s)||(s=Object(s));var a=s.length;a=a&&i(a)&&(t(s)||r.nonEnumArgs&&e(s))&&a||0;for(var c=s.constructor,u=-1,d="function"==typeof c&&c.prototype===s,h=Array(a),m=a>0;++u<a;)h[u]=u+"";for(var p in s)m&&n(p,a)||"constructor"==p&&(d||!l.call(s,p))||h.push(p);return h}var a=Object.prototype,l=a.hasOwnProperty;return s}),define("tao/lib/scribe/lodash-amd/modern/internal/shimKeys",["../lang/isArguments","../lang/isArray","./isIndex","./isLength","../object/keysIn","../support"],function(e,t,n,i,o,r){function s(s){for(var a=o(s),c=a.length,u=c&&s.length,d=u&&i(u)&&(t(s)||r.nonEnumArgs&&e(s)),h=-1,m=[];++h<c;){var p=a[h];(d&&n(p,u)||l.call(s,p))&&m.push(p)}return m}var a=Object.prototype,l=a.hasOwnProperty;return s}),define("tao/lib/scribe/lodash-amd/modern/object/keys",["../internal/isLength","../lang/isNative","../lang/isObject","../internal/shimKeys"],function(e,t,n,i){var o=t(o=Object.keys)&&o,r=o?function(t){if(t)var r=t.constructor,s=t.length;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&s&&e(s)?i(t):n(t)?o(t):[]}:i;return r}),define("tao/lib/scribe/lodash-amd/modern/internal/baseAssign",["./baseCopy","../object/keys"],function(e,t){function n(n,i,o){var r=t(i);if(!o)return e(i,n,r);for(var s=-1,a=r.length;++s<a;){var l=r[s],c=n[l],u=o(c,i[l],l,n,i);(u===u?u===c:c!==c)&&("undefined"!=typeof c||l in n)||(n[l]=u)}return n}return n}),define("tao/lib/scribe/lodash-amd/modern/utility/identity",[],function(){function e(e){return e}return e}),define("tao/lib/scribe/lodash-amd/modern/internal/bindCallback",["../utility/identity"],function(e){function t(t,n,i){if("function"!=typeof t)return e;if("undefined"==typeof n)return t;switch(i){case 1:return function(e){return t.call(n,e)};case 3:return function(e,i,o){return t.call(n,e,i,o)};case 4:return function(e,i,o,r){return t.call(n,e,i,o,r)};case 5:return function(e,i,o,r,s){return t.call(n,e,i,o,r,s)}}return function(){return t.apply(n,arguments)}}return t}),define("tao/lib/scribe/lodash-amd/modern/internal/isIterateeCall",["./isIndex","./isLength","../lang/isObject"],function(e,t,n){function i(i,o,r){if(!n(r))return!1;var s=typeof o;if("number"==s)var a=r.length,l=t(a)&&e(o,a);else l="string"==s&&o in r;if(l){var c=r[o];return i===i?i===c:c!==c}return!1}return i}),define("tao/lib/scribe/lodash-amd/modern/internal/createAssigner",["./bindCallback","./isIterateeCall"],function(e,t){function n(n){return function(){var i=arguments,o=i.length,r=i[0];if(2>o||null==r)return r;var s=i[o-2],a=i[o-1],l=i[3];o>3&&"function"==typeof s?(s=e(s,a,5),o-=2):(s=o>2&&"function"==typeof a?a:null,o-=s?1:0),l&&t(i[1],i[2],l)&&(s=3==o?null:s,o=2);for(var c=0;++c<o;){var u=i[c];u&&n(r,u,s)}return r}}return n}),define("tao/lib/scribe/lodash-amd/modern/object/assign",["../internal/baseAssign","../internal/createAssigner"],function(e,t){var n=t(e);return n}),define("tao/lib/scribe/transaction-manager",["./lodash-amd/modern/object/assign"],function(e){return function(t){function n(){this.history=[]}return e(n.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(t.pushHistory(),t.trigger("content-changed"))},run:function(e,n){this.start();try{e&&e()}finally{t._forceMerge=n===!0,this.end(),t._forceMerge=!1}}}),n}}),define("tao/lib/scribe/undo-manager",["./immutable"],function(e){function t(t,n){this._stack=e.List(),this._limit=t,this._fireEvent="undefined"!=typeof CustomEvent&&n&&n.dispatchEvent,this._ush=n,this.position=0,this.length=0}return t.prototype.transact=function(t,n){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");t.execute(),this.position>0&&this.clearRedo();var i;n&&this.length?(i=this._stack.first().push(t),this._stack=this._stack.shift().unshift(i)):(i=e.List.of(t),this._stack=this._stack.unshift(i),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",i)},t.prototype.undo=function(){if(!(this.position>=this.length)){for(var e=this._stack.get(this.position),t=e.size;t--;)e.get(t).undo();this.position++,this._dispatch("undo",e)}},t.prototype.redo=function(){if(0!==this.position){this.position--;for(var e=this._stack.get(this.position),t=0;t<e.size;t++)e.get(t).redo();this._dispatch("redo",e)}},t.prototype.item=function(e){return e>=0&&e<this.length?this._stack.get(e).toArray():null},t.prototype.clearUndo=function(e){this._stack=this._stack.take(void 0!==e?e:this.position),this.length=this._stack.size},t.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},t.prototype._dispatch=function(e,t){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(e,{detail:{transactions:t.toArray()},bubbles:!0,cancelable:!1}))},t}),define("tao/lib/scribe/event-emitter",["./immutable"],function(e){function t(){this._listeners={}}return t.prototype.on=function(t,n){var i=this._listeners[t]||e.Set();this._listeners[t]=i.add(n)},t.prototype.off=function(t,n){var i=this._listeners[t]||e.Set();this._listeners[t]=n?i.delete(n):i.clear()},t.prototype.trigger=function(t,n){for(var i=t.split(":");i.length;){var o=i.join(":"),r=this._listeners[o]||e.Set();r.forEach(function(e){e.apply(null,n)}),i.splice(i.length-1,1)}},t}),define("tao/lib/scribe/lodash-amd/modern/internal/arrayCopy",[],function(){function e(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return e}),define("tao/lib/scribe/lodash-amd/modern/internal/assignDefaults",[],function(){function e(e,t){return"undefined"==typeof e?t:e}return e}),define("tao/lib/scribe/lodash-amd/modern/object/defaults",["../internal/arrayCopy","./assign","../internal/assignDefaults"],function(e,t,n){function i(i){if(null==i)return i;var r=e(arguments);return r.push(n),t.apply(o,r)}var o;return i}),define("tao/lib/scribe/config",["./lodash-amd/modern/object/defaults"],function(e){function t(t){var n=t||{};return n.defaultPlugins&&(n.defaultPlugins=n.defaultPlugins.filter(o(a.defaultPlugins))),n.defaultFormatters&&(n.defaultFormatters=n.defaultFormatters.filter(o(a.defaultFormatters))),Object.freeze(e(n,a))}function n(e){return function(t,n){return t===e?-1:n===e?1:0}}function i(e){return function(t){return-1!==(e?r:s).indexOf(t)}}function o(e){return function(t){return-1!==e.indexOf(t)}}var r=["setRootPElement","enforcePElements","ensureSelectableContainers"],s=["inlineElementsMode"],a={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:r.concat(s),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:a,checkOptions:t,sortByPlugin:n,filterByBlockLevelMode:i,filterByPluginExists:o}}),define("tao/lib/scribe/scribe",["./plugins/core/plugins","./plugins/core/commands","./plugins/core/formatters","./plugins/core/events","./plugins/core/patches","./api","./transaction-manager","./undo-manager","./event-emitter","./node","./immutable","./config"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(c,h){l.call(this),this.el=c,this.commands={},this.options=d.checkOptions(h),this.commandPatches={},this._plainTextFormatterFactory=new m,this._htmlFormatterFactory=new p,this.api=new r(this),this.Immutable=u;var f=s(this);this.transactionManager=new f,this.undoManager=!1,this.options.undo.enabled&&(this.undoManager=this.options.undo.manager?this.options.undo.manager:new a(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1);var g=u.OrderedSet(this.options.defaultPlugins).sort(d.sortByPlugin("setRootPElement")).filter(d.filterByBlockLevelMode(this.allowsBlockElements())).map(function(t){return e[t]}),_=u.List(this.options.defaultFormatters).filter(function(e){return!!n[e]}).map(function(e){return n[e]}),v=u.List.of(o.events),b=u.List(this.options.defaultCommandPatches).map(function(e){return o.commands[e]}),y=u.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(e){return t[e]}),C=u.List().concat(g,_,v,b,y);C.forEach(function(e){this.use(e())}.bind(this)),this.use(i())}function m(){this.formatters=u.List()}function p(){this.formatters={sanitize:u.List(),normalize:u.List(),"export":u.List()}}return h.prototype=Object.create(l.prototype),h.prototype.node=c,h.prototype.element=h.prototype.node,h.prototype.use=function(e){return e(this),this},h.prototype.setHTML=function(e,t){this._lastItem.content=e,t&&(this._skipFormatters=!0),this.el.innerHTML!==e&&(this.el.innerHTML=e)},h.prototype.getHTML=function(){return this.el.innerHTML},h.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},h.prototype.getTextContent=function(){return this.el.textContent},h.prototype.pushHistory=function(){var e=this;if(e.options.undo.enabled){var t=e._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(e.getHTML()!==t){var n=new e.api.Selection;n.placeMarkers();var i=e.getHTML();n.removeMarkers();var o=e.undoManager.item(e.undoManager.position);return(e._merge||e._forceMerge)&&o&&e._lastItem==o[0]?e._lastItem.content=i:(e._lastItem={previousItem:e._lastItem,content:i,scribe:e,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},e.undoManager.transact(e._lastItem,!1)),clearTimeout(e._mergeTimer),e._merge=!0,e._mergeTimer=setTimeout(function(){e._merge=!1},e.options.undo.interval),!0}}return!1},h.prototype.getCommand=function(e){return this.commands[e]||this.commandPatches[e]||new this.api.Command(e)},h.prototype.restoreFromHistory=function(e){this._lastItem=e,this.setHTML(e.content,!0);var t=new this.api.Selection;t.selectMarkers(),this.trigger("content-changed")},h.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},h.prototype.setContent=function(e){this.allowsBlockElements()||(e+="<br>"),this.setHTML(e),this.trigger("content-changed")},h.prototype.insertPlainText=function(e){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(e)+"</p>")},h.prototype.insertHTML=function(e){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(e))},h.prototype.isDebugModeEnabled=function(){return this.options.debug},h.prototype.registerHTMLFormatter=function(e,t){this._htmlFormatterFactory.formatters[e]=this._htmlFormatterFactory.formatters[e].push(t)},h.prototype.registerPlainTextFormatter=function(e){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(e)},h.prototype.getEventCode=function(e){return e.which||e.keyCode||0},m.prototype.format=function(e){var t=this.formatters.reduce(function(e,t){return t(e)},e);return t},p.prototype=Object.create(m.prototype),p.prototype.constructor=p,p.prototype.format=function(e){var t=this.formatters.sanitize.concat(this.formatters.normalize),n=t.reduce(function(e,t){return t(e)},e);return n},p.prototype.formatForExport=function(e){return this.formatters["export"].reduce(function(e,t){return t(e)},e)},h}),define("tao/lib/scribe/plugins/scribe-plugin-blockquote-command",[],function(){return function(){return function(e){var t=new e.api.SimpleCommand("blockquote","BLOCKQUOTE");t.execute=function(){var t=e.getCommand(this.queryState()?"outdent":"indent");t.execute()},t.queryEnabled=function(){var t=e.getCommand(this.queryState()?"outdent":"indent");return t.queryEnabled()},t.queryState=function(){var t=new e.api.Selection,n=t.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});return e.allowsBlockElements()&&!!n},e.commands.blockquote=t,e.allowsBlockElements()&&e.el.addEventListener("keydown",function(t){if(13===e.getEventCode(t)){var n=e.getCommand("blockquote");if(n.queryState()){var i=new e.api.Selection;i.isCaretOnNewLine()&&(t.preventDefault(),n.execute())}}})}}}),define("tao/lib/scribe/plugins/scribe-plugin-paragraph-command",[],function(){return function(){return function(e){var t,n,i,o;t="<p>",n="P",i="paragraph",o=new e.api.Command("formatBlock"),o.execute=e.allowsBlockElements()?function(){e.api.Command.prototype.execute.call(this,t)}:function(){var n,i,o,r;if(this.queryState()){for(e.api.Command.prototype.execute.call(this,"<div>"),n=new e.api.Selection,i=n.selection.anchorNode.parentNode,o=[],r=0;r<i.childNodes.length;++r)o.push(i.childNodes[r]),i.childNodes[r]===n.selection.anchorNode&&o.push(document.createElement("br"));for(;i.firstChild;)i.removeChild(i.firstChild);for(r=0;r<o.length;++r)i.appendChild(o[r])}else e.api.Command.prototype.execute.call(this,t)},o.queryState=function(){var t=new e.api.Selection;return t.getContaining(function(e){return e.nodeName===n})},o.queryEnabled=e.allowsBlockElements()?function(){var t=new e.api.Selection,n=t.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName});return e.api.Command.prototype.queryEnabled.apply(this,arguments)&&e.allowsBlockElements()&&!n}:function(){var t,n,i,o;return t=new e.api.Selection,n=t.range,i=t.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName}),o=""===n.commonAncestorContainer.toString()&&""===n.endContainer.toString()&&""===n.startContainer.toString(),e.api.Command.prototype.queryEnabled.apply(this,arguments)&&!i&&o},e.commands[i]=o}}}),define("tao/lib/scribe/plugins/scribe-plugin-code-command",[],function(){var e="code";return function(){return function(t){var n=new t.api.SimpleCommand(e,e.toUpperCase());n.execute=function(){t.transactionManager.run(function(){var n,i,o="sub",r="subscript";n=new t.api.Selection,n.placeMarkers(),i=t.getHTML(),i=i.replace(new RegExp("<"+e+">","gi"),"<"+o+">").replace(new RegExp("</"+e+">","gi"),"</"+o+">"),t.setHTML(i),n.selectMarkers(!0),document.execCommand(r,!1,null),i=t.getHTML(),i=i.replace(new RegExp("<"+o+">","gi"),"<"+e+">").replace(new RegExp("</"+o+">","gi"),"</"+e+">"),t.setHTML(i),n.selectMarkers(!1)})},n.queryState=function(){var e=new t.api.Selection;return!!e.getContaining(function(e){return e.nodeName===this._nodeName}.bind(this))},n.queryEnabled=function(){var e=new t.api.Selection,n=e.range;return!n.collapsed},t.commands.code=n}}}),define("lodash-amd/modern/internal/arrayCopy",[],function(){function e(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return e}),define("lodash-amd/modern/internal/isLength",[],function(){function e(e){return"number"==typeof e&&e>-1&&e%1==0&&t>=e}var t=Math.pow(2,53)-1;return e}),define("lodash-amd/modern/internal/baseValues",[],function(){function e(e,t){for(var n=-1,i=t.length,o=Array(i);++n<i;)o[n]=e[t[n]];return o}return e}),define("lodash-amd/modern/internal/baseToString",[],function(){function e(e){return"string"==typeof e?e:null==e?"":e+""}return e}),define("lodash-amd/modern/string/escapeRegExp",["../internal/baseToString"],function(e){function t(t){return t=e(t),t&&i.test(t)?t.replace(n,"\\$&"):t}var n=/[.*+?^${}()|[\]\/\\]/g,i=RegExp(n.source);return t}),define("lodash-amd/modern/internal/isObjectLike",[],function(){function e(e){return e&&"object"==typeof e||!1}return e}),define("lodash-amd/modern/lang/isNative",["../string/escapeRegExp","../internal/isObjectLike"],function(e,t){function n(e){return null==e?!1:a.call(e)==i?l.test(s.call(e)):t(e)&&o.test(e)||!1}var i="[object Function]",o=/^\[object .+?Constructor\]$/,r=Object.prototype,s=Function.prototype.toString,a=r.toString,l=RegExp("^"+e(a).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return n}),define("lodash-amd/modern/lang/isObject",[],function(){function e(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}return e}),define("lodash-amd/modern/lang/isArguments",["../internal/isLength","../internal/isObjectLike"],function(e,t){function n(n){var r=t(n)?n.length:i;return e(r)&&s.call(n)==o||!1}var i,o="[object Arguments]",r=Object.prototype,s=r.toString;return n}),define("lodash-amd/modern/lang/isArray",["../internal/isLength","./isNative","../internal/isObjectLike"],function(e,t,n){var i="[object Array]",o=Object.prototype,r=o.toString,s=t(s=Array.isArray)&&s,a=s||function(t){return n(t)&&e(t.length)&&r.call(t)==i||!1};return a}),define("lodash-amd/modern/internal/isIndex",[],function(){function e(e,n){return e=+e,n=null==n?t:n,e>-1&&e%1==0&&n>e}var t=Math.pow(2,53)-1;return e}),define("lodash-amd/modern/internal/root",[],function(){var e={"function":!0,object:!0},t=e[typeof exports]&&exports&&!exports.nodeType&&exports,n=e[typeof module]&&module&&!module.nodeType&&module,i=t&&n&&"object"==typeof global&&global,o=e[typeof window]&&window,r=i||o!==(this&&this.window)&&o||this;return r}),define("lodash-amd/modern/support",["./lang/isNative","./internal/root"],function(e,t){var n=/\bthis\b/,i=Object.prototype,o=(o=t.window)&&o.document,r=i.propertyIsEnumerable,s={};return function(){s.funcDecomp=!e(t.WinRTError)&&n.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===o.createDocumentFragment().nodeType}catch(i){s.dom=!1}try{s.nonEnumArgs=!r.call(arguments,1)}catch(i){s.nonEnumArgs=!0}}(0,0),s}),define("lodash-amd/modern/object/keysIn",["../lang/isArguments","../lang/isArray","../internal/isIndex","../internal/isLength","../lang/isObject","../support"],function(e,t,n,i,o,r){function s(s){if(null==s)return[];o(s)||(s=Object(s));var a=s.length;a=a&&i(a)&&(t(s)||r.nonEnumArgs&&e(s))&&a||0;for(var c=s.constructor,u=-1,d="function"==typeof c&&c.prototype===s,h=Array(a),m=a>0;++u<a;)h[u]=u+"";for(var p in s)m&&n(p,a)||"constructor"==p&&(d||!l.call(s,p))||h.push(p);return h}var a=Object.prototype,l=a.hasOwnProperty;return s}),define("lodash-amd/modern/internal/shimKeys",["../lang/isArguments","../lang/isArray","./isIndex","./isLength","../object/keysIn","../support"],function(e,t,n,i,o,r){function s(s){for(var a=o(s),c=a.length,u=c&&s.length,d=u&&i(u)&&(t(s)||r.nonEnumArgs&&e(s)),h=-1,m=[];++h<c;){var p=a[h];(d&&n(p,u)||l.call(s,p))&&m.push(p)}return m}var a=Object.prototype,l=a.hasOwnProperty;return s}),define("lodash-amd/modern/object/keys",["../internal/isLength","../lang/isNative","../lang/isObject","../internal/shimKeys"],function(e,t,n,i){var o=t(o=Object.keys)&&o,r=o?function(t){if(t)var r=t.constructor,s=t.length;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&s&&e(s)?i(t):n(t)?o(t):[]}:i;return r}),define("lodash-amd/modern/object/values",["../internal/baseValues","./keys"],function(e,t){function n(n){return e(n,t(n))}return n}),define("lodash-amd/modern/lang/toArray",["../internal/arrayCopy","../internal/isLength","../object/values"],function(e,t,n){function i(i){var o=i?i.length:0;return t(o)?o?e(i):[]:n(i)}return i}),define("tao/lib/scribe/plugins/scribe-plugin-curly-quotes/constants",[],function(){return{openDoubleCurly:"“",closeDoubleCurly:"”",openSingleCurly:"‘",closeSingleCurly:"’"}
}),define("tao/lib/scribe/plugins/scribe-plugin-curly-quotes/formatters",["../scribe-plugin-curly-quotes/constants"],function(e){function t(e){return/[^\s()]/.test(e)}function n(e,n){return function(i,o){o=o||"";var r=t(o);return r?o+n:o+e}}function i(t){if(/['"]/.test(t)){var o=t.replace(/([\s\S])?'/,n(e.openSingleCurly,e.closeSingleCurly)).replace(/([\s\S])?"/,n(e.openDoubleCurly,e.closeDoubleCurly));return i(o)}return t}return{convert:i}}),define("tao/lib/scribe/plugins/scribe-plugin-curly-quotes",["lodash-amd/modern/lang/toArray","./scribe-plugin-curly-quotes/constants","./scribe-plugin-curly-quotes/formatters"],function(e,t,n){return function(){return function(t){function i(e){var t=document.createElement("div");return t.innerHTML=e,o(t,function(e,t){var i=(e+t).split(/(<[^>]+?>(?:.*<\/[^>]+?>)?)/);return i.map(function(e){return/^</.test(e)?e:n.convert(e)}).join("").slice(e.length)}),t.innerHTML}function o(t,n){var i=e(t.children).filter(a.isBlockElement);i.length?i.forEach(function(e){o(e,n)}):r(t,n)}function r(e,t){for(var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),i=n.firstChild(),o="";i;)i.previousSibling&&"BR"===i.previousSibling.nodeName&&(o=""),i.data=t(o,i.data),o+=i.data,i=n.nextSibling()}var s,a=t.node;t.el.addEventListener("keypress",function(e){var n={34:'"',39:"'"};s=n[t.getEventCode(e)]}),t.el.addEventListener("input",function(){if(s){var e=new t.api.Selection,n=t.allowsBlockElements()?e.getContaining(a.isBlockElement):t.el;e.placeMarkers(),n.innerHTML=i(n.innerHTML),e.selectMarkers(),s=void 0}}),t.registerHTMLFormatter("normalize",i)}}}),define("tao/lib/scribe/plugins/scribe-plugin-formatter-plain-text-convert-new-lines-to-html",[],function(){return function(){return function(e){e.registerPlainTextFormatter(function(e){return e.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}),define("tao/lib/scribe/plugins/scribe-plugin-heading-command",[],function(){return function(e){return function(t){var n="<h"+e+">",i="H"+e,o="h"+e,r=new t.api.Command("formatBlock");r.execute=function(){this.queryState()?t.api.Command.prototype.execute.call(this,"<p>"):t.api.Command.prototype.execute.call(this,n)},r.queryState=function(){var e=new t.api.Selection;return!!e.getContaining(function(e){return e.nodeName===i})},r.queryEnabled=function(){var e=new t.api.Selection,n=e.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName});return t.api.Command.prototype.queryEnabled.apply(this,arguments)&&t.allowsBlockElements()&&!n},t.commands[o]=r}}}),define("tao/lib/scribe/plugins/scribe-plugin-intelligent-unlink-command",[],function(){return function(){return function(e){var t=e.element,n=new e.api.Command("unlink");n.execute=function(){var n=new e.api.Selection;n.selection.isCollapsed?e.transactionManager.run(function(){var e=n.getContaining(function(e){return"A"===e.nodeName});e&&(n.placeMarkers(),t.unwrap(e.parentNode,e),n.selectMarkers())}):e.api.Command.prototype.execute.apply(this,arguments)},n.queryEnabled=function(){var t=new e.api.Selection;return t.selection.isCollapsed?!!t.getContaining(function(e){return"A"===e.nodeName}):e.api.Command.prototype.queryEnabled.apply(this,arguments)},e.commands.unlink=n}}}),define("lodash-amd/modern/internals/isNative",[],function(){function e(e){return"function"==typeof e&&i.test(e)}var t=Object.prototype,n=t.toString,i=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}),define("lodash-amd/modern/internals/objectTypes",[],function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}),define("lodash-amd/modern/objects/isObject",["../internals/objectTypes"],function(e){function t(t){return!(!t||!e[typeof t])}return t}),define("lodash-amd/modern/utilities/noop",[],function(){function e(){}return e}),define("lodash-amd/modern/internals/baseCreate",["./isNative","../objects/isObject","../utilities/noop"],function(e,t){function n(e){return t(e)?i(e):{}}var i=e(i=Object.create)&&i;return i||(n=function(){function e(){}return function(n){if(t(n)){e.prototype=n;var i={};e.prototype=null}return i||window.Object()}}()),n}),define("lodash-amd/modern/internals/setBindData",["./isNative","../utilities/noop"],function(e,t){var n={configurable:!1,enumerable:!1,value:null,writable:!1},i=function(){try{var t={},n=e(n=Object.defineProperty)&&n,i=n(t,t,t)&&n}catch(o){}return i}(),o=i?function(e,t){n.value=t,i(e,"__bindData__",n)}:t;return o}),define("lodash-amd/modern/internals/slice",[],function(){function e(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,o=n-t||0,r=Array(0>o?0:o);++i<o;)r[i]=e[t+i];return r}return e}),define("lodash-amd/modern/internals/baseBind",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,t,n,i){function o(o){function r(){if(l){var n=i(l);s.apply(n,arguments)}if(this instanceof r){var o=e(a.prototype),u=a.apply(o,n||arguments);return t(u)?u:o}return a.apply(c,n||arguments)}var a=o[0],l=o[2],c=o[4];return n(r,o),r}var r=[],s=r.push;return o}),define("lodash-amd/modern/internals/baseCreateWrapper",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,t,n,i){function o(r){function a(){var n=p?h:this;if(u){var r=i(u);s.apply(r,arguments)}if((d||g)&&(r||(r=i(arguments)),d&&s.apply(r,d),g&&r.length<m))return c|=16,o([l,_?c:-4&c,r,null,h,m]);if(r||(r=arguments),f&&(l=n[v]),this instanceof a){n=e(l.prototype);var b=l.apply(n,r);return t(b)?b:n}return l.apply(n,r)}var l=r[0],c=r[1],u=r[2],d=r[3],h=r[4],m=r[5],p=1&c,f=2&c,g=4&c,_=8&c,v=l;return n(a,r),a}var r=[],s=r.push;return o}),define("lodash-amd/modern/objects/isFunction",[],function(){function e(e){return"function"==typeof e}return e}),define("lodash-amd/modern/internals/createWrapper",["./baseBind","./baseCreateWrapper","../objects/isFunction","./slice"],function(e,t,n,i){function o(r,l,c,u,d,h){var m=1&l,p=2&l,f=4&l,g=16&l,_=32&l;if(!p&&!n(r))throw new TypeError;g&&!c.length&&(l&=-17,g=c=!1),_&&!u.length&&(l&=-33,_=u=!1);var v=r&&r.__bindData__;if(v&&v!==!0)return v=i(v),v[2]&&(v[2]=i(v[2])),v[3]&&(v[3]=i(v[3])),!m||1&v[1]||(v[4]=d),!m&&1&v[1]&&(l|=8),!f||4&v[1]||(v[5]=h),g&&s.apply(v[2]||(v[2]=[]),c),_&&a.apply(v[3]||(v[3]=[]),u),v[1]|=l,o.apply(null,v);var b=1==l||17===l?e:t;return b([r,l,c,u,d,h])}var r=[],s=r.push,a=r.unshift;return o}),define("lodash-amd/modern/functions/bind",["../internals/createWrapper","../internals/slice"],function(e,t){function n(n,i){return arguments.length>2?e(n,17,t(arguments,2),null,i):e(n,1,null,null,i)}return n}),define("lodash-amd/modern/utilities/identity",[],function(){function e(e){return e}return e}),define("lodash-amd/modern/support",["./internals/isNative"],function(e){var t=/\bthis\b/,n={};return n.funcDecomp=!e(window.WinRTError)&&t.test(function(){return this}),n.funcNames="string"==typeof Function.name,n}),define("lodash-amd/modern/internals/baseCreateCallback",["../functions/bind","../utilities/identity","./setBindData","../support"],function(e,t,n,i){function o(o,l,c){if("function"!=typeof o)return t;if("undefined"==typeof l||!("prototype"in o))return o;var u=o.__bindData__;if("undefined"==typeof u&&(i.funcNames&&(u=!o.name),u=u||!i.funcDecomp,!u)){var d=a.call(o);i.funcNames||(u=!r.test(d)),u||(u=s.test(d),n(o,u))}if(u===!1||u!==!0&&1&u[1])return o;switch(c){case 1:return function(e){return o.call(l,e)};case 2:return function(e,t){return o.call(l,e,t)};case 3:return function(e,t,n){return o.call(l,e,t,n)};case 4:return function(e,t,n,i){return o.call(l,e,t,n,i)}}return e(o,l)}var r=/^\s*function[ \n\r\t]+\w/,s=/\bthis\b/,a=Function.prototype.toString;return o}),define("lodash-amd/modern/objects/forIn",["../internals/baseCreateCallback","../internals/objectTypes"],function(e,t){var n=function(n,i,o){var r,s=n,a=s;if(!s)return a;if(!t[typeof s])return a;i=i&&"undefined"==typeof o?i:e(i,o,3);for(r in s)if(i(s[r],r,n)===!1)return a;return a};return n}),define("lodash-amd/modern/internals/arrayPool",[],function(){var e=[];return e}),define("lodash-amd/modern/internals/getArray",["./arrayPool"],function(e){function t(){return e.pop()||[]}return t}),define("lodash-amd/modern/internals/maxPoolSize",[],function(){var e=40;return e}),define("lodash-amd/modern/internals/releaseArray",["./arrayPool","./maxPoolSize"],function(e,t){function n(n){n.length=0,e.length<t&&e.push(n)}return n}),define("lodash-amd/modern/internals/baseIsEqual",["../objects/forIn","./getArray","../objects/isFunction","./objectTypes","./releaseArray"],function(e,t,n,i,o){function r(p,_,v,b,y,C){if(v){var w=v(p,_);if("undefined"!=typeof w)return!!w}if(p===_)return 0!==p||1/p==1/_;var E=typeof p,L=typeof _;if(!(p!==p||p&&i[E]||_&&i[L]))return!1;if(null==p||null==_)return p===_;var S=f.call(p),D=f.call(_);if(S==s&&(S=d),D==s&&(D=d),S!=D)return!1;switch(S){case l:case c:return+p==+_;case u:return p!=+p?_!=+_:0==p?1/p==1/_:p==+_;case h:case m:return p==String(_)}var T=S==a;if(!T){var I=g.call(p,"__wrapped__"),k=g.call(_,"__wrapped__");if(I||k)return r(I?p.__wrapped__:p,k?_.__wrapped__:_,v,b,y,C);if(S!=d)return!1;var x=p.constructor,A=_.constructor;if(x!=A&&!(n(x)&&x instanceof x&&n(A)&&A instanceof A)&&"constructor"in p&&"constructor"in _)return!1}var O=!y;y||(y=t()),C||(C=t());for(var N=y.length;N--;)if(y[N]==p)return C[N]==_;var M=0;if(w=!0,y.push(p),C.push(_),T){if(N=p.length,M=_.length,w=M==N,w||b)for(;M--;){var P=N,R=_[M];if(b)for(;P--&&!(w=r(p[P],R,v,b,y,C)););else if(!(w=r(p[M],R,v,b,y,C)))break}}else e(_,function(e,t,n){return g.call(n,t)?(M++,w=g.call(p,t)&&r(p[t],e,v,b,y,C)):void 0}),w&&!b&&e(p,function(e,t,n){return g.call(n,t)?w=--M>-1:void 0});return y.pop(),C.pop(),O&&(o(y),o(C)),w}var s="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Number]",d="[object Object]",h="[object RegExp]",m="[object String]",p=Object.prototype,f=p.toString,g=p.hasOwnProperty;return r}),define("lodash-amd/modern/internals/shimKeys",["./objectTypes"],function(e){var t=Object.prototype,n=t.hasOwnProperty,i=function(t){var i,o=t,r=[];if(!o)return r;if(!e[typeof t])return r;for(i in o)n.call(o,i)&&r.push(i);return r};return i}),define("lodash-amd/modern/objects/keys",["../internals/isNative","./isObject","../internals/shimKeys"],function(e,t,n){var i=e(i=Object.keys)&&i,o=i?function(e){return t(e)?i(e):[]}:n;return o}),define("lodash-amd/modern/utilities/property",[],function(){function e(e){return function(t){return t[e]}}return e}),define("lodash-amd/modern/functions/createCallback",["../internals/baseCreateCallback","../internals/baseIsEqual","../objects/isObject","../objects/keys","../utilities/property"],function(e,t,n,i,o){function r(r,s,a){var l=typeof r;if(null==r||"function"==l)return e(r,s,a);if("object"!=l)return o(r);var c=i(r),u=c[0],d=r[u];return 1!=c.length||d!==d||n(d)?function(e){for(var n=c.length,i=!1;n--&&(i=t(e[c[n]],r[c[n]],null,!0)););return i}:function(e){var t=e[u];return d===t&&(0!==d||1/d==1/t)}}return r}),define("lodash-amd/modern/objects/forOwn",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(e,t,n){var i=function(i,o,r){var s,a=i,l=a;if(!a)return l;if(!n[typeof a])return l;o=o&&"undefined"==typeof r?o:e(o,r,3);for(var c=-1,u=n[typeof a]&&t(a),d=u?u.length:0;++c<d;)if(s=u[c],o(a[s],s,i)===!1)return l;return l};return i}),define("lodash-amd/modern/objects/findKey",["../functions/createCallback","./forOwn"],function(e,t){function n(n,i,o){var r;return i=e(i,o,3),t(n,function(e,t,n){return i(e,t,n)?(r=t,!1):void 0}),r}return n}),define("tao/lib/scribe/plugins/scribe-plugin-keyboard-shortcuts",["lodash-amd/modern/objects/findKey"],function(e){return function(t){return function(n){n.el.addEventListener("keydown",function(i){var o=e(t,function(e){return e(i)});if(o){var r=n.getCommand(o);i.preventDefault(),r.queryEnabled()&&r.execute()}})}}}),define("tao/lib/scribe/plugins/scribe-plugin-link-prompt-command/checks",[],function(){function e(e){return/\w/.test(e)}function t(e){return r.some(function(t){return t.test(e)})}var n=/^https?\:\/\//,i=/^mailto\:/,o=/^tel\:/,r=[n,i,o];return{emptyLink:e,hasKnownProtocol:t}}),define("tao/lib/scribe/plugins/scribe-plugin-link-prompt-command/init",[],function(){function e(e){var e=e||{};return e.transforms||(e.transforms={}),["pre","post"].forEach(function(t){e.transforms[t]||(e.transforms[t]=[])}),e}return{init:e}}),define("tao/lib/scribe/plugins/scribe-plugin-link-prompt-command/prompts",[],function(){function e(e,n){for(var i=0;i<t.length;i++){var o=t[i];if(o.regexp.test(n)){var r=e.confirm(o.message);if(r)return o.action(n)}}return n}var t=[{regexp:/@/,message:"The URL you entered appears to be an email address. Do you want to add the required “mailto:” prefix?",action:function(e){return"mailto:"+e}},{regexp:/\+?\d+/,message:"The URL you entered appears to be a telephone number. Do you want to add the required “tel:” prefix?",action:function(e){return"tel:"+e}},{regexp:/.+/,message:"The URL you entered appears to be a link. Do you want to add the required “http://” prefix?",action:function(e){return"http://"+e}}];return{process:e}}),define("tao/lib/scribe/plugins/scribe-plugin-link-prompt-command/transforms",[],function(){function e(e,t){return e.reduce(function(e,t){return t(e)},t)}return{run:e}}),define("tao/lib/scribe/plugins/scribe-plugin-link-prompt-command",["./scribe-plugin-link-prompt-command/checks","./scribe-plugin-link-prompt-command/init","./scribe-plugin-link-prompt-command/prompts","./scribe-plugin-link-prompt-command/transforms"],function(e,t,n,i){return function(o){var o=t.init(o);return function(t){var r=new t.api.Command("createLink");r.nodeName="A",r.execute=function(r){var s,a=new t.api.Selection,l=a.range,c=a.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this)),u=c?c.href:"";if(s=r?r:window.prompt("Enter a link.",u),s=i.run(o.transforms.pre,s),!e.emptyLink(s))return void window.alert("This link appears empty");if(o&&o.validation){var d=o.validation(s);if(!d.valid)return void window.alert(d.message||"The link is not valid")}c&&(l.selectNode(c),a.selection.removeAllRanges(),a.selection.addRange(l)),s&&(e.hasKnownProtocol(s)||(s=n.process(window,s)),s=i.run(o.transforms.post,s),t.api.SimpleCommand.prototype.execute.call(this,s))},r.queryState=function(){var e=new t.api.Selection;return!!e.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},t.commands.linkPrompt=r}}}),function(e,t){"function"==typeof define&&define.amd?define("html-janitor",t):"object"==typeof exports?module.exports=t():e.HTMLJanitor=t()}(this,function(){function e(e){var t=e.tags,n=Object.keys(t),i=n.map(function(e){return typeof t[e]}).every(function(e){return"object"===e||"boolean"===e||"function"===e});if(!i)throw new Error("The configuration was invalid");this.config=e}function t(e){return-1!==a.indexOf(e.nodeName)}function n(e){return-1!==l.indexOf(e.nodeName)}function i(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function o(e,t,n){return"function"==typeof e.tags[t]?e.tags[t](n):e.tags[t]}function r(e,t){return"undefined"==typeof t?!0:"boolean"==typeof t?!t:!1}function s(e,t,n){var i=e.name.toLowerCase();return t===!0?!1:"function"==typeof t[i]?!t[i](e.value,n):"undefined"==typeof t[i]?!0:t[i]===!1?!0:"string"==typeof t[i]?t[i]!==e.value:!1}var a=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],l=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return e.prototype.clean=function(e){var t=document.createElement("div");return t.innerHTML=e,this._sanitize(t),t.innerHTML},e.prototype._sanitize=function(e){var a=i(e),l=a.firstChild();if(l)do if(!l._sanitized)if(l.nodeType!==Node.TEXT_NODE){if(l.nodeType===Node.COMMENT_NODE){e.removeChild(l),this._sanitize(e);break}var c,u=n(l);u&&(c=Array.prototype.some.call(l.childNodes,t));var d=!!e.parentNode,h=t(e)&&t(l)&&d,m=l.nodeName.toLowerCase(),p=o(this.config,m,l),f=u&&c;if(f||r(l,p)||!this.config.keepNestedBlockElements&&h){if("SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName)for(;l.childNodes.length>0;)e.insertBefore(l.childNodes[0],l);e.removeChild(l),this._sanitize(e);break}for(var g=0;g<l.attributes.length;g+=1){var _=l.attributes[g];s(_,p,l)&&(l.removeAttribute(_.name),g-=1)}this._sanitize(l),l._sanitized=!0}else if(""===l.data.trim()&&(l.previousElementSibling&&t(l.previousElementSibling)||l.nextElementSibling&&t(l.nextElementSibling))){e.removeChild(l),this._sanitize(e);break}while(l=a.nextSibling())},e}),define("lodash-amd/modern/internal/arrayEach",[],function(){function e(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return e}),define("lodash-amd/modern/lang/isObject",[],function(){function e(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}return e}),define("lodash-amd/modern/internal/toObject",["../lang/isObject"],function(e){function t(t){return e(t)?t:Object(t)}return t}),define("lodash-amd/modern/internal/baseFor",["./toObject"],function(e){function t(t,n,i){for(var o=-1,r=e(t),s=i(t),a=s.length;++o<a;){var l=s[o];if(n(r[l],l,r)===!1)break}return t}return t}),define("lodash-amd/modern/internal/isLength",[],function(){function e(e){return"number"==typeof e&&e>-1&&e%1==0&&t>=e}var t=Math.pow(2,53)-1;return e}),define("lodash-amd/modern/internal/baseToString",[],function(){function e(e){return"string"==typeof e?e:null==e?"":e+""}return e}),define("lodash-amd/modern/string/escapeRegExp",["../internal/baseToString"],function(e){function t(t){return t=e(t),t&&i.test(t)?t.replace(n,"\\$&"):t}var n=/[.*+?^${}()|[\]\/\\]/g,i=RegExp(n.source);return t}),define("lodash-amd/modern/internal/isObjectLike",[],function(){function e(e){return e&&"object"==typeof e||!1}return e}),define("lodash-amd/modern/lang/isNative",["../string/escapeRegExp","../internal/isObjectLike"],function(e,t){function n(e){return null==e?!1:a.call(e)==i?l.test(s.call(e)):t(e)&&o.test(e)||!1}var i="[object Function]",o=/^\[object .+?Constructor\]$/,r=Object.prototype,s=Function.prototype.toString,a=r.toString,l=RegExp("^"+e(a).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return n}),define("lodash-amd/modern/lang/isArguments",["../internal/isLength","../internal/isObjectLike"],function(e,t){function n(n){var r=t(n)?n.length:i;return e(r)&&s.call(n)==o||!1}var i,o="[object Arguments]",r=Object.prototype,s=r.toString;return n}),define("lodash-amd/modern/lang/isArray",["../internal/isLength","./isNative","../internal/isObjectLike"],function(e,t,n){var i="[object Array]",o=Object.prototype,r=o.toString,s=t(s=Array.isArray)&&s,a=s||function(t){return n(t)&&e(t.length)&&r.call(t)==i||!1};return a}),define("lodash-amd/modern/internal/isIndex",[],function(){function e(e,n){return e=+e,n=null==n?t:n,e>-1&&e%1==0&&n>e}var t=Math.pow(2,53)-1;return e}),define("lodash-amd/modern/internal/root",[],function(){var e={"function":!0,object:!0},t=e[typeof exports]&&exports&&!exports.nodeType&&exports,n=e[typeof module]&&module&&!module.nodeType&&module,i=t&&n&&"object"==typeof global&&global,o=e[typeof window]&&window,r=i||o!==(this&&this.window)&&o||this;return r}),define("lodash-amd/modern/support",["./lang/isNative","./internal/root"],function(e,t){var n=/\bthis\b/,i=Object.prototype,o=(o=t.window)&&o.document,r=i.propertyIsEnumerable,s={};return function(){s.funcDecomp=!e(t.WinRTError)&&n.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===o.createDocumentFragment().nodeType}catch(i){s.dom=!1}try{s.nonEnumArgs=!r.call(arguments,1)}catch(i){s.nonEnumArgs=!0}}(0,0),s}),define("lodash-amd/modern/object/keysIn",["../lang/isArguments","../lang/isArray","../internal/isIndex","../internal/isLength","../lang/isObject","../support"],function(e,t,n,i,o,r){function s(s){if(null==s)return[];o(s)||(s=Object(s));var a=s.length;a=a&&i(a)&&(t(s)||r.nonEnumArgs&&e(s))&&a||0;for(var c=s.constructor,u=-1,d="function"==typeof c&&c.prototype===s,h=Array(a),m=a>0;++u<a;)h[u]=u+"";for(var p in s)m&&n(p,a)||"constructor"==p&&(d||!l.call(s,p))||h.push(p);return h}var a=Object.prototype,l=a.hasOwnProperty;return s}),define("lodash-amd/modern/internal/shimKeys",["../lang/isArguments","../lang/isArray","./isIndex","./isLength","../object/keysIn","../support"],function(e,t,n,i,o,r){function s(s){for(var a=o(s),c=a.length,u=c&&s.length,d=u&&i(u)&&(t(s)||r.nonEnumArgs&&e(s)),h=-1,m=[];++h<c;){var p=a[h];(d&&n(p,u)||l.call(s,p))&&m.push(p)}return m}var a=Object.prototype,l=a.hasOwnProperty;return s}),define("lodash-amd/modern/object/keys",["../internal/isLength","../lang/isNative","../lang/isObject","../internal/shimKeys"],function(e,t,n,i){var o=t(o=Object.keys)&&o,r=o?function(t){if(t)var r=t.constructor,s=t.length;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&s&&e(s)?i(t):n(t)?o(t):[]}:i;return r}),define("lodash-amd/modern/internal/baseForOwn",["./baseFor","../object/keys"],function(e,t){function n(n,i){return e(n,i,t)}return n}),define("lodash-amd/modern/internal/arrayCopy",[],function(){function e(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return e}),define("lodash-amd/modern/internal/baseForIn",["./baseFor","../object/keysIn"],function(e,t){function n(n,i){return e(n,i,t)}return n}),define("lodash-amd/modern/internal/shimIsPlainObject",["./baseForIn","./isObjectLike"],function(e,t){function n(n){var o;if(!t(n)||s.call(n)!=i||!r.call(n,"constructor")&&(o=n.constructor,"function"==typeof o&&!(o instanceof o)))return!1;var a;return e(n,function(e,t){a=t}),"undefined"==typeof a||r.call(n,a)}var i="[object Object]",o=Object.prototype,r=o.hasOwnProperty,s=o.toString;return n}),define("lodash-amd/modern/lang/isPlainObject",["./isNative","../internal/shimIsPlainObject"],function(e,t){var n="[object Object]",i=Object.prototype,o=i.toString,r=e(r=Object.getPrototypeOf)&&r,s=r?function(i){if(!i||o.call(i)!=n)return!1;var s=i.valueOf,a=e(s)&&(a=r(s))&&r(a);return a?i==a||r(i)==a:t(i)}:t;return s}),define("lodash-amd/modern/lang/isTypedArray",["../internal/isLength","../internal/isObjectLike"],function(e,t){function n(n){return t(n)&&e(n.length)&&D[I.call(n)]||!1}var i="[object Arguments]",o="[object Array]",r="[object Boolean]",s="[object Date]",a="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",d="[object Object]",h="[object RegExp]",m="[object Set]",p="[object String]",f="[object WeakMap]",g="[object ArrayBuffer]",_="[object Float32Array]",v="[object Float64Array]",b="[object Int8Array]",y="[object Int16Array]",C="[object Int32Array]",w="[object Uint8Array]",E="[object Uint8ClampedArray]",L="[object Uint16Array]",S="[object Uint32Array]",D={};D[_]=D[v]=D[b]=D[y]=D[C]=D[w]=D[E]=D[L]=D[S]=!0,D[i]=D[o]=D[g]=D[r]=D[s]=D[a]=D[l]=D[c]=D[u]=D[d]=D[h]=D[m]=D[p]=D[f]=!1;var T=Object.prototype,I=T.toString;return n}),define("lodash-amd/modern/internal/baseCopy",[],function(){function e(e,t,n){n||(n=t,t={});for(var i=-1,o=n.length;++i<o;){var r=n[i];t[r]=e[r]}return t}return e}),define("lodash-amd/modern/lang/toPlainObject",["../internal/baseCopy","../object/keysIn"],function(e,t){function n(n){return e(n,t(n))}return n}),define("lodash-amd/modern/internal/baseMergeDeep",["./arrayCopy","../lang/isArguments","../lang/isArray","./isLength","../lang/isPlainObject","../lang/isTypedArray","../lang/toPlainObject"],function(e,t,n,i,o,r,s){function a(a,c,u,d,h,m,p){for(var f=m.length,g=c[u];f--;)if(m[f]==g)return void(a[u]=p[f]);var _=a[u],v=h?h(_,g,u,a,c):l,b="undefined"==typeof v;b&&(v=g,i(g.length)&&(n(g)||r(g))?v=n(_)?_:_?e(_):[]:o(g)||t(g)?v=t(_)?s(_):o(_)?_:{}:b=!1),m.push(g),p.push(v),b?a[u]=d(v,g,h,m,p):(v===v?v!==_:_===_)&&(a[u]=v)}var l;return a}),define("lodash-amd/modern/internal/baseMerge",["./arrayEach","./baseForOwn","./baseMergeDeep","../lang/isArray","./isLength","../lang/isObject","./isObjectLike","../lang/isTypedArray"],function(e,t,n,i,o,r,s,a){function l(u,d,h,m,p){if(!r(u))return u;var f=o(d.length)&&(i(d)||a(d));return(f?e:t)(d,function(e,t,i){if(s(e))return m||(m=[]),p||(p=[]),n(u,i,t,l,h,m,p);var o=u[t],r=h?h(o,e,t,u,i):c,a="undefined"==typeof r;a&&(r=e),!f&&"undefined"==typeof r||!a&&(r===r?r===o:o!==o)||(u[t]=r)}),u}var c;return l}),define("lodash-amd/modern/utility/identity",[],function(){function e(e){return e}return e}),define("lodash-amd/modern/internal/bindCallback",["../utility/identity"],function(e){function t(t,n,i){if("function"!=typeof t)return e;if("undefined"==typeof n)return t;switch(i){case 1:return function(e){return t.call(n,e)};case 3:return function(e,i,o){return t.call(n,e,i,o)};case 4:return function(e,i,o,r){return t.call(n,e,i,o,r)};case 5:return function(e,i,o,r,s){return t.call(n,e,i,o,r,s)}}return function(){return t.apply(n,arguments)}}return t}),define("lodash-amd/modern/internal/isIterateeCall",["./isIndex","./isLength","../lang/isObject"],function(e,t,n){function i(i,o,r){if(!n(r))return!1;var s=typeof o;if("number"==s)var a=r.length,l=t(a)&&e(o,a);else l="string"==s&&o in r;if(l){var c=r[o];return i===i?i===c:c!==c}return!1}return i}),define("lodash-amd/modern/internal/createAssigner",["./bindCallback","./isIterateeCall"],function(e,t){function n(n){return function(){var i=arguments,o=i.length,r=i[0];if(2>o||null==r)return r;var s=i[o-2],a=i[o-1],l=i[3];o>3&&"function"==typeof s?(s=e(s,a,5),o-=2):(s=o>2&&"function"==typeof a?a:null,o-=s?1:0),l&&t(i[1],i[2],l)&&(s=3==o?null:s,o=2);for(var c=0;++c<o;){var u=i[c];u&&n(r,u,s)}return r}}return n}),define("lodash-amd/modern/object/merge",["../internal/baseMerge","../internal/createAssigner"],function(e,t){var n=t(e);return n}),define("lodash-amd/modern/internal/initCloneArray",[],function(){function e(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var t=Object.prototype,n=t.hasOwnProperty;return e}),define("lodash-amd/modern/utility/constant",[],function(){function e(e){return function(){return e}}return e}),define("lodash-amd/modern/internal/bufferClone",["../utility/constant","../lang/isNative","./root"],function(e,t,n){function i(e){return r.call(e,0)}var o=t(o=n.ArrayBuffer)&&o,r=t(r=o&&new o(0).slice)&&r,s=Math.floor,a=t(a=n.Uint8Array)&&a,l=function(){try{var e=t(e=n.Float64Array)&&e,i=new e(new o(10),0,1)&&e}catch(r){}return i}(),c=l?l.BYTES_PER_ELEMENT:0;return r||(i=o&&a?function(e){var t=e.byteLength,n=l?s(t/c):0,i=n*c,r=new o(t);if(n){var u=new l(r,0,n);u.set(new l(e,0,n))}return t!=i&&(u=new a(r,i),u.set(new a(e,i))),r}:e(null)),i}),define("lodash-amd/modern/internal/initCloneByTag",["./bufferClone"],function(e){function t(t,v,b){var y=t.constructor;switch(v){case a:return e(t);case n:case i:return new y(+t);case l:case c:case u:case d:case h:case m:case p:case f:case g:var C=t.buffer;return new y(b?e(C):C,t.byteOffset,t.length);case o:case s:return new y(t);case r:var w=new y(t.source,_.exec(t));w.lastIndex=t.lastIndex}return w}var n="[object Boolean]",i="[object Date]",o="[object Number]",r="[object RegExp]",s="[object String]",a="[object ArrayBuffer]",l="[object Float32Array]",c="[object Float64Array]",u="[object Int8Array]",d="[object Int16Array]",h="[object Int32Array]",m="[object Uint8Array]",p="[object Uint8ClampedArray]",f="[object Uint16Array]",g="[object Uint32Array]",_=/\w*$/;return t}),define("lodash-amd/modern/internal/initCloneObject",[],function(){function e(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}return e}),define("lodash-amd/modern/internal/baseClone",["./arrayCopy","./arrayEach","./baseCopy","./baseForOwn","./initCloneArray","./initCloneByTag","./initCloneObject","../lang/isArray","../lang/isObject","../object/keys"],function(e,t,n,i,o,r,s,a,l,c){function u(h,m,p,f,_,v,y){var C;if(p&&(C=_?p(h,f,_):p(h)),"undefined"!=typeof C)return C;if(!l(h))return h;var w=a(h);if(w){if(C=o(h),!m)return e(h,C)}else{var E=R.call(h),L=E==g;if(E!=b&&E!=d&&(!L||_))return M[E]?r(h,E,m):_?h:{};if(C=s(L?{}:h),!m)return n(h,C,c(h))}v||(v=[]),y||(y=[]);for(var S=v.length;S--;)if(v[S]==h)return y[S];return v.push(h),y.push(C),(w?t:i)(h,function(e,t){C[t]=u(e,m,p,t,h,v,y)}),C}var d="[object Arguments]",h="[object Array]",m="[object Boolean]",p="[object Date]",f="[object Error]",g="[object Function]",_="[object Map]",v="[object Number]",b="[object Object]",y="[object RegExp]",C="[object Set]",w="[object String]",E="[object WeakMap]",L="[object ArrayBuffer]",S="[object Float32Array]",D="[object Float64Array]",T="[object Int8Array]",I="[object Int16Array]",k="[object Int32Array]",x="[object Uint8Array]",A="[object Uint8ClampedArray]",O="[object Uint16Array]",N="[object Uint32Array]",M={};M[d]=M[h]=M[L]=M[m]=M[p]=M[S]=M[D]=M[T]=M[I]=M[k]=M[v]=M[b]=M[y]=M[w]=M[x]=M[A]=M[O]=M[N]=!0,M[f]=M[g]=M[_]=M[C]=M[E]=!1;var P=Object.prototype,R=P.toString;return u}),define("lodash-amd/modern/lang/cloneDeep",["../internal/baseClone","../internal/bindCallback"],function(e,t){function n(n,i,o){return i="function"==typeof i&&t(i,o,1),e(n,!0,i)}return n}),define("tao/lib/scribe/plugins/scribe-plugin-sanitizer",["html-janitor","lodash-amd/modern/object/merge","lodash-amd/modern/lang/cloneDeep"],function(e,t,n){return function(i,o){var r=t(n(i),{tags:{em:{"class":"scribe-marker"},br:{}}});return o?new e(r):function(t){var n=new e(r);t.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}),define("tao/lib/scribe/plugins/scribe-plugin-smart-lists",[],function(){return function(){function e(e){return"*"===e||"-"===e||"•"===e}var t={32:"Space",42:"*",45:"-",46:".",49:"1",8226:"•"};return function(n){function i(e){for(;e&&!n.node.isBlockElement(e);)e=e.parentNode;return e}function o(){var e=new n.api.Selection,t=e.selection.anchorNode;t.data&&(t.data=t.data.replace(/^([•*-.\d]+)/,"")),!t.data&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&t.removeChild(t.firstChild)}function r(r){var c;s=a,a=l,l=t[n.getEventCode(r)];var u=new n.api.Selection,d=u.range.commonAncestorContainer,h=i(d);if(h&&"P"===h.tagName){var m=e(d.textContent[0]),p=1===u.range.endOffset;e(a)&&"Space"===l&&m&&p&&(c="insertUnorderedList");var f="1."===[d.previousSibling&&d.previousSibling.textContent,d.textContent].join("").slice(0,2);"1"===s&&"."===a&&"Space"===l&&f&&(c="insertOrderedList")}c&&(r.preventDefault(),n.transactionManager.run(function(){n.getCommand(c).execute(),o()}))}var s,a,l;n.el.addEventListener("keypress",r)}}}),define("tao/lib/scribe/plugins/scribe-plugin-toolbar",[],function(){var e=null;return function(t,n){var i={shared:!1};return n||(n=i),n=Object.freeze(n),function(i){n.shared&&i.el.addEventListener("focus",function(){e=i.el});var o=t.querySelectorAll("[data-command-name]");Array.prototype.forEach.call(o,function(t){function o(){var e=i.getCommand(t.dataset.commandName),n=new i.api.Selection;n.range&&e.queryState(t.dataset.commandValue)?t.classList.add("active"):t.classList.remove("active"),n.range&&e.queryEnabled()?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}function r(){if(!n.shared||i.el===e){var o=i.getCommand(t.dataset.commandName);i.el.focus(),o.execute(t.dataset.commandValue)}}t.addEventListener("keydown",function(e){13==i.getEventCode(e)&&(e.preventDefault(),r())}),t.addEventListener("mousedown",r),i.el.addEventListener("keyup",o),i.el.addEventListener("mouseup",o),i.el.addEventListener("focus",o),i.el.addEventListener("blur",o),i.on("content-changed",o)})}}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("tao/lib/scribe/plugins/scribe-plugin-content-cleaner",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.scribePluginContentCleaner=e()}}(function(){return function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n?n:e)
},u,u.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t){t.exports=function(){var e="cleanup",t=[function(e){return e.replace(/(&nbsp;)/gi," ")},function(e){return e.replace(/\s+/g," ")},function(e){return e.replace(/ -- /g," &ndash; ")},function(e){return e.replace(/ - /g," &ndash; ")},function(e){return e.replace(/(<br\s*\/?>){3,}/gi,"<br>")},function(e){return e.replace(/<p>\s*?<br\s*\/?><\/p>/g,"")},function(e){return e.replace(/(\w)\s*--\s*(\w(?!(ote\b|tart\b|nd\b)))/g,"$1 &ndash; $2")},function(e){return e.replace(/(\w)<br\s*?>(\w)/g,"$1 $2")},function(e){return e.replace(/(\w)\s*?–\s*?(\w)/g,"$1 &ndash; $2")}];return function(n){var i=new n.api.Command("Cleanup");i.execute=function(){var e=n.el.innerHTML,i=t.reduce(function(e,t){return t(e)},e);n.setHTML(i,!0)},i.queryEnabled=function(){return!0},n.commands[e]=i}}},{}]},{},[1])(1)}),define("tao/lib/scribe/plugins/scribe-plugin-maxlength",[],function(){return function(e){return function(t){var n,i,o;o={},n=function(e){e=e||{},this.setMaxLength(e.maxLength),this.setResultCallback(e.resultCallback)},n.prototype.setMaxLength=function(e){this.maxLength="number"==typeof e&&e>0?e:0,this.checkMaxLength()},n.prototype.setResultCallback=function(e){this.resultCallback="function"==typeof e?e:null},n.prototype.getMaxLengthCheckResult=function(){return o},n.prototype.checkMaxLength=function(e){var n,i;n=t.getHTML(),n=n.replace(/^<br>/i,""),n=n.replace(/<br>$/i,""),i={result:!1,length:n?n.length:0,maxLength:this.maxLength},i.result=n&&0!==n.length&&0!==this.maxLength?n.length<=this.maxLength:!0,"function"==typeof e?e(i):this.resultCallback?this.resultCallback(i):JSON.stringify(o)!==JSON.stringify(i)&&t.trigger("scribe-plugin-maxlength-check",[i]),o=i},i=new n(e),"function"==typeof e.pluginSetter&&e.pluginSetter(i),t.on("content-changed",function(){i.checkMaxLength(e.callback)})}}}),define("tao/lib/scribe/plugins/scribe-plugin-command-control",[],function(){return function(e){return function(t){var n,i,o,r,s,a,l,c;e=e||{},n="function"==typeof e.commandsControlCallback?e.commandsControlCallback:function(){return!0},i="boolean"==typeof e.allCommandFunctions?e.allCommandFunctions:!1,o=t.api.Command.prototype.execute,i&&(r=t.api.Command.prototype.queryState,s=t.api.Command.prototype.queryEnabled),a=t.api.CommandPatch.prototype.execute,i&&(l=t.api.CommandPatch.prototype.queryState,c=t.api.CommandPatch.prototype.queryEnabled),t.api.Command.prototype.execute=function(){return n(this)?o.apply(this,arguments):void 0},i&&(t.api.Command.prototype.queryState=function(){return n(this)?r.apply(this,arguments):void 0},t.api.Command.prototype.queryEnabled=function(){return n(this)?s.apply(this,arguments):void 0}),t.api.CommandPatch.prototype.execute=function(e){return n(this,e)?a.apply(this,arguments):void 0},i&&(t.api.CommandPatch.prototype.queryState=function(){return n(this)?l.apply(this,arguments):void 0},t.api.CommandPatch.prototype.queryEnabled=function(){return n(this)?c.apply(this,arguments):void 0})}}}),define("tao/lib/ScribeLoader",["tao/lib/scribe/scribe","tao/lib/scribe/api/scribe-selection","tao/lib/scribe/plugins/scribe-plugin-blockquote-command","tao/lib/scribe/plugins/scribe-plugin-paragraph-command","tao/lib/scribe/plugins/scribe-plugin-code-command","tao/lib/scribe/plugins/scribe-plugin-curly-quotes","tao/lib/scribe/plugins/scribe-plugin-formatter-plain-text-convert-new-lines-to-html","tao/lib/scribe/plugins/scribe-plugin-heading-command","tao/lib/scribe/plugins/scribe-plugin-intelligent-unlink-command","tao/lib/scribe/plugins/scribe-plugin-keyboard-shortcuts","tao/lib/scribe/plugins/scribe-plugin-link-prompt-command","tao/lib/scribe/plugins/scribe-plugin-sanitizer","tao/lib/scribe/plugins/scribe-plugin-smart-lists","tao/lib/scribe/plugins/scribe-plugin-toolbar","tao/lib/scribe/plugins/scribe-plugin-content-cleaner","tao/lib/scribe/plugins/scribe-plugin-maxlength","tao/lib/scribe/plugins/scribe-plugin-command-control"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g){return{Scribe:e,scribeApiSelection:t,scribePluginBlockquoteCommand:n,scribePluginParagraphCommand:i,scribePluginCodeCommand:o,scribePluginCurlyQuotes:r,scribePluginFormatterPlainTextConvertNewLinesToHtml:s,scribePluginHeadingCommand:a,scribePluginIntelligentUnlinkCommand:l,scribePluginKeyboardShortcuts:c,scribePluginLinkPromptCommand:u,scribePluginSanitizer:d,scribePluginSmartLists:h,scribePluginToolbar:m,scribePluginContentCleaner:p,scribePluginMaxLength:f,scribePluginCommandControl:g}}),define("tao/ospm/ui/widgets/FormattedTextEditor",["tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/layouts/OneColumnLayout","tao/ospm/ui/views/DialogView","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/lib/ScribeLoader","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a,l,c,u){function d(t){if(t.okButton&&t.okButton.action&&"function"!=typeof t.okButton.action)throw new e("Ungültige action-Funktion für den ok-Button.");if(t.cancelButton&&t.cancelButton.action&&"function"!=typeof t.cancelButton.action)throw new e("Ungültige action-Funktion für den cancel-Button.");t.buttons=parseInt(t.buttons,10),isNaN(t.buttons)&&(t.buttons=u.FTE_BUTTON.DEFAULT)}function h(e){if(e.dom=i.createContainer("ospm_formattedtexteditor"),e.dom.appendChild(m(e)),n.isNBF()){var t=i.createContainer("ospm_formattedtexteditor_v2_info_wrapper");t.appendChild(p(e)),e.errorMessageShouldHaveIcon(),t.appendChild(e.buildErrorDom()),t.appendChild(e.buildCharacterCountdownDom()),e.dom.appendChild(t)}else e.dom.appendChild(p(e)),e.dom.appendChild(e.buildErrorDom())}function m(e){var t,r,s,a,l,c,u,d,h,m;return t=i.createContainer("ospm_editor_wrapper"),s=i.createContainer("ospm_teheader"),a=i.createContainer("ospm_teheader_row"),l=i.createContainer("ospm_teheader_column"),c=i.createContainer("ospm_tetitle"),e.labelDom=c,s.appendChild(a),a.appendChild(l),l.appendChild(c),u=i.createContainer("ospm_toolbar"),h=i.createContainer("ospm_placeholder"),e.placeholderDom=h,r=i.createContainer("ospm_editor"),e.editorDom=r,m=0,L.forEach(function(t){0!==(t.value&e.enabledButtons)&&(d=o.createSimpleActionIcon({name:"formattedtexteditor_"+t.name,label:t.label},null),d.classList.add("ospm_toolbar_btn"),d.classList.add(t.cssClassName?t.cssClassName:""),d.dataset.commandName=t.name,u.appendChild(d),m++)}),n.isNBF()||(l.style.maxWidth="calc(100% - "+M*m+"px)"),l=i.createContainer("ospm_teheader_column"),l.appendChild(u),a.appendChild(l),t.appendChild(s),t.appendChild(h),t.appendChild(r),n.isNBF()||t.appendChild(e.buildCharacterCountdownDom()),t}function p(e){var t=i.createContainer("ospm_editor_infomessage");return t.textContent=A,e.infoMessageDom=t,t}function f(t,n){var i,o,a,l,c;return a=n.okButton||{},l=n.cancelButton||{},t.dialogOkBtnLabel=a.label?a.label:"Übernehmen",c=l.label?l.label:"Abbrechen",i=s.createOkCancelDialog({okButton:{label:t.dialogOkBtnLabel,action:function(){a.action&&t.maxLengthPlugin?t.maxLengthPlugin.checkMaxLength(function(n){if((!n||n.result)&&n){try{a.action(t.getValue())}catch(o){throw e.fromError("Fehler in OK-Button-Funktion von FormattedTextEditor",o)}i.hide()}}):i.hide()}},cancelButton:{label:c,action:function(){if(l.action)try{l.action()}catch(t){throw e.fromError("Fehler in Cancel-Button-Funktion von FormattedTextEditor",t)}i.hide()}}}),i.fullScreenContainerDom.classList.add("ospm_dialogview_formattedtexteditor"),o=new r,o.dom.classList.add("ospm_dialogview_formattedtexteditorlayout"),o.addElement(t),i.setContent(o),i}function g(e){var t;e.editor=new c.Scribe(e.dom.querySelector(".ospm_editor"),{allowBlockElements:k}),e.editor.on("content-changed",function(){_(e)}),e.editor.use(c.scribePluginToolbar(e.dom.querySelector(".ospm_toolbar"))),e.editor.use(c.scribePluginSmartLists()),t=C(t,T),L.forEach(function(n){0!==(n.value&e.enabledButtons)&&(t=C(t,n.allowedTags))}),e.editor.use(c.scribePluginSanitizer(t)),e.editor.use(c.scribePluginFormatterPlainTextConvertNewLinesToHtml()),e.editor.use(c.scribePluginParagraphCommand()),e.editor.use(c.scribePluginCodeCommand()),e.editor.use(c.scribePluginKeyboardShortcuts(N)),e.maxLengthPlugin={},e.editor.use(c.scribePluginMaxLength({maxLength:e.maximumChars,resultCallback:function(t){e.maximumCharsCheckResult=t,y(e)},pluginSetter:function(t){e.maxLengthPlugin=t}}))}function _(e){e.dom.dataset.scrollupdate="1",e.getValue()?e.placeholderDom.classList.add("ospm_hidden"):e.placeholderDom.classList.remove("ospm_hidden"),v(e)}function v(e){e.maximumChars&&e.maxLengthPlugin&&e.maxLengthPlugin.checkMaxLength(function(t){e.updateCharacterCountdownDom(t.length,e.maximumChars)})}function b(e,t){return e&&""!==e?(t.forEach(function(t){e=e.replace(t.match,t.replace)}),!k&&x&&e.length>3&&"<br>"===e.substring(e.length-4)&&(e=e.substring(0,e.length-4)),e):e}function y(e,n){t.isSet(e.maximumCharsCheckResult)&&"boolean"==typeof e.maximumCharsCheckResult.result&&(n||!e.maximumCharsCheckResult.result?e.setError(O):e.setError(),e.dialog&&e.dialog.getFooter())}function C(e,t){return e=e||{tags:{}},t=t||[],t.forEach(function(t){e.tags[t]={}}),e}var w,E,L,S,D,T,I,k,x,A,O,N,M;return A="Die Verwendung von Formatierungen reduziert die Anzahl der verfügbaren Zeichen.",O="Sie haben die Zahl der zur Verfügung stehenden Zeichen überschritten, deswegen können Sie den Text nicht übernehmen. Bitte reduzieren Sie zunächst die eingegebenen Zeichen.",S=[{match:/<span class="ospm_underline">(.*)<\/span>/gi,replace:"<u>$1</u>"},{match:/<span style="text-decoration:underline">(.*)<\/span>/gi,replace:"<u>$1</u>"},{match:/<s>/gi,replace:"<strike>"},{match:/<\/s>/gi,replace:"</strike>"}],D=[{match:/<p><br><\/p>/gi,replace:"<br>"},{match:/<strike>/gi,replace:"<s>"},{match:/<\/strike>/gi,replace:"</s>"},{match:/<em>(.*)<\/em>/gi,replace:"<i>$1</i>"}],L=[{name:"code",label:"Festbreite",abbreviation:"M",cssClassName:"ospm_toolbar_btn_monospace",value:u.FTE_BUTTON.MONOSPACE,allowedTags:["code"]},{name:"strikeThrough",label:"Durchgestrichen",abbreviation:"S",cssClassName:"ospm_toolbar_btn_strikethrough",value:u.FTE_BUTTON.STRIKETHROUGH,allowedTags:["strike"]},{name:"italic",label:"Kursiv",abbreviation:"I",cssClassName:"ospm_toolbar_btn_italic",value:u.FTE_BUTTON.ITALIC,allowedTags:["i"]},{name:"bold",label:"Fett",abbreviation:"B",cssClassName:"ospm_toolbar_btn_bold",value:u.FTE_BUTTON.BOLD,allowedTags:["b","strong"]},{name:"underline",label:"Unterstreichen",abbreviation:"U",cssClassName:"ospm_toolbar_btn_underline",value:u.FTE_BUTTON.UNDERLINE,allowedTags:["u"]},{name:"paragraph",label:"Absatz",abbreviation:"P",cssClassName:"ospm_toolbar_btn_paragraph",value:u.FTE_BUTTON.PARAGRAPH,allowedTags:["p"]},{name:"insertUnorderedList",label:"Aufzählungszeichen",abbreviation:"UL",cssClassName:"ospm_toolbar_btn_unorderedlist",value:u.FTE_BUTTON.UNORDERED_LIST,allowedTags:["li","ul"]},{name:"insertOrderedList",label:"Nummerierung",abbreviation:"OL",cssClassName:"ospm_toolbar_btn_orderedlist",value:u.FTE_BUTTON.ORDERED_LIST,allowedTags:["li","ol"]}],M=42,N={bold:function(e){return(e.metaKey||e.ctrlKey)&&66===n.getEventCode(e)},underline:function(e){return(e.metaKey||e.ctrlKey)&&85===n.getEventCode(e)},italic:function(e){return(e.metaKey||e.ctrlKey)&&73===n.getEventCode(e)},strikeThrough:function(e){return(e.metaKey||e.ctrlKey)&&83===n.getEventCode(e)},code:function(e){return(e.metaKey||e.ctrlKey)&&77===n.getEventCode(e)}},T=["br"],k=!1,x=!0,w=a.subclass({dom:null,editor:null,editorDom:null,labelDom:null,placeholderDom:null,dialog:null,dialogOkBtnLabel:null,maximumChars:null,maximumCharsCheckResult:null,errorMessage:null,maxLengthPlugin:null,enabledButtons:null,constructor:function(e,t){e=e||{},this.stepData=t,d(e),this.enabledButtons=e.buttons,h(this),g(this),this.initializeFields(e),this.dialog=f(this,e),this.dialog.show(),y(this)},setLabel:function(e){e=e||"",this.labelDom.textContent=n.toHTMLText(e)},setValue:function(e){this.editor&&(e=t.isSet(e)?b(e,S):"",this.editor.setContent(e))},getValue:function(){return this.editor?b(this.editor.getHTML(),D):""},setValuePlaceholder:function(e){e=e||"",this.placeholderDom.textContent=n.toHTMLText(e)},setMaximumChars:function(e){this.maximumChars="number"==typeof e&&e>=0?e:0,v(this),this.maxLengthPlugin&&this.maxLengthPlugin.setMaxLength(this.maximumChars),this.maximumChars?this.infoMessageDom.classList.remove("ospm_hidden"):this.infoMessageDom.classList.add("ospm_hidden")},initializeFields:function(e){this.setLabel(e.label),this.setValue(e.value),this.setValuePlaceholder(e.valuePlaceholder),this.setMaximumChars(e.maximumChars),this.setErrorMessage(e.errorMessage),w.parent.initializeFields.call(this,e)},setErrorMessage:function(e){this.errorMessage="string"==typeof e?e:null},focus:function(){w.parent.focus.call(this),this.editorDom&&this.editorDom.focus()},getClassName:function(){return"FormattedTextEditor"}}),w.sanitizeText=function(e,n){var i,o;return o=C(o,T),L.forEach(function(e){o=C(o,e.allowedTags)}),i=c.scribePluginSanitizer(o,!0),e=t.isSet(e)?b(e,S):"",e=i.clean(e),e=t.isSet(e)?b(e,D):"","function"==typeof n&&n(e),e},w.getSetting=function(e){switch(e){case"allowedTags":return I;case"allowBlockElements":return k;case"removeBrSuffix":return x;default:return null}},E={isFocusable:function(){return this.isEnabled()}},w.proto(l.ErrorMixin,l.FocusableMixin,new l.TabIndexMixinFactory({domName:"editorDom"}),l.CharacterCountdownMixin,E),w}),define("tao/ospm/ui/widgets/InfoText",["tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/FormattedTextEditor","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a){function l(t){if(t.label&&t.formattedLabel)throw new e("Parameter label und formattedLabel können nicht zusammen verwendet werden.")}function c(e){var t,n=o.createLeftAlignedContainer("ospm_infotextfield ospm_labelfield");t=o.createContainer("ospm_list_entry_left_content_form_wrapper"),n.appendChild(t),e.dom=n,n.appendChild(e.buildLabelDom())}function u(e,t){r.replaceClassNameStartingWith(e.dom,"ospm_text_style","ospm_text_style_"+t)}function d(e){var t=e.showIcon;(void 0===t||null===t)&&(t=r.isNBF()?!0:r.isWithinList(e)),t?e.setLeftIcon(e.leftIcon):e.setLeftIcon()}var h;return h=n.subclass({stepData:null,showIcon:null,leftIcon:null,labelMarkupOptions:{decodeHTMLEntities:!0},constructor:function(e,t){e=e||{},this.stepData=t,l(e),c(this),this.initializeFields(e)},initializeFields:function(e){h.parent.initializeFields.call(this,e),e.formattedLabel?this.setFormattedLabel(e.formattedLabel):e.label?this.setLabel(e.label):this.dom.classList.add("ospm_empty_label"),this.setStyle(e.style),this.setShowIcon(e.showIcon),this.setIcon(e.hasOwnProperty("leftIcon")?e.leftIcon:r.isNBF()?{name:a.ICONS.INFO_CIRCLE_M,size:a.ICON_SIZE.MEDIUM_10}:{name:a.ICONS.INFO_CIRCLE_S,size:a.ICON_SIZE.SMALL_30}),this.setImportant(e.important),e.wrapMode&&this.setWrapMode(e.wrapMode),e.alignment&&this.setAlignment(e.alignment)},setAlignment:function(e){"center"===e?this.labelDom.classList.add("ospm_infotextfield_label_center"):this.labelDom.classList.remove("ospm_infotextfield_label_center")},getAlignment:function(){return this.labelDom.classList.contains("ospm_infotextfield_label_center")?"center":"left"},setStyle:function(e){e=e||"default",r.isNBF()?"highlight"==e&&(e="error"):"error"==e&&(e="highlight"),u(this,e)},setShowIcon:function(e){this.showIcon=e,d(this)},setImportant:function(e){e===!1?this.dom.classList.remove("ospm_important"):this.dom.classList.add("ospm_important")},setIcon:function(e){t.isObject(e)&&!e.size?e.size=a.ICON_SIZE.MEDIUM_10:t.isString(e)&&(e={name:e,size:a.ICON_SIZE.MEDIUM_10}),this.leftIcon=e,d(this)},setAsHint:function(e){e===!0?this.dom.classList.add("ospm_hint"):this.dom.classList.remove("ospm_hint")},setFormattedLabel:function(e){e?(this.dom.classList.remove("ospm_empty_label"),s.sanitizeText(e,function(e){this.labelDom.innerHTML=e,this.labelDom.classList.add("ospm_formattedtext")}.bind(this))):(this.labelDom.innerHTML="",this.labelDom.classList.remove("ospm_formattedtext"))},updateDisplay:function(){var e;h.parent.updateDisplay.call(this),e=this.dom.classList.contains("ospm_hint"),e&&this.dom&&this.dom.previousSibling&&this.dom.previousSibling.classList.add("ospm_entry_grouping"),d(this)},getClassName:function(){return"InfoText"},setBottomMargin:function(e){r.isNBF()?h.parent.setBottomMargin.call(this,e):n.setBottomPadding(this,e)}}),h.proto(i.LabelMixin,i.LeftIconMixin,i.WrapMixin),h.prototype.setLabel=function(e){e&&(this.dom.classList.remove("ospm_empty_label"),Array.isArray(e)&&t.isString(e[0])?e[0]=e[0].replace(/\n/g,"<br>"):t.isString(e)&&(e=e.replace(/\n/g,"<br>"))),i.LabelMixin.setLabel.call(this,e)},h}),define("tao/ospm/ui/views/AlertViewIsp",["tao/ospm/ui/widgets/Notification","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/InfoText","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/list/List","tao/ospm/ui/views/DialogView","tao/ospm/common/Toolkit","tao/ospm/common/DateFormatter","tao/ospm/common/Constants","tao/ospm/main/StartupConfig","tao/ospm/main/BacklinkHandler"],function(e,t,n,i,o,r,s,a,l,c,u){function d(t){var n,i,s,a={labelColor:"normal",lowerMargin:l.MARGIN.MEDIUM2};return a.icon=t.icon,a.label=t.title,a.subLabel=t.message,s=new o,a.style="small",s.addElement(new e(a)),i=r.createDialog({cancelOnOutsideClick:!1}),i.setContent(s),i.fullScreenContainerDom.classList.add("ospm_ospm_alertview"),n=h(i,t),n&&i.setFooter(n),i}function h(e,t){var n;return t.actionBack&&(n={label:"Zurück zur ISP",type:l.TYPES.NEGATIVE,action:function(){e.hide(),t.actionBack()}}),n?new i({centerButton:n}):null}var m;return m={displayError:function(e){var t,n={};e=e||{},n.icon="cancel_two_boxes_m",n.title=e.title||"Fehlerhafter Aufruf",n.message=e.message||"",c.hasBacklink()&&(n.actionBack=function(){u.dispatchBack()}),t=d(n),t.show()}}}),define("tao/ospm/ui/BaseSidebarInfo",["tao/lib/stapes","tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/core/CoreConstants","tao/ospm/ui/UIWorkflowHelper","tao/ospm/ui/UISecurityDialogHelper","tao/ospm/main/SidebarActions","tao/ospm/main/StartupConfig","tao/ospm/main/BacklinkHandler","tao/ospm/ui/views/AlertViewIsp","tao/ospm/core/PackageManager"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(e){return{title:e.title||t.RESPONSE_ACTION_DIALOG_DEFAULT_TITLE,text:e.text||t.RESPONSE_ACTION_DIALOG_DEFAULT_TEXT,okLabel:e.okLabel||t.RESPONSE_ACTION_DIALOG_DEFAULT_OK,cancelLabel:e.cancelLabel||t.RESPONSE_ACTION_DIALOG_DEFAULT_CANCEL,clearExitAction:e.clearExitAction||!1}}function p(){C&&(f.hasVorgangAblegen()?C.showExitButton():C.hideExitButton())}var f,g,_,v,b,y,C;return g="Optionale Pfade",_="kontext_gps",v="kontext_optionale_pfade",b="string",y="datetime",f={EVENT_VORGANG_ABLEGEN_CALLBACK:"vorgangAblegenCallback",EVENT_VORGANG_BEENDEN_CALLBACK:"vorgangBeendenCallback",EVENT_VORGANG_LOESCHEN_CALLBACK:"vorgangLoeschenCallback",EVENT_LEAVE_GROUP:"eventLeaveGroup",EVENT_OPEN_GROUP_DETAILS:"eventOpenGroupDetails",vorgangAblegen:null,vorgangBeenden:null,vorgangLoeschen:null,initialize:function(e){C=e,p()},getOptionalePfadeTitle:function(){return g},isWorkflowAction:function(e){return"object"==typeof e&&null!==e&&"undefined"!=typeof e.id&&"undefined"!=typeof e.entry},startWorkflow:function(){var e=i.argumentsToParameterObject(arguments,["workflowAction"]);f.emit(r.EVENT_START_WORKFLOW,e.workflowAction)},startDashboard:function(){var e;return t.ISP?void(c.hasBacklink()?u.dispatchBack():d.displayError({title:"Bitte schließen Sie dieses Fenster.",message:"Aufgrund eines fehlerhaften Aufrufs kann die Aktion nicht in OSPlus_neo fortgeführt werden. Bitte schließen Sie das Fenster und starten die Anwendung über die Integrierte Service Plattform neu."})):(e=i.argumentsToParameterObject(arguments,["dashboardAction"]).dashboardAction,e=e||{},e.id=n.WORKFLOW_DASHBOARD,e.entry="",e.data={},void f.emit(r.EVENT_START_WORKFLOW,e))},openURL:function(){var e=i.argumentsToParameterObject(arguments,["url"]);e.url&&document.OSPMEnvironment.openWindow(e.url)},showDialog:function(){function e(){n.okActions&&l.execute(n.okActions)}function t(){n.cancelActions&&l.execute(n.cancelActions)}var n,o;n=i.argumentsToParameterObject(arguments,["dialog","okActions","cancelActions"]),o=m(n.dialog||{}),""!==o.cancelLabel?s.showSecurityDialog(o,e,t):s.showSecurityOkDialog(o,e)},setVorgangAblegen:function(e){document.OSPMEnvironment.isDialogWorkflowActive()||(f.vorgangAblegen=e&&e.actions&&l.isActions(e.actions)?e:null,p())},hasVorgangAblegen:function(){return!!f.vorgangAblegen},hasVorgangBeenden:function(){return!!f.vorgangBeenden},hasVorgangLoeschen:function(){return!!f.vorgangLoeschen},startVorgangAblegen:function(){function e(){f.emit(f.EVENT_VORGANG_ABLEGEN_CALLBACK,function(){l.execute(t.actions,function(){f.setVorgangAblegen()})})}var t=f.vorgangAblegen;t&&(t.title?a.showSecurityDialog({title:t.title,text:t.text},function(){e()},function(){}):e())},callGpsFunction:function(e){var t;if(!e||"object"!=typeof e)throw new o("Notwendiger Parameter fehlt");if(t=i.fetchProperty(h.getApplicationAPI("gps"),e.name),"function"!=typeof t)throw new o("Funktion nicht gefunden",{name:e.name});i.callSafely("GpsOSPM."+e.name,t,e.parameter)}},f.INFORMATION_TYPE_STRING=b,f.INFORMATION_TYPE_DATETIME=y,f.AREA_KEY_GESCHAEFTSPROZESS=_,f.AREA_KEY_OPTIONALE_PFADE=v,f.UPDATE_ALL=1,f.UPDATE_TITLE=2,f.UPDATE_AREA=3,f.UPDATE_INFORMATION=4,f.UPDATE_AREA_GROUP=5,e.mixinEvents(f),l.setSidebarInfo(f),f}),define("tao/ospm/zoom/dummies/SidebarInfo",["tao/ospm/common/Toolkit","tao/ospm/ui/BaseSidebarInfo"],function(e,t){return e.merge(t,{icon:null,title:null,subTitle:null,information:{},optionalePfade:{},groups:{},workflowStepTitle:null,setIcon:function(){},getIcon:function(){return""},setTitle:function(){},getTitle:function(){return""},setSubTitle:function(){},getSubTitle:function(){return""},setInformation:function(){},hasInformation:function(){return!1},getInformation:function(){return null},clearInformation:function(){},setOptionalenPfad:function(){},clearOptionalePfade:function(){},hasOptionalePfade:function(){return!1},getOptionalePfade:function(){return{}},setGroupElement:function(){},setGroupService:function(){},hasGroups:function(){return!1},hasGroup:function(){return!1},getGroup:function(){return null},getGroups:function(){return{}},clearGroup:function(){},clearAll:function(){t.setVorgangAblegen()},isUpdateService:function(){return!1},executeRequest:function(){},setVorgangBeenden:function(){},setVorgangLoeschen:function(){},startVorgangBeenden:function(){},startVorgangLoeschen:function(){},setVorgangIcon:function(){}}),t}),define("tao/ospm/zoom/dummies/AdminTabView",["tao/ospm/core/CoreConstants","tao/ospm/ui/views/sidebar/SidebarTabView","tao/ospm/ui/SidebarInfo"],function(e,t,n){var i;return i=t.subclass({contextDataChanged:!0,contextDataChangeType:{},session:null,constructor:function(){this.initialize()},initialize:function(){n.on(e.EVENT_START_WORKFLOW,function(t){this.emit(e.EVENT_START_WORKFLOW,t)}.bind(this))},update:function(){},getStepTitle:function(){return""},markContextDataAsChanged:function(){},setContextDataChangedState:function(){},resetContextDataChangedState:function(){},getClassName:function(){return"AdminTabView"}}),i.addCustomButton=function(){},i.getCustomButton=function(){return null},i.removeCustomButton=function(){},i.removeAllCustomButtons=function(){},i.setCustomButtonEnabled=function(){},i.setStepTitle=function(){},i}),define("tao/ospm/zoom/dummies/SidebarView",["tao/lib/stapes","tao/ospm/core/CoreConstants","tao/ospm/ui/views/sidebar/AdminTabView"],function(e,t,n){function i(){}var o;return new(o=e.subclass({mutationListenerTimer:null,initialize:function(e){var i=e,o=new n;o.on(t.EVENT_START_WORKFLOW,function(e){i.emit(t.EVENT_START_WORKFLOW,e)})},setVisibility:i,getVisibility:function(){return t.STATE_HIDDEN_PERMANENTLY},isVisible:function(){return!1},updateNewMessageSign:i,addMutationEventListener:i,addTransitionendEventListener:i,returnToMainView:i,hideSidebarIcon:i,showSidebarIcon:i,getClassName:function(){return"SidebarView"}}))}),define("tao/ospm/ui/views/Lightbox",["tao/lib/stapes","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Constants","tao/ospm/ui/UIConstants","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/core/FullScreenWrapperMixin"],function(e,t,n,i,o,r,s,a){function l(e){E&&E.hide(),E=e}function c(e,t,n){return Array.isArray(e.naturalImageSizes)||(e.naturalImageSizes=[]),void 0===e.naturalImageSizes[n]&&(e.naturalImageSizes[n]={h:t.naturalHeight,w:t.naturalWidth}),e.naturalImageSizes[n]}function u(e,t,n){var i,r,s,a,l,u,f,g,_,y,C,w=1,E=!1,L=(t||e.currentGalleryImage)-1,S=e.getImageDom(L);return!S||!o.isRendered(e)||"number"==typeof n&&0>=n?void(n>0&&(e.zoomLevels[L]=null)):(s=c(e,S,L),S.classList.contains("ospm_icon")&&(E=!0,C=S.querySelector("use"),C&&(y=C.getAttribute("href").replace("#",""),_=document.getElementById(y))),S.style.left="",S.style.width="",S.style.height="",S.parentNode.style.width="",a=s.w,a||(_&&_.viewBox?(a=_.viewBox.baseVal.width,S.style.width=a+"px"):a=S.offsetWidth),l=s.h,l||(_&&_.viewBox?(l=_.viewBox.baseVal.height,S.style.height=l+"px"):l=S.offsetHeight),i=e.lightboxWrapper.offsetWidth,g=v(i,a,n),r=e.lightboxWrapper.offsetHeight,f=v(r,l,n),f>=g?(w=g,1!==w&&(u=Math.floor(w*a),S.style.width=u+"px",E&&(S.style.height=Math.floor(w*l)+"px"),S.style.left=u>i?(i-u)/2+"px":"")):(w=f,1!==w&&(u=Math.floor(w*l),S.style.height=u+"px",S.parentNode.style.width=S.offsetWidth+"px")),n=n||Math.floor(100*w),n<e.zoomLevels[L]&&(S.style.top=""),p(e,h(e.lightboxWrapper,S),m(e.lightboxWrapper,S)),d(e,S),e.zoomLevels[L]=n,void b(e,L,n))}function d(e,t){var n,i;o.isNBF()||(n=(e.lightboxWrapper.offsetWidth-t.offsetWidth)/2+L,i=(e.lightboxWrapper.offsetHeight-t.offsetHeight)/2+L,e.lightboxCloseButton.style.top=i>=L?i+"px":L+"px",e.lightboxCloseButton.style.right=n>=L?n+"px":L+"px")}function h(e,t){return t.offsetWidth>e.offsetWidth}function m(e,t){return t.offsetHeight>e.offsetHeight}function p(e,t,n){var i=document.OSPMEnvironment.isTouchDevice(),o=null,r="mousedown",s="mousemove",a=e.getImageDom(e.currentGalleryImage-1);i&&(r="touchstart",s="touchmove"),(e.data.xAxis!==t||e.data.yAxis!==n)&&(e.data.xAxis=t,e.data.yAxis=n,t&&!n?(o="e-resize",a.style.top=""):!t&&n?(o="n-resize",a.style.left=""):t&&n&&(o="move"),e.onDragStart||!t&&!n?t||n||(e.onDragStart&&(a.removeEventListener(r,e.onDragStart),e.onDragStart=null),e.onDragMove&&(a.removeEventListener(s,e.onDragMove),e.onDragMove=null),o="default",a.style.left="",a.style.top=""):(e.onDragStart=f(e,a,i),e.onDragMove=_(e,a,i),a.addEventListener(r,e.onDragStart),i?a.addEventListener("touchmove",e.onDragMove):e.onMouseUp=g(e,a))),!i&&o&&(a.style.cursor=o)}function f(e,t,n){return function(i){i.preventDefault(),n?i=i.changedTouches[0]:(i=i||window.event,t.addEventListener("mouseup",e.onMouseUp),t.addEventListener("mousemove",e.onDragMove)),e.data.xAxis&&(e.data.xPosStart=i.pageX),e.data.yAxis&&(e.data.yPosStart=i.pageY)}}function g(e,t){return function(){t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mousemove",e.onDragMove)}}function _(e,t,n){return function(i){var o,r,s,a,l;i.preventDefault(),i=n?i.changedTouches[0]:i||window.event,e.data.xAxis&&(a=e.data.xPosStart-i.pageX,e.data.xPosStart=i.pageX,o=t.offsetLeft-a,o>=0?o=0:Math.abs(o)+e.imageWrapperDom.parentNode.offsetWidth>=t.offsetWidth&&(o=-1*(t.offsetWidth-e.imageWrapperDom.parentNode.offsetWidth)),t.style.left=Math.ceil(o)+"px"),e.data.yAxis&&(l=e.data.yPosStart-i.pageY,e.data.yPosStart=i.pageY,r=t.offsetTop-l,s=Math.ceil((t.offsetHeight-e.lightboxWrapper.offsetHeight)/2),t.style.top=r>0&&r>=s?s+"px":0>r&&-1*s>=r?-1*s+"px":r+"px")}}function v(e,t,n){var i;return!n&&t>e?i=1/t*e:(n=n||100,i=n/100),i}function b(e,t){void 0===t&&(t=e.currentGalleryImage-1),e.zoomLevels[t]&&(e.zoomDisplay.innerHTML=e.zoomLevels[t]+"%")}function y(e){var t,n;return n=r.createContainer("ospm_lightbox"),e.imageWrapperDom=r.createContainer("ospm_image_wrapper"),n.appendChild(e.imageWrapperDom),e.galleryNavigationContainer=r.createContainer("ospm_lightbox_navigation"),n.appendChild(e.galleryNavigationContainer),t=e.wrapContent(n),e.lightboxWrapper=t.firstChild,t}function C(e){o.addKeyEventListener("keydown",e.dom,function(t){switch(o.getEventCode(t)){case n.KEYCODES.UP_ARROW:t.altKey&&(t.stopPropagation(),t.preventDefault(),e.hide());break;case n.KEYCODES.ESCAPE:t.stopPropagation(),t.preventDefault(),e.hide()}})}var w,E=null,L=22,S=10;return w=e.subclass({dom:null,lightboxWrapper:null,zoomDisplay:null,zoomLevels:null,lightboxCloseButton:null,onDragStart:null,onDragMove:null,onMouseUp:null,data:null,previewImageMapping:null,naturalImageSizes:null,constructor:function(e){this.data={},this.dom=y(this),this.initializeFields(e),C(this)},show:function(){o.preventBackgroundScrolling(!0,this.dom),this.savePreviousFocussedElement(),this.disableKeyboardNavigation(),l(this),document.body.appendChild(this.dom),u(this,this.currentGalleryImage),document.OSPMEnvironment.isTouchDevice()||this.setFocusToWrapper()},hide:function(){o.preventBackgroundScrolling(!1,this.dom),document.body.removeChild(this.dom),E=null,this.enableKeyboardNavigation(),this.returnFocusFromWrapper()},setZoom:function(e,t){u(this,t,e)},onResize:function(){u(this,this.currentGalleryImage),o.updateElement(this)},updateDisplay:function(){var e;if(this.isGalleryMode())for(e=0;e<this.numImages;e++)this.resizeResponsiveImage(e);else this.resizeResponsiveImage(null)},beforeImageChanged:function(e,t,n){var i=t-1,o=this.getImageDom(i);"function"==typeof this.imagePath[i]&&(o.addEventListener("load",function(e){e.target.parentNode.classList.contains("ospm_active")&&u(this,t)}.bind(this)),this.imagePath[i](function(e){o.src=e,this.imagePath[i]=""}.bind(this))),n(),p(this,!1,!1)},afterImageChanged:function(){u(this,this.currentGalleryImage)},setStartAtImage:function(e){this.currentGalleryImage="number"==typeof e?e+1:1},setPreviewImageMapping:function(e){var t;for(this.previewImageMapping=[],t=0;t<e.length;t++)this.previewImageMapping[t]=e[t].previewImageIndex},getClassName:function(){return"Lightbox"},initializeFields:function(e){this.zoomLevels=[],this.setStartAtImage(e.startAtImage),this.setImagePath(e.imagePath),this.setPreviewImageMapping(e.imagePath),this.setZoom(e.zoom),this.clearImageClickListeners()}}),w.proto(t.ImageMixin,t.OutsideClickMixin,a,{lightboxMode:!0,buildNavigationDom:function(){var e,a,l,c,u;t.ImageMixin.buildNavigationDom.call(this),u=this.galleryNavigationContainer.getElementsByClassName("ospm_next_image")[0],l=r.createContainer("ospm_lightbox_zoom_container"),o.isNBF()?(e=s.createSimpleIcon(n.ICONS.PLUS_S),e.classList.add("ospm_icon_lightbox_zoom_in")):e=s.createSimpleIcon("lightbox_zoom_in"),e.tabIndex=i.TABINDEXES.DEFAULT,o.addActionListener(e,function(){this.setZoom(this.zoomLevels[this.currentGalleryImage-1]+S)}.bind(this),!1,!0),c=r.createContainer("ospm_lightbox_zoom_display"),this.zoomDisplay=document.createElement("span"),c.appendChild(this.zoomDisplay),o.isNBF()?(a=s.createSimpleIcon(n.ICONS.MINUS_S),a.classList.add("ospm_icon_lightbox_zoom_out")):a=s.createSimpleIcon("lightbox_zoom_out"),a.tabIndex=i.TABINDEXES.DEFAULT,o.addActionListener(a,function(){this.setZoom(this.zoomLevels[this.currentGalleryImage-1]-S)}.bind(this),!1,!0),l.appendChild(a),l.appendChild(c),l.appendChild(e),l.setAttribute("aria-hidden","true"),this.lightboxCloseButton=s.createSimpleIcon("lightbox_close"),o.isNBF()&&(this.lightboxCloseButton=s.createIcon({name:n.ICONS.CANCEL_S,color:n.BASIC_COLOR.readable02},24),this.lightboxCloseButton.classList.add("ospm_clickable")),this.lightboxCloseButton.tabIndex=i.TABINDEXES.DEFAULT,o.addActionListener(this.lightboxCloseButton,this.hide.bind(this)),this.imageWrapperDom.appendChild(this.lightboxCloseButton),this.galleryNavigationContainer.insertBefore(l,u)
},getAvailableImageWidth:function(){var e=document.body.clientWidth,t=o.isMobile()?16:40;return e-=2*t},setImagePath:function(e){t.ImageMixin.setResponsiveImagePath.call(this,e,function(e){e.target.parentNode.classList.contains("ospm_active")&&u(this,this.currentGalleryImage)}.bind(this))},getNavigationIcon:function(e){var t;return o.isNBF()?"prev"===e?t=s.createSimpleIcon(n.ICONS.BACK_S):"next"===e&&(t=s.createSimpleIcon(n.ICONS.NEXT_S)):t=s.createSimpleIcon("lightbox_nav_"+e),t}}),w.onResize=function(){E&&E.onResize()},w.getShownLightbox=function(){return E},document.OSPMEnvironment&&(document.OSPMEnvironment.Lightbox=w),w}),define("tao/ospm/zoom/dummies/StartbarView",["tao/lib/stapes","tao/ospm/core/CoreConstants","tao/ospm/ui/IconFactory"],function(e,t,n){function i(e,t,i){var o=n.createIcon(t,64);e&&(e.insertBefore(o,e.firstChild),i&&i.forEach(function(e){o.classList.add(e)}))}var o=e.subclass({constructor:function(){},initialize:function(){i(document.getElementById("ospm_app_main_rightbar_button_container"),"menu_context_s"),i(document.getElementById("ospm_app_main_rightbar_button_container"),"menu_context_not_s")},setVisibility:function(){},getVisibility:function(){return t.STATE_HIDDEN_PERMANENTLY},isVisible:function(){return!1},deselectButtons:function(){},selectDashboardButton:function(){},getClassName:function(){return"StartbarView"}},!1);return new o}),define("tao/ospm/main/BaseModel",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError"],function(e,t,n){return e.subclass({data:{},constructor:function(e,t){var i;for(i=0;i<t.length;i++)if(void 0===e[t[i]])throw new n(t[i]+" not provided");this.data=e},getType:function(){return this.data.type},isActive:function(){return"boolean"==typeof this.data.active?this.data.active:!1},getProperty:function(e){return t.fetchProperty(this.data,e)},getClassName:function(){return"BaseModel"}})}),define("tao/ospm/main/Person",["tao/lib/stapes","tao/ospm/common/DateFormatter","tao/ospm/main/BaseModel"],function(e,t,n){var i,o=["persNr"];return i=n.subclass({constructor:function(e){n.prototype.constructor.call(this,e,o)},getPostAdresse:function(){return this.data.postAdresse},getStrasseUndHausnummer:function(){var e=this.getProperty("postAdresse.strasse"),t=this.getProperty("postAdresse.hausNr"),n=[];return e&&n.push(e),e&&t&&n.push(t),n.join(" ")},getPlzUndOrt:function(){var e=this.getProperty("postAdresse.plz"),t=this.getProperty("postAdresse.ort"),n=[];return e&&n.push(e),t&&n.push(t),n.join(" ")},hasHinweiseKartenfarbeRot:function(){var e=!1;return this.hasHinweise()?(this.data.hinweise.forEach(function(t){"R"===t.kartenFarbe&&(e=!0)}),e):e},hasHinweise:function(){return void 0!==this.data.hinweise&&this.data.hinweise.length>0},getHinweise:function(){return this.data.hinweise},getPersNr:function(){return this.data.persNr},getPersonenNr:function(){return this.data.personenNr},getPersArt:function(){return this.data.persArt},getPersUnterArt:function(){return this.data.persUnterArt},getAnrede:function(){return this.data.anrede},getTitel:function(){return this.data.titel},getVorname:function(){return this.data.vorname},getName:function(){return this.data.name},getNamenserw:function(){return this.data.namenserw},getVollenNamen:function(){var e=[];return this.getTitel()&&e.push(this.getTitel()),this.getVorname()&&e.push(this.getVorname()),this.getName()&&e.push(this.getName()),this.getNamenserw()&&e.push(this.getNamenserw()),e.join(" ")},getGebDatum:function(){return this.data.gebDatum},getAlter:function(){var e,t,n,i,o;return(e=this.getGebDatum())?(e=e.split("."),3!==e.length?"":(t=new Date(parseInt(e[2],10),parseInt(e[1],10)-1,parseInt(e[0],10),12),n=new Date,i=n.getUTCFullYear()-t.getUTCFullYear(),o=n.getMonth()-t.getMonth(),(0>o||0===o&&n.getDate()<t.getDate())&&i--,i)):""},getGruendungsDatum:function(){return this.data.gruendungsDatum},getGeschaeftsstelle:function(){return this.data.geschaeftsstelle},getServicecenter:function(){return this.data.servicecenter},getBeraterplatz:function(){return this.data.beraterplatz},getGeschlecht:function(){return this.data.geschlecht},isGeschuetzt:function(){return this.data.geschuetzt},getSchutzText:function(){return this.data.schutzText},getInteressentenTyp:function(){return this.data.interessentenTyp},getClassName:function(){return"Person"}}),i.GESCHLECHT_MAENNLICH="M",i.GESCHLECHT_WEIBLICH="W",i}),define("tao/ospm/main/Vertrag",["tao/lib/stapes","tao/ospm/main/BaseModel"],function(e,t){var n,i=[];return n=t.subclass({constructor:function(e){t.prototype.constructor.call(this,e,i)},getKontoId:function(){return this.data.kontoId},getKontoNr:function(){return this.data.kontoNr},getAnzeigeKontoNr:function(){return this.data.anzeigeKontoNr},getProduktName:function(){return this.data.produktName},getProduktErgaenzung:function(){return this.data.produktErgaenzung},getKontoStatus:function(){return this.data.kontoStatus},getVeBeginn:function(){return this.data.veBeginn},getVeEnde:function(){return this.data.veEnde},getWaehrungsschluessel:function(){return this.data.waehrungsschluessel},getSubtype:function(){return this.data.subtype},getGpVariante:function(){return this.data.gpVariante},getAz:function(){return this.data.az},getSaldo:function(){return this.data.saldo},getPersNr:function(){return this.data.persNr},getBlz:function(){return this.data.blz},getBprSchabloneName:function(){return this.data.bprSchabloneName},getBprSubkategorie:function(){return this.data.bprSubkategorie},getInformation:function(){return this.data.information},getVeBeginnPrfgKz:function(){return this.data.veBeginnPrfgKz},getIban:function(){return this.data.iban},getPersonenVorname:function(){return this.data.personenVorname},getPersonenName:function(){return this.data.personenName},getPersonenNamenserw:function(){return this.data.personenNamenserw},getPersonenNr:function(){return this.data.personenNr},getClassName:function(){return"Vertrag"}})}),define("tao/ospm/main/AppStorage",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/common/Config","tao/ospm/common/Logger"],function(e,t,n,i){function o(e,t){var n=t===!0?a:s,i=n[e];return i||(i={},n[e]=i),i}var r,s={},a={},l=new i("OSPM","AppStorage");return new(r=e.subclass({constructor:function(){},getData:function(e,t,n){var i=o(e,n);return i[t]},putData:function(e,i,r,s){var a,c=n.APP_STORAGE_MAX_VALUE_SIZE;return t.roughSizeOfObject(r,c)>c?(l.warning("Größe von value überschreitet zulässiges Maximum von "+c+" Bytes"),!1):(a=o(e,s),a[i]=r,!0)},getKeys:function(e,n){var i=o(e,n);return t.getKeys(i)},clearData:function(e,t){void 0===t?(a[e]={},s[e]={}):t?a[e]={}:s[e]={}},clearAllData:function(e){void 0===e?(a={},s={}):e?a={}:s={}},getClassName:function(){return"AppStorage"}}))}),define("tao/ospm/main/Persistence",["tao/ospm/common/Toolkit","tao/ospm/core/ServerCommunication"],function(e,t){function n(e,n){t.executeRequest(e,{},function(e){o(n,e)})}function i(e,n,i,r){t.executeRequest(e,n,function(e,t){void 0===t||0===t.length?o(i):o(r,t)})}function o(t){t&&e.callSafely.apply(this,arguments)}var r={lesePerson:function(e,n,i){var r={};e?(r.persNr=e,t.executeRequest("ospm.personLesen",r,function(e,t){void 0===t||0===t.length?o(n,e,t):o(i,e,t)})):o(i)},personAdd:function(e,t,n,o){i("ospm.dashboardPersonAdd",{persNr:e,personenNr:t},o,n)},personGetAll:function(e){n("ospm.dashboardPersonGetAll",e)},personRemove:function(e,t,n){i("ospm.dashboardPersonRemove",{persNr:e},n,t)},personRemoveAll:function(e,t){i("ospm.dashboardPersonRemoveAll",{},t,e)},vorgangAdd:function(e,t,n,o,r){i("ospm.dashboardVorgangAdd",{vorgangsId:e,vorgangsNr:t,vorgangsData:r},o,n)},vorgangGetAll:function(e){n("ospm.dashboardVorgangGetAll",e)},vorgangRemove:function(e,t,n){i("ospm.dashboardVorgangRemove",{vorgangsId:e},n,t)},vorgangRemoveAll:function(e,t){i("ospm.dashboardVorgangRemoveAll",{},t,e)}};return r}),define("tao/ospm/main/NeoSession",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/main/Person","tao/ospm/main/Vertrag","tao/ospm/main/AppStorage","tao/ospm/common/OSPMError","tao/ospm/main/Persistence","tao/ospm/common/Config"],function(e,t,n,i,o,r,s,a){function l(e,i){b=e instanceof n?new n(t.deepCopy(e.data)):null!==e&&"object"==typeof e?new n(t.deepCopy(e)):null,i&&(v=b)}function c(e){y=e instanceof i?new i(t.deepCopy(e.data)):null!==e&&"object"==typeof e?new i(t.deepCopy(e)):null}function u(e,t,n,i){var o;if(c(t),n&&!y&&(e=null),l(e,i),y&&!b)throw new r("Vertrag ohne zugehörige Person gesetzt");d()?m():b&&b.data&&(o=b,s.lesePerson(o.data.persNr,function(e){if(o===b){if(!e.NEO_PERSON||!e.NEO_PERSON.persNr)throw new r("Fehler beim Lesen von Personendaten: keine oder unvollständige Daten",{persNr:o.data.persNr,result:e});l(e.NEO_PERSON,i),m()}},function(e,t){throw new r("Fehler beim Lesen von Personendaten",{persNr:o.data.persNr,result:e,messages:t})}))}function d(){var e;if(!b||a.IF)return!0;if(e=b.data,!t.isStringProvided(e.persNr))throw new r("Personendaten: keine persNr vorhanden");return t.isStringProvided(e.personenNr)&&t.isStringProvided(e.persArt)&&t.isStringProvided(e.geschaeftsstelle)&&t.isObject(e.postAdresse)&&t.isArray(e.hinweise)}function h(e){var n,i={steps:[]};if("object"!=typeof e)throw new r("Ungültige oder unvollständige ProgressInformationen übergeben");if(!t.isArray(e.steps))throw new r('Übergebene ProgressInformationen fehlerhaft für "steps"-Feld: Kein Array');if(t.isSet(e.title)){if("string"!=typeof e.title)throw new r('Übergebene ProgressInformationen fehlerhaft für "title"-Feld',{title:e.title});i.title=e.title,n=e.steps}else{if(e.steps.length<1)throw new r('Übergebene ProgressInformationen enthalten kein "title"-Feld und keine Steps');i.title=e.steps[0].label,n=e.steps.slice(1)}if("number"!=typeof e.currentStep||e.currentStep<-1||e.currentStep>e.steps.length)throw new r('Übergebene ProgressInformationen fehlerhaft für "currentStep"-Feld',{currentStep:e.currentStep});return i.currentStep=e.currentStep,n.forEach(function(e){if("string"!=typeof e.label)throw new r('Übergebene ProgressInformationen fehlerhaft: Step ohne gültiges "label"',{step:e});i.steps.push({label:e.label,subLabel:e.subLabel})}),i}function m(){_.emit(_.PERSON_CHANGED),p()}function p(){o.clearAllData(!1),_.emit(_.DATA_CHANGED)}function f(e){return e&&t.deepCopy(e.data)}var g,_,v=null,b=null,y=null,C=null,w=null;return g=e.subclass({DATA_CHANGED:"dataChanged",PERSON_CHANGED:"personChanged",PROGRESS_SHOWN:"progressShown",PROGRESS_HIDDEN:"progressHidden",PROGRESS_UPDATE:"progressUpdate",constructor:function(){},clear:function(){b=null,y=null,C&&C.call(),p()},getPerson:function(){return b},getPersonData:function(){return f(b)},getVertragData:function(){return f(y)},setPerson:function(e){u(e,null,!1)},setInitialPerson:function(e){u(e,null,!1,!0)},getInitialPersonData:function(){return f(v)},getInitialPersNr:function(){return v&&v.getPersNr()},getVertrag:function(){return y},setVertrag:function(e,t){u(t,e,!0)},setDeleteListener:function(e){if(null!==e&&"function"!=typeof e)throw new r("Übergebener deleteListener ist nicht null und keine Funktion");C=e},setProgressInformation:function(e){e?(w=h(e),_.emit(_.PROGRESS_SHOWN,{steps:w.steps.length,currentStep:w.currentStep})):(w=null,_.emit(_.PROGRESS_HIDDEN))},getProgressInformation:function(){return w?t.deepCopy(w):null},setCurrentStep:function(e){if(!w)throw new r("Es wurde versucht, über setCurrentStep den Step zu setzen, ohne dass vorher die Prozessinformationen gesetzt wurden.");if(!t.isNumeric(e))throw new r("Übergebener Step ist nicht numerisch");if("number"!=typeof e&&(e=parseInt(e,10)),-1>e)throw new r("Step ist kleiner -1");if(e>w.steps.length)throw new r("Step ist größer als die Anzahl Steps");w.currentStep=e,_.emit(_.PROGRESS_UPDATE,{steps:w.steps.length,currentStep:e})},getCurrentStep:function(){if(!w)throw new r("Es wurde getCurrentStep aufgerufen, bevor die Prozessinformationen gesetzt wurden.");return w.currentStep}},!1),_=new g,document.OSPMEnvironment&&(document.OSPMEnvironment.NeoSession=_),_}),define("tao/ospm/main/WorkflowDialogStack",["tao/lib/stapes","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/main/WorkflowStepCodeLoader","tao/ospm/ui/views/DialogView","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/Footer","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/mixins/events/MutationEventMixin","tao/ospm/common/Config","tao/ospm/ui/UIConstants","tao/ospm/ui/layouts/Layout","tao/ospm/ui/widgets/list/List"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p){function f(e,t){e.dialog&&e.currentStep&&(e.currentStep.hasDialogMutationListener||(e.currentStep.hasDialogMutationListener=!0,u.addMutationEventListener({element:t,bindToDom:t,listener:function(){g(e)},filterElements:[],eventTypeNames:{attributesStyle:{},attributesClass:{},childListAddedNodes:{},childListRemovedNodes:{}}})))}function g(e){e.updateCounter=0,_(e)}function _(e){var t;if(e.dialog)for(t=x.length-1;t>=0&&(x[t]===e&&(v(e),e.updateCounter<A.length&&n.executeLater(function(){_(e)},A[e.updateCounter++])),x[t].dialog!==e.dialog);t--);}function v(e){var t,n,i,o,r,s,a=e.currentStep;if(a&&a.TaoOSPM){if(r=a.mapiDom,n=document.documentElement.offsetHeight-(e.dialog.getFooter().isHidden()?64:128),r&&k)t=k(r);else{if(i=y(e),!i)return;t=i.getCompleteHeight()}t=e.maximizeHeight?document.documentElement.scrollHeight:t,b(e,n,t)&&(o=e.dialog.dom.querySelector(".ospm_app_main_right_content"),o.style.height=t>n?n+"px":t+"px",e.dialog.syncView(),c.callOnResizeOnAllElements(i)),c.isNBF()&&(o=e.dialog.dom.querySelector(".ospm_app_main_right_content"),s=o.querySelector(".ospm_columns_container"),s&&(o.style.height=s.offsetHeight+"px"))}}function b(e,t,n){var i=Math.abs(n-e.currentLayoutHeight),o=i<=Math.max(d.DIALOG_MAX_TOLERANCE_FOR_HEIGHT_UPDATE,0);return t===e.currentWindowHeight&&(0>=n||0===i||o&&e.hadSmallChange)?!1:(e.hadSmallChange=i>0&&o,e.currentWindowHeight=t,e.currentLayoutHeight=n,!0)}function y(e){var t,n=e.currentStep&&e.currentStep.layout;return n instanceof m?t=n:n instanceof p&&(e.dialog.dom.classList.add("ospm_dialogview_clean_header"),e.dialog.fullScreenContainerDom.classList.remove("ospm_dialogview_wide"),t=n.getParent()),t}var C,w,E,L,S,D,T,I,k,x=[],A=[0,10,100,1e3];return C=new t("OSPM","WorkflowDialogStack"),w={initialize:function(e,t,n){L=e,S=t,D=n,I=document.getElementById(h.WORKFLOWSTEP_CONTAINER_WRAPPER_ID),T=I.parentNode},setMapiHeightProvider:function(e){k=e},push:function(e){var t;C.info("Wechsle in einen Sub-Workflow(Step) in Dialogansicht (Tiefe %o), Optionen: %o",x.length+1,e),t=new E(e),x.push(t),document.OSPMEnvironment.setDialogWorkflowActive(Boolean(t.dialog))},pop:function(){C.info("Verlasse Sub-Workflow(Step) in Dialogansicht (Tiefe %o)",x.length),x.pop().restore(),document.OSPMEnvironment.setDialogWorkflowActive(x.length>0&&Boolean(x[x.length-1].dialog))},clear:function(){for(C.info("Schliesse alle offenen Workflow-Dialoge");x.length>0;)w.pop()},getDepth:function(e){var t,n=0;if(!e)return x.length;for(t=0;t<x.length;t++)x[t].isDialog&&n++;return n},onResize:function(){x.forEach(g)},setCurrentStep:function(e){x.length>0&&x[x.length-1].setCurrentStep(e)},setCurrentDialogMaximized:function(e){if(0===x.length)throw new i("Die Anzeige des aktuellen Workflow-Dialogs kann nicht geändert werden, da kein Workflow-Dialog aktiv ist.");x[x.length-1].setMaximizeHeight(e)},isCurrentDialogMaximized:function(){return x.length>0&&x[x.length-1].isMaximizeHeight()}},E=e.subclass({dialog:null,isDialog:!1,isProvidedDialog:!1,dom:null,appViewData:null,workflowStepManagerData:null,workflowEngineData:null,codeLoaderData:null,dialogViewData:null,currentHeight:0,currentStep:null,maximizeHeight:!1,maximizeWidth:!1,currentWindowHeight:0,currentLayoutHeight:0,updateCounter:0,constructor:function(e){var t,n;e=e||{},e.inContentArea?(x.length>0?(n=x[x.length-1],t=n.dom,this.dialog=n.dialog,this.maximizeHeight=n.maximizeHeight,this.maximizeWidth=n.maximizeWidth):t=I,this.dom=l.createContainer(this.dialog?"ospm_dialogview_content":""),t.parentNode.replaceChild(this.dom,t),document.getElementById(h.WORKFLOWSTEP_CONTAINER_WRAPPER_ID)||(this.dom.id=h.WORKFLOWSTEP_CONTAINER_WRAPPER_ID)):(this.maximizeHeight=e.maximizeHeight,this.maximizeWidth=e.maximizeWidth,e.inDialog?(this.dialog=e.inDialog,this.isProvidedDialog=!0):(this.dialog=new r({header:new s,footer:new a,maximizeHeight:this.maximizeHeight,maximizeWidth:this.maximizeWidth}),this.dialog.dom.classList.add("ospm_dialog_invisible"),this.dialog.fullScreenContainerDom.classList.add("ospm_dialogview_wide"),this.dialog.fullScreenContainerDom.classList.add("ospm_dialogview_workflow"),this.dialog.show()),this.isDialog=!0,this.dom=this.dialog.fullScreenContainerContentDom),this.dialogViewData=r.saveDialogViewData(),this.appViewData=L.switchWorkflowStepView(this.dom,this.dialog&&this.dialog.getHeader(),this.dialog&&this.dialog.getFooter()),this.workflowStepManagerData=S.saveWorkflowStepData(),this.workflowEngineData=D.saveWorkflowEngineData(),this.codeLoaderData=o.saveCodeData()},restore:function(){var e,t;o.restoreCodeData(this.codeLoaderData),D.restoreWorkflowEngineData(this.workflowEngineData),S.restoreWorkflowStepData(this.workflowStepManagerData),L.restoreWorkflowStepView(this.appViewData),r.restoreDialogViewData(this.dialogViewData),this.isDialog?this.isProvidedDialog?this.dialog.dom.querySelector(".ospm_app_main_right_content").remove():this.dialog.hide():(x.length>0?(t=x[x.length-1],e=t.dom,t.currentWindowHeight=-1):e=I,this.dom.parentNode.replaceChild(e,this.dom))},setCurrentStep:function(e){var t;e?(t=o.getRootContentElement(document.getElementById(e.getFrameId())),e!==this.currentStep&&(this.currentStep=e,f(this,t.parentNode)),this.dialog&&(t.classList.add("ospm_dialog_wf"),e.mapiDom||e.layout?(g(this),this.dialog.dom.classList.remove("ospm_dialog_invisible")):r.isShowingDialogs()&&this.dialog.dom.classList.add("ospm_dialog_invisible"))):this.currentStep=null},setMaximizeHeight:function(e){this.isDialog&&this.maximizeHeight!==e&&(this.maximizeHeight=e,this.dialog&&(this.dialog.setMaximizeHeight(e),g(this)))},isMaximizeHeight:function(){return this.maximizeHeight}}),r.addGlobalHideListener(function(){var e;x.length>0&&!r.isShowingDialogs()&&(e=x[x.length-1],e.currentStep&&e.currentStep.TaoOSPM&&e.dialog&&(g(e),e.dialog.dom.classList.remove("ospm_dialog_invisible")))}),w}),define("tao/ospm/ui/views/PageHeaderView",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/ui/IconFactory","tao/ospm/core/DomFactory","tao/ospm/common/OSPMError","tao/ospm/core/OSPMPage","tao/ospm/common/Config","tao/ospm/ui/layouts/Layout"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e){var t,n,i,o,r,s;return t=a.createContainer(),t.id="ospm_page_header_view",n=a.createContainer("ospm_horizontal_flex_container"),r=a.createElement("h1","ospm_title"),e.titleDom=a.createInlineContainer(),r.appendChild(e.titleDom),s=a.createContainer("ospm_context_title"),e.contextTitleDom=a.createInlineContainer(),s.appendChild(e.contextTitleDom),n.appendChild(r),n.appendChild(s),t.appendChild(n),i=a.createContainer("ospm_horizontal_flex_container"),e.progressBarDom=a.createContainer("ospm_progressbar_wrapper"),i.appendChild(e.progressBarDom),o=a.createContainer("ospm_action_bar"),i.appendChild(o),t.appendChild(n),t.appendChild(i),t}function m(e){function t(){e.getState()===H&&e.clickListener&&e.clickListener()}o.addActionListener(e.dom,t)}function p(e){f(e.progressBar)}function f(e){if(i.isObject(e)&&("function"!=typeof e.getClassName||"ProgressBar"!==e.getClassName()))throw new l("Invalid ProgressBar")}function g(e,t){e.setTitle(t.title||null),e.setContextTitle(t.contextTitle||null),e.setProgressBar(t.progressBar||null),_(e,t)}function _(e,n){var i=e.dom.querySelector(".ospm_action_bar");e.exitButton=new M({cssClass:"ospm_action_button ospm_action_button_exit",label:"Merken"}),o.isNBF()&&e.exitButton.setIcon({name:t.ICONS.BOOKMARK_S,size:16}),e.appointmentButton=new M({cssClass:"ospm_action_button ospm_action_button_appointment",label:"Termin"}),e.helpButton=new M({cssClass:"ospm_action_button ospm_action_button_help",label:"Hilfe"}),o.isNBF()&&e.helpButton.setIcon({name:t.ICONS.HELP_CIRCLE_S,size:16}),e.previousStepButton=new M({cssClass:"ospm_button_prev",state:U,title:"Vorherige Seite öffnen",icon:"header_prev"}),e.previousStepTextButton=new M({cssClass:"ospm_button_prev_text",state:U,icon:t.ICONS.BACK_CIRCLE_S}),e.nextStepButton=new M({cssClass:"ospm_button_next",state:U,title:"Nächste Seite öffnen",icon:"header_next"}),e.voiceRecordButton=new M({cssClass:"ospm_button_voicerecord",state:U,title:"Sprachaufzeichnung"}),v(e.exitButton,n.exitButtonCfg),v(e.appointmentButton,n.appointmentButtonCfg),v(e.helpButton,n.helpButtonCfg),v(e.previousStepButton,n.previousStepButtonCfg),v(e.previousStepTextButton,n.previousStepButtonCfg),v(e.nextStepButton,n.nextStepButtonCfg),v(e.voiceRecordButton,n.voiceRecordButtonCfg),i.appendChild(e.exitButton.dom),i.appendChild(e.appointmentButton.dom),i.appendChild(e.helpButton.dom),e.separator=a.createContainer("ospm_header_actionbar_separator"),i.appendChild(e.separator),i.appendChild(e.previousStepButton.dom),i.appendChild(e.nextStepButton.dom),i.appendChild(e.voiceRecordButton.dom)}function v(e,t){t=t||{},"undefined"!=typeof t.label&&e.setLabel(t.label),"undefined"!=typeof t.state&&e.setState(t.state),"undefined"!=typeof t.clickListener&&e.setClickListener(t.clickListener)}function b(e){o.toggleClassName(e.separator,"ospm_hidden",e.previousStepButton.getState()===U&&e.nextStepButton.getState()===U&&e.voiceRecordButton.getState()===U)}function y(){if(u.IF){if(!(z&&B||(z=document.querySelector(o.isIFWebView()?".loginlogout":u.IF_SELECTOR_ICONBAR),B=document.getElementById(r.OSPM_APP_HEADER_WRAPPER),z&&B)))return void P.error("IF relevante Dom-Elemente konnten nicht gefunden werden.");o.isMobile()&&!o.isNBF()?F.parentNode===B&&(o.isIFWebView()?z.firstChild?z.insertBefore(F,z.firstChild):z.appendChild(F):o.replaceAllChildren(z,F)):F.parentNode===z&&o.replaceAllChildren(B,F)}}function C(e){if("string"==typeof e.previousStepText)if(o.isMobile()){var t=S(e.progressBar)?S(e.progressBar).classList.contains("ospm_hidden"):!0;!e.progressBar||t||o.isNBF()?(A(e),o.replaceAllChildren(e.progressBarDom,e.previousStepTextButton.dom)):o.replaceAllChildren(e.progressBarDom,e.progressBar.dom)}else A(e),o.replaceAllChildren(e.progressBarDom,e.previousStepTextButton.dom);else e.progressBar?o.replaceAllChildren(e.progressBarDom,e.progressBar.dom):o.removeAllChildren(e.progressBarDom)}function w(e){e.syncTimer=i.executeLater(function(){b(e),y(e),C(e),e.syncTimer=null,E(),u.IF&&o.isNBF()&&(d.onHeightChange(),i.executeLater(function(){d.onHeightChange()},250),i.executeLater(function(){d.onHeightChange()},1e3))},V,e.syncTimer),L(e),E()}function E(){if(o.isNBF()){var e=F.getBoundingClientRect().height,t=document.querySelector("#ospm_app_main .ospm_page_container");t&&(t.style.paddingTop=e+"px")}}function L(e){var t,n,i;t=S(e.progressBar)?S(e.progressBar).classList.contains("ospm_hidden"):!0,n=S(e.previousStepTextButton)?e.previousStepTextButton.getState()===U:!0,i=t&&n,o.toggleClassName(e.titleDom,"ospm_only_title",i)}function S(e){return e?e.dom:null}function D(e){F&&(F.style.marginTop=c.isWideDisplay()&&!u.IF?-e+"px":"0")}function T(e,t){"string"==typeof t&&t.length>0?(e.previousStepText=t,e.previousStepTextButton.setLabel(t),e.previousStepButtonState=e.previousStepButton.getState(),e.previousStepButton.setState(U),I(e)):(e.previousStepText=null,e.previousStepButton.setState(e.previousStepButtonState),e.previousStepButtonState=null,k(e))}function I(e){e.previousStepTextButton.setState(H),w(e)}function k(e){e.previousStepTextButton.setState(U),w(e)}function x(){return R.querySelector(".ospm_page_container")}function A(e){var t,n;e.isPreviousStepTextButtonInPage()&&(t=x(),t&&(n=t.querySelector("ospm_button_prev_text"),n&&t.removeChild(n)))}function O(e){e.textDom&&(e.dom.removeChild(e.textDom),e.textDom=null)}var N,M,P,R,F,B,z,V,H,U,W;return P=new n("OSPM","PageHeaderView"),V=50,H="ospm_visible",U="ospm_hidden",W="ospm_disabled",M=e.subclass({dom:null,labelDom:null,textDom:null,label:null,title:null,state:null,clickListener:null,constructor:function(e){e=e||{},this.dom=a.createContainer(e.cssClass||""),this.labelDom=a.createInlineContainer("",""),this.dom.appendChild(this.labelDom),this.dom.setAttribute("role","button"),this.setIcon(e.icon),this.setLabel(e.label),this.setTitle(e.title),this.setState(e.state),this.setClickListener(e.clickListener),m(this)},setLabel:function(e){this.label=e,e?(O(this),this.labelDom.textContent=o.toHTMLText(e)):this.labelDom.textContent=""},setTitle:function(e){this.title=e,O(this),this.label?e?this.dom.setAttribute("title",o.toHTMLText(e)):this.dom.removeAttribute("title"):(this.textDom=a.createInlineContainer("ospm_non_visible_text",this.title),this.dom.appendChild(this.textDom))},setIcon:function(e){var t=this.dom.querySelector(".ospm_icon");t&&this.dom.removeChild(t),e&&this.dom.insertBefore(s.createIcon(e),this.dom.firstChild)},setState:function(e){e===U?(this.state=U,this.dom.classList.remove("ospm_disabled"),this.dom.classList.add("ospm_hidden"),this.dom.removeAttribute("tabindex")):e===W?(this.state=W,this.dom.classList.add("ospm_disabled"),this.dom.classList.remove("ospm_hidden"),this.dom.removeAttribute("tabindex"),this.dom.setAttribute("aria-disabled","true")):(this.state=H,this.dom.classList.remove("ospm_disabled"),this.dom.classList.remove("ospm_hidden"),this.dom.setAttribute("tabindex",r.TABINDEXES.PAGE_HEADER),this.dom.setAttribute("aria-disabled","false"))},getState:function(){return this.state},setClickListener:function(e){this.clickListener="function"==typeof e?e:null}}),N=e.subclass({dom:null,titleDom:null,contextTitleDom:null,progressBarDom:null,progressBar:null,exitButton:null,appointmentButton:null,helpButton:null,previousStepButton:null,previousStepTextButton:null,previousStepText:null,nextStepButton:null,voiceRecordButton:null,topPosition:0,syncTimer:null,constructor:function(e){var t=e||{};R=document.getElementById(r.OSPM_APP),F=document.getElementById(r.OSPM_APP_HEADER),this.state={},p(t),this.dom=h(this),g(this,t),w(this)},getState:function(){return{title:this.state.title,contextTitle:this.state.context,progressBar:this.progressBar,previousStepTextButtonLabel:this.state.previousStepTextButtonLabel,exitButton:this.exitButton.getState(),voiceRecordButton:this.voiceRecordButton.getState(),appointmentButton:this.appointmentButton.getState(),helpButton:this.helpButton.getState(),nextStepButton:this.nextStepButton.getState(),previousStepButton:this.previousStepButton.getState()}},restoreState:function(e){this.setTitle(e.title),this.setContextTitle(e.contextTitle),this.setProgressBar(e.progressBar),this.setPreviousStepTextButtonLabel(e.previousStepTextButtonLabel),this.exitButton.setState(e.exitButton),this.voiceRecordButton.setState(e.voiceRecordButton),this.appointmentButton.setState(e.appointmentButton),this.helpButton.setState(e.helpButton),this.nextStepButton.setState(e.nextStepButton),this.previousStepButton.setState(e.previousStepButton)},setTitle:function(e){this.state.title=e,e?a.createMarkupDomTree(null,this.titleDom,e,{maxChars:26}):this.titleDom.textContent=""},setProgressBar:function(e){i.isSet(e)?(f(e),this.progressBar=e):this.progressBar=null,w(this)},getProgressBar:function(){return this.progressBar},setContextTitle:function(e){this.state.context=e,e?a.createMarkupDomTree(null,this.contextTitleDom,e):this.contextTitleDom.textContent=""},hideExitButton:function(e){this.exitButton.setState(e?W:U),w(this)},showExitButton:function(){this.exitButton.setState(H),w(this)},hideVoiceRecordButton:function(){this.voiceRecordButton.setState(U),w(this)},showVoiceRecordButton:function(){this.voiceRecordButton.setState(H),w(this)},hideAppointmentButton:function(e){this.appointmentButton.setState(e?W:U),w(this)},showAppointmentButton:function(){this.appointmentButton.setState(H),w(this)},hideHelpButton:function(e){this.helpButton.setState(e?W:U),w(this)},showHelpButton:function(){this.helpButton.setState(H),w(this)},hideNextStepButton:function(e){this.nextStepButton.setState(e?W:U),w(this)},showNextStepButton:function(){this.nextStepButton.setState(H),w(this)},hidePreviousStepButton:function(e){this.previousStepButton.setState(e?W:U),this.previousStepTextButton.setState(e?W:U),k(this),w(this)},showPreviousStepButton:function(){this.previousStepText?T(this,this.previousStepText):(this.previousStepButton.setState(H),T(this)),w(this)},setPreviousStepTextButtonLabel:function(e){this.state.previousStepTextButtonLabel=e,T(this,e),w(this)},setTopPosition:function(e){this.topPosition!==e&&(this.topPosition=e),D(e)},getClassName:function(){return"PageHeaderView"},isPreviousStepTextButtonInPage:function(){var e=x();return e&&e.firstChild===this.previousStepTextButton.dom},onResize:function(){w(this),this.progressBar&&this.progressBar.onResize(),F&&(F.style.width=c.isWideDisplay()?"":R.innerWidth-128+"px",this.setTopPosition(this.topPosition))},updateDisplay:function(){w(this)}}),N.SYNC_TIMEOUT=V,N.BUTTON_STATE_VISIBLE=H,N.BUTTON_STATE_HIDDEN=U,N.BUTTON_STATE_DISABLED=W,N}),define("tao/ospm/ui/views/PageFooterView",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s){function a(e,t,n){e.parentNode!==t&&(e.parentNode&&e.parentNode.removeChild(e),n&&t.appendChild(e))}function l(e){return e.classList.contains(p)}function c(e,t){t?d(e):u(e)}function u(e){e.classList.remove(f),e.classList.remove(p)}function d(e){e.classList.remove(f),e.classList.add(p)}function h(e){e.classList.add(f),e.classList.remove(p)}var m,p,f;return p="ospm_hidden",f="ospm_disabled",m=e.subclass({dom:null,exitButtonDom:null,constructor:function(e){if(this.dom=r.createContainer(),this.dom.id="ospm_page_footer_view",d(this.dom),this.exitButtonDom=r.createContainer("ospm_action_button_exit"),o.isNBF()){var n={name:t.ICONS.BOOKMARK_S,size:16};this.exitButtonDom.appendChild(s.createIcon(n)),this.exitButtonDom.appendChild(r.createTextNode("Merken"))}else this.exitButtonDom.textContent="Merken";o.addClickListener(this.exitButtonDom,e.exitClickListener),this.dom.appendChild(this.exitButtonDom)},hideExitButton:function(e){e?h(this.exitButtonDom):(d(this.exitButtonDom),o.isNBF()&&d(this.dom)),this.sync()},showExitButton:function(){u(this.exitButtonDom),o.isNBF()&&u(this.dom),this.sync()},sync:function(){var e=document.TaoOSPM&&document.TaoOSPM.ui.getLayout();e&&(a(this.dom,e.dom,o.isMobile()),o.isNBF()&&l(this.exitButtonDom)||c(this.dom,!o.isMobile()),e.onResize())},getOffsetHeight:function(){return l(this.dom)||l(this.exitButtonDom)?0:36},getClassName:function(){return"PageFooterView"}})}),define("tao/ospm/ui/widgets/ProgressBar",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Config","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/Widget","tao/ospm/common/Constants"],function(e,t,n,i,o,r){function s(t){var n,i;n=e.createContainer("ospm_progressbar ospm_hidden"),n.setAttribute("role","progressbar"),n.setAttribute("aria-label","Fortschritt"),i=e.createLeftAlignedContainer(),n.appendChild(i),t.dom=n,t.contentDom=i}function a(e){e.contentDom&&e.contentDom.firstChild&&e.contentDom.removeChild(e.contentDom.firstChild)}function l(e){var i,o,r,s;e.dom&&e.dom.parentNode&&(o=8,i=n.IF&&t.isMobile()?p:m,r=e.totalSteps*i+o,s=e.dom.parentNode.clientWidth,r>s?d.switchTo(e):h.switchTo(e))}var c,u,d,h,m,p;return m=24,p=10,c=o.subclass({stepData:null,currentStep:0,totalSteps:1,representation:null,constructor:function(e,t){e=e||{},this.stepData=t,s(this),h.switchTo(this),this.initializeFields(e)},initializeFields:function(e){c.parent.initializeFields.call(this,e),this.setProgress(e.step,e.steps)},setProgress:function(e,t){return void 0!==t&&t!==this.totalSteps&&this.representation.adjustTotal(this,t),e&&"0"!==e?(this.representation.setStep(this,e),this.dom.classList.remove("ospm_hidden"),this.dom.setAttribute("aria-valuemin","1"),this.dom.setAttribute("aria-valuemax",t),this.dom.setAttribute("aria-valuenow",e),void this.dom.setAttribute("aria-valuetext","Schritt "+e+" von "+t)):void this.dom.classList.add("ospm_hidden")
},onResize:function(){l(this)},getClassName:function(){return"ProgressBar"}}),u=function(e){e.representation!==this&&(a(e),e.representation=this,this.addToDom(e))},h={getContainer:function(e){return e.contentDom.firstChild},setStep:function(n,o){var s;if(n.currentStep>0&&n.currentStep<=n.totalSteps){for(s=h.getContainer(n).children[n.currentStep-1],s.classList.remove("ospm_progressbar_step_full");s.hasChildNodes();)s.removeChild(s.firstChild);t.isNBF()?(s.appendChild(i.createIcon(r.ICONS.CHECK_FILLED_CIRCLE_S,16,!0)),s.appendChild(e.createContainer("ospm_progressbar_left_horizontal_line"))):s.appendChild(i.createSimpleIcon("progressbar_inactive"))}if(o>0&&o<=n.totalSteps){for(s=h.getContainer(n).children[o-1],s.classList.add("ospm_progressbar_step_full");s.hasChildNodes();)s.removeChild(s.firstChild);t.isNBF()?(s.appendChild(i.createIcon(r.ICONS.RADIO_SELECTED_S,t.isMobile()?24:16,!0)),s.appendChild(e.createContainer("ospm_progressbar_left_horizontal_line"))):s.appendChild(i.createSimpleIcon("progressbar_active")),n.currentStep=o}},adjustTotal:function(n,o){var s,a,c=this.getContainer(n).childElementCount;if(c>o)for(s=o;c>s;s++)this.getContainer(n).removeChild(this.getContainer(n).lastChild);if(o>c)for(s=c-1;o-1>s;s++)a=e.createContainer("ospm_progressbar_step"),t.isNBF()?(a.appendChild(i.createIcon(r.ICONS.CIRCLE_S,16,!0)),a.appendChild(e.createContainer("ospm_progressbar_left_horizontal_line"))):a.appendChild(i.createSimpleIcon("progressbar_inactive")),h.getContainer(n).appendChild(a);n.totalSteps=o,l(n)},switchTo:u,addToDom:function(n){var o,s;o=e.createContainer("ospm_progressbar_container"),s=e.createContainer("ospm_progressbar_step"),t.isNBF()?(s.appendChild(i.createIcon(r.ICONS.CIRCLE_S,16,!0)),s.appendChild(e.createContainer("ospm_progressbar_left_horizontal_line"))):s.appendChild(i.createSimpleIcon("progressbar_inactive")),o.appendChild(s),n.contentDom.appendChild(o),this.adjustTotal(n,n.totalSteps),this.setStep(n,n.currentStep)}},d={getLabelDom:function(e){return e.dom.firstChild.children[0]},updateDisplay:function(e){d.getLabelDom(e).textContent="Schritt "+e.currentStep+" von "+e.totalSteps},setStep:function(e,t){e.currentStep=t,d.updateDisplay(e)},adjustTotal:function(e,t){e.totalSteps=t,d.updateDisplay(e),l(e)},switchTo:u,addToDom:function(t){var n;n=e.createContainer("ospm_progressbar_label"),t.contentDom.appendChild(n),d.updateDisplay(t)}},c}),define("tao/ospm/ui/widgets/DropDownInput",["tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/ui/widgets/Widget","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/ui/widgets/mixins/InputPart","tao/ospm/ui/widgets/mixins/ErrorMixin","tao/ospm/ui/IconFactory","tao/ospm/ui/UIConstants"],function(e,t,n,i,o,r,s,a,l,c){function u(t){var n,r,s,a,u,d;return n=i.createContainer("ospm_header ospm_custominputfield ospm_horizontal_flex_container"),s=p.buildContainerDom(t),s.classList.add("ospm_input"),s.classList.add("ospm_text_input"),t.inputFieldDom.setAttribute("role","combobox"),n.appendChild(s),u=o.isNBF()?e.ICON_SIZE.SMALL_20:e.ICON_SIZE.MEDIUM_10,a=l.createIcon({name:e.ICONS.CHECK_CIRCLE_M,color:e.ICON_COLOR.GREY},u),o.isNBF()?(r=i.createContainer("ospm_custom_input_button_container"),d=i.createInlineContainer("ospm_custom_input_button_label"),i.createMarkupDomTree(this,d,"Bestätigen"),r.setAttribute("tabindex",c.TABINDEXES.DEFAULT),r.appendChild(a),r.appendChild(d)):(r=i.createInlineContainer("ospm_custom_input_button"),r.appendChild(a)),n.appendChild(r),t.commitButtonDom=r,t.commitButtonDom.iconDom=a,t.contentDom=n,n}function d(t){o.addClickListener(t.commitButtonDom,function(e){t.inputToolActive||(e.valueCommitted=!0,t.onInputChangedListener(t.oldValue!==t.getValue(),e))},!1,!0),t.inputFieldDom.addEventListener("input",function(){t.valueCanceled=!1,t.hasValue()?(t.commitButtonDom.iconDom.classList.remove("ospm_icon_color_"+e.ICON_COLOR.GREY),t.commitButtonDom.iconDom.classList.add("ospm_icon_color_"+e.ICON_COLOR.BRAND)):(t.commitButtonDom.iconDom.classList.remove("ospm_icon_color_"+e.ICON_COLOR.BRAND),t.commitButtonDom.iconDom.classList.add("ospm_icon_color_"+e.ICON_COLOR.GREY))})}function h(e){var t,n;t=e.getMode(),o.toggleClassName(e.dom,"ospm_custominputfield_search","search"===t),n="search"===t?"Suchen...":"none"===t?"":e.customValuePlaceholder?e.customValuePlaceholder:"Suchen oder eingeben...",e.valuePlaceholder!==n&&e.setValuePlaceholder(n)}var m,p;return m=n.subclass({dom:null,contentDom:null,commitButtonDom:null,customValuePlaceholder:null,onInputChangedListener:null,onEntryListener:null,lastErrorMsg:null,constructor:function(e){this.dom=u(this,e),this.initializeFields(e),d(this),this.addEventListeners()},initializeFields:function(e){if("function"!=typeof e.onInputChangedListener)throw new Error("ChangeListener muss gesetzt sein!");this.onInputChangedListener=e.onInputChangedListener,"function"==typeof e.onEntryListener&&(this.onEntryListener=e.onEntryListener),"function"==typeof e.onKeyPressListener&&(this.onKeyPressListener=e.onKeyPressListener),"function"==typeof e.onKeyDownListener&&(this.onKeyDownListener=e.onKeyDownListener),"function"==typeof e.onKeyUpListener&&(this.onKeyUpListener=e.onKeyUpListener),"function"==typeof e.onInputListener&&(this.onInputListener=e.onInputListener),this.setMode(e.mode),r.isStringProvided(e.valuePlaceholder)&&(this.customValuePlaceholder=e.valuePlaceholder),m.parent.initializeFields.call(this,e),p.initializeFields(this,e)},clear:function(){this.setValue(null),this.setError()},hasValue:function(){return this.isEnabled()&&!this.isHidden()&&r.isStringProvided(this.getValue())},getDisplayValue:function(){var e=this.getValue();return e?(this.valueUnitDom&&this.valueUnitDom.textContent&&(e+=" "+this.valueUnitDom.textContent),e):""},getOldValueDisplayValue:function(){var e=this.oldValue;return e?(this.valueUnitDom&&this.valueUnitDom.textContent&&(e+=" "+this.valueUnitDom.textContent),e):""},setEnabled:function(e){m.parent.setEnabled.call(this,e),e||this.clear(),o.setDomEnabled(this.dom,this.isEnabled())},getLastErrorMsg:function(){return this.lastErrorMsg},shown:function(){this.hasValue()||(this.commitButtonDom.iconDom.classList.remove("ospm_icon_color_"+e.ICON_COLOR.BRAND),this.commitButtonDom.iconDom.classList.add("ospm_icon_color_"+e.ICON_COLOR.GREY))},hidden:function(){},setFocus:function(){this.inputFieldDom.focus()},setMode:function(e){-1===["none","search","custom","customsearch"].indexOf(e)&&(e="none"),this.dom.dataset.inputMode!==e&&(this.dom.dataset.inputMode=e,h(this))},getMode:function(){return this.dom.dataset.inputMode||"none"},containsMode:function(e){return"search"===e||"custom"===e?this.getMode().search(e)>-1:this.getMode()===e},connectWithList:function(e){this.inputFieldDom.setAttribute("aria-label",e.dom.getAttribute("aria-label")),this.inputFieldDom.setAttribute("aria-owns",e.dom.id)},getClassName:function(){return"DropDownInput"}}),p=new s({dontSelectOnFocus:!0}),m.proto(p.API,a,{onInputChanged:function(e){this.onInputListener&&this.onInputListener(e),p.API.onInputChanged.call(this,e)},onKeyPress:function(e){this.onKeyPressListener&&this.onKeyPressListener(e),p.API.onKeyPress.call(this,e)},onKeyUp:function(t){this.onKeyUpListener&&this.onKeyUpListener(t),o.getEventCode(t)===e.KEYCODES.ENTER&&(t.valueCommitted=!0,this.onInputChangedListener(this.oldValue!==this.getValue(),t),this.onLeave()),p.API.onKeyUp.call(this,t)},onEntry:function(e){this.onEntryListener&&this.onEntryListener(e),p.API.onEntry.call(this,e,!0)},onLeave:function(){},onKeyDown:function(e){this.onKeyDownListener&&this.onKeyDownListener(e),p.API.onKeyDown.call(this,e)},setError:function(e){this.lastErrorMsg=e,a.setError.call(this,e)},isInputToolAllowed:function(){return!p.isDateInputType(this)&&p.API.isInputToolAllowed()},validateCustomInput:function(){p.API.onLeave.call(this)}}),m}),define("tao/ospm/ui/widgets/DropDownHelper",["tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/common/Constants","tao/ospm/common/OSPMError"],function(e,t,n,i){function o(e,t,n,o){if(!e)throw new i(t,{element:n,isAction:o})}function r(e){e.data.scrollData={htmlOverflowY:document.documentElement.style.overflowY,bodyOverflowY:document.body.style.overflowY,bodyPosition:document.body.style.position,bodyTop:document.body.style.top}}function s(){document.documentElement.style.overflowY="scroll",document.body.style.overflowY="scroll",document.body.style.position="relative",document.body.style.top=""}function a(t){t.data.scrollData&&(document.documentElement.style.overflowY=t.data.scrollData.htmlOverflowY,document.body.style.overflowY=t.data.scrollData.bodyOverflowY,document.body.style.position=t.data.scrollData.bodyPosition,document.body.style.top=t.data.scrollData.bodyTop,e.deleteProperty(t.data,"scrollData"))}function l(e){return e.options.useCustomInput&&e.customInput.isEnabled()&&!e.customInput.isHidden()}var c,u;return u=14,c={getFirstEnabledValue:function(e){return c.getNextEnabledValue(e)},getLastEnabledValue:function(e){return c.getPreviousEnabledValue(e)},getNextEnabledValue:function(e,t){var n,i;for(n=0;n<e.length;n++)if(i=e[n],i.enabled&&(void 0===t||i.index>t))return i;return null},getPreviousEnabledValue:function(e,t){var n,i;for(n=e.length-1;n>=0;n--)if(i=e[n],i.enabled&&(void 0===t||i.index<t))return i;return null},getElementByIndexOrValue:function(t,n){var i;if(e.isNumber(n))return n<t.length?t[n]:null;if(e.isSet(n))for(i=0;i<t.length;i++)if(t[i].value===n)return t[i];return null},getPlaceholder:function(e){var i;return i=t.isNBF()?e.valuePlaceholder?e.valuePlaceholder:"":e.valuePlaceholder?e.valuePlaceholder:l(e)?n.MANDATORY_PLACEHOLDERS.DROPDOWN_ENTER:t.isMobile()?n.MANDATORY_PLACEHOLDERS.DROPDOWN:e.mandatory?n.MANDATORY_PLACEHOLDERS.DROPDOWN:n.DEFAULT_PLACEHOLDERS.DROPDOWN},copyObject:function(t){var n={};return e.isObject(t)?(Object.keys(t).forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n):t},validateAndCopyElements:function(t,n){var i,r=[],s=[],a=0;return t.forEach(function(t){var l;o(e.isObject(t),"Element ist kein einfaches Objekt.",t),i=e.isSet(t.action)&&"function"==typeof t.action,o(e.isStringProvided(t.label),"Element hat kein Label oder es ist kein String",t,i),o(i||e.isSet(t.value),"Element hat kein Value",t,i),l={label:t.label,value:t.value,selected:Boolean(t.selected),enabled:t.enabled!==!1},i?(l.action=t.action,s.push(l)):(r.push(l),n&&(l.index=a,a++))}),s.forEach(function(e){e.index=a,n&&(a++,r.push(e))}),r},calculateContextMenuVOffset:function(n){var i=0;return n.hasError()&&(i+=n.errorMessageDom.offsetHeight),e.isSet(n.hintMessageDom)&&!n.hintMessageDom.classList.contains("ospm_hidden")&&(i+=t.isNBF()?n.hintMessageDom.offsetHeight:n.hintMessageDom.offsetHeight-9),(n.dom.offsetHeight-i)/2+u/2+7},setScrollMode:function(e,t){t?(r(e),s(e)):a(e)},setKeyBoardSelected:function(e,t){e.shownWidgets[t]&&e.shownWidgets[t].dom.classList.add("ospm_keyboard_selected")},getKeyBoardSelected:function(e){var t=[];return e.shownWidgets.forEach(function(e){e.dom.classList.contains("ospm_keyboard_selected")&&t.push(e)}),t},resetKeyBoardSelected:function(e){var t,n;if(e.contextMenuView)for(t=e.contextMenuView.dom.querySelectorAll(".ospm_keyboard_selected"),n=0;n<t.length;n++)t[n].classList.remove("ospm_keyboard_selected")},isInSelectedList:function(e,t){return e.data.selectedElements.indexOf(t)>-1},addToSelectedList:function(e,t){var n=e.data.selectedElements.indexOf(t);-1===n&&e.data.selectedElements.push(t)},setSelectedList:function(e,t){e.data.selectedElements=t||[]},toggleSelectedListEntry:function(e,t){var n=e.data.selectedElements.indexOf(t);return-1===n?(e.data.selectedElements.push(t),!0):(e.data.selectedElements.splice(n,1),!1)}}}),define("tao/ospm/ui/widgets/Dropdown",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/UIConstants","tao/ospm/ui/views/ContextMenuView","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/DropdownElement","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/OSPMError","tao/ospm/common/Logger","tao/ospm/ui/widgets/DropDownInput","tao/ospm/ui/widgets/DropDownHelper","tao/ospm/ui/ValidatorUtils","tao/ospm/ui/IconFactory","tao/ospm/ui/layouts/Layout"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_){function v(e){var t,n,i,r,s;e.optionalDomLabel=" (optional)",e.errorMessageShouldHaveIcon(),t=o.createContainer("ospm_dropdown"),e.dom=t,n=o.createContainer("ospm_dropdown_wrapper"),t.appendChild(n),e.dropdownContainerDom=n,e.wrapperDom=o.createContainer("ospm_widget_content_wrapper"),n.appendChild(e.wrapperDom),e.valueIconDom=o.createContainer("ospm_dropdown_value_icon"),n.appendChild(e.valueIconDom),i=o.createLeftAlignedContainer("ospm_labelfield"),e.contentDom=i,e.wrapperDom.appendChild(i),r=o.createContainer("ospm_label_container"),e.labelContainerDom=r,r.appendChild(e.buildLabelDom(c.TEXT_STYLE.LABEL5)),i.appendChild(r),s=o.createContainer("ospm_dropdown_value_container"),i.appendChild(s),e.rightLabelDom=o.createContainer("ospm_dropdown_right_label"),s.appendChild(e.rightLabelDom),r.appendChild(e.buildSubLabelDom(c.TEXT_STYLE.SUBLABEL5)),r.appendChild(e.buildOptionalDom()),r.appendChild(e.buildHintIconForTooltip()),t.appendChild(e.buildInfoTextDom()),t.appendChild(e.buildErrorDom()),e.rightDom=o.createContainer("ospm_list_entry_right_content"),e.isEnabled()&&t.classList.add("ospm_clickable"),n.addEventListener("blur",function(){e.dom.classList.remove("ospm_focus_inside")},!1),n.addEventListener("focus",function(){e.dom.classList.add("ospm_focus_inside")},!1),e.setCheckboxIconContainer(n)}function b(e){var t;e.dom=o.createContainer("ospm_dropdown"),e.wrapperDom=o.createContainer("ospm_widget_content_wrapper"),e.dropdownContainerDom=o.createLeftAlignedContainer("ospm_dropdown_container"),e.innerDomContainer=o.createLeftAlignedContainer("ospm_labelfield"),e.dropdownContainerDom.appendChild(e.innerDomContainer),e.wrapperDom.appendChild(e.dropdownContainerDom),e.labelContainerDom=o.createContainer("ospm_list_entry_left_content"),e.innerDomContainer.appendChild(e.labelContainerDom),t=o.createContainer("ospm_list_entry_left_content_first_line"),t.appendChild(e.buildLabelDom(c.TEXT_STYLE.LABEL3)),t.appendChild(e.buildInfoTextDom()),t.appendChild(e.buildHintIcon()),t.appendChild(e.buildHintIcon()),t.appendChild(e.buildOptionalDom()),e.labelContainerDom.appendChild(t),t=o.createContainer("ospm_list_entry_left_content_second_line"),t.appendChild(e.buildSubLabelDom(c.TEXT_STYLE.SUBLABEL5)),e.labelContainerDom.appendChild(t),e.rightDom=o.createContainer("ospm_list_entry_right_content"),e.getLabelableHTMLElement().setAttribute("role","combobox"),e.getLabelableHTMLElement().setAttribute("aria-haspopup","listbox"),e.valueIconDom=o.createContainer("ospm_dropdown_value_icon"),e.rightLabelDom=o.createContainer("ospm_dropdown_right_label"),e.valueIconDom.appendChild(e.rightLabelDom),i.isIOS()&&e.valueIconDom.appendChild(bt(e)),e.rightDom.appendChild(e.valueIconDom),e.innerDomContainer.appendChild(e.rightDom),e.longValueContainer=o.createContainer("ospm_long_value_container"),e.wrapperDom.appendChild(e.longValueContainer),e.wrapperDom.appendChild(e.buildErrorDom()),e.wrapperDom.appendChild(e.buildHelpMessageContainer()),e.dom.appendChild(e.wrapperDom)}function y(e){var t=e.wrapperDom;i.isNBF()&&(t=e.dropdownContainerDom),i.addClickListener(t,function(){e.isEnabled()&&(A(e),e.notifyClickListeners())}),i.addKeyEventListener("keypress",t,function(t){var n,o,r;e.isEnabled()&&(o=i.getKeyFromKeyPressEvent(t),i.isValidAlphaNumericChar(o)&&(t.preventDefault(),t.stopPropagation(),A(e),e.data.elements.length<rn?(n=Nt(e,o,!0),n.length&&Ft(e,n[0].index)):(r=e.customInput.oldValue,nt(e,o),e.customInput.oldValue=r,it(e,String(o)))))}),i.addEnterKeyListener(t,function(){A(e)},function(t){var n;return e.isEnabled()&&(n=i.getEventCode(t),n===c.KEYCODES.DOWN_ARROW&&t.altKey||n===c.KEYCODES.ENTER||n===c.KEYCODES.SPACE)?!0:!1}),i.addKeyEventListener("keydown",t,function(t){var n;e.isEnabled()&&(n=i.getEventCode(t),n===c.KEYCODES.UP_ARROW&&t.altKey?(t.preventDefault(),t.stopPropagation(),O(e)):n!==c.KEYCODES.UP_ARROW||t.altKey?n!==c.KEYCODES.DOWN_ARROW||t.altKey||(t.preventDefault(),t.stopPropagation(),w(e)):(t.preventDefault(),t.stopPropagation(),C(e)))}),t.addEventListener("blur",function(){e.isPickerOpen||e.checkMandatoryValueEmptyError()},!0)}function C(e){var t,n,i;t=e.getSelectedIndexes(),e.options.multiSelect?0===t.length?(n=p.getLastEnabledValue(e.data.elements),i=n?[n.index]:null):t.length>1||(n=p.getPreviousEnabledValue(e.data.elements,t[0]),null===n&&e.isMandatory()&&(n=p.getLastEnabledValue(e.data.elements)),i=n?[n.index]:null):null===t?(n=p.getLastEnabledValue(e.data.elements),i=n?n.index:null):(n=p.getPreviousEnabledValue(e.data.elements,t),null===n&&e.isMandatory()&&(n=p.getLastEnabledValue(e.data.elements)),i=n?n.index:null),void 0!==i&&(Pt(e,i),e.valueChanged=!0,e.notifyChangeListeners())}function w(e){var t,n,i;t=e.getSelectedIndexes(),e.options.multiSelect?0===t.length?(n=p.getFirstEnabledValue(e.data.elements),i=n?[n.index]:null):t.length>1||(n=p.getNextEnabledValue(e.data.elements,t[0]),null===n&&e.isMandatory()&&(n=p.getFirstEnabledValue(e.data.elements)),i=n?[n.index]:null):null===t?(n=p.getFirstEnabledValue(e.data.elements),i=n?n.index:null):(n=p.getNextEnabledValue(e.data.elements,t),null===n&&e.isMandatory()&&(n=p.getFirstEnabledValue(e.data.elements)),i=n?n.index:null),void 0!==i&&(Pt(e,i),e.valueChanged=!0,e.notifyChangeListeners())}function E(e){var t,n=window.innerHeight;e.data.scrollOffset=document.documentElement.scrollTop||document.body.scrollTop,t=window.innerHeight-e.dom.getBoundingClientRect().bottom-214-16,p.setScrollMode(e,!0),document.body.appendChild(e.nodes.pickerDomWrapper),At(e,n),e.nodes.pickerDomWrapper.style.zIndex=e.dummyZindex.toString(),e.dummyZindex++,document.body.firstElementChild.scrollTop=0>t?e.data.scrollOffset-t:e.data.scrollOffset,e.resizeHandler={dropdown:e,handleEvent:function(){At(this.dropdown)}},window.addEventListener("resize",e.resizeHandler),e.outsideClickHandler=L(e),e.nodes.pickerBodyOverlay.addEventListener("click",e.outsideClickHandler),e.touchStartDebouncer={dropdown:e,handleEvent:function(e){this.dropdown.data.startY=e.touches?e.touches[0].screenY:e.screenY}},e.nodes.pickerContent.addEventListener("touchstart",e.touchStartDebouncer),e.touchMoveDebouncer=S(e),e.nodes.pickerContent.addEventListener("touchmove",e.touchMoveDebouncer),e.data.elements.length>Mt(e)&&(e.scrollHandler={dropdown:e,handleEvent:function(e){B(e,this.dropdown)}},e.nodes.pickerContent.addEventListener("scroll",e.scrollHandler))}function L(e){return{dropdown:e,handleEvent:function(t){var n,i;e.nodes.pickerDomWrapper.classList.add("ospm_noevent"),i=document.elementFromPoint(t.clientX,t.clientY),O(this.dropdown);try{n=new MouseEvent("mouseup",t)}catch(o){n=document.createEvent("MouseEvent"),n.initMouseEvent("mouseup",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}n.ospm_force=!0,i.dispatchEvent(n),e.nodes.pickerDomWrapper.classList.remove("ospm_noevent")}}}function S(e){return{dropdown:e,handleEvent:function(e){var t,n,i,o,r;o=this.dropdown.data.startY,r=this.dropdown.nodes.pickerContent,t=e.touches?e.touches[0].screenY:e.screenY,n=t>=o&&0===r.scrollTop,i=o>=t&&r.scrollHeight-r.scrollTop===r.offsetHeight,(n||i)&&e.preventDefault()}}}function D(e){p.resetKeyBoardSelected(e),e.contextMenuView&&(i.isNBF()&&e.contextMenuView.setMaxHeight(en),e.contextMenuView.setAlignAtWidget(e),e.contextMenuView.show({alignDom:i.isNBF()?e.dropdownContainerDom:e.wrapperDom,position:{alignDom:["top",i.isNBF()?c.HORIZONTAL_ALIGNMENT.LEFT:c.HORIZONTAL_ALIGNMENT.RIGHT],alignAtDom:[i.isNBF()?"bottom":"top",i.isNBF()?c.HORIZONTAL_ALIGNMENT.LEFT:c.HORIZONTAL_ALIGNMENT.RIGHT]},vOffset:i.isNBF()?-2:p.calculateContextMenuVOffset(e),hOffset:e.contextMenuViewHOffset,autoFocused:!i.isMobile()}),i.isMobile()&&!i.isNBF()&&(e.contextMenuView.fullScreenContainerDom.style.left=sn+"px",e.contextMenuView.fullScreenContainerDom.style.cssText+="min-width: 0px !important",e.contextMenuView.fullScreenContainerDom.style.width=document.body.clientWidth-2*sn+"px"),i.isNBF()&&(e.contextMenuView.dom.style.opacity="0%",k(e,function(){e.contextMenuView.dom.style.opacity="100%"})))}function T(e){setTimeout(function(){var t,n=0,o=32,r=Number(e.labelContainerDom.getBoundingClientRect().height);if(t=e.rightLabelDom?e.rightLabelDom.getBoundingClientRect():!1,e.labelContainerDom&&t){var s=t.height-2;i.isMobile()||i.isElementInSmallColumnLayout(e.dom)?ln>s&&(s=ln):an>s&&(s=an),e.dom.classList.contains("ospm_multiline_label")&&o>r&&e.dom.classList.remove("ospm_multiline_label"),setTimeout(function(){r=Number(e.labelContainerDom.getBoundingClientRect().height),r>=o&&e.dom.classList.add("ospm_multiline_label"),setTimeout(function(){e.dom.classList.contains("ospm_multiline_label")&&(n=I(e)),e.contentDom.style.height=n+s+"px",e.rightLabelDom.style.marginTop=n+"px",i.isNBF()&&_.onHeightChange()},100)},100)}},0)}function I(e){var t,n,o=20;if(i.isNBF()&&e.labelContainerDom)return(i.isMobile()||i.isElementInSmallColumnLayout(e.dom))&&(o=16),t=Number(e.labelContainerDom.getBoundingClientRect().height),n=t-o}function k(e,t){var n,i,o,r,s,a,l=0,c=!1;i=e.dropdownContainerDom.getBoundingClientRect(),n=e.contextMenuView.dom.querySelector(".ospm_contextmenuview"),n.style.removeProperty("height"),n.style.setProperty("width",i.width+"px","important"),setTimeout(function(){i=e.dropdownContainerDom.getBoundingClientRect(),l=window.visualViewport?window.visualViewport.offsetTop:0,o=window.visualViewport?window.visualViewport.height:document.body.getBoundingClientRect().height,r=n.getBoundingClientRect(),o-i.bottom-r.height>0?(n.style.setProperty("left",i.left+"px","important"),n.style.setProperty("top",i.bottom-2+l+"px","important"),c=!1):i.top-r.height>0?(n.style.setProperty("left",i.left+"px","important"),n.style.setProperty("top",i.top-r.height+2+"px","important"),c=!0):(i.top<o-i.bottom?(n.style.setProperty("left",i.left+"px","important"),n.style.setProperty("top",i.bottom-2+l+"px","important"),n.style.setProperty("height",o-i.bottom-2+"px","important"),s=o-i.bottom-2,c=!1):(n.style.setProperty("left",i.left+"px","important"),n.style.setProperty("top","2px","important"),n.style.setProperty("height",i.top+"px","important"),s=i.top,c=!0),a=n.querySelector(".ospm_dd_picker_header"),a&&(s-=a.getBoundingClientRect().height+2),e.contextMenuView.setMaxHeight(s+"px")),c?(e.dropdownContainerDom.classList.add("ospm_contextmenu_top"),e.contextMenuView.fullScreenContainerDom.classList.add("ospm_contextmenu_top"),n.style.height||n.style.setProperty("height",r.height+"px")):(e.dropdownContainerDom.classList.remove("ospm_contextmenu_top"),e.contextMenuView.fullScreenContainerDom.classList.remove("ospm_contextmenu_top")),"function"==typeof t&&t()},0)}function x(e){return i.isNBF()?!1:e.data.mobileMode&&e.data.elements.length>=u.DROPDOWN_MIN_ELEMENTS_FOR_MOBILE_PICKER}function A(e){function t(){x(e)?E(e):D(e),e.lastScrollTop=0,F(e,!0),$t=e,e.getLabelableHTMLElement().setAttribute("aria-expanded","true"),e.customInput.shown()}e.isPickerOpen=!0,n.deleteProperty(e.data,"navigatedTo"),e.customInput.containsMode("custom")&&e.customInput.setValue(e.customInput.oldValue),e.isSyncPickerViewNeeded?(e.isSyncPickerViewNeeded=!1,Vt(e,t)):t(),F(e,!0),$t=e,e.customInput.shown()}function O(e){$t&&(e.isPickerOpen=!1,x(e)?N(e):M(e),e.getLabelableHTMLElement().removeAttribute("aria-expanded"),e.nodes.ariaFilteredElementInformation.innerHTML="",P(e),n.resetExecuteLater(e.timer),$t=null)}function N(e){e.nodes.pickerDomWrapper&&(e.nodes.pickerDom&&e.nodes.pickerDom.classList.remove("ospm_dd_search"),e.nodes.pickerDomWrapper.parentNode&&e.nodes.pickerDomWrapper.parentNode.removeChild(e.nodes.pickerDomWrapper)),e.nodes.pickerBodyOverlay&&e.outsideClickHandler&&(e.nodes.pickerBodyOverlay.removeEventListener("click",e.outsideClickHandler),n.deleteProperty(e,"outsideClickHandler")),document.body.firstElementChild.style.maxHeight="",p.setScrollMode(e,!1),document.documentElement.scrollTop=e.data.scrollOffset,document.body.scrollTop=e.data.scrollOffset,window.removeEventListener("resize",e.resizeHandler),n.deleteProperty(e,"resizeHandler"),e.nodes.pickerContent&&(e.nodes.pickerContent.removeEventListener("touchstart",e.touchStartDebouncer),e.nodes.pickerContent.removeEventListener("touchmove",e.touchMoveDebouncer),e.data.elements.length>Mt(e)&&e.nodes.pickerContent.removeEventListener("scroll",e.scrollHandler)),n.deleteProperty(e,"touchStartDebouncer"),n.deleteProperty(e,"touchMoveDebouncer"),n.deleteProperty(e,"scrollHandler"),e.contextMenuView&&e.contextMenuView.hide(),Ot()&&(document.body.style.minHeight="")}function M(e){e.contextMenuView&&e.contextMenuView.hide()}function P(e){F(e,!1),e.customInput.containsMode("custom")||nt(e,""),R(e),e.contextMenuView&&e.contextMenuView.setIgnoreMutationEvents(!1),e.customInput.hidden(),e.customInput.hasError()?e.setError(e.customInput.getLastErrorMsg()):e.setError()}function R(e){at(e),zt(e),X(e)}function F(e,t){t?(e.valueIconDom.classList.add("ospm_open"),e.getLabelableHTMLElement().setAttribute("aria-expanded","true")):(e.valueIconDom.classList.remove("ospm_open"),e.getLabelableHTMLElement().removeAttribute("aria-expanded"),e.errorMessageDom.firstChild&&e.errorMessageDom.classList.remove("ospm_hidden"))}function B(e,t){var n,i,o=!1,r=5,s=e.target.scrollTop>t.lastScrollTop,a=t.data.searchedElements.length>0?t.data.searchedElements:t.data.elements,l=Mt(t);t.contextMenuView&&t.contextMenuView.setIgnoreMutationEvents(!0),s&&e.target.scrollTop+e.target.offsetHeight>=t.list.dom.offsetHeight-r&&t.data.currentRange.end<a.length-1?(t.data.currentRange.end=Math.min(t.data.currentRange.end+l,a.length-1),(t.data.currentRange.end-t.data.currentRange.start+1)/l>3&&(t.data.currentRange.start+=l),n=t.data.shownElements[t.data.shownElements.length-1],t.data.shownElements=gt(t,a),o=!0):0===e.target.scrollTop&&t.data.currentRange.start>0&&(t.data.currentRange.start=Math.max(t.data.currentRange.start-l,0),0===t.data.currentRange.start?t.data.currentRange.end=Math.min(2*l-1,a.length-1):t.data.currentRange.end-=l,n=t.data.shownElements[0],t.data.shownElements=gt(t,a),o=!0),o&&(lt(t,a),zt(t),i=t.data.shownElements.indexOf(n),t.shownWidgets[i].dom.scrollIntoView(!s)),t.lastScrollTop=e.target.scrollTop}function z(e){var t=g.createIcon({name:c.ICONS.CANCEL_S,size:c.ICON_SIZE.SMALL_30,color:c.ICON_COLOR.GREY});e.nodes.pickerDomWrapper=o.createContainer("ospm_dd_picker_fs_wrapper"),e.nodes.pickerDom=o.createContainer("ospm_dd_picker"),e.nodes.closingArea=o.createContainer("ospm_dd_picker_close"),e.nodes.closingArea.appendChild(o.createContainer("ospm_dd_picker_label ospm_text_style_13",e.getLabel())),e.nodes.closingArea.appendChild(t),i.addActionListener(t,function(){O(e)}),e.nodes.contextHeader=o.createContainer("ospm_dd_picker_header"),e.nodes.contextHeader.appendChild(e.customInput.dom),e.nodes.contextHeader.appendChild(e.nodes.unselectDom),e.nodes.contextHeader.appendChild(e.nodes.resetSelectionDom),e.nodes.contextHeader.appendChild(ot(e)),e.nodes.pickerContent=o.createContainer("ospm_dd_picker_content"),e.nodes.pickerDom.appendChild(e.nodes.closingArea),e.nodes.pickerDom.appendChild(e.nodes.contextHeader),e.nodes.pickerDom.appendChild(e.nodes.pickerContent),e.nodes.pickerBodyOverlay=o.createContainer("ospm_dd_picker_overlay"),e.nodes.pickerDomWrapper.appendChild(e.nodes.pickerBodyOverlay),e.nodes.pickerDomWrapper.appendChild(e.nodes.pickerDom)}function V(e){e.nodes.pickerDomWrapper&&e.nodes.pickerDomWrapper.parentNode&&e.nodes.pickerDomWrapper.parentNode.removeChild(e.nodes.pickerDomWrapper),p.setScrollMode(e,!1)}function H(e){e.contextMenuView||(U(e),W(e),G(e),j(e),q(e))}function U(e){var t;e.contextMenuView=new s({maxHeight:en,content:new a,alignAtWidget:e,outsideClickListener:function(){e.customInput&&e.customInput.setValue(e.customInput.oldValue),O(e)}}),t=e.contextMenuView.dom.querySelector(".ospm_contextmenuview"),i.isNBF()&&!i.isMobile()&&e.contextMenuView.dom.offsetWidth>=e.dom.offsetWidth&&(e.contextMenuView.dom.querySelector(".ospm_contextmenuview").style.cssText+="width: "+e.dom.offsetWidth+"px;"),t.classList.add("ospm_dropdown_content"),t.setAttribute("tabindex","0"),i.isNBF()&&e.contextMenuView.setIgnoreMutationEvents(!0)}function W(e){i.addEnterKeyListener(e.contextMenuView.dom,function(){var t,n;t=e.data.navigatedTo,void 0!==t&&(n=p.getKeyBoardSelected(e),n.length>0&&mt(n[n.length-1],e))},[c.KEYCODES.ENTER]),i.addKeyEventListener("keydown",e.contextMenuView.dom,function(t){var n,o,r;n=e.data.navigatedTo,r=i.getEventCode(t),r===c.KEYCODES.UP_ARROW&&t.altKey||r===c.KEYCODES.ESCAPE?(t.preventDefault(),t.stopPropagation(),xt(e,""),O(e)):r!==c.KEYCODES.DOWN_ARROW||t.altKey?r!==c.KEYCODES.UP_ARROW||t.altKey||(t.preventDefault(),t.stopPropagation(),o=void 0===n?p.getLastEnabledValue(Y(e)):p.getPreviousEnabledValue(Y(e),n),o&&Ft(e,o.index)):(t.preventDefault(),t.stopPropagation(),o=void 0===n?p.getFirstEnabledValue(Y(e)):p.getNextEnabledValue(Y(e),n),o&&Ft(e,o.index))})}function j(e){e.nodes.contextHeader=o.createContainer("ospm_dd_picker_header"),e.nodes.contextHeader.appendChild(e.customInput.dom),e.nodes.contextHeader.appendChild(e.nodes.unselectDom),e.nodes.contextHeader.appendChild(e.nodes.resetSelectionDom),e.nodes.contextHeader.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation()},!1),e.nodes.contextHeader.appendChild(ot(e))}function G(e){var t=e.contextMenuView.dom.querySelector(".ospm_contextmenuview_content_wrapper");t.addEventListener("scroll",function(t){B(t,e)},!1),t.addEventListener("touchmove",function(e){t.scrollHeight===t.offsetHeight&&(e.preventDefault(),e.stopPropagation())},!1)}function q(e){var t=e.contextMenuView.fullScreenContainerDom.childNodes[0];t?e.contextMenuView.fullScreenContainerDom.insertBefore(e.nodes.contextHeader,t):e.contextMenuView.fullScreenContainerDom.appendChild(e.nodes.contextHeader)}function Y(e){return e.data.searchedValue?e.data.searchedElements:e.data.elements}function K(e,t){e.list.dom.setAttribute("aria-activedescendant",e.shownWidgets[t].dom.id),e.customInput.inputFieldDom.setAttribute("aria-activedescendant",e.shownWidgets[t].dom.id),e.shownWidgets[t].setSelected(!0)}function X(e){e.shownWidgets.forEach(function(e){e.setSelected()}),e.data.selectedElements.forEach(function(t){var n=e.data.shownElements.indexOf(t);-1!==n&&K(e,n)})}function Z(e){J(e),$(e),Q(e)}function J(e){var t=e.options.useCustomInput||e.data.elements.length>=rn;e.customInput.setHidden(!t),t?!e.options.useCustomInput&&e.data.elements.length>=rn?e.customInput.setMode("search"):e.options.useCustomInput&&e.data.elements.length<rn?e.customInput.setMode("custom"):e.options.useCustomInput&&e.data.elements.length>=rn&&e.customInput.setMode("customsearch"):e.customInput.setMode("none")}function $(e){var t=!e.isEmpty()&&(e.options.multiSelect||!e.isMandatory());i.toggleClassName(e.nodes.unselectDom,"ospm_hidden",!t)}function Q(e){var t=!tt(e);i.toggleClassName(e.nodes.resetSelectionDom,"ospm_hidden",t)}function et(e){return e.data.selectedElements.length>0}function tt(e){return e.options.allowValueReset&&e.data.applicationValue&&!e.data.applicationValueSet}function nt(e,t,i){var o=n.isStringProvided(t)?t:null;e.customInput.setValue(o),e.customInput.oldValue=o,i&&vt(e,!1),Z(e)}function it(e,t){var n;t?st(e,t,"searchedElements"):at(e),zt(e),X(e),e.data.mobileMode&&At(e),n=e.list.elements.length,1===e.list.elements.length&&e.list.elements[0].disabled&&(n=0),e.nodes.ariaFilteredElementInformation.textContent=rt(t,e.options.useCustomInput,n)}function ot(e){return e.nodes.ariaFilteredElementInformation=o.createContainer("ospm_dropdown_aria_message ospm_non_visible_text"),e.nodes.ariaFilteredElementInformation.setAttribute("aria-live","polite"),e.nodes.ariaFilteredElementInformation.setAttribute("aria-atomic","true"),e.nodes.ariaFilteredElementInformation
}function rt(e,t,n){return e?0===n?"Es ist kein "+(t?"empfohlener Eintrag":"passender Wert")+' zu ihrer Suche "'+e+'" vorhanden.':1===n?"Es ist ein "+(t?"empfohlener Eintrag zu ihrer Eingabe":"passender Wert zu ihrer Suche")+' "'+e+'" vorhanden.':"Es sind "+n+(t?" empfohlene Einträge zu ihrer Eingabe":" passende Werte zu ihrer Suche")+' "'+e+'" vorhanden.':"Es sind insgesamt "+n+(t?" empfohlene":" auswählbare")+" Einträge vorhanden."}function st(e,t,n){t=t||"",e.data.searchedValue=t,e.data.searchedElements=t?Nt(e,t):[],e.data.currentRange={start:0,end:Math.min(2*Mt(e)-1,e.data[n].length-1)},e.data.shownElements=gt(e,e.data[n]),e.shownWidgets=ft(e,e.data[n]),ct(e,t)}function at(e){st(e,"","elements")}function lt(e,t){var n;e.data.shownElements=gt(e,t),e.shownWidgets=ft(e,t),e.data.selectedElements.forEach(function(t){n=e.data.shownElements.indexOf(t),-1!==n&&K(e,n)}),ct(e,e.data.searchedValue)}function ct(e,t){e.list&&e.list.clearElements(),e.list=new a,e.list.dom.setAttribute("role","listbox"),e.list.dom.setAttribute("aria-label",e.labelDom.textContent),e.options.multiSelect&&e.list.dom.setAttribute("aria-multiselectable","true"),e.customInput.connectWithList(e.list),e.shownWidgets.forEach(function(n){t&&n.setLabel(i.searchAndHighlight(n.label,t)),e.list.addElement(n)}),0===e.data.shownElements.length&&ut(e)}function ut(e){dt(e)?e.list.addElement(new l({label:c.EMPTY_LIST_MESSAGE,enabled:!1})):e.list.setHidden(!0)}function dt(e){return!e.customInput.containsMode("custom")}function ht(e){var t=[];at(e),e.data.elements.forEach(function(e){e.selected&&t.push(e.value)}),t.length>0&&e.setSelected(e.options.multiSelect?t:t[0]),i.isNBF()&&T(e)}function mt(e,t){var i,o=e.appData,r=!1;o.action?(t.options.autoCloseAfterClick&&O(t),o.action(t,o.index,o.value)):n.isSet(o.value)&&(i=t.data.elements[o.index],t.options.multiSelect?(p.toggleSelectedListEntry(t,i)?e.setSelected(!0):e.setSelected(),r=!0):p.isInSelectedList(t,i)||(p.setSelectedList(t,[i]),t.customInput.clear(),t.data.applicationValueSet=!1,r=!0),r&&(X(t),Z(t)),t.options.multiSelect||O(t),r&&(vt(t,!1),t.valueChanged=!0,f.beforeInput(t),t.notifyChangeListeners()))}function pt(e,t){var n=new l({label:t.label,clickListener:function(t){mt(t,e)},enabled:t.enabled===!0});return n.appData={value:t.value,index:t.index},t.action&&(n.appData.action=t.action,n.setHasAction(!0)),n}function ft(e,t){var n,i,o=[];for(n=e.data.currentRange.start;n<=e.data.currentRange.end;n++)i=pt(e,t[n]),o.push(i);return o}function gt(e,t){return t.slice(e.data.currentRange.start,e.data.currentRange.end+1)}function _t(e,t){var n=[],i=e.getCustomValue();return e.options.multiSelect?(i&&t&&e.options.useCustomInput&&n.push(t?e.customInput.getDisplayValue():e.customInput.getOldValueDisplayValue()),e.data.selectedElements.forEach(function(e){n.push(e.label)})):i?n.push(e.customInput.getDisplayValue()):et(e)?n.push(e.data.selectedElements[0].label):e.data.applicationValueSet&&n.push(e.data.applicationValue),n}function vt(e,t){var n,r,s;n="",r=!e.isEmpty(),s=p.getPlaceholder(e),e.data.mobileMode&&e.hasFormLayout&&!r&&(n=e.getLabel(),e.dropdownContainerDom.classList.add("ospm_select_empty")),""===n&&(n=s),r?(n=_t(e,t).join(", "),e.rightLabelDom.setAttribute("data-selected",!0),e.dropdownContainerDom.classList.remove("ospm_select_empty")):e.data.mobileMode&&e.hasFormLayout||(n=s,e.rightLabelDom.setAttribute("data-selected",!1),e.dropdownContainerDom.classList.add("ospm_select_empty"),s.length&&e.dropdownContainerDom.classList.add("ospm_has_placeholder")),o.createMarkupDomTree(e,e.rightLabelDom,n,{notAllowedTags:["link","click"]}),e.data.mobileMode&&e.hasFormLayout&&!r&&(e.rightLabelDom.appendChild(e.buildOptionalDom()),e.dropdownContainerDom.classList.add("ospm_select_empty")),Ut(e),Wt(e),Yt(e),i.isNBF()&&(T(e),e.contextMenuView&&setTimeout(function(){k(e)},0))}function bt(e){var t=null;return i.isIOS()&&(t=o.createInput("text","ospm_ios_fake_input"),t.addEventListener("focus",function(t){t.preventDefault(),t.stopPropagation(),e.focus(),A(e)})),t}function yt(e){var t=o.createContainer("ospm_dropdown_reset ospm_icon_zuruecksetzen ospm_clickable","Zurücksetzen");return i.addClickListener(t,function(){t.classList.add("ospm_hidden"),tt(e)&&e.setSelected(e.data.applicationValue),wt(e)}),t}function Ct(e){function t(){Pt(e),e.customInput.isEnabled()&&e.setCustomValue(null),s.classList.add("ospm_hidden"),wt(e)}var n,s;return s=o.createContainer("ospm_dropdown_unselect_container ospm_clickable"),n=o.createContainer("ospm_dropdown_unselect","Keine Auswahl"),s.appendChild(n),n.setAttribute("role","button"),s.setAttribute("tabindex",r.TABINDEXES.DEFAULT),i.addActionListener(s,t),i.addKeyEventListener("keydown",s,function(e){var t=i.getEventCode(e);(t===c.KEYCODES.ENTER||t===c.KEYCODES.SPACE)&&e.stopPropagation()}),s}function wt(e){vt(e,!1),e.valueChanged=!0,f.beforeInput(e),e.notifyChangeListeners(),O(e)}function Et(e,t){var i;return i=p.copyObject(t||{}),i=n.merge(i,{onInputChangedListener:function(t,n){Lt(e,t,n)},onEntryListener:function(t){St(e,t)},onKeyDownListener:function(t){Dt(e,t)},onInputListener:function(t){Tt(e,t)},hidden:!0}),new m(i)}function Lt(e,t,n){"search"===e.customInput.getMode()?kt(e,n):"custom"===e.customInput.getMode()?(e.customInput.oldValue=e.customInput.getValue(),It(e,t,n)):"customsearch"===e.customInput.getMode()&&(n.valueCommitted?(e.customInput.oldValue=e.customInput.getValue(),xt(e,"")):kt(e,n),e.data.navigatedTo||It(e,t,n))}function St(e){e.data.mobileMode&&e.nodes.pickerDom&&e.nodes.pickerDom.classList.add("ospm_dd_search")}function Dt(e,t){e.customInput.containsMode("search")&&kt(e,t)}function Tt(e,t){e.customInput.containsMode("search")&&kt(e,t)}function It(e,t){t&&(e.getCustomValue()&&!e.options.multiSelect&&p.setSelectedList(e,[]),$(e)),e.customInput.validateCustomInput(),e.customInput.hasError()&&e.addError(e.customInput.getLastErrorMsg()),vt(e,!0),O(e),f.beforeInput(e),t&&(e.valueChanged=!0,e.notifyChangeListeners())}function kt(e,t){var n=t.target.value,o=i.getEventCode(t);if(e.currentSearchString!==n){if(e.currentSearchString=n,o===c.KEYCODES.ENTER&&1===e.data.searchedElements.length&&e.shownWidgets[0].isEnabled())return t.preventDefault(),void t.stopPropagation();e.contextMenuView&&e.contextMenuView.setIgnoreMutationEvents(document.OSPMEnvironment.isTouchDevice()),xt(e,n)}}function xt(e,t){"string"!=typeof t&&(t=""),e.timer=n.executeLater(function(){e.data.searchedValue!==t&&(e.currentSearchString=null,e.timer=null,it(e,String(t)))},u.SEARCH_INPUT_LISTENER_TIMEOUT,e.timer)}function At(e,t){var n;e.nodes.pickerDom&&(e.nodes.pickerDom.classList.contains("ospm_dd_search")?(e.nodes.pickerContent.style.maxHeight="",document.body.firstElementChild.style.maxHeight="0"):(i.isIOS()?Ot()&&Boolean(t)?(n=t,document.body.style.minHeight=n+"px"):n=window.document.documentElement.clientHeight:n=window.innerHeight,document.body.firstElementChild.style.maxHeight=n-e.nodes.pickerDom.offsetHeight+"px"))}function Ot(){return Boolean(navigator.userAgent.match(/iPhone/))&&!document.TaoOSPM.session.environment.isSApp()}function Nt(e,t,n){return e.data.elements.filter(function(e){return Boolean(i.searchAndHighlight(e.label,t,n))})}function Mt(e){return e.data.mobileMode?u.DROPDOWN_MAX_ELEMENTS_PER_LOAD_TOUCH:u.DROPDOWN_MAX_ELEMENTS_PER_LOAD}function Pt(e,t,n){Rt(e,t,n),e.setError(),Z(e),X(e),vt(e,!1)}function Rt(e,t,i){var o,r=[];n.isSet(t)?n.isArray(t)?(e.data.elements.forEach(function(e){-1!==t.indexOf(e.value)&&r.push(e)}),t.length>0&&0===r.length&&t.every(function(e){return"number"==typeof e&&e>=0})&&e.data.elements.forEach(function(e){-1!==t.indexOf(e.index)&&r.push(e)}),e.data.elements.forEach(function(e){!e.enabled&&e.selected&&-1===r.indexOf(e)&&r.push(e)}),e.data.selectedElements=r,Bt(e,!0)):(o=p.getElementByIndexOrValue(e.data.elements,t),o?(p.setSelectedList(e,[o]),Bt(e,i)):i&&(p.setSelectedList(e,[]),e.data.applicationValue=t,e.data.applicationValueSet=!0)):(p.setSelectedList(e,[]),Bt(e,i))}function Ft(e,t){var n,i;e.data.navigatedTo=t,p.resetKeyBoardSelected(e),n=p.getElementByIndexOrValue(e.data.elements,t),n&&(i=e.data.shownElements.indexOf(n),-1===i&&(i=0,e.data.shownElements.length>0&&(e.data.navigatedTo=e.data.shownElements[0].index)),p.setKeyBoardSelected(e,i),"undefined"!=typeof e.shownWidgets[i]&&(e.shownWidgets[i].dom.scrollIntoView(),e.list.dom.setAttribute("aria-activedescendant",e.shownWidgets[i].dom.id),e.customInput.inputFieldDom.setAttribute("aria-activedescendant",e.shownWidgets[i].dom.id)))}function Bt(e,t){e.data.applicationValueSet=!1,t&&(e.data.applicationValue=null)}function zt(e){e.nodes.ariaFilteredElementInformation.innerHTML="",x(e)?(i.removeAllChildren(e.nodes.pickerContent),e.nodes.pickerContent.appendChild(e.list.dom)):(e.contextMenuView&&(e.contextMenuView.content.setParent(null),e.contextMenuView.setContent(e.list)),void 0!==e.data.navigatedTo&&Ft(e,e.data.navigatedTo))}function Vt(e,t){-1===u.DROPDOWN_SYNC_PICKER_VIEW_DELAY?Ht(e,t):e.syncPickerViewTimer=n.executeLater(function(){n.deleteProperty(e,"syncPickerViewTimer"),Ht(e,t)},u.DROPDOWN_SYNC_PICKER_VIEW_DELAY,e.syncPickerViewTimer)}function Ht(e,t){e.nodes.pickerDomWrapper&&V(e),e.data.mobileMode&&x(e)?z(e):H(e),ht(e),Z(e),zt(e),X(e),vt(e,!1),t&&t(),e.isSyncPickerViewNeeded=!1}function Ut(e){i.toggleClassName(e.dom,"ospm_dropdown_without_selection",e.isEmpty())}function Wt(e){i.toggleClassName(e.dom,"ospm_has_custom_placeholder",e.valuePlaceholder)}function jt(e){e.hasFormLayout?vt(e,!1):Yt(e)}function Gt(e){e.removeAttribute("style")}function qt(e,t){e.style.flex=t?"1":""}function Yt(e){var t,n,o,r;e.isFormElement()||i.isNBF()||(Gt(e.labelContainerDom),Gt(e.longValueContainer),Gt(e.rightDom),e.longValueContainer.childNodes.length>0&&i.moveChildren(e.longValueContainer,e.rightDom),t=e.wrapperDom.offsetWidth,r=t/2,n=e.rightDom.offsetWidth,o=e.labelContainerDom.offsetWidth,t>n+o?qt(e.rightDom,!0):e.wrapMode===c.WRAP_MODE.DEFAULT?(qt(e.labelContainerDom,!0),n>.62*t&&(i.moveChildren(e.rightDom,e.longValueContainer),i.isWithinInputPair(e)&&i.isWithinForm(e.parent)||(e.longValueContainer.style.paddingLeft=e.labelContainerDom.offsetLeft+"px"))):o>r&&n>r?(qt(e.labelContainerDom,!0),qt(e.rightDom,!0)):n>r?qt(e.rightDom,!0):o>r&&qt(e.labelContainerDom,!0))}function Kt(e){0===e.labelDom.textContent.length&&0===e.subLabelDom.textContent.length?(e.labelDom.classList.add("ospm_hidden"),e.infoTextDom.classList.add("ospm_hidden"),e.hintMarkerDom.classList.add("ospm_empty_label")):(e.labelDom.classList.remove("ospm_hidden"),e.infoTextDom.classList.remove("ospm_hidden"),e.hintMarkerDom.classList.remove("ospm_empty_label"))}function Xt(e){return e.customInput.containsMode("custom")&&e.customInput.isEnabled()&&!e.customInput.isHidden()&&e.options.multiSelect?(Qt.warning("Die Kombination aus Freitexteingabe + Multiselect wird im Dropdown-Widget wird ab 18.1 nicht unterstützt!"),!0):!1}function Zt(e){i.isNBF()||(e.setOptionalDomLabel(e.valuePlaceholder),i.isMobile()&&e.isFormElement()&&(e.labelContainerDom.querySelector(".ospm_optional").textContent=" "+e.getOptionalDomLabel()))}var Jt,$t,Qt,en,tn,nn,on,rn,sn,an,ln;return Qt=new h("OSPM","Dropdown"),rn=8,en="308px",tn=32,nn={name:c.ICONS.TRIANGLE_DOWN_S,color:c.ICON_COLOR.GREY,size:c.ICON_SIZE.SMALL_10},on={name:c.ICONS.LOCK_S,color:c.ICON_COLOR.DARK_GREY,size:c.ICON_SIZE.SMALL_20},sn=16,an=72,ln=64,Jt=e.subclass({data:null,options:null,nodes:null,contextMenuViewHOffset:i.isNBF()?0:tn,stepData:null,contentDom:null,leftDom:null,rightDom:null,rightIconDom:null,innerDomContainer:null,dropdownContainerDom:null,valuePlaceholder:"",rightLabelDom:null,contextMenuView:null,customInput:null,nowrap:!1,enabledRightIconName:null,shownWidgets:null,list:null,wrapperDom:null,dummyZindex:10001,isSyncPickerViewNeeded:!1,valueIconDom:null,isPickerOpen:!1,constructor:function(e,t){e=e||{},this.data={applicationValue:null,applicationValueSet:!1,currentRange:null,elements:[],mobileMode:i.isMobile(),scrollOffset:0,searchedElements:[],searchedValue:null,selectedElements:[],shownElements:[]},this.options={multiSelect:!1,nowrap:!1,useCustomInput:!1,allowValueReset:!1,autoCloseAfterClick:!0},this.nodes={pickerDom:null,pickerBodyOverlay:null,contextHeader:null,pickerContent:null,unselectDom:null,resetSelectionDom:null,ariaFilteredElementInformation:null},this.shownWidgets=[],this.stepData=t,i.isNBF()?(v(this),this.setLeftIconContainer(this.dropdownContainerDom),this.setRightIconContainer(this.dropdownContainerDom)):(b(this),this.setLeftIconContainer(this.innerDomContainer),this.setRightIconContainer(this.valueIconDom)),this.setValueStyle(),this.customInput=Et(this,e.customInput),this.nodes.unselectDom=Ct(this),this.nodes.resetSelectionDom=yt(this),this.isSyncPickerViewNeeded=!0,this.initializeFields(e),this.rightLabelDom.id=this.getId()+"__value",y(this),Vt(this),n.isSet(e.selected)&&this.setSelected(e.selected)},setElements:function(e){this.data.elements=n.isSet(e)&&n.isArray(e)?p.validateAndCopyElements(e,!0):[],p.setSelectedList(this,[]),this.data.shownElements=[],Vt(this)},getElements:function(){return p.validateAndCopyElements(this.data.elements,!1)},getSelected:function(){var e=[];return this.options.multiSelect?(this.data.selectedElements.forEach(function(t){e.push(t.value)}),e):et(this)?this.data.selectedElements[0].value:this.data.applicationValueSet?this.data.applicationValue:null},getSelectedIndexes:function(){var e=[];return this.options.multiSelect?(this.data.selectedElements.forEach(function(t){e.push(t.index)}),e):et(this)?this.data.selectedElements[0].index:this.data.applicationValueSet?-1:null},setSelected:function(e){if(this.options.multiSelect&&n.isSet(e)&&!n.isArray(e))throw new d("Bei Mehrfachauswahl kann nur ein Array selektiert werden");if(!this.options.multiSelect&&n.isSet(e)&&n.isArray(e))throw new d("Bei Einfachauswahl kann kein Array selektiert werden");Pt(this,e,!0)},setElementEnabled:function(e,t){var n,i=p.getElementByIndexOrValue(this.data.elements,e);if(null===i)throw new d("Index oder Wert ist in der Auswahlliste nicht vorhanden.");i.enabled=t===!0,n=this.data.shownElements.indexOf(i),-1!==n&&this.shownWidgets[n].setEnabled(i.enabled)},isElementEnabled:function(e){var t=p.getElementByIndexOrValue(this.data.elements,e);return t?t.enabled:null},setUseCustomInput:function(e){this.options.useCustomInput=Boolean(e),vt(this,!1),Z(this),Xt(this)},setValueResetAllowed:function(e){this.options.allowValueReset=Boolean(e),Z(this)},isValueResetAllowed:function(){return this.options.allowValueReset},setCustomInputPlaceholder:function(e){this.customInput.containsMode("custom")&&(this.customInput.setValuePlaceholder(e||""),Z(this))},setUseUnselect:function(){},setValuePlaceholder:function(e){this.valuePlaceholder=n.isStringProvided(e)?e:"",vt(this,!1),Zt(this)},setCustomValue:function(e){nt(this,e,!0)},getCustomValue:function(){return this.customInput.getValue()},setNowrap:function(e){this.options.nowrap=e===!0,i.updateElement(this)},setAutoCloseAfterClick:function(e){this.options.autoCloseAfterClick=e!==!1},isAutoCloseAfterClick:function(){return this.options.autoCloseAfterClick},initializeFields:function(e){Jt.parent.initializeFields.call(this,e),this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setSubLabel(e.subLabel),this.setSubLabelStyle(e.subLabelStyle),e.labelColor&&this.setLabelColor(e.labelColor),e.labelFont&&this.setLabelFont(e.labelFont),this.setLeftIcon(e.leftIcon),e.valuePlaceholder?this.setValuePlaceholder(e.valuePlaceholder):e.rightLabel&&this.setValuePlaceholder(e.rightLabel),this.setRightIcon(nn),this.options.multiSelect=Boolean(e.multiSelect),this.setElements(e.elements),this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage||"Bitte wählen Sie einen Wert aus."),n.isSet(e.selected)&&this.setSelected(e.selected),e.changeListener&&this.setChangeListener(e.changeListener),this.setUseCustomInput(e.useCustomInput===!1?!1:e.useCustomInput||e.customInput),this.setAutoCloseAfterClick(e.autoCloseAfterClick),e.customInputPlaceholder&&this.setCustomInputPlaceholder(e.customInputPlaceholder),this.setNowrap(e.nowrap),this.setValueResetAllowed(e.valueResetAllowed),this.setHint(e.hint),this.setHintIcon(e.hintIcon),this.setError(e.error),this.setInfoText(e.infoText),this.initializeCheckableFields(e),this.setGroup(e.group),e.wrapMode&&this.setWrapMode(e.wrapMode)},isEmpty:function(){return!(this.data.applicationValueSet||this.customInput.hasValue()||et(this))},switchToFormLayout:function(){var e,t,n;i.isNBF()||this.hasFormLayout||(Jt.parent.switchToFormLayout.call(this),e=o.createContainer("ospm_list_entry_left_content_form_wrapper"),t=o.createContainer("ospm_layout_right_form_wrapper"),n=o.createContainer("ospm_value_container_form_hint_wrapper"),t.appendChild(n),this.labelContainerDom.parentNode.replaceChild(e,this.labelContainerDom),this.rightDom.parentNode.replaceChild(t,this.rightDom),e.appendChild(this.labelContainerDom),n.appendChild(this.rightDom),n.appendChild(this.hintMarkerDom),t.appendChild(this.errorMessageDom),t.appendChild(this.infoTextDom),jt(this))},onResize:function(){this.data.mobileMode!==i.isMobile()&&(this===$t&&O(this),this.data.mobileMode=i.isMobile(),this.isSyncPickerViewNeeded=!0),i.isNBF()&&(this.isPickerOpen&&k(this),T(this)),Jt.parent.onResize.call(this)},afterRenderLayout:function(){jt(this)},setValueStyle:function(e){var t;t=n.isNumber(e)&&e>=c.TEXT_STYLE.LABEL1&&e<=c.TEXT_STYLE.LABEL6?"ospm_text_style_"+e:"ospm_text_style_"+c.TEXT_STYLE.LABEL4,i.replaceClassNameStartingWith(this.valueIconDom,"ospm_text_style_",t)},getValue:function(){var e,t=this.getCustomValue();return this.options.multiSelect?(e=this.getSelected(),t&&e.unshift(t),e):t?t:this.getSelected()},updateDisplay:function(){Jt.parent.updateDisplay.call(this),this.isEnabled()?(this.setTabIndex(r.TABINDEXES.DEFAULT),this.setRightIcon(nn),this.getLabelableHTMLElement().removeAttribute("aria-disabled")):(this.removeTabIndex(),this.setRightIcon(on),this.getLabelableHTMLElement().setAttribute("aria-disabled","true")),Zt(this),this.handleOptionalLabelInNbf(),i.isNBF()&&T(this)},getInputData:function(){return[this.getCustomValue(),this.getSelected()]},setInputData:function(e,t){this.setCustomValue(e[0]),this.setSelected(e[1]),t&&this.notifyChangeListeners()},getClassName:function(){return"Dropdown"},setBottomMargin:function(t){i.isNBF()?Jt.parent.setBottomMargin.call(this,t):e.setBottomPadding(this,t)},getLabelableHTMLElement:function(){return this.rightDom}}),Jt.proto(t.LabelMixin,t.SubLabelMixin,t.InfoTextMixin,t.HintMixin,t.LeftIconMixin,t.RightIconMixin,t.ClickMixin,t.ChangeMixin,t.ValueChangedMixin,t.ErrorMixin,t.MandatoryMixin,t.CheckableMixin,t.GroupMixin,t.WrapMixin,new t.TabIndexMixinFactory({domName:i.isNBF()?"dropdownContainerDom":"rightDom"}),t.FocusableMixin,t.InputStorageMixin),Jt.prototype.setRightIcon=function(e){var t;null!==this.rightIconDom&&this.valueIconDom.removeChild(this.rightIconDom),this.rightIconDom=o.createContainer("ospm_right_icon_container"),e===on?(t=g.createIcon(e),i.isNBF()||t.setAttribute("tabindex","0"),this.rightIconDom.appendChild(t)):(this.enabledRightIconName=nn,t=g.createIcon(nn),i.isNBF()&&(t=g.createSimpleIcon(c.ICONS.DOWN_S)),i.isNBF()||t.setAttribute("tabindex","0"),this.rightIconDom.appendChild(t),i.isNBF()&&(t=g.createSimpleIcon(c.ICONS.UP_S)),i.isNBF()||t.setAttribute("tabindex","0"),this.rightIconDom.appendChild(t)),this.valueIconDom.appendChild(this.rightIconDom),i.toggleClassName(this.dom,"ospm_has_right_icon",n.isSet(this.rightIconDom)),Yt(this)},Jt.prototype.wantsLargeHeight=function(){return"large"===this.minHeight?!0:this.dom.classList.contains("ospm_has_sublabel")?!0:Math.max(t.LeftIconMixin.getMaxIconHeight.call(this),t.RightIconMixin.getMaxIconHeight.call(this))>=r.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS?!0:!1},Jt.prototype.setLabel=function(e){var n;t.LabelMixin.setLabel.call(this,e),this.nodes.closingArea&&(n=this.nodes.closingArea.getElementsByClassName("ospm_dd_picker_label"),n&&n[0]&&(n[0].textContent=e)),Kt(this),Yt(this)},Jt.prototype.setSubLabel=function(e){t.SubLabelMixin.setSubLabel.call(this,e),Kt(this),Yt(this)},Jt.prototype.setMandatory=function(e){t.MandatoryMixin.setMandatory.call(this,e),i.toggleClassName(this.dom,"ospm_mandatory",this.mandatory),e?this.getLabelableHTMLElement().setAttribute("aria-required","true"):this.getLabelableHTMLElement().removeAttribute("aria-required"),vt(this,!1),Z(this)},Jt.prototype.isFocusable=function(){return this.isEnabled()},Jt.hidePicker=function(){O($t)},Jt}),define("tao/ospm/ui/MessengerUtils",["tao/ospm/common/Constants","tao/ospm/core/ServerCommunication","tao/ospm/main/CommIdVerification"],function(e,t,n){function i(e){s&&!s.closed?(s.focus(),s.postMessage(e,a)):t.executeRequest("ospm.getMessengerWindowInfo",e,o)}function o(e){var t,n,i,o,r,l=e.info.url,c=e.info.neoBlz,u=e.info.neoWorkflow,d=e.info.neoEntry,h=e.info.neoData,m=e.info.neoToken;l=l.replace(/\/+$/g,""),t=l+"/neostart",t.indexOf("://")<0&&(t="http://"+t),n=window.open("","OSPlus_neo Messenger"),s=n,a=e.info.url.replace("/mes",""),n&&(r=n.document.createElement("form"),r.method="post",r.action=t),o=function(e,t,n){i=e.document.createElement("input"),i.type="hidden",i.name=t,i.value=n?n:"",r.appendChild(i)},n&&(o(n,"blz",c),o(n,"workflow",u),o(n,"entry",d),o(n,"data",h),o(n,"toks",m),n.document.body.appendChild(r),r.submit())}var r,s=null,a=null;return r={getAPI:function(e){return{openMessengerWindow:function(t){n.checkForCurrentStep("messenger.openMessengerWindow",e),i(t)}}},openMessengerWindowPrim:function(e){i(e)}}}),define("tao/ospm/main/CallerStack",["tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/common/WorkflowData","tao/ospm/core/ClientRequestContext","tao/ospm/core/VorgangStackObfuscation"],function(e,t,n,i,o){function r(e,t,i){var o=i?n.copy(i):new n;u(e,"Workflow Id"),u(t,"Workflow entry"),document.OSPMEnvironment.WorkflowEngine.startNew(e,t,o)}function s(e,t,n,i){u(e,"Workflow-ID"),u(t,"Input-Variante"),v.push({workflowId:e,entry:t,wfDomainData:n,description:i})}function a(t,i){var o,r=document.GpsOSPM,s=new n;if(!r)throw new e("GPS-Anwendungs-API ist nicht verfügbar");u(t,"GPS-Prozess-Template"),o=r.bridgeTools.getGpsProzessStartDatenEmpty(),i&&(Object.prototype.hasOwnProperty.call(i,"fInputParameter")?o=i:s=n.copy(i)),document.TaoOSPM.workflow.data=s,r.Intern.gpsTools.isNonEmptyStringWithTrim(t)&&o.setSchablone(t),r.bridgeTools.setGpsProzessStartDatenWorkflow(o),document.OSPMEnvironment.WorkflowEngine.startNew("W_GPS_PROZESSAUSWAHL","I_GPS_W_PROZESSAUSWAHL_START",document.TaoOSPM.workflow.data)}function l(e,t){var i=t?n.copy(t):new n;u(e,"GPS-Vorgangs-ID"),i.DOMAIN_GPS_VORGANG_ID=e,document.OSPMEnvironment.WorkflowEngine.startNew("W_GPS_STEUERUNG","I_GPS_W_STEUERUNG_VORGANG",i)}function c(e,t,i){var o=i?n.copy(i):new n;document.OSPMEnvironment.WorkflowEngine.startNew(e,t,o)}function u(n,i){if(!t.isStringProvided(n))throw new e(i+" muss angegeben werden")}function d(e){e.workflowId?s(e.workflowId,e.entry,e.wfDomainData,e.description):e.vorgangsId&&m(e.vorgangsId,e.description)}function h(t){var n,i=g();if(null===i){if(n=document.OSPMEnvironment.WorkflowEngine.getWorkflow(),!n)throw new e("Aufruf nur aus einem GPS-Vorgang oder Workflow möglich");s(n.id,n.entry,n.data,t)}else m(g(),t)}function m(e,t){u(e,"GPS-Vorgangs-ID"),u(t,"Beschreibung des aktuellen Vorgangs"),v.push({vorgangId:e,description:t})}function p(e){return v.some(function(t){return t.vorgangId===e})}function f(e){return v.some(function(t){return t.workflowId===e})}function g(){return i.getCurrentVorgangId()}var _,v=[];return _={isNotEmpty:function(){return v.length>0},startNewWorkflow:function(e,t,n,i,o){o?d(o):h(e),r(t,n,i)},isCalledByWorkflow:function(e){return e?f(e):this.isNotEmpty()&&void 0!==v[v.length-1].workflowId},startNewVorgang:function(e,t,n,i){i?d(i):h(e),a(t,n)},continueVorgang:function(e,t,n,i){i?d(i):h(e),l(t,n)},isCalledByVorgang:function(e){return e?p(e):this.isNotEmpty()&&void 0!==v[v.length-1].vorgangId},getCallerDescription:function(){var e=v.length;return 0===e?null:v[e-1].description},returnToCaller:function(){var e;this.isNotEmpty()&&(v[v.length-1].vorgangId?l(v.pop().vorgangId):(e=v.pop(),c(e.workflowId,e.entry,e.wfDomainData)))},clearCallerStack:function(){v=[]},getStack:function(){return v},copyStackForServer:function(){return o.copyStack(v)},setStack:function(n){if(!t.isArray(n))throw new e("Kein gültiger CallerStack übergeben");v=[],o.setStack(n,m,s)}}}),define("tao/ospm/ui/views/AppView",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/core/CoreConstants","tao/ospm/ui/views/DashboardView","tao/ospm/ui/views/SidebarView","tao/ospm/main/Messages","tao/ospm/common/MessageScope","tao/ospm/ui/views/DialogView","tao/ospm/ui/views/Lightbox","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/views/StartbarView","tao/ospm/ui/views/sidebar/AdminTabView","tao/ospm/core/BusyView","tao/ospm/core/E2ETransaction","tao/ospm/core/ServerStage","tao/ospm/main/NeoSession","tao/ospm/ui/SidebarInfo","tao/ospm/core/OSPMPage","tao/ospm/main/WorkflowDialogStack","tao/ospm/ui/views/PageHeaderView","tao/ospm/ui/views/PageFooterView","tao/ospm/ui/widgets/ProgressBar","tao/ospm/ui/UIConstants","tao/ospm/ui/views/PopUpView","tao/ospm/main/WorkflowStepCodeLoader","tao/ospm/ui/widgets/Dropdown","tao/ospm/ui/UIBackground","tao/ospm/ui/UISecurityDialogHelper","tao/ospm/ui/views/DatePicker","tao/ospm/ui/layouts/Layout","tao/ospm/ui/MessengerUtils","tao/ospm/core/ErrorDump","tao/ospm/core/OSPMLogStorage","tao/ospm/main/CallerStack","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I,k,x,A,O,N,M,P,R,F){function B(e){var t,n,i=xt.children;for(t=0;t<i.length;t++)if(n=i[t],n.id===e)return n;return null}function z(e){return document.getElementById(e)}function V(e,t){U(e,B,t)}function H(e,t){U(e,z,t)}function U(e,t,n){var i=t(e);i&&n(i)}function W(){Pt!==qt&&(Ut.removeAllLeftIcons(),Pt===Ht&&Ut.addLeftIcon({name:{name:t.ICONS.DELETE_S,size:t.ICON_SIZE.SMALL_30}},null,mt),qt=Pt)}function j(e){var t;Wt&&(t=Nt===zt&&Mt===zt,Wt.setHidden(t),t||((e||Nt!==jt)&&(Nt!==zt?Wt.setCancelButton(Yt,ht,null,Nt===Ht,Rt):Bt?Wt.setCancelButton(Yt,ut,null,!0,Rt):Wt.setLabel(""),jt=Nt),(e||Mt!==Gt)&&(Mt!==zt?Wt.setActionButton(Kt,pt,null,Mt===Ht,Ft):Wt.setValue(""),Gt=Mt)))}function G(e,t){V(e,function(e){var o,r,s;At&&At.classList.remove("ospm_active_frame"),At=e,At.classList.add("ospm_active_frame"),xt.offsetLeft!==-At.offsetLeft&&(void 0===t&&(t=n.ANIMATION_TIME),s=document.OSPMEnvironment.useAnimations()?t:0,s>0&&(It=(new Date).getTime(),r=It,i.executeLater(function(){It===r&&q()},s+100)),o=0-At.offsetLeft/At.offsetWidth*100+"%",xt.style[Tt]=s+"ms",xt.style.left=o,t>0&&0===s&&i.executeLater(q,t))})}function q(){var e,t;for(yt.emit(o.EVENT_FINISHED_SCROLLING),It=void 0,t=xt.childNodes,e=0;e<t.length;e++)t[e].style.display="",t[e].style.left=100*e+"%",t[e].classList.remove("ospm_active_frame");At&&G(At.id,0)}function Y(e){for(var t=parseInt(e.style.left,10),n=e.nextSibling;n;)""===e.style.display&&(t+=100),n.style.left=t+"%",e=n,n=e.nextSibling}function K(e){return 0===e.lastIndexOf("visible",0)}function X(e){a.clear(e)}function Z(){I.hidePicker(),c.hideAll()}function J(){var e,t=xt.querySelectorAll(".ospm_page_container");for(e=0;e<t.length;e++)t[e].setAttribute("aria-hidden","true"),t[e].setAttribute("tabindex","-1")}function $(){g.invalidateGPSLoggingContext(),R.clearCallerStack(),et("",St),yt.setSidebarVisibility(v.getPerson()?o.STATE_VISIBLE:o.STATE_HIDDEN,!0),b.setIcon(),m.selectDashboardButton(),Ct.classList.add("ospm_hidden"),k.resetBackgroundColor()}function Q(){St.hide(),rt(St),Ct.classList.remove("ospm_hidden")}function et(e,t){nt(),yt.hideNextStepButton(),yt.hidePreviousStepButton(),yt.setStepTitle(e),tt(),m.setVisibility(o.STATE_VISIBLE_ALWAYS,!0),Ot.appendChild(t.dom),t.show()}function tt(){v.getPerson()?yt.setSidebarVisibility(o.STATE_VISIBLE,!0):yt.setSidebarVisibility(o.STATE_HIDDEN,!0)}function nt(){Q()}function it(){return document.OSPMEnvironment.WorkflowEngine}function ot(){var e,t=it();t&&!document.OSPMEnvironment.isMapiWorkflowActive()&&(e={logs:P.getLogsForCrash()},M.addInformation(e),t.startDialog("W_TAW_SMT","I_TAW_SMT",{D_NEO_CRASHREPORT:e}))}function rt(e){s.setVisibility(e.HIDDEN),m.deselectButtons(),e.dom.parentNode&&e.dom.parentNode===Ot&&Ot.removeChild(e.dom)}function st(e){var t;return e=e||{},t=h.createContainer("ospm_frame_wrapper"),t.id=e.id||i.randomUUID(),t}function at(e){g.startNewTransaction("appView",e)}function lt(){Ot.parentElement.parentElement.parentElement.addEventListener("keydown",Lt,!1),At&&T.supportsMultipleCodes()&&T.getRootContentElement(At).addEventListener("keydown",Lt,!1)}function ct(){Ot.parentElement.parentElement.parentElement.removeEventListener("keydown",Lt,!1),At&&T.supportsMultipleCodes()&&T.getRootContentElement(At).addEventListener("keydown",Lt,!1)}function ut(){at(o.EVENT_CLOSE_DIALOG),yt.emit(o.EVENT_CLOSE_DIALOG)}function dt(){at(o.EVENT_RESET_DIALOG),yt.emit(o.EVENT_RESET_DIALOG)}function ht(){at(o.EVENT_PREVIOUS_STEP),yt.emit(o.EVENT_PREVIOUS_STEP)}function mt(){at(o.EVENT_DIALOG_DELETE_CLICKED),yt.emit(o.EVENT_DIALOG_DELETE_CLICKED)}function pt(){at(o.EVENT_NEXT_STEP),yt.emit(o.EVENT_NEXT_STEP)}function ft(e){var t={title:"",exitButtonCfg:{clickListener:function(){e.emit(o.EVENT_EXIT_BUTTON_CLICKED)}},appointmentButtonCfg:{state:w.BUTTON_STATE_DISABLED},helpButtonCfg:{clickListener:function(){e.emit(o.EVENT_HELP_BUTTON_CLICKED)}},previousStepButtonCfg:{clickListener:function(){ht()}},previousStepTextButtonCfg:{clickListener:function(){ht()}},nextStepButtonCfg:{clickListener:function(){pt()}},progressBar:new L({})};return t.clickListener&&this.setClickListener(t.clickListener),n.IF&&(t.appointmentButtonCfg.state=w.BUTTON_STATE_DISABLED,t.helpButtonCfg.state=w.BUTTON_STATE_DISABLED),t}function gt(){var e=it();y.updateDeviceCssClass(),e&&e.getWorkflow()&&T.resizeLoadedSteps(),c.onResize(),D.onResize(),u.onResize(),C.onResize(),wt.onResize(),Et.sync(),St&&St.onResize(),A.onResize()}function _t(){return Et.getOffsetHeight()}function vt(e){var t,n=document.OSPMEnvironment.WorkflowStepManager;n&&(t=n.currentStep(),t&&e(t))}var bt,yt,Ct,wt,Et,Lt,St,Dt,Tt,It,kt,xt,At,Ot,Nt,Mt,Pt,Rt,Ft,Bt,zt=0,Vt=1,Ht=2,Ut=null,Wt=null,jt=null,Gt=null,qt=null,Yt="Zurück",Kt="Weiter";return bt=e.subclass({constructor:function(){function e(e){if(e.altKey||e.shiftKey||e.ctrlKey)if(!e.altKey||e.shiftKey||e.ctrlKey){if(!e.altKey&&!e.shiftKey&&e.ctrlKey)switch(d.getEventCode(e)){case t.KEYCODES.F12:_.isStageMaxAbnahme()&&ot()}}else switch(d.getEventCode(e)){case t.KEYCODES.F1:kt||n.IF||yt.emit(o.EVENT_DASHBOARD);break;case t.KEYCODES.F2:kt||n.IF||yt.emit(o.EVENT_SEARCH);break;case t.KEYCODES.F4:if(!n.IF)return e.preventDefault(),e.stopPropagation(),document.OSPMEnvironment.sessionActive?kt||(kt=!0,x.showSecurityDialog({title:"Abmelden",text:"Sind Sie sicher, dass Sie sich von OSPlus_neo abmelden möchten?"},function(){kt=!1,yt.emit(o.EVENT_LOGOUT)},function(){kt=!1})):yt.emit(o.EVENT_LOGOUT),!1;break;case t.KEYCODES.F11:kt||n.IF||yt.emit(o.EVENT_SETTINGS);break;case t.KEYCODES.F12:kt||n.IF||(e.stopPropagation(),s.toggleVisibility())}else switch(d.getEventCode(e)){case t.KEYCODES.F1:kt||yt.emit(o.EVENT_HELP_BUTTON_CLICKED)}}var r=z(S.OSPM_APP_HEADER);xt=z(S.WORKFLOWSTEP_CONTAINER_ID),Ct=z(S.OSPM_APP_HEADER),Ct.classList.add("ospm_hidden"),wt=new w(ft(this)),r.appendChild(wt.dom),wt.onResize(),void 0!==xt.style.MozTransition?(Dt="transitionend",Tt="MozTransitionDuration"):void 0!==xt.style.transition?(Dt="transitionend",Tt="transitionDuration"):void 0!==xt.style.WebkitTransition&&(Dt="webkitTransitionEnd",Tt="WebkitTransitionDuration"),xt.addEventListener(Dt,q),m.on(o.EVENT_STARTBAR_VISIBILITY,function(e){gt(),yt.emit(o.EVENT_STARTBAR_VISIBILITY,e)}),m.on(o.EVENT_DASHBOARD,function(){at(o.EVENT_DASHBOARD),yt.emit(o.EVENT_DASHBOARD)}),m.on(o.EVENT_LOGOUT,function(){at(o.EVENT_LOGOUT),yt.emit(o.EVENT_LOGOUT)
}),m.on(o.EVENT_BACKLINK,function(){at(o.EVENT_BACKLINK),yt.emit(o.EVENT_BACKLINK)}),m.on(o.EVENT_MESSENGER,function(){at(o.EVENT_MESSENGER),N.openMessengerWindowPrim({})}),m.on(o.EVENT_SETTINGS,function(){at(o.EVENT_SETTINGS),yt.emit(o.EVENT_SETTINGS)}),m.on(o.EVENT_SEARCH,function(){g.invalidateGPSLoggingContext(),at(o.EVENT_SEARCH),yt.emit(o.EVENT_SEARCH)}),v.on(v.DATA_CHANGED,function(){var e,t,n;t=v.getPerson(),e=v.getVertrag(),t&&!e?wt.setContextTitle(t.getVollenNamen()):t&&e?(n=e.getIban()?i.formatIban(e.getIban()):i.removeLeadingChars(e.getKontoNr()),wt.setContextTitle(n+", "+t.getVollenNamen())):wt.setContextTitle("")}),v.on(v.PROGRESS_SHOWN,function(e){wt.getProgressBar().setProgress(e.currentStep+1,e.steps+1)}),v.on(v.PROGRESS_HIDDEN,function(){wt.getProgressBar().setProgress(null)}),v.on(v.PROGRESS_UPDATE,function(e){wt.getProgressBar().setProgress(e.currentStep+1,e.steps+1)}),document.OSPMEnvironment.registerActionKeyEventHandler(e),Et=new E({exitClickListener:function(){yt.emit(o.EVENT_EXIT_BUTTON_CLICKED)}}),O.getAppContainerHeightOffset=_t,O.updatePageHeaderPosition=this.updatePageHeaderPosition},initialize:function(e){var t,a,l;Ot=z(S.WORKFLOWSTEP_CONTAINER_WRAPPER_ID),t=document.OSPMEnvironment.context.user,a=document.OSPMEnvironment.context.institut,St=new r({name:t.vorname?t.vorname+" "+t.name:t.name,institut:a.instName,lastLogin:i.isObject(document.OSPMEnvironment.context.login)?document.OSPMEnvironment.context.login.lastLogin:null}),Ot.appendChild(St.dom),St.on(o.EVENT_START_WORKFLOW,function(e){f.enableImageShow(),yt.setSidebarVisibility(o.STATE_HIDDEN,!1),at(o.EVENT_START_WORKFLOW),this.emit(o.EVENT_START_WORKFLOW,e)},yt),m.initialize(),s.initialize(yt),b.initialize(yt),yt.prepareBusyViewIcons(),yt.resetSidebar(),_.isStageMaxAbnahme()&&null!==z("ospm_app_stage_icon")&&d.addClickListener(z("ospm_app_stage_icon"),ot),l=document.getElementById("ospm_app"),l&&l.classList.toggle("no-if6-changes",n.IF),e()},checkFailedLogins:function(){var e,n,o,r,s;if(i.isObject(document.OSPMEnvironment.context.login)){if(r=document.OSPMEnvironment.context.login.failedAttempts,s=document.OSPMEnvironment.context.login.lastLogin,!r||isNaN(r))return null;e=1===r?"Ein fehlgeschlagener Login":r+" fehlgeschlagene Logins",n="Seit Ihrer letzten Anmeldung am "+s+" Uhr kam es zu <br>",n+=1===r?"einem fehlgeschlagenen Login-Versuch.":r+" fehlgeschlagenen Login-Versuchen.",o=c.createTextDialog({title:e,text:n,icon:{name:t.ICONS.UNLOCK_M,color:t.ICON_COLOR.BRAND}}),o.show()}},switchWorkflowStepView:function(e,t,n){var i=[xt,At,Ot,Ut,Wt,Yt,Rt,Kt,Ft,jt,Nt,Gt,Mt,qt,Pt,Bt,wt.getState()];return e&&(e!==!0&&(delete xt.id,Ot=e,xt=h.createContainer("ospm_app_main_right_content"),xt.id=S.WORKFLOWSTEP_CONTAINER_ID,Ot.appendChild(xt),Ot.classList.add("ospm_app_main_right_content_wrapper"),At=null,It=void 0,xt.addEventListener(Dt,q)),Ut=t,Wt=n),jt=null,Gt=null,qt=null,Bt=null,i},restoreWorkflowStepView:function(e){xt!==e[0]&&(xt=e[0],xt.id=S.WORKFLOWSTEP_CONTAINER_ID,Ot=e[2]),At=e[1],It=void 0,Ut=e[3],Wt=e[4],Yt=e[5],Rt=e[6],Kt=e[7],Ft=e[8],jt=e[9],Nt=e[10],Gt=e[11],Mt=e[12],qt=e[13],Pt=e[14],Bt=e[15],wt.restoreState(e[16]),At&&G(At.id,0)},unshiftWorkflowFrame:function(){var e,t;if(t=xt.firstChild)for(;"none"===t.style.display&&t;)t=t.nextSibling;return e=st(),e.style.left=t?100*(t.offsetLeft/t.offsetWidth-1)+"%":!i.isNullOrUndefined(xt.style.left)&&parseFloat(xt.style.left)?parseFloat(xt.style.left)-100+"%":"-100%",xt.insertBefore(e,t),e.id},pushWorkflowFrame:function(){var e,t;for(t=xt.lastChild;t&&"none"===t.style.display;t=t.previousSibling);return e=st(),e.style.left=t?100*(t.offsetLeft/t.offsetWidth+1)+"%":!i.isNullOrUndefined(xt.style.left)&&parseFloat(xt.style.left)?parseFloat(xt.style.left)+100+"%":"100%",xt.appendChild(e),e.id},getFrame:function(e){return B(e)},clearFrame:function(e){var t,n;t=B(e),n=st({id:e}),n.style.display=t.style.display,n.style.left=t.style.left,xt.replaceChild(n,t)},scrollToFrame:G,removeFrame:function(e){var t=B(e);t.parentNode.removeChild(t),"undefined"==typeof It&&At&&G(At.id,0)},hideFrame:function(e){V(e,function(e){e.style.display="none"})},showFrame:function(e){H(e,function(e){var t=e.querySelector(".ospm_page_container");t&&(t.setAttribute("aria-hidden","false"),t.removeAttribute("tabindex"),t.focus()),e.style.display="",Y(e),Ut||Wt?(Ut&&W(),j()):d.updateElement(wt),n.IF&&(d.isFF()||d.isIE())&&setTimeout(function(){var e=document.getElementById("ospm_app");e&&e.classList.add("ospm_if")},200),Et.sync()})},updatePageHeaderPosition:function(){Ut||Wt||vt(function(e){e.mapiDom?wt.setTopPosition(window.pageYOffset||e.mapiDom.scrollTop||0):e.layout&&wt.setTopPosition(e.layout.getScrollTop()||0)})},hideNextStepButton:function(e){Mt=e?Vt:zt,Wt?j():wt.hideNextStepButton(e)},showNextStepButton:function(){Mt=Ht,Wt?j():wt.showNextStepButton()},hidePreviousStepButton:function(e){Nt=e?Vt:zt,Wt?j():wt.hidePreviousStepButton(e)},showPreviousStepButton:function(){Nt=Ht,Wt?j():wt.showPreviousStepButton()},setPreviousAndNextButtonLabels:function(e,t,n,i){Ut?(Yt=e,Rt=t,Kt=n,Ft=i,j(!0)):wt.setPreviousStepTextButtonLabel(e)},hideExitButton:function(e){Ut?W():(wt.hideExitButton(e),Et.hideExitButton(e))},showExitButton:function(){Ut?W():(wt.showExitButton(),Et.showExitButton())},hideAppointmentButton:function(e){Ut?W():wt.hideAppointmentButton(e)},showAppointmentButton:function(){Ut?W():wt.showAppointmentButton()},hideHelpButton:function(e){Ut?W():wt.hideHelpButton(e)},showHelpButton:function(){Ut?W():wt.showHelpButton()},hideVoiceRecordButton:function(){wt.hideVoiceRecordButton()},showVoiceRecordButton:function(){wt.showVoiceRecordButton()},hideRightHeaderButton:function(){Bt&&(Bt=!1,j(!0)),Ut&&(Ut.removeAllRightIcons(),ct())},showCloseButton:function(){Bt||(Bt=!0,j(!0)),Ut&&(Ut.setRightIcon(t.ICONS.CANCEL_S,null,ut),lt())},showResetButton:function(){Bt&&(Bt=!1,j(!0)),Ut&&(Ut.setRightIcon(t.ICONS.RESET_S,null,dt),ct())},hideDeleteButton:function(){Pt=Vt,Ut&&W()},showDeleteButton:function(){Pt=Ht,Ut&&W()},isScrolling:function(){return"number"==typeof It},setStepTitle:function(e){Ut?Ut.setLabel(e):(wt.setTitle(e),p.setStepTitle(e))},setGpsAktivitaetNameInTitle:function(e){n.IF||vt(function(t){var n,i,o="";n=t.workflowStep.split("_"),n.length>1&&(o=n[1]+" - "),o+=e,_.isStageMaxAbnahme()&&(i=document.baseURI.split("/"),i.length>2&&(o+=" - ",o+=i[2])),document.title=o})},setLoginInTitle:function(e){n.IF||vt(function(){document.title=e?o.DOCUMENT_TITLE_LOGIN:o.DOCUMENT_TITLE_DEFAULT})},selectSettingsButton:function(){m.selectSettingsButton()},selectSearchButton:function(){m.selectSearchButton()},selectThemeButton:function(){m.selectThemeButton()},showDashboard:$,hideAllViews:nt,setStartbarVisibility:function(e,t){m.setVisibility(e,t)},setSidebarVisibility:function(e,t){s.setVisibility(e,t)},setSidebarInfoIcon:function(e){b.setIcon(e)},switchToVP:function(e){var t;0===C.getDepth(!0)&&(t=z("ospm_app_sub_header_container"),e?(s.hideSidebarIcon(),t&&t.classList.add("ospm_hidden")):(s.showSidebarIcon(),t&&t.classList.remove("ospm_hidden")))},addCustomButton:function(e,t,n,i){p.addCustomButton(e,t,n,i)},removeCustomButton:function(e){p.removeCustomButton(e)},removeAllCustomButtons:function(){p.removeAllCustomButtons()},setCustomButtonEnabled:function(e,t){p.setCustomButtonEnabled(e,t)},resetSidebar:function(){s.setVisibility(null),this.removeAllCustomButtons()},hideAllDialogs:Z,isStateVisible:K,resetView:function(e){document.OSPMEnvironment.error||(0===C.getDepth(!0)&&(n.IF?window.scrollTo(0,0):document.OSPMEnvironment&&document.OSPMEnvironment.getServerEnvironment().getDeviceType(!0)===t.DEVICETYPES.OSPPB&&vt(function(e){e.layout&&e.layout.scrollToLayoutTop&&e.layout.scrollToLayoutTop()}),m.setVisibility(null),yt.resetSidebar(),yt.switchToVP(!1),X(e)),v.setDeleteListener(null),Z(),J()),e===l.WORKFLOW_STEP&&s.returnToMainView(),this.setLoginInTitle(!1)},resetStartbar:function(){m.deselectButtons(),m.setVisibility(o.STATE_HIDDEN)},isDashboardViewVisible:function(){return St&&St.isVisible()},setDashboardFavoriten:function(e,t){St&&St.setFavoriten&&St.setFavoriten(e,t)},prepareBusyViewIcons:function(){window.busyViewIcons=[F.createIcon({name:t.ICONS.SANDCLOCK_M,color:t.ICON_COLOR.GREY},t.ICON_SIZE.MEDIUM_30),F.createIcon({name:"two_people_standing"},t.ICON_SIZE.LARGE_20),F.createIcon({name:"two_people_sitting"},t.ICON_SIZE.LARGE_20)]},getSidebarVisibility:function(){return s.getVisibility()},setZIndexToPageWrapper:function(e){var t,n;window.isCordova&&!i.isNullOrUndefined(At)&&(t=At.getElementsByClassName("ospm_content_iframe"),!i.isArray(t)&&t.length>0&&!i.isNullOrUndefined(t[0].contentDocument)&&(n=t[0].contentDocument.getElementsByClassName("ospm_page_wrapper"),!i.isArray(n)&&n.length>0&&(n[0].style.zIndex=e)))},getClassName:function(){return"AppView"}},!1),Lt=d.createKeyEventListener(function(e){switch(d.getEventCode(e)){case t.KEYCODES.ESCAPE:e.stopPropagation(),e.preventDefault(),ut()}}),yt=new bt,yt.on(o.EVENT_SIDEBAR_VISIBILITY,function(){i.executeLater(gt,10)}),window.addEventListener("resize",gt,!0),document.OSPMEnvironment&&(document.OSPMEnvironment.appView=yt,n.IF||(document.OSPMEnvironment.refreshMenu=function(e){document.OSPMEnvironment.loadMenu(function(){St.refreshView(e)})})),yt}),define("tao/ospm/textpool/model/TPText",["tao/lib/stapes"],function(e){var t=e.subclass({alias:null,applicationId:null,customText:null,defaultText:null,constructor:function(e){this.alias=e.alias,this.applicationId=e.applicationId,this.customText=e.customText,this.defaultText=e.defaultText},getAlias:function(){return this.alias},getApplicationId:function(){return this.applicationId},setApplicationId:function(e){this.applicationId=e},setCustomText:function(e){this.customText=e},getText:function(){return this.customText||this.defaultText},getDefaultText:function(){return this.defaultText},getCustomText:function(){return this.customText}});return t}),define("tao/ospm/textpool/helper/TPTextUnmarshaller",["tao/lib/stapes","tao/ospm/common/Logger","tao/ospm/common/OSPMError","tao/ospm/textpool/model/TPText","tao/ospm/core/TextpoolConstants"],function(e,t,n,i,o){function r(e,t){return e[o.KEY_OUTPUT_ALIASES]&&e[o.KEY_OUTPUT_ALIASES].constructor===Array?e[o.KEY_OUTPUT_ALIASES].map(function(e){return s(e),new t({alias:e[o.KEY_OUTPUT_ALIAS_NAME].split("/")[1],applicationTitle:e[o.KEY_OUTPUT_PROCESS_NAME],applicationId:e[o.KEY_OUTPUT_ALIAS_NAME].split("/")[0],activityTitle:e[o.KEY_OUTPUT_SCREEN_NAME],description:e[o.KEY_OUTPUT_DESCRIPTION],defaultText:e[o.KEY_OUTPUT_DEFAULT][o.KEY_OUTPUT_DEFAULT_TEXT]})}):(d.warning('In der textpool.json wurden keine Aliasse definiert, da die Property "aliases" fehlt oder kein Array ist. Deswegen werden keine Texte aus dem Textpool geladen, obwohl das vermutlich beabsichtigt war.'),[])}function s(e){var t=44,n=32,i=48,r=256;a(e[o.KEY_OUTPUT_ALIAS_NAME],"aliasName"),l(e[o.KEY_OUTPUT_ALIAS_NAME],"aliasName"),u(e[o.KEY_OUTPUT_ALIAS_NAME],"aliasName"),c(e[o.KEY_OUTPUT_ALIAS_NAME],t,"aliasName"),a(e[o.KEY_OUTPUT_PROCESS_NAME],"application"),l(e[o.KEY_OUTPUT_PROCESS_NAME],"application"),c(e[o.KEY_OUTPUT_PROCESS_NAME],n,"application"),a(e[o.KEY_OUTPUT_SCREEN_NAME],"screenTitle"),l(e[o.KEY_OUTPUT_SCREEN_NAME],"screenTitle"),c(e[o.KEY_OUTPUT_SCREEN_NAME],i,"screenTitle"),a(e[o.KEY_OUTPUT_DESCRIPTION],"description"),l(e[o.KEY_OUTPUT_DESCRIPTION],"description"),c(e[o.KEY_OUTPUT_DESCRIPTION],r,"description"),a(e[o.KEY_OUTPUT_DEFAULT],"default"),a(e[o.KEY_OUTPUT_DEFAULT][o.KEY_OUTPUT_DEFAULT_TEXT],"default.text"),l(e[o.KEY_OUTPUT_DEFAULT][o.KEY_OUTPUT_DEFAULT_TEXT],"default.text")}function a(e,t){if(void 0===e)throw new n("Fehler bei der Überprüfung von textpool.json. Das Attribut "+t+" wurde erwartet, aber nicht gefunden.")}function l(e,t){if("string"!=typeof e)throw new n("Fehler bei der Überprüfung von textpool.json. Das Attribut "+t+" wurde als String erwartet, aber als "+typeof e+" übergeben.")}function c(e,t,i){if(e.length>t)throw new n("Fehler bei der Überprüfung von textpool.json. Das Attribut "+i+" überschreitet die zulässige maximale Länge von "+t+" Zeichen.")}function u(e,t){var i=2;if(e.split("/").length!==i)throw new n("Fehler bei der Überprüfung von textpool.json. Das Attribut "+t+' muss das für Aliasse erforderliche Format "[Anwendungskürzel]/[Aliasname]" einhalten. ')}var d=new t("ospm","TPTextUnmarshaller"),h=e.subclass({});return h.extend({unmarshalTpText:function(e){return r(e,i)}}),h}),define("tao/ospm/textpool/TPServerCommunication",["tao/lib/stapes","tao/ospm/common/OSPMError","tao/ospm/core/ServerCommunication","tao/ospm/core/TextpoolConstants"],function(e,t,n,i){function o(e,t,n){var o={};o[i.KEY_INPUT_APPLICATION_ID]=e,s(l,o,t,n)}function r(e,t,n){var o={};o[i.KEY_INPUT_APPLICATION_ID]=e,s(c,o,t,n)}function s(e,o,r,s){s=s||function(e){throw new t(e)},n.executeRequest(e,o,function(e,t){var n;if(t)for(n=0;n<t.length;n++)if(t[n].code>=8)return void s(t[n].msg,t[n]);r(e&&e[i.KEY_OUTPUT_DATA]?e[i.KEY_OUTPUT_DATA]:e&&Object.keys(e)[0]?e[Object.keys(e)[0]]:null)})}var a,l="ospm.getTextpoolTexts",c="ospm.getTextpoolDefaults";return a=e.subclass(),a.extend({loadAliases:o,loadDefaults:r}),a}),define("tao/ospm/textpool/helper/TPTextServerManager",["tao/lib/stapes","tao/ospm/textpool/TPServerCommunication","tao/ospm/core/TextpoolConstants","tao/ospm/common/Logger","tao/ospm/common/OSPMError"],function(e,t,n,i){function o(e){return e.reduce(function(e,t){var n=t.getApplicationId();return e.indexOf(n)<0&&e.push(t.getApplicationId()),e},[])}function r(e){return e.reduce(function(e,t){return e[s(t)]=t,e},{})}function s(e){return a(e.getApplicationId(),e.getAlias())}function a(e,t){return e+":"+t}var l=new i("ospm","TPTextServerManager"),c=e.subclass({});return c.extend({fillTpTextList:function(e,i){var s=o(e),c=r(e);l.debug("distinctApplicationIds: "),s.forEach(function(e){l.debug("      "+e)}),s.forEach(function(e,o){t.loadAliases(e,function(e){e.length>0?e.forEach(function(t,r){var l=c[a(t[n.KEY_OUTPUT_APPLICATION_ID],t[n.KEY_OUTPUT_ALIAS_NAME])];l&&l.setCustomText(t[n.KEY_OUTPUT_CUSTOM_TEXT]),o+1>=s.length&&r+1>=e.length&&"function"==typeof i&&i()}):i()},function(t){l.error("Textpool-Texte zu "+e+" konnten nicht aufgelöst werden. Die Standardtexte werden stattdessen verwendet. Folgender Fehler ist aufgetreten: "+t.message),i()})})}}),c}),define("tao/ospm/textpool/TextPoolService",["tao/lib/stapes","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Logger","tao/ospm/textpool/helper/TPTextUnmarshaller","tao/ospm/textpool/helper/TPTextServerManager","tao/ospm/textpool/TPServerCommunication"],function(e,t,n,i,o,r,s,a){function l(e){var t=e.split("/");return{app:t[1],alias:t[2]}}function c(e){return e?e.startsWith("pool/")&&3===e.split("/").length:!1}function u(e,t){return!t||"object"!=typeof t||Array.isArray(t)?e:(Object.keys(t).forEach(function(n){var i=new RegExp("{%"+n+"%}","gmi");e=e.replace(i,t[n])}),e)}var d,h,m=new o("OSPM","TextPoolService");return d=e.subclass({tpTextsByApp:null,pendingServiceRequests:null,onSuccessHandlerQueue:null,constructor:function(){this.tpTextsByApp={},this.onSuccessHandlerQueue={},this.pendingServiceRequests=[]},loadTexts:function(e,t){var n,i;n=function(t){m.info("textpool.json für "+e+" erfolgreich geladen."),this.tpTextsByApp[e]=r.unmarshalTpText(t),this.tpTextsByApp[e].length>0?s.fillTpTextList(this.tpTextsByApp[e],function(){this.executeAndPopQueuedCallbacks(e)}.bind(this)):this.executeAndPopQueuedCallbacks(e)}.bind(this),i=function(t){this.tpTextsByApp[e]=[],m.error("Fehler beim Laden der Deklarationen zum OSPlus_neo-Textpool: "+t),this.executeAndPopQueuedCallbacks(e)}.bind(this),m.info("PendingRequests for: "+this.pendingServiceRequests),this.pushCallbackToQueue(e,t),-1===this.pendingServiceRequests.indexOf(e)?(m.info("Lade textpool.json für "+e+"."),this.pendingServiceRequests.push(e),a.loadDefaults(e,n,i)):m.info("Ein weiterer "+e+"-Workflow wurde geladen, aber ein Textpool-Request für diese Anwendung ist schon unterwegs.")},pushCallbackToQueue:function(e,t){n.hasProperty(this.onSuccessHandlerQueue,e)||(this.onSuccessHandlerQueue[e]=[]),this.onSuccessHandlerQueue[e].push(t)},executeAndPopQueuedCallbacks:function(e){n.hasProperty(this.onSuccessHandlerQueue,e)&&(this.onSuccessHandlerQueue[e].forEach(function(e){e()}),this.onSuccessHandlerQueue[e]=[]),m.info("Pending Service-Requests vorher: "+this.pendingServiceRequests),this.pendingServiceRequests.splice(this.pendingServiceRequests.indexOf(e),1),m.info("Pending Service-Requests nachher: "+this.pendingServiceRequests)},isAppLoaded:function(e){return Object.keys(this.tpTextsByApp).some(function(t){return t===e})},resolveTextPoolReference:function(e,t){var n,o,r,s;if(!c(e))return e;if(s=l(e),n=this.tpTextsByApp[s.app],n&&(o=n.filter(function(e){return s.alias===e.getAlias()})[0]),!o)throw new i("Für den Alias "+s.app+"/"+s.alias+" wurde kein Eintrag im Textpool gefunden.");return r=o.getText(),u(r,t)}}),h=new d,document.OSPMEnvironment&&(document.OSPMEnvironment.textPoolService=h),h}),define("tao/ospm/WorkflowLoader",["tao/lib/stapes","tao/ospm/common/Logger","tao/ospm/common/DelayedOSPMError","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/main/Workflow","tao/ospm/core/BusyView","tao/ospm/core/CoreConstants","tao/ospm/core/E2ETransaction","tao/ospm/core/ServerCommunication","tao/ospm/textpool/TextPoolService"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(){return!window.isCordova&&("async"===r.FETCH_NEXT_WORKFLOW||0===r.FETCH_NEXT_WORKFLOW.indexOf(A))}function p(e){if(!a.isWorkflowId(e))throw new i('Ungültige Workflow ID (entspricht nicht "W_<APP>_<LOCAL_ID>")',{workflowId:e});return a.getAppOfId(e)}function f(e,t,n,i,o){v(t),x.push({id:t,size:o||JSON.stringify(n).length,content:n}),g(p(t),function(){i&&(e.loadedWorkflowIds.push(t),e.workflows[t]=n,i(n))})}function g(e,t){r.TEXTPOOL_ENABLED&&!h.isAppLoaded(e)?h.loadTexts(e,t):t()}function _(){for(var e=x.reduce(function(e,t){return e+t.size},0);e>r.WORKFLOW_CACHE_SIZE&&x.length>1;)e-=x.shift().size}function v(e){var t,n;for(t=x.length-1;t>=0;t--)if(n=x[t],n.id===e)return x.splice(t,1),n;return null}function b(e,t,o,r){var a=document.OSPMEnvironment.appURL(t,!0)+"workflows/"+o+".json";s.loadJSON(a,function(t){var s=t[o];"object"==typeof s?f(e,o,s,r):(e.loadedWorkflowIds.push(o),e.failImmediately?T(e,new i("Inkonsistente Workflow-Struktur",{workflowId:o,workflow:t})):(e.workflows[o]=new n("Inkonsistente Workflow-Struktur",{workflowId:o,workflow:t}),r({states:{}})))},function(t,s){var a;e.failImmediately?(a=i.fromError("Konnte Workflow nicht laden: "+t,s),a.workflowId=o,T(e,a)):(a=n.fromError("Konnte Workflow nicht laden: "+t,s),a.workflowId=o,e.workflows[o]=a,r({states:{}}))})}function y(){return x.map(function(e){return e.id})}function C(e,t,o,r,s){e.loadedWorkflowIds.push(o),e.failImmediately?T(e,new i(t,{workflowId:o,workflow:{workflowId:r}})):(e.workflows[o]=new n(t,{workflowId:o,workflow:{workflowId:r}}),s&&s({states:{}}))}function w(e,t,n,i){s.isObject(n)?n.errorNotAvailable?C(e,"Workflow konnte nicht vom Server geladen werden",t,n,i):f(e,t,n,i):C(e,"Inkonsistente Workflow-Struktur in Service Response",t,n,i)}function E(e,t,n,o){var s="ospm.getWorkflows@"+t,a={};a[c.S_INPUT]={workflows:[n],cached:y()},d.executeRequest(s,a,function(t){var r=t[c.S_WORKFLOWS];r||T(e,new i("fehlerhafter Response",{service:s,data:t})),Object.keys(r).forEach(function(t){t!==n&&0===t.indexOf("W_")&&w(e,t,r[t],null)}),w(e,n,r[n],o)},e.serviceDelay),r.IF&&d.executeRequest("ospm.checkSession@"+t,{},function(){},e.serviceDelay)}function L(e,t,o,r){var s;if(e.workflows.hasOwnProperty(o))return void r(e.workflows[o]);if(s=v(o))return I.debug("Nutze Workflow %o aus Cache",o),void f(e,o,s.content,r,s.size);I.debug("Lade Workflow %o",o);try{e.useService?E(e,t,o,r):b(e,t,o,r)}catch(a){e.failImmediately?T(e,i.fromError("Fehler beim Laden eines Workflows",a,{workflowId:o})):(e.workflows[o]=n.fromError("Fehler beim Laden eines Workflows",a,{workflowId:o}),r({states:{}}))}}function S(e,t,n){s.search(t.states,function(i){var o=i.id;return Object.prototype.hasOwnProperty.call(e.workflows,o)||a.isSpecialWorkflow(o)||!a.isWorkflowId(o)?!1:(e.loadWorkflow(o,function(){S(e,t,n)}),!0)})||n()}function D(){var e;return"TEST"===r.MODE?!1:(e=document.OSPMEnvironment.context.serverEnvironment.stage,e!==o.STAGES.DEVELOP&&e!==o.STAGES.ENTWICKLUNG)}function T(e,t){l.clearBusyView(),t.topWorkflow=e.topWorkflow,t.loadedWorkflowIds=e.loadedWorkflowIds,e.onErrorCallback(t)}var I,k,x=[],A="service:";return I=new t("OSPM","WorkflowLoader"),k=e.subclass({workflows:null,onErrorCallback:null,topWorkflow:null,loadedWorkflowIds:null,failImmediately:!1,useService:!1,serviceDelay:0,constructor:function(e,t){if("function"!=typeof e)throw new i("Keine Fehlerbehandlungsfunktion für den WorkflowLoader angegeben",{onErrorCallback:e});this.onErrorCallback=e,this.workflows={},this.loadedWorkflowIds=[],this.failImmediately=!t&&D(),this.useService=!window.isCordova&&r.WORKFLOW_LOADER_SERVICE&&(!t||0===r.FETCH_NEXT_WORKFLOW.indexOf(A)),t&&this.useService&&(this.serviceDelay=parseInt(r.FETCH_NEXT_WORKFLOW.substring(A.length),10)||0)},loadWorkflow:function(e,t){function o(e){t(e),_(),"object"==typeof dtrum&&dtrum.leaveAction&&dtrum.leaveAction(s)}var r,s,l=this;"object"==typeof dtrum&&dtrum.enterAction&&(s=dtrum.enterAction("Lade Workflow "+e,"load"),dtrum.addActionProperties(s,null,null,{workflow:e},null)),this.topWorkflow||(this.topWorkflow=e),a.isSpecialWorkflow(e)?o(new a(e,{})):(r=p(e),document.OSPMEnvironment.updateComponent(r,function(){L(l,r,e,function(t){S(l,t,function(){o(new a(e,l.workflows))})})},function(t){l.failImmediately?(T(l,i.fromError("Fehler beim Aktualisieren der Anwendung "+r.toUpperCase(),t)),"object"==typeof dtrum&&dtrum.leaveAction&&(s=dtrumdtrum.leaveAction(s))):(l.workflows[e]=n.fromError("Fehler beim Aktualisieren der Anwendung "+r.toUpperCase(),t),o(new a(e,l.workflows)))}))},getClassName:function(){return"WorkflowLoader"}}),k.fetchNextWorkflow=function(e){s.isArray(e)?e.forEach(k.fetchNextWorkflow):s.isStringProvided(e)&&m()&&new k(function(t){I.error("Fehler beim Vorabladen von Workflow %o: %o",e,t)},!0).loadWorkflow(e,function(){I.debug("Workflow %o wurde vorab geladen",e)})},k}),define("tao/ospm/if/WhatsNew",{check:function(e,t){t()}}),define("tao/ospm/main/StartBarController",["tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/core/CoreConstants","tao/ospm/core/LogoutController","tao/ospm/core/PushService","tao/ospm/main/NeoSession","tao/ospm/main/CallerStack"],function(e,t,n,i,o,r,s,a,l){var c,u,d;return c=new n("OSPM","StartBarController"),u={setStartBarButtonListener:function(e){d="function"==typeof e?e:null},notifyStartBarButtonListener:function(e,t){d&&i.callSafely("StartBarButtonListener",d,e,t||!1)},registerEvents:function(n,s,d,h,m,p){n.on(o.EVENT_SEARCH,function(){c.debug("Suche-Button ausgeloest"),d.abortCurrentWorkflow(o.EVENT_SEARCH,function(){l.clearCallerStack(),d.startNew(t.SEARCH_WORKFLOW,t.SEARCH_WORKFLOW_ENTRY,t.SEARCH_WORKFLOW_DATA,!1,function(t){var n,i;return"object"==typeof t&&(s.clearAll(),n=t[e.DOMAIN_KEY_NEO_PERSON],i=t[e.DOMAIN_KEY_NEO_KONTO],n&&i?a.setVertrag(i,n):a.setPerson(n)),!0}),n.selectSearchButton()},n.resetStartbar)}),n.on(o.EVENT_DASHBOARD,function(){c.debug("Dashboard-Button ausgeloest"),d.abortCurrentWorkflow(o.EVENT_DASHBOARD,function(){d.startNew(e.WORKFLOW_DASHBOARD,null,{})},n.resetStartbar)}),n.on(o.EVENT_SETTINGS,function(){var r=d.getWorkflow(),s=t.PREFERENCES_WORKFLOW_DATA;if(c.debug("Settings-Button ausgeloest"),t.USE_PREFERENCES_WORKFLOW_IN_DIALOG){if(r){if(r.id===t.PREFERENCES_WORKFLOW)return;s=i.deepCopy(s),s[t.PREFERENCES_WORKFLOW_DOMAIN_KEY_WORKFLOW]=r.id,s[t.PREFERENCES_WORKFLOW_DOMAIN_KEY_WORKFLOW_ENTRY]=r.entry}d.startDialog(t.PREFERENCES_WORKFLOW,t.PREFERENCES_WORKFLOW_ENTRY,s,null,n.selectSettingsButton,null,function(t){u.notifyStartBarButtonListener(e.STARTBAR_EVENT.SETTINGS,t)})}else d.abortCurrentWorkflow(o.EVENT_SETTINGS,function(){r&&(s=i.deepCopy(s),s[t.PREFERENCES_WORKFLOW_DOMAIN_KEY_WORKFLOW]=r.id,s[t.PREFERENCES_WORKFLOW_DOMAIN_KEY_WORKFLOW_ENTRY]=r.entry),d.startNew(t.PREFERENCES_WORKFLOW,t.PREFERENCES_WORKFLOW_ENTRY,s)},n.resetStartbar)}),n.on(o.EVENT_LOGOUT,function(){c.debug("Logout-Button ausgeloest"),d.abortCurrentWorkflow(o.EVENT_LOGOUT,function(){var e=null;t.SHOW_LOGOFF_PAGE&&!window.isCordova&&(e="logoff.html?",p.context.institut.bgcolor&&(e=e+"bgcolor="+encodeURIComponent(p.context.institut.bgcolor)+"&"),p.context.institut.logo&&(e=e+"logo="+encodeURIComponent(p.context.institut.logo)+"&"),p.context.institut.instName&&(e=e+"instName="+encodeURIComponent(p.context.institut.instName))),r.logout({url:e})},n.resetStartbar)})}}}),define("tao/ospm/WorkflowEngine",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/common/Config","tao/ospm/common/OSPMError","tao/ospm/core/CoreConstants","tao/ospm/core/OSPMPage","tao/ospm/main/StartupConfig","tao/ospm/main/BacklinkHandler","tao/ospm/main/WorkflowStepManager","tao/ospm/main/Workflow","tao/ospm/core/WorkflowShadowAccounting","tao/ospm/main/WorkflowMetadataValidator","tao/ospm/core/SessionManager","tao/ospm/common/WorkflowData","tao/ospm/ui/views/AppView","tao/ospm/WorkflowLoader","tao/ospm/main/WorkflowStepState","tao/ospm/ui/UIWorkflowHelper","tao/ospm/main/NeoSession","tao/ospm/core/BusyView","tao/ospm/ui/views/StartbarView","tao/ospm/ui/views/DialogView","tao/ospm/ui/views/AlertViewIsp","tao/ospm/core/E2ETransaction","tao/ospm/core/ClientRequestContext","tao/ospm/ui/SidebarInfo","tao/ospm/common/MessageScope","tao/ospm/main/Messages","tao/ospm/main/WorkflowDialogStack","tao/ospm/ui/UIErrorUtils","tao/ospm/core/OnlineHelpService","tao/ospm/main/WorkflowStepCodeLoader","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Text","tao/ospm/core/ErrorDump","tao/ospm/core/LogoutController","tao/ospm/core/ServerCommunication","tao/ospm/core/EventLog","tao/ospm/ui/views/WhatsNew","tao/ospm/core/LogoutTimer","tao/ospm/main/VPIntegration","tao/ospm/core/PerformanceMonitor","tao/ospm/main/StartBarController"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I,k,x,A,O,N,M,P,R,F,B,z,V,H,U,W,j,G){function q(){Tn.push([In,Qt,en,tn,nn,on,rn,sn,an,ln,cn,un,dn,hn,mn,document.TaoOSPM])}function Y(){var e;if(Tn.length<1)throw new r("Interner Fehler: Rücksprung aus Workflow-Dialog in nicht (mehr) vorhandenen Workflow)");e=Tn.pop(),In=e[0],Qt=e[1],en=e[2],tn=e[3],nn=e[4],on=e[5],rn=e[6],sn=e[7],an=e[8],ln=e[9],cn=e[10],un=e[11],dn=e[12],hn=e[13],mn=e[14],document.TaoOSPM=e[16],D.setDynsProdId(In.getCurrentProduktId())}function K(e){m.proxy().resetState(),D.reportTopWorkflowEnd(),D.setDynsProdId(""),S.reportClientAction("workflow","clearCurrent"),e&&(u.clearCurrent(),u.reset(I.WORKFLOW_STEP),T.setVorgangAblegen(),T.clearAll(),O.clearPageAndProcessHelp(),y.setProgressInformation(null),x.clear(),g.hideAllViews()),un=null,dn=null,hn=null,mn=null,0===x.getDepth()&&W.end(),Ht(),C.clearApplicationBusyView(),i.deleteProperty(document,"TaoOSPM")}function X(e){u.clearCurrent(),qt(),dt(),r.isOSPMError(e)||r.fromError("Fehler in Workflow-Steuerung",e)}function Z(e){return{title:e.title||o.WORKFLOW_WARNING_DEFAULT_TITLE,okLabel:e.okLabel||o.WORKFLOW_WARNING_DEFAULT_OK,cancelLabel:e.cancelLabel||o.WORKFLOW_WARNING_DEFAULT_CANCEL,text:e.text||o.WORKFLOW_WARNING_DEFAULT_TEXT,clearExitAction:e.clearExitAction||!1}}function J(e){en=e?Z(e):null}function $(e,t){var n,i,r,s=!0,a={},u=t!==!1,d=Tn.length<=0;dt(),en=null,gn=!1,fn=null,null!==In&&"object"==typeof In&&In.hasOwnProperty("data")&&(a=In.data),K(d),d&&k.clear(I.COMPLETE_WORKFLOW),r=In,In=null,qt(),"function"==typeof Qt&&(s=Qt(a,e,r)),s&&(u&&l.hasBacklink()&&l.isBacklinkAutoMode()?c.dispatchBack({autoMap:a}):o.ISP?L.displayError({message:"Die OSPlus_neo-Startseite kann bei einem Aufruf aus der Integrierten Service Plattform nicht dargestellt werden."}):o.IF||0!==document.OSPMEnvironment.context.dashboard.iconCount||et()?g.showDashboard():(i=Q()?"index_preview.html":"index_no_priviledge.html",n=document.OSPMEnvironment.origin(window.location)+window.location.pathname,n.endsWith(".html")?n=n.substring(0,n.lastIndexOf("/")+1)+i:n+="/"===n[n.length-1]?i:"/"+i,B.logout({url:n,replace:!0})))}function Q(){return document.OSPMEnvironment.context.dashboard.hasPriviledgeForNeoMenuProfile!==!1}function et(){var e=document.OSPMEnvironment.context.user.userId;return"string"==typeof e&&e.toUpperCase()===o.MONITORING_USER.toUpperCase()}function tt(e){var t;return t=u.currentStep(),t&&t.getState()<v.EXITED&&t.getId()===e?!0:!1}function nt(e){var t,n;if(document.OSPMEnvironment&&document.OSPMEnvironment.error)throw new r("Folgefehler durch Code-Ausführung nach technischem Fehler");if(t=u.currentStep(),t&&t.getState()<v.EXITED){if(n=t.getId(),n!==e)throw new r("Unerlaubter Funktionsaufruf von nicht-aktivem WorkflowStep",{commId:e,activeCommId:n});return!0}return!1}function it(e){if(void 0!==e&&null!==e&&"string"!=typeof e)throw new r("exit ist kein String",{exit:e})}function ot(){wn&&(clearTimeout(wn),wn=null)}function rt(){En&&(clearTimeout(En),En=null)}function st(e,t){u.setNextEnabled(e,t),nn=e}function at(e,t){u.setPreviousEnabled(e,t),tn=e}function lt(e){e&&ct(!1),u.setCloseEnabled(e),on=e}function ct(){var e=!1;e&&lt(!1),u.setResetEnabled(e),rn=e}function ut(e){u.setDeleteEnabled(e),sn=e}function dt(){rt(),ot(),gn=!1,pn=!1,vn=null,bn=null,yn=null,Ln&&(clearTimeout(Ln),Ln=null),Sn&&(clearTimeout(Sn),Sn=null)}function ht(){dt(),at(In&&In.history.length>0),st(null!==In),lt(!1),ct(!1),ut(!1),an=null,ln=null,cn=!1,un=null,dn=null,hn=null,mn=null,0===x.getDepth()&&W.end()}function mt(e){dt(),X(e)}function pt(e){var t,n,i,r,s;if(e)Dn.error("Fehler beim Wechsel zu %o: %o",In.getCurrentStep(),e),mt(e);else{pn?(t=o.LONG_PRELOAD_DELAY,n=o.SHORT_PRELOAD_DELAY):(t=o.SHORT_PRELOAD_DELAY,n=o.LONG_PRELOAD_DELAY),ht(),gt(null,n),ft(null,t),D.setDynsProdId(In.getCurrentProduktId()),i=u.currentStep(),_n=!0,i.workflow=In.getCurrentWorkflow().id,u.enterCurrent();try{s=In.getCurrentStepEntry(),m.proxy().enterState(In.getCurrentWorkflow(),In.data),jt(i.getId(),kn),V.logSystemEvent(kn,i.workflowStep,{state:i.toString(),entry:s}),document.TaoOSPM=i.TaoOSPM,null===i.title&&(i.title=In.getCurrentStepName()),r=i.communication.onEntry(s,In.getCurrentWorkflow().data.createCopy(),In.getCurrentWorkflow().id,In.getCurrentStateIndex())&&!E.isShowingDialogs(),_n=!1,i.getState()===v.RUNNING&&(!r||W.isActive()||document.OSPMEnvironment.isMapiWorkflowActive()?Pt():Ot())}catch(a){_n=!1,X(a)}}}function ft(e,t){var n,o,r=e;rt(),null===r&&(n=In.getCurrentExits(),1===n.length&&(r=n[0])),"string"==typeof r?(ln=r,o=In.getNextStep(r),o&&t>=0&&(En=i.executeLater(function(){u.loadNext(o)},t))):ln=null}function gt(e,t){var n;an=e,ot(),null===e?n=In.getPreviousStepInDialog():"string"==typeof e&&(n=In.getNextStep(e)),n&&t>=0&&(wn=i.executeLater(function(){u.loadPrevious(n)},t))}function _t(e){var t,n;return t=u.currentStep(),t&&(n=t.communication)?n[e]:null}function vt(e){var t,n,i;return(cn||!e)&&(n=u.currentStep(),n&&n.TaoOSPM&&(i=n.TaoOSPM.ui,t=i.getValidationContainer()||i.getLayout())),t&&Boolean(A.checkInput(t))}function bt(){yt(tn,"onPrevious",!0)}function yt(e,t,n){var s=u.currentStep(),a=_t(t);if(document.OSPMEnvironment.isMapiWorkflowActive())return void document.OSPMEnvironment.triggerMapiNavigation(n);if(Kt(),vt(n))Dt(!0);else if(s&&s.getState()!==v.RUNNING)Dn.info("onUserSwitch in unpassendem State %o aufgerufen",s.getState());else if(Ln)Dn.info("onUserSwitch aufgerufen, während ein Wechsel noch aktiv ist");else if(e){Vt("WorkflowStep-Wechsel ("+t+")"),n?(fn=!0,rt(),u.scrollToStep(-1)):(fn=!1,ot(),u.scrollToStep(1)),pn=n,Ln=i.executeLater(function(){mt(new r("Timeout beim Verlassen des aktuellen WorkflowStep",{workflowStep:s.workflowStep}))
},o.ON_SWITCH_TIMEOUT);try{jt(null,t),V.logSystemEvent(t,s.workflowStep,{state:s.toString()}),a()}catch(l){X(l)}}else Dt(!0)}function Ct(e,t){S.reportClientAction("workflow","switchToDashboard"),u.clearCurrent(),u.reset(I.COMPLETE_WORKFLOW),T.setVorgangAblegen(),Qt=null,$(e,!1),"function"==typeof t&&t()}function wt(e,t,n){var r=document.OSPMEnvironment.getMkgParts(e);return r&&o.CPL_WRAPPER_WORKFLOW&&o.CPL_WRAPPER_ENTRY?{id:o.CPL_WRAPPER_WORKFLOW,entry:o.CPL_WRAPPER_ENTRY,data:{D_MAPI_APP_ID:r.app,D_MAPI_WORKFLOW_ID:r.name,D_MAPI_WORKFLOW_VERSION:r.version,D_MAPI_INPUT_DATA:i.isObject(n)?JSON.stringify(n):null}}:null}function Et(e,n,i,o,r,s,a,l,c){function u(){var e=wt(y,C,w);e&&(y=e.id,C=e.entry,w=e.data)}function h(){In&&a?b.showSecurityDialog(a,p):p()}function p(){At(f)}function f(){w&&w.gpId?H.check(w.gpId,v):v()}function v(){jt(null,"Lade Workflow "+y+"/"+C),g.hideAllViews(),en=null,m.proxy().resetState(),Lt(y,C,l),D.reportTopWorkflowStart(y,C,l),x.clear(),N.afterLeavingStep(),Vt("Neuer Workflow"),y instanceof d?St(y,C,w,o,r,s,c):y===t.WORKFLOW_DASHBOARD?Ct(o,r):new _(X).loadWorkflow(y,function(e){St(e,C,w,o,r,s,c)})}var y=e,C=n,w=i;u(),Kt(),jt(null,"Prüfe Laden Workflow "+y+"/"+C),h()}function Lt(e,t,n){var i="";e&&(i+=e.id?e.id:e),S.ensureTransaction("topWorkflow","start"),n?S.reportClientAction("workflow","startGps",i,t):S.reportClientAction("workflow","startTop",i,t)}function St(e,t,n,i,o,r,s){var a,l=n;jt(null,"Starte Workflow "+e.id+"/"+t),S.reportClientAction("workflow","startLoaded",e.id,t),"object"==typeof dtrum&&dtrum.enterAction&&(a=dtrum.enterAction("Start Workflow "+e.id+"/"+t,"start"),dtrum.addActionProperties(a,null,null,{workflow:e.id,workflowentry:t},null)),en=null,Qt=r,In=e,l=Ft(l),document.OSPMEnvironment.useAnimations()?u.scrollToStep(0,0):u.scrollToStep(0),In.enter(t,l,!0),ht(),s&&g.setSidebarInfoIcon(e.id),pn=i,"boolean"!=typeof fn&&(fn=Boolean(pn)),u.exitCurrent(),Gt(),fn?(u.loadPrevious(In.getCurrentStep()),u.switchToPrevious(pt)):(u.loadNext(In.getCurrentStep()),u.switchToNext(pt)),"function"==typeof o&&o(),"object"==typeof dtrum&&dtrum.leaveAction&&dtrum.leaveAction(a)}function Dt(e){Ht(),z.setOnIdleCallback(),yn?yn():e||Ln||Sn||vn?(jt(null,"Wechsel abgebrochen"),u.scrollToStep(0),fn=null,dt()):Dn.info("cancelExit() wurde ohne vorhergehendes onNext(), onPrevious(), onClose(), onSuspend() oder onAbort() aufgerufen")}function Tt(e){return jt(null,"runNextStep("+e+")"),h.reportNext(e),In.next(e,Rt(),pn)}function It(e,t,n){var s=e;xt(t,s,!1,function(){var e,t,a,l,c,d=!1;_n&&Ot(),"boolean"!=typeof fn&&(fn=Boolean(n)),Ln||(pn=n,u.scrollToStep(fn?-1:1)),void 0===s&&(s=pn?an:ln);try{if(a=In.getCurrentStep(),Gt(),"string"==typeof s)d=Tt(s);else if(pn)jt(null,"runPreviousStep(history)"),h.reportPrevious(),d=In.previous();else{if(e=In.getCurrentExits(),1!==e.length)return void mt(new r("runNextStep() ohne expliziten Exit aufgerufen und Exit kann nicht eindeutig bestimmt werden",{exits:e}));d=Tt(e[0])}if(Tn.length<=0&&k.setWorkflowDepth(d?0:In.getCurrentWorkflowDepth()),u.exitCurrent(),d)return jt(null,"Workflow beendet"),Dn.info("Workflow ordnungsgemäss beendet."),void $(fn);if(t=In.getCurrentStep(),!t)return void mt(new r("Workflow-Struktur inkonsistent, referenzierter State nicht definiert",{currentStep:a,exit:s}));In.getCurrentWorkflow().isShowingDialog()?(x.pop(),In.getCurrentWorkflow().dialogCounter--,gn=!1,pn?(l=o.LONG_PRELOAD_DELAY,c=o.SHORT_PRELOAD_DELAY):(l=o.SHORT_PRELOAD_DELAY,c=o.LONG_PRELOAD_DELAY),dt(),fn=null,gt(an,c),ft(ln,l),D.setDynsProdId(In.getCurrentProduktId()),i.executeLater(function(){var e=In.getCurrentStepEntry(),t=u.currentStep(),n=In.getCurrentWorkflow();m.proxy().enterState(n,In.data),Ht(),jt(t.getId(),On),V.logSystemEvent(On,t.workflowStep,{state:t.toString(),entry:e}),document.TaoOSPM=t.TaoOSPM,t.visible&&qt(),t.communication.onReturn(e,n.data.createCopy(),n.id,In.getCurrentStateIndex())})):i.executeLater(function(){fn?(u.loadPrevious(t),u.switchToPrevious(pt)):(u.loadNext(t),u.switchToNext(pt))}),w.setVisibility(null)}catch(p){gn=!1,X(p)}})}function kt(e,t,n){var o,s,a=!1;if(Ln)throw new r("runNextInDialog() darf nicht nach Aufruf zum Verlassen des WorkflowSteps aufgerufen werden (Verlassen muss erst abgebrochen werden)");xt(t,e,!0,function(){fn=!1;try{if(s=In.getCurrentStep(),In.enterDialog(e,Rt()),a)throw new r("Der angegebene exit in runNextInDialog() führt zum Ende des Workflows",{currentStep:s,exit:e});if(o=In.getCurrentStep(),!o)return void mt(new r("Workflow-Struktur inkonsistent, referenzierter State nicht definiert",{currentStep:s,exit:e}));jt(null,"runNextInDialog("+e+")"),Gt(),h.reportNext(e),Tn.length<=0&&k.setWorkflowDepth(In.getCurrentWorkflowDepth()),i.executeLater(function(){x.push(n),u.scrollToStep(1),u.loadNext(o),u.switchToNext(pt)})}catch(t){gn=!1,X(t)}})}function xt(e,t,n,i){if(vn)throw new r("Wechsel nicht möglich, unbeantwortete Aufforderung zum Start eines Top-Level-Workflow-Dialogs");Kt(),Vt("WorkflowStep-Wechsel (exit: "+t+")"),z.setOnIdleCallback(function(){var t,o=u.currentStep();if(o&&o.communication&&o.communication.onExit(n),rt(),ot(),gn)throw new r("Wechsel wird bereits durchgeführt");C.resetAllTimeouts(),N.afterLeavingStep(),n||g.hideAllViews(),gn=!0,t=In.getCurrentWorkflow(),t.data=e,t.currentTitle=u.getCurrentStepTitle(),document.OSPMEnvironment.abortMapiWorkflow(o.getId(),i)})}function At(e){var t;z.isIdle()?e():(t=C.startBusyView("WorkflowEngine: Warten auf Service-Aufrufe"),z.setOnIdleCallback(function(){C.stopBusyView(t),e()}))}function Ot(){u.hideCurrent(),x.setCurrentStep(null),Vt("Unsichtbarer WorkflowStep")}function Nt(){var e,t;In&&Rt()&&(x.getDepth(!0)>0?(t=null!==In.getPreviousStepInDialog(!0),!t&&document.OSPMEnvironment.isMapiWorkflowActive()&&(t=document.OSPMEnvironment.mapiUiCount()>1),Mt(t,dn,un,hn),t||u.markCurrentAsFirstVisibleStep()):(In.isInSubTask()&&(e=un||In.getPreviousStepTitle()||o.SUBTASK_BACK_LABEL_FALLBACK),g.setPreviousAndNextButtonLabels(e)))}function Mt(e,t,n,i){var r=n,s=i,a=t;r=r||(e?o.WORKFLOW_DIALOG_DEFAULT_PREVIOUS_LABEL:o.WORKFLOW_DIALOG_ABBRECHEN_PREVIOUS_LABEL),s=s||o.WORKFLOW_DIALOG_DEFAULT_NEXT_LABEL,a="boolean"==typeof a?a:e,g.setPreviousAndNextButtonLabels(r,a,s,mn)}function Pt(){var e;fn=null,In&&(e=u.currentStep(),C.clearApplicationBusyView(e.getId()),Ht(),e.visible||(e.visible=!0,jt(e.getId(),"Sichtbar"),M.callOnResizeOnAllElements(e.layout),Nt(),u.showCurrent(),qt(),E.isShowingDialogs()||M.focusFirstElement(e.layout)),x.setCurrentStep(e))}function Rt(){var e=u.currentStep();return e&&e.visible||W.isActive()||document.OSPMEnvironment.isMapiWorkflowActive()}function Ft(e){var n,i,o=e;return o=f.copy(o||{}),Object.prototype.hasOwnProperty.call(o,t.DOMAIN_KEY_NEO_PERSON)||(n=y.getPerson(),n&&(o[t.DOMAIN_KEY_NEO_PERSON]=y.getPersonData())),Object.prototype.hasOwnProperty.call(o,t.DOMAIN_KEY_NEO_KONTO)||(i=y.getVertrag(),i&&(o[t.DOMAIN_KEY_NEO_KONTO]=y.getVertragData())),o}function Bt(e,t){function n(){C.stopBusyView($t),i.resetExecuteLater(Sn),Cn=null,t()}var s,a=!1,l=_t(e);if(l){s=u.currentStep(),jt(s.getId(),e),V.logSystemEvent(e,s.workflowStep,{state:s.toString()}),Cn=n,$t=C.startBusyView("WorkflowEngine: Vorgangs-Aktion ("+e+")"),Sn=i.executeLater(function(){X(new r('Timeout beim Aufruf von "'+e+'"',{workflowStep:s.workflowStep}))},o.ON_VORGANG_FN_TIMEOUT);try{a=l()}catch(c){X(c)}}a||n()}function zt(e){var t,n=_t(e);n&&(t=u.currentStep(),jt(t.getId(),e),V.logSystemEvent(e,t.workflowStep,{state:t.toString()}),n())}function Vt(e){$t?C.update($t):$t=C.startBusyView("WorkflowEngine: "+e)}function Ht(){$t&&(C.stopBusyView($t),$t=null)}function Ut(e){Wt(o.INITIAL_WORKFLOW),jt(null,"Lade Workflow "+o.INITIAL_WORKFLOW+"/"+o.INITIAL_WORKFLOW_ENTRY+" für initialen Step"),g.hideAllViews(),m.proxy().resetState(),Lt(o.INITIAL_WORKFLOW,o.INITIAL_WORKFLOW_ENTRY,!1),D.reportTopWorkflowStart(o.INITIAL_WORKFLOW,o.INITIAL_WORKFLOW_ENTRY,!1),x.clear(),i.deleteProperty(document,"TaoOSPM"),Vt("Neuer Workflow"),St(o.INITIAL_WORKFLOW,o.INITIAL_WORKFLOW_ENTRY,o.INITIAL_WORKFLOW_DATA,e,g.checkFailedLogins,function(e,t,n){var i=2,o=new P;return o.addElement(new R({label:"Es wurde die Ausgangsvariante "+n.current.substring(i)+" ausgewählt."})),E.createOkDialog({header:{label:"Workflowstep wurde verlassen"},content:o}).show(),!0},!0)}function Wt(e){var t,n,i,r,s=1,a=2,l=2,c=e.workflow.split("_"),u=c[s],h=c[a],m="W_"+u+"_"+h+"_TEST";for(o.INITIAL_WORKFLOW_ENTRY=o.INITIAL_WORKFLOW_ENTRY||"I_"+m.substring(l),n=e.transitions,e.transitions&&e.transitions.length||(n=["O_"+m.substring(l)+"_EXIT"]),t={},t[m]={},t[m].entries={},t[m].entries[o.INITIAL_WORKFLOW_ENTRY]={to:"1/I_"+u+"_"+h},t[m].states={},r={id:e.workflow,name:e.workflow,transitions:{}},t[m].states[1]=r,i=0;i<n.length;i++)r.transitions[n[i]]={to:"O_"+n[i]};o.INITIAL_WORKFLOW=new d(m,t)}function jt(e,t){u.logEvent(e,t)}function Gt(){j.onWSSwitch()}function qt(){j.endWSSwitch()}function Yt(){return en?en:W.isActive()?Z({}):null}function Kt(){if(bn)throw new r("Auf Abbruch des Workflows muss reagiert werden, bevor andere Aktionen ausgeführt werden können")}function Xt(e){var t,n;return o.IF?o.ABBRUCHSICHERUNG_IF&&o.ABBRUCHSICHERUNG_IF_TIMEOUT>Math.max(0,Date.now()-U.getLastUserActivity())&&(t=o.ABBRUCHSICHERUNG_MESSAGE):window.isCordova||(n=Yt(),n&&o.ABBRUCHSICHERUNG_STAT_LOCKED&&(t=o.ABBRUCHSICHERUNG_MESSAGE,n.title!==o.WORKFLOW_WARNING_DEFAULT_TITLE&&(t+="\n"+n.title),n.text!==o.WORKFLOW_WARNING_DEFAULT_TEXT&&(t+="\n"+n.text))),t?(e.returnValue=t,t):null}var Zt,Jt,$t,Qt,en,tn,nn,on,rn,sn,an,ln,cn,un,dn,hn,mn,pn,fn,gn,_n,vn,bn,yn,Cn,wn,En,Ln,Sn,Dn=new n("OSPM","WorkflowEngine"),Tn=[],In=null,kn="onEntry",xn="onSuspend",An="onResume",On="onReturn",Nn="onAbort";return Zt=e.subclass({constructor:function(){ht()},startNew:function(e,t,n,o,r,s){var a=Yt(),l=t,c=n,u=e;i.isObject(u)&&(i.isObject(u.dialog)?a=Z(u.dialog):u.ignoreLocking===!0&&(a=null),l=u.entry,c=u.data,u=u.id),fn=null,Et(u,l,c,o,r,s,a,!1,!0)},startDialog:function(e,t,n,o,s,a,l){var c,d=e,h=t,m=n;if(gn||Ln)throw new r("Ein Top-Level-Workflow kann nicht in einem Workflow-Dialog gestartet werden, wenn aktuell ein WorkflowStep-Wechsel durchgeführt wird.");Kt(),c=wt(d,h,m),c&&(d=c.id,h=c.entry,m=new f(c.data)),null!==In?(jt(null,"Anfrage Top-Level Workflow-Dialog "+d+"/"+h),vn=function(){vn=null,l&&l(!0),jt(null,"Starte Top-Level Workflow-Dialog "+d+"/"+h),q(),fn=null,Vt("Neuer Workflow in Dialog"),new _(X).loadWorkflow(d,function(e){x.push(o),St(e,h,m,!1,null,function(e){var t;x.pop(),Y(),t=u.currentStep(),document.TaoOSPM=t.TaoOSPM,jt(null,An),V.logSystemEvent(An,t.workflowStep,{state:t.toString()}),x.setCurrentStep(t),t.communication.onResume(f.copy(e)),a&&i.callSafely("Finish-Callback von startWorkflowDialog",a,e)}),s&&s()})},z.setOnIdleCallback(function(){var e=u.currentStep();jt(e.commId,xn),V.logSystemEvent(xn,e.workflowStep,{state:e.toString()}),e.communication.onSuspend(d,h)})):(l&&l(!1),Jt.startNew(d,h,m),s&&s())},getWorkflow:function(){return In},abortCurrentWorkflow:function(e,t,n){function s(){var t=u.currentStep();t&&t.getState()===v.RUNNING?(jt(t.commId,Nn),V.logSystemEvent(Nn,t.workflowStep,{state:t.toString()}),bn=l,yn=h,m=i.executeLater(function(){mt(new r("Timeout beim Abbruch des aktuellen Workflows",{workflowStep:t.workflowStep,reason:e}))},o.ON_ABORT_TIMEOUT),Vt(Nn),t.communication.onAbort(e)):l()}function a(e){Ht(),jt(null,e),bn=null,yn=null,i.resetExecuteLater(m)}function l(){At(c)}function c(){var t=document.OSPMEnvironment.abortAllMapiWorkflows;en=null,G.notifyStartBarButtonListener(e),a("Workflow abbrechen"),W.end(),t?t(d):d()}function d(){K(!0),t()}function h(){a("Workflow-Abbruch verhindert"),n()}var m,p=Yt();Kt(),p?(jt(null,"Sicherheitsabfrage Abbruch Workflow"),b.showSecurityDialog(p,s,n)):s()},startInitialWorkflow:function(e,t){i.isObject(o.INITIAL_WORKFLOW)&&o.INITIAL_WORKFLOW.isStepDescription?Ut(e):Jt.startNew(o.INITIAL_WORKFLOW,o.INITIAL_WORKFLOW_ENTRY,o.INITIAL_WORKFLOW_DATA,e,t)},switchToNext:function(){yt(nn,"onNext",!1)},switchToPrevious:bt,closeWorkflowDialog:function(){on?yt(on,"onClose",!0):bt()},showCurrentStep:function(e){(!e||tt(e))&&Pt()},initialize:function(e){var n=document.OSPMEnvironment.OSPMCommunication;g.on(s.EVENT_NEXT_STEP,Jt.switchToNext),g.on(s.EVENT_PREVIOUS_STEP,Jt.switchToPrevious),g.on(s.EVENT_CLOSE_DIALOG,Jt.closeWorkflowDialog),g.on(s.EVENT_RESET_DIALOG,function(){zt("onReset")}),g.on(s.EVENT_START_WORKFLOW,function(e){Jt.startNew(e)}),g.on(s.EVENT_DIALOG_DELETE_CLICKED,function(){zt("onDelete")}),T.on(T.EVENT_VORGANG_ABLEGEN_CALLBACK,function(e){Bt("onVorgangAblegen",e)}),T.on(T.EVENT_VORGANG_BEENDEN_CALLBACK,function(e){Bt("onVorgangBeenden",e)}),T.on(T.EVENT_VORGANG_LOESCHEN_CALLBACK,function(e){Bt("onVorgangLoeschen",e)}),window.onbeforeunload=Xt,n.workflow.disableNext=function(e,t){nt(e)&&(rt(),st(!1,t))},n.workflow.disablePrevious=function(e,t){nt(e)&&(ot(),at(!1,t))},n.workflow.disableClose=function(e){nt(e)&&lt(!1)},n.workflow.disableReset=function(e){nt(e)&&ct(!1)},n.workflow.disableDelete=function(e){nt(e)&&ut(!1)},n.workflow.enableNext=function(e){nt(e)&&(st(!0),ft(ln,g.isScrolling()?o.LONG_PRELOAD_DELAY:o.SHORT_PRELOAD_DELAY))},n.workflow.enablePrevious=function(e){nt(e)&&(at(!0),gt(an,g.isScrolling()?o.LONG_PRELOAD_DELAY:o.SHORT_PRELOAD_DELAY))},n.workflow.enableClose=function(e){nt(e)&&lt(!0)},n.workflow.enableReset=function(e){nt(e)&&ct(!0)},n.workflow.enableDelete=function(e){nt(e)&&ut(!0)},n.workflow.triggerNext=function(e){tt(e)?Jt.switchToNext():Dn.warning("triggerNext wurde von einem nicht-aktiven WorkflowStep (commId %o) aufgerufen",e)},n.workflow.triggerPrevious=function(e){tt(e)?Jt.switchToPrevious():Dn.warning("triggerPrevious wurde von einem nicht-aktiven WorkflowStep (commId %o) aufgerufen",e)},n.workflow.triggerClose=function(e){tt(e)?Jt.closeWorkflowDialog():Dn.warning("triggerClose wurde von einem nicht-aktiven WorkflowStep (commId %o) aufgerufen",e)},n.workflow.setNext=function(e,t){nt(e)&&(it(t),ft(t,o.SHORT_PRELOAD_DELAY))},n.workflow.setPreviousButtonLabel=function(e,t,n){nt(e)&&(un=t,dn=n,Nt())},n.workflow.setNextButtonLabel=function(e,t,n){nt(e)&&(hn=t,mn=n,Nt())},n.workflow.setPrevious=function(e,t){nt(e)&&(it(t),gt(t,o.SHORT_PRELOAD_DELAY))},n.workflow.setCheckInputOnUserPrevious=function(e,t){nt(e)&&(cn=t)},n.workflow.showCurrentStep=Jt.showCurrentStep,n.workflow.setLocked=function(e,t,n){nt(e)&&J(t?n||{}:null)},n.workflow.isLocked=function(){return Boolean(en)},n.workflow.getSecurityDialog=function(){return i.deepCopy(en)},n.workflow.cancelExit=function(e){nt(e)&&Dt(!1)},n.workflow.runNextStep=function(e,t,n,i){var o=n;if(nt(e)){if(it(i),void 0===o||null===o)o=!1;else if("boolean"!=typeof o)throw new r("isPrevious ist kein Boolean",{isPrevious:o});It(i,f.copy(t),o)}},n.workflow.runNextInDialog=function(e,t,n,i){var o,s=i;if(nt(e)){if("string"!=typeof n)throw new r("runNextInDialog() kann nur mit einem expliziten exit aufgerufen werden",{exit:n});if(s=s||{},"object"!=typeof s)throw new r("Ungültige Optionen für runNextInDialog()",{options:s});if(o=u.currentStep(),o.getState()!==v.RUNNING)throw new r("runNextInDialog() kann nur aufgerufen werden, wenn der WorkflowStep aktiv ist und nicht gerade verlassen wird",{workflowStepState:o,exit:n});kt(n,f.copy(t),s)}},n.workflow.confirmSuspend=function(e){var t;if(nt(e)){if(t=u.currentStep(),t.getState()!==v.RUNNING||!vn)throw new r("confirmSuspend() kann nur aufgerufen werden, wenn der WorkflowStep aktiv ist und gerade in den Hintergrund gelegt werden soll",{suspending:Boolean(vn),workflowStepState:t});vn()}},n.workflow.confirmAbort=function(e){var t;if(nt(e)){if(t=u.currentStep(),t.getState()!==v.RUNNING||!bn)throw new r("confirmAbort() kann nur aufgerufen werden, wenn der WorkflowStep aktiv ist und gerade abgebrochen werden soll",{suspending:Boolean(bn),workflowStepState:t});bn()}},n.workflow.isCompositeWorkflow=function(e){return nt(e)&&In.current instanceof d},n.workflow.isInDialog=function(e){return nt(e)&&x.getDepth(!0)>0},n.workflow.getDialogDepth=function(e,t){return nt(e)?x.getDepth(t):0},n.workflow.isDialogMaximized=function(e){return nt(e)&&x.isCurrentDialogMaximized()},n.workflow.setDialogMaximized=function(e,t){nt(e)&&x.setCurrentDialogMaximized(t)},n.workflow.isShowingDialogs=function(e){return nt(e)&&E.isShowingDialogs()},n.workflow.dispatchToBacklink=function(e,t,n){return nt(e)&&c.dispatchBack({map:t},n)},n.workflow.isBacklinkAvailable=function(e){return nt(e)&&l.hasBacklink()},n.workflow.isAutoBacklink=function(e){return nt(e)&&l.isBacklinkAutoMode()},n.workflow.onVorgangFinished=function(e){var t;nt(e)&&Cn&&(t=Cn,Cn=null,t())},n.workflow.startNew=function(e,n,i,o){if(nt(e)){if("string"!=typeof n)throw new r("workflowID ist kein String",{workflowID:n});if(n!==t.WORKFLOW_DASHBOARD&&"string"!=typeof i)throw new r("entry ist kein String",{entry:i});f.copy(o),j.onNewWorkflow(n),Et(n,i,o,!1,null,null,null,!0,!1)}},n.workflow.startWorkflowDialog=function(e,n,i,o,s,a){if("string"!=typeof e)throw new r("workflowID ist kein String",{workflowID:e});if(e===t.WORKFLOW_DASHBOARD)throw new r("Das Dashboard kann nicht in einem Dialog geöffnet werden");if("string"!=typeof n)throw new r("entry ist kein String",{entry:n});f.copy(i),Jt.startDialog(e,n,i,{maximizeHeight:Boolean(s),maximizeWidth:Boolean(a)},null,o)},n.workflow.startWorkflowOverlay=function(e,n,i,o){if("string"!=typeof e)throw new r("workflowID ist kein String",{workflowID:e});if(e===t.WORKFLOW_DASHBOARD)throw new r("Das Dashboard kann nicht als Overlay geöffnet werden");if("string"!=typeof n)throw new r("entry ist kein String",{entry:n});f.copy(i),Jt.startDialog(e,n,i,{inContentArea:!0},null,o)},n.workflow.fetchNext=_.fetchNextWorkflow,n.workflow.getAvailableExits=function(e){return nt(e)?In.getCurrentExits():[]},n.workflow.switchToVP=function(e,t,n,i){if(nt(e)){if(x.getDepth(!0)>0)throw new r("Aufruf aus einem Workflow-Dialog nicht erlaubt");if(N.switchToVP(g.getFrame(u.currentStep().getFrameId()),t),t){if("function"!=typeof n)throw new r("Fehlende Callback-Funktion");W.begin(n,i)}else W.end();Pt(),g.switchToVP(t)}},n.workflow.callMapiWorkflow=function(e,t,n){nt(e)&&document.OSPMEnvironment.callMapiWorkflow(t,n)},n.workflow.abortMapiWorkflow=function(e,t){nt(e)&&document.OSPMEnvironment.abortMapiWorkflow(e,t)},n.workflow.isMapiWorkflowActive=function(e){return document.OSPMEnvironment.isMapiWorkflowActive(e)},n.workflow.changeTopWorkflowContext=function(e,t,n){if(nt(e)){if(!i.isStringProvided(t))throw new r("workflowID ist kein gültiger String",{workflowID:t});if(!i.isStringProvided(n))throw new r("entry ist kein gültiger String",{entry:n});D.reportTopWorkflowStart(t,n,!1)}},e()},updateStepButtonLabels:Mt,saveWorkflowEngineData:function(){return[tn,nn,on,rn,sn,an,ln,cn,un,dn,hn,mn]},restoreWorkflowEngineData:function(e){tn=e[0],nn=e[1],on=e[2],rn=e[3],sn=e[4],an=e[5],ln=e[6],cn=e[7],un=e[8],dn=e[9],hn=e[10],mn=e[11]},getClassName:function(){return"WorkflowEngine"}}),Jt=new Zt,document.OSPMEnvironment&&(document.OSPMEnvironment.WorkflowEngine=Jt),E.setShowListener(function(e){Jt.showCurrentStep(e.commId)}),Jt}),define("tao/ospm/main/IFrameCommunication",["tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/common/MessageScope","tao/ospm/common/OSPMError","tao/ospm/main/CommIdVerification","tao/ospm/main/CallerStack","tao/ospm/core/OSPMEnvironment","tao/ospm/core/UIToolkit","tao/ospm/common/Feedback"],function(e,t,n,i,o,r,s,a,l){function c(e){return t.isObject(e)?e:{}}return{createAPI:function(u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I,k,x,A,O,N,M,P,R,F,B,z,V,H,U,W,j,G,q,Y,K){return{config:e,user:{getUserData:function(){return t.deepCopy(s.context.user)},getInstitutData:function(){return t.deepCopy(s.context.institut)}},system:{PackageManager:b},dashboard:{setFavoriten:function(e,t){d.setDashboardFavoriten(e,t)}},help:{setAdminMode:function(e){S.setAdminMode(e)},isAdminMode:function(){return S.isAdminMode()}},ui:{setLayout:function(e,t,n){C.setStepLayout(e,n),u.setLayout(t,n),d.updatePageHeaderPosition()},showStartbar:function(e,t,n){o.checkForCurrentStep("ui.showStartbar",e),d.setStartbarVisibility(t,n)},setStepTitle:function(e,t){C.setStepTitle(e,t)},getStepTitle:function(e){return C.getStepTitle(e)},setGpsAktivitaetNameInTitle:function(e,t){o.checkForCurrentStep("ui.setGpsAktivitaetNameInTitle",e,"gps"),d.setGpsAktivitaetNameInTitle(t)},setLoginInTitle:function(e,t){o.checkForCurrentStep("ui.setLoginInTitle",e),d.setLoginInTitle(t)},checkInput:function(e,t,n){return o.checkForCurrentStep("ui.checkInput",e),T.checkInput(t,n)},openWindow:function(e,t,n,i){return o.checkForCurrentStep("ui.openWindow",e),x.openWindow(t,n,i)},print:function(e){if(o.checkForCurrentStep("ui.print",e),!C.getStepState(e).visible)throw new i("Nur sichtbare WorkflowSteps können gedruckt werden");window.print()},scrollTo:function(e,t,n){var i=o.checkForCurrentStep("ui.scrollTo",e);P.scrollTo(i,t,n)},showVoiceRecordButton:function(e){o.checkForCurrentStep("ui.showVoiceRecordButton",e),d.showVoiceRecordButton()},hideVoiceRecordButton:function(e){o.checkForCurrentStep("ui.hideVoiceRecordButton",e),d.hideVoiceRecordButton()},showHelpButton:function(e){o.checkForCurrentStep("ui.showHelpButton",e),d.showHelpButton()},hideHelpButton:function(e){o.checkForCurrentStep("ui.hideHelpButton",e),d.hideHelpButton()},sidebar:{show:function(e,t,n){o.checkForCurrentStep("ui.sidebar.show",e),d.setSidebarVisibility(t,n)},reset:function(e){o.checkForCurrentStep("ui.sidebar.reset",e),d.resetSidebar()},addCustomButton:function(e,t,n,i,r){o.checkForCurrentStep("ui.sidebar.addCustomButton",e),d.addCustomButton(t,n,i,r)},setCustomButtonEnabled:function(e,t,n){o.checkForCurrentStep("ui.sidebar.setCustomButtonEnabled",e),d.setCustomButtonEnabled(t,n)},removeCustomButton:function(e,t){o.checkForCurrentStep("ui.sidebar.removeCustomButton",e),d.removeCustomButton(t)},removeAllCustomButtons:function(e){o.checkForCurrentStep("ui.sidebar.removeAllCustomButtons",e),d.removeAllCustomButtons()}}},dialogs:{createDialog:function(e,t){return o.checkForCurrentStep("dialogs.createDialog",e),h.createDialog(c(t),e)},createTextDialog:function(e,t){return o.checkForCurrentStep("dialogs.createTextDialog",e),h.createTextDialog(c(t),e)},createInputDialog:function(e,t){return o.checkForCurrentStep("dialogs.createInputDialog",e),new M(c(t),e)},showTextDialog:function(e,t){o.checkForCurrentStep("dialogs.showTextDialog",e),h.createTextDialog(c(t),e,!0).show()},showSecurityDialog:function(e,t,n,i){o.checkForCurrentStep("dialogs.showSecurityDialog",e),N.showSecurityDialog(c(t),n,i,e)},showErrorDialog:function(e,t){o.checkForCurrentStep("dialogs.showErrorDialog",e),R.showErrorDialog(c(t),e)}},progress:{start:function(e,t){return o.checkForCurrentStep("progress.start",e),y.startBusyView("WorkflowStep "+C.getStepState(e).workflowStep,c(t),e)},stop:function(e,t){return o.checkForCurrentStep("progress.stop",e),y.stopBusyView(t)},update:function(e,t,n){return o.checkForCurrentStep("progress.update",e),y.update(c(t),n)},stopAll:function(e){return o.checkForCurrentStep("progress.stopAll",e),y.clearBusyView()},getStatus:function(e){return o.checkForCurrentStep("progress.getStatus",e),y.getBusyViewCount()},disableImageShow:function(e){o.checkForCurrentStep("progress.disableImageShow",e),y.disableImageShow()},enableImageShow:function(e){o.checkForCurrentStep("progress.enableImageShow",e),y.enableImageShow()},isImageShowEnabled:function(){return y.isImageShowEnabled()},setImagePresentation:function(e,t,n){o.checkForCurrentStep("progress.setImagePresentation",e),q.modifyBusyViewImageSettings(t,n)}},menus:{createContextMenu:function(e,t){return o.checkForCurrentStep("menus.createContextMenu",e),m.createMenu(c(t),e)}},popup:{enterOnScreenKeyboardSBT:function(){a.isSBContext()&&document.body.classList.add("onscreen_keyboard")},closeOnScreenKeyboardSBT:function(){a.isSBContext()&&document.body.classList.remove("onscreen_keyboard")},show:function(e,t,n){return o.checkForCurrentStep("popup.show",e),D.show(t,n)},hide:function(e,t){return o.checkForCurrentStep("popup.hide",e),D.hide(t)},isShowing:function(e,t){return o.checkForCurrentStep("popup.isShowing",e),D.isShowing(t)},get:function(e,t){return o.checkForCurrentStep("popup.get",e),D.get(t)}},workflow:{},vorgang:{startNewVorgang:function(e,t,n,i){o.checkForCurrentStep("vorgang.startNewVorgang",e).communication.onExit(),r.startNewVorgang(t,n,i)},continueVorgang:function(e,t,n,i){o.checkForCurrentStep("vorgang.continueVorgang",e).communication.onExit(),r.continueVorgang(t,n,i)},isCalledByVorgang:function(e,t){return o.checkForCurrentStep("vorgang.isCalledByVorgang",e),r.isCalledByVorgang(t)},isCalledByWorkflow:function(e,t){return o.checkForCurrentStep("vorgang.isCalledByWorkflow",e),r.isCalledByWorkflow(t)},startNewWorkflow:function(e,t,n,i,s,a){return o.checkForCurrentStep("vorgang.isCalledByWorkflow",e),r.startNewWorkflow(t,n,i,s,a)},getCallerDescription:function(e){return o.checkForCurrentStep("vorgang.getCallerDescription",e),r.getCallerDescription()},returnToCaller:function(e){o.checkForCurrentStep("vorgang.returnToCaller",e).communication.onExit(),r.returnToCaller()},clearCallerStack:function(e){o.checkForCurrentStep("vorgang.clearCallerStack",e),r.clearCallerStack()},copyStackForServer:function(e){return o.checkForCurrentStep("vorgang.copyStackForServer",e),r.copyStackForServer()},setStack:function(e,t){o.checkForCurrentStep("vorgang.setStack",e),r.setStack(t)},isNotEmpty:function(e){return o.checkForCurrentStep("vorgang.isNotEmpty",e),r.isNotEmpty()}},server:{isIdle:function(e){return o.checkForServerCommunication("server.isIdle",e),v.isIdle()},accessApplication:function(e,t,n){o.checkForServerCommunication("server.accessApplication",e),v.accessApplication(t,n)},releaseApplication:function(e,t){o.checkForServerCommunication("server.releaseApplication",e),v.releaseApplication(t)},executeRequest:function(e,t,n,i,r,s,a){o.checkForServerCommunication("server.executeRequest",e),v.executeRequest(t,n,i,r,!1,s,a)},executeBackgroundRequest:function(e,t,n,i,r){o.checkForServerCommunication("server.executeBackgroundRequest",e),v.executeRequest(t,n,i,r,!0)},beginAsyncRequest:function(e,t,n,i,r){return o.checkForServerCommunication("server.beginAsyncRequest",e),v.beginAsyncRequest(t,n,i,r)},finishAsyncRequest:function(e,t,n,i,r,s,a){o.checkForServerCommunication("server.finishAsyncRequest",e),v.finishAsyncRequest(t,n,i,r,s,a)},checkAsyncRequest:function(e,t,n,i,r,s,a){o.checkForServerCommunication("server.checkAsyncRequest",e),v.checkAsyncRequest(t,n,i,r,s,a)},isPmsTraceEnabled:function(){return E.isPmsTraceEnabled()},downloadPmsTrace:function(e,t,n,i){o.checkForServerCommunication("server.downloadPmsTrace",e),v.downloadPmsTrace(t,n,i)},downloadFile:function(e,n,i){o.checkForServerCommunication("server.downloadFile",e),t.saveUrlToFile(v.getDownloadUrl(n,i),i)},openFile:function(e,t,n,i){return o.checkForServerCommunication("server.openFile",e),x.openWindow(v.getDownloadUrl(t),n,i)},getDownloadUrl:function(e,t,n){return o.checkForServerCommunication("server.getDownloadUrl",e),v.getDownloadUrl(t,n)},getApplications:function(e){return o.checkForServerCommunication("server.getApplications",e),s.getServerURLs()},getSVZData:function(e,t,n,i){O.getContent(t,n,i)}},session:{messages:{SCOPES:n,add:function(e,n,i,r,s,a,l,c){return o.checkForCurrentStep("session.messages.add",e),t.deepCopy(g.add(n,i,r,s,a,l,c))},remove:function(e,t){return o.checkForCurrentStep("session.messages.remove",e),g.remove(t)},get:function(e,n){return o.checkForCurrentStep("session.messages.get",e),t.deepCopy(g.get(n))},all:function(e){return o.checkForCurrentStep("session.messages.all",e),t.deepCopy(g.all())},clear:function(e,t){o.checkForCurrentStep("session.messages.clear",e),g.clear(t)}},context:{setNeoPerson:function(e,t){o.checkForCurrentStep("session.context.setNeoPerson",e),L.setPerson(t)},setNeoVertrag:function(e,t,n){o.checkForCurrentStep("session.context.setNeoVertrag",e),L.setVertrag(t,n)},getNeoPerson:function(e){return o.checkForCurrentStep("session.context.getNeoPerson",e),L.getPersonData()},getNeoVertrag:function(e){return o.checkForCurrentStep("session.context.getNeoVertrag",e),L.getVertragData()},getInitialNeoPerson:function(e){return o.checkForCurrentStep("session.context.getInitialNeoPerson",e),L.getInitialPersonData()},getInitialPersNr:function(e){return o.checkForCurrentStep("session.context.getInitialPersNr",e),L.getInitialPersNr()},setDeleteListener:function(e,t){o.checkForCurrentStep("session.context.setDeleteListener",e),L.setDeleteListener(t)}},info:{setVorgangIcon:function(e,t){o.checkForCurrentStep("session.info.setVorgangIcon",e),p.setVorgangIcon(t)},setTitle:function(e,t,n){o.checkForCurrentStep("session.info.setTitle",e),p.setTitle(t,n)},clearOptionalePfade:function(e,t){o.checkForCurrentStep("session.info.clearOptionalePfade",e),p.clearOptionalePfade(t)},setOptionalenPfad:function(e,t,n,i,r){o.checkForCurrentStep("session.info.setOptionalenPfad",e),p.setOptionalenPfad(t,n,i,r)},setInformation:function(e,t,n,i,r,s,a){o.checkForCurrentStep("session.info.setInformation",e),p.setInformation(t,n,i,r,s,a)},clearInformation:function(e,t){o.checkForCurrentStep("session.info.clearInformation",e),p.clearInformation(t)},clearGroup:function(e,t){o.checkForCurrentStep("session.info.clearGroup",e),p.clearGroup(t)},setGroupElement:function(e,t){o.checkForCurrentStep("session.info.setGroupElement",e),p.setGroupElement(t)},setGroupService:function(e,t,n){o.checkForCurrentStep("session.info.setGroupElement",e),p.setGroupService(t,n)},clearAll:function(e){o.checkForCurrentStep("session.info.clearAll",e),p.clearAll()},startWorkflow:function(e,t){o.checkForCurrentStep("session.info.startWorkflow",e),p.startWorkflow(t)},startDashboard:function(e,t){o.checkForCurrentStep("session.info.startDashboard",e),p.startDashboard(t)},openURL:function(e,t){o.checkForCurrentStep("session.info.openURL",e),p.openURL(t)},showDialog:function(e,t){o.checkForCurrentStep("session.info.showDialog",e),p.showDialog(t)},setVorgangAblegen:function(e,t){o.checkForCurrentStep("session.info.vorgangAblegen",e),p.setVorgangAblegen(t)},setVorgangBeenden:function(e,t){o.checkForCurrentStep("session.info.vorgangBeenden",e),p.setVorgangBeenden(t)},setVorgangLoeschen:function(e,t){o.checkForCurrentStep("session.info.vorgangLoeschen",e),p.setVorgangLoeschen(t)},hasVorgangAblegen:function(e){return o.checkForCurrentStep("session.info.hasVorgangAblegen",e),p.hasVorgangAblegen()},hasVorgangBeenden:function(e){return o.checkForCurrentStep("session.info.hasVorgangBeenden",e),p.hasVorgangBeenden()},hasVorgangLoeschen:function(e){return o.checkForCurrentStep("session.info.hasVorgangLoeschen",e),p.hasVorgangLoeschen()},startVorgangAblegen:function(e){o.checkForCurrentStep("session.info.startVorgangAblegen",e),p.startVorgangAblegen()},startVorgangBeenden:function(e){o.checkForCurrentStep("session.info.startVorgangBeenden",e),p.startVorgangBeenden()},startVorgangLoeschen:function(e){o.checkForCurrentStep("session.info.startVorgangLoeschen",e),p.startVorgangLoeschen()},startWorkflowDialog:function(e,t,n,i){U.startDialog(e,t,n,null,null,i)},callGpsFunction:function(e){p.callGpsFunction(e)},setStartBarButtonListener:function(e){Y.setStartBarButtonListener(e)}},process:{setProgressInformation:function(e,t){return o.checkForCurrentStep("session.process.setProgressInformation",e),L.setProgressInformation(t)},getProgressInformation:function(e){return o.checkForCurrentStep("session.process.getProgressInformation",e),L.getProgressInformation()},setCurrentStep:function(e,t){return o.checkForCurrentStep("session.process.setCurrentStep",e),L.setCurrentStep(t)},getCurrentStep:function(e){return o.checkForCurrentStep("session.process.getCurrentStep",e),L.getCurrentStep()},setGpsHelpId:function(e,t){o.checkForCurrentStep("session.process.setGpsHelpId",e),S.setGpsHelpId(t)},getGpsHelpId:function(e){return o.checkForCurrentStep("session.process.getGpsHelpId",e),S.getGpsHelpId()}}},storage:{server:{get:function(e,t,n){var i=o.retrieveApplicationName("server.get",e);
return F.get(i,t,n)},getAll:function(e,t,n){var i=o.retrieveApplicationName("server.getAll",e);return F.getAll(i,t,n)},getCount:function(e,t,n){var i=o.retrieveApplicationName("server.getCount",e);return F.getCount(i,t,n)},put:function(e,t,n){var i=o.retrieveApplicationName("server.put",e);return F.put(i,t,n)},remove:function(e,t,n){var i=o.retrieveApplicationName("server.remove",e);return F.remove(i,t,n)},removeAll:function(e,t,n){var i=o.retrieveApplicationName("server.removeAll",e);return F.removeAll(i,t,n)},trim:function(e,t,n){var i=o.retrieveApplicationName("server.trim",e);return F.trim(i,t,n)}},getData:function(e,t,n){var i=o.retrieveApplicationName("storage.getData",e);return _.getData(i,t,n)},putData:function(e,t,n,i){var r=o.retrieveApplicationName("storage.putData",e);return _.putData(r,t,n,i)},getKeys:function(e,t){var n=o.retrieveApplicationName("storage.getKeys",e);return _.getKeys(n,t)},clearData:function(e,t){var n=o.retrieveApplicationName("storage.clearData",e);return _.clearData(n,t)}},businessComponents:{createAPI:function(e,t){return new V(e,t)}},reporting:{createClientReport:function(e,t){o.checkForServerCommunication("reporting.createClientReport",e),I.downloadReport(t)}},environment:{isInternetFiliale:function(){return e.IF},callInternetFilialeWorkflow:function(e,t,n){return o.checkForServerCommunication("environment.callInternetFilialeWorkflow",e),k.callInternetFilialeWorkflow(t,n)},prozessEndeBehandlung:function(e,t,n){var r,s="IF_ERGEBNIS",a="W_OPA_FDBK_MEDIAL_FRAGEBOGEN_ANZ",c="I_OPA_FDBK_MEDIAL_BEWERTUNG",u=t.overruleChanelToBeSApp||!1;if(o.checkForServerCommunication("environment.prozessEndeBehandlung",e),this.isSApp()||this.isFKPContext()||u)r=function(){var e=k.callInternetFilialeWorkflow(s,n);return!e},l.initialisiereFeedbackBewertung(t.vorgangsid,t.vorgangsunterart,t.gpsexitnummer,function(t){t?U.startNew(a,c,{BEWERTUNG_ID:t},!1,null,r):this.callInternetFilialeWorkflow(e,s,n)}.bind(this));else{if(this.isSBContext())throw new i('Die Funktion "prozessEndeBehandlung()" ist für SB-Terminals nicht implementiert!');if(!this.isInternetFiliale())throw new i('Die Funktion "prozessEndeBehandlung()" ist für die Nutzung im stationären Vertrieb nicht implementiert!');this.callInternetFilialeWorkflow(e,s,n)}},isSApp:function(){return e.IF&&a.isIFWebView()},isSBContext:function(){return a.isSBContext()},isIPadApp:function(){return window.isCordova},isFKPContext:function(){return e.IF&&window.location.pathname.startsWith("/fi/")}},persistence:{lesePerson:function(e,t,n,i){return o.checkForCurrentStep("persistence.lesePerson",e),A.lesePerson(t,n,i)},personAdd:function(e,t,n,i,r){return o.checkForCurrentStep("persistence.personAdd",e),A.personAdd(t,n,i,r)},personGetAll:function(e,t){return o.checkForCurrentStep("persistence.personGetAll",e),A.personGetAll(t)},personRemove:function(e,t,n,i){return o.checkForCurrentStep("persistence.personRemove",e),A.personRemove(t,n,i)},personRemoveAll:function(e,t,n){return o.checkForCurrentStep("persistence.personRemoveAll",e),A.personRemoveAll(t,n)},vorgangAdd:function(e,t,n,i,r,s){return o.checkForCurrentStep("persistence.vorgangAdd",e),A.vorgangAdd(t,n,i,r,s)},vorgangGetAll:function(e,t){return o.checkForCurrentStep("persistence.vorgangGetAll",e),A.vorgangGetAll(t)},vorgangRemove:function(e,t,n,i){return o.checkForCurrentStep("persistence.vorgangRemove",e),A.vorgangRemove(t,n,i)},vorgangRemoveAll:function(e,t,n){return o.checkForCurrentStep("persistence.vorgangRemoveAll",e),A.vorgangRemoveAll(t,n)}},bilderpool:{setAdminMode:function(e){H.setAdminMode(e)},isAdminMode:function(){return H.isAdminMode()},setTargetDate:function(e){H.setTargetDate(e)},getTargetDate:function(){return H.getTargetDate()}},plugins:{tan:{getTanMedium:function(e,t,n){o.checkForCurrentStep("plugins.tan.getTanMedium",e),a.isIFWebView()?window.SfTan.getTanMedium(function(e){t(e.medium)},function(e){n(e.message)}):t(null)},getPushTan:function(e,t,n,r){if(o.checkForCurrentStep("plugins.tan.getPushTan",e),!a.isIFWebView())throw new i("getPushTan: Aufruf ausserhalb der S-App");window.SfTan.getPushTan(t,function(e){n(e.tan)},function(e){r(e.message)})}},storeGiroExpressData:function(e,t,n,r){if(o.checkForCurrentStep("plugins.storeGiroExpressData",e),!a.isIFWebView())throw new i("storeGiroExpressData: Aufruf ausserhalb der S-App");window.SFGiroExpress.sendGiroExpressData(t,n,r)},storeRegistrationName:function(e,t,n,r){if(o.checkForCurrentStep("plugins.storeRegistrationName",e),!a.isIFWebView())throw new i("storeRegistrationName: Aufruf ausserhalb der S-App");window.SFGiroExpress.sendRegistrationName(t,n,r)},storeAccountInfo:function(e,t,n,r){if(o.checkForCurrentStep("plugins.storeAccountInfo",e),!a.isIFWebView())throw new i("storeAccountInfo: Aufruf ausserhalb der S-App");window.SFGiroExpress.sendAccountInfo(t,n,r)},storeProcessInfo:function(e,t,n,r){if(o.checkForCurrentStep("plugins.storeProcessInfo",e),!a.isIFWebView())throw new i("storeProcessInfo: Aufruf ausserhalb der S-App");window.SFGiroExpress.sendProcessInfo(t,n,r)},createDocumentViewer:function(e,t){return o.checkForCurrentStep("plugins.createDocumentViewer",e),new W(t)},createSignatureDialog:function(e,t){return o.checkForCurrentStep("plugins.createSignatureDialog",e),j.createSignatureDialog(t)},openPdfViewer:function(e,t,n,i){return o.checkForCurrentStep("plugins.openPdfViewer",e),K.displayPDF(t,n,i)},druckerAuswahl:function(e,t){return o.checkForCurrentStep("plugins.druckerAuswahl",e,"zdb"),G.auswahl(t)},druckAuftrag:function(e,t,n,i){return o.checkForCurrentStep("plugins.druckAuftrag",e,"zdb"),G.auftrag(t,n,i)},addDruckerToLayout:function(e,t,n){return o.checkForCurrentStep("plugins.addDruckerToLayout",e,"adm"),G.addDruckerToLayout(t,n)},getStandardDrucker:function(e,t){return o.checkForCurrentStep("plugins.getStandardDrucker",e,"zdb"),G.getStandardDrucker(t)}},stylesheets:{addStylesheetURL:function(e,n,o,r){var s,a,l,c;if(!t.isSet(e))throw new i("Fehler beim einfügen einer Stylesheet-Datei",{details:"Document des WorkflowSteps wurde nicht angegeben"});if(!t.isSet(n))throw new i("Fehler beim einfügen einer Stylesheetdatei",{details:"URL der Stylesheetdatei wurde nicht angegeben"});if(!t.isString(n))throw new i("Fehler beim einfügen einer Stylesheetdatei",{details:"Die angegebene URL der Stylesheetdatei ist kein String"});if(t.isSet(o)&&!t.isString(o))throw new i("Fehler beim einfügen einer Stylesheetdatei",{details:"Der MIME-Type der Stylesheetdatei ist kein String"});if(t.isSet(r)&&!t.isString(r))throw new i("Fehler beim einfügen einer Stylesheetdatei",{details:"Die angegebene CSS-Mediaquery für den Anwendungsscope der Stylesheetdatei ist kein String"});return l=o||"text/css",c=r||"all",a=t.randomUUID(),s=e.createElement("link"),s.setAttribute("href",n),s.setAttribute("type",l),"all"!==c&&s.setAttribute("media",c),s.setAttribute("rel","stylesheet"),s.setAttribute("id",a),e.head.appendChild(s),a},addStylesheetInline:function(e,n,o,r){var s,a,l,c;if(!t.isSet(e))throw new i("Fehler beim einfügen eines Inline-Stylesheets",{details:"Document des WorkflowSteps wurde nicht angegeben"});if(!t.isSet(n))throw new i("Fehler beim einfügen eines Inline-Stylesheets",{details:"Das Inline-Stylesheets wurde nicht angegeben"});if(!t.isString(n))throw new i("Fehler beim einfügen eines Inline-Stylesheets",{details:"Das angegebene Inline-Stylesheets ist kein String"});if(t.isSet(o)&&!t.isString(o))throw new i("Fehler beim einfügen eines Inline-Stylesheets",{details:"Der MIME-Type des Inline-Stylesheets ist kein String"});if(t.isSet(r)&&!t.isString(r))throw new i("Fehler beim einfügen eines Inline-Stylesheets",{details:"Die angegebene CSS-Mediaquery für den Anwendungsscope des Inline-Stylesheets ist kein String"});return l=o||"text/css",c=r||"all",a=t.randomUUID(),s=e.createElement("style"),s.setAttribute("type",l),"all"!==c&&s.setAttribute("media",c),s.setAttribute("id",a),s.textContent=n,e.head.appendChild(s),a}},fileUpload:function(e,t,n,i,r){var s=o.checkForCurrentStep("fileUpload.uploadFile",e);return B.uploadFile(s.workflowStep,t,n,i,r)},undUpload:function(e,t,n){z.undUpload(e,t,n)},filePicker:function(e,t,n,i){z.filePicker(e,t,n,i)},createUIFunctions:function(e,t,n){u.createUIFunctions(e,t,n)}}}}}),define("tao/ospm/ui/layouts/TwoColumnLayout",["tao/ospm/ui/layouts/Layout","tao/ospm/ui/widgets/LayoutColumn","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/core/OSPMPage","tao/ospm/core/OSPMEnvironment","tao/ospm/common/Config","tao/lib/iscroll-probe"],function(e,t,n,i,o,r,s,a,l,c){function u(e){var t=r.createContainer("ospm_layout ospm_two_column_layout");return e.columnsContainer=r.createContainer("ospm_columns_container"),e.columnsAligner=r.createContainer("ospm_columns_aligner"),e.columnsContainer.appendChild(e.columnsAligner),t.appendChild(e.columnsContainer),t}function d(e){e.supportsStickyElements()?(e.scrollableColumns=!0,h(e)):e.scrollableColumns=!1}function h(t){b(t),f(t),e.onHeightChange(t),t.scrollToLayoutTop()}function m(){return l.IF&&null!==navigator.userAgent.match(/iPad/i)&&!o.isMobile()&&document.OSPMEnvironment.isTouchDevice()}function p(e){return l.IF?window:e.dom}function f(e){l.USE_ISCROLL?e.scroller||(e.scroller=new c(e.dom,{probeType:3,bindToWrapper:!0,scrollbars:!0,fadeScrollbars:!0,preventDefault:!1,bounce:!1}),e.scroller.on("scroll",function(){e.onScroll(Math.abs(this.y))})):e.scrollEvent||(e.scrollEvent=function(t){e.onScroll(t.target.scrollTop||window.pageYOffset)},p(e).addEventListener("scroll",e.scrollEvent))}function g(e){e.scroller&&(e.scroller.destroy(),e.scroller=null),e.scrollEvent&&(p(e).removeEventListener("scroll",e.scrollEvent),e.scrollEvent=null)}function _(e,t){l.IF&&document.body.querySelector(".ospm_window_fullscreen_wrapper3")||(m()||window.isCordova?(e.dom.style.marginTop="",e.dom.style.transform="translateY("+t+"px) translateZ(0px)",e.dom.style.webkitTransform="translateY("+t+"px) translateZ(0px)"):(e.dom.style.transform="",e.dom.style.webkitTransform="",e.dom.style.marginTop=0===t?"":t+"px"),e.currentOffsetTop=t)}function v(e){_(e,0),e.syncStickyDisplay()}function b(e){e.getLayoutColumns().forEach(v)}function y(t){return!s.isWideDisplay()||l.IF||e.isTabDeckChild(t)?0:w}var C,w=112;return C=e.subclass({scrollableColumns:!1,leftLayoutColumn:null,rightLayoutColumn:null,scrollTop:0,scrollEvent:null,constructor:function(e,i,o){var r,s;if(this.dom=u(this),e===C.COLUMN_RATIO.ONE_ONE)r="ospm_two_column_layout_11_left",s="ospm_two_column_layout_11_right";else if(e===C.COLUMN_RATIO.ONE_TWO)r="ospm_two_column_layout_12_left",s="ospm_two_column_layout_12_right";else{if(e!==C.COLUMN_RATIO.TWO_ONE)throw new n("Falsches Spaltenverhältnis für Layout");r="ospm_two_column_layout_21_left",s="ospm_two_column_layout_21_right"}this.leftLayoutColumn=new t(this,r),this.rightLayoutColumn=new t(this,s),this.setLastLeftElementSticky(i),this.setLastRightElementSticky(o),this.columnsAligner.appendChild(this.leftLayoutColumn.dom),this.columnsAligner.appendChild(this.rightLayoutColumn.dom),l.USE_ISCROLL&&(this.dom.style.overflowY="hidden"),this.initializeFields({})},initializeFields:function(e){C.parent.initializeFields.call(this,e),d(this)},getLayoutColumns:function(){return[this.leftLayoutColumn,this.rightLayoutColumn]},getScrollTop:function(){return l.IF?window.pageYOffset:this.scroller?Math.abs(this.scroller.y):this.dom.scrollTop},onScroll:function(t){this.dom.classList.contains("ospm_invisible")||(t>this.scrollTop?this.onScrollDown(t):t<this.scrollTop?this.onScrollUp(t):this.onScrollDown(t),this.scrollTop!==t&&(this.scrollTop=t,e.updatePageHeaderPosition()))},onScrollDown:function(t){var n,i,o,r,s,a,c,u,d,h=[];if(this.supportsStickyElements()){for(d=this.getLayoutColumns(),n=l.IF?window.innerHeight:this.dom.offsetHeight,o=e.getHeaderHeight(this),s=0,a=d.length;a>s;s++)if(u=0,c=d[s],i=t+n,r=c.dom.offsetHeight,!(r+c.currentOffsetTop>=this.columnsContainer.clientHeight)||c.isLastElementSticky()){if(r-y(this)>n||window.isCordova&&r>n)window.isCordova&&(c.dom.style.top="",c.dom.style.position="relative"),i>r+c.currentOffsetTop+e.getLayoutOffsetTop(this)&&(u=i-r-e.getLayoutOffsetTop(this),u>0?u+r<this.columnsContainer.clientHeight?_(c,u):(u=this.columnsContainer.clientHeight-r,_(c,u)):v(c));else{if(window.isCordova){-1===h.indexOf(s)&&(h.push(s),c.dom.style.top="0px",c.dom.style.position="-webkit-sticky");continue}u=t-o,u+r>=this.columnsContainer.clientHeight?(u=this.columnsContainer.clientHeight-r,_(c,u)):t>o?_(c,u):v(c)}c.isLastElementSticky()&&(window.isCordova?(c.stickyArea.style.transform="translateY("+(n-c.getHeight()+t-c.stickyArea.offsetHeight-c.currentOffsetTop)+"px) translateZ(0px)",c.stickyArea.style.webkitTransform="translateY("+(n-c.getHeight()+t-c.stickyArea.offsetHeight-c.currentOffsetTop)+"px) translateZ(0px)"):c.stickyArea.style.top=n+t-c.stickyArea.offsetHeight-c.currentOffsetTop+"px")}}else b(this)},onScrollUp:function(t){var n,i,o,r,s,a,c,u=0,d=0,h=[];if(this.supportsStickyElements()){for(a=this.getLayoutColumns(),c=e.getHeaderHeight(this),n=l.IF?window.innerHeight:this.dom.offsetHeight,o=0,r=a.length;r>o;o++)if(s=a[o],i=s.dom.offsetHeight,window.isCordova&&i-y(this)>n&&(s.dom.style.top="",s.dom.style.position="relative"),!(t-c>this.columnsContainer.clientHeight-i)||s.isLastElementSticky()){if(i-y(this)>n-c)s.currentOffsetTop>t-c&&(d++,c>=t&&(u=c-t),_(s,t-c+u));else{if(d++,window.isCordova){h.push(o);continue}t>c?_(s,t-c):v(s)}s.isLastElementSticky()&&(window.isCordova?(s.stickyArea.style.transform="translateY("+(n-s.getHeight()+t-s.stickyArea.offsetHeight-s.currentOffsetTop)+"px) translateZ(0px)",s.stickyArea.style.webkitTransform="translateY("+(n-s.getHeight()+t-s.stickyArea.offsetHeight-s.currentOffsetTop)+"px) translateZ(0px)"):s.stickyArea.style.top=n+t-s.stickyArea.offsetHeight-s.currentOffsetTop+"px")}if(window.isCordova&&d!==a.length)for(o=0;o<h.length;o++)s=a[h[o]],s.dom.style.top="0px",s.dom.style.position="-webkit-sticky",s.stickyArea.style.transform="",s.stickyArea.style.webkitTransform=""}else b(this)},setLastLeftElementSticky:function(e){this.leftLayoutColumn.setLastElementSticky(e)},isLastLeftElementSticky:function(){return this.leftLayoutColumn.isLastElementSticky()},setLastRightElementSticky:function(e){this.rightLayoutColumn.setLastElementSticky(e)},isLastRightElementSticky:function(){return this.rightLayoutColumn.isLastElementSticky()},supportsStickyElements:function(){return C.parent.supportsStickyElements.call(this)&&!o.isMobile()&&!this.isDialogChild()},onResize:function(){var t=this.supportsStickyElements();e.onHeightChange(this),!this.scrollableColumns&&t?d(this):this.scrollableColumns&&!t?(window.isCordova||this.columnsContainer.classList.contains("ospm_layout_has_sublayouts")||g(this),this.scrollToLayoutTop(),b(this)):this.scrollableColumns&&(b(this),this.setStickyColumnHeight(),this.onScrollDown(this.getScrollTop())),o.isIFWebView()&&!this.isDialogChild()&&this.scrollToLayoutTop(),this.scrollableColumns=t,this.syncStickyColumnElements()},setStickyColumnHeight:function(){this.getLayoutColumns().forEach(function(e){e.isLastElementSticky()&&i.isSet(e.stickyElement)&&(e.containerDom.style.paddingBottom="",e.containerDom.style.paddingBottom=e.stickyElement.dom.offsetHeight+t.STICKY_COLUMN_PADDING_TOP+"px")})},onColumnMutation:function(){b(this),e.onHeightChange(this),this.setStickyColumnHeight(),this.scrollableColumns&&(this.onScrollDown(0),this.onScrollDown(this.getScrollTop()))},setLeftColumnHidden:function(e){e===!0?(this.leftLayoutColumn.dom.classList.add("ospm_hidden"),this.rightLayoutColumn.dom.classList.add("ospm_column_layout_full_width")):(this.leftLayoutColumn.dom.classList.remove("ospm_hidden"),this.rightLayoutColumn.dom.classList.remove("ospm_column_layout_full_width")),this.onResize()},setRightColumnHidden:function(e){e===!0?(this.rightLayoutColumn.dom.classList.add("ospm_hidden"),this.leftLayoutColumn.dom.classList.add("ospm_column_layout_full_width")):(this.rightLayoutColumn.dom.classList.remove("ospm_hidden"),this.leftLayoutColumn.dom.classList.remove("ospm_column_layout_full_width")),this.onResize()},setLeftTopElement:function(e){this.leftLayoutColumn.setTopElement(e)},setRightTopElement:function(e){this.rightLayoutColumn.setTopElement(e)},addLeftElement:function(e,t){this.leftLayoutColumn.addElement(e,t)},addRightElement:function(e,t){this.rightLayoutColumn.addElement(e,t)},clearLeftElements:function(){this.leftLayoutColumn.clearElements()},clearRightElements:function(){this.rightLayoutColumn.clearElements()},clearElements:function(){this.clearLeftElements(),this.clearRightElements()},removeElement:function(e){return this.leftLayoutColumn.removeElement(e)||this.rightLayoutColumn.removeElement(e)},leftElements:function(){return this.leftLayoutColumn.getElements()},rightElements:function(){return this.rightLayoutColumn.getElements()},getElements:function(){return this.leftLayoutColumn.getElements().concat(this.rightLayoutColumn.getElements())},elementCount:function(){return this.leftElementCount()+this.rightElementCount()},leftElementCount:function(){return this.leftLayoutColumn.elementCount()},rightElementCount:function(){return this.rightLayoutColumn.elementCount()},getChildPosition:function(e){var t=this.leftLayoutColumn.getChildPosition(e);return"?"!==t?"left:"+t:(t=this.rightLayoutColumn.getChildPosition(e),"?"!==t?"right:"+t:"?")},setTopBorder:function(e){C.parent.setTopBorder.call(this,e)},setBottomBorder:function(e){C.parent.setBottomBorder.call(this,e)},getHeight:function(){var e,t;return e=this.leftLayoutColumn?this.leftLayoutColumn.getHeight():0,t=this.rightLayoutColumn?this.rightLayoutColumn.getHeight():0,e+t},scrollTo:function(e,t){this.scroller?this.scroller.scrollToElement(e.dom):C.parent.scrollTo.call(this,e,t)},getClassName:function(){return"TwoColumnLayout"}}),C.COLUMN_RATIO={ONE_ONE:"1-1",ONE_TWO:"1-2",TWO_ONE:"2-1"},C}),define("tao/ospm/ui/layouts/ThreeColumnLayout",["tao/ospm/ui/layouts/TwoColumnLayout","tao/ospm/ui/widgets/LayoutColumn","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/core/OSPMPage","tao/ospm/core/OSPMEnvironment","tao/ospm/common/Config","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s,a,l){function c(e){var t=o.createContainer("ospm_layout ospm_three_column_layout");return e.columnsContainer=o.createContainer("ospm_columns_container"),e.columnsAligner=o.createContainer("ospm_columns_aligner"),e.columnsContainer.appendChild(e.columnsAligner),t.appendChild(e.columnsContainer),t}function u(e){var t,n=[e.leftLayoutColumn,e.centerLayoutColumn,e.rightLayoutColumn];t=h(n),m(n),1===t&&d("ospm_column_layout_half_width",n),2===t&&d("ospm_column_layout_full_width",n),e.onResize()}function d(e,t){var n;for(n=0;n<t.length;n++)t[n].dom.classList.contains("ospm_hidden")||t[n].dom.classList.add(e)}function h(e){var t,n=0;for(t=0;t<e.length;t++)e[t].dom.classList.contains("ospm_hidden")&&n++;return n}function m(e){var t;for(t=0;t<e.length;t++)e[t].dom.classList.remove("ospm_column_layout_full_width"),e[t].dom.classList.remove("ospm_column_layout_half_width")}var p;return p=e.subclass({centerLayoutColumn:null,constructor:function(e,n,i){this.dom=c(this),this.leftLayoutColumn=new t(this,"ospm_three_column_layout_left"),this.centerLayoutColumn=new t(this,"ospm_three_column_layout_center"),this.rightLayoutColumn=new t(this,"ospm_three_column_layout_right"),this.setLastLeftElementSticky(e),this.setLastCenterElementSticky(n),this.setLastRightElementSticky(i),this.columnsAligner.appendChild(this.leftLayoutColumn.dom),this.columnsAligner.appendChild(this.centerLayoutColumn.dom),this.columnsAligner.appendChild(this.rightLayoutColumn.dom),a.USE_ISCROLL&&(this.dom.style.overflowY="hidden"),this.initializeFields({})},getLayoutColumns:function(){return[this.leftLayoutColumn,this.centerLayoutColumn,this.rightLayoutColumn]},setLastCenterElementSticky:function(e){this.centerLayoutColumn.setLastElementSticky(e)},isLastCenterElementSticky:function(){return this.centerLayoutColumn.isLastElementSticky()},supportsStickyElements:function(){return p.parent.supportsStickyElements.call(this)&&(l.isStatScreenSize()||a.USE_ISCROLL)},setLeftColumnHidden:function(e){l.toggleClassName(this.leftLayoutColumn.dom,"ospm_hidden",e===!0),u(this)},setCenterColumnHidden:function(e){l.toggleClassName(this.centerLayoutColumn.dom,"ospm_hidden",e===!0),u(this)},setRightColumnHidden:function(e){l.toggleClassName(this.rightLayoutColumn.dom,"ospm_hidden",e===!0),u(this)},addCenterElement:function(e,t){this.centerLayoutColumn.addElement(e,t)},clearCenterElements:function(){this.centerLayoutColumn.clearElements()},clearElements:function(){p.parent.clearElements.call(this),this.clearCenterElements()},removeElement:function(e){return p.parent.removeElement.call(this,e)||this.centerLayoutColumn.removeElement(e)},centerElements:function(){return this.centerLayoutColumn.getElements()},getElements:function(){return this.leftLayoutColumn.getElements().concat(this.centerLayoutColumn.getElements(),this.rightLayoutColumn.getElements())},elementCount:function(){return this.centerElementCount()+p.parent.elementCount.call(this)},centerElementCount:function(){return this.centerLayoutColumn.elementCount()},getChildPosition:function(e){var t=this.centerLayoutColumn.getChildPosition(e);return"?"!==t?"center:"+t:p.parent.getChildPosition.call(this,e)},setTopBorder:function(e){p.parent.setTopBorder.call(this,e)},setBottomBorder:function(e){p.parent.setBottomBorder.call(this,e)},getHeight:function(){var e=this.centerLayoutColumn?this.centerLayoutColumn.getHeight():0,t=p.parent.getHeight.call(this);return e+t},getClassName:function(){return"ThreeColumnLayout"}})}),define("tao/ospm/ui/layouts/FlowLayout",["tao/ospm/ui/layouts/Layout","tao/ospm/ui/widgets/LayoutColumn","tao/ospm/core/DomFactory","tao/ospm/common/OSPMError","tao/ospm/common/Config","tao/ospm/core/UIToolkit","tao/lib/iscroll-probe"],function(e,t,n,i,o,r,s){function a(e){var t=n.createContainer("ospm_layout ospm_flow_layout ospm_flow_layout_"+e.numberOfColumns.toString()+"_columns");return e.columnsContainer=n.createContainer("ospm_columns_container"),e.columnsAligner=n.createContainer("ospm_columns_aligner"),e.columnsContainer.appendChild(e.columnsAligner),t.appendChild(e.columnsContainer),t}function l(e){(r.isIOS()||r.isIE())&&r.fixElementWidth(e.layoutColumn.containerDom.children,!0)}function c(e){o.USE_ISCROLL&&(e.dom.style.overflowY="hidden",e.scroller||(e.scroller=new s(e.dom,{probeType:3,bindToWrapper:!0,scrollbars:!0,fadeScrollbars:!0,preventDefault:!1,bounce:!1,tap:!0}),e.scroller.on("scroll",function(){e.onScroll(Math.abs(this.y))}),e.dom.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation()})))}var u;return u=e.subclass({layoutColumn:null,numberOfColumns:2,constructor:function(){throw new i("FlowLayout ist eine abstrakte Klasse und wird nicht direkt verwendet")},afterRenderLayout:function(){u.parent.afterRenderLayout.call(this),l(this),e.onHeightChange(this),this.scrollEvent=function(e){this.onScroll(e.target.scrollTop)}.bind(this),this.dom.addEventListener("scroll",this.scrollEvent)},onResize:function(){l(this),this.onScroll(this.getScrollTop()),e.onHeightChange(this)},onColumnMutation:function(){this.onResize()},addElement:function(e,t){this.layoutColumn.addElement(e,t)},removeElement:function(e){return this.layoutColumn.removeElement(e)},clearElements:function(){this.layoutColumn.clearElements()},getElements:function(){return this.layoutColumn.getElements()},getLayoutColumns:function(){return[this.layoutColumn]},elementCount:function(){return this.layoutColumn.elementCount()},getHeight:function(){return this.layoutColumn?this.layoutColumn.getHeight():0},addSubLayout:function(){throw new i("Sub-Layouts sind nicht Unterstützt")},removeSubLayout:function(){throw new i("Sub-Layouts sind nicht Unterstützt")},getSubLayouts:function(){return[]},getSubLayout:function(){throw new i("Sub-Layouts sind nicht Unterstützt")},subLayoutCount:function(){return 0},supportsStickyElements:function(){return!1},setTopBorder:function(){throw new i("Top Border ist nicht Unterstützt")},setBottomBorder:function(){throw new i("Bottom Border ist nicht Unterstützt")},getClassName:function(){return"FlowLayoutTwoColumns"}}),u.genericConstructor=function(e){e.dom=a(e),e.layoutColumn=new t(e),e.layoutColumn.dom.classList.add("ospm_scrollable_layout"),e.columnsAligner.appendChild(e.layoutColumn.dom),e.initializeFields({}),o.USE_ISCROLL&&(e.dom.style.overflowY="hidden"),c(e)},u}),define("tao/ospm/ui/layouts/FlowLayoutTwoColumns",["tao/ospm/ui/layouts/FlowLayout"],function(e){var t;return t=e.subclass({constructor:function(){e.genericConstructor(this)},getClassName:function(){return"FlowLayoutTwoColumns"}})}),define("tao/ospm/ui/layouts/FlowLayoutThreeColumns",["tao/ospm/ui/layouts/FlowLayout"],function(e){var t;return t=e.subclass({numberOfColumns:3,constructor:function(){e.genericConstructor(this)},getClassName:function(){return"FlowLayoutThreeColumns"}})}),define("tao/ospm/ui/layouts/LayoutFactory",["tao/lib/stapes","tao/ospm/main/LocalStepData","tao/ospm/ui/layouts/Layout","tao/ospm/ui/layouts/OneColumnLayout","tao/ospm/ui/layouts/TwoColumnLayout","tao/ospm/ui/layouts/ThreeColumnLayout","tao/ospm/ui/layouts/TabDeck","tao/ospm/ui/layouts/FlowLayoutTwoColumns","tao/ospm/ui/layouts/FlowLayoutThreeColumns"],function(e,t,n,i,o,r,s,a,l){var c=e.subclass({stepData:null,constructor:function(e){this.stepData=e},createOneColumnLayout:function(e){return new i(e)},createOneColumn23Layout:function(e){return new i(e,i.WIDTH.TWO_THIRD)},createTwoColumn11Layout:function(e,t,n){return new o(o.COLUMN_RATIO.ONE_ONE,t,n)},createTwoColumn12Layout:function(e,t,n){return new o(o.COLUMN_RATIO.ONE_TWO,t,n)},createTwoColumn21Layout:function(e,t,n){return new o(o.COLUMN_RATIO.TWO_ONE,t,n)},createThreeColumnLayout:function(e,t,n,i){return new r(t,n,i)},createTabDeck:function(e){return new s(e)},createFlowLayoutTwoColumns:function(){return new a},createFlowLayoutThreeColumns:function(){return new l},getClassName:function(){return"LayoutFactory"}});return c.DEFAULT=new c(t.DEFAULT),c}),define("tao/ospm/ui/widgets/Checkbox",["tao/ospm/common/OSPMError","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/main/LocalStepData","tao/ospm/ui/UIConstants","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s,a,l,c){function u(e){e.inputDom.checked?(e.boxDom.setAttribute("value","true"),e.dom.classList.remove("not_checked")):(e.boxDom.removeAttribute("value"),e.dom.classList.add("not_checked"))}function d(e){var t,n,a,l,u;e.dom=i.createContainer("ospm_checkbox ospm_labelfield"),e.innerContainer=i.createLeftAlignedContainer(),n=i.createContainer("ospm_checkbox_content"),e.innerContainer.appendChild(n),e.labelContainerDom=i.createContainer("ospm_list_entry_left_content"),o.isNBF()||n.appendChild(e.labelContainerDom),t=i.createContainer("ospm_list_entry_left_content_first_line"),e.labelContainerDom.appendChild(t),a=o.isNBF()?e.buildLabelDom():e.buildLabelDom(r.TEXT_STYLE.LABEL3),t.appendChild(a),t.appendChild(e.buildInfoTextDom()),t.appendChild(o.isNBF()?e.buildHintIconForTooltip():e.buildHintIcon()),t=i.createContainer("ospm_list_entry_left_content_second_line"),e.labelContainerDom.appendChild(t),t.appendChild(e.buildSubLabelDom(r.TEXT_STYLE.SUBLABEL5)),e.boxDom=i.createContainer("ospm_checkbox_box"),o.isNBF()?(l=i.createContainer("ospm_switch_box"),u=i.createContainer("ospm_switch_circle"),l.appendChild(u),e.boxDom.appendChild(c.createSimpleIcon("checkbox_filled_s")),e.boxDom.appendChild(l)):(e.boxDom.appendChild(c.createSimpleIcon(e.getClassName().toLowerCase()+"_unselected")),e.boxDom.appendChild(c.createSimpleIcon(e.getClassName().toLowerCase()+"_highlighted")),e.boxDom.appendChild(c.createSimpleIcon(e.getClassName().toLowerCase()+"_selected"))),o.isNBF()&&s.executeLater(function(){o.isWithinAdvancedSearchInput(e)&&n.appendChild(a)}),e.inputDom=i.createElement("input"),e.inputDom.setAttribute("type",e.getInputType()),e.inputDom.addEventListener("blur",function(){e.dom.classList.remove("ospm_focus_inside")},!1),e.inputDom.addEventListener("focus",function(){e.dom.classList.add("ospm_focus_inside")},!1),e.boxDom.appendChild(e.inputDom),document.OSPMEnvironment.useAnimations()===!1&&e.boxDom.classList.add("ospm_no_transition"),n.appendChild(e.boxDom),o.isNBF()&&(e.iconContainer=i.createContainer("ospm_checkbox_icon_container"),n.appendChild(e.iconContainer),n.appendChild(e.labelContainerDom)),e.inputDom.addEventListener("change",function(){s.executeLater(function(){return e.preventChangeEvent?void(e.preventChangeEvent=!1):(e.inputDom.checked=!e.inputDom.checked,void e.handleUserAction())},0)},!1),o.addClickListener(e.dom,function(t){e.isEnabled()&&(e.inputDom.focus(),t.target===e.labelDom||t.target===e.inputDom||t.target===e.boxDom&&!e.isShownAsSwitch()||e.handleUserAction())}),e.dom.appendChild(e.innerContainer),e.dom.appendChild(e.buildErrorDom()),o.isNBF()?e.errorMessageShouldHaveIcon():e.dom.appendChild(e.buildHelpMessageContainer())}var h;return h=t.subclass({boxDom:null,inputDom:null,stepData:null,innerContainer:null,iconContainer:null,labelContainerDom:null,constructor:function(e,t){e=e||{},this.stepData=t,d(this),this.setLeftIconContainer(o.isNBF()?this.iconContainer:this.innerContainer),this.initializeFields(e),this.setupSortButtonContainer(this.dom)},initializeFields:function(e){h.parent.initializeFields.call(this,e),this.inputDom.id=this.getId()+"__input",this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setSubLabel(e.subLabel),this.setSubLabelStyle(e.subLabelStyle),this.setInfoText(e.infoText),this.setHint(e.hint),this.setHintIcon(e.hintIcon),this.setError(e.error),this.setValue(e.value),this.setLeftIcon(e.leftIcon),this.setGroup(e.group),this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage),e.changeListener&&this.setChangeListener(e.changeListener),e.wrapMode&&this.setWrapMode(e.wrapMode),this.setShowAsSwitch(e.showAsSwitch),this.setVerticalAlignment(e.verticalAlignment)},getValue:function(){return this.boxDom.hasAttribute("value")},setValue:function(e){this.inputDom.checked=!!e,u(this)},isShownAsSwitch:function(){return this.dom.classList.contains("ospm_has_switch")},setShowAsSwitch:function(e){e?(this.dom.classList.add("ospm_has_switch"),this.boxDom.classList.add("ospm_checkbox_switch"),this.boxDom.classList.remove("ospm_checkbox_box")):(this.dom.classList.remove("ospm_has_switch"),this.boxDom.classList.add("ospm_checkbox_box"),this.boxDom.classList.remove("ospm_checkbox_switch"))},handleUserAction:function(){this.isEnabled()&&(this.setValue(!this.getValue()),this.valueChanged=!0,this.notifyChangeListeners(),this.group&&this.group.notifyChangeListeners())},onResize:function(){this.afterRenderLayout(),h.parent.onResize.call(this)},setEnabled:function(e){h.parent.setEnabled.call(this,e),this.dom.setAttribute("aria-disabled",this.isEnabled()?"false":"true")},updateDisplay:function(){h.parent.updateDisplay.call(this),this.inputDom.disabled=!this.isEnabled(),!o.isNBF()&&this.isFormElement()&&!o.isMobile()&&o.isRendered(this)&&(this.labelContainerDom.style.width=.38*this.innerContainer.offsetWidth+"px"),o.isNBF()&&this.dom.classList.toggle("ospm_has_sublabel",Boolean(this.subLabelText)),o.updateElementHeight([this.innerContainer])},afterRenderLayout:function(){o.updateElement(this)},getClassName:function(){return"Checkbox"},isEmpty:function(){return!this.getValue()},setBottomMargin:function(e){o.isNBF()?h.parent.setBottomMargin.call(this,e):t.setBottomPadding(this,e)},focus:function(){h.parent.focus.call(this),o.focusElement(this,this.inputDom)},removeFocus:function(){this.inputDom.blur(),h.parent.removeFocus.call(this)},getInputType:function(){return"checkbox"},getLabelableHTMLElement:function(){return this.inputDom},setVerticalAlignment:function(e){o.isNBF()||o.toggleClassName(this.boxDom,"ospm_align_top",e===r.VERTICAL_ALIGNMENT.TOP)
}}),h.proto(n.LabelMixin,n.SubLabelMixin,n.InfoTextMixin,n.HintMixin,n.ChangeMixin,n.LeftIconMixin,n.ValueChangedMixin,n.ErrorMixin,n.MandatoryMixin,n.InputStorageMixin,new n.TabIndexMixinFactory({domName:"inputDom"}),n.FocusableMixin,n.WrapMixin,n.GroupMixin,n.SortableWidgetMixin,{getMandatoryValueEmptyError:function(){return this.group&&this.isMandatory()&&this.group.selectedElements().length>0?void 0:n.MandatoryMixin.getMandatoryValueEmptyError.call(this)}}),h.prototype.wantsLargeHeight=function(){var e=!1;return"large"===this.minHeight?e=!0:this.dom.classList.contains("ospm_has_sublabel")?e=!0:n.LeftIconMixin.getMaxIconHeight.call(this)>=l.MINIMUM_ICON_SIZE_FOR_LARGE_WIDGETS&&(e=!0),e},h}),define("tao/ospm/ui/widgets/RadioButton",["tao/ospm/ui/UIConstants","tao/ospm/ui/SelectionGroup","tao/ospm/ui/widgets/Checkbox","tao/ospm/common/OSPMError"],function(e,t,n,i){var o=n.subclass({constructor:function(e,t){o.parent.constructor.call(this,e,t),this.dom.classList.add("ospm_radiobutton"),this.dom.classList.add("ospm_labelfield"),this.boxDom.classList.add("ospm_radiobutton_box")},setValue:function(e){e&&this.group&&t.deselectAll(this.group),o.parent.setValue.call(this,e)},setShowAsSwitch:function(e){if(e)throw new i("Die Anzeige als Switch wird vom RadioButton nicht unterstützt")},handleUserAction:function(){this.isEnabled()&&!this.getValue()&&o.parent.handleUserAction.call(this)},getClassName:function(){return"RadioButton"},getInputType:function(){return"radio"}});return o.proto({setGroup:function(e){o.parent.setGroup.call(this,e),this.getGroup()&&this.inputDom.setAttribute("name",this.getGroup().getName())}}),o}),define("tao/ospm/ui/widgets/SelectionRow",["tao/ospm/ui/widgets/ContainerWidget","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/Checkbox","tao/ospm/ui/widgets/RadioButton","tao/ospm/core/DomFactory","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a,l,c){function u(e,t){var n,i,r,a,l,u,h;if(s.isNBF()&&(e.optionalDomLabel=" (optional)"),a=o.createContainer("ospm_selectionrow"),u=o.createLeftAlignedContainer("ospm_selectionrow_main_content"),l=o.createContainer("ospm_selectionrow_options"),h=o.createContainer("ospm_list_entry_left_content"),e.dom=a,e.containerDom=l,e.mainContentDom=u,e.labelContainerDom=h,i=o.createContainer("ospm_list_entry_left_content_first_line"),h.appendChild(i),i.appendChild(e.buildLabelDom(c.TEXT_STYLE.LABEL3)),s.isNBF()?(i.appendChild(d(e)),i.appendChild(e.buildHintIconForTooltip())):(i.appendChild(e.buildHintIcon()),i.appendChild(d(e))),i=o.createContainer("ospm_list_entry_left_content_second_line"),e.labelContainerDom.appendChild(i),i.appendChild(e.buildSubLabelDom(c.TEXT_STYLE.SUBLABEL5)),t)for(n=0;n<t.elements.length;n++)n||(e.firstInputField=t.elements[n]),e.addElement(f(e,t.elements[n]));u.appendChild(h),u.appendChild(l),a.appendChild(u),s.isNBF()||(r=e.buildHelpMessageContainer()),s.isMobile()?(e.mobileMode=!0,s.isNBF()||h.appendChild(r)):(e.mobileMode=!1,s.isNBF()||a.appendChild(r)),s.isNBF()?(e.errorMessageShouldHaveIcon(),a.appendChild(e.buildErrorDom())):h.appendChild(e.buildErrorDom())}function d(e){return e.optionalDom=o.createInlineContainer("ospm_optional ospm_text_style_36"),h(e,!0),e.optionalDom}function h(e,t){e.optionalDom.textContent=s.isNBF()?e.labelText?t?" (optional)":"":t?"(optional)":"":t?" "+c.NOT_MANDATORY_LABEL:""}function m(e){var t;if(!e.elements||!a.isArray(e.elements))throw new l("Invalid parameters.");if(e.elements.length>0)for(t=0;t<e.elements.length;t++)p(e.elements[t])}function p(e){if(!(e instanceof n||e instanceof i))throw new l("SelectionRow erlaubt nur Checkbox und RadioButton als Elemente",{widget:e})}function f(e,t){return t.getGroup()||t.setGroup(e.optionsGroupName),t}function g(e){e.optionsGroupName||(e.optionsGroupName=a.randomUUID())}function _(e){var t;s.isNBF()||(s.isMobile()&&!e.mobildeMode?(e.hintMessageDom&&e.hintMessageDom.parentNode.removeChild(e.hintMessageDom),e.mobileMode=!0,t=e.dom.querySelector(".ospm_list_entry_left_content"),t.appendChild(e.hintMessageDom)):!s.isMobile()&&e.mobileMode&&(null!==e.hintMessageDom&&e.hintMessageDom.parentNode.removeChild(e.hintMessageDom),e.mobildeMode=!1,e.dom.appendChild(e.hintMessageDom)))}function v(e){var t,n,i,o,r,a;if(s.toggleClassName(e.labelContainerDom,"ospm_empty_label",!e.labelContainerDom.textContent),s.isMobile())e.containerDom.classList.remove("ospm_flex_row");else{for(e.containerDom.classList.add("ospm_flex_row"),t=e.mainContentDom.offsetWidth,n=e.labelContainerDom.offsetWidth,i=b(e.labelContainerDom),o=0,a=0;a<e.containerDom.children.length;a++)o+=b(e.containerDom.children[a]);r=e.dom.classList.contains("ospm_has_label")?Math.min(i,n):0,o+r>t?e.containerDom.classList.remove("ospm_flex_row"):e.containerDom.classList.add("ospm_flex_row")}}function b(e){var t;return e.classList.add("ospm_real_width_calc"),t=e.offsetWidth,e.classList.remove("ospm_real_width_calc"),t}var y=e.subclass({stepData:null,optionsGroupName:null,mandatory:null,mandatoryMessage:null,optionalDom:null,mainContentDom:null,firstInputField:null,constructor:function(e,t){return this.stepData=t,this.mandatory=!1,this.mandatoryMessage=c.MANDATORY_PLACEHOLDERS.ROW,this.elements=[],e?(m(e),g(this),u(this,e),this.initializeFields(e),void v(this)):(u(this),void g(this))},addElement:function(e,t){"function"==typeof e.isMandatory&&e.isMandatory()&&e.setMandatory(!1),y.parent.addElement.call(this,e,t),e.dom.classList.remove("ospm_labelfield")},removeElement:function(e){var t=y.parent.removeElement.call(this,e);return t&&t.dom.classList.add("ospm_labelfield"),t},initializeFields:function(e){y.parent.initializeFields.call(this,e),this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setSubLabel(e.subLabel),this.setSubLabelStyle(e.subLabelStyle),this.setLeftIconContainer(this.mainContentDom),this.setLeftIcon(e.leftIcon),this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage),this.setHint(e.hint),this.setHintIcon(e.hintIcon)},checkForValidElement:function(e){return e instanceof n||e instanceof i?null:"Nur Checkboxes und RadioButtons sind als Elemente erlaubt"},isMandatory:function(){return this.mandatory},setMandatory:function(e){this.mandatory=!!e,this.mandatory?(this.optionalDom.classList.add("ospm_hidden"),h(this,!1)):(this.optionalDom.classList.remove("ospm_hidden"),h(this,!0)),s.updateElement(this)},getMandatoryMessage:function(){return this.mandatoryMessage},setMandatoryMessage:function(e){this.mandatoryMessage=e||c.MANDATORY_PLACEHOLDERS.ROW},checkMandatoryValueEmptyError:function(){var e,t,n,i;if(this.mandatory){for(e=this.getElements(),n=!0,t=0;t<e.length;t++)e[t].getValue()&&(n=!1);if(n)return i={code:8,title:"Pflichtfeld",msg:this.getMandatoryMessage()},this.setError(i),i}return null},focus:function(){y.parent.focus.call(this),s.focusElement(this,this.firstInputField.inputDom)},getClassName:function(){return"SelectionRow"},onResize:function(){v(this),_(this),y.parent.onResize.call(this)},updateDisplay:function(){y.parent.updateDisplay.call(this),v(this)},switchToFormLayout:function(){s.isNBF()||this.hasFormLayout||(y.parent.switchToFormLayout.call(this),this.errorMessageDom.parentNode.removeChild(this.errorMessageDom),this.dom.appendChild(this.errorMessageDom))},setBottomMargin:function(e){s.isNBF()?y.parent.setBottomMargin.call(this,e):t.setBottomPadding(this,e)}});return y.proto(r.LabelMixin,r.SubLabelMixin,r.LeftIconMixin,r.ErrorMixin,r.HintMixin),y}),define("tao/ospm/ui/widgets/Slider",["tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/OSPMError","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/ui/views/DialogView","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/TextInput","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/Footer","tao/ospm/core/DomFactory","tao/ospm/ui/ValidatorUtils","tao/ospm/core/OSPMPage"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f){function g(e,t){var n,i,o,r,s,a,l,c,u,d,h,m,p,f,g;n=e.sliderKnob,i=e.data,e.isEnabled()&&(s=n.parentNode.getBoundingClientRect(),a=s.width+2*n.parentNode.offsetLeft,o=t-s.left+n.parentNode.offsetLeft,0>=o&&(o=0),o>=s.width&&(o=s.width),r=Math.max(0,Math.min(100,o/a*100)),u=i.step.toString(),c=u.substring(u.indexOf(".")+1).length,f=Math.pow(10,c),d=i.min*f,h=i.max*f,p=i.step*f,m=Math.round((h-d)*r/100+d),p>0?(l=(m-d)%p,p/2>l&&h>m?m-=l:m+=p-l):m=d,m=Number((m/f).toFixed(c)),m=i.lowerLimit?Math.max(i.lowerLimit,m):Math.max(i.min,m),m=i.upperLimit?Math.min(i.upperLimit,m):Math.min(i.max,m),g=i.value!==m,i.value=m,b(e),g&&(e.valueChanged=!0,e.dragging=!0,e.notifyChangeListeners({dragging:!0})))}function _(e){var t,n,i,o;0!==e.dom.offsetWidth&&(e.markDom.parentNode.classList.remove("ospm_hidden"),M(e),n=Math.round(e.markTextWrapperDom.offsetWidth/2)-10,t=v(e,e.mark.value,50),i=e.markTextDom.parentNode.offsetWidth,o=t*i/100,e.markDom.style.left=t+"%",e.markTextDom.style.left=t+"%",e.markTextDom.style.marginLeft=-n+"px",e.markWrapperDom.style.right="",n>o&&(e.markTextDom.style.left="0",e.markTextDom.style.marginLeft="-5px"),o+n>i&&(e.markTextDom.style.right="0",e.markTextDom.style.left="100%",e.markTextDom.style.marginLeft="",e.markWrapperDom.style.right="-18px"),e.markTextDom.setAttribute("aria-label","Markierung bei "+e.mark.value),e.markTextDom.id=e.getId()+"__mark",e.ariaDescribedByIds.push(e.markTextDom.id))}function v(e,t,n){var i=e.data;return t<i.min?0:t>i.max?100:i.max<=i.min?n:100*(t-i.min)/(i.max-i.min)}function b(e){var n,i;i=e.data,e.inputValueDom.value=t.toHTMLText(i.value,i.format),n=v(e,i.value,50),e.sliderKnob.style.left=n+"%",e.filledLineDom.style.width=n+"%",N(e)}function y(e,t,n,i,o){var s,a,l;return s=m.createContainer("ospm_slider_limits_wrapper"),a=r.createSvgIcon(t,f.resolveUrl(i),n),a.setAttribute("aria-label",o),s.appendChild(a),l=e.dom.querySelector(".ospm_slider_inputline"),l.insertBefore(s,l.firstChild),a}function C(e,t){var n=e.dom.querySelector("."+t);n&&n.parentNode.removeChild(n)}function w(e,i,o){var s,a,l,c,u,d,h;return s=m.createContainer("ospm_slider ospm_widget"),e.dom=s,e.setId(),e.wrapperDom=m.createContainer("ospm_widget_content_wrapper"),a=m.createContainer("ospm_slider_main"),e.wrapperDom.appendChild(a),d=m.createLeftAlignedContainer("ospm_slider_container"),e.highlightContainerDom=m.createContainer("ospm_labelfield ospm_labelfield_relative_container"),e.innerDomContainer=m.createLeftAlignedContainer(),e.highlightContainerDom.appendChild(e.innerDomContainer),d.appendChild(e.highlightContainerDom),e.wrapperDom.appendChild(d),e.labelContainerDom=m.createContainer("ospm_slider_entry_left_content"),e.innerDomContainer.appendChild(e.labelContainerDom),h=m.createContainer("ospm_list_entry_left_content_first_line"),e.labelDom=m.createInlineContainer("ospm_slider_label ospm_text_style_23"),h.appendChild(e.labelDom),h.appendChild(t.isNBF()?e.buildHintIconForTooltip():e.buildHintIcon()),e.labelContainerDom.appendChild(h),e.valueContainerDom=m.createContainer("ospm_slider_value_container"),e.inputValueDom=m.createInput("text","ospm_slider_value"),e.inputValueDom.id=e.getId()+"__input",e.valueContainerDom.appendChild(e.inputValueDom),e.innerDomContainer.appendChild(e.valueContainerDom),e.valueUnitDom=m.createInlineContainer("ospm_slider_value_unit"),e.valueContainerDom.appendChild(e.valueUnitDom),e.iconDom=r.createSimpleIcon(t.isNBF()?n.ICONS.EDIT_S:"textinput_edit"),e.valueContainerDom.appendChild(e.iconDom),e.valueContainerDom.appendChild(r.createIcon({name:n.ICONS.LOCK_S,color:n.ICON_COLOR.DARK_GREY,size:n.ICON_SIZE.SMALL_20},16)),a.appendChild(d),t.isNBF()||a.appendChild(e.buildHelpMessageContainer()),l=m.createContainer("ospm_slider_inputline"),a.appendChild(l),c=m.createContainer("ospm_slider_inputbackground"),l.appendChild(c),c=m.createContainer("ospm_slider_inputbackground_filled"),l.appendChild(c),c=m.createContainer("ospm_slider_knobs_wrapper"),l.appendChild(c),u=m.createContainer("ospm_slider_inputknob"),c.appendChild(u),c=m.createContainer("ospm_slider_event_area"),l.appendChild(c),e.minMaxLineDom=m.createContainer("ospm_slider_minmaxline"),a.appendChild(e.minMaxLineDom),c=m.createLabelElement(),c.textContent=t.toHTMLText(o.min,o.format)+t.toHTMLText(i.valueUnit),c.setAttribute("aria-label","Minimum "+c.textContent),c.id=e.getId()+"__min",e.minMaxLineDom.appendChild(c),void 0===o.min||null===o.min||void 0!==i.lowerLimit&&null!==i.lowerLimit||e.ariaDescribedByIds.push(c.id),c=m.createLabelElement(),c.textContent=t.toHTMLText(o.max,o.format)+t.toHTMLText(i.valueUnit),c.setAttribute("aria-label","Maximum "+c.textContent),c.id=e.getId()+"__max",e.minMaxLineDom.appendChild(c),void 0===o.max||null===o.max||void 0!==i.upperLimit&&null!==i.upperLimit||e.ariaDescribedByIds.push(c.id),l=m.createContainer("ospm_slider_arrow_mark_wrapper"),l.classList.add("ospm_hidden"),a.appendChild(l),e.markDom=r.createSvgIcon("ospm_slider_arrow_mark",f.resolveUrl("./res/ospm/icons/ic_8_arrow.svg"),"ospm_icon ospm_slider_arrow_mark"),l.appendChild(e.markDom),e.markTextDom=m.createContainer("ospm_slider_arrow_mark_text"),l.appendChild(e.markTextDom),e.markWrapperDom=m.createContainer("ospm_slider_mark_wrapper"),e.markTextDom.appendChild(e.markWrapperDom),e.markTextWrapperDom=m.createContainer("ospm_slider_mark_wrapper_text"),e.markTextWrapperDom.id=e.getId()+"__mark",e.ariaDescribedByIds.push(e.markTextWrapperDom.id),e.markWrapperDom.appendChild(e.markTextWrapperDom),R(e),e.wrapperDom.appendChild(e.buildErrorDom()),s.appendChild(e.wrapperDom),s}function E(i){i.isEnabled()&&(t.activeElement()!==i.inputValueDom&&i.inputValueDom.focus(),e.executeLater(function(){i.inputValueDom.select()}.bind(i)),i.dom.dataset.mode=n.INPUT_MODE.EDIT,i.onEntry.bind(i))}function L(e,t){D(e,t),void 0!==t.lowerLimit&&(t.lowerLimit>t.max&&(t.lowerLimit=t.max),t.lowerLimit<t.min&&(t.lowerLimit=t.min),e.dom.querySelector(".ospm_slider_lowerlimit").style.left=v(e,t.lowerLimit,0)+"%"),void 0!==t.upperLimit&&(t.upperLimit>t.max&&(t.upperLimit=t.max),t.upperLimit<t.min&&(t.upperLimit=t.min),e.dom.querySelector(".ospm_slider_upperlimit").style.left="calc("+v(e,t.upperLimit,100)+"% - 10px)")}function S(e){var t=e.ariaDescribedByIds.reduce(function(e,t){return e+" "+t});e.inputValueDom.setAttribute("aria-describedby",t),e.ariaDescribedByIds=[]}function D(e,n){e.minMaxLineDom.childNodes[0].textContent=t.toHTMLText(n.min,n.format)+" "+t.toHTMLText(n.valueUnit),e.minMaxLineDom.childNodes[0].setAttribute("aria-label","Minimum "+e.minMaxLineDom.childNodes[0].textContent),e.minMaxLineDom.childNodes[1].textContent=t.toHTMLText(n.max,n.format)+" "+t.toHTMLText(n.valueUnit),e.minMaxLineDom.childNodes[1].setAttribute("aria-label","Maximum "+e.minMaxLineDom.childNodes[1].textContent)}function T(e,t){e.data.value=t,e.notifyInternalValueChange()}function I(e,t){var n=k(e,t);return n!==t?n:x(e,t)}function k(e,t){var n=e.data.lowerLimit,i=e.data.min;return n&&n>t?n:i>t?i:t}function x(e,t){var n=e.data.upperLimit,i=e.data.max;return n&&t>n?n:t>i?i:t}function A(e,n,i){var o=O(n,e.data.format),r=I(e,o);T(e,r),b(e),e.inputValueDom.value=t.toHTMLText(r,e.data.format),i&&o!==r&&e.notifyOutOfBoundsListeners({rawValue:n,numericValue:o,boundedValue:r})}function O(n,i,o){if("number"==typeof n)return n;if(e.isBigDecimal(n))return parseFloat(n.toString());if(void 0!==o&&!e.isSet(n))return o;try{return parseFloat(t.toBigDecimal(n,i).toString())}catch(r){return 0}}function N(e){var n,o,r,s,a,l;e.inputValueDom.value&&(n=P(e.size),n.textContent=e.inputValueDom.value,o=n.offsetWidth,r=e.valueUnitDom.clientWidth,s=e.iconDom.clientWidth,s>0&&(s+=12),l=o+r+s,a=e.innerDomContainer.clientWidth,0===e.labelDom.textContent.length?e.inputValueDom.style.marginLeft=0:(a=Math.round(.62*e.innerDomContainer.clientWidth),e.inputValueDom.style.marginLeft=""),l>a&&(l=a),o=l-r-s,i.IF&&o>0&&(o+=14),t.isNBF()||(o+=34),e.inputValueDom.style.width=Math.round(o)+"px")}function M(e){var t,n,i,o=15,r=24;e.wrapperDom.firstChild.style.minHeight="",t=P(e.size),t.textContent=e.markTextWrapperDom.textContent,n=t.offsetWidth+10,i=e.dom.offsetWidth-2*r-20,n>i&&(n=i),e.markTextWrapperDom.style.width=n+"px",e.wrapperDom.firstChild.style.minHeight=e.wrapperDom.firstChild.offsetHeight+e.markTextWrapperDom.offsetHeight-o+"px"}function P(e){var o,r=t.getMeasuringElement("slider");return o=i.IF?t.isStatScreenSize()?"18px":"15px":e===n.SIZE.LARGE?"22px":"17px",r.style.fontSize=o,r}function R(e){document.OSPMEnvironment.isTouchDevice()||(e.labelDom.addEventListener("click",E.bind(e,e),!1),e.iconDom.addEventListener("click",E.bind(e,e),!1)),e.inputValueDom.addEventListener("keyup",t.createKeyEventListener(e.onKeyUp.bind(e))),e.inputValueDom.addEventListener("keydown",t.createKeyEventListener(e.onKeyDown.bind(e))),e.inputValueDom.addEventListener("keypress",t.createKeyEventListener(e.onKeyPress.bind(e))),e.inputValueDom.addEventListener("focus",e.onEntry.bind(e),!1),e.inputValueDom.addEventListener("blur",e.onLeave.bind(e),!1),e.inputValueDom.addEventListener("input",e.onInputChanged.bind(e),!1)}var F;return F=s.subclass({stepData:null,isTrackingActive:!1,dragging:!1,sliderKnob:null,data:null,initialValue:null,labels:null,markDom:null,mark:null,markTextDom:null,labelDom:null,valueUnitDom:null,iconDom:null,minMaxLineDom:null,markText:null,wrapperDom:null,filledLineDom:null,size:null,constructor:function(e,n){function i(e){a.isEnabled()&&(a.sliderKnob.classList.add("ospm_grabbing"),document.body.classList.add("ospm_grabbing"),t.isIE()&&(e.stopPropagation(),e.preventDefault()))}function o(){a.isEnabled()&&(F.parent.focus.call(a),a.dom.ownerDocument.defaultView.onmousemove=function(e){a.isTrackingActive?(a.valueContainerDom.classList.add("ospm_slider_active_value"),g(a,e.clientX)):(a.dom.ownerDocument.defaultView.onmousemove=null,a.valueContainerDom.classList.remove("ospm_slider_active_value")),t.isIE()&&(e.stopPropagation(),e.preventDefault())},a.dom.ownerDocument.defaultView.onmouseup=function(){a.sliderKnob.classList.remove("ospm_grabbing"),document.body.classList.remove("ospm_grabbing"),a.isTrackingActive=!1,a.dragging&&(a.dragging=!1,a.notifyChangeListeners({dragging:!1}))},a.isTrackingActive=!0)}function r(e){a.isEnabled()&&(a.dom.ownerDocument.defaultView.ontouchmove=function(e){a.isTrackingActive?(a.valueContainerDom.classList.add("ospm_slider_active_value"),g(a,e.touches[0].pageX)):(a.dom.ownerDocument.defaultView.ontouchmove=null,a.valueContainerDom.classList.remove("ospm_slider_active_value")),e.stopPropagation(),e.preventDefault()},a.dom.ownerDocument.defaultView.ontouchend=function(){a.isTrackingActive=!1,a.dragging&&(a.dragging=!1,a.notifyChangeListeners({dragging:!1}))},a.isTrackingActive=!0,e.stopPropagation(),e.preventDefault())}var s,a=this;e=e||{},this.stepData=n,t.verifyFormatter(e.format),this.data={min:0,max:100,value:0,valueUnit:e.valueUnit,format:e.format},this.labels={},this.ariaDescribedByIds=[],this.dom=w(this,e,this.data),this.sliderKnob=this.dom.querySelector(".ospm_slider_inputknob"),this.filledLineDom=this.dom.querySelector(".ospm_slider_inputbackground_filled"),this.initializeFields(e),s=this.dom.querySelector(".ospm_slider_event_area"),this.sliderKnob.ontouchstart=r,s.addEventListener("touchstart",function(e){a.isEnabled()&&(e.target.classList.contains("ospm_slider_event_area")&&(g(a,e.touches[0].pageX),a.sliderKnob.ontouchstart(e)),t.isIE()&&(e.stopPropagation(),e.preventDefault()))},!1),this.sliderKnob.addEventListener("mousedown",i,!1),this.sliderKnob.onmousedown=o,s.addEventListener("mousedown",function(e){a.isEnabled()&&(F.parent.focus.call(a),e.target.classList.contains("ospm_slider_event_area")&&(g(a,e.clientX),a.sliderKnob.onmousedown(e)),t.isIE()&&(e.stopPropagation(),e.preventDefault()))},!1),b(this),e.mark&&_(this),S(this)},initializeFields:function(t){var n,i,r,s,a=this.data.format;if(F.parent.initializeFields.call(this,t),n=O(t.min,a,0),i=O(t.max,a,100),r=O(t.value,a,n),s=O(t.step,a,1),n>=i)throw new o("Das Maximum ist nicht größer als das Minimum");if(0>=s||s>i-n)throw new o("Ungültiger Schrittwert");if(n>r)throw new o("Wert value ist unterhalb des definierten Min-Max-Bereichs");if(r>i)throw new o("Wert value ist oberhalb des definierten Min-Max-Bereichs");this.setMin(n),this.setMax(i),this.setValue(r),this.initialValue=I(this,O(r,this.data.format)),t.mark&&this.setMark(t.mark),this.setStep(s),this.setValueUnit(t.valueUnit),this.setLabel(t.label),this.setHint(t.hint),this.setHintIcon(t.hintIcon),this.setLowerLimit(t.lowerLimit),this.setUpperLimit(t.upperLimit),e.isSet(t.large)?this.setLarge(t.large):this.setSize(t.size),this.setChangeListener(t.changeListener),L(this,this.data),e.isSet(t.enabled)&&this.setEnabled(!!t.enabled),this.initializeCheckableFields(t),this.setOutOfBoundsListener(t.outOfBoundsListener)},setLabel:function(e){m.createMarkupDomTree(this,this.labelDom,e),this.inputValueDom&&this.inputValueDom.setAttribute("aria-label",e)},getValue:function(){return this.data.value},setValue:function(e){A(this,e),this.data.oldValue=this.data.value},setMark:function(e){this.mark=e,void 0!==this.mark.value&&void 0!==this.mark.label&&(this.mark.value=O(e.value,this.data.format),this.mark.value<this.data.min?this.mark.value=this.data.min:this.mark.value>this.data.max&&(this.mark.value=this.data.max),this.markText=e.label,this.markTextWrapperDom.textContent=e.label,this.markTextWrapperDom.setAttribute("aria-label","Markierung "+e.label+" bei "+e.value+"."),this.dom.classList.add("ospm_slider_with_mark"),_(this),this.dom.dataset.scrollupdate="true")},getMark:function(){return this.mark},removeMark:function(){this.mark=null,this.markDom.parentNode.classList.add("ospm_hidden"),this.dom.classList.remove("ospm_slider_with_mark"),M(this),this.dom.dataset.scrollupdate="true"},getMin:function(){return this.data.min},setMin:function(e){var t=this.data;t.min=O(e,t.format),t.value<t.min&&T(this,t.min),t.max<t.min&&(t.max=t.min),t.max>t.min&&t.step>t.max-t.min&&(t.step=t.max-t.min),L(this,t),b(this),this.mark&&_(this)},getMax:function(){return this.data.max},setMax:function(e){var t=this.data;t.max=O(e,t.format),t.value>t.max&&T(this,t.max),t.min>t.max&&(t.min=t.max),t.min<t.max&&t.step>t.max-t.min&&(t.step=t.max-t.min),L(this,t),b(this),this.mark&&_(this)},getStep:function(){return this.data.step},setStep:function(e){var t=this.data;if(e=O(e,t.format),0>=e)throw new o("Die Schrittweite muss größer 0 sein",{step:e});t.step=e,t.min<t.max&&t.step>t.max-t.min&&(t.step=t.max-t.min),L(this,t),b(this)},setLowerLimit:function(n){var i,o;void 0!==n&&""!==n?(n=O(n,this.data.format),n<this.data.min?n=this.data.min:n>this.data.max&&(n=this.data.max),this.data.lowerLimit=n,this.data.value<n&&T(this,n),void 0!==this.data.upperLimit&&this.data.upperLimit<n&&(this.data.upperLimit=n),o="Minimum "+t.toHTMLText(this.data.lowerLimit,this.data.format)+" "+t.toHTMLText(this.data.valueUnit)+".",i=this.dom.querySelector(".ospm_slider_lowerlimit"),i?i.setAttribute("aria-label",o):(i=y(this,"ospm_slider_lowerlimit","ospm_icon ospm_slider_lowerlimit","./res/ospm/icons/ic_8_min.svg",o),i.id=this.getId()+"__lowerLimit",this.ariaDescribedByIds.push(i.id))):(e.deleteProperty(this.data,"lowerLimit"),C(this,"ospm_slider_lowerlimit")),L(this,this.data),b(this)},setUpperLimit:function(n){var i,o;void 0!==n&&""!==n?(n=O(n,this.data.format),n<this.data.min?n=this.data.min:n>this.data.max&&(n=this.data.max),this.data.upperLimit=n,this.data.value>n&&T(this,n),void 0!==this.data.lowerLimit&&this.data.lowerLimit>n&&(this.data.lowerLimit=n),o="Maximum "+t.toHTMLText(this.data.upperLimit,this.data.format)+" "+t.toHTMLText(this.data.valueUnit)+".",i=this.dom.querySelector(".ospm_slider_upperlimit"),i?i.setAttribute("aria-label",o):(i=y(this,"ospm_slider_upperlimit","ospm_icon ospm_slider_upperlimit","./res/ospm/icons/ic_8_max.svg",o),i.id=this.getId()+"__upperLimit",this.ariaDescribedByIds.push(i.id))):(e.deleteProperty(this.data,"upperLimit"),C(this,"ospm_slider_upperlimit")),L(this,this.data),b(this)},getLowerLimit:function(){return this.data.lowerLimit},getUpperLimit:function(){return this.data.upperLimit},getLabel:function(){return this.labelDom.textContent},isLarge:function(){return this.size===n.SIZE.LARGE},getValueUnit:function(){return this.data.valueUnit},setValueUnit:function(e){this.data.valueUnit=e||"",this.dom.querySelector(".ospm_slider_value_unit").textContent=t.toHTMLText(this.data.valueUnit),b(this),D(this,this.data)},setLarge:function(e){this.setSize(e===!0?n.SIZE.LARGE:null)},setSize:function(e){this.dom.classList.remove("ospm_slider_large"),this.dom.classList.remove("ospm_slider_small"),e===n.SIZE.LARGE?this.dom.classList.add("ospm_slider_large"):e===n.SIZE.SMALL?this.dom.classList.add("ospm_slider_small"):e=n.SIZE.MEDIUM,this.size=e,this.mark&&_(this),t.updateElement(this)},afterRenderLayout:function(){this.mark&&(b(this),_(this)),t.updateElement(this)},updateDisplay:function(){N(this),t.setDomEnabled(this.dom,this.isEnabled())},summingValues:function(){return this.isSummable()?[this.getValue()]:[]},onLeave:function(){var e;this.dom.dataset.mode="active",A(this,this.inputValueDom.value.trim(),!0),b(this),e=this.data.oldValue!==this.getValue(),e&&(this.valueChanged=!0),p.onExit(this),e&&this.notifyChangeListeners({dragging:!1})},onKeyUp:function(e){switch(t.updateElement(this),e.keyCode){case n.KEYCODES.ESCAPE:p.beforeInput(this,{event:e})&&(this.inputValueDom.value=t.toHTMLText(this.data.oldValue,this.data.format));break;case n.KEYCODES.ENTER:this.inputValueDom.blur()}},onKeyDown:function(e){switch(t.updateElement(this),e.keyCode){case n.KEYCODES.BACKSPACE:case n.KEYCODES.DELETE:p.beforeInput(this,{event:e})}},onKeyPress:function(n){var i;return t.updateElement(this),p.beforeInput(this,{event:n})?t.isKeyPressEventToIgnore(n)?!0:void(e.isOfType(n,"KeyboardEvent")&&(i=String.fromCharCode(n.charCode),"0123456789.,-".indexOf(i)<0&&n.preventDefault(),this.data.format&&(","===i&&this.data.format.decimalPlaces<=0||"."===i&&"."!==this.data.format.thousandSeparator)&&n.preventDefault())):void n.preventDefault()},onInputChanged:function(){p.afterInput(this)},onEntry:function(){p.onEntry(this),E(this),this.data.oldValue=this.getValue()},onResize:function(){M(this)},setEnabled:function(e){F.parent.setEnabled.call(this,e),this.inputValueDom.disabled=!e},focus:function(){F.parent.focus.call(this),E(this)},getClassName:function(){return"Slider"},setBottomMargin:function(e){t.isNBF()?F.parent.setBottomMargin.call(this,e):s.setBottomPadding(this,e)}}),F.proto(a.ChangeMixin,a.ValueChangedMixin,a.OutOfBoundsMixin,a.ErrorMixin,a.CheckableMixin,new a.TabIndexMixinFactory({domName:"inputValueDom"}),a.FocusableMixin,a.InputStorageMixin,a.HintMixin),F}),define("tao/ospm/ui/widgets/TextTable",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/Constants","tao/ospm/ui/UIConstants","tao/ospm/core/EventLog"],function(e,t,n,i,o,r,s,a,l){function c(e,t){t===s.DISPLAY.POSITIVE&&e.classList.add("ospm_display_color_positive"),t===s.DISPLAY.NEUTRAL&&e.classList.add("ospm_display_color_neutral"),t===s.DISPLAY.NEGATIVE&&e.classList.add("ospm_display_color_negative"),t===s.DISPLAY.NORMAL&&e.classList.add("ospm_display_color_normal"),t===s.DISPLAY.HIGHLIGHTED&&e.classList.add("ospm_display_color_bold")}function u(e){var n,i,r="";e.detailsContainerDom.style.paddingLeft="",n=e.dom.classList.contains("ospm_has_lefticon"),i=null!==e.detailsContainerDom.querySelector(".ospm_icon"),n&&(r="ospm_has_left_icon_size_"+t.LeftIconMixin.leftIconWidth.call(e),i||(e.detailsContainerDom.style.paddingLeft=e.labelDom.offsetLeft+"px")),o.replaceClassNameStartingWith(e.leftIconContainerDom,"ospm_has_left_icon_size_",r)}function d(e){var t,n,i,r,s,a,l,c;if(o.isRendered(e))for(l=e.headerDom.querySelector(".ospm_list_entry_left_content"),c=e.headerDom.querySelector(".ospm_list_entry_right_content"),m(l),m(c),h(e,l,c),r=e.detailsContainerDom.querySelectorAll(".ospm_list_entry_details"),a=0;a<r.length;a++)s=r[a],t=s.querySelector(".ospm_label"),n=s.querySelector(".ospm_subvalue_container"),i=s.querySelector(".ospm_texttable_value_container"),m(t),m(n),m(i),n.offsetWidth?(i.style.width="160px",p(t,!0)):h(e,t,i)}function h(e,t,n){var i,r,s,a;i=t.offsetWidth,r=n.offsetWidth,s=e.wrapperDom.offsetWidth,a=s/2,s>r+i?o.isNBF()?p(t,!0):r>i?p(n,!0):p(t,!0):i>a&&r>a?(p(t,!0),p(n,!0)):r>a?p(n,!0):i>a&&p(t,!0)}function m(e){e.removeAttribute("style")}function p(e,t){e.style.flex=t?"1":""}function f(e){var t=0===e.labelDom.textContent.length&&r.isArrayProvided(e.values);o.toggleClassName(e.headerDom,"ospm_texttable_without_label",t)}function g(e){var t,n,i,r,a,l,c,u,d,h;for(t=e.detailsContainerDom.querySelectorAll(".ospm_list_entry_details"),h=0;h<t.length;h++)c=t[h],e.wrapMode!==s.WRAP_MODE.DEFAULT?c.classList.remove("ospm_overflow"):(n=c.querySelector(".ospm_list_entry_details_text_label"),i=c.querySelector(".ospm_subvalue_container"),r=c.querySelector(".ospm_texttable_value_container"),a=i.firstChild.offsetWidth+i.lastChild.offsetWidth,l=r.firstChild.offsetWidth+r.lastChild.offsetWidth,isNaN(d)&&(d=parseInt(o.getCss(r,"padding-left"),10)),l&&!isNaN(d)&&(l+=d),u=n.offsetWidth+l>e.detailsContainerDom.offsetWidth&&0===a,o.toggleClassName(c,"ospm_overflow",u))}function _(e){var t=e.leftIconDom?!0:!1,n=e.labelDom.textContent.length>0,i=e.infoTextDom&&e.infoTextDom.textContent.length>0,r=e.hintMessageDom&&e.hintMessageDom.textContent.length>0,s=e.valueDom&&e.valueDom.textContent.length>0,a=e.rightIconDom?!0:!1,l=!(t||n||i||r||s||a);o.toggleClassName(e.dom,"ospm_has_empty_header",l)}function v(e){var t,i,r,a,l,c;t=n.createLayout("ospm_texttable_entry ospm_labelfield"),e.dom=n.createContainer("ospm_texttable_container"),e.wrapperDom=n.createContainer("ospm_widget_content_wrapper"),e.wrapperDom.appendChild(t.dom),e.wrapperDom.appendChild(e.buildErrorDom()),o.isNBF()||e.wrapperDom.appendChild(e.buildHelpMessageContainer()),e.dom.appendChild(e.wrapperDom),i=t.centerNode,i.classList.add("ospm_texttable"),e.contentDom=i,e.innerDomContainer=t.dom,e.headerDom=n.createLeftAlignedContainer("ospm_list_entry_header"),e.leftIconContainerDom=e.headerDom,o.isNBF()&&(e.checkboxIconContainerDom=e.headerDom),r=n.createContainer("ospm_list_entry_left_content"),e.headerDom.appendChild(r),a=n.createContainer("ospm_list_entry_left_content_first_line"),r.appendChild(a),a.appendChild(e.buildLabelDom(s.TEXT_STYLE.LABEL3)),a.appendChild(e.buildInfoTextDom()),a.appendChild(o.isNBF()?e.buildHintIconForTooltip():e.buildHintIcon()),l=n.createContainer("ospm_list_entry_right_content"),l.appendChild(e.buildValueDom(s.TEXT_STYLE.LABEL6)),c=n.createContainer("ospm_texttable_right_icons"),e.rightIconContainerDom=c,l.appendChild(c),e.headerDom.appendChild(l),i.appendChild(e.headerDom),e.detailsContainerWrapperDom=n.createLeftAlignedContainer("ospm_list_entry_details_container_wrapper"),e.detailsContainerDom=n.createContainer("ospm_list_entry_details_container"),e.detailsContainerWrapperDom.appendChild(e.detailsContainerDom),i.appendChild(e.detailsContainerWrapperDom),o.addClickListener(e.wrapperDom,function(){e.notifyClickListeners()})}function b(e,t,l,c,u){var d,h,m,p=s.TEXT_STYLE.LABEL5;return d=n.createContainer("ospm_texttable_icon"),d.classList.add(t?"ospm_texttable_icon_right":"ospm_texttable_icon_left"),l&&(r.isObject(l)&&(u=u||l.action,l.labelStyle&&(p=l.labelStyle)),r.deleteProperty(l,"action"),m=t?i.createIcon(l,!0):i.createIcon(l,!0),m&&(m.classList.add(t?a.RIGHT_ICON_DEFAULT_CLASS:a.LEFT_ICON_DEFAULT_CLASS),d.appendChild(m))),c&&(h=n.createContainer("ospm_texttable_icon_label",c),h.classList.add("ospm_text_style_"+p),t?d.insertBefore(h,d.firstChild):d.appendChild(h)),u&&(o.addActionListener(d,function(){y(e,l,c,u)},!1,!0),e.isEnabled()?d.setAttribute("tabindex",a.TABINDEXES.DEFAULT):d.removeAttribute("tabindex"),d.classList.add("ospm_text_button"),d.classList.add("ospm_clickable")),d
}function y(e,t,n,i){if(e.isEnabled()){l.logUserEvent("IconAction",e,{icon:t,label:n});try{i()}catch(o){throw OSPMError.fromError("Fehler in Icon-Action-Funktion",o,{icon:t,label:n})}}}function C(e){return e?"string"!=typeof e&&"undefined"!=typeof e&&("undefined"==typeof e.size||null===e.size||e.size>s.ICON_SIZE.SMALL_30)?{name:e.name,size:s.ICON_SIZE.SMALL_30,color:e.color,label:e.label,action:e.action}:"string"==typeof e?{name:e,size:s.ICON_SIZE.SMALL_30,color:e.color,action:e.action}:e:e}var w;return w=e.subclass({stepData:null,innerDomContainer:null,contentDom:null,headerDom:null,leftIconDom:null,headerLeftIconDom:null,rightIconDom:null,rightIcons:null,rightIconLabel:null,rightIconAction:null,detailsContainerWrapperDom:null,detailsContainerDom:null,values:null,wrapperDom:null,constructor:function(e,t){e=e||{},this.rightIcons=[],this.stepData=t,this.values=[],v(this),this.initializeFields(e)},initializeFields:function(e){w.parent.initializeFields.call(this,e),e.label&&(this.setLabel(e.label),this.setLabelStyle(e.labelStyle)),this.setInfoText(e.infoText),this.setHint(e.hint),this.setHintIcon(e.hintIcon),this.setLeftIcon(e.leftIcon),this.setRightIcon(e.rightIcon,e.rightIconLabel,e.rightIconAction),this.setValues(e.values),this.setValue(e.value),this.setValueUnit(e.valueUnit),this.setValueStyle(e.valueStyle),this.setHighlight(e.highlighted),this.setLabelAsHeader(e.labelAsHeader),e.clickListener&&this.setClickListener(e.clickListener),this.setWrapMode(e.wrapMode),this.initializeCheckableFields(e)},setValues:function(e){var t,a,l,u,d,h,m,p,f,g,_,v=[],b=!1;if(void 0===e)return void(this.dom.dataset.mode=this.values.length>0?"":"hasNoValues");for(t=this.detailsContainerDom.childNodes;t.length>0;)this.detailsContainerDom.removeChild(t[0]);for(a=0;a<e.length;a++)if(l=e[a],r.isSet(l.leftIcon)){b=!0;break}if(null!==e&&"object"==typeof e&&e.length>0)for(a=0;a<e.length;a++)l=e[a],v.push(l.value),u=n.createLeftAlignedContainer("ospm_list_entry_details"),b&&(m=r.isSet(l.leftIcon)?l.leftIcon:"void",m=C(m),p=i.createIcon(m),r.isSet(p)&&u.appendChild(p)),f=n.createLabel(),_=n.createInlineContainer("ospm_list_entry_details_text_label"),f.appendChild(_),f.classList.add("ospm_text_style_"+s.TEXT_STYLE.LABEL6),n.createMarkupDomTree(this,_,l.label),u.appendChild(f),0===_.textContent.length&&(_.classList.add("ospm_hidden"),u.classList.add("ospm_label_empty")),d=n.createContainer("ospm_subvalue_container"),d.classList.add("ospm_text_style_"+s.TEXT_STYLE.LABEL6),g=n.createSubValueField(),n.createMarkupDomTree(this,g,l.subValue),d.appendChild(g),d.appendChild(n.createSubValueUnit(l.subValueUnit)),0===d.children[0].textContent.length&&0===d.children[1].textContent.length&&(d.classList.add("ospm_hidden"),u.classList.add("ospm_subvalue_empty")),u.appendChild(d),h=n.createContainer("ospm_texttable_value_container"),h.classList.add("ospm_text_style_"+s.TEXT_STYLE.LABEL6),g=n.createValueField(),n.createMarkupDomTree(this,g,l.value),h.appendChild(g),h.appendChild(n.createValueUnit(l.valueUnit)),0===h.children[0].textContent.length&&0===h.children[1].textContent.length&&(h.classList.add("ospm_hidden"),u.classList.add("ospm_value_empty")),u.appendChild(h),r.isSet(l.display)&&(c(d,l.display),c(h,l.display)),this.detailsContainerDom.appendChild(u);this.values=v,this.dom.dataset.mode=this.values.length>0?"":"hasNoValues",this.notifyInternalValueChange(),o.updateElement(this)},setLabelAsHeader:function(e){o.toggleClassName(this.headerDom,"ospm_texttable_label_as_header",e!==!1),f(this)},setRightIcon:function(e,t,n){this.removeAllRightIcons(),e=C(e),this.addRightIcon(e,t,n)},removeAllRightIcons:function(){o.removeAllChildren(this.rightIconContainerDom),this.rightIcons=[],o.updateElement(this)},addRightIcon:function(e,t,n){var i,a=this.rightIconContainerDom.firstChild;e&&("string"==typeof e&&("callout"!==e&&"drilldown"!==e&&"drilldown_12"!==e&&"drilldown_small"!==e||a||(e=s.ICONS.NEXT_S)),r.isObject(e)?("callout"!==e&&"drilldown"!==e&&"drilldown_12"!==e&&"drilldown_small"!==e||a||(e.name=s.ICONS.NEXT_S),this.rightIcons.push(e)):this.rightIcons.push({name:e,label:t,action:n}),i=b(this,!0,e,t,n),a?this.rightIconContainerDom.insertBefore(i,this.rightIconContainerDom.lastChild):(this.rightmostIconName=e,this.rightIconContainerDom.appendChild(i)),o.updateElement(this))},summingValues:function(){return this.isSummable()?this.values:[]},updateDisplay:function(){w.parent.updateDisplay.call(this),u(this),g(this),f(this),_(this),d(this)},onResize:function(){o.updateElement(this)},afterRenderLayout:function(){o.updateElement(this)},getClassName:function(){return"TextTable"},setBottomMargin:function(t){o.isNBF()?w.parent.setBottomMargin.call(this,t):e.setBottomPadding(this,t)}}),w.proto(t.LabelMixin,t.InfoTextMixin,t.HintMixin,t.ClickMixin,t.HighlightMixin,t.ErrorMixin,t.ValueMixin,t.LeftIconMixin,t.CheckableMixin,t.WrapMixin),w.prototype.setLeftIcon=function(e){e=C(e),t.LeftIconMixin.setLeftIcon.call(this,e),o.updateElement(this)},w.prototype.setLabel=function(e){t.LabelMixin.setLabel.call(this,e),o.updateElement(this)},w.prototype.setValue=function(e){t.ValueMixin.setValue.call(this,e),o.updateElement(this)},w.prototype.setWrapMode=function(e){e!==s.WRAP_MODE.NOWRAP&&(e="wrap"),t.WrapMixin.setWrapMode.call(this,e),o.updateElement(this)},w}),define("tao/ospm/ui/widgets/list/SubList",["tao/ospm/common/Constants","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/ContainerWidget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/OSPMError","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/TextTable","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/SummingFooter","tao/ospm/ui/widgets/TwoColumnRow","tao/ospm/core/DomFactory"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m){function p(e,t){e.dom=m.createContainer("ospm_list_sublist ospm_list_sublist_empty"),e.setId(),t instanceof c&&t.setHeadlineHierarchyDepth(4),t.dom.classList.add("ospm_list_entry_wrapper"),t.dom.classList.add("ospm_list_sublist_header"),e.dom.appendChild(t.dom),e.containerDom=m.createContainer("ospm_list_sublist_entries"),e.containerDom.id=e.getId()+"__container",e.dom.appendChild(e.containerDom)}function f(e){function t(){e.setCollapsed(!e.isCollapsed()),e.notifyCollapseListeners()}e.headerWidget instanceof c?e.headerWidget.setRightmostIcon({icon:{name:"list_collapse_16",label:"Inhalte anzeigen/verbergen"},action:t}):(e.headerWidget.setRightIcon({name:"list_collapse",label:"Inhalte anzeigen/verbergen"}),e.headerWidget.addClickListener(t)),e.headerWidgetClickable=e.headerWidget.dom.querySelector(".ospm_clickable"),e.headerWidgetClickable&&(e.headerWidgetClickable.setAttribute("role","button"),e.headerWidgetClickable.setAttribute("aria-label","Inhalte anzeigen/verbergen"),e.headerWidgetClickable.setAttribute("aria-expanded","false"),e.headerWidgetClickable.setAttribute("aria-controls",e.containerDom.id))}function g(e){r.toggleClassName(e.dom,v,r.isMobile()&&e.notMobile)}var _,v="ospm_list_not_mobile",b="ospm_list_style_";return _=n.subclass({stepData:null,headerWidget:null,listStyle:e.LIST_STYLES.DEFAULT,notMobile:!1,constructor:function(e,t){var n;if(e=e||{},this.stepData=t,this.elements=[],n=e.headerWidget,!n)throw new o("Bei der Erzeugung einer Sublist muss der Parameter headerWidget gesetzt sein");if(r.verifyNullParent(n),this.headerWidget=n,p(this,n),e.collapsible){if(!(n instanceof s||n instanceof a||n instanceof c))throw new o("collapsible darf nur für Header-Widgets vom Typ Header, Text oder TextTable gesetzt werden");f(this)}n.setParent(this),this.initializeFields(e)},initializeFields:function(e){_.parent.initializeFields.call(this,e),this.setCollapsed(e.collapsed),e.collapseListener&&this.setCollapseListener(e.collapseListener),e.notMobile&&this.setNotMobile(e.notMobile),this.setListStyle(e.listStyle)},addElement:function(e,t){_.parent.addElement.call(this,e,t),e.dom.classList.add("ospm_list_entry_wrapper"),this.dom.classList.remove("ospm_list_sublist_empty")},removeElement:function(e){var n=_.parent.removeElement.call(this,e);return 0===this.elements.length&&this.dom.classList.add("ospm_list_sublist_empty"),n instanceof t&&n.dom.classList.remove("ospm_list_entry_wrapper"),n},setCollapsed:function(e){e?(this.dom.dataset.mode="hide",this.containerDom.classList.add("ospm_hidden")):(this.dom.dataset.mode="show",this.containerDom.classList.remove("ospm_hidden")),this.headerWidgetClickable&&(e=!!e,this.headerWidgetClickable.setAttribute("aria-expanded",(!e).toString())),r.updateElement(this),r.updateMinHeight(this)},isCollapsed:function(){return"hide"===this.dom.dataset.mode},setListStyle:function(t){var n;this.dom.classList.remove(b+this.listStyle),n=Object.keys(e.LIST_STYLES).some(function(n){return e.LIST_STYLES[n]===t}),n||(t=e.LIST_STYLES.DEFAULT),t!==e.LIST_STYLES.DEFAULT&&this.dom.classList.add(b+t),this.listStyle=t},getListStyle:function(){return this.listStyle},getHeaderWidget:function(){return this.headerWidget},summingValues:function(){var e=[];return this.isSummable()&&(Array.prototype.push.apply(e,this.headerWidget.summingValues()),Array.prototype.push.apply(e,_.parent.summingValues.call(this))),e},setNotMobile:function(e){this.notMobile=e,g(this)},isNotMobile:function(){return this.dom.classList.contains(v)},onResize:function(){g(this)},getChildren:function(){var e=n.parent.getChildren.call(this);return e.push(this.headerWidget),e.concat(this.elements)},getChildPosition:function(e){return e===this.headerWidget?"header":_.parent.getChildPosition.call(this,e)},checkForValidElement:function(e){return!(e instanceof t)||e instanceof l||e instanceof u||e instanceof c||e instanceof d||e instanceof h?"Ungültiger Widget-Typ als Element einer SubList":null},getClassName:function(){return"SubList"}}),_.proto(i.ChangeMixin,i.CollapseMixin),_.prototype.wantsLargeHeight=function(){return this.headerWidget.wantsLargeHeight&&this.headerWidget.wantsLargeHeight()},_}),define("tao/ospm/ui/widgets/Chart",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/SvgFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/ui/ColorUtils"],function(e,t,n,i,o,r,s,a,l){function c(e){var t=n.createContainer("ospm_chart ospm_chart_mode_"+rt.toLowerCase());return e.svgDom=i.createSvg({width:"100%",height:"288px"}),t.appendChild(e.svgDom),e.keyLabelsContainerDom=n.createContainer("ospm_chart_keys_container"),e.parameter.keysVisible||e.keyLabelsContainerDom.classList.add("ospm_hidden"),t.appendChild(e.keyLabelsContainerDom),e.parameter.legend&&(e.legendDom=p(e.parameter.legend),t.appendChild(e.legendDom)),t}function u(e){return o.isRendered(e)&&!e.isHidden()&&null!==e.dom.offsetParent}function d(e){var t=o.isMobile(),n=e.parameter.height===a.SIZE.LARGE,i=e.parameter.height===a.SIZE.SMALL;e.redrawSvg=!1,u(e)&&(e.dom.classList.remove("ospm_height_small"),e.dom.classList.remove("ospm_height_large"),i?e.dom.classList.add("ospm_height_small"):n&&e.dom.classList.add("ospm_height_large"),e.svgWidth=e.dom.offsetWidth,t?e.svgHeight=n?260:200:(e.svgHeight=288,i?e.svgHeight=240:n&&(e.svgHeight=400)),e.svgDom.setAttribute("height",e.svgHeight+"px"),e.svgPoints&&(e.svgDom.removeChild(e.svgPoints),e.svgPoints=null),e.svgChartLine&&(e.svgDom.removeChild(e.svgChartLine),e.svgChartLine=null),e.svgSurface&&(e.svgDom.removeChild(e.svgSurface),e.svgSurface=null),e.svgLabels&&(e.svgDom.removeChild(e.svgLabels),e.svgLabels=null),e.svgMarks&&(e.svgDom.removeChild(e.svgMarks),e.svgMarks=null),e.keyLabelsDom&&(e.keyLabelsContainerDom.removeChild(e.keyLabelsDom),e.keyLabelsDom=null),"diagram"===e.parameter.mode?h(e,t):m(e,t),e.registerTooltipEvents(e.svgDom))}function h(e,t){return e.keyLabelsDom=M(e,t),e.keyLabelsContainerDom.appendChild(e.keyLabelsDom),f(e,e.svgDom,e.parameter,e.svgWidth,e.svgHeight,t),e.redrawSvg?void d(e):(e.svgSurface&&(e.svgDom.removeChild(e.svgSurface),e.svgSurface=null),e.svgSurface=x(e),e.svgDom.appendChild(e.svgSurface),e.svgPoints&&(e.svgDom.removeChild(e.svgPoints),e.svgPoints=null),e.svgPoints=I(e),void e.svgDom.appendChild(e.svgPoints))}function m(e,t){return f(e,e.svgDom,e.parameter,e.svgWidth,e.svgHeight,t),e.redrawSvg?void d(e):(e.svgSurface=A(e),e.svgDom.appendChild(e.svgSurface),e.svgChartLine=O(e),e.svgDom.appendChild(e.svgChartLine),v(e,e.svgDom,e.parameter,e.svgWidth,e.svgHeight,t),e.svgPoints=b(e),e.svgDom.appendChild(e.svgPoints),e.keyLabelsDom=N(e,t),void e.keyLabelsContainerDom.appendChild(e.keyLabelsDom))}function p(e){var t,i,o,r=n.createContainer("legend");for(t=0;t<e.length;t++)i=n.createContainer("legend_circle legend_shape_"+(e[t].shape?e[t].shape:"point")),i.style.backgroundColor=e[t].shape&&"ring"===e[t].shape?"transparent":l.parseColor(e[t].color),i.style.borderColor=l.parseColor(e[t].color),o=n.createInlineContainer("legend_label"),o.appendChild(i),o.innerHTML+=e[t].label,r.appendChild(o);return r}function f(e,t,n,o,r,s){var a,c,d,h,m,p,f=i.createContainer({"class":"marks_lines"}),g=r-2*ct,_=H(n.values,n.min),v=U(n.values,n.max),b={},y=[],C=[];if(n.marks&&n.marks.length&&(_=Math.min(Z(n.marks),_),v=Math.max(J(n.marks),v)),e.svgMarks&&(t.removeChild(e.svgMarks),e.svgMarks=null),t.appendChild(f),e.svgMarks=f,n.marks&&n.marks.length){for(a=0;a<n.marks.length;a++)if(b={},c=n.marks[a].color?"stroke: "+(n.marks[a].color?l.parseColor(n.marks[a].color):nt)+";fill: white;":"",n.marks[a].highlighted===!0&&(c+="stroke-width: 2; stroke: "+it+";",b.style="fill: "+it+";"),d=g-g*((parseFloat(n.marks[a].value)-_)/(v-_)),d+=ct,s)f.appendChild(i.createLine(0,d,o,d,{style:c}));else{if(b["text-anchor"]="end",h=i.createText(n.marks[a].label,e.flexibleMarkWidth?ht:ut-dt,d+5,b),f.appendChild(h),C.push(h),u(e)){if(m=h.getBBox(),m.width>mt&&!e.flexibleMarkWidth)return e.flexibleMarkWidth=!0,void(e.redrawSvg=!0);if(m.width<=mt&&e.flexibleMarkWidth===!0)return e.flexibleMarkWidth=!1,void(e.redrawSvg=!0);m.width>e.theLongestMarkLabelWidth&&(e.theLongestMarkLabelWidth=m.width)}p=i.createLine(e.flexibleMarkWidth?ht+e.theLongestMarkLabelWidth+dt:ut,d,o,d,{style:c}),y.push(p),f.appendChild(p)}!s&&e.flexibleMarkWidth&&(C.forEach(function(t){t.setAttribute("x",ht+e.theLongestMarkLabelWidth)}),y.forEach(function(t){t.setAttribute("x1",ht+e.theLongestMarkLabelWidth+dt)}))}}function g(e){var t,n=0;if(e.parameter.marks&&e.parameter.marks.length)for(t=0;t<e.parameter.marks.length;t++)r.isSet(e.parameter.marks[t].highlighted)&&e.parameter.marks[t].highlighted===!0&&n++;if(1!==n)throw new s("For the diagram mode only one mark should be highlighted.")}function _(e){return"diagram"===e.parameter.mode}function v(e,t,n,r,s,a){var l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L=i.createContainer({"class":"labels ospm_text_style_23"});if(t.appendChild(L),n.values)for(c=s-2*ct,f=H(n.values,n.min),p=U(n.values,n.max),g=n.clipping===!0?n.values.length-2:n.values.length,e.hasLinearXAxis?u=k(r,g):(E=e.parameter.clipping?e.parameter.values.slice(1,e.parameter.values.length-1):e.parameter.values,C=H(E,e.parameter.min,"x"),w=U(E,e.parameter.max,"x")),l=n.clipping===!0?1:0,n.marks&&n.marks.length&&(f=Math.min(Z(n.marks),f),p=Math.max(J(n.marks),p)),b=l,y=n.values.length-l,d=b;y>d;d++)a&&d>b&&y-1>d||!n.values[d].label||(_=e.hasLinearXAxis?lt+u*(d-l):F(e.parameter.values[d],C,w,r),o.isNBF()||(_+=17),v=B(e.parameter.values[d],f,p,c,5),o.isNBF()&&(v+="bottom"==n.values[d].labelPosition?12:-12),h="right",n.values[d].shape&&"point"===n.values[d].shape&&(h+=" point"),o.isNBF()&&(h="center"),m=i.createText(n.values[d].label,_,v,{"class":h}),L.appendChild(m),_+m.getBoundingClientRect().width>r&&(L.removeChild(m),_-=25,o.isNBF()&&(_+=15,d==b&&(_+=20),v=B(e.parameter.values[d],f,p,c,5)),h="left",n.values[d].shape&&"point"===n.values[d].shape&&(h+=" point"),m=i.createText(n.values[d].label,_,v,{"class":h}),L.appendChild(m)));e.svgLabels=L}function b(e){var t,n,r,s,a,l,c,u,d,h,m,p=i.createContainer({"class":"points"}),f=e.svgWidth,g=e.svgHeight,_=[];if(e.parameter.values)for(n=g-2*ct,l=H(e.parameter.values,e.parameter.min),a=U(e.parameter.values,e.parameter.max),d=e.parameter.clipping===!0?e.parameter.values.length-2:e.parameter.values.length,e.hasLinearXAxis?r=k(f,d):(_=e.parameter.clipping?e.parameter.values.slice(1,e.parameter.values.length-1):e.parameter.values,c=H(_,e.parameter.min,"x"),u=U(_,e.parameter.max,"x")),t=e.parameter.clipping===!0?1:0,e.parameter.marks&&e.parameter.marks.length&&(l=Math.min(Z(e.parameter.marks),l),a=Math.max(J(e.parameter.marks),a)),s=t;s<e.parameter.values.length-t;s++)h=e.hasLinearXAxis?1===e.parameter.values.length?lt+r:lt+r*(s-t):F(e.parameter.values[s],c,u,f),m=B(e.parameter.values[s],l,a,n),p.appendChild(i.createCircle(h,m,o.isNBF()?4:5,{style:"fill: "+E(e.parameter.values[s])+";stroke-width: 0;"})),p.appendChild(i.createCircle(h,m,o.isNBF()?2:3,y({style:"fill: "+L(e.parameter.values[s])+";stroke-width: 0;","data-tooltip":e.parameter.values[s].tooltip?e.parameter.values[s].tooltip:""},h,m)));return p}function y(e,t,n){return e["data-tooltip-x"]=t+20,e["data-tooltip-y"]=n-15,e}function C(e){return e.shape?e.shape:e.label?"ring":null}function w(e){return e.color?l.parseColor(e.color):nt}function E(e){return"ring"===C(e)?w(e):tt}function L(e){return"ring"===C(e)?tt:w(e)}function S(e){var t,n={};for(t=0;t<e.length;t++)r.isSet(n[e[t].key])||(n[e[t].key]=[]),n[e[t].key].push(e[t]);return n}function D(e){var t,n,i=[];return e.forEach(function(e){void 0!==i[i.length-1]&&(n=i[i.length-1].key),e.value.x!==t?i.push(e):n!==e.key&&(i[i.length-1].key+=" / "+e.key),t=e.value.x}),i}function T(e){var t;if(e)for(t=0;t<e.length;t++)if(r.isSet(e[t].highlighted)&&e[t].highlighted===!0)return parseFloat(e[t].value);return 0}function I(e){var t,n,o,s,a,l,c,u,d,h,m,p,f,g,_,v,b,C,D=i.createContainer({"class":"points"}),I=e.svgWidth,x=e.svgHeight,A=S(e.parameter.values);if(e.parameter.diagramLabels&&A)for(o=x-2*ct,c=H(e.parameter.values,e.parameter.min),l=U(e.parameter.values,e.parameter.max),e.parameter.marks&&e.parameter.marks.length&&(c=Math.min(Z(e.parameter.marks),c),l=Math.max(J(e.parameter.marks),l)),h=e.parameter.clipping===!0?e.parameter.diagramLabels.length-2:e.parameter.diagramLabels.length,e.hasLinearXAxis?s=k(I,h):(_=e.parameter.clipping?e.parameter.values.slice(1,e.parameter.values.length-1):e.parameter.values,u=H(_,e.parameter.min,"x"),d=U(_,e.parameter.max,"x")),t=e.parameter.clipping===!0?1:0,f=o-o*((T(e.parameter.marks)-c)/(l-c)),f+=ct,g=e.flexibleMarkWidth?ht+e.theLongestMarkLabelWidth+dt:ut,a=t;a<e.parameter.diagramLabels.length-t;a++)if(r.isSet(A[e.parameter.diagramLabels[a].key]))for(C=A[e.parameter.diagramLabels[a].key].length,b=0;C>b;b++)v=A[e.parameter.diagramLabels[a].key][b],m=e.hasLinearXAxis?1===e.parameter.diagramLabels.length?lt+s:lt+s*(a-t):F(v,u,d,I),p=B(v,c,l,o),n=w(v),D.appendChild(i.createLine(m,p,g,p,{style:"stroke: "+n+";stroke-width: 1; stroke-linecap: butt; stroke-dasharray: 2,2;"})),D.appendChild(i.createLine(m,p,m,f,{style:"stroke: "+n+";stroke-width: 1; stroke-linecap: butt; stroke-dasharray: 2,2;"})),D.appendChild(i.createCircle(m,p,5,{style:"fill: "+E(v)+";stroke-width: 0;"})),D.appendChild(i.createCircle(m,p,3,y({style:"fill: "+L(v)+";stroke-width: 0;","data-tooltip":v.tooltip?v.tooltip:""},m,p)));return D}function k(e,t){return 1===t?parseInt((e-2*lt)/2,10):parseInt((e-2*lt)/(t-1),10)}function x(e){var t,n,o,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y=i.createContainer({"class":"diagram-surface"}),C=S(e.parameter.values);if(e.parameter.diagramLabels&&C)for(n=e.svgHeight-2*ct,c=H(e.parameter.values,e.parameter.min),l=U(e.parameter.values,e.parameter.max),e.parameter.marks&&e.parameter.marks.length&&(c=Math.min(Z(e.parameter.marks),c),l=Math.max(J(e.parameter.marks),l)),u=e.parameter.clipping===!0?e.parameter.diagramLabels.length-2:e.parameter.diagramLabels.length,e.hasLinearXAxis?o=k(e.svgWidth,u):(_=e.parameter.clipping?e.parameter.values.slice(1,e.parameter.values.length-1):e.parameter.values,v=H(_,e.parameter.min,"x"),b=U(_,e.parameter.max,"x")),t=e.parameter.clipping===!0?1:0,p=n-n*((T(e.parameter.marks)-c)/(l-c)),p+=ct,f=e.flexibleMarkWidth?ht+e.theLongestMarkLabelWidth+dt:ut,s=t;s<e.parameter.diagramLabels.length-t;s++)if(r.isSet(C[e.parameter.diagramLabels[s].key]))for(a=0;a<C[e.parameter.diagramLabels[s].key].length;a++)m=C[e.parameter.diagramLabels[s].key][a],d=e.hasLinearXAxis?1===e.parameter.diagramLabels.length?lt+o:lt+o*(s-t):F(m,v,b,e.svgWidth),h=B(m,c,l,n),g="M"+f+","+p+" L"+d+","+p+" L"+d+","+h+" L"+f+","+h+" Z",y.appendChild(i.createPath(g,{style:"fill: "+w(m)+";opacity: "+st}));return y}function A(e){var t,n,o,r,s,a,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E="surface"+(e.parameter.clipping===!0?" clipping":""),L=i.createContainer({"class":E}),S=e.svgWidth,D=e.svgHeight,T=D-2*ct;if(e.parameter.values){for(a=H(e.parameter.values,e.parameter.min),s=U(e.parameter.values,e.parameter.max),c=e.parameter.clipping===!0?e.parameter.values.length-2:e.parameter.values.length,e.hasLinearXAxis?n=k(S,c):(y=e.parameter.clipping?e.parameter.values.slice(1,e.parameter.values.length-1):e.parameter.values,C=H(y,e.parameter.min,"x"),w=U(y,e.parameter.max,"x")),t=e.parameter.clipping===!0?1:0,e.parameter.marks&&e.parameter.marks.length&&(a=Math.min(Z(e.parameter.marks),a),s=Math.max(J(e.parameter.marks),s)),b=s!==a?T-T*((0-a)/(s-a)):T/2,b+=ct,v=b,g=t?0:lt,m="M"+g+","+v,o=0;o<e.parameter.values.length;o++)f=X(e.parameter.values[o]),d=g,h=v,e.hasLinearXAxis?g=lt+n*(o-t):(g=F(e.parameter.values[o],C,w,S),n=g-d),v=B(e.parameter.values[o],a,s,T),o>0&&Q(f)!==Q(r)&&(_=d+Math.abs(h-b)*n/(Math.abs(h-b)+Math.abs(v-b)),m+=" L"+_+","+b+" Z",u=i.createPath(m,{style:p}),L.appendChild(u),m="M"+_+","+b),m+=" L"+g+","+v,p=e.parameter.fillColor&&f>=0?"fill: "+l.parseColor(e.parameter.fillColor)+";":e.parameter.fillColorNegative&&0>f?"fill: "+l.parseColor(e.parameter.fillColorNegative)+";":"fill: transparent;",r=f;g=S-lt+n*t,m+=" L"+g+","+b+" Z",u=i.createPath(m,{style:p}),L.appendChild(u)}return L}function O(e){var t,n,o,r,s,a,c,u,d,h,m,p,f,g="chart-line"+($(e.parameter.values)?" point":""),_=i.createContainer({"class":g}),v=e.svgHeight,b=e.svgWidth,y=v-2*ct,C=null,w=0,E=0;if(e.parameter.values)for(s=H(e.parameter.values,e.parameter.min),r=U(e.parameter.values,e.parameter.max),u=e.parameter.clipping===!0?e.parameter.values.length-2:e.parameter.values.length,e.hasLinearXAxis?n=k(b,u):(d=e.parameter.clipping?e.parameter.values.slice(1,e.parameter.values.length-1):e.parameter.values,c=H(d,e.parameter.min,"x"),a=U(d,e.parameter.max,"x")),t=e.parameter.clipping===!0?1:0,e.parameter.marks&&e.parameter.marks.length&&(s=Math.min(Z(e.parameter.marks),s),r=Math.max(J(e.parameter.marks),r)),f=y-y*((0-s)/(r-s)),m=lt,p=f+ct,o=0;o<e.parameter.values.length;o++)h=parseFloat(X(e.parameter.values[o])),m=e.hasLinearXAxis?lt+n*(o-t):F(e.parameter.values[o],c,a,b),p=B(e.parameter.values[o],s,r,y),C=e.parameter.lineColor&&h>=0?"stroke: "+l.parseColor(e.parameter.lineColor)+";":e.parameter.lineColorNegative&&0>h?"stroke: "+l.parseColor(e.parameter.lineColorNegative)+";":"stroke: "+nt+";",o>0&&_.appendChild(i.createLine(w,E,m,p,{style:C})),w=m,E=p;return _}function N(e,t){var i=n.createContainer("labels x_labels");return P(e,i,e.parameter.values,t),i}function M(e,t){var i=n.createContainer("labels x_labels");return P(e,i,e.parameter.diagramLabels,t),i}function P(e,t,i,o){var s,a,l,c,u,d,h,m,p,f,g,_=[],v=!1;if(i=z(i),i&&e.parameter.keysVisible!==!1)for(s=e.parameter.clipping===!0?1:0,l=s,c=i.length-s,!e.hasLinearXAxis&&!o&&c-s-1>0&&i.length>2?(_=e.parameter.clipping?e.parameter.values.slice(1,e.parameter.values.length-1):r.deepCopy(e.parameter.values),p=H(_,e.parameter.min,"x"),f=U(_,e.parameter.max,"x"),i=D(_),c=i.length,l=0,t.classList.add("ospm_dynamic_x_axis"),v=!0):u=c-s-1===0||1===i.length?100/(o?2:1):100/(o?2:c-s-1),a=l;c>a;a++)if(!(o&&a>l&&c-1>a)){if(h=n.createContainer("ospm_chart_key_container"),1===i.length)h.classList.add("ospm_chart_key_container_with_one_value"),m=100;else if(v){if(a<i.length-2?(g=R(i,e.svgWidth,p,f,a,a+1),0===a&&(g-=20)):a===i.length-2&&(g=R(i,e.svgWidth,p,f,a,a+1)/2,g+=20),0===g)continue;m=g+"px",a===i.length-2&&(g-=20)}else m=o||a!==l&&a!==c-1?u:u/2,m+="%";d=n.createContainer("ospm_chart_key",i[a].key),h.appendChild(d),h.style.width=m,t.appendChild(h)}}function R(e,t,n,i,o,r){var s,a,l;return a=X(e[o],"x"),l=X(e[r],"x"),s=(t-2*lt)/(i-n),Math.round((l-n)*s)-Math.round((a-n)*s)}function F(e,t,n,i){var o,r=X(e,"x"),s=(i-2*lt)/(n-t);return o=Math.round((r-t)*s),o+=lt}function B(e,t,n,i,o){var r;return o||(o=0),r=n!==t?o+i-i*((X(e,"y")-t)/(n-t)):o+i/2,r+=ct}function z(e){var t=[];return e.forEach(function(e){""!==e.key&&t.push(e)}),t}function V(e){var t,n=[],i=[];for(t=0;t<e.length;t++)e[t].key&&(i[e[t].key]=e[t].key);return Object.keys(i).forEach(function(e){n.push({key:e})}),n}function H(e,t,n){return void 0!==t&&"x"!==n?Math.min(t,Z(e)):Z(e,n)}function U(e,t,n){return void 0!==t&&"x"!==n?Math.max(t,J(e)):J(e,n)}function W(e,t){if(!t.values||!r.isArray(t.values)||t.values.length<1)throw new s("You need to provide an array of values.");G(e,t.values),t.marks&&(j(t.marks),t.marks.length||(t.marks=null))}function j(e){var t;if(e){if(!r.isArray(e))throw new s("Invalid marks.");for(t=0;t<e.length;t++)if(!Y(e[t]))throw new s("Invalid marks.")}}function G(e,t){var n;for(n=0;n<t.length;n++)if(!K(e,t[n]))throw new s("Invalid values.")}function q(e){if("number"!=typeof e)throw new s("Invalid parameter.")}function Y(e){return e.label&&void 0!==e.value&&r.isString(e.label)?r.isNumeric(e.value):!1}function K(e,t){if(void 0===t.key||void 0===t.value)return!1;if(!r.isString(t.key))return!1;if("object"==typeof t.value){if(null===e.hasLinearXAxis)e.hasLinearXAxis=!1;else if(e.hasLinearXAxis===!0)return!1;return r.isNumeric(t.value.x)&&r.isNumeric(t.value.y)}return r.isNumeric(t.value)?(e.hasLinearXAxis=!0,!0):!1}function X(e,t){return"object"==typeof e.value?void 0===t?e.value.y||null:e.value[t]:e.value}function Z(e,t){var n,i,o=X(e[0],t);if(null===o)return null;for(i=0;i<e.length;i++)n=X(e[i],t),o>n&&(o=n);return parseFloat(o)}function J(e,t){var n,i,o=X(e[0],t);if(null===o)return null;for(i=0;i<e.length;i++)n=X(e[i],t),n>o&&(o=n);return parseFloat(o)}function $(e){var t;if(e)for(t=0;t<e.length;t++)if("point"===e[t].shape)return!0;return!1}function Q(e){return+e===e?0===e?0:e>0?1:-1:0/0}var et,tt="white",nt="grey",it="#66686d",ot=["linear","diagram"],rt="linear",st="0.05",at=[a.TEXT_STYLE.LABEL1,a.TEXT_STYLE.LABEL2,a.TEXT_STYLE.LABEL3,a.TEXT_STYLE.LABEL4,a.TEXT_STYLE.LABEL5,a.TEXT_STYLE.LABEL6,a.TEXT_STYLE.SUBLABEL1,a.TEXT_STYLE.SUBLABEL3],lt=o.isMobile()?21:44,ct=44,ut=o.isNBF()?56:96,dt=16,ht=o.isNBF()?0:16,mt=96,pt="ospm_text_style_",ft=a.TEXT_STYLE.LABEL6;return et=e.subclass({stepData:null,dom:null,values:null,flexibleMarkWidth:null,theLongestMarkLabelWidth:0,svgDom:null,parameter:null,svgWidth:null,svgHeight:null,svgPoints:null,svgSurface:null,svgChartLine:null,redrawSvg:!1,keyLabelsDom:null,keyLabelsContainerDom:null,svgLabels:null,svgMarks:null,legendDom:null,legendBorderVisibility:!0,hasLinearXAxis:null,constructor:function(e,t){this.parameter=r.deepCopy(e)||{},this.stepData=t,this.dom=c(this),this.initializeFields(this.parameter)},setMode:function(e){r.isSet(e)&&-1!==ot.indexOf(e)?(this.parameter.mode=e,_(this)&&g(this)):this.parameter.mode=rt,o.replaceClassNameStartingWith(this.dom,"ospm_chart_mode","ospm_chart_mode_"+this.parameter.mode.toLowerCase()),this.setLeftPadding(),d(this)},setDiagramLabels:function(e){this.parameter.diagramLabels=e?e:V(this.getValues()),d(this)},setLegendBorderVisibility:function(e){var t=!!e;t===!0?this.keyLabelsContainerDom.classList.remove("chart_legend_without_border"):this.keyLabelsContainerDom.classList.add("chart_legend_without_border")},setLabelsStyle:function(e){var t;t=-1!==at.indexOf(e)?e:ft,o.replaceClassNameStartingWith(this.keyLabelsContainerDom,pt,t?pt+t:"")},setHeight:function(e){this.parameter.height=e,o.updateElement(this)},setValues:function(e){this.hasLinearXAxis=null,G(this,e),this.parameter.values=e,this.parameter.diagramLabels=this.parameter.diagramLabels.length?this.parameter.diagramLabels:V(e),o.updateElement(this)},getValues:function(){return this.parameter.values},setMin:function(e){var t=Z(this.parameter.values);if(q(e),e>t)throw new s("Der Parameter muss kleiner sein als "+t);this.parameter.min=e,o.updateElement(this)},getMin:function(){return this.parameter.min},setMax:function(e){var t=J(this.parameter.values);if(q(e),t>e)throw new s("Der Parameter muss größer sein als "+t);this.parameter.max=e,o.updateElement(this)},getMax:function(){return this.parameter.max},setLineColor:function(e){this.parameter.lineColor=e,o.updateElement(this)},getLineColor:function(){return this.parameter.lineColor},setLineColorNegative:function(e){this.parameter.lineColorNegative=e,o.updateElement(this)},getLineColorNegative:function(){return this.parameter.lineColorNegative},setFillColor:function(e){this.parameter.fillColor=e,o.updateElement(this)},getFillColor:function(){return this.parameter.fillColor},setFillColorNegative:function(e){this.parameter.fillColorNegative=e,o.updateElement(this)},getFillColorNegative:function(){return this.parameter.fillColorNegative},setMarks:function(e){j(e),this.parameter.marks=e&&e.length?e:null,this.theLongestMarkLabelWidth=0,o.updateElement(this),_(this)&&g(this)},getMarks:function(){return this.parameter.marks?this.parameter.marks:[]},setLegend:function(e){this.legendDom&&this.dom.removeChild(this.legendDom),this.parameter.legend=e,this.legendDom=p(e),this.dom.appendChild(this.legendDom)},getLegend:function(){return this.parameter.legend},setClipping:function(e){this.parameter.clipping=e,o.updateElement(this)},setKeysVisible:function(e){this.parameter.keysVisible=e,o.updateElement(this)},afterRenderLayout:function(){o.updateElement(this)},updateDisplay:function(){this.setLeftPadding(),o.toggleClassName(this.keyLabelsContainerDom,"ospm_hidden",this.parameter.keysVisible===!1),d(this)},onResize:function(){o.updateElement(this)},setLeftPadding:function(){lt=o.isMobile()?21:44},initializeFields:function(e){W(this,e),this.parameter.mode=e.mode?e.mode:rt,void 0!==e.legendBorderVisibility&&this.setLegendBorderVisibility(e.legendBorderVisibility),e.values&&!e.diagramLabels&&(this.parameter.diagramLabels=V(e.values)),e.diagramLabels&&this.setDiagramLabels(e.diagramLabels),this.setLabelsStyle(e.labelsStyle),et.parent.initializeFields.call(this,e)},getClassName:function(){return"Chart"}}),et.proto(t.TooltipMixin),et}),define("tao/ospm/ui/widgets/TwoBarChart",["tao/lib/BigDecimal","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/common/OSPMError","tao/ospm/common/NeoError","tao/ospm/core/UIToolkit","tao/ospm/common/NumberFormatter"],function(e,t,n,i,o,r,s,a){function l(e,t,n,o){var r,a,l,d,h,m,p,g,_;return a=o.positiveValue.add(o.negativeValue),g=o.negativeValue.negate(),a.isZero()?(t.classList.add("ospm_biggest_bar"),t.style.height=f+"px",n.classList.add("ospm_biggest_bar"),void(n.style.height=f+"px")):(e.classList.add("ospm_two_bar_chart_has_difference"),r=i.createContainer("ospm_difference_bar"),a.isPositive()?(m=t,p=n,l=u(g,o.positiveValue),d=o.positiveDifferenceLabel):(m=n,p=t,l=u(o.positiveValue,g),d=o.negativeDifferenceLabel),h=i.createContainer("ospm_difference_label"),_=i.createContainer("ospm_difference_label_text"),_.textContent=s.toHTMLText(d,o.format),h.appendChild(_),_=i.createContainer("ospm_difference_label_value"),_.textContent=o.format.format(a),o.valueUnit&&(_.textContent=_.textContent+" "+s.toHTMLText(o.valueUnit,o.format)),h.appendChild(_),m.appendChild(r),m.appendChild(h),m.classList.add("ospm_biggest_bar"),m.style.height=f+"px",p.style.height=parseFloat(f*l/100)+"px",r.style.paddingTop=(100-l)/2-2.5+"%",r.style.height=100-l+"%",void(s.isNBF()&&c(e,h)))}function c(e,t){setTimeout(function(){e.children&&e.children[0]&&t&&(e.style.height=e.children[0].offsetHeight+t.offsetHeight+"px")},0)}function u(t,n){return n.isZero()?0:parseFloat(t.multiply(new e("100")).divide(n).toString())
}function d(e,t){try{return s.toBigDecimal(e,t)}catch(n){if(n instanceof r)throw new o("Wert kann nicht nach BigDecimal umgewandelt werden",{value:e});throw new o("Unbekannter Fehler bei der Umwandlung nach BigDecimal",{value:e,message:n.message})}}function h(e){var t={};if(s.verifyFormatter(e.format),t.format=e.format?new a(e.format):document.OSPMEnvironment.defaultNumberFormatter,t.positiveValue=d(e.positiveValue||0,t.format),t.negativeValue=d(e.negativeValue||0,t.format),t.valueUnit=e.valueUnit||"",t.positiveDifferenceLabel=e.positiveDifferenceLabel||"",t.negativeDifferenceLabel=e.negativeDifferenceLabel||"",t.positiveValue.isNegative())throw new o("Der positive Wert darf nicht negativ sein",{positiveValue:t.positiveValue.toString()});if(t.negativeValue.isPositive())throw new o("Der negative Wert darf nicht positiv sein",{negativeValue:t.negativeValue.toString()});return t}function m(e,t){var n,o,r,s;return n=i.createContainer("ospm_two_bar_chart ospm_widget"),o=i.createContainer("ospm_two_bar_chart_main"),n.appendChild(o),r=i.createContainer("ospm_bar ospm_positive_bar"),o.appendChild(r),s=i.createContainer("ospm_bar ospm_negative_bar"),o.appendChild(s),l(n,r,s,t),n.appendChild(e.buildErrorDom()),n}var p,f=240;return p=t.subclass({stepData:null,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=m(this,h(e)),this.initializeFields(e)},getClassName:function(){return"TwoBarChart"},setBottomMargin:function(e){s.isNBF()?p.parent.setBottomMargin.call(this,e):t.setBottomPadding(this,e)},onResize:function(){if(s.isNBF()){var e=this.dom,t=e.querySelector(".ospm_difference_label");c(e,t)}}}),p.proto(n.ErrorMixin),p}),define("tao/ospm/ui/widgets/ChartFactory",["tao/lib/BigDecimal","tao/ospm/common/OSPMError","tao/ospm/core/UIToolkit","tao/ospm/common/NumberFormatter"],function(e,t,n,i){function o(t){var n,i,o=e.ZERO,r=e.ZERO;for(n in t)t.hasOwnProperty(n)&&(i=t[n],i.isPositive()?o=o.add(i):r=r.add(i));return{positiveValue:o,negativeValue:r}}function r(e,t){return t.positiveValue.add(t.negativeValue).isPositive()?e.positiveDifferenceLabel:e.negativeDifferenceLabel}function s(e,i){var o,r={};for(o in e)if(Object.prototype.hasOwnProperty.call(e,o))try{r[o]=n.toBigDecimal(e[o],i)}catch(s){throw new t("Wert kann nicht nach BigDecimal umgewandelt werden",{key:o,value:e[o]})}return r}var a;return a={createTwoBarChartList:function(e,a){var l,c,u,d,h;if(!e||!a)throw new t("Invalid parameters for ChartFactory");return n.verifyFormatter(e.format),d=e.format?new i(e.format):document.OSPMEnvironment.defaultNumberFormatter,h=s(e.values,d),c=o(h),u=e.valueUnit,l=a.createList({id:e.id}),l.setHeader(a.createHeader({label:e.title||"",centered:!0})),l.setFooter(a.createSummingFooter({label:r(e,c),autoSumming:!0,format:d,valueUnit:u})),l.addElement(a.createTwoBarChart({enabled:e.enabled,positiveValue:c.positiveValue,negativeValue:c.negativeValue,format:d,valueUnit:u,positiveDifferenceLabel:e.positiveDifferenceLabel,negativeDifferenceLabel:e.negativeDifferenceLabel,topMargin:e.topMargin,bottomMargin:e.bottomMargin})),Object.keys(h).forEach(function(e){Object.prototype.hasOwnProperty.call(h,e)&&l.addElement(a.createText({label:e,value:d.format(h[e]),summable:!0,type:"decimal",valueUnit:u,icon:!1}))}),l}}}),define("tao/ospm/ui/widgets/SubHeader",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Constants","tao/ospm/ui/UIConstants","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/common/OSPMError","tao/ospm/core/EventLog"],function(e,t,n,i,o,r,s,a,l,c){function u(e,t){r.toggleClassName(e.rightContent,"ospm_empty",t)}function d(e){var t,i;return t=s.createContainer("ospm_subheader"),i=s.createContainer("ospm_subheader_content_container"),e.leftContent=s.createContainer("ospm_subheader_content_left"),e.rightContent=s.createContainer("ospm_subheader_content_right"),e.labelDom=e.buildLabelDom(n.TEXT_STYLE.LABEL5),e.leftContent.appendChild(e.labelDom),i.appendChild(e.leftContent),i.appendChild(e.rightContent),t.appendChild(i),t}function h(e,t,o,l){var c,u,d,h=n.TEXT_STYLE.LABEL5,p=32,f=16;return r.isNBF()&&(p=f),c=s.createContainer("ospm_subheader_icon"),c.classList.add("ospm_subheader_icon_right"),t&&("object"==typeof t&&(o=o||t.label,l=l||t.action,t=t.name||t.icon),d=a.createIcon(t,p,!0),d&&d.classList.add(i.RIGHT_ICON_DEFAULT_CLASS),c.appendChild(d)),o&&(u=s.createContainer("ospm_subheader_icon_label",o),u.classList.add("ospm_text_style_"+h),c.insertBefore(u,c.firstChild)),l&&(r.addActionListener(c,function(){m(e,t,o,l)},!1,!0),e.isEnabled()?c.setAttribute("tabindex",i.TABINDEXES.DEFAULT):c.removeAttribute("tabindex"),c.classList.add("ospm_clickable")),c}function m(e,t,n,i){if(e.isEnabled()){c.logUserEvent("IconAction",e,{icon:t,label:n});try{i()}catch(o){throw l.fromError("Fehler in Icon-Action-Funktion",o,{icon:t,label:n})}}}var p=e.subclass({stepData:null,leftContent:null,rightContent:null,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=d(this,e),this.initializeFields(e)},initializeFields:function(e){p.parent.initializeFields.call(this,e),this.setLabel(e.label),this.setRightIcon(e.rightIcon),this.setVerticalAlignment(e.verticalAlignment)},setVerticalAlignment:function(e){e&&this.dom.firstChild.classList.add("ospm_vertical_align_"+e)},setRightIcon:function(e,t,n){var i;this.removeRightIcon(),i=h(this,e,t,n),u(this,!e&&!t),this.rightContent.appendChild(i)},removeRightIcon:function(){r.removeAllChildren(this.rightContent),u(this,!0)},getClassName:function(){return"SubHeader"}});return p.proto(t.LabelMixin),p}),define("tao/ospm/ui/widgets/search/SearchInput",["tao/lib/stapes","tao/ospm/ui/widgets/TextInput","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/IconFactory","tao/ospm/ui/UIConstants","tao/ospm/ui/ValidatorUtils","tao/ospm/common/Toolkit","tao/ospm/common/Constants","tao/ospm/common/OSPMError","tao/ospm/core/EventLog","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/OSPMEnvironment"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(e){i.isNBF()||(i.isMobile()?(e.searchButton.textContent="",e.searchButton.appendChild(o.createIcon("searchinput_search")),w(e),e.toggleAction&&E(e)):(i.removeAllChildren(e.searchButton),e.searchButton.textContent=e.searchButtonLabel,L(e),e.toggleAction&&C(e)))}function p(e,t,n){if("function"==typeof e[t+"Action"])try{u.logUserEvent(t,e),e[t+"Action"](e,n)}catch(i){throw c.fromError("Fehler in "+t+"-Callback von SearchInput",i)}}function f(e){e.resetButton.classList.remove("ospm_visible"),e.resetButton.classList.add("ospm_hidden")}function g(e){e.resetButton.classList.remove("ospm_hidden"),e.resetButton.classList.add("ospm_visible")}function _(e,t){"string"==typeof t?e.errorElement.textContent=t:t.msg&&(e.errorElement.textContent=t.msg)}function v(e,t){b(e,t),""===e.errorElement.textContent?_(e,t):"string"==typeof t?e.errorElement.innerHTML+="<br>"+t:t.msg&&(e.errorElement.innerHTML+="<br>"+t.msg)}function b(e,t){return a.isSet(t)&&""!==t?(e.inputFieldDom.classList.add("ospm_error_input"),void(i.isNBF()&&e.dom.classList.add("ospm_error_input"))):void y(e)}function y(e){e.inputFieldDom.classList.remove("ospm_error_input"),i.isNBF()&&e.dom.classList.remove("ospm_error_input"),e.errorElement.textContent=""}function C(e){e.switchButton||(e.switchButton=n.createButton("ospm_search_icon_button ospm_search_button_rounded_corners"),e.switchButton.setAttribute("aria-label","Erweiterte Suche öffnen"),i.isNBF()||(e.switchButton.style.backgroundColor=h.getWidgetFgColor(),e.switchButton.style.color=h.getWidgetBgColor()),e.switchButton.appendChild(o.createSimpleIcon("open_advanced_search")),e.switchButton.appendChild(o.createSimpleIcon("open_advanced_search_focus")),e.searchButton.classList.remove("ospm_search_button_rounded_corners"),e.searchButton.parentNode.insertBefore(e.switchButton,e.searchButton.nextSibling),e.addEventListenersForSwitchButton())}function w(e){e.switchButton&&(e.switchButton.parentNode.removeChild(e.switchButton),e.switchButton=null,e.searchButton.classList.add("ospm_search_button_rounded_corners"))}function E(e){e.switchButton=n.createContainer("ospm_search_mobile_switch_button","Erweiterte Suche"),e.mobileSwitchButtonContainer.appendChild(e.switchButton),e.addEventListenersForSwitchButton()}function L(e){e.switchButton&&(e.switchButton.parentNode.removeChild(e.switchButton),e.switchButton=null)}function S(e){i.addEnterKeyListener(e.inputFieldDom,function(){var t=e.inputFieldDom.value+i.getKeyFromKeyPressEvent(event);""===t?f(e):g(e)}),e.inputFieldDom.addEventListener("blur",function(t){""===t.target.value&&e.reset()},!0)}function D(e,t){window.isCordova&&e.inputFieldDom.blur(),i.startNewE2ETransaction(t),p(e,"search")}function T(e){var t,n;n=i.createKeyEventListener(function(t){var n;e.isEnabled()&&(n=i.getEventCode(t),n===l.KEYCODES.ENTER||n===l.KEYCODES.SPACE&&t.target===e.searchButton?t.stopPropagation():n===l.KEYCODES.ESCAPE&&(t.stopPropagation(),t.preventDefault(),e.reset()),window.isCordova&&t.target.ownerDocument.defaultView.focus())}),t=i.createKeyEventListener(function(t){var n;e.isEnabled()&&(n=i.getEventCode(t),n===l.KEYCODES.ENTER?(t.stopPropagation(),D(e,e.inputFieldDom)):n===l.KEYCODES.SPACE&&t.target===e.searchButton&&(t.stopPropagation(),D(e,e.inputFieldDom)))}),e.inputFieldDom.addEventListener("keydown",n,!0),e.inputFieldDom.addEventListener("keyup",t,!0),e.searchButton.addEventListener("keydown",n,!0),e.searchButton.addEventListener("keyup",t,!0),i.addClickListener(e.searchButton,function(){e.isEnabled()&&D(e,e.searchButton)},!1,!0)}function I(e){var t;void 0!==e.resetButton&&(t=function(){e.isEnabled()&&(e.reset(),e.inputFieldDom.focus())},i.addClickListener(e.resetButton,t))}function k(e){var t,n,o=72,r=36,s=40;i.isNBF()&&e.contentDom&&e.labelDom&&(n=Number(e.labelDom.getBoundingClientRect().height),e.dom.classList.contains("ospm_multiline_label")&&s>n&&e.dom.classList.remove("ospm_multiline_label"),setTimeout(function(){n=Number(e.labelDom.getBoundingClientRect().height),n>=s&&(e.dom.classList.add("ospm_multiline_label"),setTimeout(function(){t=x(e),e.contentDom.querySelector(".ospm_horizontal_flex_container").style.height=t+o+"px",e.inputFieldDom.style.paddingTop=r+t+"px"},100))},100))}function x(e){var t,n=20,i=0;return t=Number(e.labelDom.getBoundingClientRect().height),i=t-n}var A,O="Suchen";return A=t.subclass({stepData:null,contentDom:null,inputFieldDom:null,labelDom:null,errorElement:null,searchButton:null,searchButtonLabel:null,resetButton:null,switchButton:null,mobileSwitchButtonContainer:null,searchAction:null,toggleAction:null,resetAction:null,constructor:function(e,t){var n=e||{};this.stepData=t,this.dom=this.buildDom(n),this.initializeFields(n),this.addEventListeners(),n.toggleAction&&m(this)},setValue:function(e){var t=e||"";this.inputFieldDom.value=t,""===t?f(this):g(this)},getValue:function(){return this.inputFieldDom.value},setLabel:function(e){i.isNBF()?(this.labelDom.innerText=e,k(this)):this.inputFieldDom.placeholder=e},setButtonLabel:function(e){this.searchButton.textContent=e,i.isNBF()&&this.searchButton.appendChild(o.createSimpleIcon(l.ICONS.MAGNIFIER_S))},setSearchAction:function(e){this.searchAction=e},setResetAction:function(e){this.resetAction=e},setToggleAction:function(e){this.toggleAction=e?e:null,this.toggleAction?i.isMobile()?E(this):C(this):i.isMobile()?L(this):w(this)},reset:function(){this.inputFieldDom.value="",f(this),p(this,"reset"),this.notifyChangeListeners()},setError:function(e){y(this),a.isSet(e)&&""!==e&&d.ErrorMixin.setError.call(this,e)},addError:function(e){a.isSet(e)&&""!==e&&(v(this,e),d.ErrorMixin.addError.call(this,e))},hasError:function(){return this.inputFieldDom.classList.contains("ospm_error_input")},setPasswordEntry:function(){},addEventListeners:function(){this.addEventListenersForSwitchButton(),T(this),S(this),I(this),A.parent.addEventListeners.call(this)},addEventListenersForSwitchButton:function(){var e;this.switchButton&&(e=function(){this.isEnabled()&&p(this,"toggle")}.bind(this),i.addActionListener(this.switchButton,function(){e()},!1,!0))},initializeFields:function(e){t.parent.initializeFields.call(this,e),this.searchAction=e.searchAction||null,this.setToggleAction(e.toggleAction),this.resetAction=e.resetAction||null,this.valuePlaceholder=e.label||null,this.searchButtonLabel=e.buttonLabel||O,this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage||"Bitte geben Sie einen Text ein."),this.setDataType(e.dataType),this.setTabIndex(e.tabIndex),e.changeListener&&this.setChangeListener(e.changeListener),this.setAutoCompleteSelectionListener(e.autoCompleteSelectionListener),this.setMaximumChars(e.maximumChars)},buildDom:function(e){var t,r,s;return this.contentDom=n.createContainer("ospm_search ospm_search_container ospm_widget ospm_input_empty"),t=n.createContainer("ospm_horizontal_flex_container"),i.isNBF()?(r=n.createContainer("ospm_big_input_container_v2"),this.inputFieldDom=n.createBigInput("searchInput","","ospm_search_input"),this.inputFieldDom.setAttribute("spellcheck",void 0===e.spellcheck?!0:e.spellcheck),r.appendChild(this.inputFieldDom),this.labelDom=n.createSpanLabel(e.label||""),r.appendChild(this.labelDom),t.appendChild(r)):(this.inputFieldDom=n.createBigInput("searchInput",e.label||"","ospm_search_input"),this.inputFieldDom.setAttribute("spellcheck",void 0===e.spellcheck?!0:e.spellcheck),t.appendChild(this.inputFieldDom)),this.inputFieldDom.addEventListener("blur",function(){this.inputFieldDom.value?this.contentDom.classList.toggle("ospm_input_empty",!1):this.contentDom.classList.toggle("ospm_input_empty",!0)}.bind(this)),this.resetButton=n.createLink("ospm_search_reset_input ospm_hidden"),t.appendChild(this.resetButton),this.searchButton=n.createButton("ospm_search_button ospm_search_button_rounded_corners",e.buttonLabel||O),i.isNBF()?(this.searchButton.appendChild(o.createSimpleIcon(l.ICONS.MAGNIFIER_S)),this.searchButton.appendChild(o.createSimpleIcon(l.ICONS.LOCK_S))):(this.searchButton.style.backgroundColor=h.getWidgetFgColor(),this.searchButton.style.color=h.getWidgetBgColor()),t.appendChild(this.searchButton),this.contentDom.appendChild(t),s=n.createContainer("ospm_error_message"),i.isNBF()?(this.errorElement=n.createInlineContainer("",e.error),s.appendChild(o.createSimpleIcon(l.ICONS.WARNING_FILLED_S)),s.appendChild(this.errorElement)):this.errorElement=s,a.isSet(e.error)&&"string"==typeof e.error&&(this.inputFieldDom.classList.add("ospm_error_input"),i.isNBF()&&this.contentDom.classList.add("ospm_error_input"),this.errorElement.textContent=e.error),this.mobileSwitchButtonContainer=n.createContainer("ospm_search_mobile_switch_button_container"),this.contentDom.appendChild(s),this.contentDom.appendChild(this.mobileSwitchButtonContainer),this.contentDom},updateDisplay:function(){t.parent.updateDisplay.call(this),this.inputFieldDom&&(this.isEnabled()?(this.inputFieldDom.removeAttribute("disabled"),this.searchButton.removeAttribute("disabled"),this.switchButton&&this.switchButton.removeAttribute("disabled")):(this.inputFieldDom.setAttribute("disabled","true"),this.searchButton.setAttribute("disabled","true"),this.switchButton&&this.switchButton.setAttribute("disabled","true")))},getClassName:function(){return"SearchInput"},focus:function(){A.parent.focus.call(this),i.focusElement(this,this.inputFieldDom)},removeFocus:function(){this.inputFieldDom&&this.inputFieldDom.blur(),t.parent.removeFocus.call(this)},afterRenderLayout:function(){k(this)},switchToFormLayout:function(){},onResize:function(){m(this),k(this)},setInputValue:function(e){this.inputFieldDom.value=e,this.onInputChanged()},getAutoCompleteShowOptions:function(e){var t;return i.isNBF()?t={autoFocused:!1,alignDom:this.dom.children.item(0)}:(t={autoFocused:!1,alignDom:this.inputFieldDom,position:{alignDom:["top",l.HORIZONTAL_ALIGNMENT.LEFT],alignAtDom:["top",l.HORIZONTAL_ALIGNMENT.LEFT]},vOffset:a.isNumber(e)?e+40:40,hOffset:-16},i.isMobile()&&(t.position.strict=!0)),t}}),A.proto({setHint:function(){},isEmpty:function(){return this.getValue().length<1},getMandatoryValueEmptyError:function(){var e;return this.isEmpty&&this.isMandatory()&&(s.onValidate(this),this.isEmpty()&&(e=this.getMandatoryMessage())),e}}),A.proto(d.InputStorageMixin),A}),define("tao/ospm/ui/widgets/search/AdvancedSearchInput",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/TextInput","tao/ospm/ui/widgets/TwoColumnRow","tao/ospm/ui/IconFactory","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/common/Constants","tao/ospm/core/EventLog","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/OSPMEnvironment"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e){var t;0!==Object.keys(e.elements).length&&(r.isNBF()||(t=e.elements[Object.keys(e.elements)[0]],e.searchButton.parentNode.removeChild(e.searchButton),r.isMobile()?(e.searchButton.textContent="",e.searchButton.appendChild(i.createIcon("searchinput_search")),t.dom.appendChild(e.searchButton),t.dom.classList.add("ospm_advanced_search_first_field_on_mobile"),e.desktopSearchButtonContainer.classList.add("ospm_hidden")):(e.searchButton.textContent=e.buttonLabel,e.searchButtonContainer.appendChild(e.searchButton),t.dom.classList.remove("ospm_advanced_search_first_field_on_mobile"),e.desktopSearchButtonContainer.classList.remove("ospm_hidden"))))}function m(e,t,n){if("function"==typeof e[t+"Action"])try{return c.logUserEvent(t,e),e[t+"Action"](e,n)}catch(i){throw s.fromError("Fehler in "+t+"-Callback von AdvancedSearchInput",i)}}function p(e,n){var i,o=-1,a='Invalid parameters for one of the fields. Accepted fields: { name: "fieldName", label: "labelText"}, { name: "fieldName", widget: WIDGET }, where WIDGET is of the following: '+I.join(", ")+".";if(n&&n.name){if(n&&n.name&&!n.widget)return _(e,n);if(n.widget.getClassName&&I.indexOf(n.widget.getClassName())!==o)return i=n.widget,r.isNBF()&&"TextInput"===i.getClassName()&&(i.dom.classList.contains("ospm_textinput_date")||(i=new t({label:n.widget.getValuePlaceholder()||"Optional",mandatory:n.widget.isMandatory(),mandatoryMessage:n.widget.getMandatoryMessage()},e.stepData))),i.setParent(e),"Dropdown"===i.getClassName()?g(e,n.name,i):f(e,n.name,i);throw new s(a)}throw new s(a)}function f(e,t,n){return e.elements[t]=n,n.dom}function g(e,t,n){return n.contextMenuViewHOffset=k,e.elements[t]=n,n.dom}function _(e,n){var i;return i=r.isNBF()?new t({label:n.label||"",mandatory:n.mandatory,mandatoryMessage:n.mandatoryMessage},e.stepData):new t({valuePlaceholder:n.label||"",mandatory:n.mandatory,mandatoryMessage:n.mandatoryMessage},e.stepData),e.elements[n.name]=i,i.setParent(e),i.dom}function v(e,t){var n=o.createContainer("ospm_one_column_input_container");return n.appendChild(p(e,t)),n}function b(e,t){var i=n.createTwoColumnRowContainer(p(e,t[0]),p(e,t[1]));return i.classList.add("ospm_two_column_input_container"),i}function y(e,t){var n,i,s,a=o.createContainer();for(n=0;n<t.fields.length;n++)s=t.fields[n],r.isNBF()&&0===n?(e.firstInputField=p(e,void 0!==s.length?s[0]:s),s.length>1&&(i=v(e,s[1]))):void 0===s.length?i=v(e,s):s.length>0&&(i=b(e,s)),i&&a.appendChild(i);return r.isNBF()||(e.firstInputField=a.childNodes[0]),a}function C(e){Object.keys(e.elements).forEach(function(t){"function"==typeof e.elements[t].setValue?e.elements[t].setValue():"function"==typeof e.elements[t].setSelected&&e.elements[t].setSelected()})}function w(e,t){var n=Object.keys(e);return a.isNumeric(t)?e[n[t]]:e[t]?e[t]:null}function E(e){Object.keys(e.elements).forEach(function(t){e.elements[t].setError()})}function L(e,t){var n=Object.keys(e.elements),i=void 0===t?0:t;a.isSet(e.elements[n[i]])&&e.elements[n[i]].focus()}function S(e){Object.keys(e.elements).forEach(function(t){e.elements[t].removeFocus()})}function D(e){r.addEnterKeyListener(e.dom,function(){r.startNewE2ETransaction(e.dom),window.isCordova&&S(e),m(e,"search")}),r.addKeyEventListener("keydown",e.dom,function(t){e.isEnabled()&&(r.getEventCode(t)===l.KEYCODES.ESCAPE&&e.reset(),window.isCordova&&t.target.ownerDocument.defaultView.focus())}),r.addClickListener(e.searchButton,function(){e.isEnabled()&&(c.logUserEvent("Search",e),r.startNewE2ETransaction(e.searchButton),window.isCordova&&S(e),m(e,"search"))},!1,!0)}var T,I=["TextInput","Dropdown","Checkbox"],k=8,x="Suchen";return T=e.subclass({elements:null,searchButtonContainer:null,desktopSearchButtonContainer:null,buttonLabel:null,constructor:function(e,t){this.elements={},this.stepData=t,this.dom=this.buildDom(e),this.initializeFields(e),this.addEventListeners(),h(this)},getValues:function(){var e=[],t=Object.keys(this.elements);return t.forEach(function(t){e.push({name:t,value:this.elements[t].getValue()})}.bind(this)),e},setValues:function(e){e.forEach(function(e){this.elements[e.name]&&this.elements[e.name].setValue(e.value)}.bind(this))},getInputData:function(){var e=this.elements;return Object.keys(e).sort().map(function(t){var n=e[t];return[t,n.getInputData?n.getInputData():n.getValue()]})},setInputData:function(e,t){var n=this.elements;e.forEach(function(e){var i,o=n[e[0]];o&&(i=e[1],o.setInputData?o.setInputData(i,t):(o.setValue(i),t&&o.notifyChangeListeners&&o.notifyChangeListeners()))}),t&&this.notifyChangeListeners()},checkMandatoryValueEmptyError:function(){var e,t,n=Object.keys(this.elements);for(e=0;e<n.length;e++)if(t=this.elements[n[e]].checkMandatoryValueEmptyError())return t;return null},setLabels:function(e){e.forEach(function(e){this.elements[e.name]&&this.elements[e.name].setValuePlaceholder(e.label)}.bind(this))},setButtonLabel:function(e){this.buttonLabel=e||x,(!r.isMobile()||r.isNBF())&&(this.searchButton.textContent=r.toHTMLText(this.buttonLabel)),r.isNBF()&&this.searchButton.appendChild(i.createSimpleIcon(l.ICONS.MAGNIFIER_S))},setSearchAction:function(e){this.searchAction=e||null},setResetAction:function(e){this.resetAction=e||null},setToggleAction:function(e){this.toggleAction=e||null,this.toggleAction?this.switchButton||(this.switchButton=o.createButton("ospm_search_icon_button ospm_advanced_search_icon_button ospm_search_button_rounded_corners"),this.switchButton.setAttribute("aria-label","Erweiterte Suche schließen"),this.searchButton.classList.remove("ospm_search_button_rounded_corners"),r.isNBF()||(this.switchButton.style.backgroundColor=d.getWidgetFgColor(),this.switchButton.style.color=d.getWidgetBgColor()),this.switchButton.appendChild(i.createSimpleIcon("close_advanced_search")),this.switchButton.appendChild(i.createSimpleIcon("close_advanced_search_focus")),this.desktopSearchButtonContainer.appendChild(this.switchButton),this.addEventListenersForSwitchButton()):this.switchButton&&(this.switchButton.parentNode.removeChild(this.switchButton),this.switchButton=null,this.searchButton.classList.add("ospm_search_button_rounded_corners"))},reset:function(){C(this),m(this,"reset")},setError:function(e,t){var n;if(!a.isSet(e))return void E(this);if(!(a.isNumeric(e)&&e>=this.elements.length)){if(n=w(this.elements,e),!a.isSet(t)||""===t){if(!a.isSet(n))return;return void n.setError()}a.isSet(n)&&n.setError(t)}},addError:function(e,t){var n;a.isNumeric(e)&&e>=this.elements.length||(n=w(this.elements,e),a.isSet(n)&&n.addError(t))},hasError:function(e){var t;return a.isNumeric(e)&&e>=this.elements.length?!0:(t=w(this.elements,e),a.isSet(t)&&t.hasError())},addEventListeners:function(){this.addEventListenersForSwitchButton(),D(this)},addEventListenersForSwitchButton:function(){var e;this.switchButton&&(e=function(){this.isEnabled()&&m(this,"toggle")}.bind(this),r.addActionListener(this.switchButton,e,!1,!0,!0))},buildDom:function(e){var t;return t=o.createContainer("ospm_search ospm_advanced_search_container ospm_widget"),r.isNBF()?(this.desktopSearchButtonContainer=o.createContainer("ospm_horizontal_flex_container"),this.searchButton=o.createButton("ospm_search_button ospm_advanced_search_button ospm_search_button_rounded_corners"),this.searchButton.appendChild(i.createSimpleIcon(l.ICONS.MAGNIFIER_S)),this.desktopSearchButtonContainer.appendChild(this.searchButton),t.appendChild(this.desktopSearchButtonContainer),t.appendChild(y(this,e)),this.desktopSearchButtonContainer.insertBefore(this.firstInputField,this.desktopSearchButtonContainer.firstChild),t):(t.appendChild(y(this,e)),this.desktopSearchButtonContainer=o.createContainer("ospm_horizontal_flex_container"),this.searchButton=o.createButton("ospm_search_button ospm_advanced_search_button ospm_search_button_rounded_corners"),this.searchButton.style.backgroundColor=d.getWidgetFgColor(),this.searchButton.style.color=d.getWidgetBgColor(),this.searchButtonContainer=o.createContainer("ospm_advanced_search_button_container"),this.searchButtonContainer.appendChild(this.searchButton),this.desktopSearchButtonContainer.appendChild(this.searchButtonContainer),t.appendChild(this.desktopSearchButtonContainer),t)},updateDisplay:function(){T.parent.updateDisplay.call(this),Object.keys(this.elements).forEach(function(e){this.elements[e].setEnabled(this.isEnabled())}.bind(this)),this.isEnabled()?(this.searchButton.removeAttribute("disabled"),this.switchButton&&this.switchButton.removeAttribute("disabled")):(this.searchButton.setAttribute("disabled","true"),this.switchButton&&this.switchButton.setAttribute("disabled","true"))},onChildValueChange:function(){this.notifyChangeListeners()},getClassName:function(){return"AdvancedSearchInput"},focus:function(e){T.parent.focus.call(this),L(this,e)},removeFocus:function(){S(this),T.parent.removeFocus.call(this)},initializeFields:function(t){this.setButtonLabel(t.buttonLabel),this.setSearchAction(t.searchAction),this.setResetAction(t.resetAction),this.setToggleAction(t.toggleAction),t.changeListener&&this.setChangeListener(t.changeListener),e.parent.initializeFields.call(this,t)},validateDataType:function(){},onResize:function(){h(this)}}),T.proto(new u.TabIndexMixinFactory({domName:"firstInputField"}),u.FocusableMixin,u.ChangeMixin,u.InputStorageMixin),T}),define("tao/ospm/ui/AnimationToolkit",["tao/ospm/core/UIToolkit"],function(e){var t={animate:function(t,n,i){var o;if(void 0!==i){if(i&&t.classList.contains("ospm_hidden"))return!i;if(!i&&!t.classList.contains("ospm_hidden"))return!i}return o=!t.classList.contains("ospm_hidden"),0===n?(void 0!==i&&(o=!i),t.classList.toggle("ospm_hidden",!o),t.setAttribute("aria-expanded",o?"true":"false"),o):(o||(t.style.visibility="hidden",t.style.height=null,t.classList.remove("ospm_hidden")),t.setAttribute("aria-expanded",o?"false":"true"),e.requestAnimationFrame(function(){var i=t.clientHeight,r=0,s=Date.now(),a=function(){var l=Date.now(),c=l-s,u=0;s=l,r+=c,u=r/n,u>1&&(u=1),t.style.height=i*(o?1-u:u)+"px",n>r?e.requestAnimationFrame(a):(t.style.height=null,t.style.overflow=null,o&&t.classList.add("ospm_hidden"))};t.style.overflow="hidden",t.style.height=(o?i:0)+"px",t.style.visibility=null,e.requestAnimationFrame(a)}),!o)}};return t}),define("tao/ospm/ui/widgets/search/ResultRow",["tao/ospm/ui/widgets/ContainerWidget","tao/ospm/ui/widgets/Checkbox","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/ui/UIConstants","tao/ospm/common/Constants","tao/ospm/ui/AnimationToolkit"],function(e,t,n,i,o,r,s,a,l,c){function u(e,t){var n,r,s,a,c,u;r=i.createContainer("ospm_search_result_row "+(e.isEnabled()?"":" ospm_disabled")),s=i.createContainer("ospm_card_v2"),r.appendChild(s),n=i.createLayout(),e.iconsContainer=i.createContainer("ospm_vertical_icons_container"),e.isEnabled()?_(e):g(e),n.addLeft(e.iconsContainer),n.addCenter(v(e,t)),n.addRight(h(e,t)),s.appendChild(n.dom),a=i.createContainer("ospm_card_expandable"),a.classList.add("ospm_hidden"),e.collapseLabel||a.classList.add("ospm_expandable_v2_small"),a.appendChild(i.createSpanLabel(e.collapseLabel)),c=i.createContainer("ospm_card_expandable_icons"),a.appendChild(c),u=o.createSimpleIcon(l.ICONS.DOWN_S),u.setAttribute("tabindex","0"),c.appendChild(u),u=o.createSimpleIcon(l.ICONS.UP_S),u.setAttribute("tabindex","0"),c.appendChild(u),s.appendChild(a),e.expandableDom=a,e.containerDom=i.createContainer("ospm_search_result_row_children"),e.containerDom.setAttribute("aria-expanded","true"),r.appendChild(e.containerDom),e.dom=r}function d(e,t){var n,o;o=i.createContainer("ospm_search_result_row "+(e.isEnabled()?"":" ospm_disabled")),n=i.createLayout(),e.iconsContainer=i.createContainer("ospm_vertical_icons_container"),e.isEnabled()?_(e):g(e),n.addLeft(e.iconsContainer),n.addCenter(v(e,t)),n.addRight(h(e,t)),o.appendChild(n.dom),e.containerDom=i.createContainer("ospm_search_result_row_children"),o.appendChild(e.containerDom),e.dom=o}function h(e,t){var n=t.checkmarkColor||S;return e.rightIconContainerDom=i.createContainer("ospm_right_icon_container"),e.rightIconContainerDom.tabIndex=a.TABINDEXES.DEFAULT,e.rightIconContainerDom.setAttribute("role","checkbox"),e.rightIconContainerDom.appendChild(o.createSimpleIcon({name:l.ICONS.CHECK_CIRCLE_M,color:n})),m(e,!0),e.rightIconContainerDom}function m(e,t){r.toggleClassName(e.rightIconContainerDom,"ospm_checked",!t),e.rightIconContainerDom.classList.contains("ospm_checked")?e.rightIconContainerDom.setAttribute("aria-label","Ergebniszeile abwählen"):e.rightIconContainerDom.setAttribute("aria-label","Ergebniszeile auswählen")}function p(e){function t(t){if(e.isEnabled()){if(r.isNBF()&&(!e.expandableDom.classList.contains("ospm_expandable_v2_small")&&e.expandableDom.contains(t.target)||e.expandableDom.classList.contains("ospm_expandable_v2_small")&&e.expandableDom.querySelector(".ospm_card_expandable_icons").contains(t.target)))return void(e.isCollapsible()&&(e.setCollapsed(!e.isCollapsed()),e.notifyCollapseListeners()));if(s.isSet(e.collapseIcon)&&(t.target===e.collapseIcon||t.target.parentElement===e.collapseIcon))return void(e.isCollapsible()&&(e.setCollapsed(!e.isCollapsed()),e.notifyCollapseListeners()));e.isSelected()?e.deselect():e.select(),e.rightIconContainerDom.focus()}}r.addActionListener(e.dom,t,!1,!0),document.OSPMEnvironment.isTouchDevice()||(e.rightIconContainerDom.addEventListener("focus",function(){e.dom.classList.add("ospm_widget_focused")},!1),e.rightIconContainerDom.addEventListener("blur",function(){e.dom.classList.remove("ospm_widget_focused")}))}function f(e){null!==e.parent&&"function"==typeof e.parent.onResultRowChange&&e.parent.onResultRowChange(e)}function g(e){r.removeAllChildren(e.iconsContainer),e.iconsContainer&&e.iconsContainer.appendChild(o.createSimpleIcon("minus_circle_s"))}function _(e){var t;if(r.removeAllChildren(e.iconsContainer),e.leftIcons)for(t=0;t<e.leftIcons.length;t++)e.iconsContainer.appendChild(s.isSet(e.leftIcons[t])&&""!==e.leftIcons[t]?o.createIcon(e.leftIcons[t]):o.createSimpleIcon("void"))}function v(e,t){var n,o,r;return n=i.createContainer("ospm_search_row_details"),e.titleDom=i.createContainer("ospm_list_entry_label",t.title),n.appendChild(e.titleDom),o=i.createContainer("ospm_list_entry_details"),o.innerHTML=t.subtitle?t.subtitle:"",n.appendChild(o),t.labels&&t.subtitle||!e.leftIcons||3!==e.leftIcons.length||e.iconsContainer.classList.add("ospm_result_row_with_two_lines"),t.labels&&(r=C(e,t),n.appendChild(r)),t.textLabels&&n.appendChild(y(e,t)),n}function b(e){return e.label?e.label+(e.text?": "+e.text:""):e.text?e.text:""}function y(e,t){var n,o,s,a=r.isNBF()?i.createContainer("ospm_resultrow_textlabel_list"):i.createUnorderedList("ospm_resultrow_textlabel_list");for(n=0;n<t.textLabels.length;n++)r.isNBF()?(s=b(t.textLabels[n]),o=i.createContainer("ospm_resultrow_textlabel_list_inner"),o.appendChild(e.buildPill(s,l.ICONS.STAR_S)),a.appendChild(o)):a.appendChild(i.createListItem("ospm_list_entry_details ospm_resultrow_textlabel",t.textLabels[n].label+": "+t.textLabels[n].text));return a}function C(e,t){var n,s,a,c,u=["oe","gift","person"];for(a=i.createContainer("ospm_search_row_iconlabel_list"),n=0;n<t.labels.length;n++)if(t.labels[n].text||t.labels[n].icon){if(t.labels[n].icon)if(c=t.labels[n].icon.name||t.labels[n].icon,u.indexOf(c)>-1)switch(c){case"oe":c=l.ICONS.OE_S;
break;case"gift":c=l.ICONS.PRESENT_S;break;case"person":c=l.ICONS.USER_S}else c=t.labels[n].icon;r.isNBF()?a.appendChild(e.buildPill(t.labels[n].text,c)):(s=i.createContainer("ospm_search_row_iconlabel"),c&&s.appendChild(o.createIcon(c,12)),s.appendChild(i.createContainer("ospm_search_row_item_text",t.labels[n].text)),a.appendChild(s)),t.labels[n].withLineBreak&&a.appendChild(i.createElement("br"))}return a}function w(e){var t="suche_down";r.isNBF()&&(t=l.ICONS.PLUS_CIRCLE_FILLED_S),s.isSet(e.leftIcons)&&0!==e.leftIcons.length?1===e.leftIcons.length?(e.leftIcons[1]="void",e.leftIcons[2]={name:t,label:"Teilergebnisse anzeigen/verbergen"}):e.leftIcons[2]={name:t,label:"Teilergebnisse anzeigen/verbergen"}:e.leftIcons=["void","void",{name:t,label:"Teilergebnisse anzeigen/verbergen"}],_(e),e.collapseIcon=e.iconsContainer.children[2],r.isNBF()&&e.dom.classList.add("ospm_result_row_collapsible")}function E(e){var t=e.leftIcons[2];t&&-1!==["suche_down","suche_up",l.ICONS.PLUS_CIRCLE_FILLED_S].indexOf(t.name)&&(e.leftIcons[2]="void",_(e),e.collapseIcon=null),r.isNBF()&&e.dom.classList.remove("ospm_result_row_collapsible")}var L,S="green",D=["green","blue"],T=30,I=14;return L=e.subclass({dom:null,expandableDom:null,title:null,subtitle:null,checkbox:null,data:null,enabled:!0,selected:!1,iconsContainer:null,parameter:null,stepData:null,titleDom:null,leftIcons:null,collapseIcon:null,collapsible:null,collapseLabel:"",rightIconContainerDom:null,constructor:function(e,t){this.elements=[],this.parameter=e||{},this.stepData=t,this.leftIcons=e.leftIcons?e.leftIcons:[],r.isNBF()?(T=r.isMobile()?12:20,u(this,this.parameter)):d(this,this.parameter),this.initializeFields(this.parameter),this.setCheckmarkColor(e.checkmarkColor),p(this)},setCollapseLabel:function(e){this.collapseLabel=e,r.isNBF()&&(this.expandableDom.querySelector("span").innerText=e,this.expandableDom.classList.toggle("ospm_expandable_v2_small",!e))},setVisible:function(e){r.toggleClassName(this.dom,"ospm_invisible",!e),L.parent.setVisible.call(this,e)},setEnabled:function(e){this.enabled=e,e?(_(this),this.dom.classList.add("ospm_clickable")):(g(this),this.dom.classList.remove("ospm_clickable")),L.parent.setEnabled.call(this,e)},setData:function(e){this.data=e},isEnabled:function(){return this.enabled},isSelected:function(){return this.selected},select:function(){this.isEnabled()&&(this.selected=!0,m(this,!1),this.notifyChangeListeners(),f(this))},deselect:function(){this.isEnabled()&&(this.selected=!1,m(this,!0),this.notifyChangeListeners(),f(this))},setCheckmarkColor:function(e){var t,n;for(n=D.indexOf(e)>=0?e:S,t=0;t<D.length;t++)this.dom.classList.remove(D[t]+"_checkmark");this.dom.classList.add(n+"_checkmark")},isEqual:function(e){function t(t){var n,i=e.parameter.labels||e.parameter.textLabels;if(s.isArrayProvided(t)!==s.isArrayProvided(i))return!1;if(!t)return!0;if(t.length!==i.length)return!1;for(n=0;n<t.length;n++){if(i[n].text!==t[n].text)return!1;if(i[n].label!==t[n].label)return!1}return!0}return e&&this.title===e.title&&this.subtitle===e.subtitle&&t(this.parameter.labels||this.parameter.textLabels)},initializeFields:function(e){L.parent.initializeFields.call(this,e),this.title=e.title||"",this.subtitle=e.subtitle||"",this.data=e.data||{},"boolean"==typeof e.enabled&&this.setEnabled(e.enabled),e.changeListener&&this.setChangeListener(e.changeListener),e.collapseListener&&this.setCollapseListener(e.collapseListener),this.setCollapsible(e.collapsible),this.setCollapsed(e.collapsed,!0)},setCollapsed:function(e,t){var n=this.isCollapsed(),i=300;t&&(i=0),!n&&e?(r.isNBF()?c.animate(this.containerDom,i,!1):this.containerDom.classList.remove("ospm_hidden"),this.dom.classList.remove("ospm_collapsed"),this.collapseIcon&&(this.collapseIcon.classList.remove("ospm_icon_suche_down"),this.collapseIcon.classList.add("ospm_icon_suche_up"))):n&&!e&&(r.isNBF()?c.animate(this.containerDom,i,!0):this.containerDom.classList.add("ospm_hidden"),this.dom.classList.add("ospm_collapsed"),this.collapseIcon&&(this.collapseIcon.classList.add("ospm_icon_suche_down"),this.collapseIcon.classList.remove("ospm_icon_suche_up"))),r.isNBF()&&(this.dom.classList.toggle("ospm_card_last",this.isLastElement()),this.expandableDom.classList.toggle("ospm_expanded",!e))},setCollapsible:function(e){this.collapsible=Boolean(e),e===!0?w(this):E(this),r.isNBF()&&this.expandableDom.classList.toggle("ospm_hidden",!e)},isCollapsed:function(){return!this.containerDom.classList.contains("ospm_hidden")},isCollapsible:function(){return this.collapsible},checkForValidElement:function(e){return e instanceof L?null:"Nur ResultRows sind als Elemente erlaubt"},notifyInternalValueChange:function(e){L.parent.notifyInternalValueChange(e),r.isNBF()&&(this.dom.classList.toggle("ospm_has_children",this.elements.length>0),this.updateLevel())},updateDisplay:function(){this.updateLevel(),r.isNBF()&&this.dom.classList.toggle("ospm_card_last",this.isLastElement()),L.parent.updateDisplay.call(this)},updateLevel:function(){var e,t,n=0;if(r.isNBF()&&this.dom&&0!==this.dom.children.length){for(e=this.getParent();e&&"ResultRow"===e.getClassName();)n++,e=e.getParent();t=this.dom.children[0],t.style.paddingLeft=T+n*I+"px",this.dom.setAttribute("data-level",n)}},isLastElement:function(){var e,t=this.getParent(),n="true"!==this.containerDom.getAttribute("aria-expanded");return t&&"ResultRow"===t.getClassName()&&(e=t.getElements(),e.indexOf(this)!==e.length-1)?!1:n||0===this.getElements().length},getClassName:function(){return"ResultRow"}}),L.proto(n.ClickMixin,n.CollapseMixin,n.ChangeMixin,n.PillMixin),L}),define("tao/ospm/ui/widgets/search/HistoryList",["tao/ospm/ui/widgets/Widget","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIUtils","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/search/ResultRow","tao/ospm/common/Repository","tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/ui/UIConstants","tao/ospm/ui/IconFactory","tao/ospm/common/Constants","tao/ospm/ui/AnimationToolkit"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p){function f(e){var t=i.createContainer();return e.listContainer=i.createContainer("ospm_hidden"),e.listContainer.appendChild(e.resultsList.dom),t.appendChild(e.listContainer),e.toggleLink=i.createLink("ospm_history_toggle_link ospm_history_down_arrow ospm_list_entry_details"),e.count=i.createInlineContainer("ospm_history_count"),e.toggleLink.insertBefore(i.createTextNode(" "),e.toggleLink.firstChild),e.toggleLink.insertBefore(e.count,e.toggleLink.firstChild),e.toggleLinkLabel=i.createInlineContainer("ospm_history_toggle_label"),e.toggleLink.appendChild(e.toggleLinkLabel),o.isNBF()?(e.toggleLink.appendChild(h.createSimpleIcon(m.ICONS.DOWN_S)),e.toggleLink.appendChild(h.createSimpleIcon(m.ICONS.UP_S)),t.insertBefore(e.toggleLink,e.listContainer)):t.appendChild(e.toggleLink),t}function g(e){if(null!==e.limit)for(;e.repo.getCount()>e.limit;)e.repo.removeFirstItem();e.resultsList.removeAllElements(),e.repo.getCount()<=0?(e.toggleLink.classList.add("ospm_hidden"),e.dom.classList.add("ospm_hidden")):(e.toggleLinkLabel.textContent=1===e.repo.getCount()?e.singularLabel||e.label:e.label||"",e.count.textContent=e.repo.getCount(),e.toggleLink.classList.remove("ospm_hidden"),e.dom.classList.remove("ospm_hidden"),e.repo.getItems().forEach(function(t){e.resultsList.addElement(t)}))}function _(e){e.toggleLink.classList.remove("ospm_history_down_arrow"),e.toggleLink.classList.add("ospm_history_up_arrow")}function v(e){e.toggleLink.classList.remove("ospm_history_up_arrow"),e.toggleLink.classList.add("ospm_history_down_arrow")}function b(e){function t(){e.isEnabled()&&(o.isNBF()?p.animate(e.listContainer,300)?_(e):v(e):e.setVisible(e.listContainer.classList.contains("ospm_hidden")?!0:!1))}o.addActionListener(e.toggleLink,t,!1,!0)}var y=e.subclass({stepData:null,repo:null,listContainer:null,toggleLink:null,toggleLinkLabel:null,count:null,resultsList:null,limit:null,singularLabel:null,label:null,constructor:function(e,t){e=e||{},this.stepData=t,this.repo=new l,this.resultsList=new s,this.dom=f(this),this.initializeFields(e),b(this)},initializeFields:function(e){y.parent.initializeFields.call(this,e),this.setLimit(void 0===e.limit?c.SEARCH_HISTORY_MAXIMUM_ITEMS:e.limit),e.singularLabel&&this.setSingularLabel(e.singularLabel),e.label&&this.setLabel(e.label)},setLimit:function(e){if(null!==e&&0>=e)throw new n("Limit muss entweder null (kein Limit) oder größer 0 sein",{limit:e});this.limit=e,g(this)},getLimit:function(){return this.limit},addElement:function(e){this.repo.add(e),e.setEnabled(this.isEnabled()),g(this)},removeElement:function(e){this.repo.remove(e)&&g(this)},setVisible:function(e){e?(this.listContainer.classList.remove("ospm_hidden"),_(this)):(this.listContainer.classList.add("ospm_hidden"),v(this))},setEnabled:function(e){this.enabled=e,y.parent.setEnabled.call(this,e),this.getElements().forEach(function(t){t.setEnabled(e)})},setSingularLabel:function(e){this.singularLabel=e},setLabel:function(e){this.label=e},getElements:function(){return this.repo.getItems()},getChildren:function(){return y.parent.getChildren.call(this).concat(this.getElements())},getChildPosition:function(e){var t=this.getElements().indexOf(e);return t>=0?t:"?"},removeAllElements:function(){this.repo=new l,g(this)},updateDisplay:function(){y.parent.updateDisplay.call(this),this.isEnabled()?this.toggleLink.setAttribute("tabindex",d.TABINDEXES.DEFAULT):this.toggleLink.removeAttribute("tabindex")},getClassName:function(){return"HistoryList"}});return y}),define("tao/ospm/ui/widgets/search/ResultsList",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/ui/widgets/list/List"],function(e,t,n){var i;return i=n.subclass({changeCallback:null,constructor:function(e,t){n.prototype.constructor.call(this,e,t),e&&e.changedRowAction&&this.setChangeRowAction(e.changedRowAction)},onResultRowChange:function(e){this.changeCallback&&t.callSafely("ChangeRowAction von ResultsList",this.changeCallback,e)},setChangeRowAction:function(e){this.changeCallback=e},getClassName:function(){return"ResultsList"}})}),define("tao/ospm/ui/widgets/TextareaInput",["tao/ospm/ui/widgets/Widget","tao/ospm/common/Constants","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/ui/ValidatorUtils","tao/ospm/ui/UIErrorUtils","tao/ospm/main/WorkflowDialogStack"],function(e,t,n,i,o,r,s,a,l){function c(e){e.textareaElement.value?i.toggleClassName(e.dom,"ospm_input_empty",!1):i.toggleClassName(e.dom,"ospm_input_empty",!0)}function u(e,n){var i,o,s=r.createContainer("ospm_textarea_container ospm_labelfield"),a=r.createContainer("ospm_textarea_label_line"),l=r.createContainer("ospm_textarea_bottom_line");return e.optionalDomLabel=n.label?" (optional)":"(optional)",e.errorMessageShouldHaveIcon(),e.wrapperDom=r.createContainer("ospm_widget_content_wrapper"),o=r.createContainer("ospm_horizontal_flex_container"),e.innerContainer=o,e.textareaElement=h(n),i=r.createContainer("ospm_textarea_label_textarea_container"),e.iconLabelContainer=r.createContainer("ospm_textarea_icon_label_container"),e.iconLabelContainer.appendChild(a),a.appendChild(e.buildLabelDom(t.TEXT_STYLE.LABEL3)),a.appendChild(e.buildOptionalDom()),i.appendChild(e.iconLabelContainer),i.appendChild(e.textareaElement),o.appendChild(i),m(e,n),e.wrapperDom.appendChild(o),s.appendChild(e.wrapperDom),s.appendChild(l),l.appendChild(e.buildErrorDom()),l.appendChild(e.buildCharacterCountdownDom()),e.checkboxIconContainerDom=e.wrapperDom,s}function d(e,n){var i,o,s=r.createContainer("ospm_textarea_container ospm_labelfield");return e.wrapperDom=r.createContainer("ospm_widget_content_wrapper"),o=r.createContainer("ospm_horizontal_flex_container"),e.textareaElement=h(n),i=r.createContainer("ospm_textarea_label_textarea_container"),e.iconLabelContainer=r.createContainer("ospm_textarea_icon_label_container"),e.iconLabelContainer.appendChild(e.buildLabelDom(t.TEXT_STYLE.LABEL3)),e.iconLabelContainer.appendChild(e.buildOptionalDom()),i.appendChild(e.iconLabelContainer),i.appendChild(e.textareaElement),i.appendChild(e.buildCharacterCountdownDom()),o.appendChild(i),m(e,n),e.wrapperDom.appendChild(o),e.wrapperDom.appendChild(e.buildErrorDom()),s.appendChild(e.wrapperDom),s}function h(e){var t=r.createTextarea();return t.setAttribute("rows",e.oneLine?"1":"3"),e.enabled===!1&&t.setAttribute("disabled","true"),t.setAttribute("spellcheck",void 0===e.spellcheck?!0:e.spellcheck),t}function m(e){i.addKeyEventListener("drop",e.textareaElement,function(){e.textareaElement.focus()}),i.addKeyEventListener("keyup",e.textareaElement,function(t){n.MaxCharsMixin.limitTheNumberOfChars(e.textareaElement,e,t),i.updateElement(e)}),i.addKeyEventListener("keypress",e.textareaElement,function(t){s.beforeInput(e,{event:t}),n.MaxCharsMixin.limitTheNumberOfChars(e.textareaElement,e,t),i.updateElement(e)}),e.textareaElement.addEventListener("paste",function(t){var n;n=i.getClipboardData(t),n?(t.stopPropagation(),t.preventDefault(),i.insertAtCursor(e.textareaElement,n),C(e,e.getValue())):setTimeout(function(){C(e,e.getValue())},50)}),i.addKeyEventListener("keydown",e.textareaElement,function(n){switch(window.isCordova&&n.target.ownerDocument.defaultView.focus(),i.getEventCode(n)){case t.KEYCODES.ESCAPE:s.beforeInput(e,{event:n})&&(e.textareaElement.value=e.oldValue);break;case t.KEYCODES.BACKSPACE:case t.KEYCODES.DELETE:s.beforeInput(e,{event:n})}i.updateElement(e)}),e.textareaElement.addEventListener("input",function(){C(e,e.getValue()),s.afterInput(e)}),e.textareaElement.addEventListener("blur",function(){e.dom.classList.remove("ospm_focus_inside"),i.isNBF()&&c(e),f(e)}),e.textareaElement.addEventListener("focus",function(){e.dom.classList.add("ospm_focus_inside"),p(e)})}function p(e){e.oldValue=e.getValue(),s.onEntry(e)}function f(e){e.validate(),a.checkMandatoryAfterValidation(e),s.onExit(e),e.oldValue!==e.getValue()&&(e.valueChanged=!0,e.notifyChangeListeners())}function g(e){var t,n,o,r;i.isRendered(e)&&(t=e.textareaElement,e.wrapperDom.style.height=e.wrapperDom.offsetHeight+"px",t.style.height="auto","hidden"!==t.style.overflow&&(t.style.overflow="hidden"),r=v(e),o=r.totalHeight||0,n=e.currentElementHeight!==o,0!==o&&(t.style.height=o+"px",e.currentElementHeight=o),n&&(t.dataset.scrollupdate="true",e.isWfDialogChild&&l.onResize()),e.wrapperDom.style.height="")}function _(e){g(e),w(e)}function v(e){return e.textareaElementStyles=i.calculateElementLineHeights(e.textareaElement,e.textareaElementStyles,{skipMargins:!0}),e.textareaElementStyles}function b(e){var t=e.valuePlaceholder;""!==t||i.isNBF()||(t=y(e)),i.isNBF()&&e.dom.classList.toggle("ospm_has_placeholder",""!==t),e.textareaElement.setAttribute("placeholder",t+"_"),e.textareaElement.setAttribute("placeholder",t)}function y(e){return e.isMandatory()||i.isMobile()?t.MANDATORY_PLACEHOLDERS.TEXT:t.DEFAULT_PLACEHOLDERS.TEXT}function C(e,t){n.MaxCharsMixin.limitInputValue(e.textareaElement,t,e),i.updateElement(e)}function w(e){var t;e.getMaximumChars()&&(t=v(e),t.totalHeight>t.minOneLineHeight&&t.totalHeight>t.minOneLineHeight+3?e.updateCharacterCountdownDom(e.textareaElement.value.length,e.getMaximumChars()):e.updateCharacterCountdownDom())}function E(e){var t,n;for(n=e;n&&n.classList;n=n.parentNode)if(t=n.classList,t.contains("ospm_dialog_wf"))return!0;return!1}var L,S=e.subclass({stepData:null,textareaElement:null,textareaElementStyles:null,oldValue:null,iconLabelContainer:null,valuePlaceholder:"",wrapperDom:null,innerContainer:null,currentElementHeight:null,isWfDialogChild:null,spellcheck:!0,constructor:function(e,t){e=e||{},this.stepData=t,i.isNBF()?(this.dom=u(this,e),this.setLeftIconContainer(this.innerContainer)):(this.dom=d(this,e),this.setLeftIconContainer(this.iconLabelContainer)),this.initializeFields(e)},setSpellcheck:function(e){this.spellcheck=void 0===e?!0:e,this.textareaElement.setAttribute("spellcheck",this.spellcheck)},getSpellcheck:function(){return this.spellcheck},setValuePlaceholder:function(e){this.valuePlaceholder=e||"",b(this)},getValuePlaceholder:function(){return this.textareaElement.getAttribute("placeholder")},setValue:function(e){C(this,e),this.oldValue=this.getValue()},getValue:function(){return this.textareaElement.value},setFullWidth:function(e){i.toggleClassName(this.dom,"ospm_full_width",e===!0)},updateDisplay:function(){S.parent.updateDisplay.call(this),i.toggleClassName(this.dom,"ospm_has_label",o.isStringProvided(this.getLabel())),this.isEnabled()?this.textareaElement.removeAttribute("disabled"):this.textareaElement.setAttribute("disabled","true"),_(this),b(this)},removeFocus:function(){this.textareaElement.blur(),S.parent.removeFocus.call(this)},isEmpty:function(){return this.getValue().length<1},initializeFields:function(e){e.mandatoryMessage=e.mandatoryMessage||t.MANDATORY_MESSAGE,this.textareaElementStyles={},S.parent.initializeFields.call(this,e),this.textareaElement.id=this.getId()+"__input",this.setSpellcheck(e.spellcheck),this.setLeftIcon(e.leftIcon),this.setValuePlaceholder(e.valuePlaceholder),this.setLabel(e.label),this.setValue(e.value),this.setFullWidth(e.fullWidth),e.changeListener&&this.setChangeListener(e.changeListener),this.setMaximumChars(e.maximumChars),this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage),this.setTabIndex(e.tabIndex),this.setError(e.error),this.initializeCheckableFields(e),i.isNBF()&&c(this)},switchToFormLayout:function(){var e,t,n;i.isNBF()||this.hasFormLayout||(S.parent.switchToFormLayout.call(this),n=this.wrapperDom.firstChild,n.parentNode.removeChild(n),e=r.createContainer("ospm_list_entry_left_content_form_wrapper"),this.labelDom.parentNode.removeChild(this.labelDom),e.appendChild(this.labelDom),this.optionalDom.parentNode.removeChild(this.optionalDom),e.appendChild(this.optionalDom),t=r.createContainer("ospm_layout_right_form_wrapper"),t.appendChild(n),t.appendChild(this.errorMessageDom),this.wrapperDom.appendChild(e),this.wrapperDom.appendChild(t))},onResize:function(){_(this),S.parent.onResize.call(this),i.updateElement(this)},afterRenderLayout:function(){_(this),o.executeLater(function(){b(this)}.bind(this),1),this.isWfDialogChild=E(this.dom)},getClassName:function(){return"TextareaInput"},setBottomMargin:function(t){i.isNBF()?S.parent.setBottomMargin.call(this,t):e.setBottomPadding(this,t)},getLabelableHTMLElement:function(){return this.textareaElement}});return L={setMandatory:function(e){this.mandatory=!!e,this.optionalDom&&(this.mandatory?(this.optionalDom.classList.add("ospm_hidden"),this.textareaElement&&this.textareaElement.setAttribute("required","")):(this.optionalDom.classList.remove("ospm_hidden"),this.textareaElement&&this.textareaElement.removeAttribute("required"))),b(this)},setMaximumChars:function(e){n.MaxCharsMixin.setMaximumChars.call(this,e),w(this)},setLeftIcon:function(e){n.LeftIconMixin.setLeftIcon.call(this,e),this.leftIconDom&&(this.textareaElement.style.marginTop=this.leftIconDom.classList.contains("ospm_icon_size_24")?"4px":0)}},S.proto(n.LeftIconMixin,n.LabelMixin,n.ChangeMixin,n.ValueChangedMixin,n.ErrorMixin,new n.TabIndexMixinFactory({domName:"textareaElement"}),n.FocusableMixin,n.MandatoryMixin,n.MaxCharsMixin,n.CheckableMixin,n.InputStorageMixin,n.CharacterCountdownMixin,L),S}),define("tao/ospm/ui/widgets/models/MTable",["tao/lib/stapes","tao/ospm/common/Toolkit","tao/ospm/common/TableCellFormatter","tao/ospm/common/Constants"],function(e,t,n,i){var o,r,s,a,l=new n;return r=e.subclass({constructor:function(){this.cells=[],this.hidden=!1,this.indent=0},setHidden:function(e){this.hidden=e===!0},setIndent:function(e){!t.isNumeric(e)||0>e||e>3||(this.indent=e)},addCell:function(e){this.cells.push(e)},getCell:function(e){return this.cells[e]},getLastCell:function(){return this.cells[this.cells.length-1]},forEachCell:function(e){this.cells.forEach(e)},getRowIndex:function(){var e=this.cells[0];return e?e.rowIndex:null}}),s=e.subclass({constructor:function(){this.visible=!0,this.lines=[],this.hintText=null,this.hintIcon=null},addLine:function(e){this.lines.push(e)},setValue:function(e){var n=this;Array.isArray(e)||(e=[e]),e.forEach(function(e){var i=new a;!t.isBigDecimal(e)&&t.isObject(e)&&(n.setHintText(e.hintText),n.setHintIcon(e.hintIcon),n.setVisible(e.visible)),i.setValue(e),n.addLine(i)})},getLine:function(e){return void 0===this.lines[e]?null:this.lines[e]},getLines:function(){return this.lines},isLineIndexValid:function(e){return"number"==typeof e&&void 0!==this.lines[e]},setRowIndex:function(e){this.rowIndex=e},setColumnIndex:function(e){this.columnIndex=e},getColumnIndex:function(){return this.columnIndex},setVisible:function(e){this.visible=e!==!1},setHintIcon:function(e){this.hintIcon="help"===e||"hint"===e?e:"help"},setHintText:function(e){this.hintText=e||null},forEachLine:function(e){this.lines.forEach(e)}}),a=s.subclass({constructor:function(){this.leftIcon=null,this.rightIcon=null,this.infoText=null,this.clickListener=null,this.value=null,this.textStyle=null},setClickListener:function(e){this.clickListener=e||null},setRightIcon:function(e){this.rightIcon=e||null},setLeftIcon:function(e){this.leftIcon=e||null},setValue:function(e){!t.isBigDecimal(e)&&t.isObject(e)?(this.value=e.value||null,this.setLeftIcon(e.leftIcon),this.setRightIcon(e.rightIcon||e.cellIcon),this.setInfoText(e.infoText),this.setVisible(e.visible),this.setTextStyle(e.textStyle)):this.value=e||null},setInfoText:function(e){this.infoText=e||null},setTextStyle:function(e){(null===e||e===i.TEXT_STYLE.TABLE_SMALL)&&(this.textStyle=e)},getTextStyle:function(){return this.textStyle}}),o=e.subclass({constructor:function(){this.forceNormalView=!1,this.rows=[],this.sortColumnIndex=null,this.sortCellLineIndex=null,this.sortDir=null,this.columnSortable=!1,this.columnSortListener=null,this.columnWidth=null,this.columnHeaderStyle=null,this.columnFormatter=null,this.columnHeaders=!0,this.rowHeaders=!0,this.summingRow=!1,this.headerBorder=!0},setValues:function(e){var n,i,o;this.rows=[],e.forEach(function(e,l){n=new r,this.addRow(n),e.forEach(function(e,r){i=new s,i.setRowIndex(l),i.setColumnIndex(r),t.isObject(e)&&(e.hintIcon&&i.setHintIcon(e.hintIcon),e.hintText&&i.setHintText(e.hintText)),(!Array.isArray(e)||2===e.length&&"function"==typeof e[1])&&(e=[e]),e.forEach(function(e){o=new a,o.setValue(e),i.addLine(o)}),n.addCell(i)})}.bind(this))},setSummingRow:function(e){this.summingRow=!!e},setColumnHeaders:function(e){this.columnHeaders=e!==!1},setRowHeaders:function(e){this.rowHeaders=e!==!1},setColumnWidth:function(e,n){t.isArray(this.columnWidth)||(this.columnWidth=[]),t.isArray(e)&&e.length===this.getColumnsCount()?this.columnWidth=e.slice():this.isColumnIndexValid(n)&&(t.isNumber(e)||null===e)&&(this.columnWidth[n]=e)},setColumnHeaderStyle:function(e,n){t.isArray(e)&&e.length===this.getColumnsCount()?this.columnHeaderStyle=e.slice():t.isNumber(e)&&this.isColumnIndexValid(n)&&(t.isArray(this.columnHeaderStyle)||(this.columnHeaderStyle=[]),this.columnHeaderStyle[n]=e)},setColumnFormatter:function(e,i){t.isArray(e)?this.columnFormatter=e.slice():e instanceof n?this.isColumnIndexValid(i)?(t.isArray(this.columnFormatter)||(this.columnFormatter=[]),this.columnFormatter[i]=e):this.columnFormatter=e:this.columnFormatter=null},setColumnSortListener:function(e){this.hasColumnHeaders()&&(this.columnSortListener="function"==typeof e?e:null)},setColumnSortable:function(e,n){t.isArray(e)?this.columnSortable=e.slice():this.isColumnIndexValid(n)?(t.isArray(this.columnSortable)||(this.columnSortable=[]),this.columnSortable[n]="function"==typeof e||e===!0?e:!1):this.columnSortable="function"==typeof e||e===!0?e:!1},setHeaderBorder:function(e){this.headerBorder=e!==!1},hasSummingRow:function(){return this.summingRow},hasHeaderBorder:function(){return this.headerBorder},getColumnWidth:function(e){return this.columnWidth&&this.isColumnIndexValid(e)?this.columnWidth[e]:null},getColumnHeaderStyle:function(e){return this.columnHeaderStyle&&this.isColumnIndexValid(e)?this.columnHeaderStyle[e]:null},getColumnFormatter:function(e){var n;return this.columnFormatter&&this.isColumnIndexValid(e)&&(n=t.isArray(this.columnFormatter)?this.columnFormatter[e]:this.columnFormatter),n||l},getDefaultFormatter:function(){return l},getColumnSortListener:function(){return this.columnSortListener},hasColumnHeaders:function(){return this.columnHeaders},hasRowHeaders:function(){return this.rowHeaders},isColumnSortable:function(e){return this.columnSortListener?!0:t.isArray(this.columnSortable)?this.isColumnIndexValid(e)?this.columnSortable[e]!==!1:!1:this.columnSortable!==!1},sort:function(e){function n(e){var n=e;return t.isObject(e)&&e.value&&(n=e.value),t.isBigDecimal(n)?n.toString():n}var i,o,r=this.sortColumnIndex;o="function"==typeof e?e:function(e,i){var o="",s="",a=e.getCell(r).getLines(),l=i.getCell(r).getLines();return a.length>1?a.forEach(function(e){o+=n(e)}):o=e.getCell(r).getLine(0).value,l.length>1?l.forEach(function(e){s+=n(e)}):s=i.getCell(r).getLine(0).value,t.isBigDecimal(o)&&t.isBigDecimal(s)?o.compareTo(s):o>s?1:s>o?-1:0},this.isColumnIndexValid(r)&&(this.hasColumnHeaders()&&(i=this.rows.shift()),this.rows.sort(o),"desc"===this.sortDir&&this.rows.reverse(),this.hasColumnHeaders()&&this.rows.unshift(i))},addRow:function(e){this.rows.push(e)},getRow:function(e){return this.rows[e]},getRowsCount:function(){return this.rows.length},getColumnsCount:function(){return this.rows[0]?this.rows[0].cells.length:0},isRowIndexValid:function(e){return t.isNumber(e)&&e>=0&&e<this.getRowsCount()},isColumnIndexValid:function(e){return t.isNumber(e)&&e>=0&&e<this.getColumnsCount()},getCell:function(e,t){return this.getRow(e).getCell(t)},forEachRow:function(e){this.rows.forEach(e)},forEachCell:function(e){this.forEachRow(function(t){t.forEachCell(e)})},forEachRowCell:function(e,t){var n=this.getRow(e);n.forEachCell(t)},forEachColumnCell:function(e,t){this.forEachRow(function(n){t(n.getCell(e))})},forSingleRow:function(e,t){t(this.rows[e])},forSingleCell:function(e,t,n){n(this.getCell(e,t))}}),{MTable:o,MTableRow:r,MTableCell:s}}),define("tao/ospm/ui/widgets/TableHelperN",["tao/ospm/ui/widgets/Widget","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/common/TableCellFormatter","tao/ospm/common/OSPMError","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/ui/UIConstants","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s,a,l,c){function u(e,t){return Array.isArray(e)?e[t]:e}function d(e,t,n){void 0!==n&&e[t](n)}function h(e,t,n,i){Array.isArray(e)?i?d(e[i],t,n):e.forEach(function(e,i){var o=u(n,i);d(e,t,o)}):d(e,t,n)}function m(e,t,i,o){function r(e){var n=u(i,e.getRowIndex());d(e,t,n)}n.isSet(o)?e.model.isRowIndexValid(o)&&e.model.forSingleRow(o,r):e.model.forEachRow(r),c.updateElement(e)}function p(e,t,n,i,o){g(e,t,n,i,o,!1)}function f(e,t,n,i,o,r){g(e,t,n,i,o,!0,r)}function g(e,t,i,o,r,s,a){function l(e){var n=u(u(i,e.rowIndex),e.columnIndex);s===!0?h(e.lines,t,n,a):d(e,t,n)}n.isSet(o)?n.isSet(r)?e.model.isRowIndexValid(o)&&e.model.isColumnIndexValid(r)&&e.model.forSingleCell(o,r,l):e.model.isRowIndexValid(o)&&e.model.forEachRowCell(o,l):n.isSet(r)?e.model.isColumnIndexValid(r)&&e.model.forEachColumnCell(r,l):e.model.forEachCell(l),c.updateElement(e)}return{Mixin:{setWidth:function(e,t){this.model.setColumnWidth(t,e),c.updateElement(this)},getWidth:function(e){return this.model.getColumnWidth(e)},hasColumnHeaders:function(){return this.model.hasColumnHeaders()},hasRowHeaders:function(){return this.model.hasRowHeaders()},setHintIcon:function(e,t){var n;this.model.isRowIndexValid(e)&&this.hasRowHeaders()&&(n=this.model.getCell(e,0),n.setHintIcon(t),c.updateElement(this))},getHint:function(e){return this.model.isRowIndexValid(e)&&this.hasRowHeaders()?this.model.getCell(e,0).hintText||"":""},setLeftIcon:function(e,t){this.setIcon(e,t,"left")},setRightIcon:function(e,t){this.setIcon(e,t,"right")},setIcon:function(e,t,n){function i(t){var i,s="setRightIcon";!r.hasRowHeaders()||"left"!==n&&0!==n?"right"===n?i=t.getLastCell():r.isColumnIndexValid(n)&&(i=t.getCell(n)):(i=t.getCell(0),s="setLeftIcon"),i&&(Array.isArray(e)?e.forEach(function(e,t){var n=i.getLine(t);n&&n[s](e)}):(o=i.getLine(0),"function"==typeof o[s]&&o[s](e)))}var o,r=this.model;r.isRowIndexValid(t)?i(r.getRow(t)):null===t&&r.forEachRow(function(e){i(e)}),c.updateElement(this)},setSummingRow:function(e){this.model.setSummingRow(e),c.updateElement(this)},hasSummingRow:function(){return this.model.hasSummingRow()},setHint:function(e,t){this.hasRowHeaders()&&this.model.isRowIndexValid(e)&&(this.model.getCell(e,0).setHintText(t),c.updateElement(this))},setInfoText:function(e,t){this.hasRowHeaders()&&this.model.isRowIndexValid(e)&&(this.model.getCell(e,0).setInfoText(t),c.updateElement(this))},setVisibleCell:function(e,t,n){p(this,"setVisible",e,t,n)},isVisibleCell:function(e,t){return this.model.isRowIndexValid(e)&&this.model.isColumnIndexValid(t)?this.model.getCell(e,t).visible:!1},setHiddenRow:function(e,t){m(this,"setHidden",e,t)},isHiddenRow:function(e){return this.model.isRowIndexValid(e)?this.model.getRow(e).hidden:!1},setIndent:function(e,t){m(this,"setIndent",e,t)},getIndent:function(e){return this.model.isRowIndexValid(e)?this.model.getRow(e).indent:0},setValueStyle:function(e,t,n,i){f(this,"setTextStyle",e,t,n,i)},getValueStyle:function(e,t,n){var i;return this.model.isRowIndexValid(e)&&this.model.isColumnIndexValid(t)?(i=this.model.getCell(e,t),i.isLineIndexValid(n)||(n=0),i.lines[n].textStyle):null}},updateMinHeight:function(e){var t,n,i,o=!1;if(e.hasRowHeaders())for(i=e.dom.querySelectorAll(".ospm_table_row"),t=0;t<i.length;t++)if(n=i[t].firstChild,n&&n.classList.contains("ospm_has_lefticon")&&n.firstChild.firstChild.clientHeight>=24){o=!0;break}c.toggleClassName(e.dom,"ospm_min_height_large",o)},getMobileCellDom:function(e,t,n){var i,o,r=[];if(e.hasRowHeaders()&&0===n)e.hasColumnHeaders()&&0===t?r.push(e.dom.querySelector(".ospm_table_title")):(i=e.dom.querySelectorAll(".ospm_table_rowblock_header")[e.hasColumnHeaders()?t-1:t],r.push(i));else if(e.hasColumnHeaders()&&0===t)for(i=e.dom.querySelectorAll(".ospm_table_rowblock"),o=0;o<i.length;o++)r.push(i[o].querySelectorAll(".ospm_table_rowblock_column_header_cell")[e.hasRowHeaders()?n-1:n]);else i=e.dom.querySelectorAll(".ospm_table_rowblock")[e.hasColumnHeaders()?t-1:t],r.push(i.querySelectorAll(".ospm_table_rowblock_value_cell")[e.hasRowHeaders()?n-1:n]);return r},validateAndCompleteParameter:function(e){var t,i,r,s,a,l,c,u,d,h;if(l=e||{},l.columnHeaders!==!1?l.columnHeaders=!0:l.sortable=!1,l.rowHeaders!==!1&&(l.rowHeaders=!0),n.isArray(l.values)){for(c=l.values.length,u=l.values[0].length,t=0;t<l.values.length;t++)if(!n.isArray(l.values[t])||l.values[t].length!==l.values[0].length)throw new o("Ungültiger Parameter: values["+t+"]");if(!(l.values[0].length>0))throw new o("Ungültiger Parameter: values");l.columns=l.values[0].length}else{if(!(n.isNumber(l.columns)&&l.columns>0))throw new o("Fehlender Parameter: columns");l.values=new Array(1),l.values[0]=new Array(l.columns)}if(!n.isArray(l.infoTexts))for(l.infoTexts=[],t=0;t<l.values.length;t++)l.infoTexts.push([]);if(n.isArray(l.leftIcon)){if(l.leftIcon.length>l.values.length)throw new o("Anzahl der linken Icons ist größer als die Anzahl der Zeilen in der Tabelle")}else n.isStringProvided(l.leftIcon)||(l.leftIcon=[]);if(n.isArray(l.rightIcon)){if(l.rightIcon.length>l.values.length)throw new o("Anzahl der rechten Icons ist größer als die Anzahl der Zeilen in der Tabelle")}else n.isStringProvided(l.rightIcon)||(l.rightIcon=[]);if(n.isArray(l.cellIcon)){if(l.columnHeaders&&l.rowHeaders?(d=u-1,h=c-1):l.columnHeaders?(d=u,h=c-1):l.rowHeaders?(d=u-1,h=c):(d=u,h=c),l.cellIcon.length!==h||l.cellIcon[0].length!==d)throw new o("Das cellIcon-Array ist falsch dimensioniert: Zeilen: "+l.cellIcon.length+" (erforderlich: "+h+"); Spalten: "+l.cellIcon[0].length+" (erforderlich: "+d+")");
for(t=0;t<l.cellIcon.length;t++){if(s=l.cellIcon[t],a=l.cellIcon[0],!n.isArray(s))throw new o("cellIcon muss ein zweidimensionales Array sein.");if(s.length!==a.length)throw new o("Alle Zeilen von cellIcon müssen gleich lang sein.")}}else if(!n.isStringProvided(l.cellIcon))for(l.cellIcon=[],t=0;t<l.values.length;t++)l.cellIcon.push([]);if(n.isArray(l.cellVisible)){if(l.cellVisible.length>l.values.length)throw new o("Anzahl der cellVisible Elemente ist größer als die Anzahl der Zeilen in der Tabelle");for(t=0;t<l.values.length;t++)if(r=l.cellVisible[t],r.length>l.columns)throw new o("Anzahl der cellVisible Werte für die Zeile "+t+" ist größer als die Anzahl der Spalten in der Tabelle")}else for(l.cellVisible=[],t=0;t<l.values.length;t++){for(r=[],i=0;i<l.columns;i++)r[i]=!0;l.cellVisible[t]=r}if(l.width||(l.width=new Array(l.columns)),!n.isArray(l.width)||l.width.length!==l.columns)throw new o("Ungültiger Parameter: width");if(l.formatter||(l.formatter=new Array(l.columns)),!n.isArray(l.formatter)||l.formatter.length!==l.columns)throw new o("Ungültiger Parameter: formatter");return l.summingRow!==!0&&(l.summingRow=!1),"undefined"==typeof l.sortable&&(l.sortable=!1),l},toggleHelp:function(e){var t,n;n=c.findParent(e,{cssClass:"ospm_table_row"})||c.findParent(e,{cssClass:"ospm_table_rowblock_header"}),n&&n.nextSibling.classList.contains("ospm_help_message_container")&&(t=n.nextSibling),t&&(t.classList.contains("ospm_hidden")?(n.classList.add("ospm_table_row_noborder"),t.classList.remove("ospm_hidden"),e.setAttribute("aria-pressed","true")):(n.classList.remove("ospm_table_row_noborder"),t.classList.add("ospm_hidden"),e.setAttribute("aria-pressed","false")))},hasColumnAndRowHeaders:function(e){return e.hasRowHeaders()&&e.hasColumnHeaders()},hasOnlyRowHeaders:function(e){return e.hasRowHeaders()&&!e.hasColumnHeaders()},hasOnlyColumnHeaders:function(e){return e.hasColumnHeaders()&&!e.hasRowHeaders()}}}),define("tao/ospm/ui/widgets/Table",["tao/lib/stapes","tao/ospm/ui/widgets/models/MTable","tao/ospm/ui/widgets/Widget","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/TableCellFormatter","tao/ospm/common/OSPMError","tao/ospm/ui/UIConstants","tao/ospm/ui/widgets/TableHelperN","tao/ospm/common/Constants","tao/ospm/ui/views/ContextMenuView"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m){function p(e){var t=i.createInlineContainer("ospm_entry_infotext");return"string"==typeof e?e=" "+e:Array.isArray(e)&&e.length>0&&(e[0]=" "+e[0]),i.createMarkupDomTree(null,t,e),t}function f(e,t){var n,o,r;return n=i.createTableRow("ospm_help_message_container"),n.classList.add("ospm_hidden"),o=i.createTableCell("ospm_table_cell ospm_table_help_message_cell"),o.setAttribute("colspan",t),r=i.createContainer("ospm_help_message"),o.appendChild(r),n.appendChild(o),i.createMarkupDomTree(null,r,e),n}function g(e){var t,n,o,r,s,a,l=e.model;return t=i.createTable("ospm_table"),e.hasClickListeners()&&t.classList.add("ospm_clickable"),l.hasColumnHeaders()&&(o=i.createTableHeader(),t.appendChild(o)),l.hasSummingRow()&&(s=i.createTableFooter(),t.appendChild(s)),r=i.createTableBody(),t.appendChild(r),l.rows.forEach(function(t,c){var u=l.hasColumnHeaders()&&0===c,d=c===l.getRowsCount()-1,h=l.hasSummingRow()&&d,m=i.createTableRow("ospm_table_row");l.hasSummingRow()&&(d=c===l.getRowsCount()-2),u?(o.appendChild(m),l.hasHeaderBorder()||m.classList.add("ospm_table_row_noborder")):h?(s.appendChild(m),m.classList.add("ospm_table_summingrow")):(d&&m.classList.add("ospm_last_row"),r.appendChild(m)),t.hidden&&m.classList.add("ospm_hidden"),t.indent>0&&m.classList.add("ospm_indent_level_"+t.indent),t.cells.forEach(function(t,i){var o=l.hasRowHeaders()&&0===i,r=e.model.getColumnFormatter(i),s=null;o&&(s=r.getHintText(t.rowIndex,t.hintText,e)||t.hintText),n=_(e,t,o,u,s),m.appendChild(n),s&&(a=f(s,l.getColumnsCount()),m.parentNode.appendChild(a))})}),t}function _(e,t,n,a,c){var m,f,g,_,v,b,y,C,w,E,L,k,x,A,O,N,M=0;return w=e.model.getColumnFormatter(t.columnIndex),m=n||a?i.createTableHeaderCell():i.createTableCell(),m.classList.add("ospm_table_cell"),a&&(m.classList.add("ospm_table_column_header_cell"),y=e.model.getColumnHeaderStyle(t.columnIndex)),g=t.getLines(),M=g.length-1,g.forEach(function(g,C){f=i.createContainer("ospm_table_cell_content"),0===t.columnIndex&&(L=w.getIcon(t.rowIndex,t.columnIndex,g.leftIcon,e,C),L&&(_=S(L,32,function(){e.isEnabled()&&L.action(e,{row:t.rowIndex,column:t.columnIndex,cellLine:C})}),_&&(_.classList.add(u.LEFT_ICON_DEFAULT_CLASS),m.classList.add("ospm_has_lefticon"),f.appendChild(_)))),v=i.createInlineContainer("ospm_table_label"),y=T(e,t,C),f.classList.add("ospm_text_style_"+y),f.appendChild(v),(a||n)&&(x=w.getInfoText(t.rowIndex,t.columnIndex,g.infoText,e,C)||g.infoText,x&&(E=p(x),f.appendChild(E))),t.columnIndex>0&&(L=w.getIcon(t.rowIndex,t.columnIndex,g.rightIcon,e,C),L&&(_=D(e,L,t,C),_&&(m.classList.add("ospm_has_righticon"),_.classList.add(u.RIGHT_ICON_DEFAULT_CLASS),f.appendChild(_)))),i.createMarkupDomTree(e,v,w.format(t.rowIndex,t.columnIndex,g.value,e,C)),(null===g.value||0===g.value.length)&&f.classList.add("ospm_empty_cell"),b=w.getHorizontalAlignment(t.rowIndex,t.columnIndex,g.value,e,C),b===l.ALIGNMENT.LEFT?f.classList.add("ospm_table_cell_alignment_left"):b===l.ALIGNMENT.CENTER?f.classList.add("ospm_table_cell_alignment_center"):b===l.ALIGNMENT.RIGHT&&f.classList.add("ospm_table_cell_alignment_right"),c&&C===M&&(k=w.getHintIcon(t.rowIndex,t.hintIcon,e)||"help",_=s.isNBF()?r.HintMixin.buildHintIconForTooltip():r.HintMixin.buildHintIconDom(),r.HintMixin.hasHintIconChanged(_,"",k),_.classList.remove("ospm_hidden"),s.addActionListener(_,function(){d.toggleHelp(_)},!1,!0),f.appendChild(_),s.isNBF()&&c&&r.HintMixin.setHint(c)),a&&e.model.isColumnSortable(t.getColumnIndex())?a&&e.model.isColumnSortable(t.getColumnIndex())&&(f.classList.add("ospm_sortable"),e.model.sortDir&&e.model.sortColumnIndex===t.getColumnIndex()&&e.model.sortCellLineIndex===C?(f.classList.add("ospm_column_sorting_"+e.model.sortDir),N=e.model.sortDir):N="",s.isNBF()&&(A=i.createContainer("ospm_table_sort_icons"),O=o.createIcon(h.ICONS.DOWN_SORT_ARROW_S),O.classList.add(""===N||"asc"===N?"ospm_table_sort_active":"ospm_table_sort_inactive"),A.appendChild(O),O=o.createIcon(h.ICONS.UP_SORT_ARROW_S),O.classList.add(""===N||"desc"===N?"ospm_table_sort_active":"ospm_table_sort_inactive"),A.appendChild(O),f.appendChild(A)),s.addActionListener(f,function(n){I(n.target)||I(n.target.parentNode)||e.sort(t.columnIndex,null,null,C)})):s.addClickListener(f,function(){e.notifyClickListeners({row:t.rowIndex,column:t.columnIndex,cellLine:C})}),m.appendChild(f)}),t.visible||m.classList.add("ospm_table_cell_invisible"),C=e.model.getColumnWidth(t.columnIndex),null!==C&&0===t.rowIndex&&(m.style.width=C+"%"),m}function v(e){var t,n,o,a,l,c,h,m,f=e.model;return t=i.createTable("ospm_table"),e.hasClickListeners()&&t.classList.add("ospm_clickable"),f.rows.forEach(function(g,_){var v,b,y,C,w,E=f.hasColumnHeaders()&&0===_,L=i.createContainer("ospm_table_rowblock"),I=g.getLastCell(),k=I.getLine(0);return E?(o=g,c=o.getCell(0),void(f.hasRowHeaders()&&(n=i.createContainer("ospm_table_title ospm_text_style_23"),h=c.getLines(),l=e.model.getColumnFormatter(0),h.forEach(function(t,o){y=i.createContainer("ospm_table_cell_content"),m=i.createInlineContainer("ospm_table_label"),v=l.getIcon(c.rowIndex,c.columnIndex,t.leftIcon,e,o),v&&(b=S(v,32,function(){e.isEnabled()&&v.action(e,{row:c.rowIndex,column:c.columnIndex,cellLine:o})}),b&&(b.classList.add(u.LEFT_ICON_DEFAULT_CLASS),n.classList.add("ospm_has_lefticon"),y.appendChild(b))),s.addClickListener(y,function(){e.notifyClickListeners({row:0,column:0,cellLine:o})}),i.createMarkupDomTree(null,m,t.value),y.appendChild(m),C=l.getInfoText(0,0,t.infoText,e,o)||t.infoText,C&&(w=p(C),y.appendChild(w)),n.appendChild(y)}),t.appendChild(n)))):(t.appendChild(L),void g.cells.forEach(function(t,c){var h,m,v,b,w,E,x,A,O,N,M=f.hasRowHeaders()&&0===c;l=e.model.getColumnFormatter(c),M?(h=i.createContainer("ospm_table_rowblock_header_wrapper"),a=i.createContainer("ospm_table_rowblock_header ospm_text_style_23"),h.appendChild(a),x=t.getLines(),x.forEach(function(o,c){var f,g,_=null;y=i.createContainer("ospm_table_cell_content"),0===t.columnIndex&&(O=l.getIcon(t.rowIndex,t.columnIndex,o.leftIcon,e,c),O&&(N=S(O,32,function(){e.isEnabled()&&O.action(e,{row:t.rowIndex,column:t.columnIndex,cellLine:c})}),N&&(N.classList.add(u.LEFT_ICON_DEFAULT_CLASS),a.classList.add("ospm_has_lefticon"),y.appendChild(N))),0===c&&(f=l.getHintText(t.rowIndex,t.hintText,e),f&&(_=s.isNBF()?r.HintMixin.buildHintIconForTooltip():r.HintMixin.buildHintIconDom(),r.HintMixin.hasHintIconChanged(_,"","help"),_.classList.remove("ospm_hidden"),s.addActionListener(_,function(){d.toggleHelp(_)},!1,!0),s.isNBF()&&f?r.HintMixin.setHint(f):(g=i.createContainer("ospm_help_message_container ospm_hidden"),b=i.createContainer("ospm_help_message"),i.createMarkupDomTree(null,b,f),g.appendChild(b),h.appendChild(g))))),m=i.createInlineContainer("ospm_table_rowblock_header_label"),i.createMarkupDomTree(null,m,o.value),n=i.createContainer("ospm_table_rowblock_cell ospm_table_rowblock_value_cell"),y.appendChild(m),C=l.getInfoText(t.rowIndex,t.columnIndex,o.infoText,e,c)||o.infoText,C&&(v=p(C),y.appendChild(v)),_&&y.appendChild(_),a.appendChild(y),k.rightIcon&&"drilldown"===k.rightIcon&&(a.classList.add("ospm_table_drilldown"),a.classList.add("ospm_icon_drilldown")),s.addClickListener(y,function(){e.notifyClickListeners({row:t.rowIndex,column:t.columnIndex,cellLine:c})}),L.appendChild(h)})):(w=i.createContainer("ospm_table_rowblock_column"),o&&(n=i.createContainer("ospm_table_rowblock_cell ospm_table_rowblock_column_header_cell ospm_text_style_24"),o.getCell(c).getLines().forEach(function(o,r){y=i.createContainer("ospm_table_cell_content"),E=l.format(_,c,o.value,e,r),i.createMarkupDomTree(null,y,E),C=l.getInfoText(t.rowIndex,t.columnIndex,o.infoText,e,r)||o.infoText,C&&(v=p(C),y.appendChild(v)),n.appendChild(y)}),w.appendChild(n)),n=i.createContainer("ospm_table_rowblock_cell ospm_table_rowblock_value_cell"),x=g.getCell(c).getLines(),x.forEach(function(o,r){var a,d;E=l.format(_,c,o.value,e,r),y=i.createContainer("ospm_table_cell_content"),i.createMarkupDomTree(e,y,E),A=T(e,t,r),y.classList.add("ospm_text_style_"+A),t.columnIndex>0&&(t!==I||"drilldown"!==o.rightIcon)&&(a=l.getIcon(t.rowIndex,t.columnIndex,o.rightIcon,e,r),a&&(d=D(e,a,t,r),d&&(d.classList.add(u.RIGHT_ICON_DEFAULT_CLASS),n.classList.add("ospm_has_righticon"),y.appendChild(d)))),s.addClickListener(y,function(){e.notifyClickListeners({row:t.rowIndex,column:t.columnIndex,cellLine:r})}),n.appendChild(y)}),w.appendChild(n),L.appendChild(w))}))}),t}function b(e){var t,n;if(a.isArray(e.values)&&e.values.length){if(!e.values[0].length)throw new c("Ungültiger Parameter: values");for(t=0;t<e.values.length;t++)if(!a.isArray(e.values[t])||e.values[t].length!==e.values[0].length)throw new c("Ungültiger Parameter: values["+t+"]")}else{if(!a.isNumber(e.columns)||!e.columns)throw new c("Fehlender Parameter columns oder ungültiger Parameter values");for(n=[],t=0;t<e.columns;t++)n.push(null);e.values=[n]}}function y(e){var n,i;return b(e),n=new t.MTable,n.setColumnHeaders(e.columnHeaders),n.setRowHeaders(e.rowHeaders),n.setValues(e.values),n.setColumnWidth(e.width),n.setColumnFormatter(e.formatter),n.setColumnSortable(e.sortable),n.setSummingRow(!!e.summingRow),n.setColumnSortListener(e.columnSortListener),n.forceNormalView=e.forceNormalView===!0,n.forEachCell(function(t){i=t.getLines(),i.forEach(function(i,o){n.hasRowHeaders()&&0===t.columnIndex?(a.isArray(e.infoTexts)&&i.setInfoText(e.infoTexts[t.rowIndex]),a.isArray(e.leftIcon)?a.isArray(e.leftIcon[t.rowIndex])?i.setLeftIcon(e.leftIcon[t.rowIndex][o]):0===o&&i.setLeftIcon(e.leftIcon[t.rowIndex]):a.isStringProvided(e.leftIcon)&&i.setLeftIcon(e.leftIcon)):(t.columnIndex===n.getColumnsCount()-1&&(a.isArray(e.rightIcon)?a.isArray(e.rightIcon[t.rowIndex])?i.setRightIcon(e.rightIcon[t.rowIndex][o]):0===o&&i.setRightIcon(e.rightIcon[t.rowIndex]):a.isStringProvided(e.rightIcon)&&i.setRightIcon(e.rightIcon)),a.isArray(e.cellIcon)&&a.isArray(e.cellIcon[t.rowIndex])&&(Array.isArray(e.cellIcon[t.rowIndex][t.columnIndex])&&e.cellIcon[t.rowIndex][t.columnIndex][o]?i.setRightIcon(e.cellIcon[t.rowIndex][t.columnIndex][o]):0===o&&i.setRightIcon(e.cellIcon[t.rowIndex][t.columnIndex])))})}),n}function C(e){var t;return t=e.mobileMode&&!e.isForceNormalView()?v(e):g(e)}function w(e){var t=v(e);e.dom.parentNode&&e.dom.parentNode.replaceChild(t,e.dom),e.dom=t}function E(e){var t=g(e);e.dom.parentNode&&e.dom.parentNode.replaceChild(t,e.dom),d.updateMinHeight(e),e.dom=t}function L(e){var t=C(e);e.dom.parentNode&&(Array.prototype.forEach.call(e.dom.classList,function(e){t.classList.add(e)}),t.id=e.dom.id,e.dom.parentNode.replaceChild(t,e.dom)),e.dom=t,d.updateMinHeight(e)}function S(e,t,n){var i,r;return r=a.deepCopy(e),a.hasProperty(r,"action")&&a.deleteProperty(r,"action"),i=o.createIcon(r,t),e&&"function"==typeof e.action&&"function"==typeof n&&(i.classList.add("ospm_clickable"),s.addActionListener(i,function(){n(e,i)})),i}function D(e,t,n,i){return S(t,16,function(t,o){var r;e.isEnabled()&&(r=t.action(e,{row:n.rowIndex,column:n.columnIndex,cellLine:i}),r&&(o.parentNode.classList.add("ospm_active"),new m({content:r,alignAtWidget:e,hideListener:function(){o.parentNode.classList.remove("ospm_active")}}).show({horizontalAlignment:h.HORIZONTAL_ALIGNMENT.RIGHT,hOffset:x,vOffset:A,alignDom:o,disableActiveClassToggling:!0})))})}function T(e,t,n){var i,o,r=t.getLine(n),s=e.model.getColumnFormatter(t.columnIndex);return i=s.getTextStyle(t.rowIndex,t.columnIndex,r.value,e,n),s===e.model.getDefaultFormatter()?o=r.getTextStyle()||i:(i||(i=l.getDefaultTextStyle(e,t.rowIndex,t.columnIndex,r.value)),o=i||r.getTextStyle()),o}function I(e){return e&&e.classList.contains("ospm_icon")&&e.classList.contains("ospm_clickable")}var k,x=32,A=24;return k=n.subclass({stepData:null,constructor:function(e,t){this.stepData=t,this.model=y(e),this.setVisibleCell(e.cellVisible),this.setHiddenRow(e.rowHidden),this.setValueStyle(e.valueStyle),this.setIndent(e.rowIndent),this.mobileMode=s.isMobile(),this.dom=C(this),this.initializeFields(e)},initializeFields:function(e){this.setClickListener(e.clickListener),k.parent.initializeFields.call(this,e)},getSortedRowIndex:function(e){var t;if(this.model.isRowIndexValid(e))for(t=0;t<this.model.getRowsCount();t++)if(this.model.getCell(t,0).rowIndex===e)return t;return null},getOriginalRowIndex:function(e){return this.model.isRowIndexValid(e)?this.model.getCell(e,0).rowIndex:null},setColumnHeaderStyle:function(e,t){this.model.hasColumnHeaders()&&this.model.isColumnIndexValid(e)&&this.model.setColumnHeaderStyle(t,e),s.updateElement(this)},setValue:function(e,n,i,o){var r,l,c,u;if(this.model.isColumnIndexValid(n)&&a.isNumber(e)&&e>=0){if(e>=this.model.getRowsCount())for(l=0;l<=e-this.model.getRowsCount();l++){for(u=new t.MTableRow,c=0;c<this.model.getColumnsCount();c++)u.addCell(new t.MTableCell);this.model.addRow(u)}r=this.model.getCell(e,n),r.lines.length>0&&(r.lines=[]),(!Array.isArray(i)||2===i.length&&"function"==typeof i[1])&&(i=[i]),r.setValue(i),this.model.hasColumnHeaders()&&0===e&&this.setColumnHeaderStyle(n,o),s.updateElement(this)}},setValues:function(e){var t=this.model;a.isArray(e)&&e.length&&e.every(function(e){return a.isArray(e)&&e.length===t.getColumnsCount()})&&(t.setValues(e),s.updateElement(this))},getValue:function(e,t,n){var i,o=[];return this.model.isRowIndexValid(e)&&this.model.isColumnIndexValid(t)?(i=this.model.getCell(e,t),i.isLineIndexValid(n)?i.getLine(n).value:i.lines.length>1?(i.lines.forEach(function(e){o.push(e.value)}),o):i.getLine(0).value):null},getStringValue:function(e,t){var n,i=[],o=this;return this.model.isRowIndexValid(e)&&this.model.isColumnIndexValid(t)?(n=this.getValue(e,t),Array.isArray(n)?(n.forEach(function(n){i.push(o.getFormatter(t).format(e,t,n,o))}),i):this.getFormatter(t).format(e,t,n,this)):""},setFormatter:function(e,t){this.model.setColumnFormatter(t,e),s.updateElement(this)},getFormatter:function(e){return this.model.getColumnFormatter(e)},setSortable:function(e,t){var n=this;Array.isArray(e)?e.forEach(function(e,t){n.model.setColumnSortable(e,t)}):this.model.setColumnSortable(e,t),s.updateElement(this)},setColumnSortListener:function(e){this.model.setColumnSortListener(e),s.updateElement(this)},isSortable:function(e){return this.model.hasColumnHeaders()?this.model.isColumnIndexValid(e)?!!this.model.getCell(0,e).sortable:this.model.getRow(0).cells.some(function(e){return!!e.sortable}):!1},sort:function(e,t,n,i){var o;this.model.isColumnIndexValid(e)&&(this.model.sortDir="asc"===n||"desc"===n?n:"desc"===this.model.sortDir&&this.model.sortColumnIndex===e?"asc":"desc",this.model.sortColumnIndex=e,this.model.sortCellLineIndex=i,o=this.model.getColumnSortListener(),o&&o(this,this.model.sortColumnIndex,this.model.sortDir,i)||this.model.sort(t),s.updateElement(this))},setDrilldown:function(e){var t;this.model.isRowIndexValid(e)&&(t=this.model.getRow(e).getLastCell().getLine(0),"drilldown"!==t.rightIcon&&(t.rightIcon="drilldown",s.updateElement(this)))},removeDrilldown:function(e){var t;this.model.isRowIndexValid(e)&&(t=this.model.getRow(e).getLastCell().getLine(0),"drilldown"===t.rightIcon&&(t.rightIcon=null,s.updateElement(this)))},removeAllDrilldowns:function(){var e,t=!1;this.model.rows.forEach(function(n){e=n.getLastCell().getLine(0),"drilldown"===e.rightIcon&&(e.rightIcon=null,t=!0)}),t&&s.updateElement(this)},hasDrilldown:function(e){return this.model.isRowIndexValid(e)&&"drilldown"===this.model.getRow(e).getLastCell().getLine(0).rightIcon},isForceNormalView:function(){return this.model.forceNormalView},setForceNormalView:function(e){this.model.forceNormalView=e===!0,s.updateElement(this)},onResize:function(){!s.isMobile()||this.mobileMode||this.isForceNormalView()?!s.isMobile()&&this.mobileMode&&(E(this),this.mobileMode=!1):(w(this),this.mobileMode=!0),k.parent.onResize.call(this)},updateDisplay:function(){L(this),k.parent.updateDisplay.call(this)},afterRenderLayout:function(){d.updateMinHeight(this)},getClassName:function(){return"Table"},setHeaderBorder:function(e){this.model.hasColumnHeaders()&&(this.model.setHeaderBorder(e),s.updateElement(this))},isHeaderBorder:function(){return this.model.hasHeaderBorder()}}),k.proto(r.ClickMixin,d.Mixin),k}),define("tao/ospm/ui/widgets/tableV2/Column",["tao/lib/stapes","tao/ospm/common/OSPMError","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/common/Constants","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/ui/BoxAlignment"],function(e,t,n,i,o,r,s){var a;return a=e.subclass({label:"",width:null,colspan:"",sort:"",sortOrder:"",table:null,columnId:"",columnIndex:0,hasRowSelection:!1,filter:null,currentFilterValue:null,TYPE:"",getColumnId:function(){return this.columnId},setColumnId:function(e){this.columnId=e},getLabel:function(){return this.label},setLabel:function(e){this.label=e},getWidth:function(){return this.width},setWidth:function(e){this.width=e},getType:function(){throw new t("Column must implement getType")},getColspan:function(){return this.colspan},setColspan:function(e){this.colspan=e},constructor:function(e){this.initializeFields(e)},initializeFields:function(e){e.label&&(this.label=e.label),e.width&&(this.width=e.width),e.colspan&&(this.colspan=e.colspan),e.sort&&(this.sort=e.sort),e.sortOrder&&(this.sortOrder=e.sortOrder),this.columnId=e.columnId?e.columnId:s.randomUUID(),e.filter?(this.filter=e.filter,this.filter.enabled||(this.filter.enabled=!1),this.filter.filterType||(this.filter.filterType="text"),this.filter.options||(this.filter.options=[])):this.filter={enabled:!1,filterType:"text",options:[]}},isCellSelected:function(){return!1},buildFilterDom:function(){var e,t,s,a,l;return l=function(e){void 0!==e?this.currentFilterValue=e:"text"===this.filter.filterType?this.currentFilterValue=t.value:"options"===this.filter.filterType&&(this.currentFilterValue=[],Array.from(t.getElementsByTagName("option")).forEach(function(e){e.selected&&this.currentFilterValue.push(e.value)}.bind(this)),0===this.currentFilterValue.length&&(this.currentFilterValue=null)),this.table.pagination&&this.table.setCurrentPage(1),r.updateElement(this.table)}.bind(this),e=n.createContainer("ospm_table_v2_filter_container"),e.classList.add("ospm_hidden"),"text"===this.filter.filterType?(t=n.createInput("text","opsm_table_v2_filter"),t.value=this.currentFilterValue,e.appendChild(t),e.appendChild(i.createIcon({name:o.ICONS.MAGNIFIER_M,action:function(){l()}},16))):"options"===this.filter.filterType&&(t=n.createSelect("opsm_table_v2_filter"),t.toggleAttribute("multiple",!0),t.classList.add("ospm_hidden"),e.classList.add("ospm_table_v2_filter_multiple"),e.appendChild(t),s=n.createInput("text","opsm_table_v2_filter"),this.currentFilterValue&&(s.value=this.currentFilterValue.map(function(e){return this.filter.options.find(function(t){return t.value===e}).label}.bind(this)).join(", ")),e.appendChild(s),e.appendChild(i.createIcon({name:o.ICONS.FILTER_S,action:function(){l()}},16)),this.filter.options.forEach(function(e){var i=n.createOption(e.value,e.label);this.currentFilterValue&&-1!==this.currentFilterValue.indexOf(e.value)&&i.toggleAttribute("selected",!0),t.appendChild(i)}.bind(this)),s.addEventListener("focus",function(){s.classList.add("ospm_hidden"),t.classList.remove("ospm_hidden"),t.focus()})),a=i.createIcon({name:o.ICONS.CANCEL_S,action:function(){l(null)}},12),e.appendChild(a),r.addClickListener(t,function(){},!1,!0),r.addKeyEventListener("keydown",t,function(e){e.stopPropagation()}),r.addKeyEventListener("keyup",t,function(e){var n=r.getEventCode(e);-1!==[o.KEYCODES.ENTER].indexOf(n)&&l(t.value),e.stopPropagation()}),e},showFilter:function(e){var t,n;e.parentElement.classList.add("ospm_table_v2_filter_visible"),e.classList.remove("ospm_hidden"),t=e.getElementsByTagName("input"),t.length>0?t[0].focus():(n=e.getElementsByTagName("select"),n.length>0&&n[0].focus())},toggleSort:function(){var e=this.sortOrder;this.table.resetSort(),this.sortOrder="asc"===e?"desc":"desc"===e?"":"asc",r.updateElement(this.table)},buildHeaderDom:function(){var e,t,s,a,l,c,u,d,h;return e=n.createTableHeaderCell("ospm_table_v2_column_header"),t=n.createContainer(),e.classList.add("ospm_table_v2_header_no_icons"),e.appendChild(t),s=n.createSpanLabel(this.label),t.appendChild(s),a=n.createContainer("ospm_table_v2_column_icons"),t.appendChild(a),this.filter.enabled&&(d=o.ICONS.MAGNIFIER_M,"options"===this.filter.filterType&&(d=o.ICONS.FILTER_S),e.classList.remove("ospm_table_v2_header_no_icons"),u=i.createIcon(d,16),a.appendChild(u),u.setAttribute("tabindex",0),u.classList.add("ospm_clickable"),u.classList.add("ospm_table_v2_filter_icon"),h=this.buildFilterDom(),e.appendChild(h),r.addActionListener(u,function(){this.showFilter(h)}.bind(this),!1,!0),this.currentFilterValue&&this.showFilter(h)),this.sort&&(l=n.createContainer("ospm_table_v2_sort_icons"),e.classList.remove("ospm_table_v2_header_no_icons"),c=i.createIcon(o.ICONS.DOWN_SORT_ARROW_S),c.classList.add(""===this.sortOrder||"asc"===this.sortOrder?"ospm_table_v2_sort_active":"ospm_table_v2_sort_inactive"),l.appendChild(c),c=i.createIcon(o.ICONS.UP_SORT_ARROW_S),c.classList.add(""===this.sortOrder||"desc"===this.sortOrder?"ospm_table_v2_sort_active":"ospm_table_v2_sort_inactive"),l.appendChild(c),l.setAttribute("role","button"),l.setAttribute("tabindex",0),a.appendChild(l),r.addActionListener(l,this.toggleSort.bind(this),!1,!0),e.classList.add("ospm_table_v2_column_sortable"),r.addActionListener(e,this.toggleSort.bind(this),!1,!0)),this.width&&(e.classList.add("ospm_table_v2_column_fixed_width"),e.style.width=this.width,e.style.minWidth=this.width,e.style.maxWidth=this.width),e},buildDom:function(){throw new t("Column must implement buildDom")},resolveParameterOrFunction:function(e,n){if("string"==typeof n)return Object.prototype.hasOwnProperty.call(e,n)?e[n]:null;if("function"==typeof n)return n(e);throw new t("Invalid parameter definition, it must be either a string or a function")},onClick:function(e,t){var n;this.hasRowSelection&&(n=this.table.getColumns(),n.length>0&&n[0].onClick(e,t.parentNode.firstChild))}})}),define("tao/ospm/ui/widgets/tableV2/TableV2",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/tableV2/Column","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/ui/IconFactory","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a){function l(e){var t,n,i,o,r=p(e);e.dom.parentNode&&(o=e.dom.children[0],n=o.scrollTop,i=o.scrollLeft,Array.prototype.forEach.call(e.dom.classList,function(e){r.classList.add(e)}),r.id=e.dom.id,e.dom.parentNode.replaceChild(r,e.dom),o=r.children[0],o.scrollTop=n,o.scrollLeft=i),e.pagination&&(t=f(e),r.appendChild(t),r.classList.add("has_pagination")),e.dom=r}function c(e){var t=e.columns.length;return e.subTable&&(t+=1),t}function u(e){var t,i,o;return t=n.createTableHeader(),i=n.createTableRow(),t.appendChild(i),e.columns.forEach(function(e){i.appendChild(e.buildHeaderDom())}),e.subTable&&(o=n.createTableHeaderCell(),i.appendChild(o)),t}function d(e){var i,o,r=!1;return i=n.createTableBody(),o=e.values.slice(),e.columns.length>0&&("checkbox"===e.columns[0].getType()||"radio"===e.columns[0].getType())&&(r=!0),e.columns.forEach(function(e,t){e.hasRowSelection=r,e.columnIndex=t,e.filter.enabled&&e.currentFilterValue&&(o=o.filter(function(t){var n=e.resolveParameterOrFunction(t,e.filter.filter);return"text"===e.filter.filterType?-1!==n.toLowerCase().indexOf(e.currentFilterValue.toLowerCase()):e.currentFilterValue&&-1!==e.currentFilterValue.indexOf(n)})),""!==e.sortOrder&&(o.sort(function(t,n){var i,o;return i=e.resolveParameterOrFunction(t,e.sort),o=e.resolveParameterOrFunction(n,e.sort),o>i?-1:i>o?1:0}),"desc"===e.sortOrder&&o.reverse())}),e.rowsCount=o.length,e.pagination&&(o=o.slice((e.currentPage-1)*e.rowsPerPage,e.currentPage*e.rowsPerPage)),o.forEach(function(l,c){var u,d,h,p,f,g,_,v,b,y,C,w,E,L=n.createTableRow();for(r&&L.classList.add("ospm_table_v2_row_hover"),c===o.length-1&&L.classList.add("ospm_last_row"),u=0;u<e.columns.length;u++)d=e.columns[u],h=n.createTableCell(),"text"===d.getType()&&d.alignment&&(E=d.alignment,("left"===E||"right"===E||"center"===E)&&h.classList.add("ospm_table_v2_column_text_"+E)),d.getWidth()&&(h.classList.add("ospm_table_v2_column_fixed_width"),h.style.width=d.getWidth()+"px",h.style.minWidth=d.getWidth()+"px",h.style.maxWidth=d.getWidth()+"px"),h.classList.add("ospm_table_v2_column_"+d.getType()),h.addEventListener("click",function(e,t,n){e.onClick(l,t),n.preventDefault(),n.stopPropagation()}.bind(null,d,h)),h.classList.toggle("ospm_table_v2_column_selected",d.isCellSelected(l)),f=d.resolveParameterOrFunction(l,d.getColspan()),f||(f=1),f>1&&(u+=f-1),p=d.buildDom(l),h.appendChild(p),h.setAttribute("colspan",f),L.appendChild(h),0===u&&r?(b=d.resolveParameterOrFunction(l,e.getRowId()),d.isRowSelected(b)&&L.classList.add("ospm_table_v2_row_selected")):"checkbox"===d.getType()&&(b=d.resolveParameterOrFunction(l,e.getRowId()),d.isRowSelected(b)&&h.classList.add("ospm_table_v2_column_selected"));e.subTable&&(w=t.prototype.resolveParameterOrFunction.call(null,l,e.getSubTable()),v=m(e,l,w),g=n.createTableCell(),g.classList.add("ospm_table_v2_sub_table_toggle"),C=function(e){var t;return t=s.createIcon({name:e?a.ICONS.DOWN_S:a.ICONS.UP_S,label:e?"Details anzeigen":"Details ausblenden",action:y}),t.setAttribute("aria-expanded",e?"false":"true"),t},y=function(){var e=v.classList.toggle("ospm_hidden");L.classList.toggle("ospm_table_v2_nesting_open",!e),g.removeChild(_),_=C(e),g.appendChild(_),_.focus()},w||(y=void 0),_=C(!0),_.setAttribute("aria-expanded","false"),g.appendChild(_),L.appendChild(g)),i.appendChild(L),v&&(i.appendChild(v),c===o.length-1&&v.classList.add("ospm_last_row"))}),i}function h(e,t){var o=n.createContainer(),r=n.createContainer();o.classList.add("ospm_table_v2_load_more"),o.appendChild(r),r.setAttribute("tabindex","0"),r.appendChild(n.createSpanLabel(e.loadMoreText)),r.appendChild(s.createSimpleIcon(a.ICONS.DOWN_S)),i.addActionListener(r,function(){e.loading||(e.loading=!0,e.lazyLoading.call(null,function(t,n){e.values=e.values.concat(t),e.moreData=n,i.updateElement(e),e.loading=!1}))},!1,!0),t.appendChild(o)}function m(e,t,o){var r,l,u,d;return o?(r=n.createTableRow(),r.classList.add("ospm_hidden"),r.classList.add("ospm_table_v2_nesting_row"),l=n.createTableCell(),r.appendChild(l),l.setAttribute("colspan",c(e)),u=n.createTable(),l.appendChild(u),u.classList.add("ospm_table_v2_nesting_table"),d=n.createTableBody(),u.appendChild(d),o.forEach(function(e){var t,o,r,l,c,u;t=n.createTableRow(),d.appendChild(t),o=n.createTableHeaderCell(),t.appendChild(o),o.innerText=e.label,r=n.createTableCell(),t.appendChild(r),e.action?(t.classList.add("ospm_table_v2_row_action"),t.setAttribute("tabindex","0"),r.classList.add("ospm_table_v2_nesting_action"),l=n.createContainer("ospm_table_v2_nesting_action_text"),r.appendChild(l),l.innerText=e.value,c=n.createContainer("ospm_table_v2_nesting_action_icon"),r.appendChild(c),u=s.createIcon({name:a.ICONS.NEXT_S}),c.appendChild(u),i.addActionListener(t,function(){e.action()},!1,!0,!0)):r.innerText=e.value}),r):null}function p(e){var t,s,a,l,c;return o.executeLater(function(){if(i.isWithinForm(e))throw new r("Tabelle darf nicht in einem Formular sein")}),t=n.createContainer("ospm_table_v2_parent"),s=n.createContainer("ospm_table_v2_container"),a=n.createTable("ospm_table_v2"),s.appendChild(a),e.stickyHeaders&&a.classList.add("ospm_table_v2_sticky"),e.height&&(e.height=e.height.replaceAll(" ",""),s.style["max-height"]=e.height),l=u(e),e.headerDom=l,c=d(e),e.bodyDom=c,a.appendChild(l),a.appendChild(c),t.appendChild(s),e.lazyLoading&&e.moreData&&h(e,s),t}function f(e){function t(){e.setRowsPerPage(parseInt(l.value,10)),e.setCurrentPage(1)}function i(){var t,i,r,l,c,u;for(r=n.createContainer("ospm_table_v2_pages"),t=n.createButton("ospm_table_v2_page_back_next_button"),1===e.currentPage&&(t.classList.add("ospm_disabled"),t.setAttribute("disabled","disabled")),i=s.createIcon({name:a.ICONS.BACK_S}),i.classList.add("ospm_page_back_next_icon"),t.appendChild(i),t.addEventListener("click",function(){e.setCurrentPage(e.getCurrentPage()-1)}.bind(null,l)),r.appendChild(t),l=0;l<e.rowsCount/e.rowsPerPage;l++)t=n.createButton("ospm_table_v2_page_button",Math.round(l+1).toString()),t.classList.add("ospm_table_v2_page_button_hidden"),t.addEventListener("click",function(t){e.setCurrentPage(t+1)}.bind(null,l)),r.appendChild(t);for(r.childNodes[e.currentPage]&&r.childNodes[e.currentPage].classList.add("ospm_table_v2_selected_page"),u=Math.ceil(e.rowsCount/e.rowsPerPage),c=e.currentPage;c<e.currentPage+5;c++)1===e.currentPage&&r.childNodes[c]?r.childNodes[c].classList.add("ospm_table_v2_page_button_visible"):2===e.currentPage&&r.childNodes[c-1]&&r.childNodes[c-1].classList.add("ospm_table_v2_page_button_visible"),e.currentPage>2&&r.childNodes[c-2]&&r.childNodes[c-2].classList.add("ospm_table_v2_page_button_visible"),e.currentPage===u&&r.childNodes[c-4]?r.childNodes[c-4].classList.add("ospm_table_v2_page_button_visible"):e.currentPage===u&&r.childNodes[c-3]&&r.childNodes[c-3].classList.add("ospm_table_v2_page_button_visible"),e.currentPage===u-1&&r.childNodes[c-3]&&r.childNodes[c-3].classList.add("ospm_table_v2_page_button_visible");t=n.createButton("ospm_table_v2_page_back_next_button"),e.currentPage===u&&(t.classList.add("ospm_disabled"),t.setAttribute("disabled","disabled")),i=s.createIcon({name:a.ICONS.NEXT_S}),i.classList.add("ospm_page_back_next_icon"),t.appendChild(i),t.addEventListener("click",function(){e.setCurrentPage(e.getCurrentPage()+1)}.bind(null,l)),r.appendChild(t),o.appendChild(r)}var o,r,l,c,u,d,h;
for(o=n.createContainer("ospm_table_v2_pagination_view"),r=n.createContainer("ospm_table_v2_select_view"),d=n.createContainer(),r.appendChild(d),d.innerText="Treffer",l=n.createSelect("ospm_table_v2_select_rowsPerPage"),u=0;u<e.optionList.length;u++)c=n.createOption(e.optionList[u],e.optionList[u].toString()),e.rowsPerPage&&parseInt(c.value,10)===e.rowsPerPage&&c.setAttribute("selected",!0),l.appendChild(c);return l.addEventListener("change",t),r.appendChild(l),h=n.createContainer(),r.appendChild(h),h.innerText="von "+Math.round(e.rowsCount).toString(),o.appendChild(r),i(),o}var g,_="Weitere Daten laden";return g=e.subclass({stepData:null,values:[],columns:[],stickyHeaders:!1,height:null,subTable:null,rowId:null,headerDom:null,bodyDom:null,lazyLoading:!1,moreData:!1,loading:!1,loadMoreText:"",pagination:!1,rowsCount:0,rowsPerPage:10,currentPage:1,optionList:[10,20,50,100],getLazyLoading:function(){return this.lazyLoading},setLazyLoading:function(e){if(e&&this.pagination)throw new r("TableV2 kann nicht Pagination und Lazy Loading gleichzeitig aktiv haben.");this.lazyLoading=e,i.updateElement(this)},getLoadMoreText:function(){return this.loadMoreText},setLoadMoreText:function(e){this.loadMoreText=e?e:_,i.updateElement(this)},hasMoreData:function(){return this.moreData},setMoreData:function(e){this.moreData=e,i.updateElement(this)},hasPagination:function(){return this.pagination},setPagination:function(e){if(e&&this.lazyLoading)throw new r("TableV2 kann nicht Pagination und Lazy Loading gleichzeitig aktiv haben.");this.pagination=e,i.updateElement(this)},getRowsPerPage:function(){return this.rowsPerPage},setRowsPerPage:function(e){this.rowsPerPage=e,i.updateElement(this)},getCurrentPage:function(){return this.currentPage},setCurrentPage:function(e){var t;e>0&&e<=Math.ceil(this.rowsCount/this.rowsPerPage)&&(this.currentPage=e,this.dom&&(t=this.dom.children[0],t.scrollTop=0)),i.updateElement(this)},getOptionList:function(){return this.optionList},setOptionList:function(e){this.optionList=e,this.setRowsPerPage(e[0]),i.updateElement(this)},getValues:function(){return this.values},setValues:function(e){this.values=e,i.updateElement(this)},isStickyHeaders:function(){return this.stickyHeaders},setStickyHeaders:function(e){this.stickyHeaders=e,i.updateElement(this)},getHeight:function(){return this.height},setHeight:function(e){this.height=e,i.updateElement(this)},getSubTable:function(){return this.subTable},setSubTable:function(e){this.subTable=e,i.updateElement(this)},getRowId:function(){return this.rowId},getColumns:function(){return this.columns},setColumns:function(e){this.columns=e,this.columns.forEach(function(e){e.table=this}.bind(this)),i.updateElement(this)},addColumn:function(e){this.columns.push(e),e.table=this,i.updateElement(this)},constructor:function(e,t){this.columns=[],this.stepData=t,this.dom=p(this),this.initializeFields(e)},initializeFields:function(e){if(g.parent.initializeFields.call(this,e),e.values&&(this.values=e.values),e.columns&&(this.columns=e.columns,this.columns.forEach(function(e){e.table=this}.bind(this))),e.stickyHeaders&&(this.stickyHeaders=e.stickyHeaders),e.height&&(this.height=e.height),e.subTable&&("boolean"==typeof e.subTable&&(e.subTable="subTable"),this.subTable=e.subTable),e.rowId&&(this.rowId=e.rowId),e.pagination&&(this.pagination=e.pagination),e.lazyLoading){if(this.pagination)throw new r("TableV2 kann nicht Pagination und Lazy Loading gleichzeitig aktiv haben.");this.lazyLoading=e.lazyLoading}e.moreData&&(this.moreData=e.moreData),this.loadMoreText=e.loadMoreText?e.loadMoreText:_},updateDisplay:function(){l(this),g.parent.updateDisplay.call(this)},getClassName:function(){return"TableV2"},resetSort:function(){this.columns.forEach(function(e){e.sortOrder=""})},rebuildHeader:function(){var e;e=u(this),this.headerDom.parentNode.replaceChild(e,this.headerDom),this.headerDom=e},rebuildBody:function(){var e;e=d(this),this.bodyDom.parentNode.replaceChild(e,this.bodyDom),this.bodyDom=e},getSelectedRows:function(){var e;return this.columns.length<=0?[]:(e=this.columns[0],"checkbox"!==e.getType()&&"radio"!==e.getType()?[]:e.getCheckedRows())},getSelectedColumns:function(e){var t=[];return this.columns.forEach(function(n,i){("checkbox"===n.getType()||"radio"===n.getType())&&0!==i&&-1!==n.getCheckedRows().indexOf(e)&&t.push(n.getColumnId())}),t},getAllSelectedCells:function(){var e={};return this.columns.forEach(function(t){var n,i;("checkbox"===t.getType()||"radio"===t.getType())&&(i=t.getColumnId(),n=t.getCheckedRows(),n.forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)||(e[t]=[]),e[t].push(i)}))}),e}})}),define("tao/ospm/ui/widgets/tableV2/TextColumn",["tao/ospm/ui/widgets/tableV2/Column","tao/ospm/core/DomFactory"],function(e,t){var n;return n=e.subclass({value:"",TYPE:"text",alignment:"left",getType:function(){return this.TYPE},constructor:function(e){this.initializeFields(e)},initializeFields:function(e){n.parent.initializeFields.call(this,e),e.value&&(this.value=e.value),e.alignment&&(this.alignment=e.alignment)},buildDom:function(e){var n=t.createSpanLabel("");return t.createMarkupDomTree(this.table,n,this.resolveParameterOrFunction(e,this.value)),n},buildHeaderDom:function(){var e=n.parent.buildHeaderDom.call(this);return("left"===this.alignment||"right"===this.alignment||"center"===this.alignment)&&e.classList.add("ospm_table_v2_column_text_"+this.alignment),e}})}),define("tao/ospm/ui/widgets/tableV2/CheckboxColumn",["tao/ospm/ui/widgets/tableV2/Column","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit"],function(e,t,n,i,o){var r;return r=e.subclass({value:"",checkedRows:[],TYPE:"checkbox",getType:function(){return this.TYPE},getCheckedRows:function(){return this.checkedRows.slice()},isRowSelected:function(e){return-1!==this.checkedRows.indexOf(e)},isCellSelected:function(e){var t,n;return t=this.resolveParameterOrFunction(e,this.table.getRowId()),n=this.isRowSelected(t)},constructor:function(e){this.initializeFields(e)},initializeFields:function(e){r.parent.initializeFields.call(this,e),e.value&&(this.value=e.value),this.checkedRows=[]},buildDefaultHeader:function(){return r.parent.buildHeaderDom.call(this)},buildHeaderDom:function(){var e,t,n,i,o,s;return this.table.getValues().forEach(function(e){return null!==i?(o=this.resolveParameterOrFunction(e,this.table.getRowId()),s=this.checkedRows.indexOf(o),void 0===i?void(i=-1!==s):void(i!==(-1!==s)&&(i=null))):void 0}.bind(this)),e=r.parent.buildHeaderDom.call(this),t=e.firstChild,n=this.buildCheckbox(null,i,function(e){this.checkedRows=e?this.table.getValues().map(function(e){return this.resolveParameterOrFunction(e,this.table.getRowId())}.bind(this)):[],this.table.rebuildBody()}.bind(this)),n.firstChild.appendChild(t),e.prepend(n),e},buildDom:function(e){var n,i,o,r;return i=this.resolveParameterOrFunction(e,this.table.getRowId()),o=this.isRowSelected(i),n=this.buildCheckbox(e,o,function(e){var t;e?this.checkedRows.push(i):(t=this.checkedRows.indexOf(i),-1!==t&&this.checkedRows.splice(t,1)),this.hasRowSelection&&0===this.columnIndex&&n.parentNode.parentNode.classList.toggle("ospm_table_v2_row_selected",e),n.parentNode.classList.toggle("ospm_table_v2_column_selected",e),this.table.rebuildHeader()}.bind(this)),r=t.createSpanLabel(""),t.createMarkupDomTree(this.table,r,this.resolveParameterOrFunction(e,this.value)),n.firstChild.appendChild(r),n},onChecked:function(){},onClick:function(e,t){var n,i,o,r;n=this.resolveParameterOrFunction(e,this.table.getRowId()),o=t.getElementsByTagName("input")[0],r=this.isRowSelected(n),r?(i=this.checkedRows.indexOf(n),o.checked=!1,o.parentNode.removeAttribute("value"),-1!==i&&this.checkedRows.splice(i,1)):(o.checked=!0,o.parentNode.setAttribute("value",!0),this.checkedRows.push(n),this.onChecked(o)),this.hasRowSelection&&0===this.columnIndex&&t.parentNode.classList.toggle("ospm_table_v2_row_selected",!r),t.classList.toggle("ospm_table_v2_column_selected",!r),this.table.rebuildHeader()},buildCheckbox:function(e,i,r){var s,a,l,c,u;return s=t.createContainer("ospm_checkbox"),a=t.createContainer("ospm_checkbox_content"),l=t.createContainer("ospm_checkbox_box"),o.isNBF()?l.appendChild(n.createSimpleIcon("checkbox_filled_s")):(u="checkbox"===this.getType()?"checkbox":"radiobutton",l.appendChild(n.createSimpleIcon(u+"_unselected")),l.appendChild(n.createSimpleIcon(u+"_highlighted")),l.appendChild(n.createSimpleIcon(u+"_selected"))),c=t.createElement("input"),c.addEventListener("change",function(e){l.classList.remove("indeterminate"),c.checked?(l.setAttribute("value",c.checked),r(!0),this.onChecked(c)):(l.removeAttribute("value"),r(!1)),e.preventDefault(),e.stopPropagation()}.bind(this)),c.addEventListener("click",function(e){e.stopPropagation()}),c.setAttribute("type",this.getType()),c.addEventListener("blur",function(){s.classList.remove("ospm_focus_inside")},!1),c.addEventListener("focus",function(){s.classList.add("ospm_focus_inside")},!1),o.addActionListener(c,function(){},!1,!0),l.appendChild(c),document.OSPMEnvironment.useAnimations()===!1&&l.classList.add("ospm_no_transition"),a.append(l),s.append(a),i&&(c.checked=!0,l.setAttribute("value",!0)),null===i&&(l.classList.add("indeterminate"),c.indeterminate=!0),s}})}),define("tao/ospm/ui/widgets/tableV2/RadiobuttonColumn",["tao/ospm/ui/widgets/tableV2/CheckboxColumn","tao/ospm/core/DomFactory","tao/ospm/common/OSPMError"],function(e,t,n){var i;return i=e.subclass({value:"",direction:"column",TYPE:"radio",getType:function(){return this.TYPE},constructor:function(e){this.initializeFields(e)},initializeFields:function(e){if(i.parent.initializeFields.call(this,e),e.direction&&(this.direction=e.direction,"row"!==this.direction&&"column"!==this.direction))throw new n("RadioButtonColumn direction muss column oder row sein")},onChecked:function(e){document.getElementsByName(e.getAttribute("name")).forEach(function(t){if(t!==e){var n=new Event("change");t.dispatchEvent(n)}})},buildHeaderDom:function(){return this.buildDefaultHeader()},buildCheckbox:function(e,t,n){var o,r=i.parent.buildCheckbox.call(this,e,t,n),s=r.getElementsByTagName("input")[0];return o="column"===this.direction?this.columnId:this.resolveParameterOrFunction(e,this.table.getRowId()),r.classList.add("ospm_radiobutton"),s.setAttribute("name",o),r}})}),define("tao/ospm/ui/widgets/tableV2/IconColumn",["tao/ospm/ui/widgets/tableV2/Column","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/common/Toolkit"],function(e,t,n,o){var r;return r=e.subclass({icons:"",TYPE:"icon",getType:function(){return this.TYPE},constructor:function(e){this.initializeFields(e)},initializeFields:function(e){r.parent.initializeFields.call(this,e),e.icons&&(this.icons=e.icons)},buildDom:function(e){var r,s,a,l;if(r=this.resolveParameterOrFunction(e,this.icons),s=t.createContainer("ospm_table_v2_icon_column"),r)for("string"==typeof r&&(r=[{name:r}]),o.isObject(r)&&(r=[r]),i=0;i<r.length;i++)l=r[i],a=n.createIcon(l,16),a&&(s.appendChild(a),l.action&&"function"==typeof l.action&&a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()}));return s}})}),define("tao/ospm/ui/widgets/tableV2/TextIconColumn",["tao/ospm/ui/widgets/tableV2/Column","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/common/Toolkit"],function(e,t,n,i){var o;return o=e.subclass({icons:"",value:"",iconPosition:"left",TYPE:"icon",getType:function(){return this.TYPE},constructor:function(e){this.initializeFields(e)},initializeFields:function(e){o.parent.initializeFields.call(this,e),e.icons&&(this.icons=e.icons),e.value&&(this.value=e.value),e.iconPosition&&(this.iconPosition=e.iconPosition)},buildDom:function(e){var o,r,s,a,l,c;if(o=this.resolveParameterOrFunction(e,this.icons),r=t.createContainer("ospm_table_v2_icon_column"),c=t.createSpanLabel(""),"right"===this.iconPosition&&(t.createMarkupDomTree(this.table,c,this.resolveParameterOrFunction(e,this.value)),c.classList.add("ospm_table_v2_markup_text_icon_right"),r.appendChild(c),r.classList.add("ospm_table_v2_icon_right")),o)for("string"==typeof o&&(o=[{name:o}]),i.isObject(o)&&(o=[o]),l=0;l<o.length;l++)a=o[l],s=n.createIcon(a,16),s&&(r.appendChild(s),a.action&&"function"==typeof a.action&&s.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()}));return"left"===this.iconPosition&&(t.createMarkupDomTree(this.table,c,this.resolveParameterOrFunction(e,this.value)),r.appendChild(c)),r}})}),define("tao/ospm/ui/widgets/YesOrNo",["tao/ospm/common/Constants","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/Button","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants"],function(e,t,n,i,o,r,s){function a(e,t){var n,i;return n=o.createContainer("ospm_yesorno"),i=o.createContainer("ospm_yesorno_wrapper"),n.appendChild(i),e.negativeButtonDom=l(t.negativeLabel||m,!0),e.positiveButtonDom=l(t.positiveLabel||h,!1),i.appendChild(r.isNBF()?e.negativeButtonDom.dom:e.negativeButtonDom),i.appendChild(r.isNBF()?e.positiveButtonDom.dom:e.positiveButtonDom),n}function l(t,i){var s;if(r.isNBF())s=new n,s.setStyle(e.BUTTON_STYLE.SECONDARY),s.setLabel(t),s.setLeftIcon(i?e.ICONS.CANCEL_S:e.ICONS.CHECK_S);else{var a;s=o.createContainer("ospm_yesorno_column"),a=o.createContainer("ospm_yesorno_label"),a.textContent=t,s.appendChild(a)}return s}function c(e){function t(t){var n,i;e.isEnabled()&&(n=e.value,i={value:t},e.value=t,e.notifyClickListeners(i),n!==t&&e.notifyChangeListeners(i))}r.addActionListener(r.isNBF()?e.negativeButtonDom.dom:e.negativeButtonDom,function(){t(!1)}),r.addActionListener(r.isNBF()?e.positiveButtonDom.dom:e.positiveButtonDom,function(){t(!0)})}function u(e){var t=r.isNBF()?e.negativeButtonDom.dom:e.negativeButtonDom,n=r.isNBF()?e.positiveButtonDom.dom:e.positiveButtonDom;e.isEnabled()?(t.setAttribute("tabindex",s.TABINDEXES.DEFAULT),n.setAttribute("tabindex",s.TABINDEXES.DEFAULT),r.isNBF()&&(t.classList.remove("ospm_disabled"),n.classList.remove("ospm_disabled"))):(t.removeAttribute("tabindex"),n.removeAttribute("tabindex"),r.isNBF()&&(t.classList.add("ospm_disabled"),n.classList.add("ospm_disabled")))}var d,h="Ja",m="Nein";return d=t.subclass({stepData:null,negativeButtonDom:null,positiveButtonDom:null,value:!1,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=a(this,e),this.initializeFields(e),c(this)},getValue:function(){return this.value},setValue:function(e){this.value=!!e},setPositiveLabel:function(e){r.isNBF()?this.positiveButtonDom.setLabel(e||m):this.positiveButtonDom.firstChild.textContent=e||h},setNegativeLabel:function(e){r.isNBF()?this.negativeButtonDom.setLabel(e||m):this.negativeButtonDom.firstChild.textContent=e||m},initializeFields:function(e){d.parent.initializeFields.call(this,e),e.clickListener&&this.setClickListener(e.clickListener),e.changeListener&&this.setChangeListener(e.changeListener)},setEnabled:function(e){d.parent.setEnabled.call(this,e);var t=r.isNBF()?this.negativeButtonDom.dom:this.negativeButtonDom,n=r.isNBF()?this.positiveButtonDom.dom:this.positiveButtonDom;this.isEnabled()?(t.setAttribute("aria-disabled","false"),n.setAttribute("aria-disabled","false")):(t.setAttribute("aria-disabled","true"),n.setAttribute("aria-disabled","true"))},updateDisplay:function(){d.parent.updateDisplay.call(this),u(this)},focus:function(){this.positiveButtonDom.focus()},getTabIndex:function(){return this.positiveButtonDom?this.positiveButtonDom.tabIndex:null},getClassName:function(){return"YesOrNo"}}),d.proto(i.ClickMixin,i.ChangeMixin,i.FocusableMixin,i.InputStorageMixin),d}),define("tao/ospm/ui/widgets/Image",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s,a){function l(e){var t=i.createContainer("ospm_image");return e.imageWrapperDom=i.createContainer("ospm_image_wrapper"),t.appendChild(e.imageWrapperDom),e.overlayImageDom=i.createImage("ospm_img_overlay_center"),t}function c(e){var t=e.getImageDom(e.currentGalleryImage-1);!e.fullWidth&&t&&e.size&&(t.style.width=e.size.width*e.zoom/100+"px",e.overlaySize&&(e.overlayImageDom.style.width=e.overlaySize.width*e.zoom/100+"px"))}function u(e,t,n){var i=e.getImageDom(t);i&&i.firstChild&&"svg"===i.firstChild.tagName&&(n?i.firstChild.setAttribute("viewBox","0 0 100 100"):i.firstChild.removeAttribute("viewBox"))}function d(e){var t=e.getImageDom();e.overlayImageDom&&!e.isGalleryMode()&&(!t||t.classList.contains("ospm_hidden")?e.overlayImageDom.classList.add("ospm_hidden"):(e.overlayImageDom.classList.remove("ospm_hidden"),void 0!==e.size&&void 0!==e.overlaySize&&("left"===e.alignment?void 0!==e.size&&void 0!==e.overlaySize&&(e.overlayImageDom.style.left=(t.width-e.overlayImageDom.width)/2+"px",e.overlayImageDom.style.removeProperty("right")):"right"===e.alignment?void 0!==e.size&&void 0!==e.overlaySize&&(e.overlayImageDom.style.right=(t.width-e.overlayImageDom.width)/2+"px",e.overlayImageDom.style.removeProperty("left")):"center"===e.alignment&&(e.overlayImageDom.style.left="0",e.overlayImageDom.style.right="0"))))}function h(e){this.size={width:e?e.target.width:0,height:e?e.target.height:0},100!==this.zoom&&c(this),o.updateElement(this)}var m,p,f=["minimal","small","medium","large"],g=[s.MARGIN.MEDIUM1,s.MARGIN.MEDIUM2,s.MARGIN.LARGE1,s.MARGIN.LARGE2],_=50,v=200;return m=e.subclass({stepData:null,fullWidth:!1,avatar:!1,alignment:"center",constructor:function(e,t){e=e||{},this.stepData=t,this.dom=l(this,e),this.initializeFields(e)},updateDisplay:function(){var e;if(m.parent.updateDisplay.call(this),this.fullWidth?this.dom.classList.add("ospm_full_width"):this.dom.classList.remove("ospm_full_width"),this.avatar?(this.dom.classList.add("ospm_avatar"),this.imageDom[0]&&0!==this.imageDom[0].naturalWidth&&(this.imageDom[0].naturalWidth>=this.imageDom[0].naturalHeight?(this.imageDom[0].classList.remove("ospm_image_portrait"),this.imageDom[0].classList.add("ospm_image_landscape")):(this.imageDom[0].classList.remove("ospm_image_landscape"),this.imageDom[0].classList.add("ospm_image_portrait")))):(this.imageDom[0].classList.remove("ospm_image_landscape"),this.imageDom[0].classList.remove("ospm_image_portrait"),this.dom.classList.remove("ospm_avatar")),this.isGalleryMode())for(e=0;e<this.numImages;e++)this.resizeResponsiveImage(e),u(this,e,this.fullWidth);else this.resizeResponsiveImage(null,h.bind(this)),u(this,0,this.fullWidth);d(this),this.imageWrapperDom.dataset.scrollupdate="true"},onEmptyImagePath:function(){this.setupImage(null)},setFullWidth:function(e){this.fullWidth=!!e,o.updateElement(this)},setZoom:function(e){n.isNumber(e)?(_>e?e=_:e>v&&(e=v),this.zoom=e):this.zoom=100,o.isRendered(this)&&(c(this),o.updateElement(this))},getZoom:function(){return this.zoom},setOverlayImage:function(e){var t;this.isGalleryMode()||(t=this.getImageDom(),!e||t&&t.classList.contains("ospm_hidden")?this.overlayImageDom&&this.overlayImageDom.parentNode===this.imageWrapperDom&&this.imageWrapperDom.removeChild(this.overlayImageDom):(this.imageWrapperDom.appendChild(this.overlayImageDom),o.setImagePath(this.overlayImageDom,e,function(e){this.overlaySize={width:e?e.target.width:0,height:e?e.target.height:0},100!==this.zoom&&c(this),o.updateElement(this)}.bind(this))))},setAvatar:function(e){this.avatar=!!e,o.updateElement(this)},setAlignment:function(e){if(!n.isSet(e)||-1===["left","center","right"].indexOf(e))throw new r("Das alignment muss bei einem Image den Wert left, right oder center besitzen.");this.alignment=e,o.replaceClassNameStartingWith(this.dom,"ospm_image_alignment_","ospm_image_alignment_"+e),o.replaceClassNameStartingWith(this.overlayImageDom,"ospm_img_overlay_","ospm_img_overlay_"+e),this.updateDisplay()},setUpperMargin:function(e){var t=f.indexOf(e);this.setTopMargin(void 0!==e&&-1!==t?g[t]:e)},setLowerMargin:function(e){var t=f.indexOf(e);this.setBottomMargin(void 0!==e&&-1!==t?g[t]:g[0])},afterRenderLayout:function(){o.updateElement(this)},onResize:function(){m.parent.onResize.call(this),o.updateElement(this)},initializeFields:function(e){m.parent.initializeFields.call(this,e),e.topMargin||this.setUpperMargin(e.upperMargin),e.bottomMargin||this.setLowerMargin(e.lowerMargin),this.setAvatar(e.avatar),this.setToggleClickableClass(),this.setImageClickListener(e.imageClickListener),this.setChangeListener(e.changeListener),this.setImagePath(e.imagePath||e.path),e.overlayImagePath&&this.setOverlayImage(e.overlayImagePath),this.setFullWidth(e.fullWidth),this.setZoom(e.zoom),this.setAlignment(e.alignment||"center")},getClassName:function(){return"Image"},setBottomMargin:function(t){o.isNBF()?m.parent.setBottomMargin.call(this,t):e.setBottomPadding(this,t)}}),p={setImagePath:function(e){if(!e)throw new r('Der Parameter "imagePath" ist verpflichtend und darf nicht leer sein.');t.ImageMixin.setResponsiveImagePath.call(this,e,h.bind(this))},buildImageDom:function(e,t){var n;return e?t?a.createDashboardIcon(t,e):a.createIcon(e,0,!1,h.bind(this)):(n=i.createImage("ospm_img"),this.initializeImageTracker(n),n)}},m.proto(t.ImageMixin,p),m}),define("tao/ospm/ui/widgets/Carousel",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory"],function(e,t,n,i,o,r){function s(e){var t=r.createContainer("ospm_carousel");return e.carouselContainer=r.createContainer("ospm_carousel_container"),e.imageWrapperDom=r.createContainer("ospm_image_wrapper"),e.carouselContainer.appendChild(e.imageWrapperDom),t.appendChild(e.carouselContainer),t}function a(e){function t(){var t=50,n=a-c;n>t?e.showNextImage():-1*t>n&&e.showPreviousImage()}var n,i,o,r,s,a=0,l=0,c=0;e.imageWrapperDom.addEventListener("touchstart",function(e){s=!1,a=e.changedTouches[0].screenX,l=e.changedTouches[0].screenY},!1),e.imageWrapperDom.addEventListener("touchmove",function(e){n=e.changedTouches[0].screenX,i=e.changedTouches[0].screenY,o=Math.abs(a-n),r=Math.abs(l-i),o>r?e.preventDefault():s=!0},!1),e.imageWrapperDom.addEventListener("touchend",function(e){c=e.changedTouches[0].screenX,s||t()},!1)}function l(e){function t(t,n){var i=e.imageWrapperDom.getElementsByClassName(n);i.length>0&&i[0].classList.remove(n),t&&t.parentNode.classList.add(n)}var n=e.getImageDom(e.currentGalleryImage-2),i=e.getImageDom(e.currentGalleryImage);t(n,"ospm_carousel_prev"),t(i,"ospm_carousel_next")}function c(e,t){function n(e,t,r,s,a){var l,c,u;e=e||(new Date).getTime(),c=e-i,u=c/a,u=Math.min(u,1),l=r-s*u,t.style.left=l.toFixed(2)+"px",a>c&&o.requestAnimationFrame(function(e){n(e,t,r,s,a)})}var i,r,s=parseInt(e.imageWrapperDom.style.left.replace("px",""),10),a=(e.numImages-1)/2*e.slideWidth-e.slideWidth*(t-1);e.useWebAnimationsAPI?(r=e.imageWrapperDom.animate([{left:s+"px"},{left:a+"px"}],{duration:g,fill:"forwards"}),r.addEventListener("finish",function(){e.imageWrapperDom.style.left=a+"px"})):o.requestAnimationFrame(function(t){i=t||(new Date).getTime(),n(t,e.imageWrapperDom,s,s-a,g)})}function u(e){var t=(e.numImages-1)/2*e.slideWidth-(e.currentGalleryImage-1)*e.slideWidth;e.imageWrapperDom.style.left=t+"px",e.useWebAnimationsAPI&&c(e,e.currentGalleryImage)}function d(e){var t,i,r=64;t=o.isMobile()||o.isNBF()&&o.isElementInSmallColumnLayout(e.dom)?e.carouselContainer.offsetWidth*f/100-r:e.carouselContainer.offsetWidth*p/100,e.slideWidth=t,i=e.getImageDom(),n.isArray(i)||(i=[i]),i.forEach(function(e){e.parentNode.style.width=t+"px"})}var h,m,p=62,f=100,g=400;return h=e.subclass({carouselContainer:null,slideWidth:null,timer:null,useWebAnimationsAPI:!1,beforeImageChangeListener:null,afterImageChangeListener:null,constructor:function(e,t){this.stepData=t,e=n.deepCopy(e)||{},this.dom=s(this,e),this.initializeFields(e),document.OSPMEnvironment.isTouchDevice()&&a(this),"function"==typeof this.imageWrapperDom.animate&&(this.useWebAnimationsAPI=!0)},setImages:function(e){this.setImagePath(e)},initializeFields:function(e){h.parent.initializeFields.call(this,e),this.setImagePath(e.images),this.setInfinite(e.infinite),this.setImageClickListener(e.imageClickListener),this.setBeforeImageChangeListener(e.beforeImageChangeListener),this.setAfterImageChangeListener(e.afterImageChangeListener)},setBeforeImageChangeListener:function(e){if("undefined"!=typeof e){if("function"!=typeof e&&null!==e)throw new i("beforeImageChangeListener muss eine Funktion sein.");this.beforeImageChangeListener=e}},setAfterImageChangeListener:function(e){if("undefined"!=typeof e){if("function"!=typeof e&&null!==e)throw new i("afterImageChangeListener muss eine Funktion sein.");this.afterImageChangeListener=e}},onResize:function(){var e=this;this.timer=n.executeLater(function(){d(e),u(e),e.imageWrapperDom.dataset.scrollupdate="true"},100,this.timer)},beforeImageChanged:function(e,t,n){this.beforeImageChangeListener?this.beforeImageChangeListener(this,function(){n(),c(this,t)}.bind(this),e-1,t-1):(n(),c(this,t))},afterImageChanged:function(e,t){l(this),this.afterImageChangeListener&&this.afterImageChangeListener(this,e-1,t-1)},getClassName:function(){return"Carousel"}}),m={currentGalleryImage:1,useSlideIndicators:!0,infinite:!1,setInfinite:function(e){this.infinite=!!e,this.showImage(this.currentGalleryImage)},setImagePath:function(e){if(!n.isArray(e)||0===e.length)throw new i("Die Angabe der Bilder muss über ein Array von logischen Bildpfaden erfolgen.");this.setResponsiveImagePath(e),l(this),this.onResize()},createImageClickListener:function(e,t){var n=this;o.addActionListener(e,function(){n.imageClickListeners&&this.parentNode.classList.contains("ospm_active")&&n.notifyImageClickListeners({previewImageIndex:t})})}},h.proto(t.ImageMixin,m),h}),define("tao/ospm/ui/widgets/ImageButton",["tao/ospm/ui/widgets/Widget","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/main/LocalStepData","tao/ospm/common/OSPMError","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s,a){function l(e){if(!e.imagePath)throw new o("Ein ImageButton benötigt einen imagePath.");if(!t.isStringProvided(e.label))throw new o("Ein ImageButton benötigt ein Label um zugänglich zu sein.")}function c(e){return e.imageWrapperDom=n.createContainer("ospm_image_button"),e.imageWrapperDom.setAttribute("role","button"),e.imageWrapperDom.setAttribute("tabindex","0"),e.imageWrapperDom}function u(e){var n=e.getImagePath(0);t.isObject(n)||""===n||(t.isSet(e.selectedImagePath)&&e.getValue()&&(n=e.selectedImagePath),s.setImagePath(e.getImageDom(0),n))}function d(e){e.dom.setAttribute("value","true")}function h(e){e.dom.removeAttribute("value")}function m(e){var t,n;if(e.group)for(t=e.group.selectedElements(),n=0;n<t.length;n++)t[n].setValue(!1)}function p(e){s.addActionListener(e.dom,function(){var t=!1;e.isEnabled()&&(e.group&&(e.getValue()||(e.setValue(!0),t=!0)),e.notifyClickListeners(),t&&(e.valueChanged=!0,e.group.notifyChangeListeners()))})}var f;return f=e.subclass({group:null,stepData:null,selectedImagePath:null,imageWrapperDom:null,imageLabelDom:null,imageLabel:null,constructor:function(e,t){e=e||{},this.stepData=t,l(e),this.setInPlaceEditingEnabled(!1),this.dom=c(this),this.initializeFields(e),p(this),u(this)},setSelectedImagePath:function(e){this.selectedImagePath=e,u(this)},setLabel:function(e){if(!t.isStringProvided(e))throw new o("Ein ImageButton benötigt ein Label um zugänglich zu sein.");this.dom.setAttribute("aria-label",e)},getLabel:function(){return this.dom.getAttribute("aria-label")},setImageLabel:function(e){n.createMarkupDomTree(this,this.imageLabelDom,e,{notAllowedTags:["link","click"]})},getImageLabel:function(){return this.imageLabel},setValue:function(e){e?(m(this),d(this)):h(this),u(this)},getValue:function(){return t.isSet(this.dom)&&this.dom.hasAttribute("value")},setGroup:function(e){var t=this.getGroup(),n=i.retrieveSelectionGroup(this.stepData,e);t!==n&&(this.group=n,t&&t.removeElement(this),n&&n.addElement(this))},getGroup:function(){return this.group},afterRenderLayout:function(){s.updateElement(this)},onResize:function(){f.parent.onResize.call(this),s.updateElement(this)},setFullWidth:function(e){s.toggleClassName(this.dom,"ospm_full_width",e),s.updateElement(this)},initializeFields:function(e){f.parent.initializeFields.call(this,e),this.setGroup(e.group),this.setLabel(e.label),this.setImagePath(e.imagePath),this.setImageLabel(e.imageLabel),e.selectedImagePath&&this.setSelectedImagePath(e.selectedImagePath),e.value===!0&&this.setValue(!0),this.setFullWidth(Boolean(e.fullWidth)),e.clickListener&&this.setClickListener(e.clickListener)},getClassName:function(){return"ImageButton"}}),f.proto(r.ClickMixin,r.ImageMixin,r.ValueChangedMixin,{setImagePath:function(e){r.ImageMixin.setResponsiveImagePath.call(this,e),this.imageLabelDom=n.createContainer("ospm_imagelabel"),this.imageWrapperDom.appendChild(this.imageLabelDom),this.imageWrapperDom.appendChild(n.createContainer("ospm_image_button_shadow")),u(this),this.getGroup()||this.initializeInPlaceEditing()},buildImageDom:function(e){var t;return e?(t=a.createIcon(e,0,!1,function(){s.updateElement(this)}.bind(this)),t.classList.add("ospm_image_button_img")):t=n.createImage("ospm_image_button_img"),this.initializeImageTracker(t,this.imageWrapperDom),t}}),f}),define("tao/ospm/ui/widgets/ImageButtonRow",["tao/ospm/ui/widgets/ContainerWidget","tao/ospm/common/Constants","tao/ospm/ui/widgets/ImageButton","tao/ospm/core/DomFactory","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/main/LocalStepData","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s,a,l){function c(e){var t;return t=i.createContainer("ospm_image_button_row"),e.containerDom=i.createLeftAlignedContainer("ospm_image_button_row_container"),t.appendChild(e.containerDom),t.appendChild(e.buildErrorDom()),t}function u(e){var t;if(e)if(e.elements&&o.isArray(e.elements))for(t=0;t<e.elements.length;t++)d(e.elements[t]);else d(e)}function d(e){if(!e)throw new r("Invalid parameters.")}function h(e,t){return t instanceof n?t:new n(t,e.stepData)}var m;return m=e.subclass({stepData:null,mandatory:null,mandatoryMessage:null,constructor:function(e,t){this.elements=[],this.stepData=t,u(e),this.dom=c(this),this.initializeFields(e)},initializeFields:function(e){var t,n;if(e){if(m.parent.initializeFields.call(this,e),e.elements)for(t=0;t<e.elements.length;t++)n=h(this,e.elements[t]),this.addElement(n);this.setMandatory(e.mandatory),this.setMandatoryMessage(e.mandatoryMessage),this.setAlignment(e.alignment),e.wrapMode&&this.setWrapMode(e.wrapMode)}},checkForValidElement:function(e){return e instanceof n?null:"Nur ImageButtons sind als Elemente erlaubt"},isMandatory:function(){return this.mandatory},setMandatory:function(e){this.mandatory=!!e},getMandatoryMessage:function(){return this.mandatoryMessage},setMandatoryMessage:function(e){this.mandatoryMessage=e||t.MANDATORY_PLACEHOLDERS.ROW},setAlignment:function(e){var n=null;(e===t.HORIZONTAL_ALIGNMENT.LEFT||e===t.HORIZONTAL_ALIGNMENT.CENTER||e===t.HORIZONTAL_ALIGNMENT.RIGHT)&&(n="ospm_align_"+e),l.replaceClassNameStartingWith(this.dom,"ospm_align_",n)},checkMandatoryValueEmptyError:function(){var e,t,n,i,r,a,l={},c=this;if(this.mandatory){for(e=this.getElements(),t=0;t<e.length;t++)n=e[t].getGroup(),n&&(l[n.getName()]=!0);o.forKeys(l,function(e){if(l[e]){for(n=s.retrieveSelectionGroup(c.stepData,e),i=n.getElements(),r=!0,t=0;t<i.length;t++)i[t].getValue()&&(r=!1);if(r)return a={code:8,title:"Pflichtfeld",msg:c.getMandatoryMessage()},c.setError(a),a}})}return null},getClassName:function(){return"ImageButtonRow"}}),m.proto(a.ErrorMixin,a.WrapMixin),m}),define("tao/ospm/ui/widgets/Headline",["tao/ospm/common/OSPMError","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/common/Constants","tao/ospm/ui/IconFactory"],function(e,t,n,i,o,r,s,a){function l(e){var t;
return t=i.createElement("h5","ospm_headline"),e.buildLabelDom(s.TEXT_STYLE.HEADLINE2),t.appendChild(e.labelDom),t.appendChild(i.createTextNode(" ")),e.linkDom=i.createInlineContainer("ospm_headline_link"),e.linkDom.classList.add("ospm_text_style_"+s.TEXT_STYLE.LABEL_BIG2),t.appendChild(e.linkDom),t}function c(e){o.addActionListener(e.dom,function(t){t.target===e.linkDom&&e.notifyClickListeners()})}function u(e){e.linkDom.textContent=e.buttonText,o.isNBF()&&e.linkDom.appendChild(a.createSimpleIcon(s.ICONS.NEXT_M)),e.linkDom.classList.remove("ospm_hidden")}function d(e){e.linkDom.textContent="",e.linkDom.classList.add("ospm_hidden")}var h;return h=t.subclass({stepData:null,linkDom:null,buttonText:null,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=l(this),this.initializeFields(e),c(this)},initializeFields:function(e){h.parent.initializeFields.call(this,e),this.setLabel(e.label),void 0===e.labelStyle&&(e.labelColor&&this.setLabelColor(e.labelColor),e.labelFont&&this.setLabelFont(e.labelFont),e.small===!0&&this.setSmall(!0)),e.buttonText&&this.setButtonText(e.buttonText),e.clickListener&&this.setClickListener(e.clickListener),e.wrapMode&&this.setWrapMode(e.wrapMode),this.setLabelStyle(e.labelStyle),e.topMargin||this.setTopMargin(s.MARGIN.DEFAULT),e.bottomMargin||this.setBottomMargin(s.MARGIN.DEFAULT)},setButtonText:function(e){this.buttonText=o.toHTMLText(e),this.buttonText.length>0&&this.getLabelStyle()>=s.TEXT_STYLE.LABEL_BIG1&&this.getLabelStyle()<=s.TEXT_STYLE.LABEL_BIG6?u(this):d(this)},updateDisplay:function(){h.parent.updateDisplay.call(this),this.isEnabled()?this.linkDom.setAttribute("tabindex",r.TABINDEXES.DEFAULT):this.linkDom.removeAttribute("tabindex")},getClassName:function(){return"Headline"},setTopMargin:function(e){e&&e!==s.MARGIN.DEFAULT||(e=s.MARGIN.LARGE1),h.parent.setTopMargin.call(this,e)},setBottomMargin:function(e){e&&e!==s.MARGIN.DEFAULT||(e=s.MARGIN.LARGE1),o.isNBF()?h.parent.setBottomMargin.call(this,e):t.setBottomPadding(this,e)}}),h.proto(n.LabelMixin,n.ClickMixin,n.WrapMixin),h.prototype.setLabelStyle=function(e){var t=s.TEXT_STYLE.HEADLINE2;o.isNBF()&&(t=s.TEXT_STYLE.HEADLINE5),d(this),"number"==typeof e&&(e>=s.TEXT_STYLE.HEADLINE1&&e<=s.TEXT_STYLE.HEADLINE6?t=e:e>=s.TEXT_STYLE.LABEL_BIG1&&e<=s.TEXT_STYLE.LABEL_BIG6&&(t=e,this.buttonText&&this.buttonText.length>0&&u(this))),this.currentLabelStyle=t,o.replaceClassNameStartingWith(this.dom,"ospm_text_style_","ospm_text_style_"+t),o.replaceClassNameStartingWith(this.labelDom,"ospm_text_style_","ospm_text_style_"+t)},h}),define("tao/ospm/ui/widgets/Questionnaire",["tao/ospm/common/OSPMError","tao/ospm/ui/widgets/RadioButton","tao/ospm/ui/widgets/Checkbox","tao/ospm/ui/widgets/Widget","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/common/Toolkit","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a,l){function c(t,n){if(!a.isNumber(n)||0>n||n>=t.rows)throw new e("Die angegebene Zeile liegt außerhalb des gültigen Bereichs.",{row:n,rows:t.rows})}function u(t,n){if(!a.isNumber(n)||0>n||n>=t.columns)throw new e("Die angegebene Spalte liegt außerhalb des gültigen Bereichs.",{col:n,cols:t.columns})}function d(e,t,n,i){e.buttons[t][n].setValue(i),h(e,t,n,i)}function h(e,t,n,i){r.isMobile()&&!r.isNBF()&&r.toggleClassName(e.answerCells[t][n],"not_checked",!i)}function m(e,t){var n,i;if(e.multiSelect)for(i=[],n=0;n<e.columns;n++)i.push(e.buttons[t][n].getValue());else for(i=null,n=0;n<e.columns;n++)if(e.buttons[t][n].getValue()){i=n;break}return i}function p(t,n,i){var o;if(t.multiSelect===!0){if(null!==i&&(!a.isArray(i)||i.length!==t.columns))throw new e("Die zu setzenden Antworten für eine gesamte Fragezeile sind nicht null und kein Array mit genau der Länge aller Antwortmöglichkeiten",{answer:i,cols:t.columns});for(o=0;o<t.columns;o++)d(t,n,o,null!==i&&i[o]===!0)}else{if(null!==i&&(!a.isNumber(i)||0>i||i>=t.columns))throw new e("Die zu setzende Antwortspalte liegt nicht im gültigen Bereich.",{answer:i,cols:t.columns});for(o=0;o<t.columns;o++)d(t,n,o,i===o)}}function f(e,t,n,i){r.addClickListener(t,function(){var t={row:n,column:i};e.notifyClickListeners(t),i>=0&&e.notifyChangeListeners(t)})}function g(e,t){N(t.headlines),O(t.questions),e.label=t.label,e.labelForHeadlines=t.labelForHeadlines,e.headlines=t.headlines,e.questions=t.questions,e.columns=t.headlines.length,e.rows=t.questions.length,e.buttons=[],e.answerCells=[],e.optionalDomArray=[],e.errorMessageDomArray=[],e.dom=o.createContainer("ospm_questionnaire"),r.isNBF()?(e.errorMessageShouldHaveIcon(),e.tableDom=C(e,t)):e.tableDom=y(e,t),e.dom.appendChild(e.tableDom)}function _(e){var t=v(e);e.dom.removeChild(e.tableDom),e.tableDom=y(e),e.dom.appendChild(e.tableDom),a.executeLater(function(){b(e,t)})}function v(e){var t,n,i,o;return e.dom?(t=r.activeElement(e.dom.ownerDocument),t&&(n=t.parentNode,n&&(i=n.dataset.row,o=n.dataset.col,void 0!==i&&void 0!==o))?{row:i,col:o}:null):null}function b(e,t){var n,i;t&&e.buttons&&(n=e.buttons[t.row],n&&(i=n[t.col],i&&i.focus()))}function y(e){var t,n;for(t=o.createTable("ospm_questionnaire_table"),t.appendChild(w(e)),n=0;n<e.rows;n++)L(t,e,n);return t.appendChild(e.buildErrorDom()),e.displayMode=r.isMobile()?"mobile":"desktop",t}function C(e){var t,n=o.createTable("ospm_questionnaire_table");for(n.appendChild(E(e)),t=0;t<e.rows;t++)S(n,e,t);return n}function w(e){var t,n,i,s,a,c;if(t=o.createTableRow("ospm_questionnaire_table_header_row"),n=o.createContainer("ospm_horizontal_flex_container"),i=o.createContainer("ospm_questionnaire_label",e.label),n.appendChild(i),o.createMarkupDomTree(e,i,e.label),r.isMobile()||e.wideContent)t.appendChild(n);else for(c=o.createContainer("ospm_questionnaire_headlines_label ospm_text_style_"+l.TEXT_STYLE.LABEL4),n.appendChild(c),o.createMarkupDomTree(e,c,e.labelForHeadlines),i=k(""),i.appendChild(n),t.appendChild(i),f(e,i,-1,-1),s=0;s<e.headlines.length;s++)a=k(e.headlines[s]),a.classList.add("ospm_text_style_"+l.TEXT_STYLE.LABEL4),t.appendChild(a),f(e,a,-1,s);return t}function E(e){var t,n,i=o.createTableRow("ospm_questionnaire_table_header_row"),r=o.createContainer("ospm_horizontal_flex_container"),s=o.createTableHeaderCell("ospm_questionnaire_label_cell"),a=o.createContainer("ospm_questionnaire_label"),l=o.createContainer("ospm_questionnaire_headlines_label");for(i.appendChild(s),s.appendChild(r),r.appendChild(a),r.appendChild(l),o.createMarkupDomTree(e,a,e.label),o.createMarkupDomTree(e,l,e.labelForHeadlines),t=0;t<e.headlines.length;t++)n=k(e.headlines[t]),i.appendChild(n),f(e,n,-1,t);return i}function L(e,t,n){var i,s,a,c;if(i=o.createTableRow("ospm_table_row ospm_questionnaire_question"),s=k(),o.createMarkupDomTree(t,s,t.questions[n]),s.classList.add("ospm_table_cell"),f(t,s,n,-1),s.appendChild(D(t,n)),i.appendChild(s),e.appendChild(i),t.buttons[n]=[],r.isMobile()||t.wideContent)for(s.setAttribute("colspan",2),t.answerCells[n]=[],a=0;a<t.columns;a++)c=o.createTableRow("ospm_table_row ospm_questionnaire_answer"),t.answerCells[n][a]=k(t.headlines[a]),c.appendChild(t.answerCells[n][a]),c.appendChild(x(t,n,a)),e.appendChild(c);else for(s.classList.add("ospm_text_style_"+l.TEXT_STYLE.LABEL3),a=0;a<t.columns;a++)i.appendChild(x(t,n,a));e.appendChild(I(t,n))}function S(e,t,n){var i,r,s,a=o.createTableRow("ospm_questionnaire_question"),l=k();for(t.buttons[n]=[],a.appendChild(l),o.createMarkupDomTree(t,l,t.questions[n]),l.appendChild(T(t,n)),i=0;i<t.columns;i++)s=o.createLabelElement("ospm_question_answer_label"),o.createMarkupDomTree(t,s,t.headlines[i]),r=x(t,n,i),r.insertBefore(s,r.firstChild),a.appendChild(r),s.setAttribute("for",t.buttons[n][i].getId()+"__input");e.appendChild(a),l.appendChild(I(t,n))}function D(e,t){return e.optionalDomArray[t]=o.createInlineContainer("ospm_optional ospm_text_style_36"),e.optionalDomArray[t].textContent=" "+l.NOT_MANDATORY_LABEL,e.mandatory&&(e.mandatory[t]?e.optionalDomArray[t].classList.add("ospm_hidden"):e.optionalDomArray[t].classList.remove("ospm_hidden")),e.optionalDomArray[t]}function T(e,t){return e.optionalDomArray[t]=o.createInlineContainer("ospm_optional"),e.optionalDomArray[t].textContent=" (optional)",e.mandatory&&(e.mandatory[t]?e.optionalDomArray[t].classList.add("ospm_hidden"):e.optionalDomArray[t].classList.remove("ospm_hidden")),e.optionalDomArray[t]}function I(e,t){return e.errorMessageDomArray[t]=e.buildErrorDom(),e.errorMessageDomArray[t]}function k(e){var t;return t=o.createTableHeaderCell(),t.classList.add("ospm_table_column_header_cell"),e&&o.createMarkupDomTree(null,t,e),t}function x(e,i,r){var s,a,l;return s=o.createTableCell(),s.dataset.row=i,s.dataset.col=r,s.className="ospm_table_cell",l={changeListener:function(){var t;e.multiSelect?h(e,i,r,a.getValue()):e.buttons[i].forEach(function(t,n){d(e,i,n,a===t)}),t={row:i,column:r},e.notifyClickListeners(t),e.notifyChangeListeners(t)}},a=e.multiSelect?new n(l):new t(l),e.buttons[i].push(a),s.appendChild(a.dom),s}function A(t,n){if("number"!=typeof n||0>n||n>=t.rows)throw new e("Die angegebene Fragenzeile liegt nicht im gültigen Bereich",{questionRow:n,minRow:0,maxRow:t.rows-1})}function O(t){if(!a.isArray(t)||t.length<1)throw new e("Es muss mind. 1 Frage angegeben werden",{questions:t})}function N(t){if(!a.isArray(t)||t.length<2)throw new e("Es müssen mind. 2 Headlines angegeben werden",{headlines:t})}function M(e){r.isRendered(e)&&(e.dynamicQuestionHeight?e.dom&&e.dom.offsetParent&&(e.dom.offsetParent.offsetWidth>=960?e.dom.classList.add("ospm_questionnaire_large"):e.dom.classList.remove("ospm_questionnaire_large")):e.dom.classList.add("ospm_questionnaire_large"),e.tableDom&&e.dom?e.tableDom.offsetWidth>e.dom.offsetWidth&&(e.dom.classList.add("ospm_wide_content"),e.wideContent=!0,_(e)):r.isMobile()?"mobile"!==e.displayMode&&_(e):"desktop"!==e.displayMode&&_(e))}var P;return P=i.subclass({displayMode:null,label:null,labelForHeadlines:null,headlines:null,questions:null,columns:null,rows:null,buttons:null,answerCells:null,stepData:null,clickListener:null,mandatory:null,mandatoryMessage:null,optionalDomArray:null,errorMessageDomArray:null,dynamicQuestionHeight:!1,multiSelect:!1,wideContent:!1,constructor:function(e,t){e=e||{},this.stepData=t,this.headlines=[],this.questions=[],this.mandatory=[],this.multiSelect=!!e.multiSelect,g(this,e),this.initializeFields(e)},initializeFields:function(t){var n;if(P.parent.initializeFields.call(this,t),a.isArray(t.answers)){if(t.answers.length!==this.rows)throw new e("Die Anzahl der voreingestellten Antworten muss mit der Anzahl der voreingestellten Fragen übereinstimmen",{questions:t.questions,answers:t.answers});this.setAnswers(t.answers)}if(a.isArray(t.mandatory)){if(t.mandatory.length!==this.rows)throw new e("Die Anzahl der Mandatory-Parameter muss mit der Anzahl der voreingestellten Fragen übereinstimmen",{questions:t.questions,mandatory:t.mandatory});for(n=0;n<t.mandatory.length;n++)this.setMandatory(n,t.mandatory[n])}this.setMandatoryMessage(t.mandatoryMessage),t.clickListener&&this.setClickListener(t.clickListener),t.changeListener&&this.setChangeListener(t.changeListener),t.wrapMode&&this.setWrapMode(t.wrapMode),t.dynamicQuestionHeight&&this.setDynamicQuestionHeight(t.dynamicQuestionHeight)},getAnswer:function(e,t){return c(this,e),void 0===t?m(this,e):(u(this,t),this.buttons[e][t].getValue())},getAnswerRow:function(e){return c(this,e),m(this,e)},getAnswerColumn:function(t){var n,i;if(u(this,t),!this.multiSelect)throw new e("Das Abfragen einer gesamten Antwortspalte ist für Nicht multiSelect Fragebögen nicht möglich.");for(i=[],n=0;n<this.rows;n++)i.push(this.buttons[n][t].getValue());return i},getAnswers:function(){var e,t;for(t=[],e=0;e<this.rows;e++)t.push(m(this,e));return t},setAnswer:function(e,t,n){var i;if(c(this,e),void 0===n)return void p(this,e,t);if(u(this,t),this.multiSelect)d(this,e,t,n);else for(i=0;i<this.columns;i++)d(this,e,i,i===t&&n)},setAnswerRow:function(e,t){c(this,e),p(this,e,t)},setAnswerColumn:function(t,n){var i;if(!this.multiSelect)throw new e("Das Setzen einer gesamten Antwortspalte ist für Nicht multiSelect Fragebögen nicht möglich.");if(u(this,t),null!==n&&(!a.isArray(n)||n.length!==this.rows))throw new e("Die zu setzenden Antworten für eine gesamte Antwortspalte sind nicht null und kein Array mit genau der Länge aller Fragezeilen.",{answer:n,rows:this.rows});for(i=0;i<this.rows;i++)d(this,i,t,null!==n&&n[i])},setAnswers:function(t){var n;if(!a.isArray(t)||t.length!==this.rows)throw new e("Die zu setzen Antworten sind kein Array mit genau der Länge der Anzahl an Fragezeilen.",{answer:t,rows:this.rows});for(n=0;n<t.length;n++)p(this,n,t[n])},getInputData:function(){return this.getAnswers()},setInputData:function(e,t){var n,i;if(a.isArray(e)&&e.length===this.rows)for(n=0;n<this.rows;n++)if(this.multiSelect){if(a.isArray(e[n])&&e[n].length===this.columns)for(i=0;i<this.columns;i++)this.getAnswer(n,i)!==e[n][i]&&(this.setAnswer(n,i,e[n][i]),t&&this.notifyChangeListeners({row:n,column:i}))}else m(this,n)!==e[n]&&(this.setAnswerRow(n,e[n]),t&&this.notifyChangeListeners({row:n,column:e[n]}))},isMandatory:function(e){return this.mandatory[e]},setMandatory:function(e,t){A(this,e),this.mandatory[e]=t,r.toggleClassName(this.optionalDomArray[e],"ospm_hidden",t)},getMandatoryMessage:function(){return this.mandatoryMessage},setMandatoryMessage:function(e){this.mandatoryMessage=e||l.MANDATORY_MESSAGE},setEnabled:function(e){var t,n;for(t=0;t<this.buttons.length;t++)for(n=0;n<this.buttons[t].length;n++)this.buttons[t][n].setEnabled(e);P.parent.setEnabled.call(this,e)},getDynamicQuestionHeight:function(){return this.dynamicQuestionHeight},setDynamicQuestionHeight:function(e){this.dynamicQuestionHeight=e,r.updateElement(this)},updateDisplay:function(){P.parent.updateDisplay.call(this),M(this)},onResize:function(){P.parent.onResize.call(this),r.updateElement(this)},afterRenderLayout:function(){r.updateElement(this)},checkMandatoryValueEmptyError:function(){var e,t,n,i;for(e=0;e<this.rows;e++)if(this.errorMessageDom=this.errorMessageDomArray[e],this.errorMessageDom.classList.add("ospm_hidden"),this.mandatory[e]){for(i=!0,t=0;t<this.columns;t++)this.buttons[e][t].isEmpty()||(i=!1);if(i)return n={code:8,title:"Pflichtfeld",msg:this.getMandatoryMessage()},this.setError(n),n}return null},getDisplayedChildren:function(){var e,t,n=[];if(this.buttons)for(e=0;e<this.buttons.length;e++)for(t=0;t<this.buttons[e].length;t++)n.push(this.buttons[e][t]);return n},getClassName:function(){return"Questionnaire"}}),P.proto(s.ClickMixin,s.ChangeMixin,s.ErrorMixin,s.WrapMixin,s.InputStorageMixin),P}),define("tao/ospm/ui/widgets/CircularChart",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/SvgFactory","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/common/Config","tao/ospm/ui/ColorUtils"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e,t,n){function o(){"function"==typeof s&&s(),e.notifyClickListeners({navigation:"icon"})}var s;e.iconDom&&(e.iconDom.parentNode.removeChild(e.iconDom),e.iconDom=null),t&&(n=n||t.label||"Details",r.isObject(t)?(t.label=n,s=t.action):t={name:t,label:n},t.action=o,e.iconDom=i.createIcon(t),e.iconDom&&(e.iconDom.classList.add("ospm_circular_chart_icon"),e.labelsAndIconDom.appendChild(e.iconDom),e.iconDom.setAttribute("aria-label",n))),e.setWrapSubLabel(e.wrapSubLabel)}function m(e){var t,i,r;return t=n.createContainer("ospm_circular_chart"),i=n.createContainer("ospm_circular_chart_center"),t.appendChild(i),e.bottomDom=n.createContainer("ospm_circular_chart_bottom"),t.appendChild(e.bottomDom),e.leftDom=n.createContainer("ospm_circular_chart_left"),i.appendChild(e.leftDom),e.middleDom=n.createContainer("ospm_circular_chart_middle"),i.appendChild(e.middleDom),e.rightDom=n.createContainer("ospm_circular_chart_right"),i.appendChild(e.rightDom),r=C(),e.svgDom=o.createSvg({width:"100%",height:"100%",viewBox:r.minX+" "+r.minY+" "+r.width+" "+r.height,preserveAspectRatio:"xMidYMid meet"}),e.middleDom.appendChild(e.svgDom),e.labelsAndIconDom=n.createContainer("ospm_circular_chart_labels_and_icon"),e.labelDom=e.buildLabelDom(a.TEXT_STYLE.LABEL_BIG3),e.labelsAndIconDom.appendChild(e.labelDom),e.subLabelDom=e.buildSubLabelDom(a.TEXT_STYLE.LABEL6),e.labelsAndIconDom.appendChild(e.subLabelDom),e.middleDom.appendChild(e.labelsAndIconDom),t}function p(e){var t=l.findParent(e.dom,{cssClass:"ospm_column_layout"}),n=t.offsetWidth;n>=464?(e.dom.classList.remove("ospm_cc_hidden"),e.dom.classList.remove("ospm_circular_chart_small_size"),e.middleDom.style.minWidth="320px",e.middleDom.style.height="320px",e.middleDom.style.marginLeft="0"):n>=256?(e.dom.classList.remove("ospm_cc_hidden"),e.dom.classList.add("ospm_circular_chart_small_size"),e.middleDom.style.minWidth="256px",e.middleDom.style.height="256px",e.middleDom.style.marginLeft=288>n?(n-16-256-16)/2+"px":"0"):n>=240?(e.dom.classList.remove("ospm_cc_hidden"),e.dom.classList.add("ospm_circular_chart_small_size"),e.middleDom.style.minWidth="240px",e.middleDom.style.height="240px",e.middleDom.style.marginLeft=272>n?(n-16-240-16)/2+"px":"0"):e.dom.classList.add("ospm_cc_hidden"),n>=400?(e.bottomDom.classList.add("ospm_hidden"),e.bottomDom.querySelector(".ospm_circular_chart_left_navigation_icon")&&e.bottomDom.removeChild(e.leftNavigationIconDom),e.leftDom.querySelector(".ospm_circular_chart_left_navigation_icon")||f(e,e.leftDom),e.bottomDom.querySelector(".ospm_circular_chart_right_navigation_icon")&&e.bottomDom.removeChild(e.rightNavigationIconDom),e.rightDom.querySelector(".ospm_circular_chart_right_navigation_icon")||g(e,e.rightDom)):(e.bottomDom.classList.remove("ospm_hidden"),e.leftDom.querySelector(".ospm_circular_chart_left_navigation_icon")&&e.leftDom.removeChild(e.leftNavigationIconDom),e.bottomDom.querySelector(".ospm_circular_chart_left_navigation_icon")||f(e,e.bottomDom),e.rightDom.querySelector(".ospm_circular_chart_right_navigation_icon")&&e.rightDom.removeChild(e.rightNavigationIconDom),e.bottomDom.querySelector(".ospm_circular_chart_right_navigation_icon")||g(e,e.bottomDom))}function f(e,t){function n(){e.notifyClickListeners({navigation:"left"})}e.leftNavigationIconDom=i.createSimpleActionIcon({name:"circular_chart_prev",label:"Vorhergehendes Diagram anzeigen"},n),e.leftNavigationIconDom.classList.add("ospm_circular_chart_left_navigation_icon"),t.appendChild(e.leftNavigationIconDom),e.setLeftNavigation(e.showLeftNavigation)}function g(e,t){function n(){e.notifyClickListeners({navigation:"right"})}e.rightNavigationIconDom=i.createSimpleActionIcon({name:"circular_chart_next",label:"Nächstes Diagram anzeigen"},n),e.rightNavigationIconDom.classList.add("ospm_circular_chart_right_navigation_icon"),t.appendChild(e.rightNavigationIconDom),e.setRightNavigation(e.showRightNavigation)}function _(e){e.svgDefinitions&&e.svgDom.removeChild(e.svgDefinitions),e.svgDefinitions=T(e.svgDom),b(e)}function v(e){return l.isRendered(e)&&!e.isHidden()&&null!==e.dom.offsetParent}function b(e){var t,n;v(e)&&(e.svgSegments&&e.svgDom.removeChild(e.svgSegments),e.segments=S(e.values),t=l.findParent(e.dom,{cssClass:"ospm_dialogview"}),n=l.isSmallScreenHeight(),e.svgSegments=k(e.svgDom,e.segments,t,n),y(e),e.registerTooltipEvents(e.svgDom))}function y(e){e.segmentLabels&&e.middleDom.removeChild(e.segmentLabels),e.segmentLabels=e.hidePercentage?null:x(e.middleDom,e.segments)}function C(){return{minX:-R,minY:-R,width:2*R,height:2*R}}function w(){return.70625*R}function E(){return.625*R}function L(){return.6125*R}function S(e){var t,n,i,o,r,s,a,l,c;for(t=[],n=Math.max(1,D(e)),i=0;i<e.length;i++)t[i]={percentage:e[i].value/n*100,color:e[i].color,label:e[i].label,easing:e[i].easing,tooltip:e[i].tooltip};for(o=w()+(R-w())/2,r={x:0,y:-R},a=0,i=0;i<t.length;i++)c=t[i].percentage,l=a+c/100*Math.PI,a+=c/50*Math.PI,s={x:Math.round(Math.sin(a)*R*1e3)/1e3,y:Math.round(-Math.cos(a)*R*1e3)/1e3},t[i].path={point0:r,point1:s},t[i].midPoint={x:Math.round(Math.sin(l)*o*1e3)/1e3,y:Math.round(-Math.cos(l)*o*1e3)/1e3},r=s;return t}function D(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].value;return n}function T(e){var t,n,i;return t=o.createDefinitions(),e.appendChild(t),n=o.createLinearGradient(F,"0%","0%","0%","100%"),i=o.createGradientStop("0%",{"class":"gradient_stop0"}),n.appendChild(i),i=o.createGradientStop("100%",{"class":"gradient_stop1"}),n.appendChild(i),t.appendChild(n),t}function I(e,t){return u.IF?{left:e?24:29,top:e?17:17.5,dialog:t?2.5:0}:{left:e?22.5:27.5,top:e?13:15,dialog:t?2.5:0}}function k(e,t,n,i){var r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C;for(r=o.createContainer({"class":"segments"}),e.appendChild(r),_=0;_<t.length;_++){if(a=t[_].midPoint,l=e.clientWidth||e.parentNode.clientWidth,c=e.clientHeight||e.parentNode.clientHeight,u=Math.min(l,c)/2,d=u/R,v=I(i,n),b=v.left,y=v.top,C=v.dialog,g={fill:t[_].color,"data-tooltip":t[_].tooltip||"","data-tooltip-x":Math.round(a.x*d+l/2+b+C),"data-tooltip-y":Math.round(a.y*d+c/2-y)},t[_].easing&&(g.opacity=B),t.length>1){if(0===t[_].percentage)continue;t[_].percentage<100?(m=t[_].percentage<=50?"0":"1",a=t[_].path.point0,h="M"+a.x+","+a.y,a=t[_].path.point1,h+=" A"+R+","+R+" 0 "+m+",1 "+a.x+","+a.y,h+=" L0,0",h+=" Z",s=o.createPath(h,g)):s=o.createCircle(0,0,R,g)}else s=o.createCircle(0,0,R,g);r.appendChild(s)}for(f=o.createCircle(0,0,w(),{fill:"url(#"+F+")","class":"gradient_circle"}),r.appendChild(f),_=0;_<t.length;_++)t[_].percentage>0&&t[_].percentage<100&&(a=t[_].path.point1,p=o.createLine(0,0,a.x,a.y,{}),r.appendChild(p));return f=o.createCircle(0,0,E(),{"class":"inner_circle"}),r.appendChild(f),f=o.createCircle(0,0,L(),{"class":"inner_ring"}),r.appendChild(f),r}function x(e,t){var i,o,r,s,a,l,c,u,d,h;for(h=/^\s+$/,o=n.createContainer("ospm_circular_chart_segment_labels"),e.appendChild(o),i=0;i<t.length;i++)t[i].easing||(r=t[i].percentage,0!==r&&(s=null,h.test(t[i].label)?(s=null,a=null):t[i].label?s=t[i].label:a=.1>r?"<0,1":r.toFixed(.95>r?1:0),d=n.createContainer("ospm_circular_chart_segment_label"),l=t[i].midPoint,c=Math.min(e.clientWidth,e.clientHeight)/2,u=c/R,d.style.left=Math.round(l.x*u+e.clientWidth/2)+"px",d.style.top=Math.round(l.y*u+e.clientHeight/2)+"px",o.appendChild(d),s?d.textContent=s:a&&(d.appendChild(n.createInlineContainer("ospm_circular_chart_segment_label_number",a)),d.appendChild(n.createInlineContainer("ospm_circular_chart_segment_label_percent","%")))));return o}function A(e){var t;if(!e||!r.isArray(e)||0===e.length)throw new s("Es müssen Werte angegeben werden");return t=e.map(O)}function O(e){var t={};if("object"!=typeof e)throw new s("Ein Wert muss ein Objekt sein");if(!r.isString(e.color))throw new s('"color" muss String sein');if(!r.isNumeric(e.value)||e.value<0)throw new s('"value" muss >= 0 sein');return t.color=d.parseColor(e.color),t.value="object"==typeof e.value?e.value.valueOf():e.value,e.label&&(t.label=e.label),e.easing&&(t.easing=e.easing),e.tooltip&&(t.tooltip=e.tooltip),t}function N(e){e.isEnabled()&&e.clickListeners?(e.rightNavigationIconDom&&(e.rightNavigationIconDom.tabIndex=c.TABINDEXES.DEFAULT),e.leftNavigationIconDom&&(e.leftNavigationIconDom.tabIndex=c.TABINDEXES.DEFAULT),e.iconDom&&(e.iconDom.tabIndex=c.TABINDEXES.DEFAULT)):(e.rightNavigationIconDom&&e.rightNavigationIconDom.removeAttribute("tabindex"),e.leftNavigationIconDom&&e.leftNavigationIconDom.removeAttribute("tabindex"),e.iconDom&&e.iconDom.removeAttribute("tabindex"))}var M,P,R=162,F="Farbverlaufsrand",B=.38;return M=e.subclass({stepData:null,values:null,hidePercentage:null,showLeftNavigation:null,showRightNavigation:null,dom:null,leftDom:null,middleDom:null,rightDom:null,leftNavigationIconDom:null,rightNavigationIconDom:null,segments:null,svgDom:null,svgDefinitions:null,svgSegments:null,segmentLabels:null,labelsAndIconDom:null,labelDom:null,subLabelDom:null,iconDom:null,wrapSubLabel:null,bottomDom:null,constructor:function(e,t){e=e||{},this.stepData=t,e.bottomBorder=e.bottomBorder||!1,this.dom=m(this,e),this.initializeFields(e)},setValues:function(e){this.values=A(e),b(this)},setHidePercentage:function(e){this.hidePercentage=e,b(this)},setWrapSubLabel:function(e){e&&!this.iconDom?this.subLabelDom.classList.remove("ospm_ellipsis"):this.subLabelDom.classList.add("ospm_ellipsis"),this.wrapSubLabel=e},setIcon:function(e,t){h(this,e,t)},setLeftNavigation:function(e){this.showLeftNavigation=e,this.showLeftNavigation?this.leftNavigationIconDom.classList.remove("ospm_hidden"):this.leftNavigationIconDom.classList.add("ospm_hidden")},setRightNavigation:function(e){this.showRightNavigation=e,this.showRightNavigation?this.rightNavigationIconDom.classList.remove("ospm_hidden"):this.rightNavigationIconDom.classList.add("ospm_hidden")},initializeFields:function(e){M.parent.initializeFields.call(this,e),this.setValues(e.values),this.hidePercentage=e.hidePercentage||!1,this.showLeftNavigation=e.leftNavigation||!1,this.showRightNavigation=e.rightNavigation||!1,this.wrapSubLabel=e.wrapSubLabel!==!1,this.setLabel(e.label),this.setLabelStyle(e.labelStyle),this.setSubLabel(e.subLabel),this.setSubLabelStyle(e.subLabelStyle),this.setIcon(e.icon||null),e.clickListener&&this.setClickListener(e.clickListener),e.wrapMode&&this.setWrapMode(e.wrapMode),this.setTopMargin(e.topMargin),this.setBottomMargin(e.bottomMargin)},afterRenderLayout:function(){l.updateElement(this)},updateDisplay:function(){v(this)&&(p(this),_(this)),N(this)},onResize:function(){l.updateElement(this)},getClassName:function(){return"CircularChart"}}),P={setTopMargin:function(e){this.isMarginValid(e)&&e!==a.MARGIN.DEFAULT?M.parent.setTopMargin.call(this,e):M.parent.setTopMargin.call(this,a.MARGIN.LARGE1)},setBottomMargin:function(e){this.isMarginValid(e)&&e!==a.MARGIN.DEFAULT?M.parent.setBottomMargin.call(this,e):M.parent.setBottomMargin.call(this,a.MARGIN.LARGE1)}},M.proto(t.ClickMixin,t.LabelMixin,t.SubLabelMixin,t.WrapMixin,t.TooltipMixin,P),M}),define("tao/ospm/ui/widgets/VerticalBarChart",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/ui/SvgFactory","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/core/UIToolkit","tao/ospm/ui/IconFactory","tao/ospm/ui/ColorUtils"],function(e,t,n,i,o,r,s,a,l,c){function u(e){a.updateElement(e)}function d(e){return e.min?e.min:m(e)}function h(e){return e.max?e.max:p(e)}function m(e){var t,n,i=e.values,o=0;for(t=0;t<i.length;t++)if(e.barGroups)for(n=0;n<i[t].value.length;n++)o>i[t].value[n].value&&(o=i[t].value[n].value);else o>i[t].value&&(o=i[t].value);return o}function p(e){var t,n,i=e.values,o=0;for(t=0;t<i.length;t++)if(e.barGroups)for(n=0;n<i[t].value.length;n++)o<i[t].value[n].value&&(o=i[t].value[n].value);else o<i[t].value&&(o=i[t].value);return o}function f(e,t){Z(t),g(e,t),e.values=o.deepCopy(t)}function g(e,t){o.isArray(t[0].value)&&(e.barGroups=!0,e.barGroupSize=t[0].value.length)}function _(e,t){$(t),e.marks=o.deepCopy(t)}function v(e,t){e.marksRight=!!t}function b(e,t){et(t),e.min=t}function y(e,t){et(t),e.max=t}function C(e){var t;return t=n.createContainer("ospm_vertical_bar_chart"),e.clickableChartDom=n.createContainer(),t.appendChild(e.clickableChartDom),e.svgDom=i.createSvg({width:"100%"}),e.clickableChartDom.appendChild(e.svgDom),e.parameter.legend&&(e.legendDom=tt(e.parameter.legend),t.appendChild(e.legendDom)),a.addClickListener(e.clickableChartDom,function(t){var n,i,o;n=E(e.clickableChartDom,t),i=e.barGroups?B(e.dom.clientWidth,e.barsPerPage):V(e.dom.clientWidth,e.barsPerPage),o=L(n.x,i),o>=0&&e.notifyClickListeners({index:o})}),t}function w(e){var t,n;return e.barGroups?(t=e.values[0].value.length,n=t*lt+(t-1)*ct+ut,Math.floor(e.dom.clientWidth/n)):Math.floor(e.dom.clientWidth/(lt+(a.isNBF()?rt:ot)))}function E(e,t){var n=0,i=0,o=e;do n+=o.offsetLeft-o.scrollLeft,i+=o.offsetTop-o.scrollTop,o=o.offsetParent;while(o);return{x:t.pageX-n,y:t.pageY-i}}function L(e,t){var n=t.width+t.gap,i=Math.floor(e/n),o=e-i*n;return o<=t.width?i:-1}function S(e){e.svgDefinitions&&e.svgDom.removeChild(e.svgDefinitions),e.svgDefinitions=A(e),D(e)}function D(e){var t,n,i,o,r,s;I(e),e.svgDom&&(r=e.svgDom.getBoundingClientRect(),t=r.width,n=r.height,s=w(e),e.pageCount=R(e.values.length,s),e.barsPerPage=P(e.values.length,s),i=d(e),o=h(e),e.svgMarks&&e.svgDom.removeChild(e.svgMarks),e.svgBars&&e.svgDom.removeChild(e.svgBars),e.svgMarks=U(e.svgDom,t,n,o,i,e.marks,e.marksRight),e.svgBars=e.barGroups?N(e,t,n,o,i,e.barsPerPage):O(e,t,n,o,i),k(e)),x(e)}function T(e){null!==e.pageButtonDom&&(e.dom.removeChild(e.pageButtonDom),e.pageButtonDom=null)}function I(e){e.labelsDom&&(e.clickableChartDom.removeChild(e.labelsDom),e.labelsDom=null)}function k(e){I(e),e.labelsDom=Y(e.values)?W(e):null}function x(e){T(e),e.pageCount>1?j(e):e.pageButtonDom=null}function A(e){var t,n,o,r,s,l,u,d,h,m=e.values;if(t=i.createDefinitions(),e.svgDom.appendChild(t),e.barGroups)for(r=0;r<m.length;r++)for(l=m[r],s=0;s<l.value.length;s++)u=c.parseColor(l.value[s].color?l.value[s].color:m[r].color),d=a.isNBF()?u:l.value[s].zerocolor?c.parseColor(l.value[s].zerocolor):u,h=l.value[s].value>0,n=i.createLinearGradient(st+e.getId()+r+s,"0%","0%","0%","100%"),o=u?i.createGradientStop("0%",{"stop-color":h?u:d}):i.createGradientStop("0%",{"class":"default_gradient_stop"}),n.appendChild(o),o=u?i.createGradientStop("100%",{"stop-color":h?d:u}):i.createGradientStop("100%",{"class":"default_gradient_stop"}),n.appendChild(o),t.appendChild(n);else for(r=0;r<m.length;r++)u=c.parseColor(m[r].color),d=a.isNBF()?u:m[r].zerocolor?c.parseColor(m[r].zerocolor):u,h=m[r].value>0,n=i.createLinearGradient(st+e.getId()+r,"0%","0%","0%","100%"),o=u?i.createGradientStop("0%",{"stop-color":h?u:d}):i.createGradientStop("0%",{"class":"default_gradient_stop"}),n.appendChild(o),o=u?i.createGradientStop("100%",{"stop-color":h?d:u}):i.createGradientStop("100%",{"class":"default_gradient_stop"}),n.appendChild(o),t.appendChild(n);return t}function O(e,t,n,o,r){var s,a,l,c,u,d,h,m,p,f=0;if(s=i.createContainer({"class":"bars"}),e.svgDom.appendChild(s),a=V(t,e.barsPerPage),a.width>0)for(l=o-r,c=o/l*n,m=(e.pageIndex-1)*e.barsPerPage,p=m+e.barsPerPage,p>e.values.length&&(p=e.values.length),u=m;p>u;u++)d=e.values[u].value,0!==d&&(h=d/l*n,F(e.getId(),s,a,c,h,u,f)),f++;return s}function N(e,t,n,o,r,s){var a,l,c,u,d,h,m,p,f,g,_,v=0;if(a=i.createContainer({"class":"bars"}),e.svgDom.appendChild(a),e.dom.classList.add("ospm_has_bar_group"),l=B(t,s),l.width>0)for(c=o-r,u=o/c*n,f=(e.pageIndex-1)*s,g=f+s,g>e.values.length&&(g=e.values.length),d=f;g>d;d++){for(_=e.values[d],h=0;h<_.value.length;h++)m=_.value[h].value,0!==m&&(p=Math.round(m/c*n),M(e.getId(),a,l,u,p,d,v,h,_.value.length));v++}return a}function M(e,t,n,o,r,s,l,c,u){var d=(n.width-(u-1)*ct)/u,h=a.isNBF()?Math.floor(d):Math.round(d),m=ct,p=r>0?o-r:o,f=(n.width+n.gap)*l+(h+m)*c,g=a.isNBF()?Math.floor(f):Math.round(f),_=h>=6?"2":"0",v="url(#"+st+e+s+c+")";if(a.isNBF()){var b=20>h?4:8,y="M"+g+" "+o,C=" v"+(0>r?"":"-")+Math.abs(Math.abs(r)-b),w=0>r?" q0,"+b+" "+b+","+b:" q0,-"+b+" "+b+",-"+b,E=0>r?" q"+b+",0 "+b+",-"+b:" q"+b+",0 "+b+","+b,L=" h"+(h-2*b),S=" v"+(0>r?"-":"")+Math.abs(Math.abs(r)-b),D=y+C+w+L+E+S+" z";t.appendChild(i.createPath(D,{fill:v}))}else t.appendChild(i.createRectangle(g,p,h,Math.abs(r),{fill:v,rx:_}))}function P(e,t){var n=R(e,t);return Math.ceil(e/n)}function R(e,t){return Math.ceil(e/t)}function F(e,t,n,o,r,s,l){var c=n.width,u=n.gap,d=r>0?o-r:o,h=(c+u)*l,m="url(#"+st+e+s+")",p=c>=6?"2":"0";if(a.isNBF()){var f=20>c?4:8,g="M"+h+" "+o,_=" v"+(0>r?"":"-")+Math.abs(Math.abs(r)-f),v=0>r?" q0,"+f+" "+f+","+f:" q0,-"+f+" "+f+",-"+f,b=0>r?" q"+f+",0 "+f+",-"+f:" q"+f+",0 "+f+","+f,y=" h"+(c-2*f),C=" v"+(0>r?"-":"")+Math.abs(Math.abs(r)-f),w=g+_+v+y+b+C+" z";t.appendChild(i.createPath(w,{fill:m}))}else t.appendChild(i.createRectangle(h,d,c,Math.abs(r),{fill:m,rx:p}))}function B(e,t){return{width:z(e,t),gap:ut}}function z(e,t){return(e-(ut*t-1))/t}function V(e,t){var n,i=H(e,t,n=a.isNBF()?rt:ot);
return it>i&&(i=H(e,t,n=0),1>i&&(i=0)),{width:i,gap:n}}function H(e,t,n){return a.isNBF()?Math.floor((e-n*(t-1))/t):Math.round(e/t-n)}function U(e,t,n,o,r,s,a){var l,c,u,d,h,m;if(l=i.createContainer({"class":"marks"}),e.appendChild(l),s&&s.length>0)for(u=o-r,c=0;c<s.length;c++)d=0,h=(o-s[c].value)/u*n,s[c].label&&(m=i.createText(s[c].label,a?t:0,h,{"text-anchor":a?"end":"start","dominant-baseline":"middle"}),l.appendChild(m),d=m.getBoundingClientRect().width),l.appendChild(i.createLine(a?0:d,h,a?t-d:t,h));return l}function W(e){var t,i,o,r,s,l,c,u,d,h=null;if(c=e.barGroups?B(e.svgDom.getBoundingClientRect().width,e.barsPerPage):V(e.svgDom.getBoundingClientRect().width,e.barsPerPage),c.gap>0)for(o=K(e.values),r=X(e.values),h=n.createContainer(o&&r?"ospm_vertical_bar_chart_labels2":"ospm_vertical_bar_chart_labels"),e.clickableChartDom.appendChild(h),u=(e.pageIndex-1)*e.barsPerPage,d=u+e.barsPerPage,d>e.values.length&&(d=e.values.length),t=u;d>t;t++)i=e.barGroups?(c.width+c.gap)*(t-u)+c.width/2:(c.width+c.gap)*(t-u)+c.width/2,e.values[t].label&&(s=n.createContainer("ospm_vertical_bar_chart_label"),s.style.left=i+"px",s.style.top="0px",s.textContent=e.values[t].label,h.appendChild(s),a.isNBF()&&(s.style.maxWidth=c.width+"px",e.values[t].label2&&(l=n.createContainer("ospm_vertical_bar_chart_label2"),l.textContent=e.values[t].label2,s.appendChild(l)))),!a.isNBF()&&e.values[t].label2&&(s=n.createContainer("ospm_vertical_bar_chart_label2"),s.style.left=i+"px",s.style.top=o?"22px":"0px",s.textContent=e.values[t].label2,s.style.maxWidth=c.width+"px",h.appendChild(s));return h}function j(e){var t,i,o,r=!1;return t=n.createContainer("ospm_vertical_bar_chart_buttonRow"),e.pageIndex>1&&(i=G(e),t.appendChild(i),r=!0),e.pageIndex<e.pageCount&&(o=q(e),t.appendChild(o),r=!0),r&&(e.dom.insertBefore(t,e.clickableChartDom),e.pageButtonDom=t),t}function G(e){var t,i;return t=n.createContainer("ospm_vertical_bar_chart_button_prev"),t.setAttribute("role","button"),i=l.createIcon({name:s.ICONS.BACK_ARROW_CIRCLE_M,size:s.ICON_SIZE.SMALL_30}),t.appendChild(i),a.addClickListener(t,function(){e.pageIndex>1&&(e.pageIndex-=1),D(e)}),t}function q(e){var t,i;return t=n.createContainer("ospm_vertical_bar_chart_button_next"),t.setAttribute("role","button"),i=l.createIcon({name:s.ICONS.NEXT_ARROW_CIRCLE_M,size:s.ICON_SIZE.SMALL_30}),t.appendChild(i),a.addClickListener(t,function(){e.pageIndex<e.pageCount&&(e.pageIndex+=1),D(e)}),t}function Y(e){var t;for(t=0;t<e.length;t++)if(e[t].label||e[t].label2)return!0;return!1}function K(e){var t;for(t=0;t<e.length;t++)if(e[t].label)return!0;return!1}function X(e){var t;for(t=0;t<e.length;t++)if(e[t].label2)return!0;return!1}function Z(e){var t;if(!e||!o.isArray(e)||0===e.length)throw new r("You need to provide an array of values.");if(e.length>at)throw new r(["Invalid number of values (should be <=",at,")."].join(""));for(t=0;t<e.length;t++)if(!J(e[t]))throw new r("Invalid values.")}function J(e){return void 0===e.value?!1:void 0===e.color||o.isString(e.color)?o.isArray(e.value)?!0:o.isNumeric(e.value):!1}function $(e){var t;if(e){if(!o.isArray(e))throw new r("Invalid marks.");for(t=0;t<e.length;t++)if(!Q(e[t]))throw new r("Invalid marks.")}}function Q(e){return void 0===e.value?!1:e.label&&!o.isString(e.label)?!1:o.isNumeric(e.value)}function et(e){if("number"!=typeof e)throw new r("Invalid parameter.")}function tt(e){var t,i,o,r=n.createContainer("legend");for(t=0;t<e.length;t++)i=n.createContainer("legend_circle legend_shape_point"),i.style.backgroundColor=e[t].color,i.style.borderColor=e[t].color,o=n.createInlineContainer("legend_label"),o.appendChild(i),o.innerHTML+=e[t].label,r.appendChild(o);return r}var nt,it=6,ot=8,rt=12,st="Farbverlauf_",at=2e3,lt=12,ct=4,ut=20;return nt=e.subclass({stepData:null,min:null,max:null,values:null,parameter:null,marks:null,marksRight:null,dom:null,svgDom:null,svgDefinitions:null,labelsDom:null,pageButtonDom:null,clickableChartDom:null,barGroups:!1,barGroupSize:0,barsPerPage:0,pageIndex:1,pageCount:1,legendDom:null,legendBorderVisibility:!0,constructor:function(e,t){this.parameter=e||{},this.stepData=t,this.dom=C(this),this.initializeFields(this.parameter)},initializeFields:function(e){nt.parent.initializeFields.call(this,e),e.height===s.SIZE.SMALL?this.dom.classList.add("ospm_height_small"):e.height===s.SIZE.LARGE&&this.dom.classList.add("ospm_height_large"),f(this,e.values),_(this,e.marks),e.min&&b(this,e.min),e.max&&y(this,e.max),v(this,e.marksRight),e.clickListener&&this.setClickListener(e.clickListener),void 0!==e.legendBorderVisibility&&this.setLegendBorderVisibility(e.legendBorderVisibility)},afterRenderLayout:function(){S(this)},updateDisplay:function(){D(this)},onResize:function(){u(this)},setEnabled:function(e){nt.parent.setEnabled.call(this,e),a.toggleClassName(this.clickableChartDom,"ospm_clickable",!!e),a.toggleClassName(this.clickableChartDom,"ospm_disabled",!e)},setHeight:function(e){this.dom.classList.remove("ospm_height_small"),this.dom.classList.remove("ospm_height_large"),e===s.SIZE.SMALL?this.dom.classList.add("ospm_height_small"):e===s.SIZE.LARGE&&this.dom.classList.add("ospm_height_large"),u(this)},setValues:function(e){1!==this.pageIndex&&(this.pageIndex=1),f(this,e),S(this)},setMarks:function(e){_(this,e),u(this)},setMarksRight:function(e){v(this,e),u(this)},setMin:function(e){b(this,e),u(this)},setMax:function(e){y(this,e),u(this)},getClassName:function(){return"VerticalBarChart"},setLegendBorderVisibility:function(e){var t=!!e;t===!0?this.keyLabelsContainerDom.classList.remove("vertical_bar_legend_without_border"):this.keyLabelsContainerDom.classList.add("vertical_bar_legend_without_border")},setLegend:function(e){this.legendDom&&this.dom.removeChild(this.legendDom),this.parameter.legend=e,this.legendDom=tt(e),this.dom.appendChild(this.legendDom)},getLegend:function(){return this.parameter.legend},getPageIndex:function(){return this.pageIndex},getBarsPerPage:function(){return this.barsPerPage}}),nt.proto(t.ClickMixin,{addClickListener:function(e){var t;return null===this.clickListeners&&(this.clickListeners={}),t=a.addListener(this.clickListeners,e),this.clickableChartDom&&this.clickableChartDom.classList.add("ospm_clickable"),this.configKeyboardNavigation(),t}}),nt}),define("tao/ospm/ui/widgets/Description",["tao/ospm/ui/widgets/Widget","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/ui/SelectionGroup","tao/ospm/common/OSPMError","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/common/Constants","tao/ospm/ui/views/DialogView","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/Button"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e){if(!e.imagePath)throw new o("Ein Description-Widget benötigt einen imagePath.")}function m(e){var t,i;return t=n.createContainer("ospm_description"),e.imageWrapperDom=n.createContainer("ospm_description_img_crop"),i=n.createContainer("ospm_description_img_container"),i.appendChild(e.imageWrapperDom),t.appendChild(i),e.labelDom=n.createElement("h5","ospm_description_label ospm_text_style_"+l.TEXT_STYLE.LABEL_BIG3),t.appendChild(e.labelDom),e.subLabelContainerDom=n.createContainer("ospm_description_sublabel_container ospm_text_style_"+l.TEXT_STYLE.LABEL4),e.subLabelDom=n.createInlineContainer("ospm_description_sublabel"),e.subLabelContainerDom.appendChild(e.subLabelDom),e.subLabelContainerDom.appendChild(n.createTextNode(" ")),s.isNBF()?(e.buttonTextDom=new d,e.buttonTextDom.dom.classList.add("ospm_hidden","ospm_description_button"),e.buttonTextDom.setStyle(l.BUTTON_STYLE.TERTIARY),e.buttonTextDom.setRightIcon(l.ICONS.NEXT_M),e.subLabelContainerDom.appendChild(e.buttonTextDom.dom)):(e.buttonTextDom=n.createInlineContainer("ospm_description_button ospm_icon_drilldown_description ospm_hidden"),e.buttonTextDom.setAttribute("role","button"),e.subLabelContainerDom.appendChild(e.buttonTextDom)),e.updateSubLabel=n.createClippingHandlerForMarkupDom(e,"subLabelDom",{maxRows:4,afterEllipsisElement:s.isNBF()?e.buttonTextDom.dom:e.buttonTextDom,staticClipping:!0,beforeClippingHandler:function(){var t=s.isNBF()?e.buttonTextDom.dom:e.buttonTextDom;s.isNBF()&&""===e.buttonTextDom.labelContainer.textContent||s.toggleClassName(t,"ospm_hidden",!1)},afterClippingHandler:function(t){var n=s.isNBF()?e.buttonTextDom.dom:e.buttonTextDom;s.isNBF()&&""===e.buttonTextDom.labelContainer.textContent||s.toggleClassName(n,"ospm_hidden",!t)}}).setter,t.appendChild(e.subLabelContainerDom),p(e),t}function p(e){var n=s.isNBF()?e.buttonTextDom.dom:e.buttonTextDom;s.addActionListener(n,function(){t.getKeys(e.clickListeners).length>0?e.notifyClickListeners():v(e.valueLabel,e.valueSubLabel)})}function f(e){var t,n;e.fullWidth?_(e):(n=e.getImageDom(),t=e.imageHeight||160,n.parentNode.parentNode.classList.remove("ospm_description_img_container_full_width"),n.src||n.classList.contains("ospm_icon")?(n.parentNode.style.height=t+"px",n.style.width="auto",n.style.height=t+"px",n.style.top="",n.style.left=""):g(e))}function g(e){var t=e.getImageDom();t&&(t.parentNode.style.height="",t.style.width="",t.style.height="",t.style.top="",t.style.left="")}function _(e){var t,n,i,o,r,s,a,l,c=e.imageHeight,u=e.getImageDom(),d=e.dom.offsetWidth;return u&&e.fullWidth?(u.parentNode.parentNode.classList.add("ospm_description_img_container_full_width"),c||(c=352>=d?160:d>576?320:240),r=u.parentNode,r.style.height=c+"px",u.classList.contains("ospm_icon")?void(u.classList.contains("ospm_icon_size_0")||(r.style.height=null)):(t=r.clientWidth,i=c/u.naturalHeight,o=t/u.naturalWidth,void(i>o?(u.style.height=c+"px",n=u.naturalHeight/c,s=u.naturalWidth/n,a=(t-s)/2,u.style.width=s+"px",u.style.top="0",u.style.left=a+"px"):(l=r.offsetWidth,u.style.width=l+"px",n=u.naturalWidth/r.offsetWidth,s=u.naturalHeight/n,a=(c-s)/2,u.style.height=s+"px",u.style.top=a+"px",u.style.left="0")))):void g(e)}function v(e,t){c.createTextDialog({title:e,text:t}).show()}var b;return b=e.subclass({stepData:null,valueLabel:"",valueSubLabel:"",imageHeight:null,updateSubLabel:null,constructor:function(e,t){e=e||{},this.stepData=t,h(e),this.dom=m(this),this.initializeFields(e)},setImageHeight:function(e){if(e){if(8>e||e>4e3)throw new o("Die Image Höhe muss zwischen 8 und 4000 betragen.");this.imageHeight=e}else this.imageHeight=null;f(this)},getImageHeight:function(){return this.imageHeight},setFullWidth:function(e){this.fullWidth=e,f(this)},isFullWidth:function(){return this.fullWidth},setButtonText:function(e){s.isNBF()?this.buttonTextDom.setLabel(e):n.createMarkupDomTree(this,this.buttonTextDom,e),this.setSubLabel(this.valueSubLabel)},initializeFields:function(e){b.parent.initializeFields.call(this,e),this.setIcon(e.imagePath),this.setImagePath(e.imagePath),e.clickListener&&this.setClickListener(e.clickListener),e.imageClickListener&&this.setImageClickListener(e.imageClickListener),this.setFullWidth(e.fullWidth),this.setLabel(e.label),this.setSubLabel(e.subLabel),e.imageHeight&&this.setImageHeight(e.imageHeight),e.wrapMode&&this.setWrapMode(e.wrapMode),this.setButtonText(e.buttonText),f(this)},onResize:function(){b.parent.onResize.call(this),s.updateElement(this)},afterRenderLayout:function(){},updateDisplay:function(){b.parent.updateDisplay.call(this);var e=s.isNBF()?this.buttonTextDom.dom:this.buttonTextDom;this.isEnabled()&&s.isNBF()||this.hasClickListeners()?e.setAttribute("tabindex",a.TABINDEXES.DEFAULT):e.removeAttribute("tabindex"),this.resizeResponsiveImage(0,function(){this.fullWidth&&_(this)}.bind(this)),this.fullWidth&&_(this)},getClassName:function(){return"Description"}}),b.proto(r.LabelMixin,r.SubLabelMixin,r.ClickMixin,r.ImageClickMixin,r.ImageMixin,r.WrapMixin,{setImagePath:function(e){r.ImageMixin.setResponsiveImagePath.call(this,e,function(){f(this)}.bind(this))},setIcon:function(e){var n,i=this.getImageDom();t.isSet(e.size)?(n=i.parentNode,this.setTopMargin(l.MARGIN.SMALL3),n.style.height=null):this.setTopMargin(l.MARGIN.DEFAULT),this.setImagePath(e)},setWrapMode:function(e){r.WrapMixin.setWrapMode.call(this,e),this.setSubLabel(this.valueSubLabel)},hasClickListeners:function(){return t.getKeys(this.clickListeners).length>0||t.getKeys(this.imageClickListeners).length>0},removeClickableStyling:function(){var e=this.getImageDom();this.dom&&(this.hasClickListeners()||this.dom.classList.remove("ospm_clickable"),(null===this.imageClickListeners||t.getKeys(this.imageClickListeners).length<=0)&&e.classList.remove("ospm_clickable"))},clearClickListeners:function(){this.clickListeners=null,this.removeClickableStyling(),this.configKeyboardNavigation()},setLabel:function(e){r.LabelMixin.setLabel.call(this,e),this.valueLabel=this.getLabel()},setSubLabel:function(e){this.cachedLabelDomWidth&&(this.cachedLabelDomWidth=0),r.SubLabelMixin.setSubLabel.call(this,e),this.valueSubLabel=this.getSubLabel(),this.updateSubLabel(this.valueSubLabel)},buildImageDom:function(e){var t;return t=e?u.createIcon(e,0):n.createImage("ospm_description_img")}}),b}),define("tao/ospm/ui/widgets/list/DescriptionList",["tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/Description","tao/ospm/ui/widgets/Footer","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s){function a(e,t){t.imageClickListener=t.listener?t.listener:null,e.descriptionWidget=new n(t),e.addElement(e.descriptionWidget),t.headerLabel&&l(e,t.headerLabel),t.footerButton&&c(e,t.footerButton,t.listener),e.footerButtonLabel=t.footerButton,e.listener=t.listener}function l(e,n){e.headerWidget=new t({label:n,alignment:"center"}),e.setHeader(e.headerWidget)}function c(e,t,n){var r=null,s={wrapMode:o.WRAP_MODE.WRAP,distributeActionButtons:!0};t&&(r={label:t},"function"==typeof n&&(r.action=n),s.actionButtons=[r]),e.footerWidget=new i(s),e.setFooter(e.footerWidget)}var u=e.subclass({dom:null,headerWidget:null,descriptionWidget:null,footerWidget:null,footerButtonLabel:null,listener:null,constructor:function(e,t){u.parent.constructor.call(this,{},t),s.isNBF()&&this.dom.classList.add("ospm_widget_description_list"),a(this,e)},getLabel:function(){return this.descriptionWidget.getLabel()},setLabel:function(e){this.descriptionWidget.setLabel(e)},getSubLabel:function(){return this.descriptionWidget.getSubLabel()},setSubLabel:function(e){this.descriptionWidget.setSubLabel(e)},getImagePath:function(){return this.descriptionWidget.getImagePath()},setImagePath:function(e){this.descriptionWidget.setImagePath(e)},setIcon:function(e){this.descriptionWidget.setIcon(r.isStringProvided(e)&&!e.toString().match(/\//)?{name:e}:e)},setImageHeight:function(e){this.descriptionWidget.setImageHeight(e)},getImageHeight:function(){return this.descriptionWidget.getImageHeight()},setFullWidth:function(e){this.descriptionWidget.setFullWidth(e)},isFullWidth:function(){return this.descriptionWidget.isFullWidth()},setButtonText:function(e){this.descriptionWidget.setButtonText(e)},getHeaderLabel:function(){return this.headerWidget.getLabel()},setHeaderLabel:function(e){l(this,e)},getFooterButton:function(){return this.footerButtonLabel},setFooterButton:function(e){c(this,e,this.listener),this.footerButtonLabel=e},setListener:function(e){this.descriptionWidget.setImageClickListener(e),c(this,this.footerButtonLabel,e),this.listener=e},setClickListener:function(e){this.descriptionWidget.setClickListener(e)},getClassName:function(){return"DescriptionList"}});return u}),define("tao/ospm/ui/widgets/Summary",["tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/core/UIToolkit","tao/ospm/core/DomFactory","tao/ospm/ui/UIConstants","tao/ospm/ui/widgets/Widget","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/mixins/Mixins"],function(e,t,n,i,o,r,s,a,l,c){function u(e){var t,n,r,s=!1;if(o.isRendered(e)&&e.dom&&e.dom.offsetParent){if(n=e.getImageDom(),n&&e.isGalleryMode())for(t=0;t<n.length;t++)s=h(e,n[t]),r=e.getImagePath(t),i.USE_JAVASCRIPT_RESPONSIVE_IMAGE_SOLUTION&&e.isBilderpoolReferenced(r)?e.resizeResponsiveImage(t):s&&e.setupImage(r,null,t);else n?(s=h(e,n),r=e.getImagePath(),i.USE_JAVASCRIPT_RESPONSIVE_IMAGE_SOLUTION&&e.isBilderpoolReferenced(r)?e.resizeResponsiveImage():s&&r&&e.setupImage(r)):h(e,n);o.toggleClassName(e.dom,"ospm_is_empty",m(e))}}function d(e,t){var n;return n=r.createContainer("ospm_summary ospm_summary_image_margin"),e.titleDom=r.createContainer("ospm_summary_title"),n.appendChild(e.titleDom),e.galleryNavigationContainer=r.createContainer("ospm_summary_image_container"),e.imageWrapperDom=r.createContainer("ospm_image_wrapper"),e.galleryNavigationContainer.appendChild(e.imageWrapperDom),n.appendChild(e.galleryNavigationContainer),n.appendChild(r.createContainer("ospm_summary_label",t.label)),n.appendChild(r.createContainer("ospm_summary_sublabel",t.subLabel)),n.appendChild(r.createContainer("ospm_summary_section_container")),n}function h(e,t){var n=!1;return e.dom.offsetParent.offsetWidth<480?(e.dom.classList.add("ospm_summary_small"),e.dom.classList.remove("ospm_summary_wide"),t&&!t.classList.contains("ospm_summary_image_small")&&(t.classList.add("ospm_summary_image_small"),t.classList.remove("ospm_summary_image_large"),t.classList.contains("ospm_icon")||(n=!0))):e.dom.offsetParent.offsetWidth>=480&&(e.dom.classList.remove("ospm_summary_small"),o.toggleClassName(e.dom,"ospm_summary_wide",e.wide),t&&!t.classList.contains("ospm_summary_image_large")&&(t.classList.add("ospm_summary_image_large"),t.classList.remove("ospm_summary_image_small"),t.classList.contains("ospm_icon")||(n=!0))),n}function m(e){return 0===e.titleDom.textContent.length&&0===e.dom.querySelector(".ospm_summary_label").textContent.length&&0===e.dom.querySelector(".ospm_summary_sublabel").textContent.length&&0===e.dom.querySelector(".ospm_summary_section_container").textContent.length&&!e.dom.classList.contains("ospm_has_image")}function p(e){e.numImages>0?(e.dom.classList.add("ospm_has_image"),e.imageWrapperDom.style.display="block"):(e.dom.classList.remove("ospm_has_image"),e.imageWrapperDom.style.display="none")}function f(e){e.rightIconDom&&(e.hasClickListeners()&&"button"!==e.rightIconDom.getAttribute("role")?(e.rightIconDom.setAttribute("role","button"),e.rightIconDom.classList.add("ospm_clickable")):e.hasClickListeners()||"img"===e.rightIconDom.getAttribute("role")||e.rightIconDom.setAttribute("role","img"),e.hasClickListeners()&&e.rightIconDom.getAttribute("aria-disabled")!==(!e.isEnabled()).toString()&&e.rightIconDom.setAttribute("aria-disabled",(!e.isEnabled()).toString()))}var g,_,v;return _={name:n.ICONS.CHECK_S,color:n.ICON_COLOR.GREEN_3},v=56,g=a.subclass({stepData:null,titleText:null,titleDom:null,rightIconDom:null,labelText:null,flyout_context_menu_view_v_offset:v,wide:!1,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=d(this,e),this.initializeFields(e)},initializeFields:function(e){g.parent.initializeFields.call(this,e),e.upperMargin&&this.setUpperMargin(e.upperMargin),this.setTitle(e.title),this.setLabel(e.label),this.setSubLabel(e.subLabel),this.setToggleClickableClass(!1),this.setImageClickListener(e.imageClickListener),this.setChangeListener(e.changeListener),e.imagePath&&this.setIcon(e.imagePath),e.rightIcon&&this.setRightIcon(e.rightIcon),this.setImageMargin(e.imageMargin),e.sections&&(e.wrapMode?this.setSections(e.sections,e.wrapMode):this.setSections(e.sections)),this.setWide(e.wide),e.clickListener&&this.setClickListener(e.clickListener),e.wrapMode&&this.setWrapMode(e.wrapMode)},setImageMargin:function(e){o.toggleClassName(this.dom,"ospm_summary_image_margin",e!==!1)},setUpperMargin:function(e){this.setTopMargin("minimal"===e?n.MARGIN.NONE:e)},setTitle:function(t){this.titleText=e.isStringProvided(t)?t:null,r.createMarkupDomTree(this,this.titleDom,t),this.flyout_context_menu_view_v_offset=v+this.titleDom.offsetHeight},getTitle:function(){return this.titleText},setLabel:function(t){var n;this.labelText=e.isStringProvided(t)?t:null,n=this.dom.querySelector(".ospm_summary_label"),r.createMarkupDomTree(this,n,t)},getLabel:function(){return this.labelText},setSubLabel:function(e){var t;t=this.dom.querySelector(".ospm_summary_sublabel"),r.createMarkupDomTree(this,t,e)},setRightIcon:function(n){if(this.rightIconDom&&this.rightIconDom.parentNode.removeChild(this.rightIconDom),e.isStringProvided(n))throw new t("Das RightIcon eines Summaries benötigt ein Label um zugänglich zu sein. Bitte verwenden sie ein Icon-Object");if(e.isObject(n)&&e.isStringProvided(n.name)){if(!e.isStringProvided(n.label))throw new t("Das RightIcon eines Summaries benötigt ein Label um zugänglich zu sein.");this.rightIconDom=l.createIcon(n),this.rightIconDom.classList.add("ospm_summary_title_icon"),e.isStringProvided(n)&&l.updateIcon(this.rightIconDom,n,!1,!0),this.dom.appendChild(this.rightIconDom),o.addActionListener(this.rightIconDom,function(){this.notifyClickListeners()}.bind(this)),this.configKeyboardNavigation()}else this.rightIconDom=null},setSections:function(n,i){function s(e,t,n){var i=r.createInlineContainer(t);r.createMarkupDomTree(m,i,n),e.appendChild(i)}var a,c,d,h=this.dom.querySelector(".ospm_summary_section_container"),m=this;o.removeAllChildren(h),e.isArrayProvided(n)&&n.forEach(function(n){a=r.createContainer("ospm_summary_section"),h.appendChild(a),n.header&&((n.header.label||n.header.infoText)&&(c=r.createContainer("ospm_summary_section_header"),a.appendChild(c)),n.header.label&&s(c,"ospm_label",n.header.label),e.isStringProvided(n.header.infoText)&&s(c,"ospm_entry_infotext"," "+n.header.infoText)),e.isArrayProvided(n.items)&&n.items.forEach(function(n){var u=n.label;if(!u)throw new t("Eine Zeile muss ein Label besitzen.");c=r.createContainer("ospm_summary_section_item"),c.appendChild(l.createIcon(n.leftIcon||_,0,!0)),console.log(i),o.isNBF()&&"wrap"===i?(d=r.createContainer("ospm_summary_section_item_label_infotext"),s(d,"ospm_label",u),e.isStringProvided(n.infoText)&&s(d,"ospm_entry_infotext"," "+n.infoText),c.appendChild(d)):(s(c,"ospm_label",u),e.isStringProvided(n.infoText)&&s(c,"ospm_entry_infotext"," "+n.infoText)),a.appendChild(c)})}),u(this)},setWide:function(e){this.wide=e===!0,u(this)},onResize:function(){u(this),g.parent.onResize.call(this)},updateDisplay:function(){g.parent.updateDisplay.call(this),u(this)},afterRenderLayout:function(){u(this)},getClassName:function(){return"Summary"},setEnabled:function(e){g.parent.setEnabled.call(this,e),this.configKeyboardNavigation()}}),g.proto(c.ClickMixin,c.ImageMixin,c.WrapMixin),g.prototype.setIcon=function(e){this.setImagePath(e)},g.prototype.setImagePath=function(e){c.ImageMixin.setResponsiveImagePath.call(this,e,function(){this.imageWrapperDom.dataset.scrollupdate="true"}.bind(this)),p(this),u(this)},g.prototype.configKeyboardNavigation=function(e){var t=!0;c.ClickMixin.configKeyboardNavigation.call(this,e),this.rightIconDom&&(this.isEnabled&&"function"==typeof this.isEnabled&&(t=this.isEnabled()),t=t&&(this.hasClickListeners()||this.rightIconDom.classList.contains("ospm_clickable")),t?this.rightIconDom.setAttribute("tabindex",s.TABINDEXES.DEFAULT):this.rightIconDom.removeAttribute("tabindex"),f(this))},g.prototype.buildImageDom=function(e){return e?l.createIcon(e,0):r.createImage("ospm_summary_image")},g}),define("tao/ospm/ui/widgets/TableHelper",["tao/ospm/ui/widgets/Widget","tao/ospm/common/Constants","tao/ospm/ui/views/ContextMenuView","tao/ospm/common/Toolkit","tao/ospm/common/TableCellFormatter","tao/ospm/common/OSPMError","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/ui/UIConstants","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e,t){return"function"==typeof e.getSortedRowIndex?e.getSortedRowIndex(t):t}function h(e){var t;return i.hasProperty(e,"contextMenuView")?(e.contextMenuView.parent=null,t=new v(e.contextMenuView).getIconDom()):t=a.createIcon(e,32),t.classList.add(c.RIGHT_ICON_DEFAULT_CLASS),t}function m(e){return"number"!=typeof e||isNaN(e)}function p(e,t,n,i){var o,s,l,u,d,h,m,p,f;if("left"===i)d=c.LEFT_ICON_DEFAULT_CLASS,h=0,m="ospm_has_lefticon",f="firstChild";else{if("right"!==i)throw new r("Ein Zeilenicon kann nur links oder rechts gesetzt werden.");d=c.RIGHT_ICON_DEFAULT_CLASS,h=e.data.columns-1,m="ospm_has_righticon",f="lastChild",p="ospm_right_icon_cell"}e.options.mobileMode?(u=n>0?n-(e.hasColumnHeaders()?1:0):0,l=e.dom.querySelectorAll(".ospm_table_rowblock")[u],o=l.querySelector(".ospm_table_rowblock_header")):o=_.getCellDom(e,n,h),o&&(s=a.createIcon(t,32),s&&s.classList.add(d),o.classList.contains(m)?s?o.replaceChild(s,o[f]):(o.removeChild(o[f]),o.classList.remove(m)):s&&(o.classList.add(m),o[f]?"left"===i?o.insertBefore(s,o[f]):"right"===i&&(o[f].classList.add(p),o.insertBefore(s,o[f].nextSibling)):o.appendChild(s)))}var f=32,g=32,_={DEFAULT_FORMATTER:new o,Mixin:{setWidth:function(e,t){var n;_.validateColumn(e,this.data.columns),this.options.width[e]=t,this.options.mobileMode||(n=_.getCellDom(this,0,e),n&&(n.style.width=t+"%"))},getWidth:function(e){return _.validateColumn(e,this.data.columns),this.options.width[e]},hasColumnHeaders:function(){return this.options.hasColumnHeaders},hasRowHeaders:function(){return this.options.hasRowHeaders},setHintIcon:function(e,t){var n,i;_.isTableRowDomIndexValid(this,e)&&(e=d(this,e),n=_.getRowDom(this,e),i=n.firstChild.lastChild,l.HintMixin.hasHintIconChanged(i,i.currentHintIcon,t)&&(i.currentHintIcon=t))},getHint:function(e){return this.options.hints[e]||""},setCellIcon:function(e,t,n,i){var o,s,a,l,c,m,p="Für die Zelle mit Zeilenindex "+t+" und Spaltenindex "+n+" kann kein Icon gesetzt werden.";if(t=d(this,t),!t||!n)throw new r("Zeilen- und Spaltenindex müssen spezifiziert sein.");if(_.hasColumnAndRowHeaders(this)?(o=0,s=0,a=t-1,l=n-1):_.hasOnlyRowHeaders(this)?(s=0,a=t,l=n-1):_.hasOnlyColumnHeaders(this)?(o=0,a=t-1,l=n):(a=t,l=n),t===o||n===s)throw new r(p);if(c=this.options.mobileMode?_.getMobileCellDom(this,t,n)[0]:_.getCellDom(this,t,n),!c)throw new r(p);m=h(e),m&&u.addClickListener(m,i),c.classList.contains("ospm_has_righticon")?m?c.replaceChild(m,c.lastChild):(c.removeChild(c.lastChild),c.classList.remove("ospm_has_righticon")):m?(c.classList.add("ospm_has_righticon"),c.lastChild&&(this.options.mobileMode||c.lastChild.classList.add("ospm_right_icon_cell"),c.insertBefore(m,c.lastChild.nextSibling))):c.appendChild(m),this.options.mobileMode&&_.updateMinHeight(this),this.options.cellIcon[a][l]=e},setLeftIcon:function(e,t){this.setIcon(e,t,"left")},setIcon:function(e,t,n){var o,s,a,l,u,h,m=t;if("left"===n)l="leftIcon",u=c.LEFT_ICON_DEFAULT_CLASS,h="ospm_has_lefticon";else{if("right"!==n)throw new r("Ein Icon kann nur links oder rechts gesetzt werden.");l="rightIcon",u=c.RIGHT_ICON_DEFAULT_CLASS,h="ospm_has_righticon"}if(this.hasRowHeaders()){if(t=d(this,t),i.isSet(t))_.isTableRowDomIndexValid(this,t)&&(this.options[l][m]=e,p(this,e,t,n));else if(i.isStringProvided(e))for(this.options[l]=e,a=0;a<this.data.rows;a++)p(this,e,a,n);else for(this.options[l]=[],s=this.dom.querySelectorAll("."+u),a=0;a<s.length;a++)o=s[a],o.parentNode.classList.remove(h),o.parentNode.removeChild(o);this.options.mobileMode&&_.updateMinHeight(this)}},setSummingRow:function(e){this.options.hasSummingRow=!!e,_.syncSummingRow(this)},hasSummingRow:function(){return this.options.hasSummingRow},setHint:function(e,t){var n,i,o,r=e;!this.hasRowHeaders()||!_.isRowIndexValid(e,this.data.rows)||this.hasColumnHeaders()&&1>e||(e=d(this,e),this.options.hints[r]=t,n=_.getRowDom(this,e),i=this.options.mobileMode?n.lastChild:n.nextSibling.firstChild.firstChild,o=n.firstChild.lastChild,t?(s.createMarkupDomTree(this,i,t),o.dataset.mode="hide",o.classList.remove("ospm_hidden")):(i.textContent="",o.dataset.mode="",o.classList.add("ospm_hidden")),i.classList.add("ospm_hidden"))},setInfoText:function(e,t){var n;!this.hasRowHeaders()||!_.isRowIndexValid(e,this.data.rows)||this.hasColumnHeaders()&&1>e||(e=d(this,e),this.data.infoTexts[e]=t,this.options.mobileMode?(n=_.getMobileCellDom(this,e,0),n.forEach(function(e){e&&this.addInfoTextToRowHeader(this,e,t)}.bind(this))):(n=_.getCellDom(this,e,0),n&&null!==t&&this.addInfoTextToRowHeader(this,n,t)))},addInfoTextToRowHeader:function(e,t,n){var i=t.querySelector(".ospm_entry_infotext");"string"==typeof n?n=" "+n:Array.isArray(n)&&n.length>0&&(n[0]=" "+n[0]),null!==i&&s.createMarkupDomTree(e,i,n)},setVisibleCell:function(e,t,n){var i,o,r,s;if(m(n)){if(m(t))for(s=e===!0,o=0;o<this.data.rows;o++)for(i=this.options.visibleCells[o],r=0;r<this.data.columns;r++)i[r]=s;else if(_.isRowIndexValid(t,this.data.rows))for(s=e===!0,i=this.options.visibleCells[t],r=0;r<this.data.columns;r++)i[r]=s}else if(m(t)){if(_.isColumnIndexValid(n,this.data.columns))for(s=e===!0,o=0;o<this.data.rows;o++)i=this.options.visibleCells[o],i[n]=s}else _.isRowIndexValid(t,this.data.rows)&&_.isColumnIndexValid(n,this.data.columns)&&(this.options.visibleCells[t][n]=e===!0);_.updateCellsVisibility(this)},isVisibleCell:function(e,t){return _.validateColumn(t,this.data.columns),_.validateRow(e,this.data.rows),this.options.visibleCells[e][t]}},validateColumn:function(e,t){if(!i.isNumeric(e))throw new r("Fehlender oder ungültiger Parameter: column");if(!i.isNumeric(t))throw new r("Fehlender oder ungültiger Parameter: totalColumns");if(!this.isColumnIndexValid(e,t))throw new r("Parameter out of bounds: column")},isColumnIndexValid:function(e,t){return e>=0&&t>e},validateRow:function(e,t){if(!i.isNumeric(e))throw new r("Fehlender oder ungültiger Parameter: row");if(!i.isNumeric(t))throw new r("Fehlender oder ungültiger Parameter: totalRows");if(!this.isRowIndexValid(e,t))throw new r("Parameter out of bounds: row")},isRowIndexValid:function(e,t){return e>=0&&t>e},updateMinHeight:function(e){var t,n,i,o=!1;if(e.hasRowHeaders())for(i=e.dom.querySelectorAll(".ospm_table_row"),t=0;t<i.length;t++)if(n=i[t].firstChild,n.classList.contains("ospm_has_lefticon")&&n.firstChild.clientHeight>=24){o=!0;break}u.toggleClassName(e.dom,"ospm_min_height_large",o)},addHelpMessageDom:function(e,t){var n,i,o;n=s.createTableRow("ospm_help_message_container"),i=s.createTableCell(),i.setAttribute("colspan",t),o=s.createContainer("ospm_help_message"),o.classList.add("ospm_hidden"),i.appendChild(o),n.appendChild(i),e.appendChild(n)},getRowDom:function(e,t){var n;return e.options.mobileMode?(n=t-(e.hasColumnHeaders()?1:0),e.dom.querySelectorAll(".ospm_table_rowblock_header_wrapper")[n]):(t=2*t,e.hasColumnHeaders()&&t>0&&t--,e.dom.childNodes[t])},getCellIcon:function(e,t,n){var o,r,s,a="ospm_table_cell",l=e.dom.getElementsByClassName("ospm_table_row");return t=d(e,t),e.hasColumnHeaders()?t--:0===t&&(a="ospm_table_top_cell"),o=l[t],r=o.getElementsByClassName(a),i.isSet(r[n])?(s=r[n].getElementsByClassName("ospm_icon"),0!==s.length&&i.isSet(s[0])?s[0]:null):null},getCell:function(e,t,n){return this.getCellDom(e,t,n)},getCellDom:function(e,t,n){var i=this.getRowDom(e,t);return i&&"undefined"!=typeof i.childNodes[n]?i.childNodes[n]:null},isTableRowDomIndexValid:function(e,t){return t<e.dom.childElementCount&&t>=(e.hasColumnHeaders()?1:0)},syncSummingRow:function(e){var t=e.dom.querySelector(".ospm_table_summingrow");t&&t.classList.remove("ospm_table_summingrow"),e.options.hasSummingRow&&(t=_.getRowDom(e,e.data.rows-1),t&&t.classList.add("ospm_table_summingrow"))},updateCellsVisibility:function(e){function t(e){u.toggleClassName(e,"ospm_table_cell_invisible",!r[i])}var n,i,o,r,s;for(n=0;n<e.data.rows;n++)for(s=n,"function"==typeof e.getOriginalRowIndex&&(s=e.getOriginalRowIndex(n)),r=e.options.visibleCells[s],i=0;i<e.data.columns;i++)e.options.mobileMode?(o=_.getMobileCellDom(e,n,i),o.forEach(t)):(o=_.getCellDom(e,n,i),t(o))},getMobileCellDom:function(e,t,n){var i,o,r=[];if(e.hasRowHeaders()&&0===n)e.hasColumnHeaders()&&0===t?r.push(e.dom.querySelector(".ospm_table_title")):(i=e.dom.querySelectorAll(".ospm_table_rowblock_header")[e.hasColumnHeaders()?t-1:t],r.push(i));else if(e.hasColumnHeaders()&&0===t)for(i=e.dom.querySelectorAll(".ospm_table_rowblock"),o=0;o<i.length;o++)r.push(i[o].querySelectorAll(".ospm_table_rowblock_column_header_cell")[e.hasRowHeaders()?n-1:n]);
else i=e.dom.querySelectorAll(".ospm_table_rowblock")[e.hasColumnHeaders()?t-1:t],r.push(i.querySelectorAll(".ospm_table_rowblock_value_cell")[e.hasRowHeaders()?n-1:n]);return r},validateAndCompleteParameter:function(e){var t,n,o,s,a,l,c,u,d,h;if(l=e||{},l.columnHeaders!==!1?l.columnHeaders=!0:l.sortable=!1,l.rowHeaders!==!1&&(l.rowHeaders=!0),i.isArray(l.values)){for(c=l.values.length,u=l.values[0].length,t=0;t<l.values.length;t++)if(!i.isArray(l.values[t])||l.values[t].length!==l.values[0].length)throw new r("Ungültiger Parameter: values["+t+"]");if(!(l.values[0].length>0))throw new r("Ungültiger Parameter: values");l.columns=l.values[0].length}else{if(!(i.isNumeric(l.columns)&&l.columns>0))throw new r("Fehlender Parameter: columns");l.values=new Array(1),l.values[0]=new Array(l.columns)}if(!i.isArray(l.infoTexts))for(l.infoTexts=[],t=0;t<l.values.length;t++)l.infoTexts.push([]);if(i.isArray(l.leftIcon)){if(l.leftIcon.length>l.values.length)throw new r("Anzahl der linken Icons ist größer als die Anzahl der Zeilen in der Tabelle")}else i.isStringProvided(l.leftIcon)||(l.leftIcon=[]);if(i.isArray(l.rightIcon)){if(l.rightIcon.length>l.values.length)throw new r("Anzahl der rechten Icons ist größer als die Anzahl der Zeilen in der Tabelle")}else i.isStringProvided(l.rightIcon)||(l.rightIcon=[]);if(i.isArray(l.cellIcon)){if(l.columnHeaders&&l.rowHeaders?(d=u-1,h=c-1):l.columnHeaders?(d=u,h=c-1):l.rowHeaders?(d=u-1,h=c):(d=u,h=c),l.cellIcon.length!==h||l.cellIcon[0].length!==d)throw new r("Das cellIcon-Array ist falsch dimensioniert: Zeilen: "+l.cellIcon.length+" (erforderlich: "+h+"); Spalten: "+l.cellIcon[0].length+" (erforderlich: "+d+")");for(t=0;t<l.cellIcon.length;t++){if(s=l.cellIcon[t],a=l.cellIcon[0],!i.isArray(s))throw new r("cellIcon muss ein zweidimensionales Array sein.");if(s.length!==a.length)throw new r("Alle Zeilen von cellIcon müssen gleich lang sein.")}}else if(!i.isStringProvided(l.cellIcon))for(l.cellIcon=[],t=0;t<l.values.length;t++)l.cellIcon.push([]);if(i.isArray(l.cellVisible)){if(l.cellVisible.length>l.values.length)throw new r("Anzahl der cellVisible Elemente ist größer als die Anzahl der Zeilen in der Tabelle");for(t=0;t<l.values.length;t++)if(o=l.cellVisible[t],o.length>l.columns)throw new r("Anzahl der cellVisible Werte für die Zeile "+t+" ist größer als die Anzahl der Spalten in der Tabelle")}else for(l.cellVisible=[],t=0;t<l.values.length;t++){for(o=[],n=0;n<l.columns;n++)o[n]=!0;l.cellVisible[t]=o}if(l.width||(l.width=new Array(l.columns)),!i.isArray(l.width)||l.width.length!==l.columns)throw new r("Ungültiger Parameter: width");if(l.formatter||(l.formatter=new Array(l.columns)),!i.isArray(l.formatter)||l.formatter.length!==l.columns)throw new r("Ungültiger Parameter: formatter");return l.summingRow!==!0&&(l.summingRow=!1),"undefined"==typeof l.sortable&&(l.sortable=!1),l},setTableCellWidth:function(e,t,n,i){0===n&&e.options.width[i]>=0&&(t.style.width=e.options.width[i]+"%")},getTableCellCssClasses:function(e,n,i,r,s,a){var l,c,u=[],d=0===i&&e.hasColumnHeaders();return u.push(d?"ospm_table_column_header_cell":0===i?"ospm_table_top_cell":"ospm_table_cell"),l=a.getTextStyle(i,r,s,e),u.push(d?"ospm_text_style_"+t.TEXT_STYLE.LABEL3:"ospm_text_style_"+l),c=a.getHorizontalAlignment(i,r,s,e),c===o.ALIGNMENT.LEFT?u.push("ospm_table_cell_alignment_left"):c===o.ALIGNMENT.CENTER?u.push("ospm_table_cell_alignment_center"):c===o.ALIGNMENT.RIGHT&&u.push("ospm_table_cell_alignment_right"),0===r&&e.options.leftIcon[i]&&u.push("ospm_has_lefticon"),e.options.visibleCells[i][r]||u.push("ospm_table_cell_invisible"),n.classList.contains("ospm_has_righticon")&&u.push("ospm_has_righticon"),u},tableHintCallback:function(e){var t,n;n=u.findParent(e.target,{cssClass:"ospm_table_row"}),n&&n.nextSibling&&(t=n.nextSibling.querySelector(".ospm_help_message"),t&&(t.classList.contains("ospm_hidden")?(t.classList.remove("ospm_hidden"),e.target.dataset.scrollupdate="true",e.target.setAttribute("aria-pressed","true")):(t.classList.add("ospm_hidden"),e.target.dataset.scrollupdate="true",e.target.setAttribute("aria-pressed","false"))))},createCellIconDom:function(e,t,n){var o,r,s=e.options.cellIcon;return o=i.isString(s)?s:void 0===s[t]?null:s[t][n],o&&(r=h(o)),r},hasColumnAndRowHeaders:function(e){return e.hasRowHeaders()&&e.hasColumnHeaders()},hasOnlyRowHeaders:function(e){return e.hasRowHeaders()&&!e.hasColumnHeaders()},hasOnlyColumnHeaders:function(e){return e.hasColumnHeaders()&&!e.hasRowHeaders()}},v=e.subclass({contextMenuView:null,iconDom:null,constructor:function(e){this.dom=s.createContainer("ospm_table_contextmenuview_icon"),this.iconDom=a.createIcon("dropdown"),this.dom.appendChild(this.iconDom),this.contextMenuView=new n({content:e,alignAtWidget:this}),u.addActionListener(this.iconDom,function(){this.contextMenuView.show({position:{alignDom:["top",t.HORIZONTAL_ALIGNMENT.RIGHT],alignAtDom:["top",t.HORIZONTAL_ALIGNMENT.RIGHT]},vOffset:f,hOffset:g})}.bind(this),!1,!0)},getIconDom:function(){return this.dom}});return _}),define("tao/ospm/ui/widgets/TableInputField",["tao/ospm/common/Constants","tao/ospm/ui/widgets/Widget","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/mixins/InputPart","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/ui/AutoCompleteValidator"],function(e,t,n,i,o,r,s,a,l){function c(e){var t,i;return i=n.createContainer("ospm_ti_cell_wrapper"),t=h.buildContainerDom(e),t.appendChild(e.buildInputIconContainerDom()),i.appendChild(t),i.appendChild(e.buildErrorDom()),r.isNBF()&&e.errorMessageShouldHaveIcon(),i}var u,d,h;return u=t.subclass({dom:null,contentDom:null,onCustomInputChanged:null,onError:null,constructor:function(e){e=e||{},this.dom=c(this),this.contentDom=this.dom,this.initializeFields(e),this.addEventListeners()},initializeFields:function(e){u.parent.initializeFields.call(this,e),h.initializeFields(this,e)},hasValue:function(){return this.isEnabled()&&o.isStringProvided(this.getValue())},isEmpty:function(){return!this.hasValue()},setReadOnly:function(e){this.readOnly=e,this.setEnabled(!e)},isReadOnly:function(){return this.readOnly},setEnabled:function(e){u.parent.setEnabled.call(this,e),this.updateInputIconContainerDom()},setFocus:function(){this.inputFieldDom.focus()},getDataType:function(){return this.dataType},updateDisplay:function(){u.parent.updateDisplay.call(this),this.isEnabled()?((this.dom.dataset.mode===e.INPUT_MODE.DISABLED||this.dom.dataset.mode===e.INPUT_MODE.MANDATORY)&&(this.dom.dataset.mode=e.INPUT_MODE.ACTIVE),this.inputFieldDom.disabled=!1):(this.dom.dataset.mode=e.INPUT_MODE.DISABLED,this.inputFieldDom.disabled=!0)},setInputValue:function(e){this.inputFieldDom.value=e,this.onInputChanged()},getClassName:function(){return"TableInputField"}}),h=new s({}),d={setDataType:function(e){h.API.setDataType.call(this,e),this.dataType=e},setMandatory:function(e){this.mandatory=!!e,h.updatePlaceholder(this)},updatePlaceholder:function(){h.updatePlaceholder(this)},onKeyDown:function(e){return l.onKeyDown(this,e)||h.API.onKeyDown.call(this,e)},onKeyUp:function(e){return l.onKeyUp(this,e)||h.API.onKeyUp.call(this,e)},notifyInputToolHideListeners:function(e){this.data.table.notifyInputToolHideListeners(e)}},u.proto(h.API,a.ErrorMixin,new a.TabIndexMixinFactory({domName:"inputFieldDom"}),a.FocusableMixin,a.MandatoryMixin,l.Mixin,a.AutoCompleteSelectionMixin,d),u}),define("tao/ospm/ui/widgets/TableInput",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/list/List","tao/ospm/core/DomFactory","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/common/Toolkit","tao/ospm/common/TableCellFormatter","tao/ospm/common/OSPMError","tao/ospm/common/WidgetValidator","tao/ospm/ui/widgets/TableHelper","tao/ospm/ui/UIConstants","tao/ospm/ui/widgets/TableInputField"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(e,t,n){return"string"==typeof t&&(t=e[t]),"function"!=typeof t?null:(s.isArray(n)&&n.length>0||(n=[e]),t.apply(e,n))}function p(e,t,n,i,o){return u.validateColumn(o,e.data.columns),u.validateRow(i,e.data.rows),m(e.data.inputFields[i][o],t,n)}function f(e,t,n,i,o){g(e,i,o,function(i,o){m(e.data.inputFields[i][o],t,n)})}function g(e,t,n,i){function o(n){var o;if("number"==typeof t)i(t,n);else for(o=e.hasColumnHeaders()?1:0;o<r.rows;o++)i(o,n)}var r=e.data;if("number"==typeof t&&u.validateRow(t,r.rows),"number"==typeof n)u.validateColumn(n,r.columns),o(n);else for(n=e.hasRowHeaders()?1:0;n<r.columns;n++)o(n)}function _(e){var t,i;for(t=n.createTable("ospm_table ospm_table_input"),i=0;i<e.data.rows;i++)z(e,t,i);return t}function v(e,t){t.row=e.data.row,t.column=e.data.column,e.data.table.notifyChangeListeners(t)}function b(e,t){t.row=e.data.row,t.column=e.data.column,e.data.table.notifyAutoCompleteSelectionListeners(t)}function y(e,t,n){var i=new h;return i.data={table:e,row:t,column:n},i.setChangeListener(v),i.setAutoCompleteSelectionListener(b),i.dom.classList.add("ospm_table_input_field"),V(i,e.data,"inputFields",t,n),i}function C(e,t){var n,i;if(!s.isNumber(t))throw new l("Fehlender oder ungültiger Parameter: row");for(n=e.data.rows;t>=n;n++){for(e.data.rows++,e.hasRowHeaders()?(i=1,e.data.rowHeaders.push("")):i=0,e.data.inputFields[n]=[];i<e.data.columns;i++)y(e,n,i);for(e.options.visibleCells[n]=[],i=0;i<e.data.columns;i++)e.options.visibleCells[n][i]=!0;e.options.mobileMode?z(e,e.dom,n):R(e,e.dom,n)}}function w(e,t,a,l){var c,h,m,p,f;return 0===t&&e.hasColumnHeaders()?(f=n.createInlineContainer("ospm_table_header_label"),c=n.createTableHeaderCell(),c.appendChild(f),c):0===a&&e.hasRowHeaders()?(c=n.createTableHeaderCell(),p=s.isString(e.options.leftIcon)?e.options.leftIcon:e.options.leftIcon[t],p&&(m=i.createIcon(p,r.isNBF()?16:32),m&&(m.classList.add(d.LEFT_ICON_DEFAULT_CLASS),c.appendChild(m))),h=o.HintMixin.buildHintIconDom(),o.HintMixin.hasHintIconChanged(h,"","help"),h.classList.add("ospm_hidden"),r.addActionListener(h,u.tableHintCallback,!1,!0),c.appendChild(n.createInlineContainer("ospm_table_label")),c.appendChild(h),c):(c=n.createTableCell(),l.data={table:e,row:t,column:a},c.appendChild(l.dom),c)}function E(e,t,n,i,o){var r=w(e,t,n,o);return O(e,r,t,n,i),r}function L(e,t){var n,i,o;for(e.data.inputFields=[],n=e.hasColumnHeaders()?1:0;n<t.length;n++)for(i=e.hasRowHeaders()?1:0;i<e.data.columns;i++)o=y(e,n,i),o.setValue(t[n][i])}function S(e,t,n){var i,o;if(s.isArray(t))for(i=e.hasColumnHeaders()?1:0;i<t.length;i++)if(s.isArray(t[i]))for(o=e.hasRowHeaders()?1:0;o<e.data.columns;o++)f(e,n,[t[i][o]],i,o);else f(e,n,[t[i]],i);else f(e,n,[t])}function D(e,t){var n,i,o;if(s.isArray(t))for(n=e.hasColumnHeaders()?1:0;n<t.length;n++)if(o=t[n],s.isArray(o))for(i=e.hasRowHeaders()?1:0;i<o.length;i++)e.setValidator(t,n,i);else e.setValidator(t,n);else e.setValidator(t)}function T(e){return"number"!=typeof e||isNaN(e)}function I(e,t,n,i){var o=e.data.inputFields[t][n];o.setValidator("function"==typeof i?function(o,r){return i(e,t,n,r)}:"object"==typeof i?new W(e,t,n,i):null)}function k(e,t,n,i,o){var r=e.data.inputFields[t][n];if(i>0){if(s.isArray(o))return void r.setAutoComplete(i,o);if("function"==typeof o)return void r.setAutoComplete(i,function(e,i){o(e,i,t,n)})}r.setAutoComplete()}function x(e){var t,n;for(t=e.hasColumnHeaders()?1:0;t<e.data.rows;t++)for(n=e.hasRowHeaders()?1:0;n<e.data.columns;n++)if(e.data.inputFields[t][n].isFocusable())return{row:t,column:n};return null}function A(e,t,n,i,o,r){var s;u.setTableCellWidth(e,t,n,i),s=u.getTableCellCssClasses(e,t,n,i,o,r),t.className=s.join(" ")}function O(e,t,i,o,r){var s,a=u.DEFAULT_FORMATTER;T(e.data.inputFields[i])||T(e.data.inputFields[i][o])||(a=e.data.inputFields[i][o].formatter),s=a.format(i,o,r,e),A(e,t,i,o,r,a),e.hasRowHeaders()&&0===o?0===i?n.createMarkupDomTree(e,t.firstChild,s):n.createMarkupDomTree(e,t.querySelector(".ospm_table_label"),s):e.hasColumnHeaders()&&0===i&&n.createMarkupDomTree(e,t.firstChild,s)}function N(e){var t=_(e);e.dom.parentNode&&e.dom.parentNode.replaceChild(t,e.dom),e.dom=t}function M(e){var t=P(e);u.updateMinHeight(e),e.dom.parentNode&&e.dom.parentNode.replaceChild(t,e.dom),e.dom=t}function P(e){var t,i=n.createTable("ospm_table ospm_table_input");for(t=0;t<e.data.rows;t++)R(e,i,t);return i}function R(e,t,i){var o,a,l,c,d,h,m,p;for(a=0===i&&e.hasColumnHeaders()?e.data.columnHeaders:e.data.inputFields[i],o=n.createTableRow(),0===i&&e.hasColumnHeaders()||o.classList.add("ospm_table_row"),c=0;c<a.length;c++)0===i&&e.hasColumnHeaders()?(m=a[c],p=null):0===c&&e.hasRowHeaders()?(m=e.data.rowHeaders[i],p=null):(p=a[c],m=s.isSet(p)?p.getValue():null),l=E(e,i,c,m,p),r.addClickListener(l,F(e,i,c)),o.appendChild(l);i===e.data.rows-1&&o.classList.add("ospm_last_row"),t.appendChild(o),(e.hasColumnHeaders()&&i>0||!e.hasColumnHeaders())&&(u.addHelpMessageDom(t,e.data.columns),d=t.lastChild.firstChild.firstChild,e.options.hints[i]&&e.hasRowHeaders()&&(r.setClickableTextContent(e,d,e.options.hints[i]),h=o.firstChild.lastChild,h.classList.remove("ospm_hidden")),d.classList.add("ospm_hidden"))}function F(e,t,n){return function(){e.notifyClickListeners({row:t,column:n})}}function B(e,t){var n;return n=r.isMobile()?_(e,t):P(e,t)}function z(e,t,i){var a,l,c,u,d,h,m,p,f,g,_,v;if(h=e.data.inputFields[i],0===i&&e.hasColumnHeaders())return void(e.hasRowHeaders()&&s.isStringProvided(e.data.rowHeaders[0])&&(c=n.createInlineContainer("ospm_table_header_label"),l=n.createContainer("ospm_table_title ospm_text_style_23"),l.appendChild(c),n.createMarkupDomTree(e,c,e.data.rowHeaders[0]),r.addClickListener(l,F(e,i,0)),t.appendChild(l)));for(u=n.createContainer("ospm_table_rowblock"),d=0;d<h.length;d++)0===d&&e.hasRowHeaders()&&s.isStringProvided(e.data.rowHeaders[i])?(_=n.createContainer("ospm_table_rowblock_header_wrapper"),m=n.createContainer("ospm_table_rowblock_header ospm_text_style_23"),p=n.createInlineContainer("ospm_table_rowblock_header_label"),n.createMarkupDomTree(e,p,e.data.rowHeaders[i]),m.appendChild(p),v=o.HintMixin.buildHintIconDom(),o.HintMixin.hasHintIconChanged(v,"","help"),g=n.createContainer("ospm_help_message ospm_hidden"),m.appendChild(v),r.addActionListener(v,function(e){var t=e.target.parentNode.nextSibling;t.classList.contains("ospm_hidden")?(e.target.setAttribute("aria-pressed","true"),t.classList.remove("ospm_hidden")):(e.target.setAttribute("aria-pressed","false"),t.classList.add("ospm_hidden"))},!1,!0),e.options.hints[i]&&(r.setClickableTextContent(e,g,e.options.hints[i]),v.classList.remove("ospm_hidden")),_.appendChild(m),_.appendChild(g),r.addClickListener(m,F(e,i,d)),u.appendChild(_)):(a=n.createContainer("ospm_table_rowblock_column"),e.data.columnHeaders&&s.isStringProvided(e.data.columnHeaders[d])&&(l=n.createContainer("ospm_table_rowblock_cell ospm_table_rowblock_column_header_cell"),n.createMarkupDomTree(e,l,e.data.columnHeaders[d]),a.appendChild(l)),l=n.createContainer("ospm_table_rowblock_cell ospm_table_rowblock_value_cell"),f=h[d],f.dom.parentNode&&f.dom.parentNode.removeChild(f.dom),l.appendChild(f.dom),r.addClickListener(a,F(e,i,d)),a.appendChild(l),u.appendChild(a));t.appendChild(u)}function V(e,t,n,i,o){var r;s.isArray(t[n])||(t[n]=[]),r=t[n][i],s.isArray(r)||(t[n][i]=[]),t[n][i][o]=e}function H(e){var t,n,i;for(t=e.hasColumnHeaders()?1:0;t<e.data.rows;t++)for(n=e.hasRowHeaders()?1:0;n<e.data.columns;n++)i=e.data.inputFields[t][n],i.updatePlaceholder()}var U,W;return W=c.subclass({constructor:function(e,t,n,i){this.tableInput=e,this.row=t,this.column=n,this.validator=i},onEntry:function(){this.validator.onEntry(this.tableInput,{row:this.row,column:this.column})},onExit:function(){return this.validator.onExit(this.tableInput,{row:this.row,column:this.column})},beforeInput:function(e,t){return this.validator.beforeInput(this.tableInput,{row:this.row,column:this.column,event:t.event})},afterInput:function(){this.validator.afterInput(this.tableInput,{row:this.row,column:this.column})},afterValueFormatted:function(){this.validator.afterValueFormatted(this.tableInput,{row:this.row,column:this.column})},afterDataTypeValidated:function(e,t){this.validator.afterDataTypeValidated(this.tableInput,{row:this.row,column:this.column,validationResult:t.validationResult})},onValidate:function(){return this.validator.onValidate(this.tableInput,{row:this.row,column:this.column})},getClassName:function(){return"TableInputValidator"}}),U=e.subclass({stepData:null,options:null,data:null,constructor:function(e,t){var n,i=u.validateAndCompleteParameter(e);if(this.options={mobileMode:r.isMobile(),hasSummingRow:i.summingRow===!0,width:i.width,leftIcon:i.leftIcon,hints:[],hasColumnHeaders:i.columnHeaders,hasRowHeaders:i.rowHeaders,clickListener:i.clickListener,visibleCells:i.cellVisible,wrapMode:i.wrapMode,mandatoryMessage:i.mandatoryMessage},this.data={columns:i.columns,rows:i.values.length,changeListener:i.changeListener,inputFields:null,columnHeaders:null,rowHeaders:null},this.options.hasColumnHeaders&&(this.data.columnHeaders=i.values[0]),this.options.hasRowHeaders)for(this.data.rowHeaders=[],n=0;n<this.data.rows;n++)this.data.rowHeaders.push(i.values[n][0]);this.stepData=t,L(this,e.values),this.dom=B(this,i),this.initializeFields(i),u.updateCellsVisibility(this),u.syncSummingRow(this)},initializeFields:function(e){U.parent.initializeFields.call(this,e),e.readOnly&&S(this,e.readOnly,"setReadOnly"),e.dataType&&S(this,e.dataType,"setDataType"),e.inputToolAutoOpen&&S(this,e.inputToolAutoOpen,"setInputToolAutoOpen"),e.valueUnit&&S(this,e.valueUnit,"setValueUnit"),e.tabIndex&&S(this,e.tabIndex,"setTabIndex"),e.valuePlaceholder&&S(this,e.valuePlaceholder,"setValuePlaceholder"),e.mandatory&&S(this,e.mandatory,"setMandatory"),e.mandatoryMessage&&S(this,e.mandatoryMessage,"setMandatoryMessage"),e.validator&&D(this,e.validator),e.changeListener&&this.setChangeListener(e.changeListener),this.setInputToolHideListener(e.inputToolHideListener),this.setAutoCompleteSelectionListener(e.autoCompleteSelectionListener),e.clickListener&&this.setClickListener(e.clickListener),e.wrapMode&&this.setWrapMode(e.wrapMode)},checkMandatoryValueEmptyError:function(){var e,t,n,i;for(n=this.hasColumnHeaders()?1:0;n<this.data.rows;n++)for(i=this.hasRowHeaders()?1:0;i<this.data.columns;i++)if(t=this.data.inputFields[n][i],this.isVisibleCell(n,i)&&t.isEnabled()&&(e=t.checkMandatoryValueEmptyError()))return e.widget=t,e;return null},setValue:function(e,t,n){var i;u.validateColumn(t,this.data.columns),C(this,e),0===e&&this.hasColumnHeaders()?(this.data.columnHeaders[t]=n,i=u.getCellDom(this,e,t),s.isSet(i)&&O(this,i,e,t,n)):0===t&&this.hasRowHeaders()?(this.data.rowHeaders[e]=n,i=u.getCellDom(this,e,t),s.isSet(i)&&O(this,i,e,t,n)):this.data.inputFields[e][t].setValue(n),u.syncSummingRow(this)},setTypedValue:function(e,t,n){var i;u.validateColumn(t,this.data.columns),C(this,e),0===e&&this.hasColumnHeaders()?(this.data.columnHeaders[t]=n,i=u.getCellDom(this,e,t),s.isSet(i)&&O(this,i,e,t,n)):0===t&&this.hasRowHeaders()?(this.data.rowHeaders[e]=n,i=u.getCellDom(this,e,t),s.isSet(i)&&O(this,i,e,t,n)):this.data.inputFields[e][t].setTypedValue(n),u.syncSummingRow(this)},getValue:function(e,t){return u.validateColumn(t,this.data.columns),u.validateRow(e,this.data.rows),this.hasColumnHeaders()&&0===e?this.data.columnHeaders[t]:this.hasRowHeaders()&&0===t?this.data.rowHeaders[e]:this.data.inputFields[e][t].getValue()},getTypedValue:function(e,t){return u.validateColumn(t,this.data.columns),u.validateRow(e,this.data.rows),this.hasColumnHeaders()&&0===t||this.hasRowHeaders()&&0===e?this.values[e][t]:this.data.inputFields[e][t].getTypedValue()},getInputData:function(){return this.data.inputFields.map(function(e){return e.map(function(e){return e.getValue()})})},setInputData:function(e,t){var n=this.data.inputFields;n.length===e.length&&n.every(function(t,n){return t.length===e[n].length})&&e.forEach(function(e,i){e.forEach(function(e,o){var r=n[i][o];r.getValue()!==e&&(r.setValue(e),t&&r.notifyChangeListeners())})})},setReadOnly:function(e,t,n){f(this,"setEnabled",[!e],t,n)},isReadOnly:function(e,t){return p(this,"isEnabled",[],e,t)},setDataType:function(e,t,n){f(this,"setDataType",[e],t,n)},getDataType:function(e,t){return p(this,"getDataType",[],e,t)},setValueUnit:function(e,t,n){f(this,"setValueUnit",[e],t,n)},getValueUnit:function(e,t){return p(this,"getValueUnit",[],e,t)},setValuePlaceholder:function(e,t,n){f(this,"setValuePlaceholder",[e],t,n)},setTabIndex:function(e,t,n){f(this,"setTabIndex",[e],t,n)},getTabIndex:function(e,t){var n;return e||t?p(this,"getTabIndex",[],e,t):(n=x(this),n?this.data.inputFields[n.row][n.column].getTabIndex():null)},setMandatory:function(e,t,n){f(this,"setMandatory",[e],t,n)},isMandatory:function(e,t){return u.validateColumn(t,this.data.columns),u.validateRow(e,this.data.rows),this.options.mandatory[e][t]},getMandatoryMessage:function(){return this.options.mandatoryMessage},setMandatoryMessage:function(e){f(this,"setMandatoryMessage",[e]),this.options.mandatoryMessage=e},getValuePlaceholder:function(e,t){return u.validateColumn(t,this.data.columns),u.validateRow(e,this.data.rows),this.data.valuePlaceholder[e][t]},setValidator:function(e,t,n){var i=this;this.data.inputFields&&g(this,t,n,function(t,n){I(i,t,n,e)})},getValidator:function(e,t){return u.validateColumn(t,this.data.columns),u.validateRow(e,this.data.rows),0===e&&this.hasColumnHeaders()||0===t&&this.hasColumnHeaders()?null:this.data.inputFields[e][t].validator},setAutoComplete:function(e,t,n,i){var o=this;this.data.inputFields&&g(this,n,i,function(n,i){k(o,n,i,e,t)})},isAutoComplete:function(e,t){var n=this.data.inputFields,i=!0;return g(this,e,t,function(e,t){i=i&&n[e][t].isAutoComplete()}),i},setEnabled:function(e){var t,n,i;for(U.parent.setEnabled.call(this,e),t=this.hasColumnHeaders()?1:0;t<this.data.rows;t++)for(n=this.hasRowHeaders()?1:0;n<this.data.columns;n++)i=this.data.inputFields[t][n],i.setEnabled(e&&!i.isReadOnly())},validate:function(){var e,t;for(e=this.hasColumnHeaders()?1:0;e<this.data.rows;e++)for(t=this.hasRowHeaders()?1:0;t<this.data.columns;t++)if(this.getValidator(e,t)&&this.data.inputFields[e][t].isEnabled()===!0&&this.data.inputFields[e][t].validate()===!1)return!1;return!0},focus:function(e,t){function n(e){return e.isFocusable()?(e.setFocus(),!0):!1}return e&&s.isNumeric(e)&&e>0&&e<this.data.rows?t&&s.isNumeric(t)&&t>0&&t<this.data.columns?void this.data.inputFields[e][t].focus():void this.data.inputFields[e].some(n):void this.data.inputFields.some(function(e){return e.some(n)})},isFocusable:function(){return!!x(this)},getAllErrors:function(e,t){return p(this,"getAllErrors",[],e,t)},clearAllErrors:function(e,t,n){f(this,"clearAllErrors",[n],e,t)},setError:function(e,t,n,i){return void 0===n||null===n||""===n?(f(this,"setError",[""],e,t),null):p(this,"setError",[n,i],e,t)},addError:function(e,t,n,i){return p(this,"addError",[n,i],e,t)},getError:function(e,t,n){return p(this,"getError",[n],e,t)},removeError:function(e,t,n){return p(this,"removeError",[n],e,t)},errorCount:function(e,t){var n=0;return f(this,function(e){e.errorCount&&(n+=e.errorCount())},[],e,t),n},hasError:function(e,t){return this.errorCount(e,t)>0},onResize:function(){r.isMobile()&&!this.options.mobileMode?(N(this),this.options.mobileMode=!0,u.updateCellsVisibility(this),u.syncSummingRow(this),H(this)):!r.isMobile()&&this.options.mobileMode&&(M(this),this.options.mobileMode=!1,u.updateCellsVisibility(this),u.syncSummingRow(this),H(this),u.updateMinHeight(this),this.options.clickListener&&this.dom.classList.add("ospm_clickable")),U.parent.onResize.call(this)},isInputToolShown:function(){return this.data.inputFields.some(function(e){return e.some(function(e){return e.isInputToolShown()})})},showInputTool:function(e,t){var n;this.hideInputTool(),s.isNumber(e)||s.isNumber(t)?(u.validateColumn(t,this.data.columns),u.validateRow(e,this.data.rows),this.data.inputFields[e][t].showInputTool()):(n=r.findParent(r.activeElement(),{cssClass:"ospm_ti_cell_wrapper"}),n&&f(this,function(e){e.contentDom===n&&e.showInputTool()}))},hideInputTool:function(){f(this,"hideInputTool",[])},afterRenderLayout:function(){u.updateMinHeight(this)},getClassName:function(){return"TableInput"}}),U.proto(o.ClickMixin,o.ChangeMixin,o.WrapMixin,o.InputStorageMixin,o.AutoCompleteSelectionMixin,u.Mixin,o.InputToolHideMixin),U}),define("tao/ospm/ui/widgets/ProgressInformation",["tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/ui/IconFactory","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/common/Constants"],function(e,t,n,i,o,r,s,a){function l(t){var n,i,o,s,l,d,h;if(!t.steps||0===t.steps.length)throw new r("Der Parameter steps muss bei einem ProgressInformation immer gesetzt sein und einen oder mehr Werte enhalten!",{parameter:t});for(n=e.createContainer("ospm_progress_information"),u(t)&&n.classList.add("ospm_progress_information_compact"),i=e.createContainer("ospm_progress_information_content"),n.appendChild(i),t.title?d=t.title:(d=t.steps.shift(),d=d.label),h=e.createContainer("ospm_progress_information_entry"),o=e.createContainer("ospm_progress_information_entry_inner_container ospm_horizontal_flex_container ospm_flex_items_align_center"),o.appendChild(c()),o.appendChild(e.createFormattedContainer("ospm_progress_information_title ospm_text_style_"+a.TEXT_STYLE.LABEL_BIG3,d)),h.appendChild(o),h.appendChild(e.createContainer("ospm_progress_information_upper_vertical_line")),h.appendChild(e.createContainer("ospm_progress_information_lower_vertical_line")),i.appendChild(h),l=0;l<t.steps.length;l++)h=e.createContainer("ospm_progress_information_entry"),o=e.createContainer("ospm_progress_information_entry_inner_container ospm_horizontal_flex_container ospm_flex_items_align_center"),s=e.createContainer("ospm_progress_information_text_container"),s.appendChild(e.createFormattedContainer("ospm_progress_information_label ospm_text_style_"+a.TEXT_STYLE.LABEL3,t.steps[l].label)),t.steps[l].subLabel&&s.appendChild(e.createFormattedContainer("ospm_progress_information_sublabel ospm_text_style_"+a.TEXT_STYLE.SUBLABEL5,t.steps[l].subLabel)),o.appendChild(c()),o.appendChild(s),h.appendChild(o),h.appendChild(e.createContainer("ospm_progress_information_upper_vertical_line")),h.appendChild(e.createContainer("ospm_progress_information_lower_vertical_line")),i.appendChild(h);return n}function c(){var n=e.createContainer("ospm_progress_information_icon");return t.isNBF()?(n.appendChild(o.createIcon(a.ICONS.CHECK_FILLED_CIRCLE_S,16,!0)),n.appendChild(o.createIcon(a.ICONS.CIRCLE_S,16,!0)),n.appendChild(o.createIcon(a.ICONS.RADIO_SELECTED_S,24,!0))):(n.appendChild(o.createIcon(a.ICONS.PROGRESS_ON_S,24,!0)),n.appendChild(o.createIcon(a.ICONS.PROGRESS_OFF_S,24,!0))),n}function u(e){var t;for(t=0;t<e.steps.length;t++)if(e.steps[t].subLabel)return!1;return!0}function d(e){var t,n=h(e);for(t=0;t<n.length;t++)e.currentStep>=0&&t===e.currentStep?(n[t].classList.add("ospm_selected"),e.dom.classList.add("ospm_has_active_step")):n[t].classList.remove("ospm_selected"),e.currentStep<0&&e.dom.classList.remove("ospm_has_active_step");return!0}function h(e){return e.dom.querySelectorAll(".ospm_progress_information_entry")}function m(e){t.addClickListener(e.dom,function(){e.notifyClickListeners()})}var p;return p=n.subclass({stepData:null,currentStep:-1,titles:null,constructor:function(e,t){e=e||{},this.stepData=t,this.titles=[],this.dom=l(e),this.initializeFields(e),m(this)},initializeFields:function(e){var t=e.steps||[];p.parent.initializeFields.call(this,e),s.isSet(e.title)&&this.titles.push(e.title),t.forEach(function(e){this.titles.push(e.label)}.bind(this)),this.setCurrentStep(s.isSet(e.currentStep)?e.currentStep:-1),e.clickListener&&this.setClickListener(e.clickListener)},setCurrentStep:function(e){var t=Number(e);if(isNaN(t))throw new r("Current Step ist keine Zahl",{currentStep:e});if(-1>t)throw new r("Current Step ist kleiner -1.",{currentStep:e});if(t>=h(this).length)throw new r("Current Step ist größer als die Anzahl aller Steps.",{currentStep:e});this.currentStep=t,d(this)},getCurrentStep:function(){return this.currentStep},getStepTitleAtIndex:function(e){if(e=Number(e),isNaN(e))throw new r("Current Step ist keine Zahl",{stepIndex:e});if(0>e)throw new r("Current Step ist kleiner 0.",{stepIndex:e});if(e>this.titles.length)throw new r("Step Index ist größer als die Anzahl aller Steps.",{stepIndex:e});return this.titles[e]},getClassName:function(){return"ProgressInformation"}}),p.proto(i.ClickMixin),p}),define("tao/ospm/ui/widgets/HorizontalBar",["tao/ospm/ui/widgets/Widget","tao/ospm/common/Toolkit","tao/ospm/core/DomFactory","tao/ospm/ui/SelectionGroup","tao/ospm/common/OSPMError","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/UIToolkit","tao/ospm/common/Constants","tao/ospm/ui/UIConstants","tao/ospm/ui/ColorUtils","tao/ospm/ui/UIUtils"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e){var t,i,o,r,l,c,u;return e.wrapperDom=n.createContainer("ospm_widget_content_wrapper"),e.horizontalBarContainerDom=n.createLeftAlignedContainer("ospm_horizontalBar_container"),e.horizontalBarContainerDom.appendChild(e.wrapperDom),t=n.createContainer("ospm_hbar ospm_widget"),o=n.createLeftAlignedContainer("ospm_text_container"),l=n.createContainer("ospm_labelfield ospm_labelfield_relative_container"),c=n.createLeftAlignedContainer(),l.appendChild(c),o.appendChild(l),e.wrapperDom.appendChild(o),u=n.createContainer("ospm_list_entry_left_content"),c.appendChild(u),r=n.createContainer("ospm_list_entry_left_content_first_line"),r.appendChild(e.buildLabelDom(a.TEXT_STYLE.LABEL3)),u.appendChild(r),e.dom=t,c.appendChild(s.isNBF()?e.buildValueDom():e.buildValueDom(a.TEXT_STYLE.LABEL6)),i=n.createContainer("ospm_hbar_bar_line"),e.wrapperDom.appendChild(i),i.appendChild(n.createContainer("ospm_hbar_bar_background")),i.appendChild(n.createContainer("ospm_hbar_bar_background_filled")),t.appendChild(e.horizontalBarContainerDom),t}function h(e){return e.min<e.max&&e.min<=e.barValue&&e.barValue<=e.max}function m(e){if(!t.isNumber(e))throw new o("Parameter muss von Typ Number sein. "+e+" !== number")}function p(e){s.addClickListener(e.wrapperDom,function(){e.notifyClickListeners()})}function f(e,n){return n=t.isSet(n)?n:e.getBarValue(),A.calculateBarPercentByBarValue(n,e.min,e.max)}function g(e){var t;return e.barColor?(t=c.parseColor(e.barColor),u.isValidColor(t)||(t=l.HORIZONTAL_BAR.DEFAULT_COLOR),t):s.isNBF()||0!==e.min?e.barValue<0?s.isNBF()?"var(--delete-01)":l.HORIZONTAL_BAR.DEFAULT_NEGATIVE_COLOR:s.isNBF()?"var(--success-01)":l.HORIZONTAL_BAR.DEFAULT_POSITIVE_COLOR:l.HORIZONTAL_BAR.DEFAULT_COLOR}function _(e){v(e),y(e),E(e),w(e),b(e),C(e)}function v(e){var i,o,r,a=0,l=0;if(e.segments&&(0!==e.min&&e.setMin(0),i=e.dom.querySelector(".ospm_hbar_bar_line"))){for(o=0;o<e.segmentDoms.length;o++)r=e.segmentDoms[o],r.parentNode.removeChild(r);e.segmentDoms=[],e.segments.forEach(function(e){a+=e.value}.bind(e)),a>e.max&&e.setMax(a),e.segments.forEach(function(o,a){var u,d,h,m,p,g,_="",v="",b="";g=s.isNBF()?B:R,r=n.createContainer("ospm_hbar_bar_segment"),u=c.parseColor(o.color),d=f(e,o.value),r.style.backgroundColor=u,r.style.left=l+"%",r.style.width=d+"%",0===a&&e.segments.length-1===0?r.style.borderRadius=g[e.size].borderRadius+"px":0===a?(r.style.borderRadius=g[e.size].borderRadius+"px 0 0 "+g[e.size].borderRadius+"px",r.style.borderRight="1px solid #FFFFFF"):a===e.segments.length-1?(r.style.borderRadius="0 "+g[e.size].borderRadius+"px "+g[e.size].borderRadius+"px 0",r.style.borderLeft="1px solid #FFFFFF"):a>0&&a<e.segments.length-1&&(r.style.borderLeft="1px solid #FFFFFF",r.style.borderRight="1px solid #FFFFFF"),"large"===e.size&&o.showValue!==!1&&(h=n.createLabelElement("ospm_label",o.value+e.valueUnit),h.textContent=o.value,void 0!==e.valueUnit&&(h.textContent+=" "+e.valueUnit),r.appendChild(h)),i.appendChild(r),e.showTooltip&&(a>=1&&(m=e.segments[a-1],e.segments[a-1].tooltipText?v=e.segments[a-1].tooltipText:(t.isStringProvided(m.label)&&(v+=m.label+": "),v+=m.value+" "+e.valueUnit),r.setAttribute("prev-data-tooltip",v)),a<e.segments.length-1&&(e.segments[a+1].tooltipText?b+=e.segments[a+1].tooltipText:(p=e.segments[a+1],t.isStringProvided(p.label)&&(b+=p.label+": "),b+=p.value+" "+e.valueUnit),r.setAttribute("next-data-tooltip",b)),o.tooltipText?_=o.tooltipText:(t.isStringProvided(o.label)&&(_+=o.label+": "),_+=o.value+" "+e.valueUnit),r.setAttribute("data-tooltip",_),e.registerCenterTooltipEvents(r)),h&&(h.setAttribute("data-tooltip",_),e.registerCenterTooltipEvents(h)),e.segmentDoms.push(r),l+=d
}.bind(e))}}function b(e){var t;e.marks&&(t=e.dom.querySelector(".ospm_hbar_bar_line"),t&&(s.isNBF()&&(t.style.marginBottom=e.size===P?"12px":"16px",null!=e.segmentDoms&&e.segmentDoms.forEach(function(t){t.style.bottom=e.size===P?"12px":"16px"})),e.markDoms.forEach(function(e){e.parentNode.removeChild(e)}),e.markDoms=[],e.marks.forEach(function(i){var o,r,s,a;o=n.createContainer(e.size===P?"ospm_hbar_marker":"ospm_hbar_marker_large"),a=f(e,i.value),r=n.createLabelElement("ospm_label",i.label),s=n.createContainer("ospm_mark_label_container"),o.style.width=a+"%",s.left=a+"%",t.appendChild(o),r.style.left=-(x(i.label,r.style.fontSize)/2)+"px",s.appendChild(r),o.appendChild(s),e.markDoms.push(o)}.bind(e))))}function y(e){var t,i;if(e.min<0&&e.max>0){if(!e.zeroPointDom){if(t=e.dom.querySelector(".ospm_hbar_bar_line"),!t)return;e.zeroPointDom=n.createContainer(e.size===P?"ospm_hbar_zeropoint":"ospm_hbar_zeropoint_large"),t.appendChild(e.zeroPointDom)}i=f(e,0),e.zeroPointDom.style.width=i+"%"}else e.zeroPointDom&&(e.zeroPointDom.parentNode.removeChild(e.zeroPointDom),e.zeroPointDom=null)}function C(e){var t,n,i,o,r,a;for(a=s.isNBF()?B:R,t=e.dom.querySelector(".ospm_hbar_bar_line"),n=e.dom.querySelector(".ospm_hbar_bar_background"),i=e.dom.querySelector(".ospm_hbar_bar_background_filled"),t.style.height=a[e.size].height+"px"||a[P].height.height+"px",t.style.borderRadius=a[e.size].borderRadius+"px"||a[P].height.borderRadius+"px",s.isNBF()||(n.style.height=a[e.size].height+"px"||a[P].height+"px"),n.style.borderRadius=a[e.size].borderRadius+"px"||a[P].borderRadius+"px",i.style.height=a[e.size].height+"px"||a[P].height+"px",i.style.borderRadius=a[e.size].borderRadius+"px"||a[P].borderRadius+"px",e.segmentDoms=e.dom.querySelectorAll(".ospm_hbar_bar_segment"),o=0;o<e.segmentDoms.length;o++)r=e.segmentDoms[o],r.style.height=a[e.size].height+"px"||a[P].height+"px"}function w(e){var n,i,o,r,s=e.dom.querySelector(".ospm_hbar_bar_background_filled");return e.showTooltip?e.segments?(s.removeAttribute("data-tooltip"),void s.removeAttribute("data-tooltip-center-percent")):(n=f(e,Math.min(e.barValue,0)),i=f(e,Math.max(e.barValue,0)),o=i-(i-n)/2,void(t.isStringProvided(e.tooltipText)?(s.setAttribute("data-tooltip",e.tooltipText),s.setAttribute("data-tooltip-center-percent",o.toString()),e.registerCenterTooltipEvents(s)):(r="",t.isStringProvided(e.labelText)&&(r+=e.labelText+": "),t.isSet(e.barValue)&&(r+=e.barValue,void 0!==e.valueUnit&&(r+=" "+e.valueUnit),s.setAttribute("data-tooltip",r),s.setAttribute("data-tooltip-center-percent",o.toString()),e.registerCenterTooltipEvents(s))))):(s.removeAttribute("data-tooltip"),void s.removeAttribute("data-tooltip-center-percent"))}function E(e){var t,n,i,o="";h(e)&&(t=f(e,Math.min(e.barValue,0)),n=f(e,Math.max(e.barValue,0)),i=g(e),o=L(t,n,i)),e.dom.querySelector(".ospm_hbar_bar_background_filled").style.backgroundImage=o}function L(e,t,n){var i="",o=new O;return t>e&&(e>0&&(o.addItem("transparent",0),o.addItem("transparent",e)),o.addItem(n,e),o.addItem(n,t),100>t&&(o.addItem("transparent",t),o.addItem("transparent",100)),i="linear-gradient(to right, "+o.toString()+")"),i}function S(e){return t.isNumber(e)&&(e=Math.abs(e)),s.toHTMLText(e)}function D(e){var n;if(e){if(!t.isArray(e))throw new o("Invalid segments.");for(n=0;n<e.length;n++)if(!T(e[n]))throw new o("Invalid segments.")}}function T(e){return void 0===e.value?!1:t.isString(e.color)?t.isNumber(e.value):!1}function I(e){var n;if(e){if(!t.isArray(e))throw new o("Invalid marks.");for(n=0;n<e.length;n++)if(!k(e[n]))throw new o("Invalid marks.")}}function k(e){return e.label&&void 0!==e.value&&t.isString(e.label)?t.isNumber(e.value):!1}function x(e,t){var i,o,r;return i=x.canvas||(x.canvas=n.createElement("canvas")),o=i.getContext("2d"),o.font=t,r=o.measureText(e),r.width}var A,O,N,M,P,R,F,B;return N=0,M=100,P="small",F={green:l.HORIZONTAL_BAR.DEFAULT_POSITIVE_COLOR,blue:"#4F8AFF"},R={small:{height:4,borderRadius:2},large:{height:20,borderRadius:4}},B={small:{height:8,borderRadius:"0px 8px 8px 0"},large:{height:16,borderRadius:"0px 8px 8px 0"}},O=function(){this.items=[]},O.prototype.addItem=function(e,t){this.items.push([e,t])},O.prototype.getItems=function(){return this.items},O.prototype.toString=function(){var e=[];return this.items.forEach(function(t){e.push(t[0]+" "+t[1]+"%")}),e.join(",")},A=e.subclass({stepData:null,wrapperDom:null,barValue:0,barColor:null,min:N,max:M,size:P,zeroPointDom:null,marks:null,markDoms:[],segments:null,segmentDoms:[],initFinished:!1,showTooltip:!0,tooltipText:null,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=d(this),this.setCheckboxIconContainer(this.horizontalBarContainerDom),this.initializeFields(e),p(this),this.initFinished=!0},addTooltip:function(e){var n=f(this,Math.min(this.barValue,0)),i=f(this,Math.max(this.barValue,0)),o=i-(i-n)/2,r="",s=this.dom.querySelector(".ospm_hbar_bar_background_filled");t.isStringProvided(e.label)&&(r+=e.label+" "),t.isSet(this.barValue)&&(r+=this.barValue,s.setAttribute("data-tooltip",r),s.setAttribute("data-tooltip-center-percent",o),this.registerCenterTooltipEvents(s))},setBarPercent:function(e){if(t.isSet(this.segments)&&this.segments.length>0)this.barValue=0;else{if(m(e),0>e||e>100)throw new o("Außerhalb des zulässigen Wertebereichs [0,100].");this.barValue=A.calculateBarValueByBarPercent(e,this.min,this.max)}s.updateElement(this)},getBarPercent:function(){return h(this)?f(this):0/0},setBarColor:function(e){this.barColor=F[e]||e,s.updateElement(this)},setTooltipText:function(e){this.tooltipText=e,s.updateElement(this)},setMin:function(e){this.min=t.isSet(e)?e:N,s.updateElement(this)},getMin:function(){return this.min},setMax:function(e){this.max=t.isSet(e)?e:M,s.updateElement(this)},getMax:function(){return this.max},setMarks:function(e){I(e),this.marks=e,s.updateElement(this)},getMarks:function(){return this.marks},setBarValue:function(e){t.isSet(this.segments)&&this.segments.length>0?this.barValue=0:(t.isSet(e)?m(e):e=0,this.barValue=e),s.updateElement(this)},getBarValue:function(){return this.barValue},setShowValue:function(e){"boolean"==typeof e&&(this.showValue=e)},getShowValue:function(){return this.showValue},setShowTooltip:function(e){this.showTooltip="boolean"==typeof e?e:!0,s.updateElement(this)},getShowTooltip:function(){return this.showTooltip},setEnabled:function(e){A.parent.setEnabled.call(this,e),s.toggleClassName(this.dom,"ospm_disabled",!e)},setBarSize:function(e){if(this.size!==e){var t;t=s.isNBF()?B:R,this.size="undefined"!=typeof t[e]?e:P,s.updateElement(this)}},setSegments:function(e){D(e),this.segments=e,t.isSet(this.segments)&&this.segments.length>0&&(this.barValue=0),s.updateElement(this)},getSegments:function(){return this.segments},initializeFields:function(e){A.parent.initializeFields.call(this,e),e.label&&(this.setLabel(e.label),this.setLabelStyle(e.labelStyle)),e.value&&(this.setValue(e.value),this.setValueStyle(e.valueStyle)),e.valueUnit&&this.setValueUnit(e.valueUnit),e.size&&this.setBarSize(e.size),this.setMin(e.min),this.setMax(e.max),t.isSet(e.segments)?this.setSegments(e.segments):t.isSet(e.barValue)?this.setBarValue(e.barValue):t.isSet(e.barPercent)&&this.setBarPercent(e.barPercent),e.wrapMode&&this.setWrapMode(e.wrapMode),this.setBarColor(e.barColor),this.setShowTooltip(e.showTooltip),this.setTooltipText(e.tooltipText),e.clickListener&&this.setClickListener(e.clickListener),e.marks&&this.setMarks(e.marks),this.initializeCheckableFields(e)},updateDisplay:function(){this.initFinished&&_(this)},getClassName:function(){return"HorizontalBar"}}),A.MIN_DEFAULT=N,A.MAX_DEFAULT=M,A.SIZE_DEFAULT=P,A.calculateBarPercentByBarValue=function(e,n,i){var o;return t.isNumber(e)&&t.isNumber(n)&&t.isNumber(i)?n>=i?null:(o=100*(e-n)/(i-n),t.bound(o,0,100)):null},A.calculateBarValueByBarPercent=function(e,n,i){return t.isNumber(e)&&t.isNumber(n)&&t.isNumber(i)?0>e||e>100?null:n>=i?null:e*(i-n)/100+n:null},A.proto(r.ClickMixin,r.LabelMixin,r.ValueMixin,r.CheckableMixin,r.WrapMixin,r.TooltipMixin,{setValue:function(e){var n;r.ValueMixin.setValue.call(this,S(e)),n=this.valueDomValue.classList,n.remove("ospm_positive"),n.remove("ospm_negative"),t.isNumber(e)&&(this.value=s.toHTMLText(e),e>0?n.add("ospm_positive"):0>e&&n.add("ospm_negative"))}}),A}),define("tao/ospm/ui/widgets/HorizontalLine",["tao/ospm/common/OSPMError","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/ContainerWidget","tao/ospm/core/DomFactory"],function(e,t,n,i){function o(e){var t=i.createContainer("ospm_horizontal_line");return t.setAttribute("role","separator"),e.dom=t,t}var r;return r=t.subclass({stepData:null,fullWidth:!1,constructor:function(e,t){e=e||{},this.stepData=t,this.dom=o(this),this.initializeFields(e)},initializeFields:function(e){r.parent.initializeFields.call(this,e),this.setFullWidth(e.fullWidth)},getClassName:function(){return"HorizontalLine"},setFullWidth:function(e){e?(this.fullWidth=!0,this.dom.classList.add("ospm_full_width")):(this.fullWidth=!1,this.dom.classList.remove("ospm_full_width"))},getFullWidth:function(){return this.fullWidth}})}),define("tao/ospm/ui/widgets/Spacer",["tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Widget","tao/ospm/core/DomFactory"],function(e,t,n,i,o){function r(){}function s(e){e.dom=o.createContainer("ospm_spacer")}function a(e){e.dom.style.marginTop=e.offset+"px",e.offset<0&&l(e),e.dom.dataset.scrollupdate="1"}function l(e){var t,n,i;if(e.getParent()){if(t=parseInt(e.dom.style.marginTop.replace("px",""),10),e.dom.style.marginTop=0,n=e.dom.getBoundingClientRect(),i=e.getParent().dom.getBoundingClientRect(),n.top<i.top)return void(e.dom.style.marginTop=t+"px");-t>n.top-i.top&&(t=-(n.top-i.top)),e.dom.style.marginTop=t+"px"}}var c,u,d;return u=new e("OSPM","Spacer"),d=.625,c=i.subclass({offset:0,constructor:function(e,t){e=e||{},this.stepData=t,s(this),this.initializeFields(e)},initializeFields:function(e){c.parent.initializeFields.call(this,e),this.setOffset(e.offset)},setOffset:function(e){t.isSet(e)?"number"!=typeof e?(u.error("Parameter offset ist nicht numerisch"),this.offset=0):(n.isNBF()&&0>e&&(e=0),n.isMobile()&&(e=Math.round(e*d)),this.offset=e):this.offset=0,a(this)},onResize:function(){this.offset<0&&l(this)},afterRenderLayout:function(){n.isRendered(this)&&a(this)},getClassName:function(){return"Spacer"}}),c.proto({setValidator:r,setMinHeight:r,setSummable:r,setTopMargin:r,setBottomMargin:r}),c}),define("tao/ospm/ui/SummingUpFactory",["tao/ospm/ui/widgets/Button","tao/ospm/ui/widgets/Image","tao/ospm/ui/widgets/InfoText","tao/ospm/ui/widgets/list/List","tao/ospm/common/Constants","tao/ospm/common/OSPMError","tao/ospm/core/PackageManager","tao/ospm/ui/widgets/Summary","tao/ospm/ui/widgets/Text","tao/ospm/ui/layouts/TwoColumnLayout","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e){s.fetchApplicationAPI("gps",function(t){t.summingUp.getSummingUpData(e)})}function h(e,t,r,s){var c,d,h,f,g,_,v,b,y,C,w,E,L,S;if(S=!1,null===e&&(e=new i),p(s),f=[],t.sections)for(v=0;v<t.sections.length;v++){if(g=t.sections[v].items)for(_=[],b=0;b<g.length;b++)_.push({label:g[b].label,infoText:g[b].infoText,leftIcon:t.sections[v].leftIcon});f.push({header:{label:t.sections[v].label,infoText:t.sections[v].infoText},items:_})}if(c=t.topMargin,E=m(t,f)?null:t.label,L=m(t,f)?null:t.subLabel,E||L||f.length>0||t.imagePath?(d=new a({topMargin:c,label:E,subLabel:L,sections:f},r),u.isMobile()||(t.imagePath&&d.setIcon(t.imagePath),u.getBilderpoolService().isBilderpoolReferenced(t.imagePath)&&(0!==f.length||E||L||d.setImageMargin(!1))),e.addElement(d),w=0===f.length&&!E&&!L&&!t.explanation):w=!1,t.explanation&&(f&&f.length>0&&t.explanation.hideOnSetSections||(u.isMobile()===!1&&(h=new l({label:t.explanation.label,grouped:!0},r),e.addElement(h),S=!0),C=new n({label:t.explanation.infoText,showIcon:!1},r),u.isMobile()===!0&&s?s.setLeftTopElement(C):(C.setGrouped(!0),e.addElement(C),S=!0))),t.buttons){for(v=0;v<t.buttons.length;v++)y=new l({label:t.buttons[v].label,rightIcon:o.ICONS.NEXT_S,clickListener:t.buttons[v].action,grouped:0===v&&w},r),e.addElement(y);S=!0}S&&d&&d.setImageMargin(!0),s&&s.setRightTopElement(e)}function m(e,t){return!!e.explanation&&0===t.length}function p(e){e&&e instanceof c&&(e.setLeftTopElement(null),e.setRightTopElement(null))}function f(e,t){var n,i,o,r,s,a,l,c,u;return e&&e.summingUp&&t?(i=e.summingUp,o=void 0!==t.topMargin?t.topMargin:"",r=void 0!==t.label?t.label:i.label,s=void 0!==t.subLabel?t.subLabel:i.subLabel,a=void 0!==t.imagePath?t.imagePath:i.imagePath,l=void 0!==t.sections?t.sections:i.sections,c=void 0!==t.explanation?t.explanation:i.explanation,u=void 0!==t.buttons?t.buttons:i.buttons,n={topMargin:o,label:r,subLabel:s,imagePath:a,sections:l,explanation:c,buttons:u}):n=e&&e.summingUp?e.summingUp:t?t:{},n}var g;return g={createSummingUp:function(e,t){var n,o=new i;return d(function(i){n=f(i,e),h(o,n,t)}),o},createAndSetSummingUp:function(e,t,n){var i;if(!(t&&t instanceof c))throw new r("Das übergebene Layout ist kein TwoColumnLayout.");d(function(o){i=f(o,e),h(null,i,n,t)})},removeSummingUp:function(e){p(e)}}}),define("tao/ospm/ui/widgets/NavigationBar",["tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/Button","tao/ospm/core/DomFactory","tao/ospm/ui/UIConstants","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s){function a(e){var i,r,a;return i=n.createContainer("ospm_navigationbar"),a=n.createContainer("ospm_previousbutton_container"),e.prevButton=new t,a.appendChild(e.prevButton.dom),r=n.createContainer("ospm_nextbutton_container"),e.nextButton=new t,r.appendChild(e.nextButton.dom),s.isNBF()||(i.appendChild(a),i.appendChild(r)),s.isNBF()&&(e.nextButton.setStyle(o.BUTTON_STYLE.PRIMARY),e.nextButton.setFullWidth(!0),e.prevButton.setFullWidth(!0)),i}function l(e,t,n,i,o){void 0!==n&&e[t](o?n:i)}var c,u="Weiter",d="Zurück",h=o.ICONS.NEXT_ARROW_S,m=o.ICONS.BACK_ARROW_S;return c=e.subclass({nextButton:null,prevButton:null,constructor:function(e){e=e||{},this.dom=a(this),this.initializeFields(e)},initializeFields:function(e){c.parent.initializeFields.call(this,e),this.setNextButton(e.nextButton),this.setPreviousButton(e.previousButton)},updateDisplay:function(){c.parent.updateDisplay.call(this),s.isNBF()&&(this.dom&&this.dom.hasChildNodes()&&(this.dom.removeChild(this.nextButton.dom),this.dom.removeChild(this.prevButton.dom)),s.isMobile()||s.isElementInSmallColumnLayout(this.dom)?(this.dom.appendChild(this.nextButton.dom),this.dom.appendChild(this.prevButton.dom)):(this.dom.appendChild(this.prevButton.dom),this.dom.appendChild(this.nextButton.dom)))},setNextButton:function(e){void 0===e?e={}:r.isObject(e)||(e=null),s.toggleClassName(this.nextButton.dom,"ospm_hidden",null===e),e&&(void 0===e.label&&(e.label=u),void 0===e.icon&&(e.icon=h),l(this.nextButton,"setLabel",e.label,u,r.isStringProvided(e.label)),l(this.nextButton,"setRightIcon",e.icon,h,!0),l(this.nextButton,"setClickListener",e.action,function(){},"function"==typeof e.action),l(this.nextButton,"setEnabled",e.enabled,!0,!0),l(this.nextButton,"setWrapMode",e.wrapMode,o.WRAP_MODE.DEFAULT,e.wrapMode),this.nextButton.dom.setAttribute("tabindex",i.TABINDEXES.DEFAULT))},setPreviousButton:function(e){void 0===e?e={}:r.isObject(e)||(e=null),s.toggleClassName(this.prevButton.dom,"ospm_hidden",null===e),e&&(void 0===e.label&&(e.label=d),void 0===e.icon&&(e.icon=m),l(this.prevButton,"setLabel",e.label,d,r.isStringProvided(e.label)),l(this.prevButton,"setLeftIcon",e.icon,m,!0),l(this.prevButton,"setClickListener",e.action,function(){},"function"==typeof e.action),l(this.prevButton,"setEnabled",e.enabled,!0,!0),l(this.prevButton,"setWrapMode",e.wrapMode,o.WRAP_MODE.DEFAULT,e.wrapMode),this.prevButton.dom.setAttribute("tabindex",i.TABINDEXES.DEFAULT))},setEnabled:function(e){c.parent.setEnabled.call(this,e),this.nextButton.setEnabled(e),this.prevButton.setEnabled(e)},getClassName:function(){return"NavigationBar"}})}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("tao/lib/quill/quill",[],t):"object"==typeof exports?exports.Quill=t():e.Quill=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=109)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=n(18),r=n(19),s=n(45),a=n(46),l=n(47),c=n(48),u=n(49),d=n(12),h=n(32),m=n(33),p=n(31),f=n(1),g={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:i.default,Format:o.default,Leaf:r.default,Embed:c.default,Scroll:s.default,Block:l.default,Inline:a.default,Text:u.default,Attributor:{Attribute:d.default,Class:h.default,Style:m.default,Store:p.default}};t.default=g},function(e,t){function n(e,t){var n=o(e);if(null==n)throw new a("Unable to create "+e+" blot");var i=n,r=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:i.create(t);return new i(r,t)}function i(e,n){return void 0===n&&(n=!1),null==e?null:null!=e[t.DATA_KEY]?e[t.DATA_KEY].blot:n?i(e.parentNode,n):null}function o(e,t){void 0===t&&(t=h.ANY);var n;if("string"==typeof e)n=d[e]||l[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)n=d.text;else if("number"==typeof e)e&h.LEVEL&h.BLOCK?n=d.block:e&h.LEVEL&h.INLINE&&(n=d.inline);else if(e instanceof HTMLElement){var i=(e.getAttribute("class")||"").split(/\s+/);for(var o in i)if(n=c[i[o]])break;n=n||u[e.tagName]}return null==n?null:t&h.LEVEL&n.scope&&t&h.TYPE&n.scope?n:null}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>1)return e.map(function(e){return r(e)});var n=e[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new a("Invalid definition");if("abstract"===n.blotName)throw new a("Cannot register abstract class");if(d[n.blotName||n.attrName]=n,"string"==typeof n.keyName)l[n.keyName]=n;else if(null!=n.className&&(c[n.className]=n),null!=n.tagName){n.tagName=Array.isArray(n.tagName)?n.tagName.map(function(e){return e.toUpperCase()}):n.tagName.toUpperCase();var i=Array.isArray(n.tagName)?n.tagName:[n.tagName];i.forEach(function(e){(null==u[e]||null==n.className)&&(u[e]=n)})}return n}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var n=this;return t="[Parchment] "+t,n=e.call(this,t)||this,n.message=t,n.name=n.constructor.name,n}return s(t,e),t}(Error);t.ParchmentError=a;var l={},c={},u={},d={};t.DATA_KEY="__blot";var h;!function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(h=t.Scope||(t.Scope={})),t.create=n,t.find=i,t.query=o,t.register=r},function(e,t,n){var i=n(51),o=n(11),r=n(3),s=n(20),a=String.fromCharCode(0),l=function(e){this.ops=Array.isArray(e)?e:null!=e&&Array.isArray(e.ops)?e.ops:[]};l.prototype.insert=function(e,t){var n={};return 0===e.length?this:(n.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},l.prototype["delete"]=function(e){return 0>=e?this:this.push({"delete":e})},l.prototype.retain=function(e,t){if(0>=e)return this;var n={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},l.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=r(!0,{},e),"object"==typeof n){if("number"==typeof e["delete"]&&"number"==typeof n["delete"])return this.ops[t-1]={"delete":n["delete"]+e["delete"]},this;if("number"==typeof n["delete"]&&null!=e.insert&&(t-=1,n=this.ops[t-1],"object"!=typeof n))return this.ops.unshift(e),this;if(o(e.attributes,n.attributes)){if("string"==typeof e.insert&&"string"==typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],n=[];return this.forEach(function(i){var o=e(i)?t:n;o.push(i)}),[t,n]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+s.length(t):t.delete?e-t.delete:e},0)},l.prototype.length=function(){return this.reduce(function(e,t){return e+s.length(t)},0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var n=[],i=s.iterator(this.ops),o=0;t>o&&i.hasNext();){var r;e>o?r=i.next(e-o):(r=i.next(t-o),n.push(r)),o+=s.length(r)}return new l(n)},l.prototype.compose=function(e){var t=s.iterator(this.ops),n=s.iterator(e.ops),i=[],r=n.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){for(var a=r.retain;"insert"===t.peekType()&&t.peekLength()<=a;)a-=t.peekLength(),i.push(t.next());r.retain-a>0&&n.next(r.retain-a)}for(var c=new l(i);t.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),n.peekLength()),d=t.next(u),h=n.next(u);if("number"==typeof h.retain){var m={};"number"==typeof d.retain?m.retain=u:m.insert=d.insert;var p=s.attributes.compose(d.attributes,h.attributes,"number"==typeof d.retain);if(p&&(m.attributes=p),c.push(m),!n.hasNext()&&o(c.ops[c.ops.length-1],m)){var f=new l(t.rest());return c.concat(f).chop()}}else"number"==typeof h["delete"]&&"number"==typeof d.retain&&c.push(h)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var n=[this,e].map(function(t){return t.map(function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:a;var i=t===e?"on":"with";throw new Error("diff() called "+i+" non-document")}).join("")}),r=new l,c=i(n[0],n[1],t),u=s.iterator(this.ops),d=s.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case i.INSERT:n=Math.min(d.peekLength(),t),r.push(d.next(n));break;case i.DELETE:n=Math.min(t,u.peekLength()),u.next(n),r["delete"](n);break;case i.EQUAL:n=Math.min(u.peekLength(),d.peekLength(),t);var a=u.next(n),l=d.next(n);o(a.insert,l.insert)?r.retain(n,s.attributes.diff(a.attributes,l.attributes)):r.push(l)["delete"](n)}t-=n}}),r.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var n=s.iterator(this.ops),i=new l,o=0;n.hasNext();){if("insert"!==n.peekType())return;var r=n.peek(),a=s.length(r)-n.peekLength(),c="string"==typeof r.insert?r.insert.indexOf(t,a)-a:-1;if(0>c)i.push(n.next());else if(c>0)i.push(n.next(c));else{if(e(i,n.next(1).attributes||{},o)===!1)return;o+=1,i=new l}}i.length()>0&&e(i,{},o)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var n=s.iterator(this.ops),i=s.iterator(e.ops),o=new l;n.hasNext()||i.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===i.peekType())if("insert"===i.peekType())o.push(i.next());else{var r=Math.min(n.peekLength(),i.peekLength()),a=n.next(r),c=i.next(r);if(a["delete"])continue;c["delete"]?o.push(c):o.retain(r,s.attributes.transform(a.attributes,c.attributes,t))}else o.retain(s.length(n.next()));return o.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var n=s.iterator(this.ops),i=0;n.hasNext()&&e>=i;){var o=n.peekLength(),r=n.peekType();n.next(),"delete"!==r?("insert"===r&&(e>i||!t)&&(e+=o),i+=o):e-=Math.min(o,e-i)}return e},e.exports=l},function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var i=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;var r;for(r in e);return"undefined"==typeof r||t.call(e,r)},a=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return void 0;if(o)return o(e,n).value}return e[n]};e.exports=function c(){var e,t,n,i,o,u,d=arguments[0],h=1,m=arguments.length,p=!1;for("boolean"==typeof d&&(p=d,d=arguments[1]||{},h=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});m>h;++h)if(e=arguments[h],null!=e)for(t in e)n=l(d,t),i=l(e,t),d!==i&&(p&&i&&(s(i)||(o=r(i)))?(o?(o=!1,u=n&&r(n)?n:[]):u=n&&s(n)?n:{},a(d,{name:t,newValue:c(p,u,i)})):"undefined"!=typeof i&&a(d,{name:t,newValue:i}));return d}},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=d.default(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:a(e.parent,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function S(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:S(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},u=n(3),d=i(u),h=n(2),m=i(h),p=n(0),f=i(p),g=n(16),_=i(g),v=n(6),b=i(v),y=n(7),C=i(y),w=1,E=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"attach",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new m.default).insert(this.value(),d.default(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var n=f.default.query(e,f.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,t)}},{key:"formatAt",value:function(e,t,n,i){this.format(n,i)}},{key:"insertAt",value:function(e,n,i){if("string"==typeof n&&n.endsWith("\n")){var o=f.default.create(L.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,n.slice(0,-1))}else c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,i)}}]),t}(f.default.Embed);E.scope=f.default.Scope.BLOCK_BLOT;var L=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache={},n}return s(t,e),l(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),a(t))},new m.default).insert("\n",a(this))),this.cache.delta}},{key:"deleteAt",value:function(e,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),this.cache={}}},{key:"formatAt",value:function(e,n,i,o){0>=n||(f.default.query(i,f.default.Scope.BLOCK)?e+n===this.length()&&this.format(i,o):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(n,this.length()-e-1),i,o),this.cache={})}},{key:"insertAt",value:function(e,n,i){if(null!=i)return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,i);if(0!==n.length){var o=n.split("\n"),r=o.shift();r.length>0&&(e<this.length()-1||null==this.children.tail?c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});var s=this;o.reduce(function(e,t){return s=s.split(e,!0),s.insertAt(0,t),t.length},e+r.length)}}},{key:"insertBefore",value:function(e,n){var i=this.children.head;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n),i instanceof _.default&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+w),this.cache.length}},{key:"moveChildren",value:function(e,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,n),this.cache={}}},{key:"optimize",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;if(n&&(0===e||e>=this.length()-w)){var i=this.clone();return 0===e?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var o=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,n);return this.cache={},o}}]),t}(f.default.Block);L.blotName="block",L.tagName="P",L.defaultChild="break",L.allowedChildren=[b.default,f.default.Embed,C.default],t.bubbleFormats=a,t.BlockEmbed=E,t.default=L},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(t=D.default(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t),t.theme&&t.theme!==O.DEFAULTS.theme){if(t.theme=O.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=x.default;var n=D.default(!0,{},t.theme.DEFAULTS);[n,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){e.modules[t]===!0&&(e.modules[t]={})
})});var i=Object.keys(n.modules).concat(Object.keys(t.modules)),o=i.reduce(function(e,t){var n=O.import("modules/"+t);return null==n?A.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=n.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=D.default(!0,{},O.DEFAULTS,{modules:o},n,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e},{}),t}function a(e,t,n,i){if(this.options.strict&&!this.isEnabled()&&t===v.default.sources.USER)return new p.default;var o=null==n?null:this.getSelection(),r=this.editor.delta,s=e();if(null!=o&&(n===!0&&(n=o.index),null==i?o=c(o,s,t):0!==i&&(o=c(o,n,i,t)),this.setSelection(o,v.default.sources.SILENT)),s.length()>0){var a,l=[v.default.events.TEXT_CHANGE,s,r,t];if((a=this.emitter).emit.apply(a,[v.default.events.EDITOR_CHANGE].concat(l)),t!==v.default.sources.SILENT){var u;(u=this.emitter).emit.apply(u,l)}}return s}function l(e,t,n,i,o){var r={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(o=i,i=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(o=i,i=n,n=t,t=0),"object"===("undefined"==typeof n?"undefined":u(n))?(r=n,o=i):"string"==typeof n&&(null!=i?r[n]=i:o=n),o=o||v.default.sources.API,[e,t,r,o]}function c(e,t,n,i){if(null==e)return null;var o=void 0,r=void 0;if(t instanceof p.default){var s=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,i!==v.default.sources.USER)}),a=d(s,2);o=a[0],r=a[1]}else{var l=[e.index,e.index+e.length].map(function(e){return t>e||e===t&&i===v.default.sources.USER?e:n>=0?e+n:Math.max(t,e+n)}),c=d(l,2);o=c[0],r=c[1]}return new E.Range(o,r-o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(50);var m=n(2),p=i(m),f=n(14),g=i(f),_=n(8),v=i(_),b=n(9),y=i(b),C=n(0),w=i(C),E=n(15),L=i(E),S=n(3),D=i(S),T=n(10),I=i(T),k=n(34),x=i(k),A=I.default("quill"),O=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),this.options=s(t,i),this.container=this.options.container,null==this.container)return A.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new v.default,this.scroll=w.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new g.default(this.scroll),this.selection=new L.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(v.default.events.EDITOR_CHANGE,function(e){e===v.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())}),this.emitter.on(v.default.events.SCROLL_UPDATE,function(e,t){var i=n.selection.lastRange,o=i&&0===i.length?i.index:void 0;a.call(n,function(){return n.editor.update(null,t,o)},e)});var l=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+o+"<p><br></p></div>");this.setContents(l),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return h(e,null,[{key:"debug",value:function(e){e===!0&&(e="log"),I.default.level(e)}},{key:"find",value:function(e){return e.__quill||w.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&A.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;if("string"!=typeof e){var o=e.attrName||e.blotName;"string"==typeof o?this.register("formats/"+o,e,t):Object.keys(e).forEach(function(i){n.register(i,e[i],t)})}else null==this.imports[e]||i||A.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?w.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),h(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var n=e;e=document.createElement("div"),e.classList.add(n)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,n){var i=this,o=l(e,t,n),r=d(o,4);return e=r[0],t=r[1],n=r[3],a.call(this,function(){return i.editor.deleteText(e,t)},n,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.default.sources.API;return a.call(this,function(){var i=n.getSelection(!0),r=new p.default;if(null==i)return r;if(w.default.query(e,w.default.Scope.BLOCK))r=n.editor.formatLine(i.index,i.length,o({},e,t));else{if(0===i.length)return n.selection.format(e,t),r;r=n.editor.formatText(i.index,i.length,o({},e,t))}return n.setSelection(i,v.default.sources.SILENT),r},i)}},{key:"formatLine",value:function(e,t,n,i,o){var r=this,s=void 0,c=l(e,t,n,i,o),u=d(c,4);return e=u[0],t=u[1],s=u[2],o=u[3],a.call(this,function(){return r.editor.formatLine(e,t,s)},o,e,0)}},{key:"formatText",value:function(e,t,n,i,o){var r=this,s=void 0,c=l(e,t,n,i,o),u=d(c,4);return e=u[0],t=u[1],s=u[2],o=u[3],a.call(this,function(){return r.editor.formatText(e,t,s)},o,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=l(e,t),i=d(n,2);return e=i[0],t=i[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;return e&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=l(e,t),i=d(n,2);return e=i[0],t=i[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,n,i){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return a.call(this,function(){return o.editor.insertEmbed(t,n,i)},r,t)}},{key:"insertText",value:function(e,t,n,i,o){var r=this,s=void 0,c=l(e,0,n,i,o),u=d(c,4);return e=u[0],s=u[2],o=u[3],a.call(this,function(){return r.editor.insertText(e,t,s)},o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,n){this.clipboard.dangerouslyPasteHTML(e,t,n)}},{key:"removeFormat",value:function(e,t,n){var i=this,o=l(e,t,n),r=d(o,4);return e=r[0],t=r[1],n=r[3],a.call(this,function(){return i.editor.removeFormat(e,t)},n,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API;return a.call(this,function(){e=new p.default(e);var n=t.getLength(),i=t.editor.deleteText(0,n),o=t.editor.applyDelta(e),r=o.ops[o.ops.length-1];null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),o.delete(1));var s=i.compose(o);return s},n)}},{key:"setSelection",value:function(t,n,i){if(null==t)this.selection.setRange(null,n||e.sources.API);else{var o=l(t,n,i),r=d(o,4);t=r[0],n=r[1],i=r[3],this.selection.setRange(new E.Range(t,n),i),i!==v.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API,n=(new p.default).insert(e);return this.setContents(n,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API;return a.call(this,function(){return e=new p.default(e),t.editor.applyDelta(e,n)},n,!0)}}]),e}();O.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},O.events=v.default.events,O.sources=v.default.sources,O.version="1.3.7",O.imports={delta:p.default,parchment:w.default,"core/module":y.default,"core/theme":x.default},t.expandConfig=s,t.overload=l,t.default=O},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(7),u=i(c),d=n(0),h=i(d),m=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"formatAt",value:function(e,n,i,o){if(t.compare(this.statics.blotName,i)<0&&h.default.query(i,h.default.Scope.BLOT)){var r=this.isolate(e,n);o&&r.wrap(i,o)}else l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,i,o)}},{key:"optimize",value:function(e){if(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(e,n){var i=t.order.indexOf(e),o=t.order.indexOf(n);return i>=0||o>=0?i-o:e===n?0:n>e?-1:1}}]),t}(h.default.Inline);m.allowedChildren=[m,h.default.Embed,u.default],m.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=m},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=i(a),c=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(l.default.Text);t.default=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(54),u=i(c),d=n(10),h=i(d),m=h.default("quill:events"),p=["selectionchange","mousedown","mouseup","click"];p.forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){if(e.__quill&&e.__quill.emitter){var n;(n=e.__quill.emitter).handleDOM.apply(n,t)}})})});var f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",m.error),e}return s(t,e),a(t,[{key:"emit",value:function(){m.log.apply(m,arguments),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];(this.listeners[e.type]||[]).forEach(function(t){var i=t.node,o=t.handler;(e.target===i||i.contains(e.target))&&o.apply(void 0,[e].concat(n))})}},{key:"listenDOM",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}]),t}(u.default);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},t.default=f},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,o),this.quill=e,this.options=t};i.DEFAULTS={},t.default=i},function(e,t){function n(e){if(o.indexOf(e)<=o.indexOf(r)){for(var t,n=arguments.length,i=Array(n>1?n-1:0),s=1;n>s;s++)i[s-1]=arguments[s];(t=console)[e].apply(t,i)}}function i(e){return o.reduce(function(t,i){return t[i]=n.bind(console,i,e),t},{})}Object.defineProperty(t,"__esModule",{value:!0});var o=["error","warn","log","info"],r="warn";n.level=i.level=function(e){r=e},t.default=i},function(e,t,n){function i(e){return null===e||void 0===e}function o(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:e.length>0&&"number"!=typeof e[0]?!1:!0:!1}function r(e,t,n){var r,u;if(i(e)||i(t))return!1;if(e.prototype!==t.prototype)return!1;if(l(e))return l(t)?(e=s.call(e),t=s.call(t),c(e,t,n)):!1;if(o(e)){if(!o(t))return!1;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}try{var d=a(e),h=a(t)}catch(m){return!1}if(d.length!=h.length)return!1;for(d.sort(),h.sort(),r=d.length-1;r>=0;r--)if(d[r]!=h[r])return!1;for(r=d.length-1;r>=0;r--)if(u=d[r],!c(e[u],t[u],n))return!1;return typeof e==typeof t}var s=Array.prototype.slice,a=n(52),l=n(53),c=e.exports=function(e,t,n){return n||(n={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:r(e,t,n)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var o=i.Scope.TYPE&i.Scope.ATTRIBUTE;this.scope=null!=n.scope?n.scope&i.Scope.LEVEL|o:i.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1},e.prototype.canAdd=function(e,t){var n=i.query(e,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return null==n?!1:null==this.whitelist?!0:"string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=o},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var a=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function w(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},u=n(2),d=i(u),h=n(0),m=i(h),p=n(4),f=i(p),g=n(6),_=i(g),v=n(7),b=i(v),y=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(_.default);y.blotName="code",y.tagName="CODE";var C=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,n){return t.insert(n).insert("\n",e.formats())},new d.default)}},{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n){var i=this.descendant(b.default,this.length()-1),o=a(i,1),r=o[0];null!=r&&r.deleteAt(r.length()-1,1),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}},{key:"formatAt",value:function(e,n,i,o){if(0!==n&&null!=m.default.query(i,m.default.Scope.BLOCK)&&(i!==this.statics.blotName||o!==this.statics.formats(this.domNode))){var r=this.newlineIndex(e);if(!(0>r||r>=e+n)){var s=this.newlineIndex(e,!0)+1,a=r-s+1,l=this.isolate(s,a),c=l.next;l.format(i,o),c instanceof t&&c.formatAt(0,e-s+n-a,i,o)}}}},{key:"insertAt",value:function(e,t,n){if(null==n){var i=this.descendant(b.default,e),o=a(i,2),r=o[0],s=o[1];r.insertAt(s,t)}}},{key:"length",value:function n(){var n=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?n:n+1}},{key:"newlineIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;if(t)return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var n=this.domNode.textContent.slice(e).indexOf("\n");return n>-1?e+n:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(m.default.create("text","\n")),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(e),n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=m.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof m.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var n=c(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),t}(f.default);C.blotName="code-block",C.tagName="PRE",C.TAB="  ",t.Code=y,t.default=C},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return Object.keys(t).reduce(function(n,i){return null==e[i]?n:(t[i]===e[i]?n[i]=t[i]:Array.isArray(t[i])?t[i].indexOf(e[i])<0&&(n[i]=t[i].concat([e[i]])):n[i]=[t[i],e[i]],n)},{})}function a(e){return e.reduce(function(e,t){if(1===t.insert){var n=D.default(t.attributes);return delete n.image,e.insert({image:t.attributes.image},n)}if(null==t.attributes||t.attributes.list!==!0&&t.attributes.bullet!==!0||(t=D.default(t),t.attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var i=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(i,t.attributes)}return e.push(t)},new h.default)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(2),h=i(d),m=n(20),p=i(m),f=n(0),g=i(f),_=n(13),v=i(_),b=n(24),y=i(b),C=n(4),w=i(C),E=n(16),L=i(E),S=n(21),D=i(S),T=n(11),I=i(T),k=n(3),x=i(k),A=/^[ -~]*$/,O=function(){function e(t){r(this,e),this.scroll=t,this.delta=this.getDelta()}return u(e,[{key:"applyDelta",value:function(e){var t=this,n=!1;this.scroll.update();var i=this.scroll.length();return this.scroll.batchStart(),e=a(e),e.reduce(function(e,o){var r=o.retain||o.delete||o.insert.length||1,s=o.attributes||{};if(null!=o.insert){if("string"==typeof o.insert){var a=o.insert;a.endsWith("\n")&&n&&(n=!1,a=a.slice(0,-1)),e>=i&&!a.endsWith("\n")&&(n=!0),t.scroll.insertAt(e,a);var u=t.scroll.line(e),d=c(u,2),h=d[0],m=d[1],f=x.default({},C.bubbleFormats(h));if(h instanceof w.default){var _=h.descendant(g.default.Leaf,m),v=c(_,1),b=v[0];f=x.default(f,C.bubbleFormats(b))}s=p.default.attributes.diff(f,s)||{}}else if("object"===l(o.insert)){var y=Object.keys(o.insert)[0];if(null==y)return e;t.scroll.insertAt(e,y,o.insert[y])}i+=r}return Object.keys(s).forEach(function(n){t.scroll.formatAt(e,r,n,s[n])}),e+r},0),e.reduce(function(e,n){return"number"==typeof n.delete?(t.scroll.deleteAt(e,n.delete),e):e+(n.retain||n.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new h.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(i).forEach(function(o){if(null==n.scroll.whitelist||n.scroll.whitelist[o]){var r=n.scroll.lines(e,Math.max(t,1)),s=t;r.forEach(function(t){var r=t.length();if(t instanceof v.default){var a=e-t.offset(n.scroll),l=t.newlineIndex(a+s)-a+1;t.formatAt(a,l,o,i[o])}else t.format(o,i[o]);s-=r})}}),this.scroll.optimize(),this.update((new h.default).retain(e).retain(t,D.default(i)))}},{key:"formatText",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(i).forEach(function(o){n.scroll.formatAt(e,t,o,i[o])}),this.update((new h.default).retain(e).retain(t,D.default(i)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new h.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===t?this.scroll.path(e).forEach(function(e){var t=c(e,1),o=t[0];o instanceof w.default?n.push(o):o instanceof g.default.Leaf&&i.push(o)}):(n=this.scroll.lines(e,t),i=this.scroll.descendants(g.default.Leaf,e,t));var o=[n,i].map(function(e){if(0===e.length)return{};for(var t=C.bubbleFormats(e.shift());Object.keys(t).length>0;){var n=e.shift();if(null==n)return t;t=s(C.bubbleFormats(n),t)}return t});return x.default.apply(x.default,o)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new h.default).retain(e).insert(o({},t,n)))}},{key:"insertText",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(i).forEach(function(o){n.scroll.formatAt(e,t.length,o,i[o])}),this.update((new h.default).retain(e).insert(t,D.default(i)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName!==w.default.blotName?!1:e.children.length>1?!1:e.children.head instanceof L.default}},{key:"removeFormat",value:function(e,t){var n=this.getText(e,t),i=this.scroll.line(e+t),o=c(i,2),r=o[0],s=o[1],a=0,l=new h.default;null!=r&&(a=r instanceof v.default?r.newlineIndex(s)-s+1:r.length()-s,l=r.delta().slice(s,s+a-1).insert("\n"));var u=this.getContents(e,t+a),d=u.diff((new h.default).insert(n).concat(l)),m=(new h.default).retain(e).concat(d);return this.applyDelta(m)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(A)&&g.default.find(t[0].target)){var o=g.default.find(t[0].target),r=C.bubbleFormats(o),s=o.offset(this.scroll),a=t[0].oldValue.replace(y.default.CONTENTS,""),l=(new h.default).insert(a),c=(new h.default).insert(o.value()),u=(new h.default).retain(s).concat(l.diff(c,n));e=u.reduce(function(e,t){return t.insert?e.insert(t.insert,r):e.push(t)},new h.default),this.delta=i.compose(e)}else this.delta=this.getDelta(),e&&I.default(i.compose(e),this.delta)||(e=i.diff(this.delta,n));return e}}]),e}();t.default=O},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){try{t.parentNode}catch(n){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var a=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(0),u=i(c),d=n(21),h=i(d),m=n(11),p=i(m),f=n(8),g=i(f),_=n(10),v=i(_),b=v.default("quill:selection"),y=function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,w),this.index=e,this.length=t},C=function(){function e(t,n){var i=this;r(this,e),this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new y(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){i.mouseDown||setTimeout(i.update.bind(i,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(e,t){e===g.default.events.TEXT_CHANGE&&t.length()>0&&i.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(i.hasFocus()){var e=i.getNativeRange();null!=e&&e.start.node!==i.cursor.textNode&&i.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{i.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var n=t.range,o=n.startNode,r=n.startOffset,s=n.endNode,a=n.endOffset;i.setNativeRange(o,r,s,a)}}),this.update(g.default.sources.SILENT)}return l(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!u.default.query(e,u.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var i=u.default.find(n.start.node,!1);if(null==i)return;if(i instanceof u.default.Leaf){var o=i.split(n.start.offset);i.parent.insertBefore(this.cursor,o)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;var i=void 0,o=this.scroll.leaf(e),r=a(o,2),s=r[0],l=r[1];if(null==s)return null;var c=s.position(l,!0),u=a(c,2);i=u[0],l=u[1];var d=document.createRange();if(t>0){d.setStart(i,l);var h=this.scroll.leaf(e+t),m=a(h,2);if(s=m[0],l=m[1],null==s)return null;var p=s.position(l,!0),f=a(p,2);return i=f[0],l=f[1],d.setEnd(i,l),d.getBoundingClientRect()}var g="left",_=void 0;return i instanceof Text?(l<i.data.length?(d.setStart(i,l),d.setEnd(i,l+1)):(d.setStart(i,l-1),d.setEnd(i,l),g="right"),_=d.getBoundingClientRect()):(_=s.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:_.top+_.height,height:_.height,left:_[g],right:_[g],top:_.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var n=this.normalizeNative(t);return b.info("getNativeRange",n),n}},{key:"getRange",value:function(){var e=this.getNativeRange();if(null==e)return[null,null];var t=this.normalizedToRange(e);return[t,e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);var i=n.map(function(e){var n=a(e,2),i=n[0],o=n[1],r=u.default.find(i,!0),s=r.offset(t.scroll);return 0===o?s:r instanceof u.default.Container?s+r.length():s+r.index(i,o)}),r=Math.min(Math.max.apply(Math,o(i)),this.scroll.length()-1),s=Math.min.apply(Math,[r].concat(o(i)));return new y(s,r-s)}},{key:"normalizeNative",value:function(e){if(!s(this.root,e.startContainer)||!e.collapsed&&!s(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},"native":e};return[t.start,t.end].forEach(function(e){for(var t=e.node,n=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;t=t.lastChild,n=t instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=n}),t}},{key:"rangeToNative",value:function(e){var t=this,n=e.collapsed?[e.index]:[e.index,e.index+e.length],i=[],o=this.scroll.length();return n.forEach(function(e,n){e=Math.min(o-1,e);var r=void 0,s=t.scroll.leaf(e),l=a(s,2),c=l[0],u=l[1],d=c.position(u,0!==n),h=a(d,2);r=h[0],u=h[1],i.push(r,u)}),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var n=this.getBounds(t.index,t.length);if(null!=n){var i=this.scroll.length()-1,o=this.scroll.line(Math.min(t.index,i)),r=a(o,1),s=r[0],l=s;if(t.length>0){var c=this.scroll.line(Math.min(t.index+t.length,i)),u=a(c,1);l=u[0]}if(null!=s&&null!=l){var d=e.getBoundingClientRect();n.top<d.top?e.scrollTop-=d.top-n.top:n.bottom>d.bottom&&(e.scrollTop+=n.bottom-d.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!1;if(b.info("setNativeRange",e,t,n,i),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=n.parentNode){var r=document.getSelection();if(null!=r)if(null!=e){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||o||e!==s.startContainer||t!==s.startOffset||n!==s.endContainer||i!==s.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==n.tagName&&(i=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var a=document.createRange();a.setStart(e,t),a.setEnd(n,i),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.default.sources.API;if("string"==typeof t&&(n=t,t=!1),b.info("setRange",e),null!=e){var i=this.rangeToNative(e);this.setNativeRange.apply(this,o(i).concat([t]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.default.sources.USER,t=this.lastRange,n=this.getRange(),i=a(n,2),o=i[0],r=i[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!p.default(t,this.lastRange)){var s;!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();var l=[g.default.events.SELECTION_CHANGE,h.default(this.lastRange),h.default(t),e];if((s=this.emitter).emit.apply(s,[g.default.events.EDITOR_CHANGE].concat(l)),e!==g.default.sources.SILENT){var c;(c=this.emitter).emit.apply(c,l)}}}}]),e}();t.Range=y,t.default=C},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(0),u=i(c),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"insertInto",value:function(e,n){0===e.children.length?l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){return void 0}}]),t}(u.default.Embed);d.blotName="break",d.tagName="BR",t.default=d},function(e,t,n){function i(e){var t=a.find(e);if(null==t)try{t=a.create(e)}catch(n){t=a.create(a.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),s=n(30),a=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.build(),n}return o(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new r.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var n=i(t);e.insertBefore(n,e.children.head||void 0)}catch(o){if(o instanceof a.ParchmentError)return;throw o}})},t.prototype.deleteAt=function(e,t){return 0===e&&t===this.length()?this.remove():void this.children.forEachAt(e,t,function(e,t,n){e.deleteAt(t,n)})},t.prototype.descendant=function(e,n){var i=this.children.find(n),o=i[0],r=i[1];return null==e.blotName&&e(o)||null!=e.blotName&&o instanceof e?[o,r]:o instanceof t?o.descendant(e,r):[null,-1]},t.prototype.descendants=function(e,n,i){void 0===n&&(n=0),void 0===i&&(i=Number.MAX_VALUE);var o=[],r=i;return this.children.forEachAt(n,i,function(n,i,s){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&o.push(n),n instanceof t&&(o=o.concat(n.descendants(e,i,r))),r-=s}),o},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,n,i){this.children.forEachAt(e,t,function(e,t,o){e.formatAt(t,o,n,i)})},t.prototype.insertAt=function(e,t,n){var i=this.children.find(e),o=i[0],r=i[1];if(o)o.insertAt(r,t,n);else{var s=null==n?a.create("text",t):a.create(t,n);this.appendChild(s)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new a.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(n){e.insertBefore(n,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var n=a.create(this.statics.defaultChild);this.appendChild(n),n.optimize(t)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var i=this.children.find(e,n),o=i[0],r=i[1],s=[[this,e]];return o instanceof t?s.concat(o.path(r,n)):(null!=o&&s.push([o,r]),s)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),e.prototype.replace.call(this,n)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(e,this.length(),function(e,i){e=e.split(i,t),n.appendChild(e)}),n},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e){var t=this,n=[],o=[];e.forEach(function(e){e.target===t.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),o.push.apply(o,e.removedNodes))}),o.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var n=a.find(e);null!=n&&(null==n.domNode.parentNode||n.domNode.parentNode===t.domNode)&&n.detach()}}),n.filter(function(e){return e.parentNode==t.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var n=null;null!=e.nextSibling&&(n=a.find(e.nextSibling));var o=i(e);(o.next!=n||null==o.next)&&(null!=o.parent&&o.parent.removeChild(t),t.insertBefore(o,n||void 0))})},t}(s.default);t.default=l},function(e,t,n){var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),r=n(31),s=n(17),a=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.attributes=new r.default(n.domNode),n}return i(t,e),t.formats=function(e){return"string"==typeof this.tagName?!0:Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0},t.prototype.format=function(e,t){var n=a.query(e);n instanceof o.default?this.attributes.attribute(n,t):t&&(null==n||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,n){var i=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(i),i},t.prototype.update=function(t,n){var i=this;e.prototype.update.call(this,t,n),t.some(function(e){return e.target===i.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(n,i){var o=e.prototype.wrap.call(this,n,i);return o instanceof t&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},t}(s.default);t.default=l},function(e,t,n){var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),r=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.value=function(){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e){var t=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(t+=1),[this.parent.domNode,t]},t.prototype.value=function(){var e;return e={},e[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=r.Scope.INLINE_BLOT,t}(o.default);t.default=s},function(e,t,n){function i(e){this.ops=e,this.index=0,this.offset=0}var o=n(11),r=n(3),s={attributes:{compose:function(e,t,n){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var i=r(!0,{},t);n||(i=Object.keys(i).reduce(function(e,t){return null!=i[t]&&(e[t]=i[t]),e},{}));for(var o in e)void 0!==e[o]&&void 0===t[o]&&(i[o]=e[o]);return Object.keys(i).length>0?i:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce(function(n,i){return o(e[i],t[i])||(n[i]=void 0===t[i]?null:t[i]),n},{});return Object.keys(n).length>0?n:void 0},transform:function(e,t,n){if("object"!=typeof e)return t;if("object"!=typeof t)return void 0;if(!n)return t;var i=Object.keys(t).reduce(function(n,i){return void 0===e[i]&&(n[i]=t[i]),n},{});return Object.keys(i).length>0?i:void 0}},iterator:function(e){return new i(e)},length:function(e){return"number"==typeof e["delete"]?e["delete"]:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};i.prototype.hasNext=function(){return this.peekLength()<1/0},i.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,i=s.length(t);if(e>=i-n?(e=i-n,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t["delete"])return{"delete":e};var o={};return t.attributes&&(o.attributes=t.attributes),"number"==typeof t.retain?o.retain=e:o.insert="string"==typeof t.insert?t.insert.substr(n,e):t.insert,o}return{retain:1/0}},i.prototype.peek=function(){return this.ops[this.index]},i.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},i.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index]["delete"]?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},i.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(i)}return[]},e.exports=s},function(e){var t=function(){function e(e,t){return null!=t&&e instanceof t}function t(n,i,o,r,l){function d(n,o){if(null===n)return null;if(0===o)return n;var f,g;if("object"!=typeof n)return n;if(e(n,a))f=new a;else if(e(n,c))f=new c;else if(e(n,u))f=new u(function(e,t){n.then(function(t){e(d(t,o-1))},function(e){t(d(e,o-1))})});else if(t.__isArray(n))f=[];else if(t.__isRegExp(n))f=new RegExp(n.source,s(n)),n.lastIndex&&(f.lastIndex=n.lastIndex);else if(t.__isDate(n))f=new Date(n.getTime());else{if(p&&Buffer.isBuffer(n))return f=Buffer.allocUnsafe?Buffer.allocUnsafe(n.length):new Buffer(n.length),n.copy(f),f;e(n,Error)?f=Object.create(n):"undefined"==typeof r?(g=Object.getPrototypeOf(n),f=Object.create(g)):(f=Object.create(r),g=r)}if(i){var _=h.indexOf(n);if(-1!=_)return m[_];h.push(n),m.push(f)}e(n,a)&&n.forEach(function(e,t){var n=d(t,o-1),i=d(e,o-1);f.set(n,i)}),e(n,c)&&n.forEach(function(e){var t=d(e,o-1);f.add(t)});for(var v in n){var b;g&&(b=Object.getOwnPropertyDescriptor(g,v)),b&&null==b.set||(f[v]=d(n[v],o-1))}if(Object.getOwnPropertySymbols)for(var y=Object.getOwnPropertySymbols(n),v=0;v<y.length;v++){var C=y[v],w=Object.getOwnPropertyDescriptor(n,C);(!w||w.enumerable||l)&&(f[C]=d(n[C],o-1),w.enumerable||Object.defineProperty(f,C,{enumerable:!1}))}if(l)for(var E=Object.getOwnPropertyNames(n),v=0;v<E.length;v++){var L=E[v],w=Object.getOwnPropertyDescriptor(n,L);w&&w.enumerable||(f[L]=d(n[L],o-1),Object.defineProperty(f,L,{enumerable:!1}))}return f}"object"==typeof i&&(o=i.depth,r=i.prototype,l=i.includeNonEnumerable,i=i.circular);var h=[],m=[],p="undefined"!=typeof Buffer;return"undefined"==typeof i&&(i=!0),"undefined"==typeof o&&(o=1/0),d(n,o)}function n(e){return Object.prototype.toString.call(e)}function i(e){return"object"==typeof e&&"[object Date]"===n(e)}function o(e){return"object"==typeof e&&"[object Array]"===n(e)}function r(e){return"object"==typeof e&&"[object RegExp]"===n(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var a;try{a=Map}catch(l){a=function(){}}var c;try{c=Set}catch(l){c=function(){}}var u;try{u=Promise}catch(l){u=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=n,t.__isDate=i,t.__isArray=o,t.__isRegExp=r,t.__getRegExpFlags=s,t}();"object"==typeof e&&e.exports&&(e.exports=t)},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e instanceof g.default||e instanceof f.BlockEmbed}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function L(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:L(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},d=n(0),h=i(d),m=n(8),p=i(m),f=n(4),g=i(f),_=n(16),v=i(_),b=n(13),y=i(b),C=n(25),w=i(C),E=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.emitter=n.emitter,Array.isArray(n.whitelist)&&(i.whitelist=n.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),i.domNode.addEventListener("DOMNodeInserted",function(){}),i.optimize(),i.enable(),i}return s(t,e),c(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,n){var i=this.line(e),o=l(i,2),r=o[0],s=o[1],a=this.line(e+n),c=l(a,1),d=c[0];if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),null!=d&&r!==d&&s>0){if(r instanceof f.BlockEmbed||d instanceof f.BlockEmbed)return void this.optimize();if(r instanceof y.default){var h=r.newlineIndex(r.length(),!0);if(h>-1&&(r=r.split(h+1),r===d))return void this.optimize()}else if(d instanceof y.default){var m=d.newlineIndex(0);m>-1&&d.split(m+1)}var p=d.children.head instanceof v.default?null:d.children.head;r.moveChildren(d,p),r.remove()}this.optimize()}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,n,i,o){(null==this.whitelist||this.whitelist[i])&&(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,i,o),this.optimize())}},{key:"insertAt",value:function(e,n,i){if(null==i||null==this.whitelist||this.whitelist[n]){if(e>=this.length())if(null==i||null==h.default.query(n,h.default.Scope.BLOCK)){var o=h.default.create(this.statics.defaultChild);this.appendChild(o),null==i&&n.endsWith("\n")&&(n=n.slice(0,-1)),o.insertAt(0,n,i)}else{var r=h.default.create(n,i);this.appendChild(r)}else u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,i);this.optimize()}}},{key:"insertBefore",value:function(e,n){if(e.statics.scope===h.default.Scope.INLINE_BLOT){var i=h.default.create(this.statics.defaultChild);i.appendChild(e),e=i}u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(a,e)}},{key:"lines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=function i(e,t,n){var o=[],r=n;return e.children.forEachAt(t,n,function(e,t,n){a(e)?o.push(e):e instanceof h.default.Container&&(o=o.concat(i(e,t,r))),r-=n}),o};return n(this,e,t)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch!==!0&&(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,n),e.length>0&&this.emitter.emit(p.default.events.SCROLL_OPTIMIZE,e,n))}},{key:"path",value:function(e){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(this.batch!==!0){var n=p.default.sources.USER;"string"==typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(p.default.events.SCROLL_BEFORE_UPDATE,n,e),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(p.default.events.SCROLL_UPDATE,n,e)}}}]),t}(h.default.Scroll);E.blotName="scroll",E.className="ql-editor",E.tagName="DIV",E.defaultChild="block",E.allowedChildren=[g.default,f.BlockEmbed,w.default],t.default=E},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n,i=e===z.keys.LEFT?"prefix":"suffix";return n={key:e,shiftKey:t,altKey:null},o(n,i,/^$/),o(n,"handler",function(n){var i=n.index;e===z.keys.RIGHT&&(i+=n.length+1);var o=this.quill.getLeaf(i),r=_(o,1),s=r[0];return s instanceof x.default.Embed?(e===z.keys.LEFT?t?this.quill.setSelection(n.index-1,n.length+1,O.default.sources.USER):this.quill.setSelection(n.index-1,O.default.sources.USER):t?this.quill.setSelection(n.index,n.length+1,O.default.sources.USER):this.quill.setSelection(n.index+n.length+1,O.default.sources.USER),!1):!0}),n}function c(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var n=this.quill.getLine(e.index),i=_(n,1),o=i[0],r={};if(0===t.offset){var s=this.quill.getLine(e.index-1),a=_(s,1),l=a[0];if(null!=l&&l.length()>1){var c=o.formats(),u=this.quill.getFormat(e.index-1,1);r=I.default.attributes.diff(c,u)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-d,d,O.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index-d,d,r,O.default.sources.USER),this.quill.focus()}}function u(e,t){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-n)){var i={},o=0,r=this.quill.getLine(e.index),s=_(r,1),a=s[0];if(t.offset>=a.length()-1){var l=this.quill.getLine(e.index+1),c=_(l,1),u=c[0];if(u){var d=a.formats(),h=this.quill.getFormat(e.index,1);i=I.default.attributes.diff(d,h)||{},o=u.length()}}this.quill.deleteText(e.index,n,O.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(e.index+o-1,n,i,O.default.sources.USER)}}function d(e){var t=this.quill.getLines(e),n={};if(t.length>1){var i=t[0].formats(),o=t[t.length-1].formats();n=I.default.attributes.diff(o,i)||{}}this.quill.deleteText(e,O.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index,1,n,O.default.sources.USER),this.quill.setSelection(e.index,O.default.sources.SILENT),this.quill.focus()}function h(e,t){var n=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var i=Object.keys(t.format).reduce(function(e,n){return x.default.query(n,x.default.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e},{});this.quill.insertText(e.index,"\n",i,O.default.sources.USER),this.quill.setSelection(e.index+1,O.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==i[e]&&(Array.isArray(t.format[e])||"link"!==e&&n.quill.format(e,t.format[e],O.default.sources.USER))})}function m(e){return{key:z.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var n=x.default.query("code-block"),i=t.index,o=t.length,r=this.quill.scroll.descendant(n,i),s=_(r,2),a=s[0],l=s[1];if(null!=a){var c=this.quill.getIndex(a),u=a.newlineIndex(l,!0)+1,d=a.newlineIndex(c+l+o),h=a.domNode.textContent.slice(u,d).split("\n");l=0,h.forEach(function(t,r){e?(a.insertAt(u+l,n.TAB),l+=n.TAB.length,0===r?i+=n.TAB.length:o+=n.TAB.length):t.startsWith(n.TAB)&&(a.deleteAt(u+l,n.TAB.length),l-=n.TAB.length,0===r?i-=n.TAB.length:o-=n.TAB.length),l+=t.length+1}),this.quill.update(O.default.sources.USER),this.quill.setSelection(i,o,O.default.sources.SILENT)}}}}function p(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,n){this.quill.format(e,!n.format[e],O.default.sources.USER)}}}function f(e){if("string"==typeof e||"number"==typeof e)return f({key:e});if("object"===("undefined"==typeof e?"undefined":g(e))&&(e=y.default(e,!1)),"string"==typeof e.key)if(null!=z.keys[e.key.toUpperCase()])e.key=z.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[B]=e.shortKey,delete e.shortKey),e}Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=n(21),y=i(b),C=n(11),w=i(C),E=n(3),L=i(E),S=n(2),D=i(S),T=n(20),I=i(T),k=n(0),x=i(k),A=n(5),O=i(A),N=n(10),M=i(N),P=n(9),R=i(P),F=M.default("quill:keyboard"),B=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",z=function(e){function t(e,n){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));
return i.bindings={},Object.keys(i.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&i.options.bindings[t]&&i.addBinding(i.options.bindings[t])}),i.addBinding({key:t.keys.ENTER,shiftKey:null},h),i.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},c),i.addBinding({key:t.keys.DELETE},{collapsed:!0},u)):(i.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},c),i.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},u)),i.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},d),i.addBinding({key:t.keys.DELETE},{collapsed:!1},d),i.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},c),i.listen(),i}return a(t,e),v(t,null,[{key:"match",value:function(e,t){return t=f(t),["altKey","ctrlKey","metaKey","shiftKey"].some(function(n){return!!t[n]!==e[n]&&null!==t[n]})?!1:t.key===(e.which||e.keyCode)}}]),v(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=f(e);return null==i||null==i.key?F.warn("Attempted to add invalid keyboard binding",i):("function"==typeof t&&(t={handler:t}),"function"==typeof n&&(n={handler:n}),i=L.default(i,t,n),this.bindings[i.key]=this.bindings[i.key]||[],void this.bindings[i.key].push(i))}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(n){if(!n.defaultPrevented){var i=n.which||n.keyCode,o=(e.bindings[i]||[]).filter(function(e){return t.match(n,e)});if(0!==o.length){var r=e.quill.getSelection();if(null!=r&&e.quill.hasFocus()){var s=e.quill.getLine(r.index),a=_(s,2),l=a[0],c=a[1],u=e.quill.getLeaf(r.index),d=_(u,2),h=d[0],m=d[1],p=0===r.length?[h,m]:e.quill.getLeaf(r.index+r.length),f=_(p,2),v=f[0],b=f[1],y=h instanceof x.default.Text?h.value().slice(0,m):"",C=v instanceof x.default.Text?v.value().slice(b):"",E={collapsed:0===r.length,empty:0===r.length&&l.length()<=1,format:e.quill.getFormat(r),offset:c,prefix:y,suffix:C},L=o.some(function(t){if(null!=t.collapsed&&t.collapsed!==E.collapsed)return!1;if(null!=t.empty&&t.empty!==E.empty)return!1;if(null!=t.offset&&t.offset!==E.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==E.format[e]}))return!1}else if("object"===g(t.format)&&!Object.keys(t.format).every(function(e){return t.format[e]===!0?null!=E.format[e]:t.format[e]===!1?null==E.format[e]:w.default(t.format[e],E.format[e])}))return!1;return(null==t.prefix||t.prefix.test(E.prefix))&&(null==t.suffix||t.suffix.test(E.suffix))?t.handler.call(e,r,E)!==!0:!1});L&&n.preventDefault()}}}})}}]),t}(R.default);z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},z.DEFAULTS={bindings:{bold:p("bold"),italic:p("italic"),underline:p("underline"),indent:{key:z.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){return t.collapsed&&0!==t.offset?!0:void this.quill.format("indent","+1",O.default.sources.USER)}},outdent:{key:z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){return t.collapsed&&0!==t.offset?!0:void this.quill.format("indent","-1",O.default.sources.USER)}},"outdent backspace":{key:z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",O.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,O.default.sources.USER)}},"indent code-block":m(!0),"outdent code-block":m(!1),"remove tab":{key:z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,O.default.sources.USER)}},tab:{key:z.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new D.default).retain(e.index).delete(e.length).insert("	");this.quill.updateContents(t,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,O.default.sources.SILENT)}},"list empty enter":{key:z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,O.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,O.default.sources.USER)}},"checklist enter":{key:z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),n=_(t,2),i=n[0],o=n[1],r=L.default({},i.formats(),{list:"checked"}),s=(new D.default).retain(e.index).insert("\n",r).retain(i.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,O.default.sources.USER),this.quill.setSelection(e.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var n=this.quill.getLine(e.index),i=_(n,2),o=i[0],r=i[1],s=(new D.default).retain(e.index).insert("\n",t.format).retain(o.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,O.default.sources.USER),this.quill.setSelection(e.index+1,O.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var n=t.prefix.length,i=this.quill.getLine(e.index),o=_(i,2),r=o[0],s=o[1];if(s>n)return!0;var a=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":case"*":a="bullet";break;default:a="ordered"}this.quill.insertText(e.index," ",O.default.sources.USER),this.quill.history.cutoff();var l=(new D.default).retain(e.index-s).delete(n+1).retain(r.length()-2-s).retain(1,{list:a});this.quill.updateContents(l,O.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,O.default.sources.SILENT)}},"code exit":{key:z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),n=_(t,2),i=n[0],o=n[1],r=(new D.default).retain(e.index+i.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(r,O.default.sources.USER)}},"embed left":l(z.keys.LEFT,!1),"embed left shift":l(z.keys.LEFT,!0),"embed right":l(z.keys.RIGHT,!1),"embed right shift":l(z.keys.RIGHT,!0)}},t.default=z,t.SHORTKEY=B},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),d=i(u),h=n(7),m=i(h),p=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.selection=n,i.textNode=document.createTextNode(t.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return s(t,e),c(t,null,[{key:"value",value:function(){return void 0}}]),c(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,n){if(0!==this._length)return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);for(var i=this,o=0;null!=i&&i.statics.scope!==d.default.Scope.BLOCK_BLOT;)o+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=t.CONTENTS.length,i.optimize(),i.formatAt(o,t.CONTENTS.length,e,n),this._length=0)}},{key:"index",value:function(e,n){return e===this.textNode?0:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,n=this.selection.getNativeRange(),i=void 0,o=void 0,r=void 0;if(null!=n&&n.start.node===e&&n.end.node===e){var s=[e,n.start.offset,n.end.offset];i=s[0],o=s[1],r=s[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var l=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof m.default?(i=this.next.domNode,this.next.insertAt(0,l),this.textNode.data=t.CONTENTS):(this.textNode.data=l,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var c=[o,r].map(function(e){return Math.max(0,Math.min(i.data.length,e-1))}),u=a(c,2);return o=u[0],r=u[1],{startNode:i,startOffset:o,endNode:i,endOffset:r}}}}},{key:"update",value:function(e,t){var n=this;if(e.some(function(e){return"characterData"===e.type&&e.target===n.textNode})){var i=this.restore();i&&(t.range=i)}}},{key:"value",value:function(){return""}}]),t}(d.default.Embed);p.blotName="cursor",p.className="ql-cursor",p.tagName="span",p.CONTENTS="﻿",t.default=p},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=i(a),c=n(4),u=i(c),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(l.default.Container);d.allowedChildren=[u.default,c.BlockEmbed,d],t.default=d},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(0),u=i(c),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"value",value:function n(e){var n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+n.split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join("")):n}}]),t}(u.default.Attributor.Style),h=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),m=new d("color","color",{scope:u.default.Scope.INLINE});t.ColorAttributor=d,t.ColorClass=h,t.ColorStyle=m},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=document.createElement("a");n.href=e;var i=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(i)>-1}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},u=n(6),d=i(u),h=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"format",value:function(e,n){return e===this.statics.blotName&&n?(n=this.constructor.sanitize(n),void this.domNode.setAttribute("href",n)):c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=c(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),n.setAttribute("href",e),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return a(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(d.default);h.blotName="link",h.tagName="A",h.SANITIZED_URL="about:blank",h.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=h,t.sanitize=a},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(23),c=i(l),u=n(107),d=i(u),h=0,m=function(){function e(t){var n=this;o(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){n.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case c.default.keys.ENTER:n.togglePicker();break;case c.default.keys.ESCAPE:n.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return a(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),r(this.label,"aria-expanded"),r(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),e.hasAttribute("value")&&n.setAttribute("data-value",e.getAttribute("value")),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",function(){t.selectItem(n,!0)}),n.addEventListener("keydown",function(e){switch(e.keyCode){case c.default.keys.ENTER:t.selectItem(n,!0),e.preventDefault();break;case c.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),n}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=d.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+h,h+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(n){var i=e.buildItem(n);t.appendChild(i),n.selected===!0&&e.selectItem(i)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=this.container.querySelector(".ql-selected");if(e!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":s(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var n=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),e}();t.default=m},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=i(o),s=n(5),a=i(s),l=n(4),c=i(l),u=n(16),d=i(u),h=n(25),m=i(h),p=n(24),f=i(p),g=n(35),_=i(g),v=n(6),b=i(v),y=n(22),C=i(y),w=n(7),E=i(w),L=n(55),S=i(L),D=n(42),T=i(D),I=n(23),k=i(I);a.default.register({"blots/block":c.default,"blots/block/embed":l.BlockEmbed,"blots/break":d.default,"blots/container":m.default,"blots/cursor":f.default,"blots/embed":_.default,"blots/inline":b.default,"blots/scroll":C.default,"blots/text":E.default,"modules/clipboard":S.default,"modules/history":T.default,"modules/keyboard":k.default}),r.default.register(c.default,d.default,f.default,b.default,C.default,E.default),t.default=a.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(e){this.domNode=e,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t=document.createElement("number"==typeof e?this.tagName[e-1]:this.tagName.indexOf(e)>-1?e:this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return i.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},e.prototype.deleteAt=function(e,t){var n=this.isolate(e,t);n.remove()},e.prototype.formatAt=function(e,t,n,o){var r=this.isolate(e,t);if(null!=i.query(n,i.Scope.BLOT)&&o)r.wrap(n,o);else if(null!=i.query(n,i.Scope.ATTRIBUTE)){var s=i.create(this.statics.scope);r.wrap(s),s.format(n,o)}},e.prototype.insertAt=function(e,t,n){var o=null==n?i.create("text",t):i.create(t,n),r=this.split(e);this.parent.insertBefore(o,r)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var n=null;e.children.insertBefore(this,t),null!=t&&(n=t.domNode),(this.domNode.parentNode!=e.domNode||this.domNode.nextSibling!=n)&&e.domNode.insertBefore(this.domNode,n),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var n=this.split(e);return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var n="string"==typeof e?i.create(e,t):e;return n.replace(this),n},e.prototype.split=function(e){return 0===e?this:this.next},e.prototype.update=function(){},e.prototype.wrap=function(e,t){var n="string"==typeof e?i.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},e.blotName="abstract",e}();t.default=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),o=n(32),r=n(33),s=n(1),a=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=i.default.keys(this.domNode),n=o.default.keys(this.domNode),a=r.default.keys(this.domNode);t.concat(n).concat(a).forEach(function(t){var n=s.query(t,s.Scope.ATTRIBUTE);n instanceof i.default&&(e.attributes[n.attrName]=n)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(n){var i=t.attributes[n].value(t.domNode);e.format(n,i)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,n){return t[n]=e.attributes[n].value(e.domNode),t},{})},e}();t.default=a},function(e,t,n){function i(e,t){var n=e.getAttribute("class")||"";return n.split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(this.keyName+"-"+t),!0):!1},t.prototype.remove=function(e){var t=i(e,this.keyName);t.forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=i(e,this.keyName)[0]||"",n=t.slice(this.keyName.length+1);return this.canAdd(e,n)?n:""},t}(r.default);t.default=s},function(e,t,n){function i(e){var t=e.split("-"),n=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+n}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){var t=e.split(":");return t[0].trim()})},t.prototype.add=function(e,t){return this.canAdd(e,t)?(e.style[i(this.keyName)]=t,!0):!1},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(r.default);t.default=s},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){n(this,e),this.quill=t,this.options=i,this.modules={}}return i(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();o.DEFAULTS={modules:{}},o.themes={"default":o},t.default=o},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(0),u=i(c),d=n(7),h=i(d),m="﻿",p=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach(function(e){n.contentNode.appendChild(e)}),n.leftGuard=document.createTextNode(m),n.rightGuard=document.createTextNode(m),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return s(t,e),a(t,[{key:"index",value:function(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"restore",value:function(e){var t=void 0,n=void 0,i=e.data.split(m).join("");if(e===this.leftGuard)if(this.prev instanceof h.default){var o=this.prev.length();this.prev.insertAt(o,i),t={startNode:this.prev.domNode,startOffset:o+i.length}}else n=document.createTextNode(i),this.parent.insertBefore(u.default.create(n),this),t={startNode:n,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof h.default?(this.next.insertAt(0,i),t={startNode:this.next.domNode,startOffset:i.length}):(n=document.createTextNode(i),this.parent.insertBefore(u.default.create(n),this.next),t={startNode:n,startOffset:i.length}));return e.data=m,t}},{key:"update",value:function(e,t){var n=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===n.leftGuard||e.target===n.rightGuard)){var i=n.restore(e.target);i&&(t.range=i)}})}}]),t}(u.default.Embed);t.default=p},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var o=n(0),r=i(o),s={scope:r.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new r.default.Attributor.Attribute("align","align",s),l=new r.default.Attributor.Class("align","ql-align",s),c=new r.default.Attributor.Style("align","text-align",s);t.AlignAttribute=a,t.AlignClass=l,t.AlignStyle=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var o=n(0),r=i(o),s=n(26),a=new r.default.Attributor.Class("background","ql-bg",{scope:r.default.Scope.INLINE}),l=new s.ColorAttributor("background","background-color",{scope:r.default.Scope.INLINE});t.BackgroundClass=a,t.BackgroundStyle=l},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var o=n(0),r=i(o),s={scope:r.default.Scope.BLOCK,whitelist:["rtl"]},a=new r.default.Attributor.Attribute("direction","dir",s),l=new r.default.Attributor.Class("direction","ql-direction",s),c=new r.default.Attributor.Style("direction","direction",s);t.DirectionAttribute=a,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")
}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function f(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(0),u=i(c),d={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},h=new u.default.Attributor.Class("font","ql-font",d),m=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"value",value:function(e){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(u.default.Attributor.Style),p=new m("font","font-family",d);t.FontStyle=p,t.FontClass=h},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var o=n(0),r=i(o),s=new r.default.Attributor.Class("size","ql-size",{scope:r.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new r.default.Attributor.Style("size","font-size",{scope:r.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=s,t.SizeStyle=a},function(e,t,n){e.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},"float":{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),"super":n(103)},strike:n(104),underline:n(105),video:n(106)}},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.ops[e.ops.length-1];return null==t?!1:null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes?Object.keys(t.attributes).some(function(e){return null!=d.default.query(e,d.default.Scope.BLOCK)}):!1}function l(e){var t=e.reduce(function(e,t){return e+=t.delete||0},0),n=e.length()-t;return a(e)&&(n-=1),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(0),d=i(u),h=n(5),m=i(h),p=n(9),f=i(p),g=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(m.default.events.EDITOR_CHANGE,function(e,t,n,o){e!==m.default.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&o!==m.default.sources.USER?i.transform(t):i.record(t,n))}),i.quill.keyboard.addBinding({key:"Z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"Y",shortKey:!0},i.redo.bind(i)),i}return s(t,e),c(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var n=this.stack[e].pop();this.stack[t].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[e],m.default.sources.USER),this.ignoreChange=!1;var i=l(n[e]);this.quill.setSelection(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(t),i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var o=this.stack.undo.pop();n=n.compose(o.undo),e=o.redo.compose(e)}else this.lastRecorded=i;this.stack.undo.push({redo:e,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(f.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=g,t.getLastChangeIndex=l},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;t.forEach(function(t){var i=document.createElement("option");t===n?i.setAttribute("selected","selected"):i.setAttribute("value",t),e.appendChild(i)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function R(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:R(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},d=n(3),h=i(d),m=n(2),p=i(m),f=n(8),g=i(f),_=n(23),v=i(_),b=n(34),y=i(b),C=n(59),w=i(C),E=n(60),L=i(E),S=n(28),D=i(S),T=n(61),I=i(T),k=[!1,"center","right","justify"],x=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],A=[!1,"serif","monospace"],O=["1","2","3",!1],N=["small",!1,"large","huge"],M=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=function a(t){return document.body.contains(e.root)?(null==i.tooltip||i.tooltip.root.contains(t.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),void(null!=i.pickers&&i.pickers.forEach(function(e){e.container.contains(t.target)||e.close()}))):document.body.removeEventListener("click",a)};return e.emitter.listenDOM("click",document.body,s),i}return s(t,e),c(t,[{key:"addModule",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){var n=e.getAttribute("class")||"";n.split(/\s+/).forEach(function(n){if(n.startsWith("ql-")&&(n=n.slice("ql-".length),null!=t[n]))if("direction"===n)e.innerHTML=t[n][""]+t[n].rtl;else if("string"==typeof t[n])e.innerHTML=t[n];else{var i=e.value||"";null!=i&&t[n][i]&&(e.innerHTML=t[n][i])}})})}},{key:"buildPickers",value:function(e,t){var n=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&l(e,k),new L.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var n=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&l(e,x,"background"===n?"#ffffff":"#000000"),new w.default(e,t[n])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?l(e,A):e.classList.contains("ql-header")?l(e,O):e.classList.contains("ql-size")&&l(e,N)),new D.default(e)});var i=function(){n.pickers.forEach(function(e){e.update()})};this.quill.on(g.default.events.EDITOR_CHANGE,i)}}]),t}(y.default);M.DEFAULTS=h.default(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var n=new FileReader;n.onload=function(n){var i=e.quill.getSelection(!0);e.quill.updateContents((new p.default).retain(i.index).delete(i.length).insert({image:n.target.result}),g.default.sources.USER),e.quill.setSelection(i.index+1,g.default.sources.SILENT),t.value=""},n.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var P=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return s(t,e),c(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){v.default.match(t,"enter")?(e.save(),t.preventDefault()):v.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,g.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,g.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=a(e);case"formula":if(!e)break;var n=this.quill.getSelection(!0);if(null!=n){var i=n.index+n.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),e,g.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",g.default.sources.USER),this.quill.setSelection(i+2,g.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(I.default);t.BaseTooltip=P,t.default=M},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,n=this.iterator();t=n();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n,i=this.iterator();n=i();){var o=n.length();if(o>e||t&&e===o&&(null==n.next||0!==n.next.length()))return[n,e];e-=o}return[null,0]},e.prototype.forEach=function(e){for(var t,n=this.iterator();t=n();)e(t)},e.prototype.forEachAt=function(e,t,n){if(!(0>=t))for(var i,o=this.find(e),r=o[0],s=o[1],a=e-s,l=this.iterator(r);(i=l())&&e+t>a;){var c=i.length();e>a?n(i,e-a,Math.min(t,a+c-e)):n(i,0,Math.min(c,e+t-a)),a+=c}},e.prototype.map=function(e){return this.reduce(function(t,n){return t.push(e(n)),t},[])},e.prototype.reduce=function(e,t){for(var n,i=this.iterator();n=i();)t=e(t,n);return t},e}();t.default=n},function(e,t,n){var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=n(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=100,l=function(e){function t(t){var n=e.call(this,t)||this;return n.scroll=n,n.observer=new MutationObserver(function(e){n.update(e)}),n.observer.observe(n.domNode,s),n.attach(),n}return i(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,i,o){this.update(),e.prototype.formatAt.call(this,t,n,i,o)},t.prototype.insertAt=function(t,n,i){this.update(),e.prototype.insertAt.call(this,t,n,i)},t.prototype.optimize=function(t,n){var i=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)t.push(s.pop());for(var l=function(e,t){void 0===t&&(t=!0),null!=e&&e!==i&&null!=e.domNode.parentNode&&(null==e.domNode[r.DATA_KEY].mutations&&(e.domNode[r.DATA_KEY].mutations=[]),t&&l(e.parent))},c=function(e){null!=e.domNode[r.DATA_KEY]&&null!=e.domNode[r.DATA_KEY].mutations&&(e instanceof o.default&&e.children.forEach(c),e.optimize(n))},u=t,d=0;u.length>0;d+=1){if(d>=a)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(function(e){var t=r.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(l(r.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=r.find(e,!1);l(t,!1),t instanceof o.default&&t.children.forEach(function(e){l(e,!1)})})):"attributes"===e.type&&l(t.prev)),l(t))}),this.children.forEach(c),u=[].slice.call(this.observer.takeRecords()),s=u.slice();s.length>0;)t.push(s.pop())}},t.prototype.update=function(t,n){var i=this;void 0===n&&(n={}),t=t||this.observer.takeRecords(),t.map(function(e){var t=r.find(e.target,!0);return null==t?null:null==t.domNode[r.DATA_KEY].mutations?(t.domNode[r.DATA_KEY].mutations=[e],t):(t.domNode[r.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==i&&null!=e.domNode[r.DATA_KEY]&&e.update(e.domNode[r.DATA_KEY].mutations||[],n)}),null!=this.domNode[r.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[r.DATA_KEY].mutations,n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild="block",t.scope=r.Scope.BLOCK_BLOT,t.tagName="DIV",t}(o.default);t.default=l},function(e,t,n){function i(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),s=n(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.formats=function(n){return n.tagName===t.tagName?void 0:e.formats.call(this,n)},t.prototype.format=function(n,i){var o=this;n!==this.statics.blotName||i?e.prototype.format.call(this,n,i):(this.children.forEach(function(e){e instanceof r.default||(e=e.wrap(t.blotName,!0)),o.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,n,i,o){if(null!=this.formats()[i]||s.query(i,s.Scope.ATTRIBUTE)){var r=this.isolate(t,n);r.format(i,o)}else e.prototype.formatAt.call(this,t,n,i,o)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var o=this.formats();if(0===Object.keys(o).length)return this.unwrap();var r=this.next;r instanceof t&&r.prev===this&&i(o,r.formats())&&(r.moveChildren(this),r.remove())},t.blotName="inline",t.scope=s.Scope.INLINE_BLOT,t.tagName="SPAN",t}(r.default);t.default=a},function(e,t,n){var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),r=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.formats=function(n){var i=r.query(t.blotName).tagName;return n.tagName===i?void 0:e.formats.call(this,n)},t.prototype.format=function(n,i){null!=r.query(n,r.Scope.BLOCK)&&(n!==this.statics.blotName||i?e.prototype.format.call(this,n,i):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,n,i,o){null!=r.query(i,r.Scope.BLOCK)?this.format(i,o):e.prototype.formatAt.call(this,t,n,i,o)},t.prototype.insertAt=function(t,n,i){if(null==i||null!=r.query(n,r.Scope.INLINE))e.prototype.insertAt.call(this,t,n,i);else{var o=this.split(t),s=r.create(n,i);o.parent.insertBefore(s,o)}},t.prototype.update=function(t,n){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,n)},t.blotName="block",t.scope=r.Scope.BLOCK_BLOT,t.tagName="P",t}(o.default);t.default=s},function(e,t,n){var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.formats=function(){return void 0},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,i,o){0===t&&n===this.length()?this.format(i,o):e.prototype.formatAt.call(this,t,n,i,o)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(o.default);t.default=r},function(e,t,n){var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),r=n(1),s=function(e){function t(t){var n=e.call(this,t)||this;return n.text=n.statics.value(n.domNode),n}return i(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,i){null==i?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,i)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=r.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e){var t=this;e.some(function(e){return"characterData"===e.type&&e.target===t.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=r.Scope.INLINE_BLOT,t}(o.default);t.default=s},function(){var e=document.createElement("div");if(e.classList.toggle("test-class",!1),e.classList.contains("test-class")){var t=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,n){return arguments.length>1&&!this.contains(e)==!n?n:t.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function n(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n,t=Object(this),i=t.length>>>0,o=arguments[1],r=0;i>r;r++)if(n=t[r],e.call(o,n,r,t))return n;return void 0}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e){function t(e,t,i){if(e==t)return e?[[f,e]]:[];(0>i||e.length<i)&&(i=null);var o=r(e,t),a=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=s(e,t);var c=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var h=n(e,t);return a&&h.unshift([f,a]),c&&h.push([f,c]),l(h),null!=i&&(h=u(h,i)),h=d(h)}function n(e,n){var o;if(!e)return[[p,n]];if(!n)return[[m,e]];var r=e.length>n.length?e:n,s=e.length>n.length?n:e,l=r.indexOf(s);if(-1!=l)return o=[[p,r.substring(0,l)],[f,s],[p,r.substring(l+s.length)]],e.length>n.length&&(o[0][0]=o[2][0]=m),o;if(1==s.length)return[[m,e],[p,n]];var c=a(e,n);if(c){var u=c[0],d=c[1],h=c[2],g=c[3],_=c[4],v=t(u,h),b=t(d,g);return v.concat([[f,_]],b)}return i(e,n)}function i(e,t){for(var n=e.length,i=t.length,r=Math.ceil((n+i)/2),s=r,a=2*r,l=new Array(a),c=new Array(a),u=0;a>u;u++)l[u]=-1,c[u]=-1;l[s+1]=0,c[s+1]=0;for(var d=n-i,h=d%2!=0,f=0,g=0,_=0,v=0,b=0;r>b;b++){for(var y=-b+f;b-g>=y;y+=2){var C,w=s+y;C=y==-b||y!=b&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1;for(var E=C-y;n>C&&i>E&&e.charAt(C)==t.charAt(E);)C++,E++;if(l[w]=C,C>n)g+=2;else if(E>i)f+=2;else if(h){var L=s+d-y;if(L>=0&&a>L&&-1!=c[L]){var S=n-c[L];if(C>=S)return o(e,t,C,E)}}}for(var D=-b+_;b-v>=D;D+=2){var S,L=s+D;S=D==-b||D!=b&&c[L-1]<c[L+1]?c[L+1]:c[L-1]+1;for(var T=S-D;n>S&&i>T&&e.charAt(n-S-1)==t.charAt(i-T-1);)S++,T++;if(c[L]=S,S>n)v+=2;else if(T>i)_+=2;else if(!h){var w=s+d-D;if(w>=0&&a>w&&-1!=l[w]){var C=l[w],E=s+C-w;if(S=n-S,C>=S)return o(e,t,C,E)}}}}return[[m,e],[p,t]]}function o(e,n,i,o){var r=e.substring(0,i),s=n.substring(0,o),a=e.substring(i),l=n.substring(o),c=t(r,s),u=t(a,l);return c.concat(u)}function r(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;o>n;)e.substring(r,o)==t.substring(r,o)?(n=o,r=n):i=o,o=Math.floor((i-n)/2+n);return o}function s(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;o>n;)e.substring(e.length-o,e.length-r)==t.substring(t.length-o,t.length-r)?(n=o,r=n):i=o,o=Math.floor((i-n)/2+n);return o}function a(e,t){function n(e,t,n){for(var i,o,a,l,c=e.substring(n,n+Math.floor(e.length/4)),u=-1,d="";-1!=(u=t.indexOf(c,u+1));){var h=r(e.substring(n),t.substring(u)),m=s(e.substring(0,n),t.substring(0,u));d.length<m+h&&(d=t.substring(u-m,u)+t.substring(u,u+h),i=e.substring(0,n-m),o=e.substring(n+h),a=t.substring(0,u-m),l=t.substring(u+h))}return 2*d.length>=e.length?[i,o,a,l,d]:null}var i=e.length>t.length?e:t,o=e.length>t.length?t:e;if(i.length<4||2*o.length<i.length)return null;var a,l=n(i,o,Math.ceil(i.length/4)),c=n(i,o,Math.ceil(i.length/2));if(!l&&!c)return null;a=c?l&&l[4].length>c[4].length?l:c:l;var u,d,h,m;e.length>t.length?(u=a[0],d=a[1],h=a[2],m=a[3]):(h=a[0],m=a[1],u=a[2],d=a[3]);var p=a[4];return[u,d,h,m,p]}function l(e){e.push([f,""]);for(var t,n=0,i=0,o=0,a="",c="";n<e.length;)switch(e[n][0]){case p:o++,c+=e[n][1],n++;break;case m:i++,a+=e[n][1],n++;break;case f:i+o>1?(0!==i&&0!==o&&(t=r(c,a),0!==t&&(n-i-o>0&&e[n-i-o-1][0]==f?e[n-i-o-1][1]+=c.substring(0,t):(e.splice(0,0,[f,c.substring(0,t)]),n++),c=c.substring(t),a=a.substring(t)),t=s(c,a),0!==t&&(e[n][1]=c.substring(c.length-t)+e[n][1],c=c.substring(0,c.length-t),a=a.substring(0,a.length-t))),0===i?e.splice(n-o,i+o,[p,c]):0===o?e.splice(n-i,i+o,[m,a]):e.splice(n-i-o,i+o,[m,a],[p,c]),n=n-i-o+(i?1:0)+(o?1:0)+1):0!==n&&e[n-1][0]==f?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=0,i=0,a="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]==f&&e[n+1][0]==f&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&l(e)}function c(e,t){if(0===t)return[f,e];for(var n=0,i=0;i<e.length;i++){var o=e[i];if(o[0]===m||o[0]===f){var r=n+o[1].length;if(t===r)return[i+1,e];if(r>t){e=e.slice();var s=t-n,a=[o[0],o[1].slice(0,s)],l=[o[0],o[1].slice(s)];return e.splice(i,1,a,l),[i+1,e]}n=r}}throw new Error("cursor_pos is out of bounds!")}function u(e,t){var n=c(e,t),i=n[1],o=n[0],r=i[o],s=i[o+1];if(null==r)return e;if(r[0]!==f)return e;if(null!=s&&r[1]+s[1]===s[1]+r[1])return i.splice(o,2,s,r),h(i,o,2);if(null!=s&&0===s[1].indexOf(r[1])){i.splice(o,2,[s[0],r[1]],[0,r[1]]);var a=s[1].slice(r[1].length);return a.length>0&&i.splice(o+2,0,[s[0],a]),h(i,o,3)}return e}function d(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},i=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},o=2;o<e.length;o+=1)e[o-2][0]===f&&i(e[o-2][1])&&e[o-1][0]===m&&n(e[o-1][1])&&e[o][0]===p&&n(e[o][1])&&(t=!0,e[o-1][1]=e[o-2][1].slice(-1)+e[o-1][1],e[o][1]=e[o-2][1].slice(-1)+e[o][1],e[o-2][1]=e[o-2][1].slice(0,-1));if(!t)return e;for(var r=[],o=0;o<e.length;o+=1)e[o][1].length>0&&r.push(e[o]);return r}function h(e,t,n){for(var i=t+n-1;i>=0&&i>=t-1;i--)if(i+1<e.length){var o=e[i],r=e[i+1];o[0]===r[1]&&e.splice(i,2,[o[0],o[1]+r[1]])}return e}var m=-1,p=1,f=0,g=t;g.INSERT=p,g.DELETE=m,g.EQUAL=f,e.exports=g},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=o?n:i,t.supported=n,t.unsupported=i},function(e){function t(){}function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){this._events=new t,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,r="~";Object.create&&(t.prototype=Object.create(null),(new t).__proto__||(r=!1)),i.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},i.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,a=new Array(s);s>o;o++)a[o]=i[o].fn;return a},i.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(c=1,l=new Array(d-1);d>c;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,m=u.length;for(c=0;m>c;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);d>h;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},i.prototype.on=function(e,t,i){var o=new n(t,i||this),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):(this._events[s]=o,this._eventsCount++),this},i.prototype.once=function(e,t,i){var o=new n(t,i||this,!0),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):(this._events[s]=o,this._eventsCount++),this},i.prototype.removeListener=function(e,n,i,o){var s=r?r+e:e;if(!this._events[s])return this;if(!n)return 0===--this._eventsCount?this._events=new t:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==n||o&&!a.once||i&&a.context!==i||(0===--this._eventsCount?this._events=new t:delete this._events[s]);
else{for(var l=0,c=[],u=a.length;u>l;l++)(a[l].fn!==n||o&&!a[l].once||i&&a[l].context!==i)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new t:delete this._events[s]}return this},i.prototype.removeAllListeners=function(e){var n;return e?(n=r?r+e:e,this._events[n]&&(0===--this._eventsCount?this._events=new t:delete this._events[n])):(this._events=new t,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=r,i.EventEmitter=i,"undefined"!=typeof e&&(e.exports=i)},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return"object"===("undefined"==typeof t?"undefined":E(t))?Object.keys(t).reduce(function(e,n){return l(e,n,t[n])},e):e.reduce(function(e,i){return i.attributes&&i.attributes[t]?e.push(i):e.insert(i.insert,T.default({},o({},t,n),i.attributes))},new k.default)}function c(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function u(e,t){for(var n="",i=e.ops.length-1;i>=0&&n.length<t.length;--i){var o=e.ops[i];if("string"!=typeof o.insert)break;n=o.insert+n}return n.slice(-1*t.length)===t}function d(e){if(0===e.childNodes.length)return!1;var t=c(e);return["block","list-item"].indexOf(t.display)>-1}function h(e,t,n){return e.nodeType===e.TEXT_NODE?n.reduce(function(t,n){return n(e,t)},new k.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(i,o){var r=h(o,t,n);return o.nodeType===e.ELEMENT_NODE&&(r=t.reduce(function(e,t){return t(o,e)},r),r=(o[Y]||[]).reduce(function(e,t){return t(o,e)},r)),i.concat(r)},new k.default):new k.default}function m(e,t,n){return l(n,e,!0)}function p(e,t){var n=A.default.Attributor.Attribute.keys(e),i=A.default.Attributor.Class.keys(e),o=A.default.Attributor.Style.keys(e),r={};return n.concat(i).concat(o).forEach(function(t){var n=A.default.query(t,A.default.Scope.ATTRIBUTE);null!=n&&(r[n.attrName]=n.value(e),r[n.attrName])||(n=X[t],null==n||n.attrName!==t&&n.keyName!==t||(r[n.attrName]=n.value(e)||void 0),n=Z[t],null==n||n.attrName!==t&&n.keyName!==t||(n=Z[t],r[n.attrName]=n.value(e)||void 0))}),Object.keys(r).length>0&&(t=l(t,r)),t}function f(e,t){var n=A.default.query(e);if(null==n)return t;if(n.prototype instanceof A.default.Embed){var i={},o=n.value(e);null!=o&&(i[n.blotName]=o,t=(new k.default).insert(i,n.formats(e)))}else"function"==typeof n.formats&&(t=l(t,n.blotName,n.formats(e)));return t}function g(e,t){return u(t,"\n")||t.insert("\n"),t}function _(){return new k.default}function v(e,t){var n=A.default.query(e);if(null==n||"list-item"!==n.blotName||!u(t,"\n"))return t;for(var i=-1,o=e.parentNode;!o.classList.contains("ql-clipboard");)"list"===(A.default.query(o)||{}).blotName&&(i+=1),o=o.parentNode;return 0>=i?t:t.compose((new k.default).retain(t.length()-1).retain(1,{indent:i}))}function b(e,t){return u(t,"\n")||(d(e)||t.length()>0&&e.nextSibling&&d(e.nextSibling))&&t.insert("\n"),t}function y(e,t){if(d(e)&&null!=e.nextElementSibling&&!u(t,"\n\n")){var n=e.offsetHeight+parseFloat(c(e).marginTop)+parseFloat(c(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*n&&t.insert("\n")}return t}function C(e,t){var n={},i=e.style||{};return i.fontStyle&&"italic"===c(e).fontStyle&&(n.italic=!0),i.fontWeight&&(c(e).fontWeight.startsWith("bold")||parseInt(c(e).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=l(t,n)),parseFloat(i.textIndent||0)>0&&(t=(new k.default).insert("	").concat(t)),t}function w(e,t){var n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!c(e.parentNode).whiteSpace.startsWith("pre")){var i=function(e,t){return t=t.replace(/[^\u00a0]/g,""),t.length<1&&e?" ":t};n=n.replace(/\r\n/g," ").replace(/\n/g," "),n=n.replace(/\s\s+/g,i.bind(i,!0)),(null==e.previousSibling&&d(e.parentNode)||null!=e.previousSibling&&d(e.previousSibling))&&(n=n.replace(/^\s+/,i.bind(i,!1))),(null==e.nextSibling&&d(e.parentNode)||null!=e.nextSibling&&d(e.nextSibling))&&(n=n.replace(/\s+$/,i.bind(i,!1)))}return t.insert(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),D=n(3),T=i(D),I=n(2),k=i(I),x=n(0),A=i(x),O=n(5),N=i(O),M=n(10),P=i(M),R=n(9),F=i(R),B=n(36),z=n(37),V=n(13),H=i(V),U=n(26),W=n(38),j=n(39),G=n(40),q=P.default("quill:clipboard"),Y="__ql-matcher",K=[[Node.TEXT_NODE,w],[Node.TEXT_NODE,b],["br",g],[Node.ELEMENT_NODE,b],[Node.ELEMENT_NODE,f],[Node.ELEMENT_NODE,y],[Node.ELEMENT_NODE,p],[Node.ELEMENT_NODE,C],["li",v],["b",m.bind(m,"bold")],["i",m.bind(m,"italic")],["style",_]],X=[B.AlignAttribute,W.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),Z=[B.AlignStyle,z.BackgroundStyle,U.ColorStyle,W.DirectionStyle,j.FontStyle,G.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),J=function(e){function t(e,n){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],K.concat(i.options.matchers).forEach(function(e){var t=L(e,2),o=t[0],r=t[1];(n.matchVisual||r!==y)&&i.addMatcher(o,r)}),i}return a(t,e),S(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[H.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new k.default).insert(n,o({},H.default.blotName,t[H.default.blotName]))}var i=this.prepareMatching(),r=L(i,2),s=r[0],a=r[1],l=h(this.container,s,a);return u(l,"\n")&&null==l.ops[l.ops.length-1].attributes&&(l=l.compose((new k.default).retain(l.length()-1).delete(1))),q.log("convert",this.container.innerHTML,l),this.container.innerHTML="",l}},{key:"dangerouslyPasteHTML",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,N.default.sources.SILENT);else{var i=this.convert(t);this.quill.updateContents((new k.default).retain(e).concat(i),n),this.quill.setSelection(e+i.length(),N.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),i=(new k.default).retain(n.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(N.default.sources.SILENT),setTimeout(function(){i=i.concat(t.convert()).delete(n.length),t.quill.updateContents(i,N.default.sources.USER),t.quill.setSelection(i.length()-n.length,N.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=o,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],n=[];return this.matchers.forEach(function(i){var o=L(i,2),r=o[0],s=o[1];switch(r){case Node.TEXT_NODE:n.push(s);break;case Node.ELEMENT_NODE:t.push(s);break;default:[].forEach.call(e.container.querySelectorAll(r),function(e){e[Y]=e[Y]||[],e[Y].push(s)})}}),[t,n]}}]),t}(F.default);J.DEFAULTS={matchers:[],matchVisual:!0},t.default=J,t.matchAttributor=p,t.matchBlot=f,t.matchNewline=b,t.matchSpacing=y,t.matchText=w},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(6),u=i(c),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"optimize",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(u.default);d.blotName="bold",d.tagName=["STRONG","B"],t.default=d},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+t),null!=n&&(i.value=n),e.appendChild(i)}function c(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var n=document.createElement("span");n.classList.add("ql-formats"),t.forEach(function(e){if("string"==typeof e)l(n,e);else{var t=Object.keys(e)[0],i=e[t];Array.isArray(i)?u(n,t,i):l(n,t,i)}}),e.appendChild(n)})}function u(e,t,n){var i=document.createElement("select");i.classList.add("ql-"+t),n.forEach(function(e){var t=document.createElement("option");e!==!1?t.setAttribute("value",e):t.setAttribute("selected","selected"),i.appendChild(t)}),e.appendChild(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var d=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=n(2),p=i(m),f=n(0),g=i(f),_=n(5),v=i(_),b=n(10),y=i(b),C=n(9),w=i(C),E=y.default("quill:toolbar"),L=function(e){function t(e,n){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(Array.isArray(i.options.container)){var o=document.createElement("div");c(o,i.options.container),e.container.parentNode.insertBefore(o,e.container),i.container=o}else i.container="string"==typeof i.options.container?document.querySelector(i.options.container):i.options.container;if(!(i.container instanceof HTMLElement)){var a;return a=E.error("Container required for toolbar",i.options),s(i,a)}return i.container.classList.add("ql-toolbar"),i.controls=[],i.handlers={},Object.keys(i.options.handlers).forEach(function(e){i.addHandler(e,i.options.handlers[e])}),[].forEach.call(i.container.querySelectorAll("button, select"),function(e){i.attach(e)}),i.quill.on(v.default.events.EDITOR_CHANGE,function(e,t){e===v.default.events.SELECTION_CHANGE&&i.update(t)}),i.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){var e=i.quill.selection.getRange(),t=d(e,1),n=t[0];i.update(n)}),i}return a(t,e),h(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,n=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(n){if(n=n.slice("ql-".length),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void E.warn("ignoring attaching to disabled format",n,e);if(null==g.default.query(n))return void E.warn("ignoring attaching to nonexistent format",n,e)}var i="SELECT"===e.tagName?"change":"click";e.addEventListener(i,function(i){var r=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var s=e.options[e.selectedIndex];r=s.hasAttribute("selected")?!1:s.value||!1}else r=e.classList.contains("ql-active")?!1:e.value||!e.hasAttribute("value"),i.preventDefault();t.quill.focus();var a=t.quill.selection.getRange(),l=d(a,1),c=l[0];if(null!=t.handlers[n])t.handlers[n].call(t,r);else if(g.default.query(n).prototype instanceof g.default.Embed){if(r=prompt("Enter "+n),!r)return;t.quill.updateContents((new p.default).retain(c.index).delete(c.length).insert(o({},n,r)),v.default.sources.USER)}else t.quill.format(n,r,v.default.sources.USER);t.update(c)}),this.controls.push([n,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(n){var i=d(n,2),o=i[0],r=i[1];if("SELECT"===r.tagName){var s=void 0;if(null==e)s=null;else if(null==t[o])s=r.querySelector("option[selected]");else if(!Array.isArray(t[o])){var a=t[o];"string"==typeof a&&(a=a.replace(/\"/g,'\\"')),s=r.querySelector('option[value="'+a+'"]')}null==s?(r.value="",r.selectedIndex=-1):s.selected=!0}else if(null==e)r.classList.remove("ql-active");else if(r.hasAttribute("value")){var l=t[o]===r.getAttribute("value")||null!=t[o]&&t[o].toString()===r.getAttribute("value")||null==t[o]&&!r.getAttribute("value");r.classList.toggle("ql-active",l)}else r.classList.toggle("ql-active",null!=t[o])})}}]),t}(w.default);L.DEFAULTS={},L.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var n=this.quill.getFormat();Object.keys(n).forEach(function(t){null!=g.default.query(t,g.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,v.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",v.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,v.default.sources.USER),this.quill.format("direction",e,v.default.sources.USER)},indent:function S(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t),S=parseInt(n.indent||0);if("+1"===e||"-1"===e){var i="+1"===e?1:-1;"rtl"===n.direction&&(i*=-1),this.quill.format("indent",S+i,v.default.sources.USER)}},link:function(e){e===!0&&(e=prompt("Enter link URL:")),this.quill.format("link",e,v.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t);"check"===e?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,v.default.sources.USER):this.quill.format("list","unchecked",v.default.sources.USER):this.quill.format("list",e,v.default.sources.USER)}}},t.default=L,t.addControls=c},function(e){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(28),u=i(c),d=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.label.innerHTML=n,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),i}return s(t,e),a(t,[{key:"buildItem",value:function(e){var n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return n.style.backgroundColor=e.getAttribute("value")||"",n}},{key:"selectItem",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n);var i=this.label.querySelector(".ql-color-label"),o=e?e.getAttribute("data-value")||"":"";i&&("line"===i.tagName?i.style.stroke=o:i.style.fill=o)}}]),t}(u.default);t.default=d},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(28),u=i(c),d=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=n[e.getAttribute("data-value")||""]}),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return s(t,e),a(t,[{key:"selectItem",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(u.default);t.default=d},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,i){var o=this;n(this,e),this.quill=t,this.boundsContainer=i||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){o.root.style.marginTop=-1*o.quill.root.scrollTop+"px"}),this.hide()}return i(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),r=0;if(o.right>i.right&&(r=i.right-o.right,this.root.style.left=t+r+"px"),o.left<i.left&&(r=i.left-o.left,this.root.style.left=t+r+"px"),o.bottom>i.bottom){var s=o.bottom-o.top,a=e.bottom-e.top+s;this.root.style.top=n-a+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=o},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function L(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:L(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),d=i(u),h=n(8),m=i(h),p=n(43),f=i(p),g=n(27),_=i(g),v=n(15),b=n(41),y=i(b),C=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],w=function(e){function t(e,n){o(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=C);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.quill.container.classList.add("ql-snow"),i}return s(t,e),c(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),y.default),this.tooltip=new E(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,n){e.handlers.link.call(e,!n.format.link)})}}]),t}(f.default);w.DEFAULTS=d.default(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n);var i=this.quill.theme.tooltip;i.edit("link",n)}else this.quill.format("link",!1)}}}}});var E=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.preview=i.root.querySelector("a.ql-preview"),i}return s(t,e),c(t,[{key:"listen",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var n=e.linkRange;e.restoreFocus(),e.quill.formatText(n,"link",!1,m.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function(t,n,i){if(null!=t){if(0===t.length&&i===m.default.sources.USER){var o=e.quill.scroll.descendant(_.default,t.index),r=a(o,2),s=r[0],l=r[1];if(null!=s){e.linkRange=new v.Range(t.index-l,s.length());var c=_.default.formats(s.domNode);return e.preview.textContent=c,e.preview.setAttribute("href",c),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(p.BaseTooltip);E.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=w},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(29),r=i(o),s=n(36),a=n(38),l=n(64),c=n(65),u=i(c),d=n(66),h=i(d),m=n(67),p=i(m),f=n(37),g=n(26),_=n(39),v=n(40),b=n(56),y=i(b),C=n(68),w=i(C),E=n(27),L=i(E),S=n(69),D=i(S),T=n(70),I=i(T),k=n(71),x=i(k),A=n(72),O=i(A),N=n(73),M=i(N),P=n(13),R=i(P),F=n(74),B=i(F),z=n(75),V=i(z),H=n(57),U=i(H),W=n(41),j=i(W),G=n(28),q=i(G),Y=n(59),K=i(Y),X=n(60),Z=i(X),J=n(61),$=i(J),Q=n(108),et=i(Q),tt=n(62),nt=i(tt);r.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":f.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":_.FontClass,"attributors/class/size":v.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":f.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":_.FontStyle,"attributors/style/size":v.SizeStyle},!0),r.default.register({"formats/align":s.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":l.IndentClass,"formats/background":f.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":_.FontClass,"formats/size":v.SizeClass,"formats/blockquote":u.default,"formats/code-block":R.default,"formats/header":h.default,"formats/list":p.default,"formats/bold":y.default,"formats/code":P.Code,"formats/italic":w.default,"formats/link":L.default,"formats/script":D.default,"formats/strike":I.default,"formats/underline":x.default,"formats/image":O.default,"formats/video":M.default,"formats/list/item":m.ListItem,"modules/formula":B.default,"modules/syntax":V.default,"modules/toolbar":U.default,"themes/bubble":et.default,"themes/snow":nt.default,"ui/icons":j.default,"ui/picker":q.default,"ui/icon-picker":Z.default,"ui/color-picker":K.default,"ui/tooltip":$.default},!0),t.default=r.default},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function m(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(0),u=i(c),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"add",value:function(e,n){if("+1"===n||"-1"===n){var i=this.value(e)||0;n="+1"===n?i+1:i-1}return 0===n?(this.remove(e),!0):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n)}},{key:"canAdd",value:function(e,n){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,n)||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(n))}},{key:"value",value:function(e){return parseInt(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(u.default.Attributor.Class),h=new d("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=h},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),l=i(a),c=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(l.default);c.blotName="blockquote",c.tagName="blockquote",t.default=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(4),c=i(l),u=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(c.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],t.default=u},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function v(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:v(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},u=n(0),d=i(u),h=n(4),m=i(h),p=n(25),f=i(p),g=function(e){function t(){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"format",value:function(e,n){e!==_.blotName||n?c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n):this.replaceWith(d.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,n){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,n),this):(this.parent.unwrap(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,n))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:c(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(m.default);g.blotName="list-item",g.tagName="LI";var _=function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=function(t){if(t.target.parentNode===e){var i=n.statics.formats(e),o=d.default.find(t.target);"checked"===i?o.format("list","unchecked"):"unchecked"===i&&o.format("list","checked")}};return e.addEventListener("touchstart",i),e.addEventListener("mousedown",i),n}return a(t,e),l(t,null,[{key:"create",value:function(e){var n="ordered"===e?"OL":"UL",i=c(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,n);return("checked"===e||"unchecked"===e)&&i.setAttribute("data-checked","checked"===e),i}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),l(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return o({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(e,n){if(e instanceof g)c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n);else{var i=null==n?this.length():n.offset(this),o=this.split(i);o.parent.insertBefore(e,o)}}},{key:"optimize",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var n=d.default.create(this.statics.defaultChild);e.moveChildren(n),this.appendChild(n)}c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(f.default);_.blotName="list",_.scope=d.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[g],t.ListItem=g,t.default=_},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(56),l=i(a),c=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(l.default);c.blotName="italic",c.tagName=["EM","I"],t.default=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(6),u=i(c),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):l(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(u.default);d.blotName="script",d.tagName=["SUB","SUP"],t.default=d},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),l=i(a),c=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(l.default);c.blotName="strike",c.tagName="S",t.default=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),l=i(a),c=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(l.default);c.blotName="underline",c.tagName="U",t.default=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(0),u=i(c),d=n(27),h=["alt","height","width"],m=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"format",value:function(e,n){h.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=l(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return h.reduce(function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return d.sanitize(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(u.default.Embed);m.blotName="image",m.tagName="IMG",t.default=m},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function p(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(4),u=n(27),d=i(u),h=["height","width"],m=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"format",value:function(e,n){h.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=l(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return h.reduce(function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t},{})}},{key:"sanitize",value:function(e){return d.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(c.BlockEmbed);m.blotName="video",m.className="ql-video",m.tagName="IFRAME",t.default=m},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function _(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:_(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(35),u=i(c),d=n(5),h=i(d),m=n(9),p=i(m),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,null,[{key:"create",value:function(e){var n=l(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(u.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var g=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return s(t,e),a(t,null,[{key:"register",value:function(){h.default.register(f,!0)}}]),t}(p.default);t.FormulaBlot=f,t.default=g},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},c=n(0),u=i(c),d=n(5),h=i(d),m=n(9),p=i(m),f=n(13),g=i(f),_=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(g.default);_.className="ql-syntax";var v=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),b=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var s=null;return i.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(s),s=setTimeout(function(){i.highlight(),s=null},i.options.interval)}),i.highlight(),i}return s(t,e),a(t,null,[{key:"register",value:function(){h.default.register(v,!0),h.default.register(_,!0)}}]),a(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(h.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(h.default.sources.SILENT),null!=t&&this.quill.setSelection(t,h.default.sources.SILENT)}}}]),t}(p.default);b.DEFAULTS={highlight:function(){return null==window.hljs?null:function(e){var t=window.hljs.highlightAuto(e);return t.value}}(),interval:1e3},t.CodeBlock=_,t.CodeToken=v,t.default=b},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'
},function(e){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var a=function C(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:C(o,t,n)}if("value"in i)return i.value;var r=i.get;return void 0===r?void 0:r.call(n)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(3),u=i(c),d=n(8),h=i(d),m=n(43),p=i(m),f=n(15),g=n(41),_=i(g),v=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],b=function(e){function t(e,n){o(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=v);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.quill.container.classList.add("ql-bubble"),i}return s(t,e),l(t,[{key:"extendToolbar",value:function(e){this.tooltip=new y(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),_.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),_.default)}}]),t}(p.default);b.DEFAULTS=u.default(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var y=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.quill.on(h.default.events.EDITOR_CHANGE,function(e,t,n,o){if(e===h.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&o===h.default.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width=i.root.offsetWidth+"px";var r=i.quill.getLines(t.index,t.length);if(1===r.length)i.position(i.quill.getBounds(t));else{var s=r[r.length-1],a=i.quill.getIndex(s),l=Math.min(s.length()-1,t.index+t.length-a),c=i.quill.getBounds(new f.Range(a,l));i.position(c)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()}),i}return s(t,e),l(t,[{key:"listen",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var n=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",0===n?n:void(i.style.marginLeft=-1*n-i.offsetWidth/2+"px")}}]),t}(m.BaseTooltip);y.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=y,t.default=b},function(e,t,n){e.exports=n(63)}])["default"]}),define("tao/ospm/ui/widgets/RichTextEditor",["tao/ospm/core/DomFactory","tao/lib/quill/quill","tao/ospm/ui/widgets/Widget","tao/ospm/core/UIToolkit"],function(e,t,n,i){function o(t){t.dom=e.createContainer("ospm_richtexteditor"),t.wrapperDom=e.createContainer("ospm_widget_content_wrapper"),t.quillContainerDom=e.createContainer("ospm_quill_wrapper"),t.dom.appendChild(t.wrapperDom)}function r(e){s(e)}function s(e){var t,n;null!==e.textEditor&&(t=e.dom.querySelector(".ql-toolbar"),n=e.dom.querySelector(".ql-container"),e.readOnly?(e.textEditor.disable(),t&&(t.style.display="none"),n&&(n.style.borderTop="1px solid #ccc")):(e.textEditor.enable(),t&&(t.style.display="block"),n&&(n.style.borderTop="0px")))}function a(){var e=[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]},{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],[{script:"sub"},{script:"super"}],["link","image"],["clean"]];return e}var l;return l=n.subclass({stepData:null,wrapperDom:null,quillContainerDom:null,textEditor:null,readOnly:!1,constructor:function(e,n){e=e||{},this.stepData=n,o(this),this.textEditor=new t(this.wrapperDom,{theme:"snow",modules:{toolbar:a()},placeholder:"Placeholder Text"}),this.textEditor.keyboard.addBinding({key:"backspace",handler:function(e){0===e.length&&0!==e.index?this.quill.deleteText(e.index-1,1,t.sources.USER):this.quill.deleteText(e,t.sources.USER)}}),this.initializeFields(e)},initializeFields:function(e){l.parent.initializeFields.call(this,e),e.defaultText&&this.getFormattedEditorContext(0,e.defaultText),e.minTextAreaHeight&&this.setMinTextAreaHeight(e.minTextAreaHeight),this.isEnabled()&&this.setEnabled(this.enabled)},setMinTextAreaHeight:function(e){var t=this.dom.querySelector(".ql-editor");switch(e){case"default":t.classList.remove("ospm_min_textarea_height_small"),t.classList.remove("ospm_min_textarea_height_medium"),t.classList.remove("ospm_min_textarea_height_large");break;case"small":t.classList.add("ospm_min_textarea_height_small"),t.classList.remove("ospm_min_textarea_height_medium"),t.classList.remove("ospm_min_textarea_height_large");break;case"medium":t.classList.remove("ospm_min_textarea_height_small"),t.classList.add("ospm_min_textarea_height_medium"),t.classList.remove("ospm_min_textarea_height_large");break;case"large":t.classList.remove("ospm_min_textarea_height_small"),t.classList.remove("ospm_min_textarea_height_medium"),t.classList.add("ospm_min_textarea_height_large");break;default:throw new OSPMError("Ungültige Angabe von height: Nur small,medium, large, default sind erlaubt",{value:e})}this.minHeight=e,i.updateElement(this)},getClassName:function(){return"RichTextEditor"},setReadOnly:function(e){this.readOnly=!!e,i.updateElement(this)},setEnabled:function(e){e===!1&&(this.dom.classList.add("ospm_disabled"),this.readOnly=!0),i.updateElement(this)},getReadOnly:function(){return this.readOnly},updateDisplay:function(){r(this)},setTopMargin:function(e){i.isNBF()?l.parent.setTopMargin.call(this,e):n.setTopPadding(this,e)},setBottomMargin:function(e){i.isNBF()?l.parent.setBottomMargin.call(this,e):n.setBottomPadding(this,e)},getEditorContext:function(){return this.textEditor.getContents()},setEditorContext:function(e){this.textEditor.setContents(e,t.sources.API)},getEditorText:function(){return this.textEditor.getText()},setEditorText:function(e){this.textEditor.setText(e)},getHTMLFromEditorContext:function(){return this.textEditor.root.innerHTML},getFormattedEditorContext:function(e,n){return this.textEditor.clipboard.dangerouslyPasteHTML(e,n,t.sources.API)}})}),define("tao/ospm/ui/widgets/Rating",["tao/ospm/common/OSPMError","tao/ospm/ui/widgets/Widget","tao/ospm/ui/widgets/mixins/Mixins","tao/ospm/core/DomFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/common/Constants","tao/ospm/ui/IconFactory","tao/ospm/ui/widgets/Image","tao/ospm/common/Toolkit"],function(e,t,n,i,o,r,s,a){function l(e){var t,n;for(t=i.createContainer("ospm_rating"),n=0;n<e.count;n++)t.appendChild(e.icons[n]),t.appendChild(e.iconsSelected[n]);return t}function c(e){o.addActionListener(e.dom,function(t){t.target===e.linkDom&&e.notifyClickListeners()})}var u;return u=t.subclass({STAR:{name:s.ICONS.STAR_FILLED_M,size:s.ICON_SIZE.MEDIUM_20,color:s.ICON_COLOR.LIGHT_GREY_2},STAR_SELECTED:{name:s.ICONS.STAR_FILLED_M,size:s.ICON_SIZE.MEDIUM_20,color:s.ICON_COLOR.BRAND},count:null,icon:null,icons:[],iconSelected:null,iconsSelected:[],stepData:null,linkDom:null,selectedCount:-1,constructor:function(e,t){e=e||{},this.stepData=t,this.initializeFields(e),this.dom=l(this),u.parent.initializeFields.call(this,e),c(this)},initializeFields:function(e){var t,n,i=5,r=-1;for(n=function(e,t){var n;for(n=0;t>=n;n++)o.toggleClassName(e.icons[n],"ospm_hidden",!0),o.toggleClassName(e.iconsSelected[n],"ospm_hidden",!1);for(n=t+1;n<e.count;n++)o.toggleClassName(e.icons[n],"ospm_hidden",!1),o.toggleClassName(e.iconsSelected[n],"ospm_hidden",!0);e.selectedCount=t+1,e.notifyClickListeners({selectedCount:e.selectedCount})},this.count=e.count?e.count:i,this.icon=e.icon?e.icon:this.STAR,this.icon.size=this.icon.size?this.icon.size:s.ICON_SIZE.MEDIUM_20,this.iconSelected=e.iconSelected?e.iconSelected:this.STAR_SELECTED,this.iconSelected.size=this.iconSelected.size?this.iconSelected.size:s.ICON_SIZE.MEDIUM_20,this.icons=new Array(this.count),this.iconsSelected=new Array(this.count),this.setClickListener(e.clickListener),t=0;t<this.count;t++)this.icons[t]=a.createIcon(this.icon),o.addActionListener(this.icons[t],function(e,t){return function(){e.isEnabled()&&n(e,t)}}(this,t),!1,!0),this.iconsSelected[t]=a.createIcon(this.iconSelected),o.addActionListener(this.iconsSelected[t],function(e,t){return function(){e.isEnabled()&&n(e,t)}}(this,t),!1,!0);e.initialSelectedCount?n(this,e.initialSelectedCount-1):n(this,r)},getSelectedCount:function(){return this.selectedCount},updateDisplay:function(){u.parent.updateDisplay.call(this)},getClassName:function(){return"Rating"}}),u.proto(n.ClickMixin,n.WrapMixin),u}),define("tao/ospm/ui/widgets/WidgetFactory",["tao/lib/stapes","tao/ospm/main/LocalStepData","tao/ospm/main/NeoSession","tao/ospm/ui/widgets/Button","tao/ospm/ui/widgets/Checkbox","tao/ospm/ui/widgets/RadioButton","tao/ospm/ui/widgets/SelectionRow","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Slider","tao/ospm/ui/widgets/TextInput","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/TextTable","tao/ospm/ui/widgets/list/SubList","tao/ospm/ui/widgets/Chart","tao/ospm/ui/widgets/TwoBarChart","tao/ospm/ui/widgets/ChartFactory","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/SubHeader","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/SummingFooter","tao/ospm/ui/widgets/search/SearchInput","tao/ospm/ui/widgets/search/AdvancedSearchInput","tao/ospm/ui/widgets/search/HistoryList","tao/ospm/core/DomFactory","tao/ospm/ui/widgets/search/ResultRow","tao/ospm/ui/widgets/search/ResultsList","tao/ospm/ui/widgets/InfoText","tao/ospm/ui/widgets/ButtonRow","tao/ospm/ui/widgets/Notification","tao/ospm/ui/widgets/TextareaInput","tao/ospm/ui/widgets/Table","tao/ospm/ui/widgets/tableV2/TableV2","tao/ospm/ui/widgets/tableV2/TextColumn","tao/ospm/ui/widgets/tableV2/CheckboxColumn","tao/ospm/ui/widgets/tableV2/RadiobuttonColumn","tao/ospm/ui/widgets/tableV2/IconColumn","tao/ospm/ui/widgets/tableV2/TextIconColumn","tao/ospm/ui/widgets/TwoColumnRow","tao/ospm/ui/widgets/Dropdown","tao/ospm/ui/widgets/ProgressBar","tao/ospm/ui/widgets/YesOrNo","tao/ospm/ui/widgets/Image","tao/ospm/ui/widgets/Carousel","tao/ospm/ui/widgets/ImageButton","tao/ospm/ui/widgets/ImageButtonRow","tao/ospm/ui/widgets/Headline","tao/ospm/ui/widgets/Questionnaire","tao/ospm/ui/widgets/CircularChart","tao/ospm/ui/widgets/VerticalBarChart","tao/ospm/ui/widgets/Description","tao/ospm/ui/widgets/list/DescriptionList","tao/ospm/ui/widgets/Summary","tao/ospm/ui/widgets/TableInput","tao/ospm/ui/widgets/ProgressInformation","tao/ospm/ui/widgets/HorizontalBar","tao/ospm/ui/widgets/FlexibleImageHeader","tao/ospm/ui/widgets/HorizontalLine","tao/ospm/ui/widgets/Spacer","tao/ospm/ui/SummingUpFactory","tao/ospm/ui/widgets/FormattedTextEditor","tao/ospm/ui/widgets/InputPair","tao/ospm/ui/widgets/NavigationBar","tao/ospm/ui/widgets/RichTextEditor","tao/ospm/ui/widgets/Rating"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I,k,x,A,O,N,M,P,R,F,B,z,V,H,U,W,j,G,q,Y,K,X,Z,J,$,Q,et,tt,nt,it,ot,rt,st,at,lt,ct){var ut;return ut=e.subclass({stepData:null,constructor:function(e){this.stepData=e},createButton:function(e){return new i(e,this.stepData)},createStartButton:function(e){return new i(e,this.stepData,!0)},createButtonRow:function(e){return new T(e,this.stepData)},createNavigationBar:function(e){return new at(e)},createCheckbox:function(e){return new o(e,this.stepData)},createRadioButton:function(e){return new r(e,this.stepData)},createSelectionRow:function(e){return new s(e,this.stepData)},createList:function(e){return new a(e,this.stepData)},createSlider:function(e){return new l(e,this.stepData)},createTextInput:function(e){return new c(e,this.stepData)},createTableV2:function(e){return new A(e,this.stepData)},createTableV2ColumnText:function(e){return new O(e)},createTableV2ColumnCheckbox:function(e){return new N(e)},createTableV2ColumnRadiobutton:function(e){return new M(e)},createTableV2ColumnIcon:function(e){return new P(e)},createTableV2ColumnTextIcon:function(e){return new R(e)},createAutoCompleteInput:function(e){return new c(e,this.stepData)},createTextareaInput:function(e){return new k(e,this.stepData)},createText:function(e){return new u(e,this.stepData)},createTextTable:function(e){return new d(e,this.stepData)},createInfoText:function(e){return new D(e,this.stepData)},createSubList:function(e){return new h(e,this.stepData)},createTwoBarChart:function(e){return new p(e,this.stepData)},createChart:function(e){return new m(e,this.stepData)},createTwoBarChartList:function(e){return f.createTwoBarChartList(e,this)},createHeader:function(e){return new g(e,this.stepData)},createSubHeader:function(e){return new _(e,this.stepData)},createFooter:function(e){return new v(e,this.stepData)},createSummingFooter:function(e){return new b(e,this.stepData)},createSearchInput:function(e){return new y(e,this.stepData)},createAdvancedSearchInput:function(e){return new C(e,this.stepData)},createResultRow:function(e){return new L(e,this.stepData)},createResultsList:function(e){return new S(e,this.stepData)},createRichTextEditor:function(e){return new lt(e,this.stepData)},createHistoryList:function(e){return new w(e,this.stepData)},createTwoColumnRow:function(e){return new F(e,this.stepData)},createNotification:function(e){return new I(e,this.stepData)},createTable:function(e){return new x(e,this.stepData)},createDropdown:function(e){return new B(e,this.stepData)},createYesOrNo:function(e){return new V(e,this.stepData)},createImage:function(e){return new H(e,this.stepData)},createCarousel:function(e){return new U(e,this.stepData)},createImageButton:function(e){return new W(e,this.stepData)},createImageButtonRow:function(e){return new j(e,this.stepData)},createHeadline:function(e){return new G(e,this.stepData)},createQuestionnaire:function(e){return new q(e,this.stepData)},createCircularChart:function(e){return new Y(e,this.stepData)},createVerticalBarChart:function(e){return new K(e,this.stepData)},createHint:function(e){var t;return e.leftIcon||(e.leftIcon="warning"),e.style||(e.style="highlight"),e.important!==!1&&(e.important=!0),t=new D(e,this.stepData),t.setAsHint(!0),t},createHorizontalLine:function(e){return new nt(e,this.stepData)},createDescription:function(e){return new X(e,this.stepData)},createDescriptionList:function(e){return new Z(e,this.stepData)},createSummary:function(e){return new J(e,this.stepData)},createTableInput:function(e){return new $(e,this.stepData)},createHorizontalBar:function(e){return new et(e,this.stepData)},createProgressInformation:function(e){return new Q(e,this.stepData)},createProcessProgressInformation:function(){var e=n.getProgressInformation();return e?new Q(e,this.stepData):null},createFlexibleImageHeader:function(e){return new tt(e,this.stepData)},createSpacer:function(e){return new it(e,this.stepData)},createSummingUp:function(e){return this.stepData.checkForCurrentStep("createSummingUp"),ot.createSummingUp(e,this.stepData)},createAndSetSummingUp:function(e,t){this.stepData.checkForCurrentStep("createAndSetSummingUp"),ot.createAndSetSummingUp(e,t,this.stepData)},createFormattedTextEditor:function(e){return new rt(e,this.stepData)},createInputPair:function(e){return new st(e,this.stepData)},createRating:function(e){return new ct(e,this.stepData)},getClassName:function(){return"WidgetFactory"}}),ut.DEFAULT=new ut(t.DEFAULT),ut}),define("tao/ospm/ui/UIFactory",["tao/lib/stapes","tao/ospm/common/Config","tao/ospm/common/OSPMError","tao/ospm/common/Toolkit","tao/ospm/main/LocalStepData","tao/ospm/ui/layouts/Layout","tao/ospm/ui/layouts/LayoutFactory","tao/ospm/ui/widgets/WidgetFactory","tao/ospm/ui/SelectionGroup","tao/ospm/core/UIToolkit","tao/ospm/ui/UIUtils","tao/ospm/ui/widgets/list/List","tao/ospm/main/WorkflowDialogStack","tao/ospm/ui/layouts/OneColumnLayout"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m){var p;return p={createUIFunctions:function(e,t,n){var i=new o(e,n);t.layouts=new s(i),t.widgets=new a(i),t.utils=u,t.getSelectionGroup=function(e){return o.getSelectionGroup(i,e)}},setLayout:function(e,t){var n,o=h.getDepth();e&&(c.removeAllChildren(e),t instanceof r?(e.appendChild(t.dom),c.updateElementsNow(),i.executeLater(function(){e.firstChild===t.dom&&(t.rendered=!0,t.afterRenderLayout&&t.afterRenderLayout(),c.callAfterRenderLayout(t),c.updateElement(t),c.updateElementsNow())})):t instanceof d&&o>0&&(n=new m,n.dom.classList.add("ospm_dialogview_listlayout"),n.addElement(t),e.appendChild(n.dom),c.updateElementsNow()))}}}),define("tao/ospm/core/LogoutTimerActions",["tao/ospm/core/OSPMPage","tao/ospm/core/LogoutController"],function(e,t){var n;return n={logoutAction:function(){t.logout()}}}),define("tao/ospm/ui/views/OnlineHelpPresenter",["tao/lib/stapes","tao/ospm/core/OnlineHelpService","tao/ospm/ui/views/DialogView","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/InfoText","tao/ospm/ui/widgets/list/List","tao/ospm/ui/layouts/OneColumnLayout","tao/ospm/ui/views/AppView","tao/ospm/common/Constants","tao/ospm/common/Toolkit"],function(e,t,n,i,o,r,s,a,l,c,u){function d(e){t.isAdminMode()||e.processHelpUrl||e.pageHelpUrl?l.showHelpButton():l.hideHelpButton()}function h(){var e,t=new s;e=n.createOkDialog({}),t.addElement(new r({label:"Keine Hilfe vorhanden"})),e.setContent(t),b=!0,e.show()}function m(e){var n,i,r,a;b||(i=new s,e.processHelpId&&(r=new o({label:"Prozesshilfe",rightIcon:"callout",clickListener:function(){u.isStringProvided(e.processHelpUrl)?(f(n),p(v,e.processHelpUrl)):h()}}),t.isAdminMode()&&r.setSubLabel(e.processHelpId),i.addElement(r)),e.pageHelpId&&(a=new o({label:"Seitenhilfe",rightIcon:"callout",clickListener:function(){u.isStringProvided(e.pageHelpUrl)?(f(n),p(v,e.pageHelpUrl)):h()}}),t.isAdminMode()&&a.setSubLabel(e.pageHelpId),i.addElement(a)),n=g(i,"Hilfe"),b=!0,n.show())}function p(e,t){t&&document.OSPMEnvironment.openWindow(t,e,"width=720, height=560, left=0, top=0, scrollbars=yes, resizable=yes")}function f(e){e&&e.hide(),b=!1}function g(e,t){var o,r,s,l;return o=function(){f(r)},l=new i({label:t,rightIcons:[{icon:c.ICONS.CANCEL_S,action:o}]}),s=new a,s.addElement(e),r=n.createDialog({cancelOnOutsideClick:!0,outsideClickListener:o}),r.setHeader(l),r.setContent(s),r}var _,v="OSPlus_neo-Online-Hilfe",b=!1;return new(_=e.subclass({processHelpId:null,processHelpUrl:null,pageHelpId:null,pageHelpUrl:null,constructor:function(){t.registerPresenter(this)},showHelp:function(){return t.isAdminMode()||this.processHelpUrl&&this.pageHelpUrl?void m(this):void(this.processHelpUrl?p(v,this.processHelpUrl):this.pageHelpUrl?p(v,this.pageHelpUrl):d(this))},updateProcessHelpUrl:function(e,t){this.processHelpUrl=e,this.processHelpId=t,d(this)},updatePageHelp:function(e,t){this.pageHelpId=t,this.pageHelpUrl=e,d(this)}}))}),define("tao/ospm/ui/views/ClientReportView",["tao/lib/stapes","tao/ospm/ui/widgets/Notification","tao/ospm/ui/widgets/Headline","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/list/List","tao/ospm/ui/views/DialogView"],function(e,t,n,i,o,r){function s(e,i){var s,l;return i=i||{},l=new o,l.addElement(new n({label:i.errorId,bottomBorder:!1})),l.addElement(new t({label:c,subLabel:u})),s=r.createDialog({cancelOnOutsideClick:!1}),s.setContent(l),s.fullScreenContainerDom.classList.add("ospm_clientreportview"),s.setFooter(a(e,i)),s}function a(e,t){var n,o;return o={label:d,action:function(){var n=t.hideAction||null;e.dialog.hide(),n&&n()}},n=new i({centerButton:o})}var l,c="Der Fehlerbericht wurde erstellt.",u="Bitte senden Sie die Nummer per Ticket zur Fehlerprüfung an Ihren Servicegeber.",d="OK";return l=e.subclass({dialog:null,constructor:function(e){e=e||{},this.dialog=s(this,e)},show:function(){this.dialog.show()},getClassName:function(){return"ClientReportView"}})}),define("tao/ospm/main/ClientReport",["tao/ospm/common/Config","tao/ospm/common/Toolkit","tao/ospm/common/DateFormatter","tao/ospm/core/OSPMLogStorage","tao/ospm/core/ServerCommunication","tao/ospm/ui/views/ClientReportView","tao/ospm/core/ServerStage","tao/ospm/core/ErrorDump"],function(e,t,n,i,o,r,s,a){var l={downloadReport:function(l,c){function u(){return t.stringify(m,1e5,e.RESTRICTED_FIELDS,!0)}var d,h,m,p=n.convertToServerTimeString(new Date),f="OSPlus_neo-Report-"+p+".json";m={time:p},l&&t.isObject(l)&&(m.data=t.deepCopy(l),h=l.rootCauseApp),c&&t.isObject(c)&&(m.snapshot=c),a.addInformation(m),m.logs=i.getLogsForCrash(),d=document.OSPMEnvironment.createErrorId(h),!window.isCordova&&s.isStageOrSystemIntern()?(m.errorId=d,t.saveTextToDownload(u(),f)):(o.executeRequest("ospm.errorReport",{errorId:d,report:JSON.parse(u())},function(){}),new r({errorId:d}).show())},createSnapshotObject:function(){var e={};return e.stacktrace=t.getStackTrace(new Error,3),e.logs=t.deepCopy(i.getLogsForCrash()),e}};return l}),define("tao/ospm/ui/UIExternHelper",["tao/ospm/common/Toolkit","tao/ospm/common/OSPMError"],function(e,t){var n={openWindow:function(n,i,o){if(e.isNullOrUndefined(n))throw new t("Url muss gesetzt werden.");if(e.isSet(i)){if(-1!==i.indexOf(" "))throw new t("Der Name des Fensters darf kein Leerzeichen enthalten.");if(0===i.indexOf("_")&&"_blank"!==i)throw new t("Der Name des Fensters darf nicht mit _ beginnen.")}else i=window.isCordova?"_top":"_blank";return document.OSPMEnvironment.openWindow(n,i,o)}};return n}),define("tao/ospm/ui/views/InputDialogView",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/common/OSPMError","tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Notification","tao/ospm/ui/layouts/Layout","tao/ospm/ui/layouts/TabDeck","tao/ospm/ui/layouts/OneColumnLayout","tao/ospm/ui/views/DialogView","tao/ospm/ui/widgets/mixins/Mixins"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p){function f(e){var t;e.header&&(e.dataChanged=e.isInputChanged(),t=b(e),(0===e.header.rightIcons.length||e.header.rightIcons[0]!==t)&&e.header.setRightIcon(t))}function g(e){return n.isArray(e)&&0!==e.length?e:null}function _(e){e.restoreButtonConfig={icon:"zuruecksetzen_24",action:e.restoreValues.bind(e,!0)}}function v(e){e.closeButtonConfig={icon:t.ICONS.CANCEL_S,action:e.closeButton.action||e.hide.bind(e)}}function b(e){return e.isMandatory()?null:e.closeButtonConfig}function y(e,t){if(e===t)return!0;if(e.content)for(;t;t=t.parent)if(t.parent===e.content)return!0;return!1}function C(e){return e.content&&(e.content instanceof l||e.content instanceof h)?e.content instanceof l?w(e.content):e.content instanceof h?E(e.content):!1:!1}function w(e){var t;for(t=0;t<e.getElements().length;t++)if(M.indexOf(e.getElements()[t].getClassName())>0)return!0;return!1}function E(e){var t,n,i=!1;for(t=0;t<e.getElements().length;t++)n=e.getElements()[t],"function"==typeof n.getElements&&(i=i||w(n));return i}function L(e,t){e.footer||(N.parent.getFooter.call(e)||k(e),e.footer=N.parent.getFooter.call(e)),t?C(e)||N.parent.setFooter.call(e,null):N.parent.getFooter.call(e)||N.parent.setFooter(e,e.footer)}function S(e){var t=N.parent.getFooter.call(e);if(!t&&e.footerHidden){if(!e.footer)return;t=e.footer}e.buttonList&&T(e),e.buttons?(e.buttonList=D(e),t.setHidden(!0)):t.setHidden(!1)}function D(e){var n,i,o=new l;for(n=0;n<e.buttons.length;n++)i={},i.label=e.buttons[n].label||null,i.clickListener=e.buttons[n].action||null,i.leftIcon=e.buttons[n].icon||null,i.rightIcon={name:t.ICONS.NEXT_S,size:t.ICON_SIZE.SMALL_20},o.addElement(new a(i));return e.content instanceof u?(e.buttonListLayout||(e.buttonListLayout=new h,e.content.addSubLayout(e.buttonListLayout)),e.buttonListLayout.addElement(o),e.contentLayout.dom.classList.add("ospm_dialog_has_buttonfooter"),e.buttonListLayout.dom.classList.add("ospm_dialog_buttonfooter")):e.content instanceof l&&(o.setGrouped(!0),e.listLayout.addElement(o)),o}function T(e){var t;e.content instanceof u?(t=e.buttonListLayout,e.contentLayout.dom.classList.remove("ospm_dialog_has_buttonfooter")):e.content instanceof l&&(t=e.listLayout),t.removeElement(e.buttonList),e.buttonList=null}function I(e){var n={},i=b(e);i&&(n={rightIcons:[i]}),!e.title&&O(e)?e.content.dom.classList.add("ospm_list_negative_topmargin"):(e.content&&e.content.dom.classList.remove("ospm_list_negative_topmargin"),n.label=e.title,n.subLabel=e.subTitle),"function"==typeof e.deleteButton.action&&(n.leftIcons=[{icon:{name:t.ICONS.DELETE_S,size:t.ICON_SIZE.SMALL_30},action:e.deleteButton.action}]),N.parent.setHeader.call(e,new r(n))}function k(e){var n;return o.isNBF()?(n={elements:[]},e.isMandatory()||n.elements.push({label:e.cancelButton.label,clickListener:e.cancelButton.action,enabled:e.cancelButton.enabled}),n.elements.push({label:e.applyButton.label,clickListener:e.applyButton.action,enabled:e.applyButton.enabled,style:t.BUTTON_STYLE.PRIMARY}),void N.parent.setFooter.call(e,document.TaoOSPM.ui.widgets.createButtonRow(n))):(n=e.isMandatory()?{centerButton:{label:e.applyButton.label,action:e.applyButton.action,enabled:e.applyButton.enabled,type:t.TYPES.DEFAULT}}:{leftButton:{label:e.cancelButton.label,action:e.cancelButton.action,enabled:e.cancelButton.enabled},rightButton:{label:e.applyButton.label,action:e.applyButton.action,enabled:e.applyButton.enabled}},void N.parent.setFooter.call(e,new s(n)))}function x(e,t){e.title=t.title||null,e.subTitle=t.subTitle||null,e.buttons=t.buttons||null,e.footerHidden=t.footerHidden||!1,e.mandatory=Boolean(t.mandatory),e.setApplyButton(t.applyButton||{}),e.setCancelButton(t.cancelButton||{}),e.setDeleteButton(t.deleteButton||{}),e.setCloseButton(t.closeButton||{}),t.restoreListener&&e.setRestoreListener(t.restoreListener),I(e),k(e),t.content&&e.setContent(t.content),e.setButtons(t.buttons||null),e.maximizeHeight=t.maximizeHeight||!1,e.maximizeWidth=t.maximizeWidth||!1}function A(e){e.dataChanged=!1,I(e)}function O(e){var t;return e.content&&e.content instanceof l&&e.content.elementCount()?(t=e.content.getElement(0),t instanceof c):!1}var N,M=["TextInput","TextareaInput","Radiobutton","Checkbox","Dropdown","Slider"],P=p.ContainerInputStorageMixin;return N=m.subclass({title:null,subTitle:null,dataChanged:!1,applyButton:null,cancelButton:null,deleteButton:null,closeButton:null,closeButtonConfig:null,restoreButtonConfig:null,buttons:null,buttonList:null,contentLayout:null,buttonListLayout:null,footerHidden:null,footer:null,mandatory:!1,maximizeHeight:!1,maximizeWidth:!1,constructor:function(e,t){e=e||{},this.applyButton={},this.cancelButton={},this.deleteButton={action:null},this.closeButton={action:null},this.buttons={},v(this),_(this),N.parent.constructor.call(this,{hideListener:e.hideListener||null},t),this.fullScreenContainerDom.classList.add("ospm_inputdialogview"),x(this,e)},addNewValues:function(){this.storeValues(!0)},setContent:function(e){var t;e instanceof h?(this.contentLayout=e,g(this.buttons)?(t=new h,t.addSubLayout(this.contentLayout),N.parent.setContent.call(this,t)):N.parent.setContent.call(this,e)):N.parent.setContent.call(this,e),this.rendered&&(this.storeValues(),A(this)),this.footerHidden&&L(this,!0)},setButtons:function(e){if(this.buttons=g(e),this.buttons){if(this.content instanceof d)throw new i("Die Verwendung von Buttons als Footer-Alternative ist in einem TabDeck nicht möglich.");if(this.content instanceof h&&this.content.isLastElementSticky())throw new i('Es sind keine Buttons erlaubt, solange ein Element des Layouts fixiert ist ("Sticky"-Modus).')
}S(this)},setHeader:function(){throw new i("Das Setzen eines eigenen Headers ist für einen InputDialog nicht erlaubt")},getHeader:function(){throw new i("Das Abfragen des Headers ist für einen InputDialog nicht erlaubt")},updateDialog:function(){I(this)},setFooter:function(){throw new i("Das Setzen eines eigenen Footers ist für einen InputDialog nicht erlaubt")},getFooter:function(){throw new i("Das Abfragen des Footers ist für einen InputDialog nicht erlaubt")},show:function(){N.parent.show.call(this),this.storeValues()},setFooterHidden:function(e){this.footerHidden=Boolean(e),L(this,this.footerHidden)},isFooterHidden:function(){return this.footerHidden},setApplyButton:function(e){this.applyButton={label:e.label||"Übernehmen",action:e.action||function(){this.hide()}.bind(this),enabled:n.isSet(e.enabled)?e.enabled:!0},k(this)},setApplyButtonEnabled:function(e){this.applyButton.enabled=e,k(this)},setCancelButton:function(e){this.cancelButton={label:e.label||"Abbrechen",action:e.action||function(){this.hide()}.bind(this),enabled:n.isSet(e.enabled)?e.enabled:!0},k(this)},setCancelButtonEnabled:function(e){this.cancelButton.enabled=e,k(this)},setDeleteButton:function(e){this.deleteButton.action=e.action,I(this)},setCloseButton:function(e){this.closeButton.action=e.action,v(this),I(this)},setMandatory:function(e){this.mandatory=Boolean(e),I(this),k(this)},isMandatory:function(){return this.mandatory},notifyInternalValueChange:function(){f(this)},getClassName:function(){return"InputDialogView"},setMaximizeHeight:function(e){N.parent.setMaximizeHeight.call(this,e)},setMaximizeWidth:function(e){N.parent.setMaximizeWidth.call(this,e)}}),N.proto(p.RestoreMixin,p.ContainerInputStorageMixin,{storeValues:function(e){this.content&&(this.content.storeValues(e),A(this))},restoreValues:function(e){P.setInputChanged.call(this,!1),this.content&&this.content.restoreValues(e),A(this),this.notifyRestoreListeners()},clearStoredValues:function(){P.setInputChanged.call(this,!1),this.content&&this.content.clearStoredValues(),A(this)},onChildValueChange:function(e){this.header&&y(this,e)&&f(this)},getChangedWidgets:function(){return this.content?this.content.getChangedWidgets():[]}}),N}),define("tao/ospm/ui/UIScrollBarHelper",["tao/ospm/ui/layouts/Layout","tao/ospm/ui/widgets/Widget","tao/ospm/common/OSPMError","tao/ospm/ui/views/DialogView"],function(e,t,n,i){return{scrollTo:function(o,r,s){var a,l;if("number"==typeof r)l=o.TaoOSPM.ui.getLayout();else{if("string"==typeof r&&(r=o.TaoOSPM.ui.elementWithId(r)),!(r instanceof t))throw new n("Ungültiger Wert für Parameter widget",{widget:r});for(a=r.parent;a;a=a.parent)a instanceof e?l=a:a instanceof i&&!l&&(l=a.listLayout)}l&&l.scrollTo(r,s)}}}),define("tao/ospm/ui/UIErrorDialogHelper",["tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/common/Toolkit","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/Header","tao/ospm/ui/views/DialogView","tao/ospm/main/ClientReport","tao/ospm/ui/SidebarInfo","tao/ospm/ui/widgets/InfoText","tao/ospm/core/ServerStage","tao/ospm/core/UIToolkit"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e){return e.type!==t.DIALOG_ERROR_TYPE.ABLEGEN||l.hasVorgangAblegen()?!1:!0}function m(e,n,i){var r,s;h(e)||(r=e.text||"",0===r.length&&(e.type===t.DIALOG_ERROR_TYPE.BEENDEN?r="Beenden":e.type===t.DIALOG_ERROR_TYPE.ABLEGEN?r="Vorgang merken":e.type===t.DIALOG_ERROR_TYPE.KONTAKTIEREN?r="Einen Mitarbeiter kontaktieren":e.type===t.DIALOG_ERROR_TYPE.FEHLERBERICHT&&(r="Fehlerbericht erstellen")),s=new o({label:r,clickListener:p(e,i)}),s.setLeftIcon(C[e.type]),s.setRightIcon("callout"),n.addElement(s))}function p(e,n){var i;return i=e.type===t.DIALOG_ERROR_TYPE.FEHLERBERICHT?function(){a.downloadReport(n.reportData,n.reportSnapshot)}:e.type===t.DIALOG_ERROR_TYPE.ABLEGEN?function(){f(n),l.hasVorgangAblegen()&&l.startVorgangAblegen()}:function(){g(e,n)}}function f(e){e.view&&e.view.hide()}function g(e,t){f(t),"function"==typeof e.callback&&n.callSafely("Fehler-Dialog-Callback zu Typ "+e.type,e.callback,e.type)}function _(e){var n;for(n=0;n<e.length;n++)if(e[n].type===t.DIALOG_ERROR_TYPE.FEHLERBERICHT)return!0;return!1}function v(n){var i,o,r,s,a;for(r=[],a={},i=0;i<n.length;i++)o=n[i],o.type!==t.DIALOG_ERROR_TYPE.WEITER&&o.type!==t.DIALOG_ERROR_TYPE.ZURUECK&&a[o.type]||(a[o.type]=!0,o.type===t.DIALOG_ERROR_TYPE.FEHLERBERICHT?e.IF||r.unshift(o):o.type===t.DIALOG_ERROR_TYPE.BEENDEN?s=o:o.type===t.DIALOG_ERROR_TYPE.KONTAKTIEREN?e.IF&&r.push(o):r.push(o));return s&&r.push(s),r}function b(e,t,n){var l,c,u,h,p,f,g,b,C,w;if(f=!0,g=0,C={view:null},e=e||{},h=e.title||"",0===h.length&&(h="Es ist ein Fehler aufgetreten"),u=e.text||"",0===u.length&&(u="Es ist ein Fehler auf Seiten der Anwendung aufgetreten. Damit Ihre bisherigen Eingaben nicht verloren gehen, wählen Sie bitte aus, wie Sie fortfahren möchten."),p=e.rows||[],p=v(p),_(p)&&(e.reportData&&(C.reportData=e.reportData),C.reportSnapshot=a.createSnapshotObject()),w=t&&e.details,c=new i,u&&c.addElement(new o({label:u,labelColor:"light",bottomBorder:w?!0:!1})),w&&y(c,e.details),p)for(l=0;l<p.length;l++)m(p[l],c,C),g++;return g>0&&(f=!1),b=s.createDialog({cancelOnOutsideClick:f},n),C.view=b,b.setHeader(new r({label:h,bottomBorder:!1})),b.setContent(c),b.fullScreenContainerDom.classList.add("ospm_dialogview_error"),d.isNBF()&&e.titleAlignmentLeft&&b.fullScreenContainerDom.classList.add("title_alignment_left"),b.show(),b}function y(e,n){var i,r;n&&(i=new o({label:"Fehlerdetails anzeigen",minHeight:"large",clickListener:function(e){r.isHidden()?(r.setHidden(!1),e.setRightIcon({name:t.ICONS.UP_S,color:t.ICON_COLOR.LIGHT_GREY_3})):(r.setHidden(!0),e.setRightIcon({name:t.ICONS.DOWN_S,color:t.ICON_COLOR.LIGHT_GREY_3}))},rightIcon:{name:t.ICONS.DOWN_S,color:t.ICON_COLOR.LIGHT_GREY_3}}),r=new c({label:n,showIcon:!1,hidden:!0}),i.dom.classList.add("ospm_error_dialog_details_title"),r.dom.classList.add("ospm_error_dialog_details_content"),e.addElement(i),e.addElement(r))}var C;return C={},C[t.DIALOG_ERROR_TYPE.BEENDEN]=t.ICONS.CANCEL_CIRCLE_M,C[t.DIALOG_ERROR_TYPE.ABLEGEN]={name:t.ICONS.SAVE_M,color:t.ICON_COLOR.BRAND},C[t.DIALOG_ERROR_TYPE.FEHLERBERICHT]={name:t.ICONS.WARNING_M,color:t.ICON_COLOR.WARNING_RED},C[t.DIALOG_ERROR_TYPE.KONTAKTIEREN]={name:t.ICONS.EMAIL_M,color:t.ICON_COLOR.BRAND},C[t.DIALOG_ERROR_TYPE.WEITER]={name:t.ICONS.NEXT_ARROW_CIRCLE_M,color:t.ICON_COLOR.BRAND},C[t.DIALOG_ERROR_TYPE.ZURUECK]={name:t.ICONS.BACK_ARROW_CIRCLE_M,color:t.ICON_COLOR.BRAND},{showErrorDialog:function(e,t){return b(e,u.isStageOrSystemIntern(),t)}}}),define("tao/ospm/core/UpAndDownloadService",["tao/ospm/core/UIToolkit","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/common/Config","tao/ospm/common/Constants","tao/ospm/core/BusyView"],function(e,t,n,i,o,r){function s(e){var t=!1,i=[],o=[],r=null;return n.isStringProvided(e)&&(r=e.trim(),r&&(t=!0,e.split(",").forEach(function(e){var n=e.trim();n.startsWith(".")?n.length>1&&(i.push(n.toLowerCase()),o.push(n.toUpperCase().substring(1))):t=!1}))),{accept:r,check:t,ext:i,extInfo:o}}function a(e){return"Bitte wählen Sie eine Datei mit folgendem Dateityp aus: "+e.extInfo.join(", ")+"."}function l(e,t){var n;return e.check&&t?(n=t.toLowerCase(),e.ext.some(function(e){return n.endsWith(e)})):!0}function c(e){document.TaoOSPM.ui.dialogs.showTextDialog({icon:{name:o.ICONS.WARNING_M,color:o.ICON_COLOR.WARNING_RED},title:"Der Dateityp ist unzulässig",text:e,okButton:{label:"OK",action:function(){}}})}var u,d;return u=new t("OSPM","UnDService"),d={filePicker:function(t,i,o,d){function h(e){u.debug("UpAndDownloadService abgeschlossen: finished: %o, response: %o",g,e),g||(g=!0,0===e.returncode?t&&n.callSafely("Success-Callback von UpAndDownloadService",t,e):i&&n.callSafely("Error-Callback von UpAndDownloadService",i,e)),p&&r.stopBusyView(p),m&&document.body.removeChild(m)}var m,p,f,g=!1;m=document.createElement("input"),m.type="file",f=s(o),f.accept&&(m.accept=f.accept),m.style.display="none",m.id="fileDialog",m.onchange=function(){0===m.value.length?h({returncode:200,fehlergrund:"Keine Datei zum Hochladen ausgewählt"}):l(f,m.files[0].name)?h({returncode:0,file:m.files[0]}):(h({returncode:150,fehlergrund:"Der Dateityp ist unzulässig"}),c(d||a(f)))},document.body.appendChild(m),e.isFF()||e.isPortalBrowser()?m.click():n.executeLater(m.click.bind(m))},undUpload:function(e,t,n){var i,o,r=new XMLHttpRequest;e=e||{},o=e.url,i=new FormData,i.append("file",e.file),"function"!=typeof t&&(t=function(){}),"function"!=typeof n&&(n=function(){}),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status||0===r.status)try{t(r)}catch(e){n({responseStatus:r.status,responseText:r.responseText})}else n({responseStatus:r.status,responseText:null})},r.withCredentials=!0,r.open("POST",o,!0),r.send(i)}}}),define("tao/ospm/bilderpool/BilderpoolServerCommunication",["tao/ospm/core/ServerCommunication","tao/ospm/core/BilderpoolConstants"],function(e,t){var n,i="ospm.getBilderpoolMotive",o="ospm.addBilderpoolAliasZuordnung",r="ospm.deleteBilderpoolAliasZuordnung";return n={readMotivs:function(n){var o={};o[t.KEY_PAGING_SIZE]="2000",e.executeRequest(i,o,function(e,i){n(e[t.STORAGE_DATA],i)})},addAliasAssignment:function(n,i){var r={};r[t.KEY_ALIAS]=n,e.executeRequest(o,r,function(e,o){var s,a=!1,l=[];if(o)for(s=0;s<o.length;s++)o[s].msg.indexOf("JBA01150E004")>-1?(l.push({code:8,msg:"Das gewählte Motiv kann im vorgesehenen Zeitraum nicht eingesetzt werden. Bitte wählen Sie ein anderes Motiv oder passen Sie den Zeitraum an in dem das Motiv zugeordnet werden soll.",title:"Eingabevalidierung",id:"JBA01150E004"}),a=!0):o[s].code>=4&&(l.push(o[s]),a=o[s].code>=8);a||l.push({code:2,msg:"Aliaszuordnung für "+r[t.KEY_ALIAS][t.KEY_ALIAS_FULLNAME]+" erfolgreich gespeichert",title:"Statusmeldung"}),i(n,l)})},deleteAliasAssignment:function(n,i,o){var s={};s[t.KEY_ALIAS]={},s[t.KEY_ALIAS][t.KEY_ALIAS_FULLNAME]=n.app+"/"+n.name,s[t.KEY_ALIAS][t.KEY_GUELTIG_AM]=i,e.executeRequest(r,s,function(e,t){o(t)})}}}),define("tao/ospm/bilderpool/ui/BilderpoolTexte",[],function(){var e;return e={ActionAbbrechen:"Abbrechen",ActionBestaetigen:"Bestätigen",ActionZuordnungAendern:"Aliaszuordnung ändern",ActionZuordnungLoeschen:"Bild zurücksetzen",ActionZurueck:"Zurück",ActionWeiter:"Weiter",ActionBereitstellen:"Bildmotiv bereitstellen",ActionAliaszuordnungErstellen:"Aliaszuordnung erstellen",HeadlineSicherheitsmeldung:"Sicherheitsmeldung",HeadlineEingabevalidierung:"Eingabevalidierung",HeadlineTechnischerFehler:"Technischer Fehler",HeadlineZuordnen:"Aliaszuordnung erstellen",HeadlineMotivAuswaehlen:"Bildmotiv auswählen",HeadlineZuordnungAendern:"Aliaszuordnung ändern",HeadlineBestehendeAliaszuordnungen:"Bestehende Zuordnungen",HeadlineAliasBearbeiten:"Alias bearbeiten",HeadlineBestaetigungAliasZuordnungAnpassung:"Überschneidung der Verwendungszeiträume",HeadlineStandardzuordnung:"Standardzuordnung",HeadlineLeeresSuchergenbis:"Keine Ergebnisse gefunden",LabelMotivname:"Bildmotivname",LabelBildbeschreibung:"Beschreibung",LabelEinsetzbarVon:"Einsetzbar von",LabelEinsetzbarBis:"Einsetzbar bis",LabelAliasname:"Aliasname",LabelVerwendenVon:"Verwenden von",LabelVerwendenBis:"Verwenden bis",LabelAlias:"Alias",LabelAliasBeschreibung:"Beschreibung",TextUnbegrenztEinsetzbar:"unbegrenzt einsetzbar",Text960erRendition:"Große Bilddatei",Text576erRendition:"Mittlere Bilddatei",Text352erRendition:"Kleine Bilddatei",TextThumbnailRendition:"Thumbnail",TextZusaetzlicheRendition:"Zusätzliche Bilddatei",TextLeeresSuchergebnis:"Zu Ihrer Suchanfrage konnten keine Bildmotive ermittelt werden. Bitte ändern Sie Ihre Eingabe.",TextMeldungDatumMussInZukunftLiegen:"Das Datum muss in der Zukunft liegen",TextMeldungMotivInZeitraumNichtEinsetzbar:"Das angegebene Datum liegt außerhalb des verfügbaren Zeitraums des Bildmotivs. Bitte wählen Sie ein Datum innerhalb des Einsatzzeitraums.",TextMeldungAliaszuordnungEndeVorAnfang:"Das Ende des Zeitraums für die Aliaszuordnung darf nicht vor dem Beginn dieses Zeitraums liegen.",TextMeldungAliaszuordnungLoeschenBestaetigen:"Sind Sie sicher, dass die Zuordnung zum Alias %%1 gelöscht werden soll?",TextMeldungDatumMussAngegebenSein:"Bitte geben Sie ein Datum an.",TextMeldungAliaszuordnungInVergangenheit:"Der Zeitraum, in dem diese Aliaszuordnung gültig ist, darf nicht in der Vergangenheit liegen.",TextMeldungMotivNichtEinsetzbarInZeitraum:"Das gewählte Bildmotiv kann im vorgesehenen Zeitraum nicht eingesetzt werden. Bitte wählen Sie ein anderes Bildmotiv oder passen Sie den Zeitraum an in dem das Bildmotiv zugeordnet werden soll.",TextMeldungAliasKannNichGespeichertWerden:"Die Aliaszuordnung konnten nicht gespeichert werden.",TextMeldungFehlerBeimLoeschenEinerAliaszuordnung:"Die %%1 konnten nicht gelöscht werden.",TextMeldungListeDerMotiveNichtVerfuegbar:"Leider ist ein technischer Fehler aufgetretten. Die Liste der verfügbaren Bildmotive konnte nicht ermittelt werden.",TextMeldungAllgemeinerTechnischerFehler:"Aufgrund eines technischen Fehlers konnte die Verarbeitung nicht fortgesetzt werden.",TextMeldungBestaetigungAliasZuordnungAnpassung:"Der Verwendungszeitraum der neuen Aliaszuordnung überschneidet den Verwendungszeitraum von bestehenden Aliaszuordnungen. Wenn Sie die neue Aliaszuordnung anlegen, werden die unten aufgeführten Aliaszuordnungen geändert. Möchten Sie fortfahren?",ValueOptional:"Optional",ValueStandardzuordnung:"Standardzuordnung",ValueUnbegrenzt:"unbegrenzt"}}),define("tao/ospm/bilderpool/ui/BilderpoolUIToolkit",["tao/ospm/common/Constants","tao/ospm/common/DateFormatter","tao/ospm/common/Toolkit","tao/ospm/common/Logger","tao/ospm/core/BilderpoolConstants","tao/ospm/bilderpool/ui/BilderpoolTexte"],function(e,t,n,i,o,r){function s(e){var t;return e?t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):e}function a(){var e=new Date;return e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}var l;return l={getRenditionSizeIcon:function(t){return t>=960?{name:e.ICONS.IMAGE_M,color:e.ICON_COLOR.DARK_GREY}:t>=576?{name:e.ICONS.IMAGE_MEDIUM_M,color:e.ICON_COLOR.DARK_GREY}:48>=t?{name:e.ICONS.IMAGE_THUMBNAIL_M,color:e.ICON_COLOR.DARK_GREY}:{name:e.ICONS.IMAGE_SMALL_M,color:e.ICON_COLOR.DARK_GREY}},getRenditionDescription:function(e){return 960===e?r.Text960erRendition:576===e?r.Text576erRendition:352===e?r.Text352erRendition:48===e?r.TextThumbnailRendition:r.TextZusaetzlicheRendition},getImagePath:function(e){var t;return t="/pool/",e[o.KEY_ALIAS_FULLNAME]?t+=e[o.KEY_ALIAS_FULLNAME]:t=t+e.app+"/"+e.name,t+"/960/"},getZeitraumString:function(e,n){var i,r,s;return i=e&&!isNaN(e.valueOf())?t.formatDate(e):"",n&&!isNaN(n.valueOf())?(n&&(n=new Date(n.getTime()-o.ONE_DAY_IN_MILISECONDS)),r=t.formatDate(n)):r="",s=i&&r?i+" - "+r:i?"ab "+i:r?"bis "+r:"unbegrenzt"},getTodayWithoutTimeComponent:a,cutTimeComponentFromDate:s}}),define("tao/ospm/bilderpool/ui/validators/DateTodayOrInFutureValidator",["tao/ospm/common/WidgetValidator","tao/ospm/bilderpool/ui/BilderpoolUIToolkit"],function(e,t){var n;return n=e.subclass({referenzDate:null,errorMessage:"Error",constructor:function(e){this.referenzDate=t.getTodayWithoutTimeComponent(),this.errorMessage=e},onExit:function(e){return this.onValidate(e)},afterDataTypeValidated:function(e,t){var n=!1;e.isEnabled()&&t.validationResult.isValid()&&(null===e.getTypedValue()?t.validationResult.valid=!e.isMandatory():(n=e.getTypedValue().getTime()>=this.referenzDate.getTime(),n||e.setError(this.errorMessage),t.validationResult.valid=n))}})}),define("tao/ospm/bilderpool/ui/validators/DateAfterFixValueValidator",["tao/ospm/common/WidgetValidator"],function(e){var t;return t=e.subclass({errorMessage:"Error",referenzDate:null,constructor:function(e,t){this.referenzDate=e,this.errorMessage=t},onExit:function(e){return this.onValidate(e)},afterDataTypeValidated:function(e,t){var n=!1;if(e.isEnabled()&&t.validationResult.isValid()){if(null===this.referenzDate)return;null===e.getTypedValue()?(e.setError(this.errorMessage),t.validationResult.valid=!1):(n=e.getTypedValue().getTime()>=this.referenzDate.getTime(),n||e.setError(this.errorMessage),t.validationResult.valid=n)}}})}),define("tao/ospm/bilderpool/ui/validators/VerwendenAbValidator",["tao/ospm/common/WidgetValidator","tao/ospm/bilderpool/ui/validators/DateTodayOrInFutureValidator","tao/ospm/bilderpool/ui/validators/DateAfterFixValueValidator"],function(e,t,n){var i;return i=e.subclass({dateTodayOrInFutureValidator:null,dateAfterFixValueValidator:null,constructor:function(e,i,o){this.dateTodayOrInFutureValidator=new t(i),this.dateAfterFixValueValidator=new n(e,o)},onExit:function(e){return this.onValidate(e)},afterDataTypeValidated:function(e,t){t.validationResult.isValid()&&this.dateTodayOrInFutureValidator.afterDataTypeValidated(e,t),t.validationResult.isValid()&&this.dateAfterFixValueValidator.afterDataTypeValidated(e,t)}})}),define("tao/ospm/bilderpool/ui/validators/DateAfterReferenzValidator",["tao/ospm/common/WidgetValidator"],function(e){var t;return t=e.subclass({errorMessage:"Error",referenzDateWidget:null,constructor:function(e,t){this.referenzDateWidget=e,this.errorMessage=t},onExit:function(e){return this.onValidate(e)},afterDataTypeValidated:function(e,t){var n=!1;if(e.isEnabled()&&t.validationResult.isValid()){if(null===e.getTypedValue())return;if(null===this.referenzDateWidget.getTypedValue())return;n=e.getTypedValue().getTime()>=this.referenzDateWidget.getTypedValue().getTime(),n||e.setError(this.errorMessage),t.validationResult.valid=n}}})}),define("tao/ospm/bilderpool/ui/validators/TimeFrameEndValidator",["tao/ospm/common/WidgetValidator","tao/ospm/bilderpool/ui/validators/DateAfterReferenzValidator","tao/ospm/bilderpool/ui/validators/DateTodayOrInFutureValidator"],function(e,t,n){var i;return i=e.subclass({timeFrameBeginWidget:null,timeFrameEndValidator:null,dateBeforeFixValueValidator:null,constructor:function(e,i,o){this.timeFrameBeginWidget=e,this.dateAfterReferenzValidator=new t(e,i),this.dateTodayOrInFutureValidator=new n(o)},onExit:function(e){return this.onValidate(e)},afterDataTypeValidated:function(e,t){t.validationResult.isValid()&&this.dateAfterReferenzValidator.afterDataTypeValidated(e,t),t.validationResult.isValid()&&this.dateTodayOrInFutureValidator.afterDataTypeValidated(e,t)}})}),define("tao/ospm/bilderpool/ui/validators/DateBeforeFixValueValidator",["tao/ospm/common/WidgetValidator"],function(e){var t;return t=e.subclass({errorMessage:"Error",referenzDate:null,constructor:function(e,t){this.referenzDate=e,this.errorMessage=t},onExit:function(e){return this.onValidate(e)},afterDataTypeValidated:function(e,t){var n=!1;if(e.isEnabled()&&t.validationResult.isValid()){if(null===this.referenzDate)return;null===e.getTypedValue()?(e.setError(this.errorMessage),t.validationResult.valid=!1):(n=e.getTypedValue().getTime()<this.referenzDate.getTime(),n||e.setError(this.errorMessage),t.validationResult.valid=n)}}})}),define("tao/ospm/bilderpool/ui/validators/VerwendenBisValidator",["tao/ospm/common/WidgetValidator","tao/ospm/bilderpool/ui/validators/TimeFrameEndValidator","tao/ospm/bilderpool/ui/validators/DateBeforeFixValueValidator"],function(e,t,n){var i;return i=e.subclass({timeFrameBeginWidget:null,timeFrameEndValidator:null,dateBeforeFixValueValidator:null,constructor:function(e,i,o,r,s){this.timeFrameBeginWidget=e,this.timeFrameEndValidator=new t(e,o,r),this.dateBeforeFixValueValidator=new n(i,s)},onExit:function(e){return this.onValidate(e)},afterDataTypeValidated:function(e,t){t.validationResult.isValid()&&this.timeFrameEndValidator.afterDataTypeValidated(e,t),t.validationResult.isValid()&&this.dateBeforeFixValueValidator.afterDataTypeValidated(e,t)}})}),define("tao/ospm/bilderpool/ui/widgets/AliasAssignmentText",["tao/ospm/core/UIToolkit","tao/ospm/ui/widgets/Text","tao/ospm/common/Constants","tao/ospm/bilderpool/ui/BilderpoolUIToolkit","tao/ospm/core/BilderpoolConstants","tao/ospm/bilderpool/ui/BilderpoolTexte"],function(e,t,n,i,o,r){var s;return s=t.subclass({aliasAssignment:null,constructor:function(e,t,a){var l;this.aliasAssignment=e,t=t||{},l=i.getZeitraumString(new Date(e[o.KEY_GUELTIG_AB]),new Date(e[o.KEY_GUELTIG_BIS])),e[o.KEY_STANDARDZUORDNUNG]?(t.label=r.ValueStandardzuordnung,t.value=l):(t.label=e[o.KEY_MOTIV][o.KEY_TITEL],t.subLabel=e[o.KEY_MOTIV][o.KEY_BESCHREIBUNG],t.value=l),t.clickListener&&(t.rightIcon=n.ICONS.NEXT_S),s.parent.constructor.call(this,t,a)},getClassName:function(){return"AliasAssignmentText"}})}),define("tao/ospm/bilderpool/ui/dialogs/AssignMotivDialog",["tao/ospm/common/Constants","tao/ospm/common/DateFormatter","tao/ospm/common/Logger","tao/ospm/core/BilderpoolConstants","tao/ospm/core/ServerCommunication","tao/ospm/bilderpool/ui/validators/VerwendenAbValidator","tao/ospm/bilderpool/ui/validators/VerwendenBisValidator","tao/ospm/bilderpool/ui/BilderpoolUIToolkit","tao/ospm/bilderpool/ui/BilderpoolTexte","tao/ospm/bilderpool/ui/widgets/AliasAssignmentText","tao/ospm/ui/UIErrorDialogHelper","tao/ospm/ui/views/DialogView","tao/ospm/ui/views/InputDialogView","tao/ospm/ui/widgets/WidgetFactory"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m){function p(e,n){var o,r,s,c,u,d;return o=k.createList({form:!1}),u=e[i.KEY_EINSETZBAR_AB]?new Date(e[i.KEY_EINSETZBAR_AB]):null,d=e[i.KEY_EINSETZBAR_BIS]?new Date(e[i.KEY_EINSETZBAR_BIS]):null,r=f(o).getElement(0),s=g(o),c=_(n,u,d,o),r.setImagePath(i.IMAGEPATH_MOTIV_PREFIX+e[i.KEY_ID]+"/960/"),s.getElement(S).setValue(e[i.KEY_TITEL]),e[i.KEY_EINSETZBAR_AB]?(u=new Date(e[i.KEY_EINSETZBAR_AB]),s.getElement(S+1).setValue(t.formatDate(u)),u.getTime()>a.getTodayWithoutTimeComponent().getTime()&&c.getElement(D+1).setTypedValue(u)):s.getElement(S+1).setValue(l.TextUnbegrenztEinsetzbar),e[i.KEY_EINSETZBAR_BIS]?(d=new Date(e[i.KEY_EINSETZBAR_BIS]),d&&(d=new Date(d.getTime()-i.ONE_DAY_IN_MILISECONDS)),s.getElement(S+2).setValue(t.formatDate(d)),c.getElement(D+2).setTypedValue(d)):(s.getElement(S+2).setValue(l.TextUnbegrenztEinsetzbar),c.getElement(D+2).setValue(null)),e[i.KEY_BESCHREIBUNG]?(s.getElement(S+3).setValue(e[i.KEY_BESCHREIBUNG]),s.getElement(S+3).setHidden(!1)):(s.getElement(S+3).setValue(""),s.getElement(S+3).setHidden(!0)),o}function f(e){var t;return t=k.createImage({imagePath:i.IMAGEPATH_PLACEHOLDER,bottomMargin:"none",bottomBorder:!1,fullWidth:!0}),t.setInPlaceEditingEnabled(!1),e.addElement(t),e.addElement(k.createSpacer({offset:12,bottomBorder:!1})),e}function g(t){return t.addElement(k.createText({label:l.LabelMotivname,value:"",hidden:!1})),t.addElement(k.createText({label:l.LabelEinsetzbarVon,value:"",dataType:e.INPUT_DATA_TYPE.DATE,hidden:!1})),t.addElement(k.createText({label:l.LabelEinsetzbarBis,value:"",dataType:e.INPUT_DATA_TYPE.DATE,hidden:!1})),t.addElement(k.createText({label:l.LabelBildbeschreibung,value:"",bottomBorder:!1})),t.addElement(k.createSpacer({offset:16,bottomBorder:!1})),t}function _(t,n,o,c){var u,d;return d=k.createText({label:l.LabelAliasname,value:""}),c.addElement(d),d.setValue(t[i.KEY_ALIAS_FULLNAME]),c.addElement(k.createTextInput({label:l.LabelVerwendenVon,dataType:e.INPUT_DATA_TYPE.DATE,mandatory:!0,mandatoryMessage:l.TextMeldungDatumMussAngegebenSein,validator:new r(n,l.TextMeldungAliaszuordnungInVergangenheit,l.TextMeldungMotivInZeitraumNichtEinsetzbar)})),u=a.getTodayWithoutTimeComponent(),u=new Date(u.getTime()+i.ONE_DAY_IN_MILISECONDS),c.getElement(D+1).setTypedValue(u),E=new s(c.getElement(D+1),o,l.TextMeldungAliaszuordnungEndeVorAnfang,l.TextMeldungAliaszuordnungInVergangenheit,l.TextMeldungMotivInZeitraumNichtEinsetzbar),c.addElement(k.createTextInput({label:l.LabelVerwendenBis,dataType:e.INPUT_DATA_TYPE.DATE,valuePlaceholder:l.ValueOptional,validator:E,bottomBorder:!1})),c.addElement(k.createSpacer({offset:16,bottomBorder:!1})),c}function v(t,n,o,r){var s,c,u,d=o.getContent(),h=d.getElement(T),m=d.getElement(I);n&&(u=n[i.KEY_STANDARDZUORDNUNG],u?(o.getHeader().setLabel(l.HeadlineStandardzuordnung),o.getFooter().setHidden(!0),o.setFooter(null),o.getContent().getChildren()[0].setImagePath("pool/motiv/"+n[i.KEY_MOTIV][i.KEY_ID]+"/960/"),h.setValidator(null),h.setEnabled(!1),h.setDataType(e.INPUT_DATA_TYPE.TEXT),h.setValue(l.ValueUnbegrenzt),m.setValidator(null),m.setEnabled(!1),m.setDataType(e.INPUT_DATA_TYPE.TEXT),m.setValue(l.ValueUnbegrenzt),m.setMandatory(!0)):(o.getHeader().setLeftIcon({icon:e.ICONS.DELETE_S,action:function(){C(n,function(){o.hide(),r()})}}),o.getHeader().setLabel(l.HeadlineZuordnungAendern),n[i.KEY_GUELTIG_AB]&&(s=new Date(n[i.KEY_GUELTIG_AB]),h.setTypedValue(s),s.getTime()<a.getTodayWithoutTimeComponent().getTime()&&(h.setEnabled(!1),h.setValidator(null))),n[i.KEY_GUELTIG_BIS]&&(c=new Date(n[i.KEY_GUELTIG_BIS]),c=new Date(c.getTime()-i.ONE_DAY_IN_MILISECONDS),m.setValidator(null),m.setTypedValue(c),m.setValidator(E))))}function b(t,n,o,r,s){var a,u,d,m,p,f,g,_,v,b=!0,w=[];for(u=function(){o?C(o,function(){y(t,n,r,s)}):y(t,n,r,s)},v=0;v<n[i.KEY_ZUORDNUNGEN].length;v++)a=n[i.KEY_ZUORDNUNGEN][v],d=new Date(a[i.KEY_GUELTIG_AB]),m=a[i.KEY_GUELTIG_BIS]?new Date(a[i.KEY_GUELTIG_BIS]):null,p=r.getElement(T).getTypedValue(),f=r.getElement(I).getTypedValue(),o&&a[i.KEY_GUELTIG_AB]===o[i.KEY_GUELTIG_AB]&&a[i.KEY_GUELTIG_BIS]===o[i.KEY_GUELTIG_BIS]||(d>p&&(null===f||f>d)?(b=!1,w.push(a)):p>=d&&(null===m||m>p)&&(b=!1,w.push(a)));if(b)u();else{for(_=k.createList({}),_.addElement(k.createNotification({icon:{name:e.ICONS.WARNING_M,color:e.ICON_COLOR.WARNING_RED},style:"small",label:l.HeadlineBestaetigungAliasZuordnungAnpassung,subLabel:l.TextMeldungBestaetigungAliasZuordnungAnpassung})),v=0;v<w.length;v++)_.addElement(new c(w[v],null));g=new h({content:_,applyButton:{label:"Ja",action:function(){u(),g.hide()}},cancelButton:{label:"Nein",action:function(){g.hide()}}}),g.show()}}function y(t,n,r,s){var a,c={};c[i.KEY_ALIAS]={},c[i.KEY_ALIAS][i.KEY_ALIAS_FULLNAME]=n[i.KEY_ALIAS_FULLNAME],c[i.KEY_ALIAS][i.KEY_GUELTIG_AB]=r.getElement(D+1).getTypedValue(),a=r.getElement(D+2).getTypedValue(),a&&(a=new Date(a.getTime()+i.ONE_DAY_IN_MILISECONDS)),c[i.KEY_ALIAS][i.KEY_GUELTIG_BIS]=a,c[i.KEY_ALIAS][i.KEY_MOTIV]=t,o.executeRequest("ospm.addBilderpoolAliasZuordnung",c,function(t,n){var i;if(n)for(i=0;i<n.length;i++){if(n[i].msg.indexOf("JBA01150E004")>-1)return void u.showErrorDialog({title:l.HeadlineEingabevalidierung,text:l.TextMeldungMotivNichtEinsetzbarInZeitraum,rows:[{type:e.DIALOG_ERROR_TYPE.WEITER,text:l.ActionWeiter}]});if(n[i].code>=8)return void u.showErrorDialog({title:l.HeadlineTechnischerFehler,text:l.TextMeldungAliasKannNichGespeichertWerden,rows:[{type:e.DIALOG_ERROR_TYPE.WEITER,text:l.ActionWeiter},{type:e.DIALOG_ERROR_TYPE.FEHLERBERICHT}]})}s()})}function C(t,n){var r,s={};r='Zuordnung des Bildmotivs "'+t[i.KEY_MOTIV][i.KEY_TITEL]+'" zum Alias "'+t[i.KEY_ALIAS_FULLNAME]+'" im Zeitraum '+a.getZeitraumString(new Date(t[i.KEY_GUELTIG_AB]),new Date(t[i.KEY_GUELTIG_BIS])),s[i.KEY_ALIAS]=t,o.executeRequest(i.NEOSERVICE_DEL_ALIAS_ZUORDNUNG,s,function(t,i){var o;if(i&&i.length>0)for(o=0;o<i.length;o++)if(i[o].code>=8)return L.error("Das Löschen einer Aliaszuordung ist Fehlgeschlagen: %s",i[o].msg),void u.showErrorDialog({title:l.HeadlineTechnischerFehler,text:l.TextMeldungFehlerBeimLoeschenEinerAliaszuordnung.replace("%%1",r),rows:[{type:e.DIALOG_ERROR_TYPE.WEITER,text:l.ActionWeiter},{type:e.DIALOG_ERROR_TYPE.FEHLERBERICHT}]});n()})}var w,E,L=new n("ospm","Bilderpool Aliaszuordnungs-Dialog"),S=2,D=7,T=D+1,I=D+2,k=m.DEFAULT;return w={createDialog:function(t,n,o,r,s){var a,c,u,h;return c=k.createHeader({label:l.HeadlineZuordnen,rightIcons:[{icon:{name:e.ICONS.CANCEL_S,size:e.ICONS.SMALL_20},action:function(){a.hide()}}]}),o||c.setLeftIcon(e.ICONS.BACK_S,null,function(){a.hide(),s&&s()}),u=k.createFooter({actionButton:{label:l.ActionBestaetigen,action:function(){var e,s,c,u,d=h;return e=!0,s=d.getElement(D+1).getTypedValue(),c=d.getElement(D+2).getTypedValue(),c&&(c=new Date(c.getTime()+i.ONE_DAY_IN_MILISECONDS)),d.getElement(D+1).getValue()||(d.getElement(D+1).setError({code:8,title:l.HeadlineEingabevalidierung,msg:l.TextMeldungDatumMussAngegebenSein}),e=!1),e=e&&d.getElement(D+1).validate(),e=e&&d.getElement(D+2).validate(),e!==!1?(o&&(u=s.getTime()!==new Date(o[i.KEY_GUELTIG_AB]).getTime(),u=c?u||c.getTime()!==new Date(o[i.KEY_GUELTIG_BIS]).getTime():u||!!o[i.KEY_GUELTIG_BIS]),!u&&o?void a.hide():void b(t,n,o,d,function(){a.hide(),r()})):void 0}},cancelButton:{label:l.ActionAbbrechen,action:function(){a.hide()}}}),h=p(t,n),a=new d({header:c,footer:u,cancelOnOutsideClick:!0}),a.setContent(h),v(n,o,a,r),a}}}),define("tao/ospm/bilderpool/ui/dialogs/SelectMotivDialog",["tao/ospm/common/Constants","tao/ospm/common/DateFormatter","tao/ospm/common/MessageScope","tao/ospm/core/BilderpoolConstants","tao/ospm/core/UIToolkit","tao/ospm/bilderpool/ui/BilderpoolTexte","tao/ospm/bilderpool/BilderpoolServerCommunication","tao/ospm/ui/UIErrorDialogHelper","tao/ospm/ui/layouts/OneColumnLayout","tao/ospm/ui/views/DialogView","tao/ospm/ui/widgets/WidgetFactory"],function(e,t,n,i,o,r,s,a,l,c,u){function d(t,n,i){return h(function(i){var o,s,a,c=new l;a=function(){o.setError(null),o.setValue(""),i.setHidden(!1),s.setHidden(!0),i.expand()},s=p.createNotification({label:r.HeadlineLeeresSuchergenbis,subLabel:r.TextLeeresSuchergebnis,box:!0,hidden:!0,icon:{name:e.ICONS.WARNING_M,color:e.ICON_COLOR.WARNING_RED}}),o=p.createSearchInput({label:"Bildmotivname",searchAction:function(e){var t=e.getValue().trim().toLowerCase();return""===t?void a():t.length<3?void e.setError({code:8,title:"",msg:"Bitte geben Sie min. drei Zeichen ein."},!1):(e.setError(null),i.getElements().forEach(function(e){e.setHidden(e.getLabel().toLowerCase().indexOf(t)>-1?!1:!0)}),void(i.getDisplayedChildren().length<=0?(i.setHidden(!0),s.setHidden(!1)):(i.setHidden(!1),s.setHidden(!0))))},resetAction:a}),c.addElement(o),i.setBottomMargin(e.MARGIN.NONE),c.addElement(i),c.addElement(s),t.setContent(c),n(t)},function(e){t.hide(),i(e)})}function h(t,n){var l=p.createList();s.readMotivs(function(s,c){var u,d,h,m,f;if(h=function(e){n(e.appData)},c)for(u=0;u<c.length;u++)if(c[u].code>8)return void a.showErrorDialog({title:r.HeadlineTechnischerFehler,text:r.TextMeldungListeDerMotiveNichtVerfuegbar,rows:[{type:e.DIALOG_ERROR_TYPE.FEHLERBERICHT},{type:e.DIALOG_ERROR_TYPE.WEITER,text:r.ActionWeiter}]});for(s&&0!==s.length||l.addElement(p.createNotification({icon:{name:e.ICONS.WARNING_M,color:e.ICON_COLOR.WARNING_RED},label:"Keine Bildmotive vorhanden",subLabel:"Es liegen keine institutsindividuellen Bildmotive vor. Bitte erstellen Sie zunächst neue Bildmotive über den OSPlus_neo-Bilderpool.",topMargin:e.MARGIN.SMALL1,bottomMargin:e.MARGIN.SMALL1,style:e.SIZE.SMALL})),f=o.getBilderpoolService().getTargetDate(),u=0;u<s.length;u++)m=s[u],(void 0===m[i.KEY_EINSETZBAR_BIS]||new Date(m[i.KEY_EINSETZBAR_BIS]).getTime()>f.getTime())&&(d=p.createText({label:m[i.KEY_TITEL],subLabel:m[i.KEY_BESCHREIBUNG],wrapMode:e.WRAP_MODE.NOWRAP,leftIcon:{name:e.ICONS.IMAGE_M,color:e.ICON_COLOR.DARK_GREY},rightIcon:e.ICONS.NEXT_S,clickListener:h}),d.appData=m,m[i.KEY_MOTIV_FREIGEGEBEN]||(d.setSubLabel("Noch nicht freigegeben"),d.setSubLabelStyle(e.TEXT_STYLE.SUBLABEL1)),l.addElement(d));t(l)})}var m,p=u.DEFAULT;return m={createDialog:function(t,n){var i,o;o=p.createHeader({label:r.HeadlineMotivAuswaehlen,rightIcons:[{icon:{name:e.ICONS.CANCEL_S,size:e.ICON_SIZE.SMALL_20},action:function(){i.hide()}}]}),i=new c({header:o,cancelOnOutsideClick:!0}),d(i,t,n)}}}),define("tao/ospm/bilderpool/ui/components/AliasDetailsComponent",["tao/ospm/common/Constants","tao/ospm/common/Logger","tao/ospm/core/BilderpoolConstants","tao/ospm/core/ServerCommunication","tao/ospm/bilderpool/ui/BilderpoolUIToolkit","tao/ospm/bilderpool/ui/BilderpoolTexte","tao/ospm/bilderpool/ui/BilderpoolUIToolkit","tao/ospm/bilderpool/ui/dialogs/SelectMotivDialog","tao/ospm/bilderpool/ui/dialogs/AssignMotivDialog","tao/ospm/bilderpool/ui/widgets/AliasAssignmentText","tao/ospm/ui/UIErrorDialogHelper","tao/ospm/ui/widgets/WidgetFactory"],function(e,t,n,i,o,r,s,a,l,c,u,d){function h(e,t){a.createDialog(e,t)
}function m(e,t){var i,o,s;s="TwoColumnLayout"===e.getClassName()?e.addRightElement.bind(e):e.addElement.bind(e),g=y.createList({form:!1}),t||(i=y.createFlexibleImageHeader({minimumHeight:360,imagePath:n.IMAGEPATH_PLACEHOLDER}),i.setInPlaceEditingEnabled(!1),g.setHeader(i)),g.addElement(y.createText({label:r.LabelAlias,value:""})),g.addElement(y.createTextareaInput({label:r.LabelAliasBeschreibung,value:"",oneLine:!0,enabled:!1,mandatory:!0,hidden:t})),s(g),_=y.createList({collapsible:!t,collapsed:!1,hidden:!0,header:y.createHeader({label:r.HeadlineBestehendeAliaszuordnungen})}),s(_),o=y.createStartButton({fullWidth:!0,label:r.ActionAliaszuordnungErstellen,clickListener:function(){var e;h(function(t){e=t,e.show()},function(t){var n;n=l.createDialog(t,v,null,function(){p(v)},function(){e.show()}),n.show()})}}),o.setRightIcon(""),s(o)}function p(t){var s={};_.removeAllElements(),g.getElement(0).setValue(t[n.KEY_ALIAS_FULLNAME]),g.getElement(1).setValue(t[n.KEY_ALIAS_BESCHREIBUNG]?t[n.KEY_ALIAS_BESCHREIBUNG]:""),g.getHeader()&&g.getHeader().setImagePath(o.getImagePath(t)),s[n.KEY_ALIAS_FULLNAME]=t[n.KEY_ALIAS_FULLNAME],i.executeRequest(n.NEOSERVICE_GET_ALIAS_ZUORDNUNGEN,s,function(i,o){var s,a,d,h;if(o&&o.length>0)for(s=0;s<o.length;s++)if(o[s].code>=8)return b.error("Das Laden der Zuordnungen zu einem Alias ist fehlgeschlagen: %s",o[s].msg),void u.showErrorDialog({title:r.HeadlineTechnischerFehler,text:"Der gewählte Alias "+t.app+"/"+t.name+" konnten nicht geladen werden.",rows:[{type:e.DIALOG_ERROR_TYPE.FEHLERBERICHT},{type:e.DIALOG_ERROR_TYPE.BEENDEN,callback:document.TaoOSPM.workflow.runPreviousStep}]});for(h=function(e){l.createDialog(e.appData[n.KEY_MOTIV],t,e.appData,function(){p(v)}).show()},t[n.KEY_ZUORDNUNGEN]=[],s=0;s<i[n.STORAGE_DATA].length;s++)a=i[n.STORAGE_DATA][s],a[n.KEY_STANDARDZUORDNUNG]||t[n.KEY_ZUORDNUNGEN].push(a),d=new c(a,{clickListener:h}),_.addElement(d),d.appData=i[n.STORAGE_DATA][s];_.elementCount()>0&&_.setHidden(!1)},90)}var f,g,_,v,b=new t("ospm","Bilderpool/AliasDetailsComponent"),y=d.DEFAULT;return f={createPageComponent:function(e,t){v=e,m(t,!1),p(e)},createDialogComponent:function(e,t){v=e,m(t,!0),p(e)}}}),define("tao/ospm/bilderpool/BilderpoolService",["tao/lib/stapes","tao/ospm/common/Constants","tao/ospm/common/Logger","tao/ospm/common/OSPMError","tao/ospm/common/MessageScope","tao/ospm/common/Toolkit","tao/ospm/common/Config","tao/ospm/core/UIToolkit","tao/ospm/core/ServerCommunication","tao/ospm/core/BilderpoolConstants","tao/ospm/bilderpool/BilderpoolServerCommunication","tao/ospm/bilderpool/ui/dialogs/AssignMotivDialog","tao/ospm/bilderpool/ui/dialogs/SelectMotivDialog","tao/ospm/bilderpool/ui/BilderpoolTexte","tao/ospm/bilderpool/ui/components/AliasDetailsComponent","tao/ospm/ui/layouts/OneColumnLayout","tao/ospm/ui/views/DialogView","tao/ospm/ui/widgets/Header","tao/ospm/ui/widgets/list/List","tao/ospm/ui/widgets/Text"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b){function y(e,n){var i,o,r;r=new _({label:m.HeadlineAliasBearbeiten,rightIcons:[{icon:t.ICONS.CANCEL_S,action:function(){i.hide()}}]}),i=new g({header:r,cancelOnOutsideClick:!0,hideListener:n}),o=new f,p.createDialogComponent(e,o),i.setContent(o),i.show()}function C(e){var t;return r.isSet(e)&&"string"==typeof e?(t=e.startsWith("pool")||e.startsWith("/pool"),t=t&&!(e.startsWith("pool/motiv")||e.startsWith("/pool/motiv")),!!t):!1}function w(e){var t="string"==typeof e&&e?e.split("/"):[];return""===t[0]&&t.shift(),""===t[t.length-1]&&t.pop(),t.join("/")}var E,L,S,D,T,I,k;return S=!1,D=new Date,T=new n("OSPM","BilderpoolService"),I=c.BILDERPOOL_INPLACE_CHANGE_BUTTON_ID,k=c.BILDERPOOL_INPLACE_DELETE_BUTTON_ID,E=e.subclass({constructor:function(){},setAdminMode:function(e){S=!!e},isAdminMode:function(){return S},setTargetDate:function(e){if(!e)throw new i("Das zu setzende Datum für die OSPlus_neo-Bilderpool Zeitreise wurde nicht angegeben.");D=e},getTargetDate:function(){return D},isBilderpoolReferenced:C,transferPathToURL:function(e){var t,n,o,s,a,c,u;if(t=w(e).split("/"),t.length<3)throw new i('Image-Pfad für Bilderpool muss Prefix "pool" sowie App Name und Image Namen enthalten!');if(t.shift(),n=t.shift(),c=l.getCurrentServer(),e.indexOf("..")>=0)throw new i("Navigationsausdrücke im Image-Pfad sind nicht erlaubt!");if(e.indexOf("://")>=0)throw new i("URL-Ausdrücke im Image-Pfad sind nicht erlaubt!");if(o=t.shift(),t.length>=1){if(isNaN(t[0])||!(+t[0]>0))throw new i("Die Angabe zur minimalen Bildbreite muss eine ganze Zahl größer 0 sein.");s=t.shift()}if(a=t.join("/"),a.indexOf(".")>=0)throw new i("Navigationsausdrücke im Image-Pfad sind nicht erlaubt!");return c+="/"!==c.slice(-1)?"/":"",c+="neo/pool/"+n+"/",c+=o+"/",s&&(c+=s+"/"),L.isAdminMode()&&"motiv"!==n&&(u=L.getTargetDate(),c+=u.getFullYear()+"-"+(u.getMonth()+1)+"-"+u.getDate()+"/"),a.length>0&&(c+=a+"/"),document.OSPMEnvironment.context.institut.inr?(c+="?inr="+encodeURIComponent(document.OSPMEnvironment.context.institut.inr),c+="&vrz="+encodeURIComponent(document.OSPMEnvironment.context.institut.vrz)):c+=document.OSPMEnvironment.context.institut.instName?"?inst="+encodeURIComponent(document.OSPMEnvironment.context.institut.instName):"?inst="+encodeURIComponent(r.randomUUID()),L.isAdminMode()&&(c+="&useAdminMode=1",c+="&nocache="+encodeURIComponent(r.randomUUID())),c=document.OSPMEnvironment.mapToRealServerURL(c)},loadImage:function(e,t,n){var i,o,l,c,u,d,h,m=r.randomUUID(),p=1;i=function(){e.addEventListener("load",c),e.addEventListener("abort",d),e.addEventListener("error",u)},o=function(){e.removeEventListener("load",c),e.removeEventListener("abort",d),e.removeEventListener("error",u)},l=L.transferPathToURL(t),l=a.prepareImageURL(l,m),c=function(e){T.debug("Bild mit Pfad "+t+" erfolgreich geladen"),o(),r.resetExecuteLater(h),n(e)},d=function(){T.debug("Laden des Bildes mit Pfad "+t+" abgebrochen"),o(),r.resetExecuteLater(h)},u=function(){T.error("Laden des Bildes mit Pfad "+t+" mit Fehler beendet"),1>=p?(p+=1,r.executeLater(function(){T.info("Erneutes laden des Bildes mit Pfad "+t+" nach Fehler (Versuch "+p),l=L.transferPathToURL(t),l=a.prepareImageURL(l,m),e.src=l+"&try="+p},100)):(o(),a.loadErrorImage(e,function(e){r.resetExecuteLater(h),n(e)}))},i(),e.src=l,h=r.executeLater(function(){T.error("Laden des Bildes konnte nicht innerhalb von "+s.IMAGE_MAX_LOAD_TIMEOUT+" Sekunden abgeschlossen werden."),o()},1e3*s.IMAGE_MAX_LOAD_TIMEOUT)},manipulateFlyoutMenu:function(e){var n,i,o,r,s;if(e.isBilderpoolReferenced()&&this.isAdminMode()&&e.isInPlaceEditingEnabled()){if(r=this,i=w(e.getImagePath()).split("/"),o={app:i[1],name:i[2]},s=o.app+"/"+o.name,o[c.KEY_ALIAS_FULLNAME]=s,n=e.getFlyoutMenu()||new v,n.elementCount()>0&&(n.getElement(n.elementCount()-1).getId()===k||n.getElement(n.elementCount()-1).getId()===I))return;n.addElement(new b({id:I,label:m.ActionZuordnungAendern,leftIcon:{name:t.ICONS.IMAGE_M,color:t.ICON_COLOR.DARK_GREY},rightIcon:t.ICONS.NEXT_S,clickListener:function(){e.closeFlyoutMenu(),y(o,function(){e.getImageDom().src=r.transferPathToURL(e.getImagePath())+"&"+Date.now()})}})),e.setFlyoutMenu(n)}else e.getFlyoutMenu()&&(n=e.getFlyoutMenu(),n.removeElement(I),n.getElements().length<=0&&e.setFlyoutMenu(null))},normalizeImagePath:w}),L=new E,a.setBilderpoolService(L),L}),define("tao/ospm/ui/views/AlertView",["tao/ospm/ui/widgets/Notification","tao/ospm/ui/widgets/Text","tao/ospm/ui/widgets/InfoText","tao/ospm/ui/widgets/Footer","tao/ospm/ui/widgets/list/List","tao/ospm/ui/views/DialogView","tao/ospm/common/Toolkit","tao/ospm/common/DateFormatter","tao/ospm/common/Constants","tao/ospm/core/CoreConstants","tao/ospm/core/ErrorDump","tao/ospm/core/OSPMLogStorage","tao/ospm/core/ServerStage"],function(e,t,n,i,o,r,s,a,l,c,u,d,h){function m(e){e.enforceLabels=!0,e.hideDetails=!0,e.hideErrorId=!0,e.hideErrorReport=!0}function p(e){return e&&e.sessionError===!0}function f(e){if(e){if(e.specificError)return e.specificError;if(e.response&&e.response.error&&e.response.error.specificError)return e.response.error.specificError}return null}function g(e){if(e){if(e.clientAbortException)return e.clientAbortException;if(e.response&&e.response.error&&e.response.error.clientAbortException)return e.response.error.clientAbortException}return null}function _(t,n){var i,s,a,u={labelColor:"normal",lowerMargin:l.MARGIN.MEDIUM2};return t=t||{},u.icon=t.icon?t.icon:{name:l.ICONS.ERROR_SEVERE_M,color:l.ICON_COLOR.WARNING_RED},n||t.enforceLabels===!0?(u.label=b(t.title)||c.ERROR_TITLE,u.subLabel=b(t.message)||c.ERROR_SUBTITLE):(u.label=c.ERROR_TITLE,u.subLabel=c.ERROR_SUBTITLE),t.errorId&&!t.hideErrorId&&(u.subLabel=n?u.subLabel+" (Fehler-Id: "+t.errorId+")":u.subLabel+" Fehler-Id: "+t.errorId),a=new o,u.style="small",a.addElement(new e(u)),n&&!t.hideDetails&&v(a,t),s=r.createDialog({cancelOnOutsideClick:!1}),s.setContent(a),s.fullScreenContainerDom.classList.add("ospm_ospm_alertview"),i=y(s,t,n),i&&s.setFooter(i),s}function v(e,i){var o,r;i.details&&(o=new t({label:"Fehlerdetails anzeigen",minHeight:"large",clickListener:function(e){r.isHidden()?(r.setHidden(!1),e.setRightIcon({name:l.ICONS.UP_S,color:l.ICON_COLOR.LIGHT_GREY_3})):(r.setHidden(!0),e.setRightIcon({name:l.ICONS.DOWN_S,color:l.ICON_COLOR.LIGHT_GREY_3}))},rightIcon:{name:l.ICONS.DOWN_S,color:l.ICON_COLOR.LIGHT_GREY_3}}),r=new n({label:b(i.details),showIcon:!1,hidden:!0}),e.addElement(o),e.addElement(r))}function b(e){return e.replace(/(\<\/?)((link)|(click))\>/g,"<$1_$2_>")}function y(e,t,n){var o=[];return n&&t.saveData&&!window.isCordova&&!t.hideErrorReport&&o.push({label:"Fehlerbericht erstellen",action:function(){s.saveTextToDownload(s.stringify(t.saveData,1e5,null,!0),"OSPlus_neo-crashreport-"+a.convertToServerTimeString(new Date))}}),t.hideRestart||o.push({label:"OSPlus_neo neu starten",action:function(){e.hide(),t.hideAction&&t.hideAction()}}),0===o.length?null:new i(1===o.length?{centerButton:o[0]}:{cancelButton:o[0],actionButton:o[1]})}function C(e,t){return t&&t.length>0?"\n\n"+e+"\n"+new Array(e.length+1).join("=")+"\n\n"+t.join("\n\n"):""}var w;return w={displayError:function(e,t){var n,i,o,r,a,l,c,v,b,y={title:"Fehler im Programmablauf"};l=u.fromError(e),i=e.message,o=s.merge({},e),e.hasOwnProperty("logs")&&delete o.logs,e.hasOwnProperty("stack")&&(a=e.stack,delete o.stack),e.hasOwnProperty("stacktrace")&&(a=e.stacktrace,delete o.stacktrace),a&&(a=a.map(function(e){var t,n=e.line;for(e.important&&(n="* "+n),t=e.indent;t>0;t--)n="   "+n;return n})),r=s.stringify(o,20).replace(/\\"/g,"'"),y.details="",o.errorMessage&&(y.details+=o.errorMessage+"\n\n * Technische Informationen:\n"),y.details+=JSON.stringify(JSON.parse(r),null,2),y.details+=C("STACKTRACE",a),y.message=i,y.saveData=l,y.hideAction=function(){"function"==typeof t&&t(),window.isCordova&&(c=s.fetchProperty(window.parent,"fi.utility.sendCloseToNativeViews"),"function"==typeof c&&c(function(e){log.info("Nachricht verschickt, dass aktive native View (iOS) geschlossen werden."),log.info(e)},function(e){log.error("Nachricht, dass aktive native View (iOS) geschlossen werden, wurde NICHT verschickt."),log.error(e)}))},y.errorId=d.getErrorId(),p(e)?(m(y),y.hideRestart=!0,y.icon="cancel_two_boxes_m",y.title="Bitte schließen Sie dieses Fenster.",y.message="Die aktive OSPlus_neo-Sitzung wird in einem anderen Browserfenster ausgeführt."):(v=f(e),v?(m(y),v.noLogon&&(y.title="Es liegt keine Anmeldung vor",y.message="Sie wurden automatisch abgemeldet. Bitte starten Sie OSPlus_neo neu.")):(b=g(e),b&&(m(y),y.title=b.title,y.message=b.message))),n=_(y,h.isStageOrSystemIntern()),n.show()},displaySbtError:function(){var e,n,i,s={};n=new o,i=new t({label:"Technischer Fehler. Bitte gehen Sie zurück zum Hauptmenü.",labelStyle:13}),n.addElement(i),s.content=n,e=r.createDialog(s),e.show()}},document.OSPMEnvironment.displayError=w.displayError,document.OSPMEnvironment.displaySbtError=w.displaySbtError,w}),define("tao/ospm/ui/views/PdfView",["tao/lib/stapes","tao/ospm/common/OSPMError"],function(e,t){var n=e.subclass({constructor:function(e){throw new t("createDocumentViewer: Aufruf ausserhalb der iPad-App",{parameter:e})}});return n}),define("tao/ospm/ui/views/SignatureView",["tao/ospm/common/OSPMError"],function(e){return{createSignatureDialog:function(){throw new e("createSignatureDialog: Aufruf ausserhalb der iPad-App")}}}),define("tao/ospm/main/IPadDruck",["tao/ospm/common/OSPMError"],function(e){function t(t){throw new e(t+": Aufruf ausserhalb der iPad-App")}return{auswahl:function(){t("druckerAuswahl")},auftrag:function(){t("druckAuftrag")},getStandardDrucker:function(){t("getStandardDrucker")},addDruckerToLayout:function(){t("addDruckerToLayout")}}}),define("tao/ospm/main/IPadVPIntegration",["tao/ospm/common/OSPMError"],function(e){function t(t){throw new e(t+": Aufruf ausserhalb der iPad-App")}return{displayPDFFromData:function(){t("displayPDFFromData")},displayPDF:function(){t("displayPDF")}}}),define("tao/ospm/control/WorkflowControl",["tao/ospm/common/Logger","tao/ospm/common/Constants","tao/ospm/common/OSPMError","tao/ospm/common/WorkflowData","tao/ospm/core/E2ETransaction","tao/ospm/core/WorkflowShadowAccounting"],function(e,t,n,i,o,r){var s,a,l=new e("OSPM","WorkflowControl");return a={NEW:0,LOADING:1,LOADED:2,RUNNING:3,EXITING:4,EXITED:5,UNLOADING:6,SUSPENDED:7,VORGANG_CALLBACK:8,SUSPENDING:9,ABORTING:10},s={getAPI:function(e,s,c){function u(t){l.debug("%o(%o): Aufruf von %o(%o)",s,e,t,Array.prototype.slice.call(arguments,1))}function d(t){u("setNext",t),_.workflow.setNext(e,t)}function h(t){u("setPrevious",t),_.workflow.setPrevious(e,t)}function m(e,t,i){if(!t)throw new n("Funktion in falschem State aufgerufen",{functionName:e,state:f});f=i}function p(e,t,i,o){var r,s=o;if(m(e,t,i),c&&c.workflowStep&&(s=s||c.workflowStep[e]))try{s.call(c.workflowStep)}catch(a){throw r=n.fromError("Fehler bei der Funktionsausführung",a,{functionName:e}),l.error("Fehler bei der Ausführung von %o: %o",e,r),r}}var f,g,_;return f=a.NEW,g=document.OSPMEnvironment,_=g.OSPMCommunication,_.setCommunicationModule(e,{onPackageLoad:function(){o.reportClientAction("workflowStep","onPackageLoad",s),p("onPackageLoad",f===a.NEW,a.LOADING)},onPackageUnload:function(){o.reportClientAction("workflowStep","onPackageUnload",s),p("onPackageUnload",!0,a.UNLOADING)},onEntry:function(e,t,n,l){return p("onEntry",f===a.LOADED,a.RUNNING,function(){r.reportEntry(n,e,l,s),c.workflow.inputVariante=e,c.workflow.data=i.copy(t),o.reportClientAction("workflowStep","onEntry",n,l,e,s),g.ClientRequestContext&&g.ClientRequestContext.reportCurrentAction(s,n,e),c.workflowStep.onEntry(e,c.workflow.data),o.reportClientAction("workflowStep","onEntryCalled",n,l,e,s)}),!c.ui.getLayout()},onReturn:function(e,t,n,l){p("onReturn",f===a.SUSPENDED,a.RUNNING,function(){r.reportEntry(n,e,l,s),c.workflow.inputVariante=e,c.workflow.data=i.copy(t),o.reportClientAction("workflowStep","onEntry",n,l,e,s),g.ClientRequestContext&&g.ClientRequestContext.reportCurrentAction(s,n,e),c.workflowStep.onReturn(e,c.workflow.data),o.reportClientAction("workflowStep","onReturnCalled",n,l,e,s)})},onExit:function(e){m("onExit",f===a.RUNNING||f===a.EXITING,e?a.SUSPENDED:a.EXITED)},onNext:function(){p("onNext",f===a.RUNNING,a.EXITING)},onPrevious:function(){p("onPrevious",f===a.RUNNING,a.EXITING)},onClose:function(){p("onClose",f===a.RUNNING,a.EXITING)},onDelete:function(){p("onDelete",f===a.RUNNING,a.RUNNING)},onReset:function(){p("onReset",f===a.RUNNING,a.RUNNING)},onSuspend:function(e,t){p("onSuspend",f===a.RUNNING,a.SUSPENDING,function(){c.workflowStep.onSuspend?c.workflowStep.onSuspend(e,t):c.workflow.confirmSuspend()})},onResume:function(e){p("onResume",f===a.SUSPENDED,a.RUNNING,function(){c.workflowStep.onResume(e)})},onAbort:function(e){p("onAbort",f===a.RUNNING,a.ABORTING,function(){c.workflowStep.onAbort?c.workflowStep.onAbort(e):c.workflow.confirmAbort()})},onVorgangAblegen:function(){return c.workflowStep.onVorgangAblegen?(p("onVorgangAblegen",f===a.RUNNING,a.VORGANG_CALLBACK),!0):!1},onVorgangBeenden:function(){return c.workflowStep.onVorgangBeenden?(p("onVorgangBeenden",f===a.RUNNING,a.VORGANG_CALLBACK),!0):!1},onVorgangLoeschen:function(){return c.workflowStep.onVorgangLoeschen?(p("onVorgangLoeschen",f===a.RUNNING,a.VORGANG_CALLBACK),!0):!1},onPushNotification:function(e){c.workflowStep.onPushNotification&&(m("onPushNotification",f===a.RUNNING,a.RUNNING),c.workflowStep.onPushNotification(e))}}),{data:null,STATES:a,packageLoaded:function(){u("packageLoaded"),m("packageLoaded",f===a.LOADING,a.LOADED),_.packageLoaded(e),o.reportClientAction("workflowStep","packageLoaded",s)},disableNext:function(t){u("disableNext",t),_.workflow.disableNext(e,t)},disablePrevious:function(t){u("disablePrevious",t),_.workflow.disablePrevious(e,t)},disableClose:function(){u("disableClose"),_.workflow.disableClose(e)},disableReset:function(){u("disableReset"),_.workflow.disableReset(e)},disableDelete:function(){u("disableDelete"),_.workflow.disableDelete(e)},enableNext:function(t){arguments.length>0&&d(t),u("enableNext",t),_.workflow.enableNext(e)},enablePrevious:function(t){arguments.length>0&&h(t),u("enablePrevious",t),_.workflow.enablePrevious(e)},enableClose:function(){u("enableClose"),_.workflow.enableClose(e)},enableReset:function(){u("enableReset"),_.workflow.enableReset(e)},enableDelete:function(){u("enableDelete"),_.workflow.enableDelete(e)},triggerNext:function(){u("triggerNext"),_.workflow.triggerNext(e)},triggerPrevious:function(){u("triggerPrevious"),_.workflow.triggerPrevious(e)},triggerClose:function(){u("triggerClose"),_.workflow.triggerClose(e)},setCheckInputOnUserPrevious:function(t){u("setCheckInputOnUserPrevious",t),_.workflow.setCheckInputOnUserPrevious(e,t)},setNext:d,setPrevious:h,setPreviousButtonLabel:function(t,n){u("setPreviousButtonLabel",t,n),_.workflow.setPreviousButtonLabel(e,t,n)},setNextButtonLabel:function(t,n){u("setNextButtonLabel",t,n),_.workflow.setNextButtonLabel(e,t,n)},cancelExit:function(){u("cancelExit"),(f===a.EXITING||f===a.SUSPENDING||f===a.ABORTING||f===a.VORGANG_CALLBACK)&&(f=a.RUNNING),_.workflow.cancelExit(e)},confirmSuspend:function(){u("confirmSuspend"),f===a.SUSPENDING&&(f=a.SUSPENDED),_.workflow.confirmSuspend(e)},confirmAbort:function(){u("confirmAbort"),f===a.ABORTING&&(f=a.RUNNING),_.workflow.confirmAbort(e)},runPreviousStep:function(){u("runPreviousStep"),_.workflow.runNextStep(e,c.workflow.data,!0)},runNextStep:function(t,n){u("runNextStep",t,n),_.workflow.runNextStep(e,c.workflow.data,n,t)},runNextInDialog:function(t,n){u("runNextInDialog",t,n),_.workflow.runNextInDialog(e,c.workflow.data,t,n)},isCompositeWorkflow:function(){return u("isCompositeWorkflow"),_.workflow.isCompositeWorkflow(e)},isInDialog:function(){return u("isInDialog"),_.workflow.isInDialog(e)},getDialogDepth:function(t){return u("getDialogDepth"),_.workflow.getDialogDepth(e,t)},isShowingDialogs:function(){return u("isShowingDialogs"),_.workflow.isShowingDialogs(e)},setDialogMaximized:function(t){u("setDialogMaximized",t),_.workflow.setDialogMaximized(e,t)},isDialogMaximized:function(){return u("isDialogMaximized"),_.workflow.isDialogMaximized(e)},setLocked:function(t,n){u("setLocked",t,n),_.workflow.setLocked(e,t,n)},isLocked:function(){return u("isLocked"),_.workflow.isLocked()},getSecurityDialog:function(){return u("getSecurityDialog"),_.workflow.getSecurityDialog()},startNew:function(t,n,o){u("startNew",t,n,o),i.verify(o),f=a.EXITED,_.workflow.startNew(e,t,n,o)},startWorkflowDialog:function(e,t,n,o,r,s){u("startWorkflowDialog",e,t,n),i.verify(n),_.workflow.startWorkflowDialog(e,t,n,o,r,s)},startWorkflowOverlay:function(e,t,n,o){u("startWorkflowDialog",e,t,n),i.verify(n),_.workflow.startWorkflowOverlay(e,t,n,o)},fetchNext:function(e){u("fetchNext",e),_.workflow.fetchNext(e)},isBacklinkAvailable:function(){return u("isBacklinkAvailable"),_.workflow.isBacklinkAvailable(e)},dispatchToBacklink:function(t,n){return u("dispatchToBacklink",t,n),_.workflow.dispatchToBacklink(e,t,n)},isAutoBacklink:function(){return u("isAutoBacklink"),_.workflow.isAutoBacklink(e)},onVorgangFinished:function(){u("onVorgangFinished"),m("onVorgangFinished",f===a.VORGANG_CALLBACK,a.RUNNING),_.workflow.onVorgangFinished(e)},switchToVP:function(t,n,i){u("switchToVP",t),_.workflow.switchToVP(e,t,n,i)},callMapiWorkflow:function(t,n){u("callMapiWorkflow",t),_.workflow.callMapiWorkflow(e,t,n)},abortMapiWorkflow:function(t){u("abortMapiWorkflow"),_.workflow.abortMapiWorkflow(e,t)},isMapiWorkflowActive:function(){return u("isMapiWorkflowActive"),_.workflow.isMapiWorkflowActive(e)},isMapiAvailable:function(){return u("isMapiAvailable"),0===g.context.mkgStatus},changeTopWorkflowContext:function(t,n){u("changeTopWorkflowContext",t,n),_.workflow.changeTopWorkflowContext(e,t,n)},currentState:function(){return f},isActive:function(){return f===a.RUNNING||f===a.EXITING||f===a.SUSPENDING||f===a.VORGANG_CALLBACK},isSuspended:function(){return f===a.SUSPENDED},getAvailableExits:function(){return _.workflow.getAvailableExits(e)},constants:{DOMAIN_NEO_PERSON:t.DOMAIN_KEY_NEO_PERSON,DOMAIN_NEO_KONTO:t.DOMAIN_KEY_NEO_KONTO,DOMAIN_NEO_SSK_ARGS:t.DOMAIN_KEY_NEO_SSK_ARGS,WORKFLOW_DASHBOARD:t.WORKFLOW_DASHBOARD}}}}}),define("tao/ospm/control/VorgangControl",["tao/lib/stapes","tao/ospm/common/Logger"],function(e,t){var n;return n=new t("OSPM","VorgangControl"),{getAPI:function(e,t){function i(i){n.debug("%o(%o): Aufruf von %o(%o)",t,e,i,Array.prototype.slice.call(arguments,1))}var o=document.OSPMEnvironment.OSPMCommunication;return{startNewVorgang:function(t,n,r){i("vorgang.startNewVorgang",t,n,r),o.vorgang.startNewVorgang(e,t,n,r)},continueVorgang:function(t,n,r){i("vorgang.continueVorgang",t,n,r),o.vorgang.continueVorgang(e,t,n,r)},isCalledByVorgang:function(t){return i("vorgang.isCalledByVorgang",t),o.vorgang.isCalledByVorgang(e,t)},getCallerDescription:function(){return i("vorgang.getCallerDescription"),o.vorgang.getCallerDescription(e)},returnToCaller:function(){i("vorgang.returnToCaller"),o.vorgang.returnToCaller(e)},clearCallerStack:function(){i("vorgang.clearCallerStack"),o.vorgang.clearCallerStack(e)},copyStackForServer:function(){return i("vorgang.copyStackForServer"),o.vorgang.copyStackForServer(e)},setStack:function(t){i("vorgang.setStack",t),o.vorgang.setStack(e,t)},isNotEmpty:function(){return i("vorgang.isNotEmpty"),o.vorgang.isNotEmpty(e)},startNewWorkflow:function(t,n,r,s,a){i("vorgang.startNewWorkflow",n,r,s,a),o.vorgang.startNewWorkflow(e,t,n,r,s,a)},isCalledByWorkflow:function(t){return i("vorgang.isCalledByWorkflow",t),o.vorgang.isCalledByWorkflow(e,t)}}}}}),define("tao/ospm/control/UiControl",["tao/lib/stapes","tao/ospm/common/Logger","tao/ospm/common/Constants","tao/ospm/core/UIToolkit"],function(e,t,n){var i;return i=new t("OSPM","UiControl"),{getAPI:function(e,t,o){function r(n){i.debug("%o(%o): Aufruf von %o(%o)",t,e,n,Array.prototype.slice.call(arguments,1))}function s(t){u&&(u.rendered=!1),c.ui.setLayout(e,o,t),u=t,c.workflow.showCurrentStep(e)}var a,l,c=document.OSPMEnvironment.OSPMCommunication,u=null;return a={setLayout:function(e){r("setLayout",e?e.getId():null),s(e)},getLayout:function(){return u},setContent:function(e){r("setContent",e?e.getId():null),s(e)},getContent:function(){return u},setValidationContainer:function(e){r("setValidationContainer",e?e:null),l=e},getValidationContainer:function(){return l},elementWithId:function(e){var t,n,i=null;for(t=document.OSPMEnvironment.getAllDialogs(),n=t.length-1;n>=0;n--)if(null!==t[n].getContent()&&(i=t[n].getContent().elementWithId(e)))return i;return u?u.elementWithId(e):null},parentOfElement:function(e){return u?u.parentOfElement(e):null},getSelectionGroup:function(e){return c.ui.getSelectionGroup(e)},showStartbar:function(t,n){r("showStartbar",t,n),c.ui.showStartbar(e,t,n)},setPageTitle:function(t){c.ui.setStepTitle(e,t)},getPageTitle:function(){return c.ui.getStepTitle(e)},setGpsAktivitaetNameInTitle:function(t){c.ui.setGpsAktivitaetNameInTitle(e,t)},setLoginInTitle:function(t){c.ui.setLoginInTitle(e,t)},openWindow:function(t,n,i){return r("openWindow",t,n,i),c.ui.openWindow(e,t,n,i)},print:function(){r("print"),c.ui.print(e)},checkInput:function(t,n){return r("checkInput",t,n),c.ui.checkInput(e,n?n:u,t)},scrollTo:function(t,n){r("scrollTo",t,n),c.ui.scrollTo(e,t,n)},showVoiceRecordButton:function(){r("showVoiceRecordButton"),c.ui.showVoiceRecordButton(e)},hideVoiceRecordButton:function(){r("hideVoiceRecordButton"),c.ui.hideVoiceRecordButton(e)},showHelpButton:function(){r("showHelpButton"),c.ui.showHelpButton(e)},hideHelpButton:function(){r("hideHelpButton"),c.ui.hideHelpButton(e)},sidebar:{show:function(t,n){r("sidebar.show",t,n),c.ui.sidebar.show(e,t,n)},reset:function(){r("sidebar.reset"),c.ui.sidebar.reset(e)},addCustomButton:function(t,n,i,o){r("sidebar.addCustomButton",t,n,i,o),c.ui.sidebar.addCustomButton(e,t,n,i,o)},setCustomButtonEnabled:function(t,n){r("sidebar.setCustomButtonEnabled",t,n),c.ui.sidebar.setCustomButtonEnabled(e,t,n)},removeCustomButton:function(t){r("sidebar.removeCustomButton",t),c.ui.sidebar.removeCustomButton(e,t)},removeAllCustomButtons:function(){r("sidebar.removeAllCustomButtons"),c.ui.sidebar.removeAllCustomButtons(e)}},dialogs:{createInputDialog:function(t){return r("dialogs.createInputDialog",t),c.dialogs.createInputDialog(e,t)},showTextDialog:function(t){r("dialogs.createTextDialog",t),c.dialogs.showTextDialog(e,t)},showSecurityDialog:function(t,n,i){r("dialogs.showSecurityDialog",t),c.dialogs.showSecurityDialog(e,t,n,i)},showErrorDialog:function(t){r("dialogs.showErrorDialog",t),c.dialogs.showErrorDialog(e,t)}},menus:{createContextMenu:function(t){return r("menus.createContextMenu",t),c.menus.createContextMenu(e,t)}},popup:{enterOnScreenKeyboardSBT:function(){return r("popup.enterOnScreenKeyboardSBT"),c.popup.enterOnScreenKeyboardSBT()},closeOnScreenKeyboardSBT:function(){return r("popup.closeOnScreenKeyboardSBT"),c.popup.closeOnScreenKeyboardSBT()},show:function(t,n){return r("popup.show",t,n),c.popup.show(e,t,n)},hide:function(t){return r("popup.hide",t),c.popup.hide(e,t)},isShowing:function(t){return r("popup.isShowing",t),c.popup.isShowing(e,t)},get:function(t){return r("popup.get",t),c.popup.get(e,t)}},progress:{start:function(t){return r("progress.start",t),c.progress.start(e,t)},stop:function(t){return r("progress.stop",t),c.progress.stop(e,t)},update:function(t,n){return r("progress.update",t,n),c.progress.update(e,t,n)},stopAll:function(){return r("progress.stopAll"),c.progress.stopAll(e)},getStatus:function(){return r("progress.getStatus"),c.progress.getStatus(e)},disableImageShow:function(){r("progress.disableImageShow"),c.progress.disableImageShow(e)},enableImageShow:function(){r("progress.enableImageShow"),c.progress.enableImageShow(e)},isImageShowEnabled:function(){return r("progress.isImageShowEnabled"),c.progress.isImageShowEnabled(e)}},constants:{TYPE_LIGHT:n.TYPES.LIGHT,TYPE_NEGATIVE:n.TYPES.NEGATIVE,TYPE_NEUTRAL:n.TYPES.NEUTRAL,TYPE_POSITIVE:n.TYPES.POSITIVE,INPUT_DATA_TYPE_TEXT:n.INPUT_DATA_TYPE.TEXT,INPUT_DATA_TYPE_NUMBER:n.INPUT_DATA_TYPE.NUMBER,INPUT_DATA_TYPE_INTEGER:n.INPUT_DATA_TYPE.INTEGER,INPUT_DATA_TYPE_DATE:n.INPUT_DATA_TYPE.DATE,INPUT_DATA_TYPE_TIME:n.INPUT_DATA_TYPE.TIME,INPUT_DATA_TYPE_DATE_TIME:n.INPUT_DATA_TYPE.DATE_TIME,DISPLAY_POSITIVE:n.DISPLAY.POSITIVE,DISPLAY_NEUTRAL:n.DISPLAY.NEUTRAL,DISPLAY_NEGATIVE:n.DISPLAY.NEGATIVE,DISPLAY_NORMAL:n.DISPLAY.NORMAL,DISPLAY_HIGHLIGHTED:n.DISPLAY.HIGHLIGHTED,DISPLAY_DEFAULT:n.DISPLAY.DEFAULT,HORIZONTAL_ALIGNMENT_LEFT:n.HORIZONTAL_ALIGNMENT.LEFT,HORIZONTAL_ALIGNMENT_CENTER:n.HORIZONTAL_ALIGNMENT.CENTER,HORIZONTAL_ALIGNMENT_RIGHT:n.HORIZONTAL_ALIGNMENT.RIGHT,DIALOG_ERROR_TYPE:n.DIALOG_ERROR_TYPE,TEXT_STYLE:n.TEXT_STYLE,DATE_PICKER_DISPLAY_MODE:n.DATE_PICKER_DISPLAY_MODE}},c.createUIFunctions(e,a,t),a}}}),define("tao/ospm/control/OSPMServerControl",["tao/ospm/common/Logger","tao/ospm/common/OSPMError"],function(e,t){var n=new e("OSPM","ServerControl");return{getAPI:function(e,i){function o(t){n.debug("%o(%o): Aufruf von %o(%o)",i.context.name,e,t,Array.prototype.slice.call(arguments,1))}function r(){var e=i.workflow.STATES,n=i.workflow.currentState();if(n<e.RUNNING||n===e.EXITED)throw new t("WorkflowStep in ungültigem Zustand für den Aufruf von Server-Requests",{state:n})}var s=document.OSPMEnvironment.OSPMCommunication.server;return{accessApplication:function(t,n){return o("accessApplication",t),r(),s.accessApplication(e,t,n)},releaseApplication:function(t){return o("releaseApplication",t),r(),s.releaseApplication(e,t)},executeRequest:function(t,n,i,a,l,c){o("executeRequest",t,n,a,l,c),r(),s.executeRequest(e,t,n,i,a,l,c)},executeBackgroundRequest:function(t,n,i,a){o("executeBackgroundRequest",t,n,a),r(),s.executeBackgroundRequest(e,t,n,i,a)},beginAsyncRequest:function(t,n,i,a){return o("beginAsyncRequest",t,n,i,a),r(),s.beginAsyncRequest(e,t,n,i,a)},finishAsyncRequest:function(t,n,i,a,l,c){o("finishAsyncRequest",t,i,a,l,c),r(),s.finishAsyncRequest(e,t,n,i,a,l,c)},checkAsyncRequest:function(t,n,i,a,l,c){o("checkAsyncRequest",t,i,a,l,c),r(),s.checkAsyncRequest(e,t,n,i,a,l,c)},isIdle:function(){return o("isIdle"),r(),s.isIdle(e)},getSVZData:function(t,n,i){o("getSVZData",t,n),s.getSVZData(e,t,n,i)},isPmsTraceEnabled:function(){return o("isPmsTraceEnabled"),s.isPmsTraceEnabled()},downloadPmsTrace:function(t,n,i){o("downloadPmsTrace",t),r(),s.downloadPmsTrace(e,t,n,i)},downloadFile:function(t,n){o("downloadFile",t,n),r(),s.downloadFile(e,t,n)},openFile:function(t,n,i){return o("openFile",t,n,i),r(),s.openFile(e,t,n,i)},getDownloadUrl:function(t,n){return o("getDownloadUrl",t),r(),s.getDownloadUrl(e,t,n)},fileUpload:function(t,n,i,s){return o("File Upload"),r(),document.OSPMEnvironment.OSPMCommunication.fileUpload(e,t,n,i,s)},undUpload:function(e,t,n,i){o("UnD File Upload"),r(),document.OSPMEnvironment.OSPMCommunication.undUpload(e,t,n,i)},filePicker:function(e,t,n,i){o("UnD File Picker"),r(),document.OSPMEnvironment.OSPMCommunication.filePicker(e,t,n,i)},whatsNew:function(t){return o("Whats New"),r(),document.OSPMEnvironment.OSPMCommunication.whatsNew(e,t)},getApplications:function(){return o("getApplications"),r(),s.getApplications(e)}}}}}),define("tao/ospm/control/SessionControl",["tao/ospm/common/Config","tao/ospm/common/Logger","tao/ospm/common/Toolkit","tao/ospm/core/BusyView","tao/ospm/common/Constants","tao/ospm/core/CoreConstants"],function(e,t,n,i,o,r){var s=new t("OSPM","SessionControl");return{getAPI:function(t,a){function l(e){s.debug("%o(%o): Aufruf von %o(%o)",a,t,e,Array.prototype.slice.call(arguments,1))}var c,u,d,h,m,p,f,g,_;return c=document.OSPMEnvironment.OSPMCommunication,u=c.session,d=c.user,h=c.reporting,m=c.environment,p=c.persistence,f=c.help,g=c.bilderpool,_=c.progress,{person:{lesePerson:function(e,n,i){return l("person.lesePerson",e,n,i),p.lesePerson(t,e,n,i)},add:function(e,n,i,o){return l("person.add",e,n,i,o),p.personAdd(t,e,n,i,o)},remove:function(e,n,i){return l("person.remove",e,n,i),p.personRemove(t,e,n,i)},getAll:function(e){return l("person.getAll",e),p.personGetAll(t,e)},removeAll:function(e,n){return l("person.removeAll",e,n),p.personRemoveAll(t,e,n)}},vorgang:{add:function(e,n,i,o,r){return l("vorgang.add",e,n,i,o,r),p.vorgangAdd(t,e,n,i,o,r)},remove:function(e,n,i){return l("vorgang.remove",e,n,i),p.vorgangRemove(t,e,n,i)},getAll:function(e){return l("vorgang.getAll",e),p.vorgangGetAll(t,e)},removeAll:function(e,n){return l("vorgang.removeAll",e,n),p.vorgangRemoveAll(t,e,n)}},messages:{SCOPES:u.messages.SCOPES,add:function(e,n,i,o,r,s,a,c){return l("messages.add",e,n,i,a,c),u.messages.add(t,e,n,i,o,r,s,a,c)},get:function(e){return l("messages.get"),u.messages.get(t,e)},remove:function(e){return l("messages.remove",e),u.messages.remove(t,e)},all:function(){return l("messages.all"),u.messages.all(t)},clear:function(e){return l("messages.clear",e),u.messages.clear(t,e)}},process:{setProgressInformation:function(e){return l("process.setProgressInformation",e),u.process.setProgressInformation(t,e)},getProgressInformation:function(){return l("process.getProgressInformation"),u.process.getProgressInformation(t)
},setCurrentStep:function(e){return l("process.setCurrentStep",e),u.process.setCurrentStep(t,e)},getCurrentStep:function(){return l("process.getCurrentStep"),u.process.getCurrentStep(t)},setGpsHelpId:function(e){return l("process.setGpsHelpId",e),u.process.setGpsHelpId(t,e)},getGpsHelpId:function(){return l("process.getGpsHelpId"),u.process.getGpsHelpId(t)}},context:{setNeoPerson:function(e){l("context.setNeoPerson",e),u.context.setNeoPerson(t,e)},setNeoVertrag:function(e,n){l("context.setNeoVertrag",e,n),u.context.setNeoVertrag(t,e,n)},getNeoPerson:function(){return u.context.getNeoPerson(t)},getNeoVertrag:function(){return u.context.getNeoVertrag(t)},getInitialNeoPerson:function(){return u.context.getInitialNeoPerson(t)},getInitialPersNr:function(){return u.context.getInitialPersNr(t)},setDeleteListener:function(e){return l("context.setDeleteListener",e),u.context.setDeleteListener(t,e)}},info:{setIcon:function(e){l("info.setIcon",e)},setVorgangIcon:function(){var e=n.argumentsToParameterObject(arguments,["vorgangIcon"]);return l("info.setVorgangIcon",e.vorgangIcon),u.info.setVorgangIcon(t,e)},setTitle:function(){var e=n.argumentsToParameterObject(arguments,["title","subTitle"]);return l("info.setTitle",e.title,e.subTitle),u.info.setTitle(t,e)},clearOptionalePfade:function(){var e=n.argumentsToParameterObject(arguments,["label"]);return l("info.clearOptionalePfade",e.label),u.info.clearOptionalePfade(t,e)},setOptionalenPfad:function(){var e=n.argumentsToParameterObject(arguments,["label","workflowAction","service","actions"]);return l("info.setOptionalenPfad",e.label,e.workflowAction,e.service,e.actions),u.info.setOptionalenPfad(t,e)},setInformation:function(){var e=n.argumentsToParameterObject(arguments,["label","value","type","service","editable","actions"]);return l("info.setInformation",e.label,e.value,e.type,e.service,e.editable,e.actions),u.info.setInformation(t,e)},clearInformation:function(){var e=n.argumentsToParameterObject(arguments,["label"]);return l("info.clearInformation",e.label),u.info.clearInformation(t,e)},clearGroup:function(e){var i;return i="object"==typeof e?e:n.argumentsToParameterObject(arguments,["group"]),l("info.clearGroup",i.group),u.info.clearGroup(t,i)},setGroupElement:function(e){var i;return i=1===arguments.length&&"object"==typeof e?e:n.argumentsToParameterObject(arguments,["group","label","workflowAction","service","actions","value","subgroup","elementId","groupId","subgroupId"]),l("info.setGroupElement",i.group,i.subgroup,i.label,i.workflowAction,i.service,i.actions,i.value),u.info.setGroupElement(t,i)},setGroupService:function(){var e=n.argumentsToParameterObject(arguments,["group","service"]);return l("info.setGroupElement",e.group,e.service),u.info.setGroupService(t,e)},clearAll:function(){return l("info.clearAll"),u.info.clearAll(t)},startWorkflow:function(){var e=n.argumentsToParameterObject(arguments,["workflowAction"]);return l("info.startWorkflow",e.workflowAction),u.info.startWorkflow(t,e)},startDashboard:function(){var e=n.argumentsToParameterObject(arguments,["dashboardAction"]);return e=e||{},void 0===e.dashboardAction&&(e.dashboardAction={}),l("info.startDashboard",e.dashboardAction),u.info.startDashboard(t,e)},openURL:function(){var e=n.argumentsToParameterObject(arguments,["url"]);return l("info.openURL",e.url),u.info.openURL(t,e)},showDialog:function(){var e=n.argumentsToParameterObject(arguments,["dialog"]);return l("info.showDialog",e.dialog),u.info.showDialog(t,e)},setVorgangAblegen:function(e){return l("info.vorgangAblegen",e),u.info.setVorgangAblegen(t,e)},setVorgangBeenden:function(e){return l("info.vorgangBeenden",e),u.info.setVorgangBeenden(t,e)},setVorgangLoeschen:function(e){return l("info.vorgangLoeschen",e),u.info.setVorgangLoeschen(t,e)},hasVorgangAblegen:function(){return l("info.hasVorgangAblegen"),u.info.hasVorgangAblegen(t)},hasVorgangBeenden:function(){return l("info.hasVorgangBeenden"),u.info.hasVorgangBeenden(t)},hasVorgangLoeschen:function(){return l("info.hasVorgangLoeschen"),u.info.hasVorgangLoeschen(t)},startVorgangAblegen:function(){l("info.startVorgangAblegen"),u.info.startVorgangAblegen(t)},startVorgangBeenden:function(){l("info.startVorgangBeenden"),u.info.startVorgangBeenden(t)},startVorgangLoeschen:function(){l("info.startVorgangLoeschen"),u.info.startVorgangLoeschen(t)},startWorkflowDialog:function(e,t,n,i){l("info.startWorkflowDialog"),u.info.startWorkflowDialog(e,t,n,i)},callGpsFunction:function(e){l("info.callGpsFunction",e),u.info.callGpsFunction(e)},setStartBarButtonListener:function(e){l("info.setStartBarButtonListener",e),u.info.setStartBarButtonListener(e)}},user:{getUserData:function(){return l("user.getUserData"),d.getUserData()},getInstitutData:function(){return l("user.getInstitutData"),d.getInstitutData()}},environment:{isIspContext:function(){return l("environment.isIspContext"),Boolean(e.ISP)},isInternetFiliale:function(){return l("environment.isInternetFiliale"),m.isInternetFiliale()},callInternetFilialeWorkflow:function(e,n){return l("environment.callInternetFilialeWorkflow"),m.callInternetFilialeWorkflow(t,e,n)},prozessEndeBehandlung:function(e,n){return l("environment.prozessEndeBehandlung"),m.prozessEndeBehandlung(t,e,n)},isSApp:function(){return l("environment.isSApp"),m.isSApp()},isSBContext:function(){return l("environment.isSBContext"),m.isSBContext()},isIPadApp:function(){return l("environment.isIPadApp"),m.isIPadApp()},getSystemLanguage:function(){var e,t,n,i=/^[a-z]{2}(-[A-Z]{2})?$/g,o="de-DE";for(document&&document.documentElement&&document.documentElement.lang&&(o=document.documentElement.lang),e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++)if(t=e[n].split("="),"language"===t[0]){o=t[1];break}return i.test(o)||(s.error('Die aus dem Rahmen übernommene Sprache hat ein ungültiges Format. OSPlus_neo nutzt daher "de-DE".'),o="de-DE"),o},getViewLanguage:function(){return this.getSystemLanguage().startsWith("en")?"en":"de"},getDesignVariant:function(){return window.nbf===!0?o.DESIGN_VARIANTS.NBF:o.DESIGN_VARIANTS.CLASSIC},isMobile:function(){return document.body.classList.contains(r.MOBILE)}},reporting:{createClientReport:function(e){l("reporting.createClientReport"),h.createClientReport(t,e)}},options:{setDashboardFavoriten:function(e,t){l("options.setDashboardFavoriten",e,t),c.dashboard.setFavoriten(e,t)},setOnlineHelpAdminMode:function(e){l("options.setOnlineHelpAdminMode",e),f.setAdminMode(e)},isOnlineHelpAdminMode:function(){return l("options.isOnlineHelpAdminMode"),f.isAdminMode()},setBilderpoolAdminMode:function(e){l("options.setBilderpoolAdminMode",e),g.setAdminMode(e)},isBilderpoolAdminMode:function(){return l("options.isBilderpoolAdminMode"),g.isAdminMode()},setBilderpoolTargetDate:function(e){l("options.setBilderpoolTargetDate",e),g.setTargetDate(e)},getBilderpoolTargetDate:function(){return l("options.getBilderpoolTargetDate"),g.getTargetDate()},progress:{isImagesActivated:function(){return l("options.progress.isImagesActivated"),i.isImagesActivated()},isImagesEnabled:function(){return l("options.progress.isImagesEnabled"),e.BUSYVIEW_IMAGE_ENABLED},getInitialImageDelay:function(){return l("options.progress.getInitialImageDelay"),e.BUSYVIEW_IMAGE_INIT_PERIOD},getImagePresentationPeriod:function(){return l("options.progress.getImagePresentationPeriod"),e.BUSYVIEW_IMAGE_PRESENTATION_PERIOD},getImageMinimumPresentationPeriod:function(){return l("options.progress.getImageMinimumPresentationPeriod"),e.BUSYVIEW_IMAGE_MINIMUM_PRESENTATION_PERIOD},setImagePresentation:function(e,n){l("options.progress.setImagePresentation",e),_.setImagePresentation(t,e,n)}}}}}}}),define("tao/ospm/control/StorageControl",["tao/ospm/common/Logger"],function(e){var t=new e("OSPM","StorageControl");return{getAPI:function(e,n){function i(i){t.debug("%o(%o): Aufruf von %o(%o)",n,e,i,Array.prototype.slice.call(arguments,1))}var o=document.OSPMEnvironment.OSPMCommunication.storage;return{server:{get:function(t,n){return i("storage.server.get"),o.server.get(e,t,n)},getAll:function(t,n){return i("storage.server.getAll"),o.server.getAll(e,t,n)},getCount:function(t,n){return i("storage.server.getCount"),o.server.getCount(e,t,n)},put:function(t,n){return i("storage.server.put"),o.server.put(e,t,n)},remove:function(t,n){return i("storage.server.remove"),o.server.remove(e,t,n)},removeAll:function(t,n){return i("storage.server.removeAll"),o.server.removeAll(e,t,n)},trim:function(t,n){return i("storage.server.trim"),o.server.trim(e,t,n)}},getData:function(t,n){return i("storage.getData"),o.getData(e,t,n)},putData:function(t,n,r){return i("storage.putData"),o.putData(e,t,n,r)},getKeys:function(t){return i("storage.getKeys"),o.getKeys(e,t)},clearData:function(t){return i("storage.clearData"),o.clearData(e,t)}}}}}),define("tao/ospm/control/BusinessComponentsControl",["tao/lib/stapes"],function(){return{getAPI:function(e){return{createComponent:function(t){return e.createComponent(t)},setTechnicalErrorHandler:function(t){return e.setTechnicalErrorHandler(t)},isComponentTypeAvailable:function(t){return e.isComponentTypeAvailable(t)},fetch:function(t,n){return e.fetch(t,n)},save:function(t,n){return e.save(t,n)},isRequestedComponentTypeId:function(t){return e.isRequestedComponentTypeId(t)},onTechnicalError:function(t){return e.onTechnicalError(t)},addTechnicalError:function(t){return e.addTechnicalError(t)}}}}}),define("tao/ospm/control/PluginsControl",["tao/lib/stapes","tao/ospm/common/Logger"],function(e,t){var n=new t("OSPM","PluginsControl");return{getAPI:function(e,t){function i(i){n.debug("%o(%o): Aufruf von %o(%o)",t.context.name,e,i,Array.prototype.slice.call(arguments,1))}var o=document.OSPMEnvironment.OSPMCommunication.plugins;return{tan:{getTanMedium:function(t,n){return i("plugins.tan.getTanMedium"),o.tan.getTanMedium(e,t,n)},getPushTan:function(t,n,r){return i("plugins.tan.getPushTan",t),o.tan.getPushTan(e,t,n,r)}},storeGiroExpressData:function(t,n,r){return i("plugins.storeGiroExpressData",t),o.storeGiroExpressData(e,t,n,r)},storeRegistrationName:function(t,n,r){return i("plugins.storeRegistrationName",t),o.storeRegistrationName(e,t,n,r)},storeAccountInfo:function(t,n,r){return i("plugins.storeAccountInfo",t),o.storeAccountInfo(e,t,n,r)},storeProcessInfo:function(t,n,r){return i("plugins.storeProcessInfo",t),o.storeProcessInfo(e,t,n,r)},createDocumentViewer:function(t){return i("plugins.createDocumentViewer",t),o.createDocumentViewer(e,t)},openPdfViewer:function(t,n,r){return i("plugins.openPdfViewer",t),o.openPdfViewer(e,t,n,r)},createSignatureDialog:function(t){return i("plugins.createSignatureDialog",t),o.createSignatureDialog(e,t)},druckerAuswahl:function(t){return i("plugins.druckerAuswahl"),o.druckerAuswahl(e,t)},getStandardDrucker:function(t){return i("plugins.getStandardDrucker"),o.getStandardDrucker(e,t)},addDruckerToLayout:function(t,n){return o.addDruckerToLayout(e,t,n)},druckAuftrag:function(t,n,r){return i("plugins.druckAuftrag",t),o.druckAuftrag(e,t,n,r)}}}}}),define("tao/ospm/control/E2ELoggingContextControl",["tao/ospm/common/Logger","tao/ospm/core/E2ETransaction"],function(e,t){new e("OSPM","E2ELoggingContextControl");return{getAPI:function(){return{setGPSLoggingContext:function(e){t.setGPSLoggingContext(e)},invalidateGPSLoggingContext:function(){t.invalidateGPSLoggingContext()},getGPSLoggingContext:function(){return t.getGPSLoggingContext()}}}}}),define("tao/ospm/ui/MessengerClientUtils",[],function(){var e,t=null,n=function(e){var n=e&&e.data?e.data:null;t(n)};return e={getAPI:function(){return{setMessageListener:function(e){t=e,window.addEventListener("message",n,!1)},removeMessageListener:function(){window.removeEventListener("message",messageListener),t=null}}}}}),define("tao/ospm/ApiFactory",["tao/ospm/control/WorkflowControl","tao/ospm/control/VorgangControl","tao/ospm/control/UiControl","tao/ospm/control/OSPMServerControl","tao/ospm/control/SessionControl","tao/ospm/control/StorageControl","tao/ospm/control/BusinessComponentsControl","tao/ospm/control/PluginsControl","tao/ospm/control/E2ELoggingContextControl","tao/ospm/ui/MessengerUtils","tao/ospm/ui/MessengerClientUtils","tao/ospm/common/Toolkit","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/MessageScope"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p){return{createTaoOspmApi:function(f,g,_,v,b){var y,C=document.OSPMEnvironment.OSPMCommunication;return C.packageLoadProgress(f,"Initialisiere API fuer "+g+"("+f+")"),y={workflowStepId:g,ui:n.getAPI(f,g,v),session:o.getAPI(f,g),serverEnvironment:document.OSPMEnvironment.getServerEnvironment(),storage:r.getAPI(f,g),businessComponents:s.getAPI(b),e2eLoggingContext:l.getAPI(),common:{constants:d.deepCopy(h),config:d.deepCopy(m),messageScope:d.deepCopy(p)},plugins:null,workflow:null,vorgang:t.getAPI(f),server:null,context:null,workflowStep:null,messenger:c.getAPI(f),messengerClient:u.getAPI()},y.workflow=e.getAPI(f,g,y),y.server=i.getAPI(f,y),y.plugins=a.getAPI(f,y),_.TaoOSPM=y,C.setTaoOSPM(f,y),y}}}),define("tao/ospm/if/IspStartVerify",[],function(){return{check:function(e){e()}}}),function(){var e=255,t=function(e){console.log("data: "+JSON.stringify(e))},n=function(e){console.error("error: "+JSON.stringify(e))},i=[],o=-1,r=function(){return o=(o+1)%(e+1)},s=function(e,t,n){var o=r();return i[o]={func:e,cb:t,err:n},o},a=navigator.userAgent.match("SparkasseWKWebView"),l={_bridgeConnector:function(e,t,n){var o=parseInt(e),r=i[o];t?r.cb(t):n?r.err(n):enrty.err({message:"Empty response"}),delete i[o]},getProtocolVersion:function(e,i){e=e||t,i=i||n;var o="getProtocolVersion";if("undefined"!=typeof SfBridge)SfBridge.getProtocolVersion(s(o,e,i));else if(a){var r=s(o,e,i),l={},c=[o,r,JSON.parse(JSON.stringify(l))];webkit.messageHandlers.SfTan.postMessage(c)}else i({message:"no provider connected"})},getClientInfo:function(e,i){e=e||t,i=i||n;var o="getClientInfo";if("undefined"!=typeof SfBridge)SfBridge.getClientInfo(s(o,e,i));else if(a){var r=s(o,e,i),l={},c=[o,r,JSON.parse(JSON.stringify(l))];webkit.messageHandlers.SfTan.postMessage(c)}else i({message:"no provider connected"})},getTanProcedure:function(e,i){e=e||t,i=i||n;var o="getTanProcedure";if("undefined"!=typeof SfBridge)SfBridge.getTanProcedure(s(o,e,i));else if(a){var r=s(o,e,i),l={},c=[o,r,JSON.parse(JSON.stringify(l))];webkit.messageHandlers.SfTan.postMessage(c)}else i({message:"no provider connected"})},getTanMedium:function(e,i){e=e||t,i=i||n;var o="getTanMedium";if("undefined"!=typeof SfBridge)SfBridge.getTanMedium(s(o,e,i));else if(a){var r=s(o,e,i),l={},c=[o,r,JSON.parse(JSON.stringify(l))];webkit.messageHandlers.SfTan.postMessage(c)}else i({message:"no provider connected"})},getPushTan:function(e,i,o){i=i||t,o=o||n;var r="getPushTan";if("undefined"!=typeof SfBridge)SfBridge.getPushTan(s(r,i,o),e);else if(a){var l=s(r,i,o),c={orderId:e},u=[r,l,JSON.parse(JSON.stringify(c))];webkit.messageHandlers.SfTan.postMessage(u)}else o({message:"no provider connected"})}};window.SfTan=l,"function"==typeof define&&define.amd&&define("tao/lib/sftan",[],function(){return l})}(),function(){function e(){return window.webkit&&window.webkit.messageHandlers}function t(){return window.GiroExpressNeoBridge}window.SFGiroExpress={sendGiroExpressData:function(n,i,o){if(e())try{webkit.messageHandlers.giroexpress.postMessage(JSON.stringify({blz:n.blz,neoId:n.neoId,ereignisId:n.ereignisId,legLandingPageUrl:n.legLandingPageUrl})),i()}catch(r){o("Can not reach native iOS code")}else if(t())try{GiroExpressNeoBridge.storeData(n.blz,n.neoId,n.ereignisId,n.legLandingPageUrl),i()}catch(r){o("Cannot reach native Android code")}else o("No native code bridge found")},sendRegistrationName:function(n,i,o){if(e())try{webkit.messageHandlers.registrationName.postMessage(JSON.stringify({registrationName:n})),i()}catch(r){o("Can not reach native iOS code")}else if(t())try{GiroExpressNeoBridge.storeRegistrationName(n),i()}catch(r){o("Cannot reach native Android code")}else o("No native code bridge found")},sendAccountInfo:function(n,i,o){if(e())try{webkit.messageHandlers.accountInfo.postMessage(JSON.stringify({iban:n.iban,pinLength:n.pinLength,optionalInfo:n.optionalInfo})),i()}catch(r){o("Can not reach native iOS code")}else if(t())try{GiroExpressNeoBridge.storeAccountInfo(n.iban,n.pinLength,n.optionalInfo),i()}catch(r){o("Cannot reach native Android code")}else o("No native code bridge found")},sendProcessInfo:function(n,i,o){if(e())try{webkit.messageHandlers.processInfo.postMessage(JSON.stringify({neoId:n})),i()}catch(r){o("Can not reach native iOS code")}else if(t())try{GiroExpressNeoBridge.storeProcessInfo(n),i()}catch(r){o("Cannot reach native Android code")}else o("No native code bridge found")}},"function"==typeof define&&define.amd&&define("tao/lib/sfgiroxpress",[],function(){return window.SFGiroExpress})}(),define("tao/ospm/Main",["tao/ospm/core/OSPMPage","tao/ospm/common/Constants","tao/ospm/common/Config","tao/ospm/common/Logger","tao/ospm/common/OSPMError","tao/ospm/common/AsyncTaskHandler","tao/ospm/common/Toolkit","tao/ospm/core/CoreConstants","tao/ospm/core/SVZList","tao/ospm/core/OSPMEnvironment","tao/ospm/core/ThemeManager","tao/ospm/main/WorkflowStepManager","tao/ospm/WorkflowEngine","tao/ospm/main/CallerStack","tao/ospm/core/ServerCommunication","tao/ospm/main/IFrameCommunication","tao/ospm/ui/views/AppView","tao/ospm/core/SessionManager","tao/ospm/core/E2ETransaction","tao/ospm/core/ClientRequestContext","tao/ospm/main/BacklinkHandler","tao/ospm/ui/UIFactory","tao/ospm/ui/views/DialogView","tao/ospm/ui/views/ContextMenuView","tao/ospm/ui/SidebarInfo","tao/ospm/main/Messages","tao/ospm/main/AppStorage","tao/ospm/core/LogoutTimer","tao/ospm/core/LogoutTimerActions","tao/ospm/ui/views/sidebar/AdminTabView","tao/ospm/core/BusyView","tao/ospm/ui/widgets/WidgetFactory","tao/ospm/core/UIToolkit","tao/ospm/ui/UIConstants","tao/ospm/main/NeoSession","tao/ospm/ui/views/OnlineHelpPresenter","tao/ospm/core/OnlineHelpService","tao/ospm/main/WorkflowDialogStack","tao/ospm/ui/views/PopUpView","tao/ospm/ui/UIErrorUtils","tao/ospm/main/ClientReport","tao/ospm/core/InternetFilialeBridge","tao/ospm/ui/UIExternHelper","tao/ospm/main/Persistence","tao/ospm/ui/UISecurityDialogHelper","tao/ospm/ui/views/InputDialogView","tao/ospm/ui/UIScrollBarHelper","tao/ospm/ui/UIErrorDialogHelper","tao/ospm/bc/BusinessComponentsAPI","tao/ospm/core/AppServerStorage","tao/ospm/core/FileUpload","tao/ospm/core/UpAndDownloadService","tao/ospm/bilderpool/BilderpoolService","tao/ospm/textpool/TextPoolService","tao/ospm/ui/views/AlertView","tao/ospm/ui/views/PdfView","tao/ospm/ui/views/SignatureView","tao/ospm/main/IPadDruck","tao/ospm/core/ConfigManager","tao/ospm/main/StartBarController","tao/ospm/main/IPadVPIntegration","tao/ospm/ApiFactory","tao/ospm/main/IspStartVerify","tao/ospm/core/LogoutController","tao/ospm/core/PerformanceApi","tao/lib/sftan","tao/lib/sfgiroxpress","tao/ospm/control/ModuleReferences"],function(e,t,n,i,o,r,s,a,l,c,u,d,h,m,p,f,g,_,v,b,y,C,w,E,L,S,D,T,I,k,x,A,O,N,M,P,R,F,B,z,V,H,U,W,j,G,q,Y,K,X,Z,J,$,Q,et,tt,nt,it,ot,rt,st,at,lt,ct,ut,dt,ht,mt){function pt(e){Lt.error("OSPM konnte nicht gestartet werden: %o",e),o.fromError("Startup-Fehler",e)}function ft(e,t,n){pt("object"==typeof n&&"string"==typeof n.description?o.fromError(n.description,e):"string"==typeof e?o.fromError(e,t):e)}function gt(e){document.OSPMEnvironment.OSPMCommunication=f.createAPI(C,g,w,E,L,k,S,D,p,Dt,x,d,m,b,M,R,B,z,V,H,U,W,l,j,G,q,Y,X,Z,J,K,$,h,tt,nt,it,ot,rt,st),e()}function _t(e){return"string"==typeof e&&e.length>0}function vt(){return n.INITIAL_WORKFLOW&&n.INITIAL_WORKFLOW.isStepDescription||_t(n.INITIAL_WORKFLOW)&&_t(n.INITIAL_WORKFLOW_ENTRY)}function bt(){var e,t=A.DEFAULT.createList();e=w.createOkDialog({header:{label:n.LOGOUT_WARNING_POPUP_TITLE},okButton:{label:n.LOGOUT_WARNING_BUTTON,action:function(){e.hide(),T.resetUserInactivityTimer()}}}),St=A.DEFAULT.createInfoText({label:n.LOGOUT_WARNING_TEXT+" "+O.readableTimeLeft(n.LOGOUT_WARNING)+"."}),t.addElement(St),e.setContent(t),e.show()}function yt(e){St.setLabel(n.LOGOUT_WARNING_TEXT+" "+O.readableTimeLeft(e)+".")}function Ct(){}function wt(){vt()?(g.setStartbarVisibility(a.STATE_HIDDEN),h.startInitialWorkflow(!1,g.checkFailedLogins)):h.startNew(t.WORKFLOW_DASHBOARD,null,{},!1,g.checkFailedLogins)}function Et(e){It&&(x.stopBusyView(It),ut.end("mapiLaunch","aborted"),It=null),e()}var Lt,St,Dt,Tt,It;return Lt=new i("OSPM","Main"),Dt=document.OSPMEnvironment.PackageManager,Dt.setApiFactory(at),mt&&dt&&ht||Lt.error("JavaScript-Bibliotheken wurden nicht korrekt geladen"),Tt=null,It=null,c.callMapiWorkflow=function(e,t){function n(){if(0!==c.context.mkgStatus)throw new o("Zugriff auf MAPI nicht möglich, Status-Code: "+c.context.mkgStatus)}function i(){n(),Tt.setInitialBusyViewId(r),Tt.start(e,t)}var r;if(n(),It)throw new o("Es wird bereits ein MAPI-Workflow geladen");r=x.startBusyView("MapiView"),ut.start("mapi",e),Tt?i():(It=r,require(["tao/ospm/ui/views/MapiView"],function(e){c.initMkg(function(){Tt=e,Tt.init(),ct.setMapiView(Tt),It===r&&(It=null,i())})}))},c.isMapiWorkflowActive=function(e){return Tt?Tt.isActive(e):Boolean(It)},c.getActiveMapiApp=function(e){return Tt&&Tt.getActiveApp(e)},c.triggerMapiNavigation=function(e){Tt&&Tt.triggerNavigation(e)},c.abortMapiWorkflow=function(e,t){Tt?Tt.abort(e,t):Et(t)},c.abortAllMapiWorkflows=function(e){Tt?Tt.abortAll(e):Et(e)},c.mapiUiCount=function(e){return Tt?Tt.uiCount(e):null},{start:function(i,l,f){"function"==typeof l&&l(),new r(ft).doScript([{description:"Initialisiere IFrame-Kommunikation",task:gt},{description:"Initialisiere Logout-Timer",task:function(e){var t={keepServerAliveAction:function(){v.ensureTransaction("session","keepAlive"),p.executeRequest()}};n.LOGOUT_TIMEOUT>=0?(t.logoutAction=I.logoutAction,t.warningAction=bt,t.countdownAction=yt,T.initialize(t),O.addListenerForMultipleEvents("keypress click",document,function(){T.resetUserInactivityTimer()})):(t.logoutAction=Ct,t.warningAction=Ct,t.countdownAction=Ct,T.initialize(t)),e()}},{description:"Passe UI dem Institut an",task:u.activateBranding},{description:"Initialisiere WorkflowStepManager",task:function(e){d.initialize(g,w),e()}},{description:"Initialisiere WorkflowDialogStack",task:function(e){F.initialize(g,d,h),e()}},{description:"Initialisiere WorkflowEngine",task:h.initialize},{description:"Aktualisiere Standard-Anwendungen",task:c.updateComponent,onElements:n.STANDARD_APPLICATIONS},{description:"Lade Custom-Code",task:Dt.loadCustomCode},{description:"Initialisiere APIs von Standard-Anwendungen",task:function(e){Dt.prefetchStandardAppAPIs(),e()}},{description:"Initialisiere Dashboard",task:g.initialize,ui_task:!0},{description:"Setze OnlineHilfeAdminModus",task:function(e){n.INITIAL_WORKFLOW_DATA.onlineHilfeAdmMode&&R.setAdminMode(n.INITIAL_WORKFLOW_DATA.onlineHilfeAdmMode),e()}},{description:"Setze VorgangStack",task:function(e){var t=n.INITIAL_WORKFLOW_DATA.DOMAIN_NEO_VORGANGSTACK;if(t)try{m.setStack(JSON.parse(t).stack)}catch(i){throw o.fromError("Fehlerhafter initialer VorgangStack",i)}e()}},{description:"Setze Webservices-Daten",task:function(e){n.STARTUP_WSDATA&&s.isObject(n.STARTUP_WSDATA.NEO_PERSON)&&(Object.keys(n.STARTUP_WSDATA.NEO_PERSON).length>0?M.setInitialPerson(n.STARTUP_WSDATA.NEO_PERSON):Lt.error("Die Person konnte nicht in die Session übernommen werden. Sollte die Person geschützt sein, wird das Recht ZUGRIFFPERS+ benötigt.")),e()}},{description:"Prüfe ISP-Daten",task:function(e){lt.check(e,function(){x.stopBusyView(i)})},timeout:-1}],function(){var o,r;rt.registerEvents(g,L,h,_,e,c),g.on(a.EVENT_EXIT_BUTTON_CLICKED,function(){L.hasVorgangAblegen()?L.startVorgangAblegen():h.startNew(t.WORKFLOW_DASHBOARD,null,{})}),g.on(a.EVENT_HELP_BUTTON_CLICKED,function(){P.showHelp()}),g.on(a.EVENT_BACKLINK,function(){h.abortCurrentWorkflow(a.EVENT_BACKLINK,function(){y.dispatchBack()})}),g.on(a.EVENT_CREATE_REPORT,function(){V.downloadReport()}),"function"==typeof f&&f(),r=/SB&&[a-zA-Z0-9]+&&[A-Za-z0-9.-]+&&/.test(navigator.userAgent),M.getInitialPersNr()&&n.INITIAL_PDM_WORKFLOW&&!n.ISP&&!r?(o={},o[n.INITIAL_PDM_WORKFLOW_DOMAIN_KEY_PERS_NR]=M.getInitialPersNr(),h.startNew(n.INITIAL_PDM_WORKFLOW,n.INITIAL_PDM_WORKFLOW_ENTRY,o,!1,null,wt)):wt(),x.stopBusyView(i)})}}}),define(["tao/ospm/Main"],function(e){return e});
//# sourceMappingURL=OSPMBody.js.map